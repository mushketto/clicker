(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function ob(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var bg={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function cI(){if(iT)return ku;iT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ku.Fragment=e,ku.jsx=t,ku.jsxs=t,ku}var sT;function hI(){return sT||(sT=1,bg.exports=cI()),bg.exports}var k=hI(),wg={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function fI(){if(aT)return Me;aT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,U={};function L(N,ne,he){this.props=N,this.context=ne,this.refs=U,this.updater=he||R}L.prototype.isReactComponent={},L.prototype.setState=function(N,ne){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ne,"setState")},L.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Q(){}Q.prototype=L.prototype;function re(N,ne,he){this.props=N,this.context=ne,this.refs=U,this.updater=he||R}var W=re.prototype=new Q;W.constructor=re,x(W,L.prototype),W.isPureReactComponent=!0;var ce=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ve=Object.prototype.hasOwnProperty;function V(N,ne,he,oe,Ae,Pe){return he=Pe.ref,{$$typeof:s,type:N,key:ne,ref:he!==void 0?he:null,props:Pe}}function S(N,ne){return V(N.type,ne,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function O(N){var ne={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return ne[he]})}var P=/\/+/g;function B(N,ne){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):ne.toString(36)}function D(){}function Ce(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(D,D):(N.status="pending",N.then(function(ne){N.status==="pending"&&(N.status="fulfilled",N.value=ne)},function(ne){N.status==="pending"&&(N.status="rejected",N.reason=ne)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function be(N,ne,he,oe,Ae){var Pe=typeof N;(Pe==="undefined"||Pe==="boolean")&&(N=null);var De=!1;if(N===null)De=!0;else switch(Pe){case"bigint":case"string":case"number":De=!0;break;case"object":switch(N.$$typeof){case s:case e:De=!0;break;case _:return De=N._init,be(De(N._payload),ne,he,oe,Ae)}}if(De)return Ae=Ae(N),De=oe===""?"."+B(N,0):oe,ce(Ae)?(he="",De!=null&&(he=De.replace(P,"$&/")+"/"),be(Ae,ne,he,"",function(Un){return Un})):Ae!=null&&(I(Ae)&&(Ae=S(Ae,he+(Ae.key==null||N&&N.key===Ae.key?"":(""+Ae.key).replace(P,"$&/")+"/")+De)),ne.push(Ae)),1;De=0;var dt=oe===""?".":oe+":";if(ce(N))for(var Oe=0;Oe<N.length;Oe++)oe=N[Oe],Pe=dt+B(oe,Oe),De+=be(oe,ne,he,Pe,Ae);else if(Oe=w(N),typeof Oe=="function")for(N=Oe.call(N),Oe=0;!(oe=N.next()).done;)oe=oe.value,Pe=dt+B(oe,Oe++),De+=be(oe,ne,he,Pe,Ae);else if(Pe==="object"){if(typeof N.then=="function")return be(Ce(N),ne,he,oe,Ae);throw ne=String(N),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return De}function Z(N,ne,he){if(N==null)return N;var oe=[],Ae=0;return be(N,oe,"","",function(Pe){return ne.call(he,Pe,Ae++)}),oe}function ae(N){if(N._status===-1){var ne=N._result;ne=ne(),ne.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=ne)}if(N._status===1)return N._result.default;throw N._result}var ge=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function ze(){}return Me.Children={map:Z,forEach:function(N,ne,he){Z(N,function(){ne.apply(this,arguments)},he)},count:function(N){var ne=0;return Z(N,function(){ne++}),ne},toArray:function(N){return Z(N,function(ne){return ne})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Me.Component=L,Me.Fragment=t,Me.Profiler=a,Me.PureComponent=re,Me.StrictMode=r,Me.Suspense=m,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return le.H.useMemoCache(N)}},Me.cache=function(N){return function(){return N.apply(null,arguments)}},Me.cloneElement=function(N,ne,he){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=x({},N.props),Ae=N.key,Pe=void 0;if(ne!=null)for(De in ne.ref!==void 0&&(Pe=void 0),ne.key!==void 0&&(Ae=""+ne.key),ne)!ve.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(oe[De]=ne[De]);var De=arguments.length-2;if(De===1)oe.children=he;else if(1<De){for(var dt=Array(De),Oe=0;Oe<De;Oe++)dt[Oe]=arguments[Oe+2];oe.children=dt}return V(N.type,Ae,void 0,void 0,Pe,oe)},Me.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Me.createElement=function(N,ne,he){var oe,Ae={},Pe=null;if(ne!=null)for(oe in ne.key!==void 0&&(Pe=""+ne.key),ne)ve.call(ne,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(Ae[oe]=ne[oe]);var De=arguments.length-2;if(De===1)Ae.children=he;else if(1<De){for(var dt=Array(De),Oe=0;Oe<De;Oe++)dt[Oe]=arguments[Oe+2];Ae.children=dt}if(N&&N.defaultProps)for(oe in De=N.defaultProps,De)Ae[oe]===void 0&&(Ae[oe]=De[oe]);return V(N,Pe,void 0,void 0,null,Ae)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(N){return{$$typeof:d,render:N}},Me.isValidElement=I,Me.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ae}},Me.memo=function(N,ne){return{$$typeof:p,type:N,compare:ne===void 0?null:ne}},Me.startTransition=function(N){var ne=le.T,he={};le.T=he;try{var oe=N(),Ae=le.S;Ae!==null&&Ae(he,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ze,ge)}catch(Pe){ge(Pe)}finally{le.T=ne}},Me.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Me.use=function(N){return le.H.use(N)},Me.useActionState=function(N,ne,he){return le.H.useActionState(N,ne,he)},Me.useCallback=function(N,ne){return le.H.useCallback(N,ne)},Me.useContext=function(N){return le.H.useContext(N)},Me.useDebugValue=function(){},Me.useDeferredValue=function(N,ne){return le.H.useDeferredValue(N,ne)},Me.useEffect=function(N,ne,he){var oe=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(N,ne)},Me.useId=function(){return le.H.useId()},Me.useImperativeHandle=function(N,ne,he){return le.H.useImperativeHandle(N,ne,he)},Me.useInsertionEffect=function(N,ne){return le.H.useInsertionEffect(N,ne)},Me.useLayoutEffect=function(N,ne){return le.H.useLayoutEffect(N,ne)},Me.useMemo=function(N,ne){return le.H.useMemo(N,ne)},Me.useOptimistic=function(N,ne){return le.H.useOptimistic(N,ne)},Me.useReducer=function(N,ne,he){return le.H.useReducer(N,ne,he)},Me.useRef=function(N){return le.H.useRef(N)},Me.useState=function(N){return le.H.useState(N)},Me.useSyncExternalStore=function(N,ne,he){return le.H.useSyncExternalStore(N,ne,he)},Me.useTransition=function(){return le.H.useTransition()},Me.version="19.1.0",Me}var oT;function Rp(){return oT||(oT=1,wg.exports=fI()),wg.exports}var F=Rp();const dI=ob(F);var Ag={exports:{}},Lu={},Sg={exports:{}},Rg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function mI(){return lT||(lT=1,function(s){function e(Z,ae){var ge=Z.length;Z.push(ae);e:for(;0<ge;){var ze=ge-1>>>1,N=Z[ze];if(0<a(N,ae))Z[ze]=ae,Z[ge]=N,ge=ze;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ae=Z[0],ge=Z.pop();if(ge!==ae){Z[0]=ge;e:for(var ze=0,N=Z.length,ne=N>>>1;ze<ne;){var he=2*(ze+1)-1,oe=Z[he],Ae=he+1,Pe=Z[Ae];if(0>a(oe,ge))Ae<N&&0>a(Pe,oe)?(Z[ze]=Pe,Z[Ae]=ge,ze=Ae):(Z[ze]=oe,Z[he]=ge,ze=he);else if(Ae<N&&0>a(Pe,ge))Z[ze]=Pe,Z[Ae]=ge,ze=Ae;else break e}}return ae}function a(Z,ae){var ge=Z.sortIndex-ae.sortIndex;return ge!==0?ge:Z.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,w=3,R=!1,x=!1,U=!1,L=!1,Q=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ce(Z){for(var ae=t(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=Z)r(p),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(p)}}function le(Z){if(U=!1,ce(Z),!x)if(t(m)!==null)x=!0,ve||(ve=!0,B());else{var ae=t(p);ae!==null&&be(le,ae.startTime-Z)}}var ve=!1,V=-1,S=5,I=-1;function O(){return L?!0:!(s.unstable_now()-I<S)}function P(){if(L=!1,ve){var Z=s.unstable_now();I=Z;var ae=!0;try{e:{x=!1,U&&(U=!1,re(V),V=-1),R=!0;var ge=w;try{t:{for(ce(Z),T=t(m);T!==null&&!(T.expirationTime>Z&&O());){var ze=T.callback;if(typeof ze=="function"){T.callback=null,w=T.priorityLevel;var N=ze(T.expirationTime<=Z);if(Z=s.unstable_now(),typeof N=="function"){T.callback=N,ce(Z),ae=!0;break t}T===t(m)&&r(m),ce(Z)}else r(m);T=t(m)}if(T!==null)ae=!0;else{var ne=t(p);ne!==null&&be(le,ne.startTime-Z),ae=!1}}break e}finally{T=null,w=ge,R=!1}ae=void 0}}finally{ae?B():ve=!1}}}var B;if(typeof W=="function")B=function(){W(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ce=D.port2;D.port1.onmessage=P,B=function(){Ce.postMessage(null)}}else B=function(){Q(P,0)};function be(Z,ae){V=Q(function(){Z(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var ge=w;w=ae;try{return Z()}finally{w=ge}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Z,ae){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ge=w;w=Z;try{return ae()}finally{w=ge}},s.unstable_scheduleCallback=function(Z,ae,ge){var ze=s.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ze+ge:ze):ge=ze,Z){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ge+N,Z={id:_++,callback:ae,priorityLevel:Z,startTime:ge,expirationTime:N,sortIndex:-1},ge>ze?(Z.sortIndex=ge,e(p,Z),t(m)===null&&Z===t(p)&&(U?(re(V),V=-1):U=!0,be(le,ge-ze))):(Z.sortIndex=N,e(m,Z),x||R||(x=!0,ve||(ve=!0,B()))),Z},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(Z){var ae=w;return function(){var ge=w;w=ae;try{return Z.apply(this,arguments)}finally{w=ge}}}}(Rg)),Rg}var uT;function gI(){return uT||(uT=1,Sg.exports=mI()),Sg.exports}var Ig={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function pI(){if(cT)return yn;cT=1;var s=Rp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},yn.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},yn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},yn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},yn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},yn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},yn.requestFormReset=function(m){r.d.r(m)},yn.unstable_batchedUpdates=function(m,p){return m(p)},yn.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var hT;function yI(){if(hT)return Ig.exports;hT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ig.exports=pI(),Ig.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function _I(){if(fT)return Lu;fT=1;var s=gI(),e=Rp(),t=yI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,b=f.child;b;){if(b===o){E=!0,o=f,u=g;break}if(b===u){E=!0,u=f,o=g;break}b=b.sibling}if(!E){for(b=g.child;b;){if(b===o){E=!0,o=g,u=f;break}if(b===u){E=!0,u=g,o=f;break}b=b.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case L:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case ve:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case W:return(n.displayName||"Context")+".Provider";case re:return(n._context.displayName||"Context")+".Consumer";case ce:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return i=n.displayName||null,i!==null?i:Ce(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return Ce(n(i))}catch{}}return null}var be=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ze=[],N=-1;function ne(n){return{current:n}}function he(n){0>N||(n.current=ze[N],ze[N]=null,N--)}function oe(n,i){N++,ze[N]=n.current,n.current=i}var Ae=ne(null),Pe=ne(null),De=ne(null),dt=ne(null);function Oe(n,i){switch(oe(De,i),oe(Pe,n),oe(Ae,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?NE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=NE(i),n=OE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(Ae),oe(Ae,n)}function Un(){he(Ae),he(Pe),he(De)}function Ve(n){n.memoizedState!==null&&oe(dt,n);var i=Ae.current,o=OE(i,n.type);i!==o&&(oe(Pe,n),oe(Ae,o))}function Wn(n){Pe.current===n&&(he(Ae),he(Pe)),dt.current===n&&(he(dt),Vu._currentValue=ge)}var Bn=Object.prototype.hasOwnProperty,xr=s.unstable_scheduleCallback,yr=s.unstable_cancelCallback,js=s.unstable_shouldYield,Ya=s.unstable_requestPaint,Vn=s.unstable_now,kl=s.unstable_getCurrentPriorityLevel,qs=s.unstable_ImmediatePriority,Ui=s.unstable_UserBlockingPriority,ei=s.unstable_NormalPriority,ti=s.unstable_LowPriority,Bi=s.unstable_IdlePriority,Fs=s.log,Xa=s.unstable_setDisableYieldValue,_t=null,Ze=null;function pe(n){if(typeof Fs=="function"&&Xa(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(_t,n)}catch{}}var de=Math.clz32?Math.clz32:nt,Fe=Math.log,et=Math.LN2;function nt(n){return n>>>=0,n===0?32:31-(Fe(n)/et|0)|0}var Gt=256,Ht=4194304;function Zt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Vt(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~g,u!==0?f=Zt(u):(E&=b,E!==0?f=Zt(E):o||(o=b&~n,o!==0&&(f=Zt(o))))):(b=u&~g,b!==0?f=Zt(b):E!==0?f=Zt(E):o||(o=u&~n,o!==0&&(f=Zt(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function _r(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ni(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gs(){var n=Gt;return Gt<<=1,(Gt&4194048)===0&&(Gt=256),n}function zi(){var n=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),n}function Jn(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Dr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ji(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,C=n.expirationTimes,H=n.hiddenUpdates;for(o=E&~o;0<o;){var J=31-de(o),te=1<<J;b[J]=0,C[J]=-1;var K=H[J];if(K!==null)for(H[J]=null,J=0;J<K.length;J++){var $=K[J];$!==null&&($.lane&=-536870913)}o&=~te}u!==0&&zn(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function zn(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-de(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function qi(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-de(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function er(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function vr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function tr(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:WE(n.type))}function Za(n,i){var o=ae.p;try{return ae.p=n,i()}finally{ae.p=o}}var We=Math.random().toString(36).slice(2),Nt="__reactFiber$"+We,pt="__reactProps$"+We,bn="__reactContainer$"+We,Fi="__reactEvents$"+We,Wa="__reactListeners$"+We,Er="__reactHandles$"+We,jn="__reactResources$"+We,ot="__reactMarker$"+We;function gn(n){delete n[Nt],delete n[pt],delete n[Fi],delete n[Wa],delete n[Er]}function Tr(n){var i=n[Nt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[bn]||o[Nt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=LE(n);n!==null;){if(o=n[Nt])return o;n=LE(n)}return i}n=o,o=n.parentNode}return null}function nr(n){if(n=n[Nt]||n[bn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function rr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function wn(n){var i=n[jn];return i||(i=n[jn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ot(n){n[ot]=!0}var Ll=new Set,Ja={};function br(n,i){ri(n,i),ri(n+"Capture",i)}function ri(n,i){for(Ja[n]=i,n=0;n<i.length;n++)Ll.add(i[n])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jc={},Hs={};function qc(n){return Bn.call(Hs,n)?!0:Bn.call(jc,n)?!1:zc.test(n)?Hs[n]=!0:(jc[n]=!0,!1)}function Gi(n,i,o){if(qc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Cr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function on(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var Qs,Fc;function ii(n){if(Qs===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Qs=i&&i[1]||"",Fc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qs+n+Fc}var eo=!1;function to(n,i){if(!n||eo)return"";eo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var K=$}Reflect.construct(n,[],te)}else{try{te.call()}catch($){K=$}n.call(te.prototype)}}else{try{throw Error()}catch($){K=$}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],b=g[1];if(E&&b){var C=E.split(`
`),H=b.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===H.length)for(u=C.length-1,f=H.length-1;1<=u&&0<=f&&C[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==H[f]){var J=`
`+C[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{eo=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ii(o):""}function Ul(n){switch(n.tag){case 26:case 27:case 5:return ii(n.type);case 16:return ii("Lazy");case 13:return ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return to(n.type,!1);case 11:return to(n.type.render,!1);case 1:return to(n.type,!0);case 31:return ii("Activity");default:return""}}function no(n){try{var i="";do i+=Ul(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function An(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rd(n){var i=Bl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ro(n){n._valueTracker||(n._valueTracker=Rd(n))}function zl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Bl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ks(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Id=/[\n"\\]/g;function Bt(n){return n.replace(Id,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function qn(n,i,o,u,f,g,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+An(i)):n.value!==""+An(i)&&(n.value=""+An(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Hi(n,E,An(i)):o!=null?Hi(n,E,An(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+An(b):n.removeAttribute("name")}function $s(n,i,o,u,f,g,E,b){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+An(o):"",i=i!=null?""+An(i):o,b||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Hi(n,i,o){i==="number"&&Ks(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function si(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+An(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function lt(n,i,o){if(i!=null&&(i=""+An(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+An(o):""}function Ys(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(be(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=An(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function ir(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Xs.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function jl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Gc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&Gc(n,g,i[g])}function ql(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(n){return Dd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ai=null;function sr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oi=null,li=null;function Fl(n){var i=nr(n);if(i&&(n=i.stateNode)){var o=n[pt]||null;e:switch(n=i.stateNode,i.type){case"input":if(qn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[pt]||null;if(!f)throw Error(r(90));qn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&zl(u)}break e;case"textarea":lt(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&si(n,!!o.multiple,i,!1)}}}var Vr=!1;function Hc(n,i,o){if(Vr)return n(i,o);Vr=!0;try{var u=n(i);return u}finally{if(Vr=!1,(oi!==null||li!==null)&&(Uh(),oi&&(i=oi,n=li,li=oi=null,Fl(i),n)))for(i=0;i<n.length;i++)Fl(n[i])}}function Zs(n,i){var o=n.stateNode;if(o===null)return null;var u=o[pt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(wr)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){ar=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{ar=!1}var Nr=null,Qi=null,ui=null;function Gl(){if(ui)return ui;var n,i=Qi,o=i.length,u,f="value"in Nr?Nr.value:Nr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return ui=f.slice(n,1<u?1-u:void 0)}function Or(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Mr(){return!0}function Hl(){return!1}function Wt(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Mr:Hl,this.isPropagationStopped=Hl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),i}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=Wt(tt),Js=_({},tt,{view:0,detail:0}),Qc=Wt(Js),ao,oo,Pr,ea=_({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pr&&(Pr&&n.type==="mousemove"?(ao=n.screenX-Pr.screenX,oo=n.screenY-Pr.screenY):oo=ao=0,Pr=n),ao)},movementY:function(n){return"movementY"in n?n.movementY:oo}}),or=Wt(ea),Kc=_({},ea,{dataTransfer:0}),Cd=Wt(Kc),ta=_({},Js,{relatedTarget:0}),lo=Wt(ta),Ql=_({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),uo=Wt(Ql),$c=_({},tt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),co=Wt($c),Vd=_({},tt,{data:0}),Kl=Wt(Vd),na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $l(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Xc[n])?!!i[n]:!1}function ra(){return $l}var Zc=_({},Js,{key:function(n){if(n.key){var i=na[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Or(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(n){return n.type==="keypress"?Or(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Or(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ho=Wt(Zc),Wc=_({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=Wt(Wc),ci=_({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),Jc=Wt(ci),eh=_({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),th=Wt(eh),nh=_({},ea,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fo=Wt(nh),Sn=_({},tt,{newState:0,oldState:0}),rh=Wt(Sn),ih=[9,13,27,32],kr=wr&&"CompositionEvent"in window,h=null;wr&&"documentMode"in document&&(h=document.documentMode);var y=wr&&"TextEvent"in window&&!h,v=wr&&(!kr||h&&8<h&&11>=h),A=" ",j=!1;function X(n,i){switch(n){case"keyup":return ih.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var He=!1;function Qt(n,i){switch(n){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(j=!0,A);case"textInput":return n=i.data,n===A&&j?null:n;default:return null}}function Qe(n,i){if(He)return n==="compositionend"||!kr&&X(n,i)?(n=Gl(),ui=Qi=Nr=null,He=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Jt[n.type]:i==="textarea"}function hi(n,i,o,u){oi?li?li.push(u):li=[u]:oi=u,i=Gh(i,"onChange"),0<i.length&&(o=new so("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var ln=null,Lr=null;function Xl(n){IE(n,0)}function sh(n){var i=rr(n);if(zl(i))return n}function $y(n,i){if(n==="change")return i}var Yy=!1;if(wr){var Nd;if(wr){var Od="oninput"in document;if(!Od){var Xy=document.createElement("div");Xy.setAttribute("oninput","return;"),Od=typeof Xy.oninput=="function"}Nd=Od}else Nd=!1;Yy=Nd&&(!document.documentMode||9<document.documentMode)}function Zy(){ln&&(ln.detachEvent("onpropertychange",Wy),Lr=ln=null)}function Wy(n){if(n.propertyName==="value"&&sh(Lr)){var i=[];hi(i,Lr,n,sr(n)),Hc(Xl,i)}}function zS(n,i,o){n==="focusin"?(Zy(),ln=i,Lr=o,ln.attachEvent("onpropertychange",Wy)):n==="focusout"&&Zy()}function jS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sh(Lr)}function qS(n,i){if(n==="click")return sh(i)}function FS(n,i){if(n==="input"||n==="change")return sh(i)}function GS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Fn=typeof Object.is=="function"?Object.is:GS;function Zl(n,i){if(Fn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Bn.call(i,f)||!Fn(n[f],i[f]))return!1}return!0}function Jy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function e_(n,i){var o=Jy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Jy(o)}}function t_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?t_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function n_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ks(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ks(n.document)}return i}function Md(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var HS=wr&&"documentMode"in document&&11>=document.documentMode,mo=null,Pd=null,Wl=null,kd=!1;function r_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kd||mo==null||mo!==Ks(u)||(u=mo,"selectionStart"in u&&Md(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Zl(Wl,u)||(Wl=u,u=Gh(Pd,"onSelect"),0<u.length&&(i=new so("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=mo)))}function ia(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var go={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},Ld={},i_={};wr&&(i_=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function sa(n){if(Ld[n])return Ld[n];if(!go[n])return n;var i=go[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in i_)return Ld[n]=i[o];return n}var s_=sa("animationend"),a_=sa("animationiteration"),o_=sa("animationstart"),QS=sa("transitionrun"),KS=sa("transitionstart"),$S=sa("transitioncancel"),l_=sa("transitionend"),u_=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function Ar(n,i){u_.set(n,i),br(i,[n])}var c_=new WeakMap;function lr(n,i){if(typeof n=="object"&&n!==null){var o=c_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:no(i)},c_.set(n,i),i)}return{value:n,source:i,stack:no(i)}}var ur=[],po=0,Bd=0;function ah(){for(var n=po,i=Bd=po=0;i<n;){var o=ur[i];ur[i++]=null;var u=ur[i];ur[i++]=null;var f=ur[i];ur[i++]=null;var g=ur[i];if(ur[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&h_(o,f,g)}}function oh(n,i,o,u){ur[po++]=n,ur[po++]=i,ur[po++]=o,ur[po++]=u,Bd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function zd(n,i,o,u){return oh(n,i,o,u),lh(n)}function yo(n,i){return oh(n,null,null,i),lh(n)}function h_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-de(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function lh(n){if(50<wu)throw wu=0,Qm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var _o={};function YS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(n,i,o,u){return new YS(n,i,o,u)}function jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fi(n,i){var o=n.alternate;return o===null?(o=Gn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function f_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function uh(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")jd(n)&&(E=1);else if(typeof n=="string")E=ZR(n,o,Ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Gn(31,o,i,f),n.elementType=I,n.lanes=g,n;case x:return aa(o.children,f,g,i);case U:E=8,f|=24;break;case L:return n=Gn(12,o,i,f|2),n.elementType=L,n.lanes=g,n;case le:return n=Gn(13,o,i,f),n.elementType=le,n.lanes=g,n;case ve:return n=Gn(19,o,i,f),n.elementType=ve,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case W:E=10;break e;case re:E=9;break e;case ce:E=11;break e;case V:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=Gn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function aa(n,i,o,u){return n=Gn(7,n,u,i),n.lanes=o,n}function qd(n,i,o){return n=Gn(6,n,null,i),n.lanes=o,n}function Fd(n,i,o){return i=Gn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var vo=[],Eo=0,ch=null,hh=0,cr=[],hr=0,oa=null,di=1,mi="";function la(n,i){vo[Eo++]=hh,vo[Eo++]=ch,ch=n,hh=i}function d_(n,i,o){cr[hr++]=di,cr[hr++]=mi,cr[hr++]=oa,oa=n;var u=di;n=mi;var f=32-de(u)-1;u&=~(1<<f),o+=1;var g=32-de(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,di=1<<32-de(i)+f|o<<f|u,mi=g+n}else di=1<<g|o<<f|u,mi=n}function Gd(n){n.return!==null&&(la(n,1),d_(n,1,0))}function Hd(n){for(;n===ch;)ch=vo[--Eo],vo[Eo]=null,hh=vo[--Eo],vo[Eo]=null;for(;n===oa;)oa=cr[--hr],cr[hr]=null,mi=cr[--hr],cr[hr]=null,di=cr[--hr],cr[hr]=null}var Rn=null,It=null,Je=!1,ua=null,Ur=!1,Qd=Error(r(519));function ca(n){var i=Error(r(418,""));throw tu(lr(i,n)),Qd}function m_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Nt]=n,i[pt]=u,o){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(o=0;o<Su.length;o++)Be(Su[o],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":Be("invalid",i),$s(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ro(i);break;case"select":Be("invalid",i);break;case"textarea":Be("invalid",i),Ys(i,u.value,u.defaultValue,u.children),ro(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||VE(i.textContent,o)?(u.popover!=null&&(Be("beforetoggle",i),Be("toggle",i)),u.onScroll!=null&&Be("scroll",i),u.onScrollEnd!=null&&Be("scrollend",i),u.onClick!=null&&(i.onclick=Hh),i=!0):i=!1,i||ca(n)}function g_(n){for(Rn=n.return;Rn;)switch(Rn.tag){case 5:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:Rn=Rn.return}}function Jl(n){if(n!==Rn)return!1;if(!Je)return g_(n),Je=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||lg(n.type,n.memoizedProps)),o=!o),o&&It&&ca(n),g_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){It=Rr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}It=null}}else i===27?(i=It,ls(n.type)?(n=fg,fg=null,It=n):It=i):It=Rn?Rr(n.stateNode.nextSibling):null;return!0}function eu(){It=Rn=null,Je=!1}function p_(){var n=ua;return n!==null&&(Mn===null?Mn=n:Mn.push.apply(Mn,n),ua=null),n}function tu(n){ua===null?ua=[n]:ua.push(n)}var Kd=ne(null),ha=null,gi=null;function Ki(n,i,o){oe(Kd,i._currentValue),i._currentValue=o}function pi(n){n._currentValue=Kd.current,he(Kd)}function $d(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Yd(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var b=g;g=f;for(var C=0;C<i.length;C++)if(b.context===i[C]){g.lanes|=o,b=g.alternate,b!==null&&(b.lanes|=o),$d(g.return,o,n),u||(E=null);break e}g=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),$d(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function nu(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var b=f.type;Fn(f.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(f===dt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Vu):n=[Vu])}f=f.return}n!==null&&Yd(i,n,o,u),i.flags|=262144}function fh(n){for(n=n.firstContext;n!==null;){if(!Fn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function fa(n){ha=n,gi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function pn(n){return y_(ha,n)}function dh(n,i){return ha===null&&fa(n),y_(n,i)}function y_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},gi===null){if(n===null)throw Error(r(308));gi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else gi=gi.next=i;return o}var XS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},ZS=s.unstable_scheduleCallback,WS=s.unstable_NormalPriority,$t={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new XS,data:new Map,refCount:0}}function ru(n){n.refCount--,n.refCount===0&&ZS(WS,function(){n.controller.abort()})}var iu=null,Zd=0,To=0,bo=null;function JS(n,i){if(iu===null){var o=iu=[];Zd=0,To=Jm(),bo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Zd++,i.then(__,__),i}function __(){if(--Zd===0&&iu!==null){bo!==null&&(bo.status="fulfilled");var n=iu;iu=null,To=0,bo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function eR(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var v_=Z.S;Z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&JS(n,i),v_!==null&&v_(n,i)};var da=ne(null);function Wd(){var n=da.current;return n!==null?n:mt.pooledCache}function mh(n,i){i===null?oe(da,da.current):oe(da,i.pool)}function E_(){var n=Wd();return n===null?null:{parent:$t._currentValue,pool:n}}var su=Error(r(460)),T_=Error(r(474)),gh=Error(r(542)),Jd={then:function(){}};function b_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ph(){}function w_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(ph,ph),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,S_(n),n;default:if(typeof i.status=="string")i.then(ph,ph);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,S_(n),n}throw au=i,su}}var au=null;function A_(){if(au===null)throw Error(r(459));var n=au;return au=null,n}function S_(n){if(n===su||n===gh)throw Error(r(483))}var $i=!1;function em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Yi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Xi(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(rt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=lh(n),h_(n,null,o),i}return oh(n,u,i,o),lh(n)}function ou(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,qi(n,o)}}function nm(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var rm=!1;function lu(){if(rm){var n=bo;if(n!==null)throw n}}function uu(n,i,o,u){rm=!1;var f=n.updateQueue;$i=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var C=b,H=C.next;C.next=null,E===null?g=H:E.next=H,E=C;var J=n.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==E&&(b===null?J.firstBaseUpdate=H:b.next=H,J.lastBaseUpdate=C))}if(g!==null){var te=f.baseState;E=0,J=H=C=null,b=g;do{var K=b.lane&-536870913,$=K!==b.lane;if($?(Ke&K)===K:(u&K)===K){K!==0&&K===To&&(rm=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var xe=n,Se=b;K=i;var ht=o;switch(Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){te=xe.call(ht,te,K);break e}te=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,K=typeof xe=="function"?xe.call(ht,te,K):xe,K==null)break e;te=_({},te,K);break e;case 2:$i=!0}}K=b.callback,K!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[K]:$.push(K))}else $={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(H=J=$,C=te):J=J.next=$,E|=K;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;$=b,b=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(C=te),f.baseState=C,f.firstBaseUpdate=H,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),is|=E,n.lanes=E,n.memoizedState=te}}function R_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function I_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)R_(o[n],i)}var wo=ne(null),yh=ne(0);function x_(n,i){n=wi,oe(yh,n),oe(wo,i),wi=n|i.baseLanes}function im(){oe(yh,wi),oe(wo,wo.current)}function sm(){wi=yh.current,he(wo),he(yh)}var Zi=0,ke=null,ut=null,zt=null,_h=!1,Ao=!1,ma=!1,vh=0,cu=0,So=null,tR=0;function Mt(){throw Error(r(321))}function am(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Fn(n[o],i[o]))return!1;return!0}function om(n,i,o,u,f,g){return Zi=g,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?hv:fv,ma=!1,g=o(u,f),ma=!1,Ao&&(g=C_(i,o,u,f)),D_(n),g}function D_(n){Z.H=Sh;var i=ut!==null&&ut.next!==null;if(Zi=0,zt=ut=ke=null,_h=!1,cu=0,So=null,i)throw Error(r(300));n===null||en||(n=n.dependencies,n!==null&&fh(n)&&(en=!0))}function C_(n,i,o,u){ke=n;var f=0;do{if(Ao&&(So=null),cu=0,Ao=!1,25<=f)throw Error(r(301));if(f+=1,zt=ut=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=lR,g=i(o,u)}while(Ao);return g}function nR(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?hu(i):i,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(ke.flags|=1024),i}function lm(){var n=vh!==0;return vh=0,n}function um(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function cm(n){if(_h){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_h=!1}Zi=0,zt=ut=ke=null,Ao=!1,cu=vh=0,So=null}function Nn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ke.memoizedState=zt=n:zt=zt.next=n,zt}function jt(){if(ut===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var i=zt===null?ke.memoizedState:zt.next;if(i!==null)zt=i,ut=n;else{if(n===null)throw ke.alternate===null?Error(r(467)):Error(r(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},zt===null?ke.memoizedState=zt=n:zt=zt.next=n}return zt}function hm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(n){var i=cu;return cu+=1,So===null&&(So=[]),n=w_(So,n,i),i=ke,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?hv:fv),n}function Eh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return hu(n);if(n.$$typeof===W)return pn(n)}throw Error(r(438,String(n)))}function fm(n){var i=null,o=ke.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=hm(),ke.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=O;return i.index++,o}function yi(n,i){return typeof i=="function"?i(n):i}function Th(n){var i=jt();return dm(i,ut,n)}function dm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var b=E=null,C=null,H=i,J=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Ke&te)===te:(Zi&te)===te){var K=H.revertLane;if(K===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===To&&(J=!0);else if((Zi&K)===K){H=H.next,K===To&&(J=!0);continue}else te={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=te,E=g):C=C.next=te,ke.lanes|=K,is|=K;te=H.action,ma&&o(g,te),g=H.hasEagerState?H.eagerState:o(g,te)}else K={lane:te,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=K,E=g):C=C.next=K,ke.lanes|=te,is|=te;H=H.next}while(H!==null&&H!==i);if(C===null?E=g:C.next=b,!Fn(g,n.memoizedState)&&(en=!0,J&&(o=bo,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=C,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function mm(n){var i=jt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Fn(g,i.memoizedState)||(en=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function V_(n,i,o){var u=ke,f=jt(),g=Je;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Fn((ut||f).memoizedState,o);E&&(f.memoizedState=o,en=!0),f=f.queue;var b=M_.bind(null,u,f,n);if(fu(2048,8,b,[n]),f.getSnapshot!==i||E||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,Ro(9,bh(),O_.bind(null,u,f,o,i),null),mt===null)throw Error(r(349));g||(Zi&124)!==0||N_(u,i,o)}return o}function N_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ke.updateQueue,i===null?(i=hm(),ke.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function O_(n,i,o,u){i.value=o,i.getSnapshot=u,P_(i)&&k_(n)}function M_(n,i,o){return o(function(){P_(i)&&k_(n)})}function P_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Fn(n,o)}catch{return!0}}function k_(n){var i=yo(n,2);i!==null&&Yn(i,n,2)}function gm(n){var i=Nn();if(typeof n=="function"){var o=n;if(n=o(),ma){pe(!0);try{o()}finally{pe(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:n},i}function L_(n,i,o,u){return n.baseState=o,dm(n,ut,typeof u=="function"?u:yi)}function rR(n,i,o,u,f){if(Ah(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};Z.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,U_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function U_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=Z.T,E={};Z.T=E;try{var b=o(f,u),C=Z.S;C!==null&&C(E,b),B_(n,i,b)}catch(H){pm(n,i,H)}finally{Z.T=g}}else try{g=o(f,u),B_(n,i,g)}catch(H){pm(n,i,H)}}function B_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){z_(n,i,u)},function(u){return pm(n,i,u)}):z_(n,i,o)}function z_(n,i,o){i.status="fulfilled",i.value=o,j_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,U_(n,o)))}function pm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,j_(i),i=i.next;while(i!==u)}n.action=null}function j_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function q_(n,i){return i}function F_(n,i){if(Je){var o=mt.formState;if(o!==null){e:{var u=ke;if(Je){if(It){t:{for(var f=It,g=Ur;f.nodeType!==8;){if(!g){f=null;break t}if(f=Rr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){It=Rr(f.nextSibling),u=f.data==="F!";break e}}ca(u)}u=!1}u&&(i=o[0])}}return o=Nn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:i},o.queue=u,o=lv.bind(null,ke,u),u.dispatch=o,u=gm(!1),g=Tm.bind(null,ke,!1,u.queue),u=Nn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=rR.bind(null,ke,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function G_(n){var i=jt();return H_(i,ut,n)}function H_(n,i,o){if(i=dm(n,i,q_)[0],n=Th(yi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=hu(i)}catch(E){throw E===su?gh:E}else u=i;i=jt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(ke.flags|=2048,Ro(9,bh(),iR.bind(null,f,o),null)),[u,g,n]}function iR(n,i){n.action=i}function Q_(n){var i=jt(),o=ut;if(o!==null)return H_(i,o,n);jt(),i=i.memoizedState,o=jt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Ro(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=ke.updateQueue,i===null&&(i=hm(),ke.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function bh(){return{destroy:void 0,resource:void 0}}function K_(){return jt().memoizedState}function wh(n,i,o,u){var f=Nn();u=u===void 0?null:u,ke.flags|=n,f.memoizedState=Ro(1|i,bh(),o,u)}function fu(n,i,o,u){var f=jt();u=u===void 0?null:u;var g=f.memoizedState.inst;ut!==null&&u!==null&&am(u,ut.memoizedState.deps)?f.memoizedState=Ro(i,g,o,u):(ke.flags|=n,f.memoizedState=Ro(1|i,g,o,u))}function $_(n,i){wh(8390656,8,n,i)}function Y_(n,i){fu(2048,8,n,i)}function X_(n,i){return fu(4,2,n,i)}function Z_(n,i){return fu(4,4,n,i)}function W_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function J_(n,i,o){o=o!=null?o.concat([n]):null,fu(4,4,W_.bind(null,i,n),o)}function ym(){}function ev(n,i){var o=jt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&am(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function tv(n,i){var o=jt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&am(i,u[1]))return u[0];if(u=n(),ma){pe(!0);try{n()}finally{pe(!1)}}return o.memoizedState=[u,i],u}function _m(n,i,o){return o===void 0||(Zi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=iE(),ke.lanes|=n,is|=n,o)}function nv(n,i,o,u){return Fn(o,i)?o:wo.current!==null?(n=_m(n,o,u),Fn(n,i)||(en=!0),n):(Zi&42)===0?(en=!0,n.memoizedState=o):(n=iE(),ke.lanes|=n,is|=n,i)}function rv(n,i,o,u,f){var g=ae.p;ae.p=g!==0&&8>g?g:8;var E=Z.T,b={};Z.T=b,Tm(n,!1,i,o);try{var C=f(),H=Z.S;if(H!==null&&H(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=eR(C,u);du(n,i,J,$n(n))}else du(n,i,u,$n(n))}catch(te){du(n,i,{then:function(){},status:"rejected",reason:te},$n())}finally{ae.p=g,Z.T=E}}function sR(){}function vm(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=iv(n).queue;rv(n,f,i,ge,o===null?sR:function(){return sv(n),o(u)})}function iv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:ge},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function sv(n){var i=iv(n).next.queue;du(n,i,{},$n())}function Em(){return pn(Vu)}function av(){return jt().memoizedState}function ov(){return jt().memoizedState}function aR(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=$n();n=Yi(o);var u=Xi(i,n,o);u!==null&&(Yn(u,i,o),ou(u,i,o)),i={cache:Xd()},n.payload=i;return}i=i.return}}function oR(n,i,o){var u=$n();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ah(n)?uv(i,o):(o=zd(n,i,o,u),o!==null&&(Yn(o,n,u),cv(o,i,u)))}function lv(n,i,o){var u=$n();du(n,i,o,u)}function du(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ah(n))uv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,b=g(E,o);if(f.hasEagerState=!0,f.eagerState=b,Fn(b,E))return oh(n,i,f,0),mt===null&&ah(),!1}catch{}finally{}if(o=zd(n,i,f,u),o!==null)return Yn(o,n,u),cv(o,i,u),!0}return!1}function Tm(n,i,o,u){if(u={lane:2,revertLane:Jm(),action:u,hasEagerState:!1,eagerState:null,next:null},Ah(n)){if(i)throw Error(r(479))}else i=zd(n,o,u,2),i!==null&&Yn(i,n,2)}function Ah(n){var i=n.alternate;return n===ke||i!==null&&i===ke}function uv(n,i){Ao=_h=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function cv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,qi(n,o)}}var Sh={readContext:pn,use:Eh,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},hv={readContext:pn,use:Eh,useCallback:function(n,i){return Nn().memoizedState=[n,i===void 0?null:i],n},useContext:pn,useEffect:$_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,wh(4194308,4,W_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return wh(4194308,4,n,i)},useInsertionEffect:function(n,i){wh(4,2,n,i)},useMemo:function(n,i){var o=Nn();i=i===void 0?null:i;var u=n();if(ma){pe(!0);try{n()}finally{pe(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=Nn();if(o!==void 0){var f=o(i);if(ma){pe(!0);try{o(i)}finally{pe(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=oR.bind(null,ke,n),[u.memoizedState,n]},useRef:function(n){var i=Nn();return n={current:n},i.memoizedState=n},useState:function(n){n=gm(n);var i=n.queue,o=lv.bind(null,ke,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:ym,useDeferredValue:function(n,i){var o=Nn();return _m(o,n,i)},useTransition:function(){var n=gm(!1);return n=rv.bind(null,ke,n.queue,!0,!1),Nn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=ke,f=Nn();if(Je){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),mt===null)throw Error(r(349));(Ke&124)!==0||N_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,$_(M_.bind(null,u,g,n),[n]),u.flags|=2048,Ro(9,bh(),O_.bind(null,u,g,o,i),null),o},useId:function(){var n=Nn(),i=mt.identifierPrefix;if(Je){var o=mi,u=di;o=(u&~(1<<32-de(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=vh++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=tR++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Em,useFormState:F_,useActionState:F_,useOptimistic:function(n){var i=Nn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Tm.bind(null,ke,!0,o),o.dispatch=i,[n,i]},useMemoCache:fm,useCacheRefresh:function(){return Nn().memoizedState=aR.bind(null,ke)}},fv={readContext:pn,use:Eh,useCallback:ev,useContext:pn,useEffect:Y_,useImperativeHandle:J_,useInsertionEffect:X_,useLayoutEffect:Z_,useMemo:tv,useReducer:Th,useRef:K_,useState:function(){return Th(yi)},useDebugValue:ym,useDeferredValue:function(n,i){var o=jt();return nv(o,ut.memoizedState,n,i)},useTransition:function(){var n=Th(yi)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:hu(n),i]},useSyncExternalStore:V_,useId:av,useHostTransitionStatus:Em,useFormState:G_,useActionState:G_,useOptimistic:function(n,i){var o=jt();return L_(o,ut,n,i)},useMemoCache:fm,useCacheRefresh:ov},lR={readContext:pn,use:Eh,useCallback:ev,useContext:pn,useEffect:Y_,useImperativeHandle:J_,useInsertionEffect:X_,useLayoutEffect:Z_,useMemo:tv,useReducer:mm,useRef:K_,useState:function(){return mm(yi)},useDebugValue:ym,useDeferredValue:function(n,i){var o=jt();return ut===null?_m(o,n,i):nv(o,ut.memoizedState,n,i)},useTransition:function(){var n=mm(yi)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:hu(n),i]},useSyncExternalStore:V_,useId:av,useHostTransitionStatus:Em,useFormState:Q_,useActionState:Q_,useOptimistic:function(n,i){var o=jt();return ut!==null?L_(o,ut,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:fm,useCacheRefresh:ov},Io=null,mu=0;function Rh(n){var i=mu;return mu+=1,Io===null&&(Io=[]),w_(Io,n,i)}function gu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Ih(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function dv(n){var i=n._init;return i(n._payload)}function mv(n){function i(z,M){if(n){var G=z.deletions;G===null?(z.deletions=[M],z.flags|=16):G.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=fi(z,M),z.index=0,z.sibling=null,z}function g(z,M,G){return z.index=G,n?(G=z.alternate,G!==null?(G=G.index,G<M?(z.flags|=67108866,M):G):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function E(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function b(z,M,G,ee){return M===null||M.tag!==6?(M=qd(G,z.mode,ee),M.return=z,M):(M=f(M,G),M.return=z,M)}function C(z,M,G,ee){var _e=G.type;return _e===x?J(z,M,G.props.children,ee,G.key):M!==null&&(M.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&dv(_e)===M.type)?(M=f(M,G.props),gu(M,G),M.return=z,M):(M=uh(G.type,G.key,G.props,null,z.mode,ee),gu(M,G),M.return=z,M)}function H(z,M,G,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=Fd(G,z.mode,ee),M.return=z,M):(M=f(M,G.children||[]),M.return=z,M)}function J(z,M,G,ee,_e){return M===null||M.tag!==7?(M=aa(G,z.mode,ee,_e),M.return=z,M):(M=f(M,G),M.return=z,M)}function te(z,M,G){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qd(""+M,z.mode,G),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return G=uh(M.type,M.key,M.props,null,z.mode,G),gu(G,M),G.return=z,G;case R:return M=Fd(M,z.mode,G),M.return=z,M;case S:var ee=M._init;return M=ee(M._payload),te(z,M,G)}if(be(M)||B(M))return M=aa(M,z.mode,G,null),M.return=z,M;if(typeof M.then=="function")return te(z,Rh(M),G);if(M.$$typeof===W)return te(z,dh(z,M),G);Ih(z,M)}return null}function K(z,M,G,ee){var _e=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:b(z,M,""+G,ee);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===_e?C(z,M,G,ee):null;case R:return G.key===_e?H(z,M,G,ee):null;case S:return _e=G._init,G=_e(G._payload),K(z,M,G,ee)}if(be(G)||B(G))return _e!==null?null:J(z,M,G,ee,null);if(typeof G.then=="function")return K(z,M,Rh(G),ee);if(G.$$typeof===W)return K(z,M,dh(z,G),ee);Ih(z,G)}return null}function $(z,M,G,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get(G)||null,b(M,z,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return z=z.get(ee.key===null?G:ee.key)||null,C(M,z,ee,_e);case R:return z=z.get(ee.key===null?G:ee.key)||null,H(M,z,ee,_e);case S:var Le=ee._init;return ee=Le(ee._payload),$(z,M,G,ee,_e)}if(be(ee)||B(ee))return z=z.get(G)||null,J(M,z,ee,_e,null);if(typeof ee.then=="function")return $(z,M,G,Rh(ee),_e);if(ee.$$typeof===W)return $(z,M,G,dh(M,ee),_e);Ih(M,ee)}return null}function xe(z,M,G,ee){for(var _e=null,Le=null,we=M,Re=M=0,nn=null;we!==null&&Re<G.length;Re++){we.index>Re?(nn=we,we=null):nn=we.sibling;var Ye=K(z,we,G[Re],ee);if(Ye===null){we===null&&(we=nn);break}n&&we&&Ye.alternate===null&&i(z,we),M=g(Ye,M,Re),Le===null?_e=Ye:Le.sibling=Ye,Le=Ye,we=nn}if(Re===G.length)return o(z,we),Je&&la(z,Re),_e;if(we===null){for(;Re<G.length;Re++)we=te(z,G[Re],ee),we!==null&&(M=g(we,M,Re),Le===null?_e=we:Le.sibling=we,Le=we);return Je&&la(z,Re),_e}for(we=u(we);Re<G.length;Re++)nn=$(we,z,Re,G[Re],ee),nn!==null&&(n&&nn.alternate!==null&&we.delete(nn.key===null?Re:nn.key),M=g(nn,M,Re),Le===null?_e=nn:Le.sibling=nn,Le=nn);return n&&we.forEach(function(ds){return i(z,ds)}),Je&&la(z,Re),_e}function Se(z,M,G,ee){if(G==null)throw Error(r(151));for(var _e=null,Le=null,we=M,Re=M=0,nn=null,Ye=G.next();we!==null&&!Ye.done;Re++,Ye=G.next()){we.index>Re?(nn=we,we=null):nn=we.sibling;var ds=K(z,we,Ye.value,ee);if(ds===null){we===null&&(we=nn);break}n&&we&&ds.alternate===null&&i(z,we),M=g(ds,M,Re),Le===null?_e=ds:Le.sibling=ds,Le=ds,we=nn}if(Ye.done)return o(z,we),Je&&la(z,Re),_e;if(we===null){for(;!Ye.done;Re++,Ye=G.next())Ye=te(z,Ye.value,ee),Ye!==null&&(M=g(Ye,M,Re),Le===null?_e=Ye:Le.sibling=Ye,Le=Ye);return Je&&la(z,Re),_e}for(we=u(we);!Ye.done;Re++,Ye=G.next())Ye=$(we,z,Re,Ye.value,ee),Ye!==null&&(n&&Ye.alternate!==null&&we.delete(Ye.key===null?Re:Ye.key),M=g(Ye,M,Re),Le===null?_e=Ye:Le.sibling=Ye,Le=Ye);return n&&we.forEach(function(uI){return i(z,uI)}),Je&&la(z,Re),_e}function ht(z,M,G,ee){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var _e=G.key;M!==null;){if(M.key===_e){if(_e=G.type,_e===x){if(M.tag===7){o(z,M.sibling),ee=f(M,G.props.children),ee.return=z,z=ee;break e}}else if(M.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&dv(_e)===M.type){o(z,M.sibling),ee=f(M,G.props),gu(ee,G),ee.return=z,z=ee;break e}o(z,M);break}else i(z,M);M=M.sibling}G.type===x?(ee=aa(G.props.children,z.mode,ee,G.key),ee.return=z,z=ee):(ee=uh(G.type,G.key,G.props,null,z.mode,ee),gu(ee,G),ee.return=z,z=ee)}return E(z);case R:e:{for(_e=G.key;M!==null;){if(M.key===_e)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){o(z,M.sibling),ee=f(M,G.children||[]),ee.return=z,z=ee;break e}else{o(z,M);break}else i(z,M);M=M.sibling}ee=Fd(G,z.mode,ee),ee.return=z,z=ee}return E(z);case S:return _e=G._init,G=_e(G._payload),ht(z,M,G,ee)}if(be(G))return xe(z,M,G,ee);if(B(G)){if(_e=B(G),typeof _e!="function")throw Error(r(150));return G=_e.call(G),Se(z,M,G,ee)}if(typeof G.then=="function")return ht(z,M,Rh(G),ee);if(G.$$typeof===W)return ht(z,M,dh(z,G),ee);Ih(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,M!==null&&M.tag===6?(o(z,M.sibling),ee=f(M,G),ee.return=z,z=ee):(o(z,M),ee=qd(G,z.mode,ee),ee.return=z,z=ee),E(z)):o(z,M)}return function(z,M,G,ee){try{mu=0;var _e=ht(z,M,G,ee);return Io=null,_e}catch(we){if(we===su||we===gh)throw we;var Le=Gn(29,we,null,z.mode);return Le.lanes=ee,Le.return=z,Le}finally{}}}var xo=mv(!0),gv=mv(!1),fr=ne(null),Br=null;function Wi(n){var i=n.alternate;oe(Yt,Yt.current&1),oe(fr,n),Br===null&&(i===null||wo.current!==null||i.memoizedState!==null)&&(Br=n)}function pv(n){if(n.tag===22){if(oe(Yt,Yt.current),oe(fr,n),Br===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Br=n)}}else Ji()}function Ji(){oe(Yt,Yt.current),oe(fr,fr.current)}function _i(n){he(fr),Br===n&&(Br=null),he(Yt)}var Yt=ne(0);function xh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||hg(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function bm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var wm={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=$n(),f=Yi(u);f.payload=i,o!=null&&(f.callback=o),i=Xi(n,f,u),i!==null&&(Yn(i,n,u),ou(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=$n(),f=Yi(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Xi(n,f,u),i!==null&&(Yn(i,n,u),ou(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=$n(),u=Yi(o);u.tag=2,i!=null&&(u.callback=i),i=Xi(n,u,o),i!==null&&(Yn(i,n,o),ou(i,n,o))}};function yv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Zl(o,u)||!Zl(f,g):!0}function _v(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&wm.enqueueReplaceState(i,i.state,null)}function ga(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Dh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function vv(n){Dh(n)}function Ev(n){console.error(n)}function Tv(n){Dh(n)}function Ch(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function bv(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Am(n,i,o){return o=Yi(o),o.tag=3,o.payload={element:null},o.callback=function(){Ch(n,i)},o}function wv(n){return n=Yi(n),n.tag=3,n}function Av(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){bv(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){bv(i,o,u),typeof f!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function uR(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&nu(i,o,f,!0),o=fr.current,o!==null){switch(o.tag){case 13:return Br===null?$m():o.alternate===null&&xt===0&&(xt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Jd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Xm(n,u,f)),!1;case 22:return o.flags|=65536,u===Jd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Xm(n,u,f)),!1}throw Error(r(435,o.tag))}return Xm(n,u,f),$m(),!1}if(Je)return i=fr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Qd&&(n=Error(r(422),{cause:u}),tu(lr(n,o)))):(u!==Qd&&(i=Error(r(423),{cause:u}),tu(lr(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=lr(u,o),f=Am(n.stateNode,u,f),nm(n,f),xt!==4&&(xt=2)),!1;var g=Error(r(520),{cause:u});if(g=lr(g,o),bu===null?bu=[g]:bu.push(g),xt!==4&&(xt=2),i===null)return!0;u=lr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Am(o.stateNode,u,n),nm(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ss===null||!ss.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=wv(f),Av(f,n,o,u),nm(o,f),!1}o=o.return}while(o!==null);return!1}var Sv=Error(r(461)),en=!1;function un(n,i,o,u){i.child=n===null?gv(i,null,o,u):xo(i,n.child,o,u)}function Rv(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return fa(i),u=om(n,i,o,E,g,f),b=lm(),n!==null&&!en?(um(n,i,f),vi(n,i,f)):(Je&&b&&Gd(i),i.flags|=1,un(n,i,u,f),i.child)}function Iv(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!jd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,xv(n,i,g,u,f)):(n=uh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Nm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(E,u)&&n.ref===i.ref)return vi(n,i,f)}return i.flags|=1,n=fi(g,u),n.ref=i.ref,n.return=i,i.child=n}function xv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(Zl(g,u)&&n.ref===i.ref)if(en=!1,i.pendingProps=u=g,Nm(n,f))(n.flags&131072)!==0&&(en=!0);else return i.lanes=n.lanes,vi(n,i,f)}return Sm(n,i,o,u,f)}function Dv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return Cv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&mh(i,g!==null?g.cachePool:null),g!==null?x_(i,g):im(),pv(i);else return i.lanes=i.childLanes=536870912,Cv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(mh(i,g.cachePool),x_(i,g),Ji(),i.memoizedState=null):(n!==null&&mh(i,null),im(),Ji());return un(n,i,f,o),i.child}function Cv(n,i,o,u){var f=Wd();return f=f===null?null:{parent:$t._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&mh(i,null),im(),pv(i),n!==null&&nu(n,i,u,!0),null}function Vh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Sm(n,i,o,u,f){return fa(i),o=om(n,i,o,u,void 0,f),u=lm(),n!==null&&!en?(um(n,i,f),vi(n,i,f)):(Je&&u&&Gd(i),i.flags|=1,un(n,i,o,f),i.child)}function Vv(n,i,o,u,f,g){return fa(i),i.updateQueue=null,o=C_(i,u,o,f),D_(n),u=lm(),n!==null&&!en?(um(n,i,g),vi(n,i,g)):(Je&&u&&Gd(i),i.flags|=1,un(n,i,o,g),i.child)}function Nv(n,i,o,u,f){if(fa(i),i.stateNode===null){var g=_o,E=o.contextType;typeof E=="object"&&E!==null&&(g=pn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wm,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},em(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?pn(E):_o,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(bm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&wm.enqueueReplaceState(g,g.state,null),uu(i,u,g,f),lu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var b=i.memoizedProps,C=ga(o,b);g.props=C;var H=g.context,J=o.contextType;E=_o,typeof J=="object"&&J!==null&&(E=pn(J));var te=o.getDerivedStateFromProps;J=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b||H!==E)&&_v(i,g,u,E),$i=!1;var K=i.memoizedState;g.state=K,uu(i,u,g,f),lu(),H=i.memoizedState,b||K!==H||$i?(typeof te=="function"&&(bm(i,o,te,u),H=i.memoizedState),(C=$i||yv(i,o,C,u,K,H,E))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=E,u=C):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,tm(n,i),E=i.memoizedProps,J=ga(o,E),g.props=J,te=i.pendingProps,K=g.context,H=o.contextType,C=_o,typeof H=="object"&&H!==null&&(C=pn(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==te||K!==C)&&_v(i,g,u,C),$i=!1,K=i.memoizedState,g.state=K,uu(i,u,g,f),lu();var $=i.memoizedState;E!==te||K!==$||$i||n!==null&&n.dependencies!==null&&fh(n.dependencies)?(typeof b=="function"&&(bm(i,o,b,u),$=i.memoizedState),(J=$i||yv(i,o,J,u,K,$,C)||n!==null&&n.dependencies!==null&&fh(n.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,$,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,$,C)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=$),g.props=u,g.state=$,g.context=C,u=J):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Vh(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=xo(i,n.child,null,f),i.child=xo(i,null,o,f)):un(n,i,o,f),i.memoizedState=g.state,n=i.child):n=vi(n,i,f),n}function Ov(n,i,o,u){return eu(),i.flags|=256,un(n,i,o,u),i.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Im(n){return{baseLanes:n,cachePool:E_()}}function xm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=dr),n}function Mv(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Yt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Je){if(f?Wi(i):Ji(),Je){var b=It,C;if(C=b){e:{for(C=b,b=Ur;C.nodeType!==8;){if(!b){b=null;break e}if(C=Rr(C.nextSibling),C===null){b=null;break e}}b=C}b!==null?(i.memoizedState={dehydrated:b,treeContext:oa!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},C=Gn(18,null,null,0),C.stateNode=b,C.return=i,i.child=C,Rn=i,It=null,C=!0):C=!1}C||ca(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return hg(b)?i.lanes=32:i.lanes=536870912,null;_i(i)}return b=u.children,u=u.fallback,f?(Ji(),f=i.mode,b=Nh({mode:"hidden",children:b},f),u=aa(u,f,o,null),b.return=i,u.return=i,b.sibling=u,i.child=b,f=i.child,f.memoizedState=Im(o),f.childLanes=xm(n,E,o),i.memoizedState=Rm,u):(Wi(i),Dm(i,b))}if(C=n.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(g)i.flags&256?(Wi(i),i.flags&=-257,i=Cm(n,i,o)):i.memoizedState!==null?(Ji(),i.child=n.child,i.flags|=128,i=null):(Ji(),f=u.fallback,b=i.mode,u=Nh({mode:"visible",children:u.children},b),f=aa(f,b,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,xo(i,n.child,null,o),u=i.child,u.memoizedState=Im(o),u.childLanes=xm(n,E,o),i.memoizedState=Rm,i=f);else if(Wi(i),hg(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(r(419)),u.stack="",u.digest=E,tu({value:u,source:null,stack:null}),i=Cm(n,i,o)}else if(en||nu(n,i,o,!1),E=(o&n.childLanes)!==0,en||E){if(E=mt,E!==null&&(u=o&-o,u=(u&42)!==0?1:er(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,yo(n,u),Yn(E,n,u),Sv;b.data==="$?"||$m(),i=Cm(n,i,o)}else b.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,It=Rr(b.nextSibling),Rn=i,Je=!0,ua=null,Ur=!1,n!==null&&(cr[hr++]=di,cr[hr++]=mi,cr[hr++]=oa,di=n.id,mi=n.overflow,oa=i),i=Dm(i,u.children),i.flags|=4096);return i}return f?(Ji(),f=u.fallback,b=i.mode,C=n.child,H=C.sibling,u=fi(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,H!==null?f=fi(H,f):(f=aa(f,b,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,b=n.child.memoizedState,b===null?b=Im(o):(C=b.cachePool,C!==null?(H=$t._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=E_(),b={baseLanes:b.baseLanes|o,cachePool:C}),f.memoizedState=b,f.childLanes=xm(n,E,o),i.memoizedState=Rm,u):(Wi(i),o=n.child,n=o.sibling,o=fi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Dm(n,i){return i=Nh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Nh(n,i){return n=Gn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cm(n,i,o){return xo(i,n.child,null,o),n=Dm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Pv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),$d(n.return,i,o)}function Vm(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function kv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(un(n,i,u.children,o),u=Yt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pv(n,o,i);else if(n.tag===19)Pv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(oe(Yt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&xh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Vm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&xh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Vm(i,!0,o,null,g);break;case"together":Vm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vi(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),is|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(nu(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=fi(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=fi(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Nm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&fh(n)))}function cR(n,i,o){switch(i.tag){case 3:Oe(i,i.stateNode.containerInfo),Ki(i,$t,n.memoizedState.cache),eu();break;case 27:case 5:Ve(i);break;case 4:Oe(i,i.stateNode.containerInfo);break;case 10:Ki(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Wi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Mv(n,i,o):(Wi(i),n=vi(n,i,o),n!==null?n.sibling:null);Wi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(nu(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return kv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Yt,Yt.current),u)break;return null;case 22:case 23:return i.lanes=0,Dv(n,i,o);case 24:Ki(i,$t,n.memoizedState.cache)}return vi(n,i,o)}function Lv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)en=!0;else{if(!Nm(n,o)&&(i.flags&128)===0)return en=!1,cR(n,i,o);en=(n.flags&131072)!==0}else en=!1,Je&&(i.flags&1048576)!==0&&d_(i,hh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")jd(u)?(n=ga(u,n),i.tag=1,i=Nv(null,i,u,n,o)):(i.tag=0,i=Sm(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ce){i.tag=11,i=Rv(null,i,u,n,o);break e}else if(f===V){i.tag=14,i=Iv(null,i,u,n,o);break e}}throw i=Ce(u)||u,Error(r(306,i,""))}}return i;case 0:return Sm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=ga(u,i.pendingProps),Nv(n,i,u,f,o);case 3:e:{if(Oe(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,tm(n,i),uu(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Ki(i,$t,u),u!==g.cache&&Yd(i,[$t],o,!0),lu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Ov(n,i,u,o);break e}else if(u!==f){f=lr(Error(r(424)),i),tu(f),i=Ov(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(It=Rr(n.firstChild),Rn=i,Je=!0,ua=null,Ur=!0,o=gv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(eu(),u===f){i=vi(n,i,o);break e}un(n,i,u,o)}i=i.child}return i;case 26:return Vh(n,i),n===null?(o=jE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Je||(o=i.type,n=i.pendingProps,u=Qh(De.current).createElement(o),u[Nt]=i,u[pt]=n,hn(u,o,n),Ot(u),i.stateNode=u):i.memoizedState=jE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ve(i),n===null&&Je&&(u=i.stateNode=UE(i.type,i.pendingProps,De.current),Rn=i,Ur=!0,f=It,ls(i.type)?(fg=f,It=Rr(u.firstChild)):It=f),un(n,i,i.pendingProps.children,o),Vh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Je&&((f=u=It)&&(u=UR(u,i.type,i.pendingProps,Ur),u!==null?(i.stateNode=u,Rn=i,It=Rr(u.firstChild),Ur=!1,f=!0):f=!1),f||ca(i)),Ve(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,lg(f,g)?u=null:E!==null&&lg(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=om(n,i,nR,null,null,o),Vu._currentValue=f),Vh(n,i),un(n,i,u,o),i.child;case 6:return n===null&&Je&&((n=o=It)&&(o=BR(o,i.pendingProps,Ur),o!==null?(i.stateNode=o,Rn=i,It=null,n=!0):n=!1),n||ca(i)),null;case 13:return Mv(n,i,o);case 4:return Oe(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=xo(i,null,u,o):un(n,i,u,o),i.child;case 11:return Rv(n,i,i.type,i.pendingProps,o);case 7:return un(n,i,i.pendingProps,o),i.child;case 8:return un(n,i,i.pendingProps.children,o),i.child;case 12:return un(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ki(i,i.type,u.value),un(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,fa(i),f=pn(f),u=u(f),i.flags|=1,un(n,i,u,o),i.child;case 14:return Iv(n,i,i.type,i.pendingProps,o);case 15:return xv(n,i,i.type,i.pendingProps,o);case 19:return kv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=Nh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=fi(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Dv(n,i,o);case 24:return fa(i),u=pn($t),n===null?(f=Wd(),f===null&&(f=mt,g=Xd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},em(i),Ki(i,$t,f)):((n.lanes&o)!==0&&(tm(n,i),uu(i,null,null,o),lu()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ki(i,$t,u)):(u=g.cache,Ki(i,$t,u),u!==f.cache&&Yd(i,[$t],o,!0))),un(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ei(n){n.flags|=4}function Uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!QE(i)){if(i=fr.current,i!==null&&((Ke&4194048)===Ke?Br!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||i!==Br))throw au=Jd,T_;n.flags|=8192}}function Oh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?zi():536870912,n.lanes|=i,No|=i)}function pu(n,i){if(!Je)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function hR(n,i,o){var u=i.pendingProps;switch(Hd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return At(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),pi($t),Un(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Jl(i)?Ei(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,p_())),At(i),null;case 26:return o=i.memoizedState,n===null?(Ei(i),o!==null?(At(i),Uv(i,o)):(At(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Ei(i),At(i),Uv(i,o)):(At(i),i.flags&=-16777217):(n.memoizedProps!==u&&Ei(i),At(i),i.flags&=-16777217),null;case 27:Wn(i),o=De.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ei(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return At(i),null}n=Ae.current,Jl(i)?m_(i):(n=UE(f,u,o),i.stateNode=n,Ei(i))}return At(i),null;case 5:if(Wn(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ei(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return At(i),null}if(n=Ae.current,Jl(i))m_(i);else{switch(f=Qh(De.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Nt]=i,n[pt]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(hn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ei(i)}}return At(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ei(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=De.current,Jl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Nt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||VE(n.nodeValue,o)),n||ca(i)}else n=Qh(n).createTextNode(u),n[Nt]=i,i.stateNode=n}return At(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Jl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Nt]=i}else eu(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),f=!1}else f=p_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(_i(i),i):(_i(i),null)}if(_i(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Oh(i,i.updateQueue),At(i),null;case 4:return Un(),n===null&&rg(i.stateNode.containerInfo),At(i),null;case 10:return pi(i.type),At(i),null;case 19:if(he(Yt),f=i.memoizedState,f===null)return At(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)pu(f,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=xh(n),g!==null){for(i.flags|=128,pu(f,!1),n=g.updateQueue,i.updateQueue=n,Oh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)f_(o,n),o=o.sibling;return oe(Yt,Yt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Vn()>kh&&(i.flags|=128,u=!0,pu(f,!1),i.lanes=4194304)}else{if(!u)if(n=xh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Oh(i,n),pu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Je)return At(i),null}else 2*Vn()-f.renderingStartTime>kh&&o!==536870912&&(i.flags|=128,u=!0,pu(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Vn(),i.sibling=null,n=Yt.current,oe(Yt,u?n&1|2:n&1),i):(At(i),null);case 22:case 23:return _i(i),sm(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),o=i.updateQueue,o!==null&&Oh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&he(da),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),pi($t),At(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function fR(n,i){switch(Hd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return pi($t),Un(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Wn(i),null;case 13:if(_i(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));eu()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(Yt),null;case 4:return Un(),null;case 10:return pi(i.type),null;case 22:case 23:return _i(i),sm(),n!==null&&he(da),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return pi($t),null;case 25:return null;default:return null}}function Bv(n,i){switch(Hd(i),i.tag){case 3:pi($t),Un();break;case 26:case 27:case 5:Wn(i);break;case 4:Un();break;case 13:_i(i);break;case 19:he(Yt);break;case 10:pi(i.type);break;case 22:case 23:_i(i),sm(),n!==null&&he(da);break;case 24:pi($t)}}function yu(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(b){ft(i,i.return,b)}}function es(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=i;var C=o,H=b;try{H()}catch(J){ft(f,C,J)}}}u=u.next}while(u!==g)}}catch(J){ft(i,i.return,J)}}function zv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{I_(i,o)}catch(u){ft(n,n.return,u)}}}function jv(n,i,o){o.props=ga(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ft(n,i,u)}}function _u(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ft(n,i,f)}}function zr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ft(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ft(n,i,f)}else o.current=null}function qv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ft(n,n.return,f)}}function Om(n,i,o){try{var u=n.stateNode;OR(u,n.type,o,i),u[pt]=i}catch(f){ft(n,n.return,f)}}function Fv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ls(n.type)||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ls(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Hh));else if(u!==4&&(u===27&&ls(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Pm(n,i,o),n=n.sibling;n!==null;)Pm(n,i,o),n=n.sibling}function Mh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&ls(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Mh(n,i,o),n=n.sibling;n!==null;)Mh(n,i,o),n=n.sibling}function Gv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);hn(i,u,o),i[Nt]=n,i[pt]=o}catch(g){ft(n,n.return,g)}}var Ti=!1,Pt=!1,km=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,tn=null;function dR(n,i){if(n=n.containerInfo,ag=Wh,n=n_(n),Md(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,b=-1,C=-1,H=0,J=0,te=n,K=null;t:for(;;){for(var $;te!==o||f!==0&&te.nodeType!==3||(b=E+f),te!==g||u!==0&&te.nodeType!==3||(C=E+u),te.nodeType===3&&(E+=te.nodeValue.length),($=te.firstChild)!==null;)K=te,te=$;for(;;){if(te===n)break t;if(K===o&&++H===f&&(b=E),K===g&&++J===u&&(C=E),($=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=$}o=b===-1||C===-1?null:{start:b,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(og={focusedElem:n,selectionRange:o},Wh=!1,tn=i;tn!==null;)if(i=tn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,tn=n;else for(;tn!==null;){switch(i=tn,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var xe=ga(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(xe,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Se){ft(o,o.return,Se)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)cg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":cg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,tn=n;break}tn=i.return}}function Qv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ts(n,o),u&4&&yu(5,o);break;case 1:if(ts(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){ft(o,o.return,E)}else{var f=ga(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ft(o,o.return,E)}}u&64&&zv(o),u&512&&_u(o,o.return);break;case 3:if(ts(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{I_(n,i)}catch(E){ft(o,o.return,E)}}break;case 27:i===null&&u&4&&Gv(o);case 26:case 5:ts(n,o),i===null&&u&4&&qv(o),u&512&&_u(o,o.return);break;case 12:ts(n,o);break;case 13:ts(n,o),u&4&&Yv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=bR.bind(null,o),zR(n,o))));break;case 22:if(u=o.memoizedState!==null||Ti,!u){i=i!==null&&i.memoizedState!==null||Pt,f=Ti;var g=Pt;Ti=u,(Pt=i)&&!g?ns(n,o,(o.subtreeFlags&8772)!==0):ts(n,o),Ti=f,Pt=g}break;case 30:break;default:ts(n,o)}}function Kv(n){var i=n.alternate;i!==null&&(n.alternate=null,Kv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&gn(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vt=null,On=!1;function bi(n,i,o){for(o=o.child;o!==null;)$v(n,i,o),o=o.sibling}function $v(n,i,o){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:Pt||zr(o,i),bi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||zr(o,i);var u=vt,f=On;ls(o.type)&&(vt=o.stateNode,On=!1),bi(n,i,o),Iu(o.stateNode),vt=u,On=f;break;case 5:Pt||zr(o,i);case 6:if(u=vt,f=On,vt=null,bi(n,i,o),vt=u,On=f,vt!==null)if(On)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(g){ft(o,i,g)}else try{vt.removeChild(o.stateNode)}catch(g){ft(o,i,g)}break;case 18:vt!==null&&(On?(n=vt,kE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Pu(n)):kE(vt,o.stateNode));break;case 4:u=vt,f=On,vt=o.stateNode.containerInfo,On=!0,bi(n,i,o),vt=u,On=f;break;case 0:case 11:case 14:case 15:Pt||es(2,o,i),Pt||es(4,o,i),bi(n,i,o);break;case 1:Pt||(zr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&jv(o,i,u)),bi(n,i,o);break;case 21:bi(n,i,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,bi(n,i,o),Pt=u;break;default:bi(n,i,o)}}function Yv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Pu(n)}catch(o){ft(i,i.return,o)}}function mR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Hv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Hv),i;default:throw Error(r(435,n.tag))}}function Lm(n,i){var o=mR(n);i.forEach(function(u){var f=wR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Hn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(ls(b.type)){vt=b.stateNode,On=!1;break e}break;case 5:vt=b.stateNode,On=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,On=!0;break e}b=b.return}if(vt===null)throw Error(r(160));$v(g,E,f),vt=null,On=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Xv(i,n),i=i.sibling}var Sr=null;function Xv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Hn(i,n),Qn(n),u&4&&(es(3,n,n.return),yu(3,n),es(5,n,n.return));break;case 1:Hn(i,n),Qn(n),u&512&&(Pt||o===null||zr(o,o.return)),u&64&&Ti&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Sr;if(Hn(i,n),Qn(n),u&512&&(Pt||o===null||zr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ot]||g[Nt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),hn(g,u,o),g[Nt]=n,Ot(g),u=g;break e;case"link":var E=GE("link","href",f).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(g=E[b],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break t}}g=f.createElement(u),hn(g,u,o),f.head.appendChild(g);break;case"meta":if(E=GE("meta","content",f).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(g=E[b],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break t}}g=f.createElement(u),hn(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Nt]=n,Ot(g),u=g}n.stateNode=u}else HE(f,n.type,n.stateNode);else n.stateNode=FE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?HE(f,n.type,n.stateNode):FE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Om(n,n.memoizedProps,o.memoizedProps)}break;case 27:Hn(i,n),Qn(n),u&512&&(Pt||o===null||zr(o,o.return)),o!==null&&u&4&&Om(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Hn(i,n),Qn(n),u&512&&(Pt||o===null||zr(o,o.return)),n.flags&32){f=n.stateNode;try{ir(f,"")}catch($){ft(n,n.return,$)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Om(n,f,o!==null?o.memoizedProps:f)),u&1024&&(km=!0);break;case 6:if(Hn(i,n),Qn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch($){ft(n,n.return,$)}}break;case 3:if(Yh=null,f=Sr,Sr=Kh(i.containerInfo),Hn(i,n),Sr=f,Qn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pu(i.containerInfo)}catch($){ft(n,n.return,$)}km&&(km=!1,Zv(n));break;case 4:u=Sr,Sr=Kh(n.stateNode.containerInfo),Hn(i,n),Qn(n),Sr=u;break;case 12:Hn(i,n),Qn(n);break;case 13:Hn(i,n),Qn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Fm=Vn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,H=Ti,J=Pt;if(Ti=H||f,Pt=J||C,Hn(i,n),Pt=J,Ti=H,Qn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||C||Ti||Pt||pa(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){C=o=i;try{if(g=C.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=C.stateNode;var te=C.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch($){ft(C,C.return,$)}}}else if(i.tag===6){if(o===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch($){ft(C,C.return,$)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Lm(n,o))));break;case 19:Hn(i,n),Qn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 30:break;case 21:break;default:Hn(i,n),Qn(n)}}function Qn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Fv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Mm(n);Mh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(ir(E,""),o.flags&=-33);var b=Mm(n);Mh(n,b,E);break;case 3:case 4:var C=o.stateNode.containerInfo,H=Mm(n);Pm(n,H,C);break;default:throw Error(r(161))}}catch(J){ft(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Zv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Zv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ts(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Qv(n,i.alternate,i),i=i.sibling}function pa(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:es(4,i,i.return),pa(i);break;case 1:zr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&jv(i,i.return,o),pa(i);break;case 27:Iu(i.stateNode);case 26:case 5:zr(i,i.return),pa(i);break;case 22:i.memoizedState===null&&pa(i);break;case 30:pa(i);break;default:pa(i)}n=n.sibling}}function ns(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:ns(f,g,o),yu(4,g);break;case 1:if(ns(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){ft(u,u.return,H)}if(u=g,f=u.updateQueue,f!==null){var b=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)R_(C[f],b)}catch(H){ft(u,u.return,H)}}o&&E&64&&zv(g),_u(g,g.return);break;case 27:Gv(g);case 26:case 5:ns(f,g,o),o&&u===null&&E&4&&qv(g),_u(g,g.return);break;case 12:ns(f,g,o);break;case 13:ns(f,g,o),o&&E&4&&Yv(f,g);break;case 22:g.memoizedState===null&&ns(f,g,o),_u(g,g.return);break;case 30:break;default:ns(f,g,o)}i=i.sibling}}function Um(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ru(o))}function Bm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ru(n))}function jr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wv(n,i,o,u),i=i.sibling}function Wv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:jr(n,i,o,u),f&2048&&yu(9,i);break;case 1:jr(n,i,o,u);break;case 3:jr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ru(n)));break;case 12:if(f&2048){jr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,b=g.onPostCommit;typeof b=="function"&&b(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){ft(i,i.return,C)}}else jr(n,i,o,u);break;case 13:jr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?jr(n,i,o,u):vu(n,i):g._visibility&2?jr(n,i,o,u):(g._visibility|=2,Do(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Um(E,i);break;case 24:jr(n,i,o,u),f&2048&&Bm(i.alternate,i);break;default:jr(n,i,o,u)}}function Do(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,b=o,C=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:Do(g,E,b,C,f),yu(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?Do(g,E,b,C,f):vu(g,E):(J._visibility|=2,Do(g,E,b,C,f)),f&&H&2048&&Um(E.alternate,E);break;case 24:Do(g,E,b,C,f),f&&H&2048&&Bm(E.alternate,E);break;default:Do(g,E,b,C,f)}i=i.sibling}}function vu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:vu(o,u),f&2048&&Um(u.alternate,u);break;case 24:vu(o,u),f&2048&&Bm(u.alternate,u);break;default:vu(o,u)}i=i.sibling}}var Eu=8192;function Co(n){if(n.subtreeFlags&Eu)for(n=n.child;n!==null;)Jv(n),n=n.sibling}function Jv(n){switch(n.tag){case 26:Co(n),n.flags&Eu&&n.memoizedState!==null&&JR(Sr,n.memoizedState,n.memoizedProps);break;case 5:Co(n);break;case 3:case 4:var i=Sr;Sr=Kh(n.stateNode.containerInfo),Co(n),Sr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Eu,Eu=16777216,Co(n),Eu=i):Co(n));break;default:Co(n)}}function eE(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Tu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];tn=u,nE(u,n)}eE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)tE(n),n=n.sibling}function tE(n){switch(n.tag){case 0:case 11:case 15:Tu(n),n.flags&2048&&es(9,n,n.return);break;case 3:Tu(n);break;case 12:Tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ph(n)):Tu(n);break;default:Tu(n)}}function Ph(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];tn=u,nE(u,n)}eE(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:es(8,i,i.return),Ph(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ph(i));break;default:Ph(i)}n=n.sibling}}function nE(n,i){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:es(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ru(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,tn=u;else e:for(o=n;tn!==null;){u=tn;var f=u.sibling,g=u.return;if(Kv(u),u===o){tn=null;break e}if(f!==null){f.return=g,tn=f;break e}tn=g}}}var gR={getCacheForType:function(n){var i=pn($t),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},pR=typeof WeakMap=="function"?WeakMap:Map,rt=0,mt=null,Ue=null,Ke=0,it=0,Kn=null,rs=!1,Vo=!1,zm=!1,wi=0,xt=0,is=0,ya=0,jm=0,dr=0,No=0,bu=null,Mn=null,qm=!1,Fm=0,kh=1/0,Lh=null,ss=null,cn=0,as=null,Oo=null,Mo=0,Gm=0,Hm=null,rE=null,wu=0,Qm=null;function $n(){if((rt&2)!==0&&Ke!==0)return Ke&-Ke;if(Z.T!==null){var n=To;return n!==0?n:Jm()}return tr()}function iE(){dr===0&&(dr=(Ke&536870912)===0||Je?Gs():536870912);var n=fr.current;return n!==null&&(n.flags|=32),dr}function Yn(n,i,o){(n===mt&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(Po(n,0),os(n,Ke,dr,!1)),Dr(n,o),((rt&2)===0||n!==mt)&&(n===mt&&((rt&2)===0&&(ya|=o),xt===4&&os(n,Ke,dr,!1)),qr(n))}function sE(n,i,o){if((rt&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||_r(n,i),f=u?vR(n,i):Ym(n,i,!0),g=u;do{if(f===0){Vo&&!u&&os(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!yR(o)){f=Ym(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var b=n;f=bu;var C=b.current.memoizedState.isDehydrated;if(C&&(Po(b,E).flags|=256),E=Ym(b,E,!1),E!==2){if(zm&&!C){b.errorRecoveryDisabledLanes|=g,ya|=g,f=4;break e}g=Mn,Mn=f,g!==null&&(Mn===null?Mn=g:Mn.push.apply(Mn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Po(n,0),os(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:os(u,i,dr,!rs);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Fm+300-Vn(),10<f)){if(os(u,i,dr,!rs),Vt(u,0,!0)!==0)break e;u.timeoutHandle=ME(aE.bind(null,u,o,Mn,Lh,qm,i,dr,ya,No,rs,g,2,-0,0),f);break e}aE(u,o,Mn,Lh,qm,i,dr,ya,No,rs,g,0,-0,0)}}break}while(!0);qr(n)}function aE(n,i,o,u,f,g,E,b,C,H,J,te,K,$){if(n.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:WR},Jv(i),te=eI(),te!==null)){n.cancelPendingCommit=te(dE.bind(null,n,i,g,o,u,f,E,b,C,J,1,K,$)),os(n,g,E,!H);return}dE(n,i,g,o,u,f,E,b,C)}function yR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Fn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function os(n,i,o,u){i&=~jm,i&=~ya,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-de(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&zn(n,o,i)}function Uh(){return(rt&6)===0?(Au(0),!1):!0}function Km(){if(Ue!==null){if(it===0)var n=Ue.return;else n=Ue,gi=ha=null,cm(n),Io=null,mu=0,n=Ue;for(;n!==null;)Bv(n.alternate,n),n=n.return;Ue=null}}function Po(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,PR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Km(),mt=n,Ue=o=fi(n.current,null),Ke=i,it=0,Kn=null,rs=!1,Vo=_r(n,i),zm=!1,No=dr=jm=ya=is=xt=0,Mn=bu=null,qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-de(u),g=1<<f;i|=n[f],u&=~g}return wi=i,ah(),o}function oE(n,i){ke=null,Z.H=Sh,i===su||i===gh?(i=A_(),it=3):i===T_?(i=A_(),it=4):it=i===Sv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,Ue===null&&(xt=1,Ch(n,lr(i,n.current)))}function lE(){var n=Z.H;return Z.H=Sh,n===null?Sh:n}function uE(){var n=Z.A;return Z.A=gR,n}function $m(){xt=4,rs||(Ke&4194048)!==Ke&&fr.current!==null||(Vo=!0),(is&134217727)===0&&(ya&134217727)===0||mt===null||os(mt,Ke,dr,!1)}function Ym(n,i,o){var u=rt;rt|=2;var f=lE(),g=uE();(mt!==n||Ke!==i)&&(Lh=null,Po(n,i)),i=!1;var E=xt;e:do try{if(it!==0&&Ue!==null){var b=Ue,C=Kn;switch(it){case 8:Km(),E=6;break e;case 3:case 2:case 9:case 6:fr.current===null&&(i=!0);var H=it;if(it=0,Kn=null,ko(n,b,C,H),o&&Vo){E=0;break e}break;default:H=it,it=0,Kn=null,ko(n,b,C,H)}}_R(),E=xt;break}catch(J){oE(n,J)}while(!0);return i&&n.shellSuspendCounter++,gi=ha=null,rt=u,Z.H=f,Z.A=g,Ue===null&&(mt=null,Ke=0,ah()),E}function _R(){for(;Ue!==null;)cE(Ue)}function vR(n,i){var o=rt;rt|=2;var u=lE(),f=uE();mt!==n||Ke!==i?(Lh=null,kh=Vn()+500,Po(n,i)):Vo=_r(n,i);e:do try{if(it!==0&&Ue!==null){i=Ue;var g=Kn;t:switch(it){case 1:it=0,Kn=null,ko(n,i,g,1);break;case 2:case 9:if(b_(g)){it=0,Kn=null,hE(i);break}i=function(){it!==2&&it!==9||mt!==n||(it=7),qr(n)},g.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:b_(g)?(it=0,Kn=null,hE(i)):(it=0,Kn=null,ko(n,i,g,7));break;case 5:var E=null;switch(Ue.tag){case 26:E=Ue.memoizedState;case 5:case 27:var b=Ue;if(!E||QE(E)){it=0,Kn=null;var C=b.sibling;if(C!==null)Ue=C;else{var H=b.return;H!==null?(Ue=H,Bh(H)):Ue=null}break t}}it=0,Kn=null,ko(n,i,g,5);break;case 6:it=0,Kn=null,ko(n,i,g,6);break;case 8:Km(),xt=6;break e;default:throw Error(r(462))}}ER();break}catch(J){oE(n,J)}while(!0);return gi=ha=null,Z.H=u,Z.A=f,rt=o,Ue!==null?0:(mt=null,Ke=0,ah(),xt)}function ER(){for(;Ue!==null&&!js();)cE(Ue)}function cE(n){var i=Lv(n.alternate,n,wi);n.memoizedProps=n.pendingProps,i===null?Bh(n):Ue=i}function hE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Vv(o,i,i.pendingProps,i.type,void 0,Ke);break;case 11:i=Vv(o,i,i.pendingProps,i.type.render,i.ref,Ke);break;case 5:cm(i);default:Bv(o,i),i=Ue=f_(i,wi),i=Lv(o,i,wi)}n.memoizedProps=n.pendingProps,i===null?Bh(n):Ue=i}function ko(n,i,o,u){gi=ha=null,cm(i),Io=null,mu=0;var f=i.return;try{if(uR(n,f,i,o,Ke)){xt=1,Ch(n,lr(o,n.current)),Ue=null;return}}catch(g){if(f!==null)throw Ue=f,g;xt=1,Ch(n,lr(o,n.current)),Ue=null;return}i.flags&32768?(Je||u===1?n=!0:Vo||(Ke&536870912)!==0?n=!1:(rs=n=!0,(u===2||u===9||u===3||u===6)&&(u=fr.current,u!==null&&u.tag===13&&(u.flags|=16384))),fE(i,n)):Bh(i)}function Bh(n){var i=n;do{if((i.flags&32768)!==0){fE(i,rs);return}n=i.return;var o=hR(i.alternate,i,wi);if(o!==null){Ue=o;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);xt===0&&(xt=5)}function fE(n,i){do{var o=fR(n.alternate,n);if(o!==null){o.flags&=32767,Ue=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=o}while(n!==null);xt=6,Ue=null}function dE(n,i,o,u,f,g,E,b,C){n.cancelPendingCommit=null;do zh();while(cn!==0);if((rt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Bd,ji(n,o,g,E,b,C),n===mt&&(Ue=mt=null,Ke=0),Oo=i,as=n,Mo=o,Gm=g,Hm=f,rE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AR(ei,function(){return _E(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=ae.p,ae.p=2,E=rt,rt|=4;try{dR(n,i,o)}finally{rt=E,ae.p=f,Z.T=u}}cn=1,mE(),gE(),pE()}}function mE(){if(cn===1){cn=0;var n=as,i=Oo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=ae.p;ae.p=2;var f=rt;rt|=4;try{Xv(i,n);var g=og,E=n_(n.containerInfo),b=g.focusedElem,C=g.selectionRange;if(E!==b&&b&&b.ownerDocument&&t_(b.ownerDocument.documentElement,b)){if(C!==null&&Md(b)){var H=C.start,J=C.end;if(J===void 0&&(J=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(J,b.value.length);else{var te=b.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var $=K.getSelection(),xe=b.textContent.length,Se=Math.min(C.start,xe),ht=C.end===void 0?Se:Math.min(C.end,xe);!$.extend&&Se>ht&&(E=ht,ht=Se,Se=E);var z=e_(b,Se),M=e_(b,ht);if(z&&M&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==M.node||$.focusOffset!==M.offset)){var G=te.createRange();G.setStart(z.node,z.offset),$.removeAllRanges(),Se>ht?($.addRange(G),$.extend(M.node,M.offset)):(G.setEnd(M.node,M.offset),$.addRange(G))}}}}for(te=[],$=b;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<te.length;b++){var ee=te[b];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Wh=!!ag,og=ag=null}finally{rt=f,ae.p=u,Z.T=o}}n.current=i,cn=2}}function gE(){if(cn===2){cn=0;var n=as,i=Oo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=ae.p;ae.p=2;var f=rt;rt|=4;try{Qv(n,i.alternate,i)}finally{rt=f,ae.p=u,Z.T=o}}cn=3}}function pE(){if(cn===4||cn===3){cn=0,Ya();var n=as,i=Oo,o=Mo,u=rE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,Oo=as=null,yE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ss=null),vr(o),i=i.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(_t,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Z.T,f=ae.p,ae.p=2,Z.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var b=u[E];g(b.value,{componentStack:b.stack})}}finally{Z.T=i,ae.p=f}}(Mo&3)!==0&&zh(),qr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Qm?wu++:(wu=0,Qm=n):wu=0,Au(0)}}function yE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ru(i)))}function zh(n){return mE(),gE(),pE(),_E()}function _E(){if(cn!==5)return!1;var n=as,i=Gm;Gm=0;var o=vr(Mo),u=Z.T,f=ae.p;try{ae.p=32>o?32:o,Z.T=null,o=Hm,Hm=null;var g=as,E=Mo;if(cn=0,Oo=as=null,Mo=0,(rt&6)!==0)throw Error(r(331));var b=rt;if(rt|=4,tE(g.current),Wv(g,g.current,E,o),rt=b,Au(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(_t,g)}catch{}return!0}finally{ae.p=f,Z.T=u,yE(n,i)}}function vE(n,i,o){i=lr(o,i),i=Am(n.stateNode,i,2),n=Xi(n,i,2),n!==null&&(Dr(n,2),qr(n))}function ft(n,i,o){if(n.tag===3)vE(n,n,o);else for(;i!==null;){if(i.tag===3){vE(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ss===null||!ss.has(u))){n=lr(o,n),o=wv(2),u=Xi(i,o,2),u!==null&&(Av(o,u,i,n),Dr(u,2),qr(u));break}}i=i.return}}function Xm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new pR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(zm=!0,f.add(o),n=TR.bind(null,n,i,o),i.then(n,n))}function TR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,mt===n&&(Ke&o)===o&&(xt===4||xt===3&&(Ke&62914560)===Ke&&300>Vn()-Fm?(rt&2)===0&&Po(n,0):jm|=o,No===Ke&&(No=0)),qr(n)}function EE(n,i){i===0&&(i=zi()),n=yo(n,i),n!==null&&(Dr(n,i),qr(n))}function bR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),EE(n,o)}function wR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),EE(n,o)}function AR(n,i){return xr(n,i)}var jh=null,Lo=null,Zm=!1,qh=!1,Wm=!1,_a=0;function qr(n){n!==Lo&&n.next===null&&(Lo===null?jh=Lo=n:Lo=Lo.next=n),qh=!0,Zm||(Zm=!0,RR())}function Au(n,i){if(!Wm&&qh){Wm=!0;do for(var o=!1,u=jh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,b=u.pingedLanes;g=(1<<31-de(42|n)+1)-1,g&=f&~(E&~b),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,AE(u,g))}else g=Ke,g=Vt(u,u===mt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||_r(u,g)||(o=!0,AE(u,g));u=u.next}while(o);Wm=!1}}function SR(){TE()}function TE(){qh=Zm=!1;var n=0;_a!==0&&(MR()&&(n=_a),_a=0);for(var i=Vn(),o=null,u=jh;u!==null;){var f=u.next,g=bE(u,i);g===0?(u.next=null,o===null?jh=f:o.next=f,f===null&&(Lo=o)):(o=u,(n!==0||(g&3)!==0)&&(qh=!0)),u=f}Au(n)}function bE(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-de(g),b=1<<E,C=f[E];C===-1?((b&o)===0||(b&u)!==0)&&(f[E]=ni(b,i)):C<=i&&(n.expiredLanes|=b),g&=~b}if(i=mt,o=Ke,o=Vt(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(it===2||it===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&yr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||_r(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&yr(u),vr(o)){case 2:case 8:o=Ui;break;case 32:o=ei;break;case 268435456:o=Bi;break;default:o=ei}return u=wE.bind(null,n),o=xr(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&yr(u),n.callbackPriority=2,n.callbackNode=null,2}function wE(n,i){if(cn!==0&&cn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(zh()&&n.callbackNode!==o)return null;var u=Ke;return u=Vt(n,n===mt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(sE(n,u,i),bE(n,Vn()),n.callbackNode!=null&&n.callbackNode===o?wE.bind(null,n):null)}function AE(n,i){if(zh())return null;sE(n,i,!0)}function RR(){kR(function(){(rt&6)!==0?xr(qs,SR):TE()})}function Jm(){return _a===0&&(_a=Gs()),_a}function SE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:io(""+n)}function RE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function IR(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=SE((f[pt]||null).action),E=u.submitter;E&&(i=(i=E[pt]||null)?SE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var b=new so("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(_a!==0){var C=E?RE(f,E):new FormData(f);vm(o,{pending:!0,data:C,method:f.method,action:g},null,C)}}else typeof g=="function"&&(b.preventDefault(),C=E?RE(f,E):new FormData(f),vm(o,{pending:!0,data:C,method:f.method,action:g},g,C))},currentTarget:f}]})}}for(var eg=0;eg<Ud.length;eg++){var tg=Ud[eg],xR=tg.toLowerCase(),DR=tg[0].toUpperCase()+tg.slice(1);Ar(xR,"on"+DR)}Ar(s_,"onAnimationEnd"),Ar(a_,"onAnimationIteration"),Ar(o_,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(QS,"onTransitionRun"),Ar(KS,"onTransitionStart"),Ar($S,"onTransitionCancel"),Ar(l_,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),br("onBeforeInput",["compositionend","keypress","textInput","paste"]),br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function IE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var b=u[E],C=b.instance,H=b.currentTarget;if(b=b.listener,C!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=H;try{g(f)}catch(J){Dh(J)}f.currentTarget=null,g=C}else for(E=0;E<u.length;E++){if(b=u[E],C=b.instance,H=b.currentTarget,b=b.listener,C!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=H;try{g(f)}catch(J){Dh(J)}f.currentTarget=null,g=C}}}}function Be(n,i){var o=i[Fi];o===void 0&&(o=i[Fi]=new Set);var u=n+"__bubble";o.has(u)||(xE(i,n,2,!1),o.add(u))}function ng(n,i,o){var u=0;i&&(u|=4),xE(o,n,u,i)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function rg(n){if(!n[Fh]){n[Fh]=!0,Ll.forEach(function(o){o!=="selectionchange"&&(CR.has(o)||ng(o,!1,n),ng(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fh]||(i[Fh]=!0,ng("selectionchange",!1,i))}}function xE(n,i,o,u){switch(WE(i)){case 2:var f=rI;break;case 8:f=iI;break;default:f=yg}o=f.bind(null,i,o,n),f=void 0,!ar||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function ig(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=Tr(b),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=g=E;continue e}b=b.parentNode}}u=u.return}Hc(function(){var H=g,J=sr(o),te=[];e:{var K=u_.get(n);if(K!==void 0){var $=so,xe=n;switch(n){case"keypress":if(Or(o)===0)break e;case"keydown":case"keyup":$=ho;break;case"focusin":xe="focus",$=lo;break;case"focusout":xe="blur",$=lo;break;case"beforeblur":case"afterblur":$=lo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Jc;break;case s_:case a_:case o_:$=uo;break;case l_:$=th;break;case"scroll":case"scrollend":$=Qc;break;case"wheel":$=fo;break;case"copy":case"cut":case"paste":$=co;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Yl;break;case"toggle":case"beforetoggle":$=rh}var Se=(i&4)!==0,ht=!Se&&(n==="scroll"||n==="scrollend"),z=Se?K!==null?K+"Capture":null:K;Se=[];for(var M=H,G;M!==null;){var ee=M;if(G=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||G===null||z===null||(ee=Zs(M,z),ee!=null&&Se.push(Ru(M,ee,G))),ht)break;M=M.return}0<Se.length&&(K=new $(K,xe,null,o,J),te.push({event:K,listeners:Se}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",K&&o!==ai&&(xe=o.relatedTarget||o.fromElement)&&(Tr(xe)||xe[bn]))break e;if(($||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,$?(xe=o.relatedTarget||o.toElement,$=H,xe=xe?Tr(xe):null,xe!==null&&(ht=l(xe),Se=xe.tag,xe!==ht||Se!==5&&Se!==27&&Se!==6)&&(xe=null)):($=null,xe=H),$!==xe)){if(Se=or,ee="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Se=Yl,ee="onPointerLeave",z="onPointerEnter",M="pointer"),ht=$==null?K:rr($),G=xe==null?K:rr(xe),K=new Se(ee,M+"leave",$,o,J),K.target=ht,K.relatedTarget=G,ee=null,Tr(J)===H&&(Se=new Se(z,M+"enter",xe,o,J),Se.target=G,Se.relatedTarget=ht,ee=Se),ht=ee,$&&xe)t:{for(Se=$,z=xe,M=0,G=Se;G;G=Uo(G))M++;for(G=0,ee=z;ee;ee=Uo(ee))G++;for(;0<M-G;)Se=Uo(Se),M--;for(;0<G-M;)z=Uo(z),G--;for(;M--;){if(Se===z||z!==null&&Se===z.alternate)break t;Se=Uo(Se),z=Uo(z)}Se=null}else Se=null;$!==null&&DE(te,K,$,Se,!1),xe!==null&&ht!==null&&DE(te,ht,xe,Se,!0)}}e:{if(K=H?rr(H):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var _e=$y;else if(Kt(K))if(Yy)_e=FS;else{_e=jS;var Le=zS}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&ql(H.elementType)&&(_e=$y):_e=qS;if(_e&&(_e=_e(n,H))){hi(te,_e,o,J);break e}Le&&Le(n,K,H),n==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&Hi(K,"number",K.value)}switch(Le=H?rr(H):window,n){case"focusin":(Kt(Le)||Le.contentEditable==="true")&&(mo=Le,Pd=H,Wl=null);break;case"focusout":Wl=Pd=mo=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,r_(te,o,J);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":r_(te,o,J)}var we;if(kr)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else He?X(n,o)&&(Re="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(v&&o.locale!=="ko"&&(He||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&He&&(we=Gl()):(Nr=J,Qi="value"in Nr?Nr.value:Nr.textContent,He=!0)),Le=Gh(H,Re),0<Le.length&&(Re=new Kl(Re,n,null,o,J),te.push({event:Re,listeners:Le}),we?Re.data=we:(we=ue(o),we!==null&&(Re.data=we)))),(we=y?Qt(n,o):Qe(n,o))&&(Re=Gh(H,"onBeforeInput"),0<Re.length&&(Le=new Kl("onBeforeInput","beforeinput",null,o,J),te.push({event:Le,listeners:Re}),Le.data=we)),IR(te,n,H,o,J)}IE(te,i)})}function Ru(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Gh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Zs(n,o),f!=null&&u.unshift(Ru(n,f,g)),f=Zs(n,i),f!=null&&u.push(Ru(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Uo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function DE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var b=o,C=b.alternate,H=b.stateNode;if(b=b.tag,C!==null&&C===u)break;b!==5&&b!==26&&b!==27||H===null||(C=H,f?(H=Zs(o,g),H!=null&&E.unshift(Ru(o,H,C))):f||(H=Zs(o,g),H!=null&&E.push(Ru(o,H,C)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var VR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function CE(n){return(typeof n=="string"?n:""+n).replace(VR,`
`).replace(NR,"")}function VE(n,i){return i=CE(i),CE(n)===i}function Hh(){}function ct(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ir(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ir(n,""+u);break;case"className":Cr(n,"class",u);break;case"tabIndex":Cr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Cr(n,o,u);break;case"style":jl(n,u,g);break;case"data":if(i!=="object"){Cr(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=io(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&ct(n,i,"name",f.name,f,null),ct(n,i,"formEncType",f.formEncType,f,null),ct(n,i,"formMethod",f.formMethod,f,null),ct(n,i,"formTarget",f.formTarget,f,null)):(ct(n,i,"encType",f.encType,f,null),ct(n,i,"method",f.method,f,null),ct(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=io(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Hh);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=io(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Be("beforetoggle",n),Be("toggle",n),Gi(n,"popover",u);break;case"xlinkActuate":on(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":on(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":on(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":on(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":on(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":on(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":on(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":on(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":on(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Gi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=xd.get(o)||o,Gi(n,o,u))}}function sg(n,i,o,u,f,g){switch(o){case"style":jl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?ir(n,u):(typeof u=="number"||typeof u=="bigint")&&ir(n,""+u);break;case"onScroll":u!=null&&Be("scroll",n);break;case"onScrollEnd":u!=null&&Be("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[pt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Gi(n,o,u)}}}function hn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",n),Be("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(n,i,g,E,o,null)}}f&&ct(n,i,"srcSet",o.srcSet,o,null),u&&ct(n,i,"src",o.src,o,null);return;case"input":Be("invalid",n);var b=g=E=f=null,C=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":E=J;break;case"checked":C=J;break;case"defaultChecked":H=J;break;case"value":g=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:ct(n,i,u,J,o,null)}}$s(n,g,b,C,H,E,f,!1),ro(n);return;case"select":Be("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":g=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:ct(n,i,f,b,o,null)}i=g,o=E,n.multiple=!!u,i!=null?si(n,!!u,i,!1):o!=null&&si(n,!!u,o,!0);return;case"textarea":Be("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":f=b;break;case"children":g=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ct(n,i,E,b,o,null)}Ys(n,u,f,g),ro(n);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ct(n,i,C,u,o,null)}return;case"dialog":Be("beforetoggle",n),Be("toggle",n),Be("cancel",n),Be("close",n);break;case"iframe":case"object":Be("load",n);break;case"video":case"audio":for(u=0;u<Su.length;u++)Be(Su[u],n);break;case"image":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"embed":case"source":case"link":Be("error",n),Be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ct(n,i,H,u,o,null)}return;default:if(ql(i)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&sg(n,i,J,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&ct(n,i,b,u,o,null))}function OR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,b=null,C=null,H=null,J=null;for($ in o){var te=o[$];if(o.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":C=te;default:u.hasOwnProperty($)||ct(n,i,$,null,u,te)}}for(var K in u){var $=u[K];if(te=o[K],u.hasOwnProperty(K)&&($!=null||te!=null))switch(K){case"type":g=$;break;case"name":f=$;break;case"checked":H=$;break;case"defaultChecked":J=$;break;case"value":E=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:$!==te&&ct(n,i,K,$,u,te)}}qn(n,E,b,C,H,J,g,f);return;case"select":$=E=b=K=null;for(g in o)if(C=o[g],o.hasOwnProperty(g)&&C!=null)switch(g){case"value":break;case"multiple":$=C;default:u.hasOwnProperty(g)||ct(n,i,g,null,u,C)}for(f in u)if(g=u[f],C=o[f],u.hasOwnProperty(f)&&(g!=null||C!=null))switch(f){case"value":K=g;break;case"defaultValue":b=g;break;case"multiple":E=g;default:g!==C&&ct(n,i,f,g,u,C)}i=b,o=E,u=$,K!=null?si(n,!!o,K,!1):!!u!=!!o&&(i!=null?si(n,!!o,i,!0):si(n,!!o,o?[]:"",!1));return;case"textarea":$=K=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(n,i,b,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":K=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&ct(n,i,E,f,u,g)}lt(n,K,$);return;case"option":for(var xe in o)if(K=o[xe],o.hasOwnProperty(xe)&&K!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":n.selected=!1;break;default:ct(n,i,xe,null,u,K)}for(C in u)if(K=u[C],$=o[C],u.hasOwnProperty(C)&&K!==$&&(K!=null||$!=null))switch(C){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ct(n,i,C,K,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)K=o[Se],o.hasOwnProperty(Se)&&K!=null&&!u.hasOwnProperty(Se)&&ct(n,i,Se,null,u,K);for(H in u)if(K=u[H],$=o[H],u.hasOwnProperty(H)&&K!==$&&(K!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:ct(n,i,H,K,u,$)}return;default:if(ql(i)){for(var ht in o)K=o[ht],o.hasOwnProperty(ht)&&K!==void 0&&!u.hasOwnProperty(ht)&&sg(n,i,ht,void 0,u,K);for(J in u)K=u[J],$=o[J],!u.hasOwnProperty(J)||K===$||K===void 0&&$===void 0||sg(n,i,J,K,u,$);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!u.hasOwnProperty(z)&&ct(n,i,z,null,u,K);for(te in u)K=u[te],$=o[te],!u.hasOwnProperty(te)||K===$||K==null&&$==null||ct(n,i,te,K,u,$)}var ag=null,og=null;function Qh(n){return n.nodeType===9?n:n.ownerDocument}function NE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function lg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ug=null;function MR(){var n=window.event;return n&&n.type==="popstate"?n===ug?!1:(ug=n,!0):(ug=null,!1)}var ME=typeof setTimeout=="function"?setTimeout:void 0,PR=typeof clearTimeout=="function"?clearTimeout:void 0,PE=typeof Promise=="function"?Promise:void 0,kR=typeof queueMicrotask=="function"?queueMicrotask:typeof PE<"u"?function(n){return PE.resolve(null).then(n).catch(LR)}:ME;function LR(n){setTimeout(function(){throw n})}function ls(n){return n==="head"}function kE(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&Iu(E.documentElement),o&2&&Iu(E.body),o&4)for(o=E.head,Iu(o),E=o.firstChild;E;){var b=E.nextSibling,C=E.nodeName;E[ot]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(f===0){n.removeChild(g),Pu(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Pu(i)}function cg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":cg(o),gn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function UR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ot])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Rr(n.nextSibling),n===null)break}return null}function BR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Rr(n.nextSibling),n===null))return null;return n}function hg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function zR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Rr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var fg=null;function LE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function UE(n,i,o){switch(i=Qh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Iu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);gn(n)}var mr=new Map,BE=new Set;function Kh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ai=ae.d;ae.d={f:jR,r:qR,D:FR,C:GR,L:HR,m:QR,X:$R,S:KR,M:YR};function jR(){var n=Ai.f(),i=Uh();return n||i}function qR(n){var i=nr(n);i!==null&&i.tag===5&&i.type==="form"?sv(i):Ai.r(n)}var Bo=typeof document>"u"?null:document;function zE(n,i,o){var u=Bo;if(u&&typeof i=="string"&&i){var f=Bt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),BE.has(f)||(BE.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),hn(i,"link",n),Ot(i),u.head.appendChild(i)))}}function FR(n){Ai.D(n),zE("dns-prefetch",n,null)}function GR(n,i){Ai.C(n,i),zE("preconnect",n,i)}function HR(n,i,o){Ai.L(n,i,o);var u=Bo;if(u&&n&&i){var f='link[rel="preload"][as="'+Bt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Bt(o.imageSizes)+'"]')):f+='[href="'+Bt(n)+'"]';var g=f;switch(i){case"style":g=zo(n);break;case"script":g=jo(n)}mr.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),mr.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(xu(g))||i==="script"&&u.querySelector(Du(g))||(i=u.createElement("link"),hn(i,"link",n),Ot(i),u.head.appendChild(i)))}}function QR(n,i){Ai.m(n,i);var o=Bo;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=jo(n)}if(!mr.has(g)&&(n=_({rel:"modulepreload",href:n},i),mr.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(g)))return}u=o.createElement("link"),hn(u,"link",n),Ot(u),o.head.appendChild(u)}}}function KR(n,i,o){Ai.S(n,i,o);var u=Bo;if(u&&n){var f=wn(u).hoistableStyles,g=zo(n);i=i||"default";var E=f.get(g);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(xu(g)))b.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=mr.get(g))&&dg(n,o);var C=E=u.createElement("link");Ot(C),hn(C,"link",n),C._p=new Promise(function(H,J){C.onload=H,C.onerror=J}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,$h(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(g,E)}}}function $R(n,i){Ai.X(n,i);var o=Bo;if(o&&n){var u=wn(o).hoistableScripts,f=jo(n),g=u.get(f);g||(g=o.querySelector(Du(f)),g||(n=_({src:n,async:!0},i),(i=mr.get(f))&&mg(n,i),g=o.createElement("script"),Ot(g),hn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function YR(n,i){Ai.M(n,i);var o=Bo;if(o&&n){var u=wn(o).hoistableScripts,f=jo(n),g=u.get(f);g||(g=o.querySelector(Du(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=mr.get(f))&&mg(n,i),g=o.createElement("script"),Ot(g),hn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function jE(n,i,o,u){var f=(f=De.current)?Kh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=zo(o.href),o=wn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=zo(o.href);var g=wn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(xu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),mr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(n,o),g||XR(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jo(o),o=wn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function zo(n){return'href="'+Bt(n)+'"'}function xu(n){return'link[rel="stylesheet"]['+n+"]"}function qE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function XR(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),hn(i,"link",o),Ot(i),n.head.appendChild(i))}function jo(n){return'[src="'+Bt(n)+'"]'}function Du(n){return"script[async]"+n}function FE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return i.instance=u,Ot(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ot(u),hn(u,"style",f),$h(u,o.precedence,n),i.instance=u;case"stylesheet":f=zo(o.href);var g=n.querySelector(xu(f));if(g)return i.state.loading|=4,i.instance=g,Ot(g),g;u=qE(o),(f=mr.get(f))&&dg(u,f),g=(n.ownerDocument||n).createElement("link"),Ot(g);var E=g;return E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),hn(g,"link",u),i.state.loading|=4,$h(g,o.precedence,n),i.instance=g;case"script":return g=jo(o.src),(f=n.querySelector(Du(g)))?(i.instance=f,Ot(f),f):(u=o,(f=mr.get(g))&&(u=_({},o),mg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ot(f),hn(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$h(u,o.precedence,n));return i.instance}function $h(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===i)g=b;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function mg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Yh=null;function GE(n,i,o){if(Yh===null){var u=new Map,f=Yh=new Map;f.set(o,u)}else f=Yh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[ot]||g[Nt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var b=u.get(E);b?b.push(g):u.set(E,[g])}}return u}function HE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function ZR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function QE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Cu=null;function WR(){}function JR(n,i,o){if(Cu===null)throw Error(r(475));var u=Cu;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=zo(o.href),g=n.querySelector(xu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Xh.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,Ot(g);return}g=n.ownerDocument||n,o=qE(o),(f=mr.get(f))&&dg(o,f),g=g.createElement("link"),Ot(g);var E=g;E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),hn(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Xh.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function eI(){if(Cu===null)throw Error(r(475));var n=Cu;return n.stylesheets&&n.count===0&&gg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&gg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Xh(){if(this.count--,this.count===0){if(this.stylesheets)gg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zh=null;function gg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zh=new Map,i.forEach(tI,n),Zh=null,Xh.call(n))}function tI(n,i){if(!(i.state.loading&4)){var o=Zh.get(n);if(o)var u=o.get(null);else{o=new Map,Zh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Xh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Vu={$$typeof:W,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function nI(n,i,o,u,f,g,E,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function KE(n,i,o,u,f,g,E,b,C,H,J,te){return n=new nI(n,i,o,E,b,C,H,te),i=1,g===!0&&(i|=24),g=Gn(3,null,null,i),n.current=g,g.stateNode=n,i=Xd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},em(g),n}function $E(n){return n?(n=_o,n):_o}function YE(n,i,o,u,f,g){f=$E(f),u.context===null?u.context=f:u.pendingContext=f,u=Yi(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Xi(n,u,i),o!==null&&(Yn(o,n,i),ou(o,n,i))}function XE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function pg(n,i){XE(n,i),(n=n.alternate)&&XE(n,i)}function ZE(n){if(n.tag===13){var i=yo(n,67108864);i!==null&&Yn(i,n,67108864),pg(n,67108864)}}var Wh=!0;function rI(n,i,o,u){var f=Z.T;Z.T=null;var g=ae.p;try{ae.p=2,yg(n,i,o,u)}finally{ae.p=g,Z.T=f}}function iI(n,i,o,u){var f=Z.T;Z.T=null;var g=ae.p;try{ae.p=8,yg(n,i,o,u)}finally{ae.p=g,Z.T=f}}function yg(n,i,o,u){if(Wh){var f=_g(u);if(f===null)ig(n,i,u,Jh,o),JE(n,u);else if(aI(f,n,i,o,u))u.stopPropagation();else if(JE(n,u),i&4&&-1<sI.indexOf(n)){for(;f!==null;){var g=nr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Zt(g.pendingLanes);if(E!==0){var b=g;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var C=1<<31-de(E);b.entanglements[1]|=C,E&=~C}qr(g),(rt&6)===0&&(kh=Vn()+500,Au(0))}}break;case 13:b=yo(g,2),b!==null&&Yn(b,g,2),Uh(),pg(g,2)}if(g=_g(u),g===null&&ig(n,i,u,Jh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else ig(n,i,u,null,o)}}function _g(n){return n=sr(n),vg(n)}var Jh=null;function vg(n){if(Jh=null,n=Tr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Jh=n,null}function WE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kl()){case qs:return 2;case Ui:return 8;case ei:case ti:return 32;case Bi:return 268435456;default:return 32}default:return 32}}var Eg=!1,us=null,cs=null,hs=null,Nu=new Map,Ou=new Map,fs=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JE(n,i){switch(n){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":Nu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(i.pointerId)}}function Mu(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=nr(i),i!==null&&ZE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function aI(n,i,o,u,f){switch(i){case"focusin":return us=Mu(us,n,i,o,u,f),!0;case"dragenter":return cs=Mu(cs,n,i,o,u,f),!0;case"mouseover":return hs=Mu(hs,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return Nu.set(g,Mu(Nu.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Ou.set(g,Mu(Ou.get(g)||null,n,i,o,u,f)),!0}return!1}function eT(n){var i=Tr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Za(n.priority,function(){if(o.tag===13){var u=$n();u=er(u);var f=yo(o,u);f!==null&&Yn(f,o,u),pg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ef(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=_g(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ai=u,o.target.dispatchEvent(u),ai=null}else return i=nr(o),i!==null&&ZE(i),n.blockedOn=o,!1;i.shift()}return!0}function tT(n,i,o){ef(n)&&o.delete(i)}function oI(){Eg=!1,us!==null&&ef(us)&&(us=null),cs!==null&&ef(cs)&&(cs=null),hs!==null&&ef(hs)&&(hs=null),Nu.forEach(tT),Ou.forEach(tT)}function tf(n,i){n.blockedOn===i&&(n.blockedOn=null,Eg||(Eg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oI)))}var nf=null;function nT(n){nf!==n&&(nf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){nf===n&&(nf=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(vg(u||o)===null)continue;break}var g=nr(o);g!==null&&(n.splice(i,3),i-=3,vm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Pu(n){function i(C){return tf(C,n)}us!==null&&tf(us,n),cs!==null&&tf(cs,n),hs!==null&&tf(hs,n),Nu.forEach(i),Ou.forEach(i);for(var o=0;o<fs.length;o++){var u=fs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fs.length&&(o=fs[0],o.blockedOn===null);)eT(o),o.blockedOn===null&&fs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[pt]||null;if(typeof g=="function")E||nT(o);else if(E){var b=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[pt]||null)b=E.formAction;else if(vg(f)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),nT(o)}}}function Tg(n){this._internalRoot=n}rf.prototype.render=Tg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=$n();YE(o,u,n,i,null,null)},rf.prototype.unmount=Tg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;YE(n.current,2,null,n,null,null),Uh(),i[bn]=null}};function rf(n){this._internalRoot=n}rf.prototype.unstable_scheduleHydration=function(n){if(n){var i=tr();n={blockedOn:null,target:n,priority:i};for(var o=0;o<fs.length&&i!==0&&i<fs[o].priority;o++);fs.splice(o,0,n),o===0&&eT(n)}};var rT=e.version;if(rT!=="19.1.0")throw Error(r(527,rT,"19.1.0"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var lI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{_t=sf.inject(lI),Ze=sf}catch{}}return Lu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=vv,g=Ev,E=Tv,b=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=KE(n,1,!1,null,null,o,u,f,g,E,b,null),n[bn]=i.current,rg(n),new Tg(i)},Lu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=vv,E=Ev,b=Tv,C=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),i=KE(n,1,!0,i,o??null,u,f,g,E,b,C,H),i.context=$E(null),o=i.current,u=$n(),u=er(u),f=Yi(u),f.callback=null,Xi(o,f,u),o=u,i.current.lanes=o,Dr(i,o),qr(i),n[bn]=i.current,rg(n),new rf(i)},Lu.version="19.1.0",Lu}var dT;function vI(){if(dT)return Ag.exports;dT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ag.exports=_I(),Ag.exports}var EI=vI();const TI=ob(EI);var Uu={},mT;function bI(){if(mT)return Uu;mT=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.parse=c,Uu.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,R){const x=new l,U=w.length;if(U<2)return x;const L=(R==null?void 0:R.decode)||_;let Q=0;do{const re=w.indexOf("=",Q);if(re===-1)break;const W=w.indexOf(";",Q),ce=W===-1?U:W;if(re>ce){Q=w.lastIndexOf(";",re-1)+1;continue}const le=d(w,Q,re),ve=m(w,re,le),V=w.slice(le,ve);if(x[V]===void 0){let S=d(w,re+1,ce),I=m(w,ce,S);const O=L(w.slice(S,I));x[V]=O}Q=ce+1}while(Q<U);return x}function d(w,R,x){do{const U=w.charCodeAt(R);if(U!==32&&U!==9)return R}while(++R<x);return x}function m(w,R,x){for(;R>x;){const U=w.charCodeAt(--R);if(U!==32&&U!==9)return R+1}return x}function p(w,R,x){const U=(x==null?void 0:x.encode)||encodeURIComponent;if(!s.test(w))throw new TypeError(`argument name is invalid: ${w}`);const L=U(R);if(!e.test(L))throw new TypeError(`argument val is invalid: ${R}`);let Q=w+"="+L;if(!x)return Q;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);Q+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);Q+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);Q+="; Path="+x.path}if(x.expires){if(!T(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);Q+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(Q+="; HttpOnly"),x.secure&&(Q+="; Secure"),x.partitioned&&(Q+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return Q}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function T(w){return a.call(w)==="[object Date]"}return Uu}bI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gT="popstate";function wI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Hg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:nc(a)}return SI(e,t,null,s)}function St(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Yr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function pT(s,e){return{usr:s.state,key:s.key,idx:e}}function Hg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Sl(e):e,state:t,key:e&&e.key||r||AI()}}function nc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Sl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function SI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let L=_(),Q=L==null?null:L-p;p=L,m&&m({action:d,location:U.location,delta:Q})}function w(L,Q){d="PUSH";let re=Hg(U.location,L,Q);p=_()+1;let W=pT(re,p),ce=U.createHref(re);try{c.pushState(W,"",ce)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ce)}l&&m&&m({action:d,location:U.location,delta:1})}function R(L,Q){d="REPLACE";let re=Hg(U.location,L,Q);p=_();let W=pT(re,p),ce=U.createHref(re);c.replaceState(W,"",ce),l&&m&&m({action:d,location:U.location,delta:0})}function x(L){let Q=a.location.origin!=="null"?a.location.origin:a.location.href,re=typeof L=="string"?L:nc(L);return re=re.replace(/ $/,"%20"),St(Q,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,Q)}let U={get action(){return d},get location(){return s(a,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(gT,T),m=L,()=>{a.removeEventListener(gT,T),m=null}},createHref(L){return e(a,L)},createURL:x,encodeLocation(L){let Q=x(L);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:w,replace:R,go(L){return c.go(L)}};return U}function lb(s,e,t="/"){return RI(s,e,t,!1)}function RI(s,e,t,r){let a=typeof e=="string"?Sl(e):e,l=xi(a.pathname||"/",t);if(l==null)return null;let c=ub(s);II(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=UI(l);d=kI(c[m],p,r)}return d}function ub(s,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(St(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=Ri([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(St(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ub(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:MI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of cb(l.path))a(l,c,m)}),e}function cb(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=cb(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function II(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:PI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var xI=/^:[\w-]+$/,DI=3,CI=2,VI=1,NI=10,OI=-2,yT=s=>s==="*";function MI(s,e){let t=s.split("/"),r=t.length;return t.some(yT)&&(r+=OI),e&&(r+=CI),t.filter(a=>!yT(a)).reduce((a,l)=>a+(xI.test(l)?DI:l===""?VI:NI),r)}function PI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function kI(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Rf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),w=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=Rf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ri([l,T.pathname]),pathnameBase:qI(Ri([l,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(l=Ri([l,T.pathnameBase]))}return c}function Rf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=LI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},w)=>{if(_==="*"){let x=d[w]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const R=d[w];return T&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function LI(s,e=!1,t=!0){Yr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function UI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function xi(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function BI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?Sl(s):s;return{pathname:t?t.startsWith("/")?t:zI(t,e):e,search:FI(r),hash:GI(a)}}function zI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function xg(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hb(s){let e=jI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function fb(s,e,t,r=!1){let a;typeof s=="string"?a=Sl(s):(a={...s},St(!a.pathname||!a.pathname.includes("?"),xg("?","pathname","search",a)),St(!a.pathname||!a.pathname.includes("#"),xg("#","pathname","hash",a)),St(!a.search||!a.search.includes("#"),xg("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),T-=1;a.pathname=w.join("/")}d=T>=0?e[T]:"/"}let m=BI(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var Ri=s=>s.join("/").replace(/\/\/+/g,"/"),qI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,GI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function HI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var db=["POST","PUT","PATCH","DELETE"];new Set(db);var QI=["GET",...db];new Set(QI);var Rl=F.createContext(null);Rl.displayName="DataRouter";var Xf=F.createContext(null);Xf.displayName="DataRouterState";var mb=F.createContext({isTransitioning:!1});mb.displayName="ViewTransition";var KI=F.createContext(new Map);KI.displayName="Fetchers";var $I=F.createContext(null);$I.displayName="Await";var Jr=F.createContext(null);Jr.displayName="Navigation";var wc=F.createContext(null);wc.displayName="Location";var Oi=F.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var Ip=F.createContext(null);Ip.displayName="RouteError";function YI(s,{relative:e}={}){St(Ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=F.useContext(Jr),{hash:a,pathname:l,search:c}=Sc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ri([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Ac(){return F.useContext(wc)!=null}function Fa(){return St(Ac(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(wc).location}var gb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pb(s){F.useContext(Jr).static||F.useLayoutEffect(s)}function XI(){let{isDataRoute:s}=F.useContext(Oi);return s?u1():ZI()}function ZI(){St(Ac(),"useNavigate() may be used only in the context of a <Router> component.");let s=F.useContext(Rl),{basename:e,navigator:t}=F.useContext(Jr),{matches:r}=F.useContext(Oi),{pathname:a}=Fa(),l=JSON.stringify(hb(r)),c=F.useRef(!1);return pb(()=>{c.current=!0}),F.useCallback((m,p={})=>{if(Yr(c.current,gb),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=fb(m,JSON.parse(l),a,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ri([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,s])}F.createContext(null);function Sc(s,{relative:e}={}){let{matches:t}=F.useContext(Oi),{pathname:r}=Fa(),a=JSON.stringify(hb(t));return F.useMemo(()=>fb(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function WI(s,e){return yb(s,e)}function yb(s,e,t,r){var re;St(Ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=F.useContext(Jr),{matches:c}=F.useContext(Oi),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let W=T&&T.path||"";_b(p,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let w=Fa(),R;if(e){let W=typeof e=="string"?Sl(e):e;St(_==="/"||((re=W.pathname)==null?void 0:re.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),R=W}else R=w;let x=R.pathname||"/",U=x;if(_!=="/"){let W=_.replace(/^\//,"").split("/");U="/"+x.replace(/^\//,"").split("/").slice(W.length).join("/")}let L=!l&&t&&t.matches&&t.matches.length>0?t.matches:lb(s,{pathname:U});Yr(T||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Yr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=r1(L&&L.map(W=>Object.assign({},W,{params:Object.assign({},m,W.params),pathname:Ri([_,a.encodeLocation?a.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:Ri([_,a.encodeLocation?a.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),c,t,r);return e&&Q?F.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Q):Q}function JI(){let s=l1(),e=HI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:a},t):null,c)}var e1=F.createElement(JI,null),t1=class extends F.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?F.createElement(Oi.Provider,{value:this.props.routeContext},F.createElement(Ip.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n1({routeContext:s,match:e,children:t}){let r=F.useContext(Rl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Oi.Provider,{value:s},t)}function r1(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);St(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,w=!1,R=null,x=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||e1,c&&(d<0&&_===0?(_b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,x=null):d===_&&(w=!0,x=p.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,_+1)),L=()=>{let Q;return T?Q=R:w?Q=x:p.route.Component?Q=F.createElement(p.route.Component,null):p.route.element?Q=p.route.element:Q=m,F.createElement(n1,{match:p,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:Q})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?F.createElement(t1,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:L(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):L()},null)}function xp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i1(s){let e=F.useContext(Rl);return St(e,xp(s)),e}function s1(s){let e=F.useContext(Xf);return St(e,xp(s)),e}function a1(s){let e=F.useContext(Oi);return St(e,xp(s)),e}function Dp(s){let e=a1(s),t=e.matches[e.matches.length-1];return St(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function o1(){return Dp("useRouteId")}function l1(){var r;let s=F.useContext(Ip),e=s1("useRouteError"),t=Dp("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function u1(){let{router:s}=i1("useNavigate"),e=Dp("useNavigate"),t=F.useRef(!1);return pb(()=>{t.current=!0}),F.useCallback(async(a,l={})=>{Yr(t.current,gb),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var _T={};function _b(s,e,t){!e&&!_T[s]&&(_T[s]=!0,Yr(!1,t))}F.memo(c1);function c1({routes:s,future:e,state:t}){return yb(s,void 0,t,e)}function Ea(s){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h1({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){St(!Ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=F.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Sl(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:w="default"}=t,R=F.useMemo(()=>{let x=xi(m,c);return x==null?null:{location:{pathname:x,search:p,hash:_,state:T,key:w},navigationType:r}},[c,m,p,_,T,w,r]);return Yr(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:F.createElement(Jr.Provider,{value:d},F.createElement(wc.Provider,{children:e,value:R}))}function f1({children:s,location:e}){return WI(Qg(s),e)}function Qg(s,e=[]){let t=[];return F.Children.forEach(s,(r,a)=>{if(!F.isValidElement(r))return;let l=[...e,a];if(r.type===F.Fragment){t.push.apply(t,Qg(r.props.children,l));return}St(r.type===Ea,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Qg(r.props.children,l)),t.push(c)}),t}var mf="get",gf="application/x-www-form-urlencoded";function Zf(s){return s!=null&&typeof s.tagName=="string"}function d1(s){return Zf(s)&&s.tagName.toLowerCase()==="button"}function m1(s){return Zf(s)&&s.tagName.toLowerCase()==="form"}function g1(s){return Zf(s)&&s.tagName.toLowerCase()==="input"}function p1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function y1(s,e){return s.button===0&&(!e||e==="_self")&&!p1(s)}var af=null;function _1(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var v1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dg(s){return s!=null&&!v1.has(s)?(Yr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gf}"`),null):s}function E1(s,e){let t,r,a,l,c;if(m1(s)){let d=s.getAttribute("action");r=d?xi(d,e):null,t=s.getAttribute("method")||mf,a=Dg(s.getAttribute("enctype"))||gf,l=new FormData(s)}else if(d1(s)||g1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?xi(m,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||mf,a=Dg(s.getAttribute("formenctype"))||Dg(d.getAttribute("enctype"))||gf,l=new FormData(d,s),!_1()){let{name:p,type:_,value:T}=s;if(_==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,T)}}else{if(Zf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mf,r=null,a=gf,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Cp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function T1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function w1(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await T1(l,t);return c.links?c.links():[]}return[]}));return I1(r.flat(1).filter(b1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function vT(s,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function A1(s,e,{includeHydrateFallback:t}={}){return S1(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function S1(s){return[...new Set(s)]}function R1(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function I1(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(R1(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}var x1=new Set([100,101,204,205]);function D1(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&xi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function vb(){let s=F.useContext(Rl);return Cp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function C1(){let s=F.useContext(Xf);return Cp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Vp=F.createContext(void 0);Vp.displayName="FrameworkContext";function Eb(){let s=F.useContext(Vp);return Cp(s,"You must render this element inside a <HydratedRouter> element"),s}function V1(s,e){let t=F.useContext(Vp),[r,a]=F.useState(!1),[l,c]=F.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,w=F.useRef(null);F.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let U=Q=>{Q.forEach(re=>{c(re.isIntersecting)})},L=new IntersectionObserver(U,{threshold:.5});return w.current&&L.observe(w.current),()=>{L.disconnect()}}},[s]),F.useEffect(()=>{if(r){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[r]);let R=()=>{a(!0)},x=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,w,{}]:[l,w,{onFocus:Bu(d,R),onBlur:Bu(m,x),onMouseEnter:Bu(p,R),onMouseLeave:Bu(_,x),onTouchStart:Bu(T,R)}]:[!1,w,{}]}function Bu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function N1({page:s,...e}){let{router:t}=vb(),r=F.useMemo(()=>lb(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?F.createElement(M1,{page:s,matches:r,...e}):null}function O1(s){let{manifest:e,routeModules:t}=Eb(),[r,a]=F.useState([]);return F.useEffect(()=>{let l=!1;return w1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function M1({page:s,matches:e,...t}){let r=Fa(),{manifest:a,routeModules:l}=Eb(),{basename:c}=vb(),{loaderData:d,matches:m}=C1(),p=F.useMemo(()=>vT(s,e,m,a,r,"data"),[s,e,m,a,r]),_=F.useMemo(()=>vT(s,e,m,a,r,"assets"),[s,e,m,a,r]),T=F.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let x=new Set,U=!1;if(e.forEach(Q=>{var W;let re=a.routes[Q.route.id];!re||!re.hasLoader||(!p.some(ce=>ce.route.id===Q.route.id)&&Q.route.id in d&&((W=l[Q.route.id])!=null&&W.shouldRevalidate)||re.hasClientLoader?U=!0:x.add(Q.route.id))}),x.size===0)return[];let L=D1(s,c);return U&&x.size>0&&L.searchParams.set("_routes",e.filter(Q=>x.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[L.pathname+L.search]},[c,d,r,a,p,e,s,l]),w=F.useMemo(()=>A1(_,a),[_,a]),R=O1(_);return F.createElement(F.Fragment,null,T.map(x=>F.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),w.map(x=>F.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),R.map(({key:x,link:U})=>F.createElement("link",{key:x,...U})))}function P1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tb&&(window.__reactRouterVersion="7.5.1")}catch{}function k1({basename:s,children:e,window:t}){let r=F.useRef();r.current==null&&(r.current=wI({window:t,v5Compat:!0}));let a=r.current,[l,c]=F.useState({action:a.action,location:a.location}),d=F.useCallback(m=>{F.startTransition(()=>c(m))},[c]);return F.useLayoutEffect(()=>a.listen(d),[a,d]),F.createElement(h1,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,an=F.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...w},R){let{basename:x}=F.useContext(Jr),U=typeof p=="string"&&bb.test(p),L,Q=!1;if(typeof p=="string"&&U&&(L=p,Tb))try{let I=new URL(window.location.href),O=p.startsWith("//")?new URL(I.protocol+p):new URL(p),P=xi(O.pathname,x);O.origin===I.origin&&P!=null?p=P+O.search+O.hash:Q=!0}catch{Yr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=YI(p,{relative:a}),[W,ce,le]=V1(r,w),ve=z1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function V(I){e&&e(I),I.defaultPrevented||ve(I)}let S=F.createElement("a",{...w,...le,href:L||re,onClick:Q||l?e:V,ref:P1(R,ce),target:m,"data-discover":!U&&t==="render"?"true":void 0});return W&&!U?F.createElement(F.Fragment,null,S,F.createElement(N1,{page:re})):S});an.displayName="Link";var L1=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=Sc(c,{relative:p.relative}),w=Fa(),R=F.useContext(Xf),{navigator:x,basename:U}=F.useContext(Jr),L=R!=null&&H1(T)&&d===!0,Q=x.encodeLocation?x.encodeLocation(T).pathname:T.pathname,re=w.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(re=re.toLowerCase(),W=W?W.toLowerCase():null,Q=Q.toLowerCase()),W&&U&&(W=xi(W,U)||W);const ce=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let le=re===Q||!a&&re.startsWith(Q)&&re.charAt(ce)==="/",ve=W!=null&&(W===Q||!a&&W.startsWith(Q)&&W.charAt(Q.length)==="/"),V={isActive:le,isPending:ve,isTransitioning:L},S=le?e:void 0,I;typeof r=="function"?I=r(V):I=[r,le?"active":null,ve?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(V):l;return F.createElement(an,{...p,"aria-current":S,className:I,ref:_,style:O,to:c,viewTransition:d},typeof m=="function"?m(V):m)});L1.displayName="NavLink";var U1=F.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=mf,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...w},R)=>{let x=F1(),U=G1(d,{relative:p}),L=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&bb.test(d),re=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let ce=W.nativeEvent.submitter,le=(ce==null?void 0:ce.getAttribute("formmethod"))||c;x(ce||W.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return F.createElement("form",{ref:R,method:L,action:U,onSubmit:r?m:re,...w,"data-discover":!Q&&s==="render"?"true":void 0})});U1.displayName="Form";function B1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wb(s){let e=F.useContext(Rl);return St(e,B1(s)),e}function z1(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=XI(),m=Fa(),p=Sc(s,{relative:l});return F.useCallback(_=>{if(y1(_,e)){_.preventDefault();let T=t!==void 0?t:nc(m)===nc(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,s,a,l,c])}var j1=0,q1=()=>`__${String(++j1)}__`;function F1(){let{router:s}=wb("useSubmit"),{basename:e}=F.useContext(Jr),t=o1();return F.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=E1(r,e);if(a.navigate===!1){let _=a.fetcherKey||q1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function G1(s,{relative:e}={}){let{basename:t}=F.useContext(Jr),r=F.useContext(Oi);St(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Sc(s||".",{relative:e})},c=Fa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ri([t,l.pathname])),nc(l)}function H1(s,e={}){let t=F.useContext(mb);St(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wb("useViewTransitionState"),a=Sc(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=xi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=xi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Rf(a.pathname,c)!=null||Rf(a.pathname,l)!=null}new TextEncoder;[...x1];function Q1(){const[s,e]=F.useState(null);return F.useEffect(()=>{var a,l;const t=(a=window.Telegram)==null?void 0:a.WebApp;if(!t)return;t.ready(),t.expand();const r=t.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&e(r.user.id)},[]),s}const K1=()=>{};var ET={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},$1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let w=(d&15)<<2|p>>6,R=p&63;m||(R=64,c||(w=64)),r.push(t[_],t[T],t[w],t[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ab(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):$1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new Y1;const w=l<<2|d>>4;if(r.push(w),p!==64){const R=d<<4&240|p>>2;if(r.push(R),T!==64){const x=p<<6&192|T;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Y1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X1=function(s){const e=Ab(s);return Sb.encodeByteArray(e,!0)},If=function(s){return X1(s).replace(/\./g,"")},Rb=function(s){try{return Sb.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Z1(t)||(s[t]=xf(s[t],e[t]));return s}function Z1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=()=>Ib().__FIREBASE_DEFAULTS__,J1=()=>{if(typeof process>"u"||typeof ET>"u")return;const s=ET.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},ex=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Rb(s[1]);return e&&JSON.parse(e)},xb=()=>{try{return K1()||W1()||J1()||ex()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Db=()=>{var s;return(s=xb())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[If(JSON.stringify(t)),If(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rx(){var s;const e=(s=xb())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ix(){return typeof window<"u"||Cb()}function Cb(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Vb(){return!rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nb(){try{return typeof indexedDB=="object"}catch{return!1}}function sx(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="FirebaseError";class Ga extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ax,Object.setPrototypeOf(this,Ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wf.prototype.create)}}class Wf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?ox(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ga(a,d,r)}}function ox(s,e){return s.replace(lx,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const lx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function tl(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(bT(l)&&bT(c)){if(!tl(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function bT(s){return s!==null&&typeof s=="object"}function ux(s,e){const t=new cx(s,e);return t.subscribe.bind(t)}class cx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Cg),a.error===void 0&&(a.error=Cg),a.complete===void 0&&(a.complete=Cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(s){return s&&s._delegate?s._delegate:s}class Oa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mx(e))try{this.getOrInitializeService({instanceIdentifier:Ta})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ta){return this.instances.has(e)}getOptions(e=Ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ta){return this.component?this.component.multipleInstances?e:Ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dx(s){return s===Ta?void 0:s}function mx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=[];var Ge;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ge||(Ge={}));const Mb={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},gx=Ge.INFO,px={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},yx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=px[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null,Np.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}function _x(s){Np.forEach(e=>{e.setLogLevel(s)})}function vx(s,e){for(const t of Np){let r=null;e&&e.level&&(r=Mb[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:Ge[l].toLowerCase(),message:d,args:c,type:a.name})}}}const Ex=(s,e)=>e.some(t=>s instanceof t);let wT,AT;function Tx(){return wT||(wT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bx(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pb=new WeakMap,Kg=new WeakMap,kb=new WeakMap,Vg=new WeakMap,Mp=new WeakMap;function wx(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Ts(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Pb.set(t,s)}).catch(()=>{}),Mp.set(e,s),e}function Ax(s){if(Kg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Kg.set(s,e)}let $g={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Kg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||kb.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Sx(s){$g=s($g)}function Rx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Ng(this),e,...t);return kb.set(r,e.sort?e.sort():[e]),Ts(r)}:bx().includes(s)?function(...e){return s.apply(Ng(this),e),Ts(Pb.get(this))}:function(...e){return Ts(s.apply(Ng(this),e))}}function Ix(s){return typeof s=="function"?Rx(s):(s instanceof IDBTransaction&&Ax(s),Ex(s,Tx())?new Proxy(s,$g):s)}function Ts(s){if(s instanceof IDBRequest)return wx(s);if(Vg.has(s))return Vg.get(s);const e=Ix(s);return e!==s&&(Vg.set(s,e),Mp.set(e,s)),e}const Ng=s=>Mp.get(s);function xx(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Ts(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ts(c.result),m.oldVersion,m.newVersion,Ts(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Dx=["get","getKey","getAll","getAllKeys","count"],Cx=["put","add","delete","clear"],Og=new Map;function ST(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Og.get(e))return Og.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Cx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Dx.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Og.set(e,l),l}Sx(s=>({...s,get:(e,t,r)=>ST(e,t)||s.get(e,t,r),has:(e,t)=>!!ST(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Nx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Nx(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cf="@firebase/app",Yg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Op("@firebase/app"),Ox="@firebase/app-compat",Mx="@firebase/analytics-compat",Px="@firebase/analytics",kx="@firebase/app-check-compat",Lx="@firebase/app-check",Ux="@firebase/auth",Bx="@firebase/auth-compat",zx="@firebase/database",jx="@firebase/data-connect",qx="@firebase/database-compat",Fx="@firebase/functions",Gx="@firebase/functions-compat",Hx="@firebase/installations",Qx="@firebase/installations-compat",Kx="@firebase/messaging",$x="@firebase/messaging-compat",Yx="@firebase/performance",Xx="@firebase/performance-compat",Zx="@firebase/remote-config",Wx="@firebase/remote-config-compat",Jx="@firebase/storage",eD="@firebase/storage-compat",tD="@firebase/firestore",nD="@firebase/vertexai",rD="@firebase/firestore-compat",iD="firebase",sD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]",aD={[Cf]:"fire-core",[Ox]:"fire-core-compat",[Px]:"fire-analytics",[Mx]:"fire-analytics-compat",[Lx]:"fire-app-check",[kx]:"fire-app-check-compat",[Ux]:"fire-auth",[Bx]:"fire-auth-compat",[zx]:"fire-rtdb",[jx]:"fire-data-connect",[qx]:"fire-rtdb-compat",[Fx]:"fire-fn",[Gx]:"fire-fn-compat",[Hx]:"fire-iid",[Qx]:"fire-iid-compat",[Kx]:"fire-fcm",[$x]:"fire-fcm-compat",[Yx]:"fire-perf",[Xx]:"fire-perf-compat",[Zx]:"fire-rc",[Wx]:"fire-rc-compat",[Jx]:"fire-gcs",[eD]:"fire-gcs-compat",[tD]:"fire-fst",[rD]:"fire-fst-compat",[nD]:"fire-vertex","fire-js":"fire-js",[iD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Map,nl=new Map,rl=new Map;function rc(s,e){try{s.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Lb(s,e){s.container.addOrOverwriteComponent(e)}function il(s){const e=s.name;if(rl.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;rl.set(e,s);for(const t of Rs.values())rc(t,s);for(const t of nl.values())rc(t,s);return!0}function Ub(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function oD(s,e,t=Ss){Ub(s,e).clearInstance(t)}function Bb(s){return s.options!==void 0}function zb(s){return s==null?!1:s.settings!==void 0}function lD(){rl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Wf("app","Firebase",uD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(s,e){const t=Rb(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class cD extends jb{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&RT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&RT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ii(Cf,Yg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Lp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=sD;function kp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ss,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw pr.create("bad-app-name",{appName:String(a)});if(t||(t=Db()),!t)throw pr.create("no-options");const l=Rs.get(a);if(l){if(tl(t,l.options)&&tl(r,l.config))return l;throw pr.create("duplicate-app",{appName:a})}const c=new Ob(a);for(const m of rl.values())c.addComponent(m);const d=new jb(t,r,c);return Rs.set(a,d),d}function hD(s,e){if(ix()&&!Cb())throw pr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Bb(s)?t=s.options:t=s;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw pr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=nl.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new Ob(l);for(const p of rl.values())d.addComponent(p);const m=new cD(t,e,l,d);return nl.set(l,m),m}function fD(s=Ss){const e=Rs.get(s);if(!e&&s===Ss&&Db())return kp();if(!e)throw pr.create("no-app",{appName:s});return e}function dD(){return Array.from(Rs.values())}async function Lp(s){let e=!1;const t=s.name;Rs.has(t)?(e=!0,Rs.delete(t)):nl.has(t)&&s.decRefCount()<=0&&(nl.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Ii(s,e,t){var r;let a=(r=aD[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(d.join(" "));return}il(new Oa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function qb(s,e){if(s!==null&&typeof s!="function")throw pr.create("invalid-log-argument");vx(s,e)}function Fb(s){_x(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="firebase-heartbeat-database",gD=1,ic="firebase-heartbeat-store";let Mg=null;function Gb(){return Mg||(Mg=xx(mD,gD,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ic)}catch(t){console.warn(t)}}}}).catch(s=>{throw pr.create("idb-open",{originalErrorMessage:s.message})})),Mg}async function pD(s){try{const t=(await Gb()).transaction(ic),r=await t.objectStore(ic).get(Hb(s));return await t.done,r}catch(e){if(e instanceof Ga)Di.warn(e.message);else{const t=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Di.warn(t.message)}}}async function IT(s,e){try{const r=(await Gb()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,Hb(s)),await r.done}catch(t){if(t instanceof Ga)Di.warn(t.message);else{const r=pr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Di.warn(r.message)}}}function Hb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1024,_D=30;class vD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>_D){const c=bD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xT(),{heartbeatsToSend:r,unsentEntries:a}=ED(this._heartbeatsCache.heartbeats),l=If(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Di.warn(t),""}}}function xT(){return new Date().toISOString().substring(0,10)}function ED(s,e=yD){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),DT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),DT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class TD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nb()?sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return IT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return IT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function DT(s){return If(JSON.stringify({version:2,heartbeats:s})).length}function bD(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(s){il(new Oa("platform-logger",e=>new Vx(e),"PRIVATE")),il(new Oa("heartbeat",e=>new vD(e),"PRIVATE")),Ii(Cf,Yg,s),Ii(Cf,Yg,"esm2017"),Ii("fire-js","")}wD("");const AD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ga,SDK_VERSION:Pp,_DEFAULT_ENTRY_NAME:Ss,_addComponent:rc,_addOrOverwriteComponent:Lb,_apps:Rs,_clearComponents:lD,_components:rl,_getProvider:Ub,_isFirebaseApp:Bb,_isFirebaseServerApp:zb,_registerComponent:il,_removeServiceInstance:oD,_serverApps:nl,deleteApp:Lp,getApp:fD,getApps:dD,initializeApp:kp,initializeServerApp:hD,onLog:qb,registerVersion:Ii,setLogLevel:Fb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this._delegate=e,this.firebase=t,rc(e,new Oa("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Lp(this._delegate)))}_getService(e,t=Ss){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ss){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){rc(this._delegate,e)}_addOrOverwriteComponent(e){Lb(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},CT=new Wf("app-compat","Firebase",RD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Ii,setLogLevel:Fb,onLog:qb,apps:null,SDK_VERSION:Pp,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:AD}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function a(p){if(p=p||Ss,!TT(e,p))throw CT.create("no-app",{appName:p});return e[p]}a.App=s;function l(p,_={}){const T=kp(p,_);if(TT(e,T.name))return e[T.name];const w=new s(T,t);return e[T.name]=w,w}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const _=p.name,T=_.replace("-compat","");if(il(p)&&p.type==="PUBLIC"){const w=(R=a())=>{if(typeof R[T]!="function")throw CT.create("invalid-app-argument",{appName:_});return R[T]()};p.serviceProps!==void 0&&xf(w,p.serviceProps),t[T]=w,s.prototype[T]=function(...R){return this._getService.bind(this,_).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){const s=ID(SD);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:Qb,extendNamespace:e,createSubscribe:ux,ErrorFactory:Wf,deepExtend:xf});function e(t){xf(s,t)}return s}const xD=Qb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Op("@firebase/app-compat"),DD="@firebase/app-compat",CD="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(s){Ii(DD,CD,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=Ib();if(s.firebase!==void 0){VT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&VT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Dt=xD;VD();var ND="firebase",OD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.registerVersion(ND,OD,"app-compat");var NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,Kb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,S){function I(){}I.prototype=S.prototype,V.D=S.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(O,P,B){for(var D=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)D[Ce-2]=arguments[Ce];return S.prototype[P].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,S,I){I||(I=0);var O=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)O[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)O[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=V.g[0],I=V.g[1],P=V.g[2];var B=V.g[3],D=S+(B^I&(P^B))+O[0]+3614090360&4294967295;S=I+(D<<7&4294967295|D>>>25),D=B+(P^S&(I^P))+O[1]+3905402710&4294967295,B=S+(D<<12&4294967295|D>>>20),D=P+(I^B&(S^I))+O[2]+606105819&4294967295,P=B+(D<<17&4294967295|D>>>15),D=I+(S^P&(B^S))+O[3]+3250441966&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(B^I&(P^B))+O[4]+4118548399&4294967295,S=I+(D<<7&4294967295|D>>>25),D=B+(P^S&(I^P))+O[5]+1200080426&4294967295,B=S+(D<<12&4294967295|D>>>20),D=P+(I^B&(S^I))+O[6]+2821735955&4294967295,P=B+(D<<17&4294967295|D>>>15),D=I+(S^P&(B^S))+O[7]+4249261313&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(B^I&(P^B))+O[8]+1770035416&4294967295,S=I+(D<<7&4294967295|D>>>25),D=B+(P^S&(I^P))+O[9]+2336552879&4294967295,B=S+(D<<12&4294967295|D>>>20),D=P+(I^B&(S^I))+O[10]+4294925233&4294967295,P=B+(D<<17&4294967295|D>>>15),D=I+(S^P&(B^S))+O[11]+2304563134&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(B^I&(P^B))+O[12]+1804603682&4294967295,S=I+(D<<7&4294967295|D>>>25),D=B+(P^S&(I^P))+O[13]+4254626195&4294967295,B=S+(D<<12&4294967295|D>>>20),D=P+(I^B&(S^I))+O[14]+2792965006&4294967295,P=B+(D<<17&4294967295|D>>>15),D=I+(S^P&(B^S))+O[15]+1236535329&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(P^B&(I^P))+O[1]+4129170786&4294967295,S=I+(D<<5&4294967295|D>>>27),D=B+(I^P&(S^I))+O[6]+3225465664&4294967295,B=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(B^S))+O[11]+643717713&4294967295,P=B+(D<<14&4294967295|D>>>18),D=I+(B^S&(P^B))+O[0]+3921069994&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^B&(I^P))+O[5]+3593408605&4294967295,S=I+(D<<5&4294967295|D>>>27),D=B+(I^P&(S^I))+O[10]+38016083&4294967295,B=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(B^S))+O[15]+3634488961&4294967295,P=B+(D<<14&4294967295|D>>>18),D=I+(B^S&(P^B))+O[4]+3889429448&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^B&(I^P))+O[9]+568446438&4294967295,S=I+(D<<5&4294967295|D>>>27),D=B+(I^P&(S^I))+O[14]+3275163606&4294967295,B=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(B^S))+O[3]+4107603335&4294967295,P=B+(D<<14&4294967295|D>>>18),D=I+(B^S&(P^B))+O[8]+1163531501&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^B&(I^P))+O[13]+2850285829&4294967295,S=I+(D<<5&4294967295|D>>>27),D=B+(I^P&(S^I))+O[2]+4243563512&4294967295,B=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(B^S))+O[7]+1735328473&4294967295,P=B+(D<<14&4294967295|D>>>18),D=I+(B^S&(P^B))+O[12]+2368359562&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(I^P^B)+O[5]+4294588738&4294967295,S=I+(D<<4&4294967295|D>>>28),D=B+(S^I^P)+O[8]+2272392833&4294967295,B=S+(D<<11&4294967295|D>>>21),D=P+(B^S^I)+O[11]+1839030562&4294967295,P=B+(D<<16&4294967295|D>>>16),D=I+(P^B^S)+O[14]+4259657740&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^B)+O[1]+2763975236&4294967295,S=I+(D<<4&4294967295|D>>>28),D=B+(S^I^P)+O[4]+1272893353&4294967295,B=S+(D<<11&4294967295|D>>>21),D=P+(B^S^I)+O[7]+4139469664&4294967295,P=B+(D<<16&4294967295|D>>>16),D=I+(P^B^S)+O[10]+3200236656&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^B)+O[13]+681279174&4294967295,S=I+(D<<4&4294967295|D>>>28),D=B+(S^I^P)+O[0]+3936430074&4294967295,B=S+(D<<11&4294967295|D>>>21),D=P+(B^S^I)+O[3]+3572445317&4294967295,P=B+(D<<16&4294967295|D>>>16),D=I+(P^B^S)+O[6]+76029189&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^B)+O[9]+3654602809&4294967295,S=I+(D<<4&4294967295|D>>>28),D=B+(S^I^P)+O[12]+3873151461&4294967295,B=S+(D<<11&4294967295|D>>>21),D=P+(B^S^I)+O[15]+530742520&4294967295,P=B+(D<<16&4294967295|D>>>16),D=I+(P^B^S)+O[2]+3299628645&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(P^(I|~B))+O[0]+4096336452&4294967295,S=I+(D<<6&4294967295|D>>>26),D=B+(I^(S|~P))+O[7]+1126891415&4294967295,B=S+(D<<10&4294967295|D>>>22),D=P+(S^(B|~I))+O[14]+2878612391&4294967295,P=B+(D<<15&4294967295|D>>>17),D=I+(B^(P|~S))+O[5]+4237533241&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~B))+O[12]+1700485571&4294967295,S=I+(D<<6&4294967295|D>>>26),D=B+(I^(S|~P))+O[3]+2399980690&4294967295,B=S+(D<<10&4294967295|D>>>22),D=P+(S^(B|~I))+O[10]+4293915773&4294967295,P=B+(D<<15&4294967295|D>>>17),D=I+(B^(P|~S))+O[1]+2240044497&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~B))+O[8]+1873313359&4294967295,S=I+(D<<6&4294967295|D>>>26),D=B+(I^(S|~P))+O[15]+4264355552&4294967295,B=S+(D<<10&4294967295|D>>>22),D=P+(S^(B|~I))+O[6]+2734768916&4294967295,P=B+(D<<15&4294967295|D>>>17),D=I+(B^(P|~S))+O[13]+1309151649&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~B))+O[4]+4149444226&4294967295,S=I+(D<<6&4294967295|D>>>26),D=B+(I^(S|~P))+O[11]+3174756917&4294967295,B=S+(D<<10&4294967295|D>>>22),D=P+(S^(B|~I))+O[2]+718787259&4294967295,P=B+(D<<15&4294967295|D>>>17),D=I+(B^(P|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+B&4294967295}r.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var I=S-this.blockSize,O=this.B,P=this.h,B=0;B<S;){if(P==0)for(;B<=I;)a(this,V,B),B+=this.blockSize;if(typeof V=="string"){for(;B<S;)if(O[P++]=V.charCodeAt(B++),P==this.blockSize){a(this,O),P=0;break}}else for(;B<S;)if(O[P++]=V[B++],P==this.blockSize){a(this,O),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var I=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=I&255,I/=256;for(this.u(V),V=Array(16),S=I=0;4>S;++S)for(var O=0;32>O;O+=8)V[I++]=this.g[S]>>>O&255;return V};function l(V,S){var I=d;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=S(V)}function c(V,S){this.h=S;for(var I=[],O=!0,P=V.length-1;0<=P;P--){var B=V[P]|0;O&&B==S||(I[P]=B,O=!1)}this.g=I}var d={};function m(V){return-128<=V&&128>V?l(V,function(S){return new c([S|0],0>S?-1:0)}):new c([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return T;if(0>V)return L(p(-V));for(var S=[],I=1,O=0;V>=I;O++)S[O]=V/I|0,I*=4294967296;return new c(S,0)}function _(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return L(_(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(S,8)),O=T,P=0;P<V.length;P+=8){var B=Math.min(8,V.length-P),D=parseInt(V.substring(P,P+B),S);8>B?(B=p(Math.pow(S,B)),O=O.j(B).add(p(D))):(O=O.j(I),O=O.add(p(D)))}return O}var T=m(0),w=m(1),R=m(16777216);s=c.prototype,s.m=function(){if(U(this))return-L(this).m();for(var V=0,S=1,I=0;I<this.g.length;I++){var O=this.i(I);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(x(this))return"0";if(U(this))return"-"+L(this).toString(V);for(var S=p(Math.pow(V,6)),I=this,O="";;){var P=ce(I,S).g;I=Q(I,P.j(S));var B=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=P,x(I))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function x(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function U(V){return V.h==-1}s.l=function(V){return V=Q(this,V),U(V)?-1:x(V)?0:1};function L(V){for(var S=V.g.length,I=[],O=0;O<S;O++)I[O]=~V.g[O];return new c(I,~V.h).add(w)}s.abs=function(){return U(this)?L(this):this},s.add=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0,P=0;P<=S;P++){var B=O+(this.i(P)&65535)+(V.i(P)&65535),D=(B>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);O=D>>>16,B&=65535,D&=65535,I[P]=D<<16|B}return new c(I,I[I.length-1]&-2147483648?-1:0)};function Q(V,S){return V.add(L(S))}s.j=function(V){if(x(this)||x(V))return T;if(U(this))return U(V)?L(this).j(L(V)):L(L(this).j(V));if(U(V))return L(this.j(L(V)));if(0>this.l(R)&&0>V.l(R))return p(this.m()*V.m());for(var S=this.g.length+V.g.length,I=[],O=0;O<2*S;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<V.g.length;P++){var B=this.i(O)>>>16,D=this.i(O)&65535,Ce=V.i(P)>>>16,be=V.i(P)&65535;I[2*O+2*P]+=D*be,re(I,2*O+2*P),I[2*O+2*P+1]+=B*be,re(I,2*O+2*P+1),I[2*O+2*P+1]+=D*Ce,re(I,2*O+2*P+1),I[2*O+2*P+2]+=B*Ce,re(I,2*O+2*P+2)}for(O=0;O<S;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=S;O<2*S;O++)I[O]=0;return new c(I,0)};function re(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function W(V,S){this.g=V,this.h=S}function ce(V,S){if(x(S))throw Error("division by zero");if(x(V))return new W(T,T);if(U(V))return S=ce(L(V),S),new W(L(S.g),L(S.h));if(U(S))return S=ce(V,L(S)),new W(L(S.g),S.h);if(30<V.g.length){if(U(V)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var I=w,O=S;0>=O.l(V);)I=le(I),O=le(O);var P=ve(I,1),B=ve(O,1);for(O=ve(O,2),I=ve(I,2);!x(O);){var D=B.add(O);0>=D.l(V)&&(P=P.add(I),B=D),O=ve(O,1),I=ve(I,1)}return S=Q(V,P.j(S)),new W(P,S)}for(P=T;0<=V.l(S);){for(I=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=p(I),D=B.j(S);U(D)||0<D.l(V);)I-=O,B=p(I),D=B.j(S);x(B)&&(B=w),P=P.add(B),V=Q(V,D)}return new W(P,V)}s.A=function(V){return ce(this,V).h},s.and=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)&V.i(O);return new c(I,this.h&V.h)},s.or=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)|V.i(O);return new c(I,this.h|V.h)},s.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)^V.i(O);return new c(I,this.h^V.h)};function le(V){for(var S=V.g.length+1,I=[],O=0;O<S;O++)I[O]=V.i(O)<<1|V.i(O-1)>>>31;return new c(I,V.h)}function ve(V,S){var I=S>>5;S%=32;for(var O=V.g.length-I,P=[],B=0;B<O;B++)P[B]=0<S?V.i(B+I)>>>S|V.i(B+I+1)<<32-S:V.i(B+I);return new c(P,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,bs=c}).apply(typeof NT<"u"?NT:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $b,Hu,Yb,pf,Xg,Xb,Zb,Wb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var j=h[A];if(!(j in v))break e;v=v[j]}h=h[h.length-1],A=v[h],y=y(A),y!=A&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,A=!1,j={next:function(){if(!A&&v<h.length){var X=v++;return{value:y(X,h[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,A),h.apply(y,j)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function R(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function x(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(A,j,X){for(var ue=Array(arguments.length-2),He=2;He<arguments.length;He++)ue[He-2]=arguments[He];return y.prototype[j].apply(A,ue)}}function U(h){const y=h.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=h[A];return v}return[]}function L(h,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(m(A)){const j=h.length||0,X=A.length||0;h.length=j+X;for(let ue=0;ue<X;ue++)h[j+ue]=A[ue]}else h.push(A)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ce(h){return ce[" "](h),h}ce[" "]=function(){};var le=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ve(h,y,v){for(const A in h)y.call(v,h[A],A,h)}function V(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(v in A)h[v]=A[v];for(let X=0;X<I.length;X++)v=I[X],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function B(h){d.setTimeout(()=>{throw h},0)}function D(){var h=ze;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Ce{constructor(){this.h=this.g=null}add(y,v){const A=be.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var be=new Q(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,ze=new Ce,N=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(ne)}};var ne=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){B(v)}var y=be;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ge=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Pe(h,y){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(le){e:{try{ce(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:De[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,oe);var De={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Un(h,y,v,A,j){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=j,this.key=++Oe,this.da=this.fa=!1}function Ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Wn(h){this.src=h,this.g={},this.h=0}Wn.prototype.add=function(h,y,v,A,j){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var ue=xr(h,y,A,j);return-1<ue?(y=h[ue],v||(y.fa=!1)):(y=new Un(y,this.src,X,!!A,j),y.fa=v,h.push(y)),y};function Bn(h,y){var v=y.type;if(v in h.g){var A=h.g[v],j=Array.prototype.indexOf.call(A,y,void 0),X;(X=0<=j)&&Array.prototype.splice.call(A,j,1),X&&(Ve(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function xr(h,y,v,A){for(var j=0;j<h.length;++j){var X=h[j];if(!X.da&&X.listener==y&&X.capture==!!v&&X.ha==A)return j}return-1}var yr="closure_lm_"+(1e6*Math.random()|0),js={};function Ya(h,y,v,A,j){if(Array.isArray(y)){for(var X=0;X<y.length;X++)Ya(h,y[X],v,A,j);return null}return v=Xa(v),h&&h[dt]?h.K(y,v,p(A)?!!A.capture:!1,j):Vn(h,y,v,!1,A,j)}function Vn(h,y,v,A,j,X){if(!y)throw Error("Invalid event type");var ue=p(j)?!!j.capture:!!j,He=Bi(h);if(He||(h[yr]=He=new Wn(h)),v=He.add(y,v,A,ue,X),v.proxy)return v;if(A=kl(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)Ae||(j=ue),j===void 0&&(j=!1),h.addEventListener(y.toString(),A,j);else if(h.attachEvent)h.attachEvent(ei(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function kl(){function h(v){return y.call(h.src,h.listener,v)}const y=ti;return h}function qs(h,y,v,A,j){if(Array.isArray(y))for(var X=0;X<y.length;X++)qs(h,y[X],v,A,j);else A=p(A)?!!A.capture:!!A,v=Xa(v),h&&h[dt]?(h=h.i,y=String(y).toString(),y in h.g&&(X=h.g[y],v=xr(X,v,A,j),-1<v&&(Ve(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete h.g[y],h.h--)))):h&&(h=Bi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=xr(y,v,A,j)),(v=-1<h?y[h]:null)&&Ui(v))}function Ui(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[dt])Bn(y.i,h);else{var v=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(v,A,h.capture):y.detachEvent?y.detachEvent(ei(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Bi(y))?(Bn(v,h),v.h==0&&(v.src=null,y[yr]=null)):Ve(h)}}}function ei(h){return h in js?js[h]:js[h]="on"+h}function ti(h,y){if(h.da)h=!0;else{y=new Pe(y,this);var v=h.listener,A=h.ha||h.src;h.fa&&Ui(h),h=v.call(A,y)}return h}function Bi(h){return h=h[yr],h instanceof Wn?h:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xa(h){return typeof h=="function"?h:(h[Fs]||(h[Fs]=function(y){return h.handleEvent(y)}),h[Fs])}function _t(){he.call(this),this.i=new Wn(this),this.M=this,this.F=null}x(_t,he),_t.prototype[dt]=!0,_t.prototype.removeEventListener=function(h,y,v,A){qs(this,h,y,v,A)};function Ze(h,y){var v,A=h.F;if(A)for(v=[];A;A=A.F)v.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new oe(y,h);else if(y instanceof oe)y.target=y.target||h;else{var j=y;y=new oe(A,h),O(y,j)}if(j=!0,v)for(var X=v.length-1;0<=X;X--){var ue=y.g=v[X];j=pe(ue,A,!0,y)&&j}if(ue=y.g=h,j=pe(ue,A,!0,y)&&j,j=pe(ue,A,!1,y)&&j,v)for(X=0;X<v.length;X++)ue=y.g=v[X],j=pe(ue,A,!1,y)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],A=0;A<v.length;A++)Ve(v[A]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,v,A){return this.i.add(String(h),y,!1,v,A)},_t.prototype.L=function(h,y,v,A){return this.i.add(String(h),y,!0,v,A)};function pe(h,y,v,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,X=0;X<y.length;++X){var ue=y[X];if(ue&&!ue.da&&ue.capture==v){var He=ue.listener,Qt=ue.ha||ue.src;ue.fa&&Bn(h.i,ue),j=He.call(Qt,A)!==!1&&j}}return j&&!A.defaultPrevented}function de(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Fe(h){h.g=de(()=>{h.g=null,h.i&&(h.i=!1,Fe(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class et extends he{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fe(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(h){he.call(this),this.h=h,this.g={}}x(nt,he);var Gt=[];function Ht(h){ve(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ui(y)},h),h.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Ht(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=d.JSON.stringify,Vt=d.JSON.parse,_r=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ni(){}ni.prototype.h=null;function Gs(h){return h.h||(h.h=h.i())}function zi(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dr(){oe.call(this,"d")}x(Dr,oe);function ji(){oe.call(this,"c")}x(ji,oe);var zn={},qi=null;function er(){return qi=qi||new _t}zn.La="serverreachability";function vr(h){oe.call(this,zn.La,h)}x(vr,oe);function tr(h){const y=er();Ze(y,new vr(y))}zn.STAT_EVENT="statevent";function Za(h,y){oe.call(this,zn.STAT_EVENT,h),this.stat=y}x(Za,oe);function We(h){const y=er();Ze(y,new Za(y,h))}zn.Ma="timingevent";function Nt(h,y){oe.call(this,zn.Ma,h),this.size=y}x(Nt,oe);function pt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function Fi(h,y,v,A,j,X){h.info(function(){if(h.g)if(X)for(var ue="",He=X.split("&"),Qt=0;Qt<He.length;Qt++){var Qe=He[Qt].split("=");if(1<Qe.length){var Jt=Qe[0];Qe=Qe[1];var Kt=Jt.split("_");ue=2<=Kt.length&&Kt[1]=="type"?ue+(Jt+"="+Qe+"&"):ue+(Jt+"=redacted&")}}else ue=null;else ue=X;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+y+`
`+v+`
`+ue})}function Wa(h,y,v,A,j,X,ue){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+y+`
`+v+`
`+X+" "+ue})}function Er(h,y,v,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ot(h,v)+(A?" "+A:"")})}function jn(h,y){h.info(function(){return"TIMEOUT: "+y})}bn.prototype.info=function(){};function ot(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var A=v[h];if(!(2>A.length)){var j=A[1];if(Array.isArray(j)&&!(1>j.length)){var X=j[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return Zt(v)}catch{return y}}var gn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nr;function rr(){}x(rr,ni),rr.prototype.g=function(){return new XMLHttpRequest},rr.prototype.i=function(){return{}},nr=new rr;function wn(h,y,v,A){this.j=h,this.i=y,this.l=v,this.R=A||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}var Ll={},Ja={};function br(h,y,v){h.L=1,h.v=Ys(qn(y)),h.m=v,h.P=!0,ri(h,null)}function ri(h,y){h.F=Date.now(),Hs(h),h.A=qn(h.v);var v=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),Fl(v.i,"t",A),h.C=0,v=h.j.J,h.h=new Ot,h.g=th(h.j,v?y:null,!h.m),0<h.O&&(h.M=new et(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,A=h.ca;var j="readystatechange";Array.isArray(j)||(j&&(Gt[0]=j.toString()),j=Gt);for(var X=0;X<j.length;X++){var ue=Ya(v,j[X],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),tr(),Fi(h.i,h.u,h.A,h.l,h.R,h.m)}wn.prototype.ca=function(h){h=h.target;const y=this.M;y&&or(h)==3?y.j():this.Y(h)},wn.prototype.Y=function(h){try{if(h==this.g)e:{const Kt=or(this.g);var y=this.g.Ba();const hi=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||Kc(this.g)))){this.J||Kt!=4||y==7||(y==8||0>=hi?tr(3):tr(2)),Gi(this);var v=this.g.Z();this.X=v;t:if(zc(this)){var A=Kc(this.g);h="";var j=A.length,X=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),Cr(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,h+=this.h.i.decode(A[y],{stream:!(X&&y==j-1)});A.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,Wa(this.i,this.u,this.A,this.l,this.R,Kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Qt=this.g;if((He=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(He)){var Qe=He;break t}}Qe=null}if(v=Qe)Er(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qs(this,v);else{this.o=!1,this.s=3,We(12),on(this),Cr(this);break e}}if(this.P){v=!0;let ln;for(;!this.J&&this.C<ue.length;)if(ln=jc(this,ue),ln==Ja){Kt==4&&(this.s=4,We(14),v=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ll){this.s=4,We(15),Er(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Er(this.i,this.l,ln,null),Qs(this,ln);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||ue.length!=0||this.h.h||(this.s=1,We(16),v=!1),this.o=this.o&&v,!v)Er(this.i,this.l,ue,"[Invalid Chunked Response]"),on(this),Cr(this);else if(0<ue.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),ra(Jt),Jt.M=!0,We(11))}}else Er(this.i,this.l,ue,null),Qs(this,ue);Kt==4&&on(this),this.o&&!this.J&&(Kt==4?Wc(this.j,this):(this.o=!1,Hs(this)))}else Cd(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),on(this),Cr(this)}}}catch{}finally{}};function zc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function jc(h,y){var v=h.C,A=y.indexOf(`
`,v);return A==-1?Ja:(v=Number(y.substring(v,A)),isNaN(v)?Ll:(A+=1,A+v>y.length?Ja:(y=y.slice(A,A+v),h.C=A+v,y)))}wn.prototype.cancel=function(){this.J=!0,on(this)};function Hs(h){h.S=Date.now()+h.I,qc(h,h.I)}function qc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pt(w(h.ba,h),y)}function Gi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}wn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(jn(this.i,this.A),this.L!=2&&(tr(),We(17)),on(this),this.s=2,Cr(this)):qc(this,this.S-h)};function Cr(h){h.j.G==0||h.J||Wc(h.j,h)}function on(h){Gi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ht(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Qs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Ul(v.h,h))){if(!h.K&&Ul(v.h,h)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)ho(v),uo(v);else break e;$l(v),We(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=pt(w(v.Za,v),6e3));if(1>=to(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ci(v,11)}else if((h.K||v.g==h)&&ho(v),!re(y))for(j=v.Da.g.parse(y),y=0;y<j.length;y++){let Qe=j[y];if(v.T=Qe[0],Qe=Qe[1],v.G==2)if(Qe[0]=="c"){v.K=Qe[1],v.ia=Qe[2];const Jt=Qe[3];Jt!=null&&(v.la=Jt,v.j.info("VER="+v.la));const Kt=Qe[4];Kt!=null&&(v.Aa=Kt,v.j.info("SVER="+v.Aa));const hi=Qe[5];hi!=null&&typeof hi=="number"&&0<hi&&(A=1.5*hi,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const ln=h.g;if(ln){const Lr=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var X=A.h;X.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(no(X,X.h),X.h=null))}if(A.D){const Xl=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(A.ya=Xl,lt(A.I,A.D,Xl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ue=h;if(A.qa=eh(A,A.J?A.ia:null,A.W),ue.K){An(A.h,ue);var He=ue,Qt=A.L;Qt&&(He.I=Qt),He.B&&(Gi(He),Hs(He)),A.g=ue}else Xc(A);0<v.i.length&&co(v)}else Qe[0]!="stop"&&Qe[0]!="close"||ci(v,7);else v.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ci(v,7):Ql(v):Qe[0]!="noop"&&v.l&&v.l.ta(Qe),v.v=0)}}tr(4)}catch{}}var Fc=class{constructor(h,y){this.g=h,this.map=y}};function ii(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function to(h){return h.h?1:h.g?h.g.size:0}function Ul(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function no(h,y){h.g?h.g.add(y):h.h=y}function An(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ii.prototype.cancel=function(){if(this.i=Bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Bl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return U(h.i)}function Rd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,A=0;A<v;A++)y.push(h[A]);return y}y=[],v=0;for(A in h)y[v++]=h[A];return y}function ro(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const A in h)y[v++]=A;return y}}}function zl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=ro(h),A=Rd(h),j=A.length,X=0;X<j;X++)y.call(void 0,A[X],v&&v[X],h)}var Ks=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Id(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var A=h[v].indexOf("="),j=null;if(0<=A){var X=h[v].substring(0,A);j=h[v].substring(A+1)}else X=h[v];y(X,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,$s(this,h.j),this.o=h.o,this.g=h.g,Hi(this,h.s),this.l=h.l;var y=h.i,v=new ai;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),si(this,v),this.m=h.m}else h&&(y=String(h).match(Ks))?(this.h=!1,$s(this,y[1]||"",!0),this.o=ir(y[2]||""),this.g=ir(y[3]||"",!0),Hi(this,y[4]),this.l=ir(y[5]||"",!0),si(this,y[6]||"",!0),this.m=ir(y[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Bt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Xs(y,jl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Xs(y,jl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Xs(v,v.charAt(0)=="/"?xd:ql,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Xs(v,io)),h.join("")};function qn(h){return new Bt(h)}function $s(h,y,v){h.j=v?ir(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Hi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function si(h,y,v){y instanceof ai?(h.i=y,Hc(h.i,h.h)):(v||(y=Xs(y,Dd)),h.i=new ai(y,h.h))}function lt(h,y,v){h.i.set(y,v)}function Ys(h){return lt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ir(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Xs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Gc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var jl=/[#\/\?@]/g,ql=/[#\?:]/g,xd=/[#\?]/g,Dd=/[#\?@]/g,io=/#/g;function ai(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function sr(h){h.g||(h.g=new Map,h.h=0,h.i&&Id(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=ai.prototype,s.add=function(h,y){sr(this),this.i=null,h=Vr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function oi(h,y){sr(h),y=Vr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function li(h,y){return sr(h),y=Vr(h,y),h.g.has(y)}s.forEach=function(h,y){sr(this),this.g.forEach(function(v,A){v.forEach(function(j){h.call(y,j,A,this)},this)},this)},s.na=function(){sr(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const j=h[A];for(let X=0;X<j.length;X++)v.push(y[A])}return v},s.V=function(h){sr(this);let y=[];if(typeof h=="string")li(this,h)&&(y=y.concat(this.g.get(Vr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return sr(this),this.i=null,h=Vr(this,h),li(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Fl(h,y,v){oi(h,y),0<v.length&&(h.i=null,h.g.set(Vr(h,y),U(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const X=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var j=X;ue[A]!==""&&(j+="="+encodeURIComponent(String(ue[A]))),h.push(j)}}return this.i=h.join("&")};function Vr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Hc(h,y){y&&!h.j&&(sr(h),h.i=null,h.g.forEach(function(v,A){var j=A.toLowerCase();A!=j&&(oi(this,A),Fl(this,j,v))},h)),h.j=y}function Zs(h,y){const v=new bn;if(d.Image){const A=new Image;A.onload=R(ar,v,"TestLoadImage: loaded",!0,y,A),A.onerror=R(ar,v,"TestLoadImage: error",!1,y,A),A.onabort=R(ar,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=R(ar,v,"TestLoadImage: timeout",!1,y,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function wr(h,y){const v=new bn,A=new AbortController,j=setTimeout(()=>{A.abort(),ar(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout(j),X.ok?ar(v,"TestPingServer: ok",!0,y):ar(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),ar(v,"TestPingServer: error",!1,y)})}function ar(h,y,v,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(v)}catch{}}function Ws(){this.g=new _r}function Nr(h,y,v){const A=v||"";try{zl(h,function(j,X){let ue=j;p(j)&&(ue=Zt(j)),y.push(A+X+"="+encodeURIComponent(ue))})}catch(j){throw y.push(A+"type="+encodeURIComponent("_badmap")),j}}function Qi(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Qi,ni),Qi.prototype.g=function(){return new ui(this.l,this.j)},Qi.prototype.i=function(h){return function(){return h}}({});function ui(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ui,_t),s=ui.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Mr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Or(this):Mr(this),this.readyState==3&&Gl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,Or(this))},s.Qa=function(h){this.g&&(this.response=h,Or(this))},s.ga=function(){this.g&&Or(this)};function Or(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Mr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Mr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hl(h){let y="";return ve(h,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Wt(h,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Hl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):lt(h,y,v))}function tt(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(tt,_t);var so=/^https?$/i,Js=["POST","PUT"];s=tt.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nr.g(),this.v=this.o?Gs(this.o):Gs(nr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(X){Qc(this,X);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)v.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())v.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),j=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Js,y,void 0))||A||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of v)this.g.setRequestHeader(X,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ea(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){Qc(this,X)}};function Qc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ao(h),Pr(h)}function ao(h){h.A||(h.A=!0,Ze(h,"complete"),Ze(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ze(this,"complete"),Ze(this,"abort"),Pr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),tt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?oo(this):this.bb())},s.bb=function(){oo(this)};function oo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)de(h.Ea,0,h);else if(Ze(h,"readystatechange"),or(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=ue===0){var j=String(h.D).match(Ks)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),A=!so.test(j?j.toLowerCase():"")}v=A}if(v)Ze(h,"complete"),Ze(h,"success");else{h.m=6;try{var X=2<or(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",ao(h)}}finally{Pr(h)}}}}function Pr(h,y){if(h.g){ea(h);const v=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ze(h,"ready");try{v.onreadystatechange=A}catch{}}}function ea(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Vt(y)}};function Kc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Cd(h){const y={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(re(h[A]))continue;var v=P(h[A]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=y[j]||[];y[j]=X,X.push(v)}V(y,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function lo(h){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,h),this.cb=ta("retryDelaySeedMs",1e4,h),this.Wa=ta("forwardChannelMaxRetries",2,h),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ii(h&&h.concurrentRequestLimit),this.Da=new Ws,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=lo.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,A){We(0),this.W=h,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=eh(this,null,this.W),co(this)};function Ql(h){if($c(h),h.G==3){var y=h.U++,v=qn(h.I);if(lt(v,"SID",h.K),lt(v,"RID",y),lt(v,"TYPE","terminate"),na(h,v),y=new wn(h,h.j,y),y.L=2,y.v=Ys(qn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=th(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Hs(y)}Jc(h)}function uo(h){h.g&&(ra(h),h.g.cancel(),h.g=null)}function $c(h){uo(h),h.u&&(d.clearTimeout(h.u),h.u=null),ho(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function co(h){if(!eo(h.h)&&!h.s){h.s=!0;var y=h.Ga;ae||N(),ge||(ae(),ge=!0),ze.add(y,h),h.B=0}}function Vd(h,y){return to(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pt(w(h.Ga,h,y),Yl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const j=new wn(this,this.j,h);let X=this.o;if(this.S&&(X?(X=S(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(j.H=X,X=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Yc(this,j,y),v=qn(this.I),lt(v,"RID",h),lt(v,"CVER",22),this.D&&lt(v,"X-HTTP-Session-Id",this.D),na(this,v),X&&(this.O?y="headers="+encodeURIComponent(String(Hl(X)))+"&"+y:this.m&&Wt(v,this.m,X)),no(this.h,j),this.Ua&&lt(v,"TYPE","init"),this.P?(lt(v,"$req",y),lt(v,"SID","null"),j.T=!0,br(j,v,null)):br(j,v,y),this.G=2}}else this.G==3&&(h?Kl(this,h):this.i.length==0||eo(this.h)||Kl(this))};function Kl(h,y){var v;y?v=y.l:v=h.U++;const A=qn(h.I);lt(A,"SID",h.K),lt(A,"RID",v),lt(A,"AID",h.T),na(h,A),h.m&&h.o&&Wt(A,h.m,h.o),v=new wn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Yc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),no(h.h,v),br(v,A,y)}function na(h,y){h.H&&ve(h.H,function(v,A){lt(y,A,v)}),h.l&&zl({},function(v,A){lt(y,A,v)})}function Yc(h,y,v){v=Math.min(h.i.length,v);var A=h.l?w(h.l.Na,h.l,h):null;e:{var j=h.i;let X=-1;for(;;){const ue=["count="+v];X==-1?0<v?(X=j[0].g,ue.push("ofs="+X)):X=0:ue.push("ofs="+X);let He=!0;for(let Qt=0;Qt<v;Qt++){let Qe=j[Qt].g;const Jt=j[Qt].map;if(Qe-=X,0>Qe)X=Math.max(0,j[Qt].g-100),He=!1;else try{Nr(Jt,ue,"req"+Qe+"_")}catch{A&&A(Jt)}}if(He){A=ue.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,A}function Xc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ae||N(),ge||(ae(),ge=!0),ze.add(y,h),h.v=0}}function $l(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pt(w(h.Fa,h),Yl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pt(w(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),uo(this),Zc(this))};function ra(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Zc(h){h.g=new wn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=qn(h.qa);lt(y,"RID","rpc"),lt(y,"SID",h.K),lt(y,"AID",h.T),lt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&lt(y,"TO",h.ja),lt(y,"TYPE","xmlhttp"),na(h,y),h.m&&h.o&&Wt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ys(qn(y)),v.m=null,v.P=!0,ri(v,h)}s.Za=function(){this.C!=null&&(this.C=null,uo(this),$l(this),We(19))};function ho(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Wc(h,y){var v=null;if(h.g==y){ho(h),ra(h),h.g=null;var A=2}else if(Ul(h.h,y))v=y.D,An(h.h,y),A=1;else return;if(h.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var j=h.B;A=er(),Ze(A,new Nt(A,v)),co(h)}else Xc(h);else if(j=y.s,j==3||j==0&&0<y.X||!(A==1&&Vd(h,y)||A==2&&$l(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),j){case 1:ci(h,5);break;case 4:ci(h,10);break;case 3:ci(h,6);break;default:ci(h,2)}}}function Yl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function ci(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),A=h.Xa;const j=!A;A=new Bt(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$s(A,"https"),Ys(A),j?Zs(A.toString(),v):wr(A.toString(),v)}else We(2);h.G=0,h.l&&h.l.sa(y),Jc(h),$c(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function Jc(h){if(h.G=0,h.ka=[],h.l){const y=Bl(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ka,y),L(h.ka,h.i),h.h.i.length=0,U(h.i),h.i.length=0),h.l.ra()}}function eh(h,y,v){var A=v instanceof Bt?qn(v):new Bt(v);if(A.g!="")y&&(A.g=y+"."+A.g),Hi(A,A.s);else{var j=d.location;A=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var X=new Bt(null);A&&$s(X,A),y&&(X.g=y),j&&Hi(X,j),v&&(X.l=v),A=X}return v=h.D,y=h.ya,v&&y&&lt(A,v,y),lt(A,"VER",h.la),na(h,A),A}function th(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new tt(new Qi({eb:v})):new tt(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}s=nh.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function fo(){}fo.prototype.g=function(h,y){return new Sn(h,y)};function Sn(h,y){_t.call(this),this.g=new lo(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!re(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new kr(this)}x(Sn,_t),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Ql(this.g)},Sn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Zt(h),h=v);y.i.push(new Fc(y.Ya++,h)),y.G==3&&co(y)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,Sn.aa.N.call(this)};function rh(h){Dr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}x(rh,Dr);function ih(){ji.call(this),this.status=1}x(ih,ji);function kr(h){this.g=h}x(kr,nh),kr.prototype.ua=function(){Ze(this.g,"a")},kr.prototype.ta=function(h){Ze(this.g,new rh(h))},kr.prototype.sa=function(h){Ze(this.g,new ih)},kr.prototype.ra=function(){Ze(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,Wb=function(){return new fo},Zb=function(){return er()},Xb=zn,Xg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gn.NO_ERROR=0,gn.TIMEOUT=8,gn.HTTP_ERROR=6,pf=gn,Tr.COMPLETE="complete",Yb=Tr,zi.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Hu=zi,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,$b=tt}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});const OT="@firebase/firestore",MT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Op("@firebase/firestore");function $o(){return Is.logLevel}function MD(s){Is.setLogLevel(s)}function se(s,...e){if(Is.logLevel<=Ge.DEBUG){const t=e.map(Up);Is.debug(`Firestore (${Il}): ${s}`,...t)}}function kt(s,...e){if(Is.logLevel<=Ge.ERROR){const t=e.map(Up);Is.error(`Firestore (${Il}): ${s}`,...t)}}function Xr(s,...e){if(Is.logLevel<=Ge.WARN){const t=e.map(Up);Is.warn(`Firestore (${Il}): ${s}`,...t)}}function Up(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(s="Unexpected state"){const e=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: `+s;throw kt(e),new Error(e)}function Ee(s,e){s||ye()}function PD(s,e){s||ye()}function me(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ga{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sn.UNAUTHENTICATED))}shutdown(){}}class LD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UD{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mn,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mn)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new Jb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new sn(e)}}class BD{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zD{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new BD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jD{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,zb(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new PT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new PT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=qD(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ie(s,e){return s<e?-1:s>e?1:0}function Zg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ie(r,a);{const l=Bp(),c=FD(l.encode(kT(s,t)),l.encode(kT(e,t)));return c!==0?c:Ie(r,a)}}t+=r>65535?2:1}return Ie(s.length,e.length)}function kT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function FD(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Ie(s[t],e[t]);return Ie(s.length,e.length)}function sl(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function tw(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,UT=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*UT);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<LT)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new wt(0,0))}static max(){return new Te(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="__name__";class Fr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Fr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const r=Fr.isNumericId(e),a=Fr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Fr.extractNumericId(e).compare(Fr.extractNumericId(t)):Zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class je extends Fr{construct(e,t,r){return new je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new je(t)}static emptyPath(){return new je([])}}const GD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Fr{construct(e,t,r){return new Tt(e,t,r)}static isValidIdentifier(e){return GD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BT}static keyField(){return new Tt([BT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(t)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(je.fromString(e))}static fromName(e){return new fe(je.fromString(e).popFirst(5))}static empty(){return new fe(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=-1;class Vf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Wg(s){return s.fields.find(e=>e.kind===2)}function ba(s){return s.fields.filter(e=>e.kind!==2)}Vf.UNKNOWN_ID=-1;class yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class sc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sc(0,Zn.min())}}function nw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new Zn(a,fe.empty(),e)}function rw(s){return new Zn(s.readTime,s.key,al)}class Zn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zn(Te.min(),fe.empty(),al)}static max(){return new Zn(Te.max(),fe.empty(),al)}}function zp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(s){if(s.code!==Y.FAILED_PRECONDITION||s.message!==iw)throw s;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(a=>a?q.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new q((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new q((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="SimpleDb";class Jf{static open(e,t,r,a){try{return new Jf(t,e.transaction(a,r))}catch(l){throw new Yu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new mn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Yu(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=jp(r.target.error);this.m.reject(new Yu(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(Xn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QD(t)}}class Kr{static delete(e){return se(Xn,"Removing database:",e),Aa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Nb())return!1;if(Kr.v())return!0;const e=Df(),t=Kr.C(e),r=0<t&&t<10,a=aw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Kr.C(Df())===12.2&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(Xn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ie(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Yu(e,c))},a.onupgradeneeded=l=>{se(Xn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{se(Xn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=Jf.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),q.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(se(Xn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class HD{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Aa(this.q.delete())}}class Yu extends ie{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ls(s){return s.name==="IndexedDbTransactionError"}class QD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(Xn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(Xn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Aa(r)}add(e){return se(Xn,"ADD",this.store.name,e,e),Aa(this.store.add(e))}get(e){return Aa(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(Xn,"GET",this.store.name,e,t),t))}delete(e){return se(Xn,"DELETE",this.store.name,e),Aa(this.store.delete(e))}count(){return se(Xn,"COUNT",this.store.name),Aa(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new q((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(e,t){se(Xn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new q((r,a)=>{t.onerror=l=>{const c=jp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new q((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new HD(d),p=t(d.primaryKey,d.value,m);if(p instanceof q){const _=p.catch(T=>(m.done(),q.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Aa(s){return new q((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=jp(r.target.error);t(a)}})}let zT=!1;function jp(s){const e=Kr.C(Df());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zT||(zT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Xu="IndexBackfiller";class KD{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(Xu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(Xu,`Documents written: ${t}`)}catch(t){Ls(t)?se(Xu,"Ignoring IndexedDB error during index backfill: ",t):await ks(t)}await this.te(6e4)})}}class $D{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return q.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return se(Xu,`Processing collection: ${c}`),this.ie(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(a,l)).next(d=>(se(Xu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=rw(l);zp(c,r)>0&&(r=c)}),new Zn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Pn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=-1;function Rc(s){return s==null}function ac(s){return s===0&&1/s==-1/0}function ow(s){return typeof s=="number"&&Number.isInteger(s)&&!ac(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="";function En(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=jT(e)),e=YD(s.get(t),e);return jT(e)}function YD(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Nf:t+="";break;default:t+=l}}return t}function jT(s){return s+Nf+""}function Hr(s){const e=s.length;if(Ee(e>=2),e===2)return Ee(s.charAt(0)===Nf&&s.charAt(1)===""),je.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Nf,l);switch((c<0||c>t)&&ye(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ye()}l=c+2}return new je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="remoteDocuments",Ic="owner",qo="owner",oc="mutationQueues",XD="userId",Ir="mutations",qT="batchId",Da="userMutationsIndex",FT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(s,e){return[s,En(e)]}function lw(s,e,t){return[s,En(e),t]}const ZD={},ol="documentMutations",Of="remoteDocumentsV14",WD=["prefixPath","collectionGroup","readTime","documentId"],vf="documentKeyIndex",JD=["prefixPath","collectionGroup","documentId"],uw="collectionGroupIndex",eC=["collectionGroup","readTime","prefixPath","documentId"],lc="remoteDocumentGlobal",Jg="remoteDocumentGlobalKey",ll="targets",cw="queryTargetsIndex",tC=["canonicalId","targetId"],ul="targetDocuments",nC=["targetId","path"],qp="documentTargetsIndex",rC=["path","targetId"],Mf="targetGlobalKey",Na="targetGlobal",uc="collectionParents",iC=["collectionId","parent"],cl="clientMetadata",sC="clientId",ed="bundles",aC="bundleId",td="namedQueries",oC="name",Fp="indexConfiguration",lC="indexId",ep="collectionGroupIndex",uC="collectionGroup",Pf="indexState",cC=["indexId","uid"],hw="sequenceNumberIndex",hC=["uid","sequenceNumber"],kf="indexEntries",fC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fw="documentKeyIndex",dC=["indexId","uid","orderedDocumentKey"],nd="documentOverlays",mC=["userId","collectionPath","documentId"],tp="collectionPathOverlayIndex",gC=["userId","collectionPath","largestBatchId"],dw="collectionGroupOverlayIndex",pC=["userId","collectionGroup","largestBatchId"],Gp="globals",yC="name",mw=[oc,Ir,ol,wa,ll,Ic,Na,ul,cl,lc,uc,ed,td],_C=[...mw,nd],gw=[oc,Ir,ol,Of,ll,Ic,Na,ul,cl,lc,uc,ed,td,nd],pw=gw,Hp=[...pw,Fp,Pf,kf],vC=Hp,EC=[...Hp,Gp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends sw{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Xt(s,e){const t=me(s);return Kr.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Us(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function yw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||fn.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??fn.RED,this.left=a??fn.EMPTY,this.right=l??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new fn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,a,l){return this}insert(e,t,r){return new fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HT(this.data.getIterator())}getIteratorFrom(e){return new HT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class HT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new kn([])}unionWith(e){let t=new at(Tt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new _w("Invalid base64 string: "+l):l}}(e);return new Ct(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const bC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(s){if(Ee(!!s),typeof s=="string"){let e=0;const t=bC.exec(s);if(Ee(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(s.seconds),nanos:Et(s.nanos)}}function Et(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Vi(s){return typeof s=="string"?Ct.fromBase64String(s):Ct.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="server_timestamp",Ew="__type__",Tw="__previous_value__",bw="__local_write_time__";function rd(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ew])===null||t===void 0?void 0:t.stringValue)===vw}function id(s){const e=s.mapValue.fields[Tw];return rd(e)?id(e):e}function cc(s){const e=Ci(s.mapValue.fields[bw].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t,r,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const rp="(default)";class xs{constructor(e,t){this.projectId=e,this.database=t||rp}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database===rp}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="__type__",ww="__max__",vs={mapValue:{fields:{__type__:{stringValue:ww}}}},Kp="__vector__",hl="value",Ef={nullValue:"NULL_VALUE"};function Ds(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?rd(s)?4:Aw(s)?9007199254740991:sd(s)?10:11:ye()}function Zr(s,e){if(s===e)return!0;const t=Ds(s);if(t!==Ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return cc(s).isEqual(cc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ci(a.timestampValue),d=Ci(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return Vi(a.bytesValue).isEqual(Vi(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),d=Et(l.doubleValue);return c===d?ac(c)===ac(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return sl(s.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(GT(c)!==GT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Zr(c[m],d[m])))return!1;return!0}(s,e);default:return ye()}}function hc(s,e){return(s.values||[]).find(t=>Zr(t,e))!==void 0}function Cs(s,e){if(s===e)return 0;const t=Ds(s),r=Ds(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Et(l.integerValue||l.doubleValue),m=Et(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,e);case 3:return QT(s.timestampValue,e.timestampValue);case 4:return QT(cc(s),cc(e));case 5:return Zg(s.stringValue,e.stringValue);case 6:return function(l,c){const d=Vi(l),m=Vi(c);return d.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Ie(d[p],m[p]);if(_!==0)return _}return Ie(d.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ie(Et(l.latitude),Et(c.latitude));return d!==0?d:Ie(Et(l.longitude),Et(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return KT(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},w=c.fields||{},R=(d=T[hl])===null||d===void 0?void 0:d.arrayValue,x=(m=w[hl])===null||m===void 0?void 0:m.arrayValue,U=Ie(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:KT(R,x)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===vs.mapValue&&c===vs.mapValue)return 0;if(l===vs.mapValue)return 1;if(c===vs.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const w=Zg(m[T],_[T]);if(w!==0)return w;const R=Cs(d[m[T]],p[_[T]]);if(R!==0)return R}return Ie(m.length,_.length)}(s.mapValue,e.mapValue);default:throw ye()}}function QT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=Ci(s),r=Ci(e),a=Ie(t.seconds,r.seconds);return a!==0?a:Ie(t.nanos,r.nanos)}function KT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Cs(t[a],r[a]);if(l)return l}return Ie(t.length,r.length)}function fl(s){return ip(s)}function ip(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=Ci(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Vi(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return fe.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=ip(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${ip(t.fields[c])}`;return a+"}"}(s.mapValue):ye()}function Tf(s){switch(Ds(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=id(s);return e?16+Tf(e):16;case 5:return 2*s.stringValue.length;case 6:return Vi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Tf(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return Us(r.fields,(l,c)=>{a+=l.length+Tf(c)}),a}(s.mapValue);default:throw ye()}}function Ma(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function sp(s){return!!s&&"integerValue"in s}function fc(s){return!!s&&"arrayValue"in s}function $T(s){return!!s&&"nullValue"in s}function YT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bf(s){return!!s&&"mapValue"in s}function sd(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Qp])===null||t===void 0?void 0:t.stringValue)===Kp}function Zu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Us(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Aw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===ww}const Sw={mapValue:{fields:{[Qp]:{stringValue:Kp},[hl]:{arrayValue:{}}}}};function AC(s){return"nullValue"in s?Ef:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Ma(xs.empty(),fe.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?sd(s)?Sw:{mapValue:{}}:ye()}function SC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Ma(xs.empty(),fe.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Sw:"mapValue"in s?sd(s)?{mapValue:{}}:vs:ye()}function XT(s,e){const t=Cs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function ZT(s,e){const t=Cs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=Tt.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Zu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];bf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Us(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new dn(Zu(this.value))}}function Rw(s){const e=[];return Us(s.fields,(t,r)=>{const a=new Tt([t]);if(bf(r)){const l=Rw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Te.min(),Te.min(),Te.min(),dn.empty(),0)}static newFoundDocument(e,t,r,a){return new yt(e,1,t,Te.min(),r,a,0)}static newNoDocument(e,t){return new yt(e,2,t,Te.min(),Te.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Te.min(),Te.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.position=e,this.inclusive=t}}function WT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=fe.comparator(fe.fromName(c.referenceValue),t.key):r=Cs(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function JT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Zr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function RC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{}class qe extends Iw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new IC(e,t,r):t==="array-contains"?new CC(e,r):t==="in"?new Ow(e,r):t==="not-in"?new VC(e,r):t==="array-contains-any"?new NC(e,r):new qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xC(e,r):new DC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cs(t,this.value)):t!==null&&Ds(this.value)===Ds(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class st extends Iw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new st(e,t)}matches(e){return dl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function dl(s){return s.op==="and"}function ap(s){return s.op==="or"}function $p(s){return xw(s)&&dl(s)}function xw(s){for(const e of s.filters)if(e instanceof st)return!1;return!0}function op(s){if(s instanceof qe)return s.field.canonicalString()+s.op.toString()+fl(s.value);if($p(s))return s.filters.map(e=>op(e)).join(",");{const e=s.filters.map(t=>op(t)).join(",");return`${s.op}(${e})`}}function Dw(s,e){return s instanceof qe?function(r,a){return a instanceof qe&&r.op===a.op&&r.field.isEqual(a.field)&&Zr(r.value,a.value)}(s,e):s instanceof st?function(r,a){return a instanceof st&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Dw(c,a.filters[d]),!0):!1}(s,e):void ye()}function Cw(s,e){const t=s.filters.concat(e);return st.create(t,s.op)}function Vw(s){return s instanceof qe?function(t){return`${t.field.canonicalString()} ${t.op} ${fl(t.value)}`}(s):s instanceof st?function(t){return t.op.toString()+" {"+t.getFilters().map(Vw).join(" ,")+"}"}(s):"Filter"}class IC extends qe{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class xC extends qe{constructor(e,t){super(e,"in",t),this.keys=Nw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DC extends qe{constructor(e,t){super(e,"not-in",t),this.keys=Nw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nw(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}class CC extends qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fc(t)&&hc(t.arrayValue,this.value)}}class Ow extends qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hc(this.value.arrayValue,t)}}class VC extends qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!hc(this.value.arrayValue,t)}}class NC extends qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function lp(s,e=null,t=[],r=[],a=null,l=null,c=null){return new OC(s,e,t,r,a,l,c)}function Pa(s){const e=me(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>op(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fl(r)).join(",")),e.le=t}return e.le}function xc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!RC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Dw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!JT(s.startAt,e.startAt)&&JT(s.endAt,e.endAt)}function Lf(s){return fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Uf(s,e){return s.filters.filter(t=>t instanceof qe&&t.field.isEqual(e))}function e0(s,e,t){let r=Ef,a=!0;for(const l of Uf(s,e)){let c=Ef,d=!0;switch(l.op){case"<":case"<=":c=AC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Ef}XT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];XT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function t0(s,e,t){let r=vs,a=!0;for(const l of Uf(s,e)){let c=vs,d=!0;switch(l.op){case">=":case">":c=SC(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=vs}ZT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];ZT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Mw(s,e,t,r,a,l,c,d){return new Mi(s,e,t,r,a,l,c,d)}function xl(s){return new Mi(s)}function n0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Yp(s){return s.collectionGroup!==null}function Jo(s){const e=me(s);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new at(Tt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new dc(l,r))}),t.has(Tt.keyField().canonicalString())||e.he.push(new dc(Tt.keyField(),r))}return e.he}function Dn(s){const e=me(s);return e.Pe||(e.Pe=MC(e,Jo(s))),e.Pe}function MC(s,e){if(s.limitType==="F")return lp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new dc(a.field,l)});const t=s.endAt?new Vs(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Vs(s.startAt.position,s.startAt.inclusive):null;return lp(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function up(s,e){const t=s.filters.concat([e]);return new Mi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Bf(s,e,t){return new Mi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Dc(s,e){return xc(Dn(s),Dn(e))&&s.limitType===e.limitType}function Pw(s){return`${Pa(Dn(s))}|lt:${s.limitType}`}function Yo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>Vw(a)).join(", ")}]`),Rc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>fl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>fl(a)).join(",")),`Target(${r})`}(Dn(s))}; limitType=${s.limitType})`}function Cc(s,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,a){for(const l of Jo(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=WT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Jo(r),a)||r.endAt&&!function(c,d,m){const p=WT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Jo(r),a))}(s,e)}function kw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Lw(s){return(e,t)=>{let r=!1;for(const a of Jo(s)){const l=PC(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function PC(s,e,t){const r=s.field.isKeyField()?fe.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Cs(m,p):ye()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return yw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new gt(fe.comparator);function Ln(){return kC}const Uw=new gt(fe.comparator);function Qu(...s){let e=Uw;for(const t of s)e=e.insert(t.key,t);return e}function Bw(s){let e=Uw;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qr(){return Wu()}function zw(){return Wu()}function Wu(){return new Pi(s=>s.toString(),(s,e)=>s.isEqual(e))}const LC=new gt(fe.comparator),UC=new at(fe.comparator);function Ne(...s){let e=UC;for(const t of s)e=e.add(t);return e}const BC=new at(Ie);function Xp(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function jw(s){return{integerValue:""+s}}function qw(s,e){return ow(e)?jw(e):Zp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function zC(s,e,t){return s instanceof ml?function(a,l){const c={fields:{[Ew]:{stringValue:vw},[bw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&rd(l)&&(l=id(l)),l&&(c.fields[Tw]=l),{mapValue:c}}(t,e):s instanceof ka?Gw(s,e):s instanceof La?Hw(s,e):function(a,l){const c=Fw(a,l),d=r0(c)+r0(a.Ie);return sp(c)&&sp(a.Ie)?jw(d):Zp(a.serializer,d)}(s,e)}function jC(s,e,t){return s instanceof ka?Gw(s,e):s instanceof La?Hw(s,e):t}function Fw(s,e){return s instanceof gl?function(r){return sp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class ml extends ad{}class ka extends ad{constructor(e){super(),this.elements=e}}function Gw(s,e){const t=Qw(e);for(const r of s.elements)t.some(a=>Zr(a,r))||t.push(r);return{arrayValue:{values:t}}}class La extends ad{constructor(e){super(),this.elements=e}}function Hw(s,e){let t=Qw(e);for(const r of s.elements)t=t.filter(a=>!Zr(a,r));return{arrayValue:{values:t}}}class gl extends ad{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function r0(s){return Et(s.integerValue||s.doubleValue)}function Qw(s){return fc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.field=e,this.transform=t}}function qC(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof ka&&a instanceof ka||r instanceof La&&a instanceof La?sl(r.elements,a.elements,Zr):r instanceof gl&&a instanceof gl?Zr(r.Ie,a.Ie):r instanceof ml&&a instanceof ml}(s.transform,e.transform)}class FC{constructor(e,t){this.version=e,this.transformResults=t}}class bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class od{}function Kw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cl(s.key,bt.none()):new Dl(s.key,s.data,bt.none());{const t=s.data,r=dn.empty();let a=new at(Tt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ki(s.key,r,new kn(a.toArray()),bt.none())}}function GC(s,e,t){s instanceof Dl?function(a,l,c){const d=a.value.clone(),m=s0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof ki?function(a,l,c){if(!wf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=s0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll($w(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Ju(s,e,t,r){return s instanceof Dl?function(l,c,d,m){if(!wf(l.precondition,c))return d;const p=l.value.clone(),_=a0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,e,t,r):s instanceof ki?function(l,c,d,m){if(!wf(l.precondition,c))return d;const p=a0(l.fieldTransforms,m,c),_=c.data;return _.setAll($w(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(l,c,d){return wf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function HC(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=Fw(r.transform,a||null);l!=null&&(t===null&&(t=dn.empty()),t.set(r.field,l))}return t||null}function i0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&sl(r,a,(l,c)=>qC(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Dl extends od{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ki extends od{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $w(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function s0(s,e,t){const r=new Map;Ee(s.length===t.length);for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,jC(c,d,t[a]))}return r}function a0(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,zC(l,c,e))}return r}class Cl extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wp extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&GC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zw();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Kw(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(t,r)=>i0(t,r))&&sl(this.baseMutations,e.baseMutations,(t,r)=>i0(t,r))}}class ey{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ee(e.mutations.length===r.length);let a=function(){return LC}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new ey(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,$e;function Yw(s){switch(s){case Y.OK:return ye();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return ye()}}function Xw(s){if(s===void 0)return kt("GRPC error has no .code"),Y.UNKNOWN;switch(s){case qt.OK:return Y.OK;case qt.CANCELLED:return Y.CANCELLED;case qt.UNKNOWN:return Y.UNKNOWN;case qt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case qt.INTERNAL:return Y.INTERNAL;case qt.UNAVAILABLE:return Y.UNAVAILABLE;case qt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case qt.NOT_FOUND:return Y.NOT_FOUND;case qt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case qt.ABORTED:return Y.ABORTED;case qt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case qt.DATA_LOSS:return Y.DATA_LOSS;default:return ye()}}($e=qt||(qt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new bs([4294967295,4294967295],0);function o0(s){const e=Bp().encode(s),t=new Kb;return t.update(e),new Uint8Array(t.digest())}function l0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new bs([t,r],0),new bs([a,l],0)]}class ny{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ku(`Invalid padding: ${t}`);if(r<0)throw new Ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=bs.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(bs.fromNumber(r)));return a.compare(KC)===1&&(a=new bs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=o0(e),[r,a]=l0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ny(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=o0(e),[r,a]=l0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nc(Te.min(),a,new gt(Ie),Ln(),Ne())}}class Oc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Oc(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class Zw{constructor(e,t){this.targetId=e,this.ge=t}}class Ww{constructor(e,t,r=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class u0{constructor(){this.pe=0,this.ye=c0(),this.we=Ct.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ne(),t=Ne(),r=Ne();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ye()}}),new Oc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=c0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ee(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class $C{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ln(),this.$e=uf(),this.Ue=uf(),this.Ke=new gt(Ie)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(Lf(l))if(r===0){const c=new fe(l.path);this.ze(t,c,yt.newNoDocument(c,Te.min()))}else Ee(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Vi(r).toUint8Array()}catch(m){if(m instanceof _w)return Xr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new ny(c,a,l)}catch(m){return Xr(m instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Lf(d.target)){const m=new fe(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,yt.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=Ne();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new Nc(e,t,this.Ke,this.Qe,r);return this.Qe=Ln(),this.$e=uf(),this.Ue=uf(),this.Ke=new gt(Ie),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new u0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new at(Ie),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new at(Ie),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new u0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function uf(){return new gt(fe.comparator)}function c0(){return new gt(fe.comparator)}const YC={asc:"ASCENDING",desc:"DESCENDING"},XC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZC={and:"AND",or:"OR"};class WC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cp(s,e){return s.useProto3Json||Rc(e)?e:{value:e}}function pl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function JC(s,e){return pl(s,e.toTimestamp())}function Lt(s){return Ee(!!s),Te.fromTimestamp(function(t){const r=Ci(t);return new wt(r.seconds,r.nanos)}(s))}function ry(s,e){return hp(s,e).canonicalString()}function hp(s,e){const t=function(a){return new je(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function eA(s){const e=je.fromString(s);return Ee(cA(e)),e}function mc(s,e){return ry(s.databaseId,e.path)}function $r(s,e){const t=eA(e);if(t.get(1)!==s.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new fe(rA(t))}function tA(s,e){return ry(s.databaseId,e)}function nA(s){const e=eA(s);return e.length===4?je.emptyPath():rA(e)}function fp(s){return new je(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function rA(s){return Ee(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function h0(s,e,t){return{name:mc(s,e),fields:t.value.mapValue.fields}}function iA(s,e,t){const r=$r(s,e.name),a=Lt(e.updateTime),l=e.createTime?Lt(e.createTime):Te.min(),c=new dn({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function eV(s,e){return"found"in e?function(r,a){Ee(!!a.found),a.found.name,a.found.updateTime;const l=$r(r,a.found.name),c=Lt(a.found.updateTime),d=a.found.createTime?Lt(a.found.createTime):Te.min(),m=new dn({mapValue:{fields:a.found.fields}});return yt.newFoundDocument(l,c,d,m)}(s,e):"missing"in e?function(r,a){Ee(!!a.missing),Ee(!!a.readTime);const l=$r(r,a.missing),c=Lt(a.readTime);return yt.newNoDocument(l,c)}(s,e):ye()}function tV(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(Ee(_===void 0||typeof _=="string"),Ct.fromBase64String(_||"")):(Ee(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Ct.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?Y.UNKNOWN:Xw(p.code);return new ie(_,p.message||"")}(c);t=new Ww(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=$r(s,r.document.name),l=Lt(r.document.updateTime),c=r.document.createTime?Lt(r.document.createTime):Te.min(),d=new dn({mapValue:{fields:r.document.fields}}),m=yt.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Af(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=$r(s,r.document),l=r.readTime?Lt(r.readTime):Te.min(),c=yt.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=$r(s,r.document),l=r.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new QC(a,l),d=r.targetId;t=new Zw(d,c)}}return t}function gc(s,e){let t;if(e instanceof Dl)t={update:h0(s,e.key,e.value)};else if(e instanceof Cl)t={delete:mc(s,e.key)};else if(e instanceof ki)t={update:h0(s,e.key,e.data),updateMask:oV(e.fieldMask)};else{if(!(e instanceof Wp))return ye();t={verify:mc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof ml)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ka)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof La)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gl)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:JC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye()}(s,e.precondition)),t}function dp(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?bt.updateTime(Lt(l.updateTime)):l.exists!==void 0?bt.exists(l.exists):bt.none()}(e.currentDocument):bt.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)Ee(d.setToServerValue==="REQUEST_TIME"),m=new ml;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new ka(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new La(_)}else"increment"in d?m=new gl(c,d.increment):ye();const p=Tt.fromServerFormat(d.fieldPath);return new Vc(p,m)}(s,a)):[];if(e.update){e.update.name;const a=$r(s,e.update.name),l=new dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new kn(p.map(_=>Tt.fromServerFormat(_)))}(e.updateMask);return new ki(a,l,c,t,r)}return new Dl(a,l,t,r)}if(e.delete){const a=$r(s,e.delete);return new Cl(a,t)}if(e.verify){const a=$r(s,e.verify);return new Wp(a,t)}return ye()}function nV(s,e){return s&&s.length>0?(Ee(e!==void 0),s.map(t=>function(a,l){let c=a.updateTime?Lt(a.updateTime):Lt(l);return c.isEqual(Te.min())&&(c=Lt(l)),new FC(c,a.transformResults||[])}(t,e))):[]}function sA(s,e){return{documents:[tA(s,e.path)]}}function aA(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tA(s,a);const l=function(p){if(p.length!==0)return uA(st.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(w){return{field:Xo(w.field),direction:iV(w.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=cp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function oA(s){let e=nA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ee(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const w=lA(T);return w instanceof st&&$p(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(w=>function(x){return new dc(Zo(x.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(T){let w;return w=typeof T=="object"?T.value:T,Rc(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(T){const w=!!T.before,R=T.values||[];return new Vs(R,w)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const w=!T.before,R=T.values||[];return new Vs(R,w)}(t.endAt)),Mw(e,a,c,l,d,"F",m,p)}function rV(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lA(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Zo(t.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Zo(t.unaryFilter.field);return qe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Zo(t.unaryFilter.field);return qe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Zo(t.unaryFilter.field);return qe.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(s):s.fieldFilter!==void 0?function(t){return qe.create(Zo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return st.create(t.compositeFilter.filters.map(r=>lA(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(s):ye()}function iV(s){return YC[s]}function sV(s){return XC[s]}function aV(s){return ZC[s]}function Xo(s){return{fieldPath:s.canonicalString()}}function Zo(s){return Tt.fromServerFormat(s.fieldPath)}function uA(s){return s instanceof qe?function(t){if(t.op==="=="){if(YT(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if($T(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YT(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if($T(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:sV(t.op),value:t.value}}}(s):s instanceof st?function(t){const r=t.getFilters().map(a=>uA(a));return r.length===1?r[0]:{compositeFilter:{op:aV(t.op),filters:r}}}(s):ye()}function oV(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t,r,a,l=Te.min(),c=Te.min(),d=Ct.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.Tt=e}}function lV(s,e){let t;if(e.document)t=iA(s.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),a=Ba(e.noDocument.readTime);t=yt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=fe.fromSegments(e.unknownDocument.path),a=Ba(e.unknownDocument.version);t=yt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new wt(a[0],a[1]);return Te.fromTimestamp(l)}(e.readTime)),t}function f0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:mc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:pl(l,c.version.toTimestamp()),createTime:pl(l,c.createTime.toTimestamp())}}(s.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ua(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:t.path.toArray(),version:Ua(e.version)}}return r}function zf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Ua(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ba(s){const e=new wt(s.seconds,s.nanoseconds);return Te.fromTimestamp(e)}function Sa(s,e){const t=(e.baseMutations||[]).map(l=>dp(s.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>dp(s.Tt,l)),a=wt.fromMillis(e.localWriteTimeMs);return new Jp(e.batchId,a,t,r)}function $u(s){const e=Ba(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Ba(s.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return Ee(l.documents.length===1),Dn(xl(nA(l.documents[0])))}(s.query):function(l){return Dn(oA(l))}(s.query),new Si(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Ct.fromBase64String(s.resumeToken))}function fA(s,e){const t=Ua(e.snapshotVersion),r=Ua(e.lastLimboFreeSnapshotVersion);let a;a=Lf(e.target)?sA(s.Tt,e.target):aA(s.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function iy(s){const e=oA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Bf(e,e.limit,"L"):e}function Pg(s,e){return new ty(e.largestBatchId,dp(s.Tt,e.overlayMutation))}function d0(s,e){const t=e.path.lastSegment();return[s,En(e.path.popLast()),t]}function m0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Ua(r.readTime),documentKey:En(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{getBundleMetadata(e,t){return g0(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ba(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return g0(e).put(function(a){return{bundleId:a.id,createTime:Ua(Lt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return p0(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:iy(l.bundledQuery),readTime:Ba(l.readTime)}}(r)})}saveNamedQuery(e,t){return p0(e).put(function(a){return{name:a.name,readTime:Ua(Lt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function g0(s){return Xt(s,ed)}function p0(s){return Xt(s,td)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new ld(e,r)}getOverlay(e,t){return zu(e).get(d0(this.userId,t)).next(r=>r?Pg(this.serializer,r):null)}getOverlays(e,t){const r=Qr();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new ty(t,c);a.push(this.Et(e,d))}),q.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(En(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(zu(e).J(tp,d))}),q.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Qr(),l=En(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return zu(e).G(tp,c).next(d=>{for(const m of d){const p=Pg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Qr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zu(e).Z({index:dw,range:d},(m,p,_)=>{const T=Pg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return zu(e).put(function(a,l,c){const[d,m,p]=d0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:gc(a.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function zu(s){return Xt(s,nd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{dt(e){return Xt(e,Gp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Ct.fromUint8Array(r):Ct.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ac(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=Ci(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Vi(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?Aw(e)?this.ft(t,Number.MAX_SAFE_INTEGER):sd(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ye()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const c=hl,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(Et(d)),this.wt(c,t),this.Rt(l[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),fe.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Ra.xt=new Ra;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=255;function hV(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function y0(s){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=hV(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class fV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=y0(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=y0(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Go),this.jt(255)}Ht(){this.Jt(Go),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Go?(this.jt(Go),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Go?(this.Jt(Go),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class dV{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class mV{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class ju{constructor(){this.Zt=new fV,this.Xt=new dV(this.Zt),this.en=new mV(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ia(this.indexId,this.documentKey,this.arrayValue,r)}}function ms(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=_0(s.arrayValue,e.arrayValue),t!==0?t:(t=_0(s.directionalValue,e.directionalValue),t!==0?t:fe.comparator(s.documentKey,e.documentKey)))}function _0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.rn=new at((t,r)=>Tt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Ee(e.collectionGroup===this.collectionId),this.an)return!1;const t=Wg(e);if(t!==void 0&&!this.cn(t))return!1;const r=ba(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new at(Tt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new yf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new yf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new yf(r.field,r.dir==="asc"?0:1)));return new Vf(Vf.UNKNOWN_ID,this.collectionId,t,sc.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(s){var e,t;if(Ee(s instanceof qe||s instanceof st),s instanceof qe){if(s instanceof Ow){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>qe.create(s.field,"==",l)))||[];return st.create(a,"or")}return s}const r=s.filters.map(a=>dA(a));return st.create(r,s.op)}function gV(s){if(s.getFilters().length===0)return[];const e=pp(dA(s));return Ee(mA(e)),mp(e)||gp(e)?[e]:e.getFilters()}function mp(s){return s instanceof qe}function gp(s){return s instanceof st&&$p(s)}function mA(s){return mp(s)||gp(s)||function(t){if(t instanceof st&&ap(t)){for(const r of t.getFilters())if(!mp(r)&&!gp(r))return!1;return!0}return!1}(s)}function pp(s){if(Ee(s instanceof qe||s instanceof st),s instanceof qe)return s;if(s.filters.length===1)return pp(s.filters[0]);const e=s.filters.map(r=>pp(r));let t=st.create(e,s.op);return t=jf(t),mA(t)?t:(Ee(t instanceof st),Ee(dl(t)),Ee(t.filters.length>1),t.filters.reduce((r,a)=>sy(r,a)))}function sy(s,e){let t;return Ee(s instanceof qe||s instanceof st),Ee(e instanceof qe||e instanceof st),t=s instanceof qe?e instanceof qe?function(a,l){return st.create([a,l],"and")}(s,e):E0(s,e):e instanceof qe?E0(e,s):function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0),dl(a)&&dl(l))return Cw(a,l.getFilters());const c=ap(a)?a:l,d=ap(a)?l:a,m=c.filters.map(p=>sy(p,d));return st.create(m,"or")}(s,e),jf(t)}function E0(s,e){if(dl(e))return Cw(e,s.getFilters());{const t=e.filters.map(r=>sy(s,r));return st.create(t,"or")}}function jf(s){if(Ee(s instanceof qe||s instanceof st),s instanceof qe)return s;const e=s.getFilters();if(e.length===1)return jf(e[0]);if(xw(s))return s;const t=e.map(a=>jf(a)),r=[];return t.forEach(a=>{a instanceof qe?r.push(a):a instanceof st&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:st.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.Tn=new ay}addToCollectionParentIndex(e,t){return this.Tn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Zn.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class ay{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new at(je.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new at(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="IndexedDbIndexManager",cf=new Uint8Array(0);class yV{constructor(e,t){this.databaseId=t,this.In=new ay,this.En=new Pi(r=>Pa(r),(r,a)=>xc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:En(a)};return b0(e).put(l)}return q.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[tw(t),""],!1,!0);return b0(e).G(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Hr(c.parent))}return r})}addFieldIndex(e,t){const r=qu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Qo(e);return l.next(d=>{c.put(m0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=qu(e),a=Qo(e),l=Ho(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=qu(e),r=Ho(e),a=Qo(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return q.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new v0(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Ho(e);let a=!0;const l=new Map;return q.forEach(this.dn(t),c=>this.An(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=Ne();const d=[];return q.forEach(l,(m,p)=>{se(T0,`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(ce=>`${ce.fieldPath}:${ce.kind}`).join(",")}`}(m)} to execute ${Pa(t)}`);const _=function(W,ce){const le=Wg(ce);if(le===void 0)return null;for(const ve of Uf(W,le.fieldPath))switch(ve.op){case"array-contains-any":return ve.value.arrayValue.values||[];case"array-contains":return[ve.value]}return null}(p,m),T=function(W,ce){const le=new Map;for(const ve of ba(ce))for(const V of Uf(W,ve.fieldPath))switch(V.op){case"==":case"in":le.set(ve.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return le.set(ve.fieldPath.canonicalString(),V.value),Array.from(le.values())}return null}(p,m),w=function(W,ce){const le=[];let ve=!0;for(const V of ba(ce)){const S=V.kind===0?e0(W,V.fieldPath,W.startAt):t0(W,V.fieldPath,W.startAt);le.push(S.value),ve&&(ve=S.inclusive)}return new Vs(le,ve)}(p,m),R=function(W,ce){const le=[];let ve=!0;for(const V of ba(ce)){const S=V.kind===0?t0(W,V.fieldPath,W.endAt):e0(W,V.fieldPath,W.endAt);le.push(S.value),ve&&(ve=S.inclusive)}return new Vs(le,ve)}(p,m),x=this.Rn(m,p,w),U=this.Rn(m,p,R),L=this.Vn(m,p,T),Q=this.mn(m.indexId,_,x,w.inclusive,U,R.inclusive,L);return q.forEach(Q,re=>r.H(re,t.limit).next(W=>{W.forEach(ce=>{const le=fe.fromSegments(ce.documentKey);c.has(le)||(c=c.add(le),d.push(le))})}))}).next(()=>d)}return q.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=gV(st.create(e.filters,"and")).map(r=>lp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const w=t?this.fn(t[T/p]):cf,R=this.gn(e,w,r[T%p],a),x=this.pn(e,w,l[T%p],c),U=d.map(L=>this.gn(e,w,L,!0));_.push(...this.createRange(R,x,U))}return _}gn(e,t,r,a){const l=new Ia(e,fe.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new Ia(e,fe.empty(),t,r);return a?l.nn():l}An(e,t){const r=new v0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.dn(t);return q.forEach(a,l=>this.An(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new at(Tt.comparator),_=!1;for(const T of m.filters)for(const w of T.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:p=p.add(w.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new ju;for(const a of ba(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);Ra.xt.At(l,c)}return r.Yt()}fn(e){const t=new ju;return Ra.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new ju;return Ra.xt.At(Ma(this.databaseId,t),r.tn(function(l){const c=ba(l);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new ju);let l=0;for(const c of ba(e)){const d=r[l++];for(const m of a)if(this.Sn(t,c.fieldPath)&&fc(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);Ra.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new ju;m.seed(d.Yt()),Ra.xt.At(c,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=qu(e),a=Qo(e);return(t?r.G(ep,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const c=[];return q.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const w=T?new sc(T.sequenceNumber,new Zn(Ba(T.readTime),new fe(Hr(T.documentKey)),T.largestBatchId)):sc.empty(),R=_.fields.map(([x,U])=>new yf(Tt.fromServerFormat(x),U));return new Vf(_.indexId,_.collectionGroup,R,w)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=qu(e),l=Qo(e);return this.vn(e).next(c=>a.G(ep,IDBKeyRange.bound(t,t)).next(d=>q.forEach(d,m=>l.put(m0(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?q.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),q.forEach(d,m=>this.Cn(e,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?q.resolve():this.Mn(e,l,m,p,_)}))))})}xn(e,t,r,a){return Ho(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Ho(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Ho(e);let l=new at(ms);return a.Z({index:fw,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{l=l.add(new Ia(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new at(ms);const a=this.yn(t,e);if(a==null)return r;const l=Wg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(fc(c))for(const d of c.arrayValue.values||[])r=r.add(new Ia(t.indexId,e.key,this.fn(d),a))}else r=r.add(new Ia(t.indexId,e.key,cf,a));return r}Mn(e,t,r,a,l){se(T0,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,_,T,w){const R=m.getIterator(),x=p.getIterator();let U=Fo(R),L=Fo(x);for(;U||L;){let Q=!1,re=!1;if(U&&L){const W=_(U,L);W<0?re=!0:W>0&&(Q=!0)}else U!=null?re=!0:Q=!0;Q?(T(L),L=Fo(x)):re?(w(U),U=Fo(R)):(U=Fo(R),L=Fo(x))}}(a,l,ms,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),q.waitFor(c)}vn(e){let t=1;return Qo(e).Z({index:hw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>ms(c,d)).filter((c,d,m)=>!d||ms(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=ms(c,e),m=ms(c,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,cf,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,cf,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return ms(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(w0)}getMinOffset(e,t){return q.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ye())).next(w0)}}function b0(s){return Xt(s,uc)}function Ho(s){return Xt(s,kf)}function qu(s){return Xt(s,Fp)}function Qo(s){return Xt(s,Pf)}function w0(s){Ee(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;zp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Zn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gA=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(s,e,t){const r=s.store(Ir),a=s.store(ol),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:c},(_,T,w)=>(d++,w.delete()));l.push(m.next(()=>{Ee(d===1)}));const p=[];for(const _ of t.mutations){const T=lw(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return q.waitFor(l).next(()=>p)}function qf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ye();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(gA,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);class ud{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){Ee(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new ud(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).Z({index:Da,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Wo(e),c=gs(e);return c.add({}).next(d=>{Ee(typeof d=="number");const m=new Jp(d,t,r,a),p=function(R,x,U){const L=U.baseMutations.map(re=>gc(R.Tt,re)),Q=U.mutations.map(re=>gc(R.Tt,re));return{userId:x,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:L,mutations:Q}}(this.serializer,this.userId,m),_=[];let T=new at((w,R)=>Ie(w.canonicalString(),R.canonicalString()));for(const w of a){const R=lw(this.userId,w.key.path,d);T=T.add(w.key.path.popLast()),_.push(c.put(p)),_.push(l.put(R,ZD))}return T.forEach(w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),q.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return gs(e).get(t).next(r=>r?(Ee(r.userId===this.userId),Sa(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?q.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return gs(e).Z({index:Da,range:a},(c,d,m)=>{d.userId===this.userId&&(Ee(d.batchId>=r),l=Sa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ws;return gs(e).Z({index:Da,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ws],[this.userId,Number.POSITIVE_INFINITY]);return gs(e).G(Da,t).next(r=>r.map(a=>Sa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_f(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Wo(e).Z({range:a},(c,d,m)=>{const[p,_,T]=c,w=Hr(_);if(p===this.userId&&t.path.isEqual(w))return gs(e).get(T).next(R=>{if(!R)throw ye();Ee(R.userId===this.userId),l.push(Sa(this.serializer,R))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Ie);const a=[];return t.forEach(l=>{const c=_f(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Wo(e).Z({range:d},(p,_,T)=>{const[w,R,x]=p,U=Hr(R);w===this.userId&&l.path.isEqual(U)?r=r.add(x):T.done()});a.push(m)}),q.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=_f(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new at(Ie);return Wo(e).Z({range:c},(m,p,_)=>{const[T,w,R]=m,x=Hr(w);T===this.userId&&r.isPrefixOf(x)?x.length===a&&(d=d.add(R)):_.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(gs(e).get(l).next(c=>{if(c===null)throw ye();Ee(c.userId===this.userId),r.push(Sa(this.serializer,c))}))}),q.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return pA(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),q.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Wo(e).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Hr(l[1]);a.push(m)}else d.done()}).next(()=>{Ee(a.length===0)})})}containsKey(e,t){return yA(e,this.userId,t)}Qn(e){return _A(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ws,lastStreamToken:""})}}function yA(s,e,t){const r=_f(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Wo(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,w]=d;_===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function gs(s){return Xt(s,Ir)}function Wo(s){return Xt(s,ol)}function _A(s){return Xt(s,oc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new za(0)}static Kn(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new za(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Te.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ko(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Ee(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Ko(e).Z((c,d)=>{const m=$u(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>q.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Ko(e).Z((r,a)=>{const l=$u(a);t(l)})}Wn(e){return S0(e).get(Mf).next(t=>(Ee(t!==null),t))}Gn(e,t){return S0(e).put(Mf,t)}zn(e,t){return Ko(e).put(fA(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Pa(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ko(e).Z({range:a,index:cw},(c,d,m)=>{const p=$u(d);xc(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=_s(e);return t.forEach(c=>{const d=En(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),q.waitFor(a)}removeMatchingKeys(e,t,r){const a=_s(e);return q.forEach(t,l=>{const c=En(l.path);return q.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=_s(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=_s(e);let l=Ne();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Hr(c[1]),_=new fe(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=En(t.path),a=IDBKeyRange.bound([r],[tw(r)],!1,!0);let l=0;return _s(e).Z({index:qp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Ko(e).get(t).next(r=>r?$u(r):null)}}function Ko(s){return Xt(s,ll)}function S0(s){return Xt(s,Na)}function _s(s){return Xt(s,ul)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="LruGarbageCollector",vV=1048576;function I0([s,e],[t,r]){const a=Ie(s,t);return a===0?Ie(e,r):a}class EV{constructor(e){this.Hn=e,this.buffer=new at(I0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();I0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(R0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ls(t)?se(R0,"Ignoring IndexedDB error during garbage collection: ",t):await ks(t)}await this.er(3e5)})}}class TV{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Pn.ae);const r=new EV(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(A0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),$o()<=Ge.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function EA(s,e){return new TV(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,t){this.db=e,this.garbageCollector=EA(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return hf(e,r)}removeReference(e,t,r){return hf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hf(e,t)}ar(e,t){return function(a,l){let c=!1;return _A(a).X(d=>yA(a,d,l).next(m=>(m&&(c=!0),q.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(c,d)=>{if(d<=t){const m=this.ar(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Te.min()),_s(e).delete(function(T){return[0,En(T.path)]}(c))))});a.push(m)}}).next(()=>q.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hf(e,t)}_r(e,t){const r=_s(e);let a,l=Pn.ae;return r.Z({index:qp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==Pn.ae&&t(new fe(Hr(a)),l),l=p,a=m):l=Pn.ae}).next(()=>{l!==Pn.ae&&t(new fe(Hr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hf(s,e){return _s(s).put(function(r,a){return{targetId:0,path:En(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.changes=new Pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return va(e).put(r)}removeEntry(e,t,r){return va(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],zf(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=yt.newInvalidDocument(t);return va(e).Z({index:vf,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return va(e).Z({index:vf,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r={document:this.cr(t,l),size:qf(l)}}).next(()=>r)}getEntries(e,t){let r=Ln();return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(e,t){let r=Ln(),a=new gt(fe.comparator);return this.hr(e,t,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,qf(c))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return q.resolve();let a=new at(C0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Fu(a.first()),Fu(a.last())),c=a.getIterator();let d=c.getNext();return va(e).Z({index:vf,range:l},(m,p,_)=>{const T=fe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&C0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(Fu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),zf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return va(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=Ln();for(const T of p){const w=this.cr(fe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);w.isFoundDocument()&&(Cc(t,w)||a.has(w.key))&&(_=_.insert(w.key,w))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=Ln();const c=D0(t,r),d=D0(t,Zn.max());return va(e).Z({index:uw,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(fe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new AV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return x0(e).get(Jg).next(t=>(Ee(!!t),t))}ur(e,t){return x0(e).put(Jg,t)}cr(e,t){if(t){const r=lV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return yt.newInvalidDocument(e)}}function bA(s){return new wV(s)}class AV extends TA{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Pi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new at((l,c)=>Ie(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=f0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=qf(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=f0(this.Ir.serializer,c.convertToNoDocument(Te.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function x0(s){return Xt(s,lc)}function va(s){return Xt(s,Of)}function Fu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D0(s,e){const t=e.documentKey.path.toArray();return[s,zf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function C0(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ie(t[l],r[l]),a)return a;return a=Ie(t.length,r.length),a||(a=Ie(t[t.length-2],r[r.length-2]),a||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Ju(r.mutation,a,kn.empty(),wt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){const a=Qr();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=Qu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Qr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=Ln();const c=Wu(),d=function(){return Wu()}();return t.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof ki)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Ju(_.mutation,p,_.mutation.getFieldMask(),wt.now())):c.set(p.key,kn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new SV(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Wu();let a=new gt((c,d)=>c-d),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||kn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||Ne()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=zw();_.forEach(w=>{if(!l.has(w)){const R=Kw(t.get(w),r.get(w));R!==null&&T.set(w,R),l=l.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return q.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return fe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):q.resolve(Qr());let d=al,m=l;return c.next(p=>q.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{m=m.insert(_,w)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Ne())).next(_=>({batchId:d,changes:Bw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let a=Qu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Qu();return this.indexManager.getCollectionParents(e,l).next(d=>q.forEach(d,m=>{const p=function(T,w){return new Mi(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((T,w)=>{c=c.insert(T,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,yt.newInvalidDocument(_)))});let d=Qu();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&Ju(_.mutation,p,kn.empty(),wt.now()),Cc(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return q.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Lt(a.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:iy(a.bundledQuery),readTime:Lt(a.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.overlays=new gt(fe.comparator),this.Rr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qr();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const a=Qr(),l=t.length+1,c=new fe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return q.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new gt((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Qr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Qr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return q.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ty(t,r));let l=this.Rr.get(t);l===void 0&&(l=Ne(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.Vr=new at(rn.mr),this.gr=new at(rn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new rn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new rn(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new fe(new je([])),r=new rn(t,e),a=new rn(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new fe(new je([])),r=new rn(t,e),a=new rn(t,e+1);let l=Ne();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new rn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return fe.comparator(e.key,t.key)||Ie(e.Cr,t.Cr)}static pr(e,t){return Ie(e.Cr,t.Cr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new at(rn.mr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Jp(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return q.resolve(c)}lookupMutationBatch(e,t){return q.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?ws:this.Fr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new rn(t,0),a=new rn(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Ie);return t.forEach(a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),q.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;fe.isDocumentKey(l)||(l=l.child(""));const c=new rn(new fe(l),0);let d=new at(Ie);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),q.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ee(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return q.forEach(t.mutations,a=>{const l=new rn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new rn(t,0),a=this.Mr.firstAfterOrEqual(r);return q.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.kr=e,this.docs=function(){return new gt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=Ln();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Ln();const c=t.path,d=new fe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||zp(rw(_),r)<=0||(a.has(_.key)||Cc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ye()}qr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VV(this)}getSize(e){return q.resolve(this.size)}}class VV extends TA{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.persistence=e,this.Qr=new Pi(t=>Pa(t),xc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.$r=0,this.Ur=new oy,this.targetCount=0,this.Kr=za.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),q.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new za(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.zn(t),q.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),q.waitFor(l).next(()=>a)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Pn(0),this.zr=!1,this.zr=!0,this.jr=new xV,this.referenceDelegate=e(this),this.Hr=new NV(this),this.indexManager=new pV,this.remoteDocumentCache=function(a){return new CV(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new hA(t),this.Yr=new RV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new DV(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new OV(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return q.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class OV extends sw{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.ti=new oy,this.ni=null}static ri(e){return new cd(e)}get ii(){if(this.ni)return this.ni;throw ye()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),q.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ii,r=>{const a=fe.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,Te.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return q.or([()=>q.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Ff{constructor(e,t){this.persistence=e,this.oi=new Pi(r=>En(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=EA(this,t)}static ri(e,t){return new Ff(e,t)}Zr(){}Xr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return q.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?q.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,Te.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}ar(e,t,r){return q.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return q.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Jf("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(Ic)}(e),function(m){m.createObjectStore(oc,{keyPath:XD}),m.createObjectStore(Ir,{keyPath:qT,autoIncrement:!0}).createIndex(Da,FT,{unique:!0}),m.createObjectStore(ol)}(e),V0(e),function(m){m.createObjectStore(wa)}(e));let c=q.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(ul),m.deleteObjectStore(ll),m.deleteObjectStore(Na)}(e),V0(e)),c=c.next(()=>function(m){const p=m.store(Na),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Mf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(Ir).G().next(T=>{m.deleteObjectStore(Ir),m.createObjectStore(Ir,{keyPath:qT,autoIncrement:!0}).createIndex(Da,FT,{unique:!0});const w=p.store(Ir),R=T.map(x=>w.put(x));return q.waitFor(R)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(cl,{keyPath:sC})})(e)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(lc)}(e),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(ed,{keyPath:aC})})(e),function(m){m.createObjectStore(td,{keyPath:oC})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(nd,{keyPath:mC});p.createIndex(tp,gC,{unique:!1}),p.createIndex(dw,pC,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(Of,{keyPath:WD});p.createIndex(vf,JD),p.createIndex(uw,eC)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(wa))),r<14&&a>=14&&(c=c.next(()=>this.Pi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Fp,{keyPath:lC,autoIncrement:!0}).createIndex(ep,uC,{unique:!1}),m.createObjectStore(Pf,{keyPath:cC}).createIndex(hw,hC,{unique:!1}),m.createObjectStore(kf,{keyPath:fC}).createIndex(fw,dC,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Pf).clear()}).next(()=>{t.objectStore(kf).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Gp,{keyPath:yC})})(e)})),c}ai(e){let t=0;return e.store(wa).Z((r,a)=>{t+=qf(a)}).next(()=>{const r={byteSize:t};return e.store(lc).put(Jg,r)})}_i(e){const t=e.store(oc),r=e.store(Ir);return t.G().next(a=>q.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,ws],[l.userId,l.lastAcknowledgedBatchId]);return r.G(Da,c).next(d=>q.forEach(d,m=>{Ee(m.userId===l.userId);const p=Sa(this.serializer,m);return pA(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(ul),r=e.store(wa);return e.store(Na).get(Mf).next(a=>{const l=[];return r.Z((c,d)=>{const m=new je(c),p=function(T){return[0,En(T)]}(m);l.push(t.get(p).next(_=>_?q.resolve():(T=>t.put({targetId:0,path:En(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>q.waitFor(l))})}ci(e,t){e.createObjectStore(uc,{keyPath:iC});const r=t.store(uc),a=new ay,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:En(m)})}};return t.store(wa).Z({Y:!0},(c,d)=>{const m=new je(c);return l(m.popLast())}).next(()=>t.store(ol).Z({Y:!0},([c,d,m],p)=>{const _=Hr(d);return l(_.popLast())}))}li(e){const t=e.store(ll);return t.Z((r,a)=>{const l=$u(a),c=fA(this.serializer,l);return t.put(c)})}hi(e,t){const r=t.store(wa),a=[];return r.Z((l,c)=>{const d=t.store(Of),m=function(T){return T.document?new fe(je.fromString(T.document.name).popFirst(5)):T.noDocument?fe.fromSegments(T.noDocument.path):T.unknownDocument?fe.fromSegments(T.unknownDocument.path):ye()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>q.waitFor(a))}Pi(e,t){const r=t.store(Ir),a=bA(this.serializer),l=new ly(cd.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:Ne();Sa(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),q.forEach(d,(m,p)=>{const _=new sn(p),T=ld.It(this.serializer,_),w=l.getIndexManager(_),R=ud.It(_,this.serializer,w,l.referenceDelegate);return new wA(a,R,T,w).recalculateAndSaveOverlaysForDocumentKeys(new np(t,Pn.ae),m).next()})})}}function V0(s){s.createObjectStore(ul,{keyPath:nC}).createIndex(qp,rC,{unique:!0}),s.createObjectStore(ll,{keyPath:"targetId"}).createIndex(cw,tC,{unique:!0}),s.createObjectStore(Na)}const ps="IndexedDbPersistence",kg=18e5,Lg=5e3,Ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",AA="main";class uy{constructor(e,t,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!uy.D())throw new ie(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bV(this,a),this.gi=t+AA,this.serializer=new hA(m),this.pi=new Kr(this.gi,this.di,new MV(this.serializer)),this.jr=new cV,this.Hr=new _V(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.Yr=new uV,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&kt(ps,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,Ug);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Pn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ls(e))return se(ps,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(ps,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Gu(e).get(qo).next(t=>q.resolve(this.Ni(t)))}Bi(e){return ff(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,kg)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Xt(t,cl);return r.G().next(a=>{const l=this.qi(a,kg),c=a.filter(d=>l.indexOf(d)===-1);return q.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?q.resolve(!0):Gu(e).get(qo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,Ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||ff(e).G().next(r=>this.qi(r,Lg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(ps,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Ic,cl],e=>{const t=new np(e,Pn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>ff(e).G().next(t=>this.qi(t,kg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return ud.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yV(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return ld.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){se(ps,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?EC:m===16?vC:m===15?Hp:m===14?pw:m===13?gw:m===12?_C:m===11?mw:void ye()}(this.di);let c;return this.pi.runTransaction(e,a,l,d=>(c=new np(d,this.Gr?this.Gr.next():Pn.ae),t==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ie(Y.FAILED_PRECONDITION,iw);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return Gu(e).get(qo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(Y.FAILED_PRECONDITION,Ug)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(qo,t)}static D(){return Kr.D()}xi(e){const t=Gu(e);return t.get(qo).next(r=>this.Ni(r)?(se(ps,"Releasing primary lease."),t.delete(qo)):q.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;Vb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(ps,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kt(ps,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){kt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(s){return Xt(s,Ic)}function ff(s){return Xt(s,cl)}function cy(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new hy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Vb()?8:aw(Df())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new PV;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?($o()<=Ge.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),q.resolve()):($o()<=Ge.DEBUG&&se("QueryEngine","Query:",Yo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?($o()<=Ge.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):q.resolve())}rs(e,t){if(n0(t))return q.resolve(null);let r=Dn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Bf(t,null,"F"),r=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Ne(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Bf(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return n0(t)||a.isEqual(Te.min())?q.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?q.resolve(null):($o()<=Ge.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Yo(t)),this.hs(e,c,t,nw(a,al)).next(d=>d))})}cs(e,t){let r=new at(Lw(e));return t.forEach((a,l)=>{Cc(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return $o()<=Ge.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Yo(t)),this.ns.getDocumentsMatchingQuery(e,t,Zn.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="LocalStore",kV=3e8;class LV{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new gt(Ie),this.Is=new Pi(l=>Pa(l),xc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function RA(s,e,t,r){return new LV(s,e,t,r)}async function IA(s,e){const t=me(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Ne();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function UV(s,e){const t=me(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,w=T.keys();let R=q.resolve();return w.forEach(x=>{R=R.next(()=>_.getEntry(m,x)).next(U=>{const L=p.docVersions.get(x);Ee(L!==null),U.version.compareTo(L)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ne();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function xA(s){const e=me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function BV(s,e){const t=me(s),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,T)=>{const w=a.get(T);if(!w)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,T)));let R=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Ct.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(T,R),function(U,L,Q){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=kV?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(w,R,_)&&d.push(t.Hr.updateTargetData(l,R))});let m=Ln(),p=Ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(DA(l,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(Te.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return q.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function DA(s,e,t){let r=Ne(),a=Ne();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=Ln();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(fy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function zV(s,e){const t=me(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ws),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yl(s,e){const t=me(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,q.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new Si(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function _l(s,e,t){const r=me(s),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Ls(c))throw c;se(fy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function Gf(s,e,t){const r=me(s);let a=Te.min(),l=Ne();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=me(m),w=T.Is.get(_);return w!==void 0?q.resolve(T.Ts.get(w)):T.Hr.getTargetData(p,_)}(r,c,Dn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:Ne())).next(d=>(NA(r,kw(e),d),{documents:d,gs:l})))}function CA(s,e){const t=me(s),r=me(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(c=>c?c.target:null))}function VA(s,e){const t=me(s),r=t.Es.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,nw(r,al),Number.MAX_SAFE_INTEGER)).then(a=>(NA(t,e,a),a))}function NA(s,e,t){let r=s.Es.get(e)||Te.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(e,r)}async function jV(s,e,t,r){const a=me(s);let l=Ne(),c=Ln();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const T=e.ys(p);T.setReadTime(e.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await yl(a,function(_){return Dn(xl(je.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>DA(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function qV(s,e,t=Ne()){const r=await yl(s,Dn(iy(e.bundledQuery))),a=me(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=Lt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(Ct.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore_clients";function N0(s,e){return`${OA}_${s}_${e}`}const MA="firestore_mutations";function O0(s,e,t){let r=`${MA}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const PA="firestore_targets";function Bg(s,e){return`${PA}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="SharedClientState";class Hf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ie(a.error.code,a.error.message))),c?new Hf(e,t,a.state,l):(kt(Gr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ec{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ie(r.error.code,r.error.message))),l?new ec(e,r.state,a):(kt(Gr,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Xp();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=ow(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Qf(e,l):(kt(Gr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class dy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new dy(t.clientId,t.onlineState):(kt(Gr,`Failed to parse online state: ${e}`),null)}}class yp{constructor(){this.activeTargetIds=Xp()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zg{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new gt(Ie),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=N0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new yp),this.Ls=new RegExp(`^${OA}_${c}_([^_]*)$`),this.ks=new RegExp(`^${MA}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${PA}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(N0(this.persistenceKey,r));if(a){const l=Qf.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Bg(this.persistenceKey,e));if(a){const l=ec.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Gr,"READ",e,t),t}setItem(e,t){se(Gr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Gr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(Gr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let c=Pn.ae;if(l!=null)try{const d=JSON.parse(l);Ee(typeof d=="number"),c=d}catch(d){kt(Gr,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==Pn.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new Hf(this.currentUser,e,t,r),l=O0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=O0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=Bg(this.persistenceKey,e),l=new ec(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Qf.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Hf.Ss(new sn(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return ec.Ss(a,t)}Ks(e){return dy.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(Gr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=Xp();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class kA{constructor(){this.ho=new yp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new yp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="ConnectivityMonitor";class P0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(M0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(M0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function _p(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="RestConnection",GV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===rp?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=_p(),d=this.bo(e,t.toUriEncodedString());se(jg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(se(jg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Xr(jg,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=GV[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class KV extends HV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=_p();return new Promise((c,d)=>{const m=new $b;m.setWithCredentials(!0),m.listenOnce(Yb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case pf.NO_ERROR:const _=m.getResponseJson();se(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case pf.TIMEOUT:se(_n,`RPC '${e}' ${l} timed out`),d(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case pf.HTTP_ERROR:const T=m.getStatus();if(se(_n,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const x=function(L){const Q=L.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN}(R.status);d(new ie(x,R.message))}else d(new ie(Y.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{se(_n,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);se(_n,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=_p(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Wb(),d=Zb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");se(_n,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let w=!1,R=!1;const x=new QV({Fo:L=>{R?se(_n,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(w||(se(_n,`Opening RPC '${e}' stream ${a} transport.`),T.open(),w=!0),se(_n,`RPC '${e}' stream ${a} sending:`,L),T.send(L))},Mo:()=>T.close()}),U=(L,Q,re)=>{L.listen(Q,W=>{try{re(W)}catch(ce){setTimeout(()=>{throw ce},0)}})};return U(T,Hu.EventType.OPEN,()=>{R||(se(_n,`RPC '${e}' stream ${a} transport opened.`),x.Qo())}),U(T,Hu.EventType.CLOSE,()=>{R||(R=!0,se(_n,`RPC '${e}' stream ${a} transport closed`),x.Uo())}),U(T,Hu.EventType.ERROR,L=>{R||(R=!0,Xr(_n,`RPC '${e}' stream ${a} transport errored:`,L),x.Uo(new ie(Y.UNAVAILABLE,"The operation could not be completed")))}),U(T,Hu.EventType.MESSAGE,L=>{var Q;if(!R){const re=L.data[0];Ee(!!re);const W=re,ce=(W==null?void 0:W.error)||((Q=W[0])===null||Q===void 0?void 0:Q.error);if(ce){se(_n,`RPC '${e}' stream ${a} received error:`,ce);const le=ce.status;let ve=function(I){const O=qt[I];if(O!==void 0)return Xw(O)}(le),V=ce.message;ve===void 0&&(ve=Y.INTERNAL,V="Unknown error status: "+le+" with message "+ce.message),R=!0,x.Uo(new ie(ve,V)),T.close()}else se(_n,`RPC '${e}' stream ${a} received:`,re),x.Ko(re)}}),U(d,Xb.STAT_EVENT,L=>{L.stat===Xg.PROXY?se(_n,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===Xg.NOPROXY&&se(_n,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof window<"u"?window:null}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(s){return new WC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="PersistentStream";class UA{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new my(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ie(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(k0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(k0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $V extends UA{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=tV(this.serializer,e),r=function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?Lt(c.readTime):Te.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=fp(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Lf(m)?{documents:sA(l,m)}:{query:aA(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Jw(l,c.resumeToken);const p=cp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=pl(l,c.snapshotVersion.toTimestamp());const p=cp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=rV(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=fp(this.serializer),t.removeTarget=e,this.I_(t)}}class YV extends UA{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=nV(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=fp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gc(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{}class ZV extends XV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,hp(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(Y.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,hp(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(Y.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class WV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(kt(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class JV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{Bs(this)&&(se(ja,"Restarting streams for network reachability change."),await async function(m){const p=me(m);p.W_.add(4),await Vl(p),p.j_.set("Unknown"),p.W_.delete(4),await Pc(p)}(this))})}),this.j_=new WV(r,a)}}async function Pc(s){if(Bs(s))for(const e of s.G_)await e(!0)}async function Vl(s){for(const e of s.G_)await e(!1)}function hd(s,e){const t=me(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),yy(t)?py(t):Ol(t).c_()&&gy(t,e))}function vl(s,e){const t=me(s),r=Ol(t);t.K_.delete(e),r.c_()&&BA(t,e),t.K_.size===0&&(r.c_()?r.P_():Bs(t)&&t.j_.set("Unknown"))}function gy(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ol(s).y_(e)}function BA(s,e){s.H_.Ne(e),Ol(s).w_(e)}function py(s){s.H_=new $C({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),Ol(s).start(),s.j_.B_()}function yy(s){return Bs(s)&&!Ol(s).u_()&&s.K_.size>0}function Bs(s){return me(s).W_.size===0}function zA(s){s.H_=void 0}async function e2(s){s.j_.set("Online")}async function t2(s){s.K_.forEach((e,t)=>{gy(s,e)})}async function n2(s,e){zA(s),yy(s)?(s.j_.q_(e),py(s)):s.j_.set("Unknown")}async function r2(s,e,t){if(s.j_.set("Online"),e instanceof Ww&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,e)}catch(r){se(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kf(s,r)}else if(e instanceof Af?s.H_.We(e):e instanceof Zw?s.H_.Ze(e):s.H_.je(e),!t.isEqual(Te.min()))try{const r=await xA(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(Ct.EMPTY_BYTE_STRING,_.snapshotVersion)),BA(l,m);const T=new Si(_.target,m,p,_.sequenceNumber);gy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){se(ja,"Failed to raise snapshot:",r),await Kf(s,r)}}async function Kf(s,e,t){if(!Ls(e))throw e;s.W_.add(1),await Vl(s),s.j_.set("Offline"),t||(t=()=>xA(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{se(ja,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await Pc(s)})}function jA(s,e){return e().catch(t=>Kf(s,t,e))}async function Nl(s){const e=me(s),t=Ns(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:ws;for(;i2(e);)try{const a=await zV(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,s2(e,a)}catch(a){await Kf(e,a)}qA(e)&&FA(e)}function i2(s){return Bs(s)&&s.U_.length<10}function s2(s,e){s.U_.push(e);const t=Ns(s);t.c_()&&t.S_&&t.b_(e.mutations)}function qA(s){return Bs(s)&&!Ns(s).u_()&&s.U_.length>0}function FA(s){Ns(s).start()}async function a2(s){Ns(s).C_()}async function o2(s){const e=Ns(s);for(const t of s.U_)e.b_(t.mutations)}async function l2(s,e,t){const r=s.U_.shift(),a=ey.from(r,e,t);await jA(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Nl(s)}async function u2(s,e){e&&Ns(s).S_&&await async function(r,a){if(function(c){return Yw(c)&&c!==Y.ABORTED}(a.code)){const l=r.U_.shift();Ns(r).h_(),await jA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Nl(r)}}(s,e),qA(s)&&FA(s)}async function L0(s,e){const t=me(s);t.asyncQueue.verifyOperationInProgress(),se(ja,"RemoteStore received new credentials");const r=Bs(t);t.W_.add(3),await Vl(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Pc(t)}async function vp(s,e){const t=me(s);e?(t.W_.delete(2),await Pc(t)):e||(t.W_.add(2),await Vl(t),t.j_.set("Unknown"))}function Ol(s){return s.J_||(s.J_=function(t,r,a){const l=me(t);return l.M_(),new $V(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:e2.bind(null,s),No:t2.bind(null,s),Lo:n2.bind(null,s),p_:r2.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),yy(s)?py(s):s.j_.set("Unknown")):(await s.J_.stop(),zA(s))})),s.J_}function Ns(s){return s.Y_||(s.Y_=function(t,r,a){const l=me(t);return l.M_(),new YV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:a2.bind(null,s),Lo:u2.bind(null,s),D_:o2.bind(null,s),v_:l2.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await Nl(s)):(await s.Y_.stop(),s.U_.length>0&&(se(ja,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new _y(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ml(s,e){if(kt("AsyncQueue",`${e}: ${s}`),Ls(s))return new ie(Y.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{static emptySet(e){return new el(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Qu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new el;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.Z_=new gt(fe.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ye():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class El{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new El(e,t,el.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class h2{constructor(){this.queries=B0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=me(t),l=a.queries;a.queries=B0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function B0(){return new Pi(s=>Pw(s),Dc)}async function vy(s,e){const t=me(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new c2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Ml(c,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Ty(t)}async function Ey(s,e){const t=me(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function f2(s,e){const t=me(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&Ty(t)}function d2(s,e,t){const r=me(s),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function Ty(s){s.ia.forEach(e=>{e.next()})}var Ep,z0;(z0=Ep||(Ep={}))._a="default",z0.Cache="cache";class by{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new El(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ep.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.serializer=e}ps(e){return $r(this.serializer,e)}ys(e){return e.metadata.exists?iA(this.serializer,e.document,!1):yt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Lt(e)}}class g2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GA(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=je.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new j0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||Ne()).add(l);t.set(c,d)}}return t}async complete(){const e=await jV(this.localStore,new j0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await qV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function GA(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.key=e}}class QA{constructor(e){this.key=e}}class KA{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ne(),this.mutatedKeys=Ne(),this.ya=Lw(e),this.wa=new el(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new U0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const w=a.get(_),R=Cc(this.query,T)?T:null,x=!!w&&this.mutatedKeys.has(w.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;w&&R?w.data.isEqual(R.data)?x!==U&&(r.track({type:3,doc:R}),L=!0):this.va(w,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.ya(R,m)>0||p&&this.ya(R,p)<0)&&(d=!0)):!w&&R?(r.track({type:0,doc:R}),L=!0):w&&!R&&(r.track({type:1,doc:w}),L=!0,(m||p)&&(d=!0)),L&&(R?(c=c.add(R),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(R,x){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return U(R)-U(x)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new El(this.query,e.wa,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new U0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ne(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new QA(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new HA(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ne();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return El.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const zs="SyncEngine";class p2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class y2{constructor(e){this.key=e,this.Ba=!1}}class _2{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new Pi(d=>Pw(d),Dc),this.qa=new Map,this.Qa=new Set,this.$a=new gt(fe.comparator),this.Ua=new Map,this.Ka=new oy,this.Wa={},this.Ga=new Map,this.za=za.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function v2(s,e,t=!0){const r=fd(s);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await $A(r,e,t,!0),a}async function E2(s,e){const t=fd(s);await $A(t,e,!0,!1)}async function $A(s,e,t,r){const a=await yl(s.localStore,Dn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await wy(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&hd(s.remoteStore,a),d}async function wy(s,e,t,r,a){s.Ha=(T,w,R)=>async function(U,L,Q,re){let W=L.view.ba(Q);W.ls&&(W=await Gf(U.localStore,L.query,!1).then(({documents:V})=>L.view.ba(V,W)));const ce=re&&re.targetChanges.get(L.targetId),le=re&&re.targetMismatches.get(L.targetId)!=null,ve=L.view.applyChanges(W,U.isPrimaryClient,ce,le);return Tp(U,L.targetId,ve.Ma),ve.snapshot}(s,T,w,R);const l=await Gf(s.localStore,e,!0),c=new KA(e,l.gs),d=c.ba(l.documents),m=Oc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);Tp(s,t,p.Ma);const _=new p2(e,t,c);return s.ka.set(e,_),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function T2(s,e,t){const r=me(s),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!Dc(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await _l(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&vl(r.remoteStore,a.targetId),Tl(r,a.targetId)}).catch(ks)):(Tl(r,a.targetId),await _l(r.localStore,a.targetId,!0))}async function b2(s,e){const t=me(s),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vl(t.remoteStore,r.targetId))}async function w2(s,e,t){const r=Iy(s);try{const a=await function(c,d){const m=me(c),p=wt.now(),_=d.reduce((R,x)=>R.add(x.key),Ne());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let x=Ln(),U=Ne();return m.ds.getEntries(R,_).next(L=>{x=L,x.forEach((Q,re)=>{re.isValidDocument()||(U=U.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,x)).next(L=>{T=L;const Q=[];for(const re of d){const W=HC(re,T.get(re.key).overlayedDocument);W!=null&&Q.push(new ki(re.key,W,Rw(W.value.mapValue),bt.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,Q,d)}).next(L=>{w=L;const Q=L.applyToLocalDocumentSet(T,U);return m.documentOverlayCache.saveOverlays(R,L.batchId,Q)})}).then(()=>({batchId:w.batchId,changes:Bw(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new gt(Ie)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,t),await Li(r,a.changes),await Nl(r.remoteStore)}catch(a){const l=Ml(a,"Failed to persist write");t.reject(l)}}async function YA(s,e){const t=me(s);try{const r=await BV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?Ee(c.Ba):a.removedDocuments.size>0&&(Ee(c.Ba),c.Ba=!1))}),await Li(t,r,e)}catch(r){await ks(r)}}function q0(s,e,t){const r=me(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=me(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const w of T.ta)w.sa(d)&&(p=!0)}),p&&Ty(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A2(s,e,t){const r=me(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new gt(fe.comparator);c=c.insert(l,yt.newNoDocument(l,Te.min()));const d=Ne().add(l),m=new Nc(Te.min(),new Map,new gt(Ie),c,d);await YA(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),Ry(r)}else await _l(r.localStore,e,!1).then(()=>Tl(r,e,t)).catch(ks)}async function S2(s,e){const t=me(s),r=e.batch.batchId;try{const a=await UV(t.localStore,e);Sy(t,r,null),Ay(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Li(t,a)}catch(a){await ks(a)}}async function R2(s,e,t){const r=me(s);try{const a=await function(c,d){const m=me(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(Ee(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);Sy(r,e,t),Ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Li(r,a)}catch(a){await ks(a)}}async function I2(s,e){const t=me(s);Bs(t.remoteStore)||se(zs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=me(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===ws)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=Ml(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Ay(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function Sy(s,e,t){const r=me(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function Tl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.qa.get(e))s.ka.delete(r),t&&s.La.Ja(r,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(r=>{s.Ka.containsKey(r)||XA(s,r)})}function XA(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(vl(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),Ry(s))}function Tp(s,e,t){for(const r of t)r instanceof HA?(s.Ka.addReference(r.key,e),x2(s,r)):r instanceof QA?(se(zs,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,e),s.Ka.containsKey(r.key)||XA(s,r.key)):ye()}function x2(s,e){const t=e.key,r=t.path.canonicalString();s.$a.get(t)||s.Qa.has(r)||(se(zs,"New document in limbo: "+t),s.Qa.add(r),Ry(s))}function Ry(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new fe(je.fromString(e)),r=s.za.next();s.Ua.set(r,new y2(t)),s.$a=s.$a.insert(t,r),hd(s.remoteStore,new Si(Dn(xl(t.path)),r,"TargetPurposeLimboResolution",Pn.ae))}}async function Li(s,e,t){const r=me(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=hy.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=me(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>q.forEach(p,w=>q.forEach(w.Hi,R=>_.persistence.referenceDelegate.addReference(T,w.targetId,R)).next(()=>q.forEach(w.Ji,R=>_.persistence.referenceDelegate.removeReference(T,w.targetId,R)))))}catch(T){if(!Ls(T))throw T;se(fy,"Failed to update sequence numbers: "+T)}for(const T of p){const w=T.targetId;if(!T.fromCache){const R=_.Ts.get(w),x=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(x);_.Ts=_.Ts.insert(w,U)}}}(r.localStore,l))}async function D2(s,e){const t=me(s);if(!t.currentUser.isEqual(e)){se(zs,"User change. New user:",e.toKey());const r=await IA(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ie(Y.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Li(t,r.Rs)}}function C2(s,e){const t=me(s),r=t.Ua.get(e);if(r&&r.Ba)return Ne().add(r.key);{let a=Ne();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function V2(s,e){const t=me(s),r=await Gf(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&Tp(t,e.targetId,a.Ma),a}async function N2(s,e){const t=me(s);return VA(t.localStore,e).then(r=>Li(t,r))}async function O2(s,e,t,r){const a=me(s),l=await function(d,m){const p=me(d),_=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(w=>w?p.localDocuments.getDocuments(T,w):q.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Nl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Sy(a,e,r||null),Ay(a,e),function(d,m){me(me(d).mutationQueue).qn(m)}(a.localStore,e)):ye(),await Li(a,l)):se(zs,"Cannot apply mutation batch with id: "+e)}async function M2(s,e){const t=me(s);if(fd(t),Iy(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await F0(t,r.toArray());t.ja=!0,await vp(t.remoteStore,!0);for(const l of a)hd(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(Tl(t,c),_l(t.localStore,c,!0))),vl(t.remoteStore,c)}),await a,await F0(t,r),function(c){const d=me(c);d.Ua.forEach((m,p)=>{vl(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new gt(fe.comparator)}(t),t.ja=!1,await vp(t.remoteStore,!1)}}async function F0(s,e,t){const r=me(s),a=[],l=[];for(const c of e){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await yl(r.localStore,Dn(m[0]));for(const p of m){const _=r.ka.get(p),T=await V2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await CA(r.localStore,c);d=await yl(r.localStore,p),await wy(r,ZA(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function ZA(s){return Mw(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function P2(s){return function(t){return me(me(t).persistence).zi()}(me(s).localStore)}async function k2(s,e,t,r){const a=me(s);if(a.ja)return void se(zs,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await VA(a.localStore,kw(l[0])),d=Nc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ct.EMPTY_BYTE_STRING);await Li(a,c,d);break}case"rejected":await _l(a.localStore,e,!0),Tl(a,e,r);break;default:ye()}}async function L2(s,e,t){const r=fd(s);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(zs,"Adding an already active target "+a);continue}const l=await CA(r.localStore,a),c=await yl(r.localStore,l);await wy(r,ZA(l),c.targetId,!1,c.resumeToken),hd(r.remoteStore,c)}for(const a of t)r.qa.has(a)&&await _l(r.localStore,a,!1).then(()=>{vl(r.remoteStore,a),Tl(r,a)}).catch(ks)}}function fd(s){const e=me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.La.p_=f2.bind(null,e.eventManager),e.La.Ja=d2.bind(null,e.eventManager),e}function Iy(s){const e=me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R2.bind(null,e),e}function U2(s,e,t){const r=me(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(R,x){const U=me(R),L=Lt(x.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",Q=>U.Yr.getBundleMetadata(Q,x.id)).then(Q=>!!Q&&Q.createTime.compareTo(L)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(GA(m));const p=new g2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const w=await p.Aa(_);w&&d._updateProgress(w),_=await c.Ya()}const T=await p.complete();return await Li(l,T.ma,void 0),await function(R,x){const U=me(R);return U.persistence.runTransaction("Save bundle","readwrite",L=>U.Yr.saveBundleMetadata(L,x))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return Xr(zs,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return RA(this.persistence,new SA,e.initialUser,this.serializer)}Xa(e){return new ly(cd.ri,this.serializer)}Za(e){return new kA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pc.provider={build:()=>new pc};class B2 extends pc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ee(this.persistence.referenceDelegate instanceof Ff);const r=this.persistence.referenceDelegate.garbageCollector;return new vA(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new ly(r=>Ff.ri(r,t),this.serializer)}}class WA extends pc{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Iy(this.ru.syncEngine),await Nl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return RA(this.persistence,new SA,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new vA(r,e.asyncQueue,t)}nu(e,t){const r=new $D(t,this.persistence);return new KD(e.asyncQueue,r)}Xa(e){const t=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new uy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LA(),Sf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new kA}}class z2 extends WA{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof zg&&(this.sharedClientState.syncEngine={uo:O2.bind(null,t),co:k2.bind(null,t),lo:L2.bind(null,t),zi:P2.bind(null,t),ao:N2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await M2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=LA();if(!zg.D(t))throw new ie(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D2.bind(null,this.syncEngine),await vp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h2}()}createDatastore(e){const t=Mc(e.databaseInfo.databaseId),r=function(l){return new KV(l)}(e.databaseInfo);return function(l,c,d,m){return new ZV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new JV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>q0(this.syncEngine,t,0),function(){return P0.D()?new P0:new FV}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new _2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=me(a);se(ja,"RemoteStore shutting down."),l.W_.add(5),await Vl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yc.provider={build:()=>new yc};function G0(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new mn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new m2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=me(a),d={documents:l.map(T=>mc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,je.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const w=eV(c.serializer,T);p.set(w.key.toString(),w)});const _=[];return l.forEach(T=>{const w=p.get(T.toString());Ee(!!w),_.push(w)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=fe.fromPath(r);this.mutations.push(new Wp(a,this.precondition(a)))}),await async function(r,a){const l=me(r),c={writes:a.map(d=>gc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,je.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ye();t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ie(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?bt.exists(!1):bt.updateTime(t):bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new ie(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new my(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new q2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Yw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class G2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=sn.UNAUTHENTICATED,this.clientId=ew.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{se(Os,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(se(Os,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ml(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qg(s,e){s.asyncQueue.verifyOperationInProgress(),se(Os,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await IA(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function H0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await xy(s);se(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>L0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>L0(e.remoteStore,a)),s._onlineComponents=e}async function xy(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){se(Os,"Using user provided OfflineComponentProvider");try{await qg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Xr("Error using user provided cache. Falling back to memory cache: "+t),await qg(s,new pc)}}else se(Os,"Using default OfflineComponentProvider"),await qg(s,new B2(void 0));return s._offlineComponents}async function md(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(se(Os,"Using user provided OnlineComponentProvider"),await H0(s,s._uninitializedComponentsProvider._online)):(se(Os,"Using default OnlineComponentProvider"),await H0(s,new yc))),s._onlineComponents}function JA(s){return xy(s).then(e=>e.persistence)}function Dy(s){return xy(s).then(e=>e.localStore)}function eS(s){return md(s).then(e=>e.remoteStore)}function Cy(s){return md(s).then(e=>e.syncEngine)}function H2(s){return md(s).then(e=>e.datastore)}async function bl(s){const e=await md(s),t=e.eventManager;return t.onListen=v2.bind(null,e.syncEngine),t.onUnlisten=T2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b2.bind(null,e.syncEngine),t}function Q2(s){return s.asyncQueue.enqueue(async()=>{const e=await JA(s),t=await eS(s);return e.setNetworkEnabled(!0),function(a){const l=me(a);return l.W_.delete(0),Pc(l)}(t)})}function K2(s){return s.asyncQueue.enqueue(async()=>{const e=await JA(s),t=await eS(s);return e.setNetworkEnabled(!1),async function(a){const l=me(a);l.W_.add(0),await Vl(l),l.j_.set("Offline")}(t)})}function $2(s,e){const t=new mn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=me(p);return T.persistence.runTransaction("read document","readonly",w=>T.localDocuments.getDocument(w,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ie(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=Ml(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await Dy(s),e,t)),t.promise}function tS(s,e,t={}){const r=new mn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new dd({next:w=>{_.su(),c.enqueueAndForget(()=>Ey(l,T));const R=w.docs.has(d);!R&&w.fromCache?p.reject(new ie(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&m&&m.source==="server"?p.reject(new ie(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new by(xl(d.path),_,{includeMetadataChanges:!0,Ta:!0});return vy(l,T)}(await bl(s),s.asyncQueue,e,t,r)),r.promise}function Y2(s,e){const t=new mn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await Gf(a,l,!0),m=new KA(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=Ml(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await Dy(s),e,t)),t.promise}function nS(s,e,t={}){const r=new mn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new dd({next:w=>{_.su(),c.enqueueAndForget(()=>Ey(l,T)),w.fromCache&&m.source==="server"?p.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new by(d,_,{includeMetadataChanges:!0,Ta:!0});return vy(l,T)}(await bl(s),s.asyncQueue,e,t,r)),r.promise}function X2(s,e){const t=new dd(e);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).ia.add(l),l.next()}(await bl(s),t)),()=>{t.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).ia.delete(l)}(await bl(s),t))}}function Z2(s,e,t,r){const a=function(c,d){let m;return m=typeof c=="string"?Bp().encode(c):c,function(_,T){return new j2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return G0(_,T);if(_ instanceof ArrayBuffer)return G0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Mc(e));s.asyncQueue.enqueueAndForget(async()=>{U2(await Cy(s),a,r)})}function W2(s,e){return s.asyncQueue.enqueue(async()=>function(r,a){const l=me(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await Dy(s),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(s,e,t){if(!t)throw new ie(Y.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function iS(s,e,t,r){if(e===!0&&r===!0)throw new ie(Y.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function K0(s){if(!fe.isDocumentKey(s))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $0(s){if(fe.isDocumentKey(s))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function gd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye()}function Xe(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gd(s);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function sS(s,e){if(e<=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firestore.googleapis.com",Y0=!0;class X0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aS,this.ssl=Y0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Y0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vV)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kD;switch(r.type){case"firstParty":return new zD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Q0.get(t);r&&(se("ComponentProvider","Removing Datastore"),Q0.delete(t),r.terminate())}(this),Promise.resolve()}}function J2(s,e,t,r={}){var a;const l=(s=Xe(s,kc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==aS&&l.host!==d&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!tl(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=sn.MOCK_USER;else{p=nx(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new sn(T)}s._authCredentials=new LD(new Jb(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=class oS{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oS(this.firestore,e,this._query)}},Rt=class lS{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new As(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lS(this.firestore,e,this._key)}},As=class uS extends Cn{constructor(e,t,r){super(e,t,xl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new fe(e))}withConverter(e){return new uS(this.firestore,e,this._path)}};function cS(s,e,...t){if(s=Ft(s),Vy("collection","path",e),s instanceof kc){const r=je.fromString(e,...t);return $0(r),new As(s,null,r)}{if(!(s instanceof Rt||s instanceof As))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(je.fromString(e,...t));return $0(r),new As(s.firestore,null,r)}}function eN(s,e){if(s=Xe(s,kc),Vy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cn(s,null,function(r){return new Mi(je.emptyPath(),r)}(e))}function $f(s,e,...t){if(s=Ft(s),arguments.length===1&&(e=ew.newId()),Vy("doc","path",e),s instanceof kc){const r=je.fromString(e,...t);return K0(r),new Rt(s,null,new fe(r))}{if(!(s instanceof Rt||s instanceof As))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(je.fromString(e,...t));return K0(r),new Rt(s.firestore,s instanceof As?s.converter:null,new fe(r))}}function hS(s,e){return s=Ft(s),e=Ft(e),(s instanceof Rt||s instanceof As)&&(e instanceof Rt||e instanceof As)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function fS(s,e){return s=Ft(s),e=Ft(e),s instanceof Cn&&e instanceof Cn&&s.firestore===e.firestore&&Dc(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="AsyncQueue";class W0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new my(this,"async_queue_retry"),this.Su=()=>{const r=Sf();r&&se(Z0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new mn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ls(e))throw e;se(Z0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw kt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=_y.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ye()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function bp(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class tN{constructor(){this._progressObserver={},this._taskCompletionResolver=new mn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=-1;let Ut=class extends kc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new W0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W0(e),this._firestoreClient=void 0,await e}}};function Tn(s){if(s._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dS(s),s._firestoreClient}function dS(s){var e,t,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new wC(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rS(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new G2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function rN(s,e){Xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return mS(s,yc.provider,{build:r=>new WA(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function iN(s){Xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();mS(s,yc.provider,{build:t=>new z2(t,e.cacheSizeBytes)})}function mS(s,e,t){if((s=Xe(s,Ut))._firestoreClient||s._terminated)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ie(Y.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},dS(s)}function sN(s){if(s._initialized&&!s._terminated)throw new ie(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mn;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Kr.D())return Promise.resolve();const a=r+AA;await Kr.delete(a)}(cy(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function aN(s){return function(t){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>I2(await Cy(t),r)),r.promise}(Tn(s=Xe(s,Ut)))}function oN(s){return Q2(Tn(s=Xe(s,Ut)))}function lN(s){return K2(Tn(s=Xe(s,Ut)))}function uN(s,e){const t=Tn(s=Xe(s,Ut)),r=new tN;return Z2(t,s._databaseId,e,r),r}function cN(s,e){return W2(Tn(s=Xe(s,Ut)),e).then(t=>t?new Cn(s,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Ct.fromBase64String(e))}catch(t){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=/^__.*__$/;class fN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class gS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class yd{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Yf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(pS(this.Lu)&&hN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class dN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mc(e)}ju(e,t,r,a=!1){return new yd({Lu:e,methodName:t,zu:r,path:Tt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qa(s){const e=s._freezeSettings(),t=Mc(s._databaseId);return new dN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function _d(s,e,t,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,e,t,a);By("Data must be an object, but it was:",c,r);const d=vS(r,c);let m,p;if(l.merge)m=new kn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const w=wp(e,T,t);if(!c.contains(w))throw new ie(Y.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);TS(_,w)||_.push(w)}m=new kn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new fN(new dn(d),m,p)}class Lc extends Ha{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lc}}function yS(s,e,t){return new yd({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Oy extends Ha{_toFieldTransform(e){return new Vc(e.path,new ml)}isEqual(e){return e instanceof Oy}}class My extends Ha{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=yS(this,e,!0),r=this.Hu.map(l=>Ka(l,t)),a=new ka(r);return new Vc(e.path,a)}isEqual(e){return e instanceof My&&tl(this.Hu,e.Hu)}}class Py extends Ha{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=yS(this,e,!0),r=this.Hu.map(l=>Ka(l,t)),a=new La(r);return new Vc(e.path,a)}isEqual(e){return e instanceof Py&&tl(this.Hu,e.Hu)}}class ky extends Ha{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new gl(e.serializer,qw(e.serializer,this.Ju));return new Vc(e.path,t)}isEqual(e){return e instanceof ky&&this.Ju===e.Ju}}function Ly(s,e,t,r){const a=s.ju(1,e,t);By("Data must be an object, but it was:",a,r);const l=[],c=dn.empty();Us(r,(m,p)=>{const _=zy(e,m,t);p=Ft(p);const T=a.Uu(_);if(p instanceof Lc)l.push(_);else{const w=Ka(p,T);w!=null&&(l.push(_),c.set(_,w))}});const d=new kn(l);return new gS(c,d,a.fieldTransforms)}function Uy(s,e,t,r,a,l){const c=s.ju(1,e,t),d=[wp(e,r,t)],m=[a];if(l.length%2!=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(wp(e,l[w])),m.push(l[w+1]);const p=[],_=dn.empty();for(let w=d.length-1;w>=0;--w)if(!TS(p,d[w])){const R=d[w];let x=m[w];x=Ft(x);const U=c.Uu(R);if(x instanceof Lc)p.push(R);else{const L=Ka(x,U);L!=null&&(p.push(R),_.set(R,L))}}const T=new kn(p);return new gS(_,T,c.fieldTransforms)}function _S(s,e,t,r=!1){return Ka(t,s.ju(r?4:3,e))}function Ka(s,e){if(ES(s=Ft(s)))return By("Unsupported field value:",e,s),vS(s,e);if(s instanceof Ha)return function(r,a){if(!pS(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Ka(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,a){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qw(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=wt.fromDate(r);return{timestampValue:pl(a.serializer,l)}}if(r instanceof wt){const l=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pl(a.serializer,l)}}if(r instanceof pd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wr)return{bytesValue:Jw(a.serializer,r._byteString)};if(r instanceof Rt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ry(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ny)return function(c,d){return{mapValue:{fields:{[Qp]:{stringValue:Kp},[hl]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Zp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${gd(r)}`)}(s,e)}function vS(s,e){const t={};return yw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(s,(r,a)=>{const l=Ka(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function ES(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof wt||s instanceof pd||s instanceof Wr||s instanceof Rt||s instanceof Ha||s instanceof Ny)}function By(s,e,t){if(!ES(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=gd(t);throw r==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+r)}}function wp(s,e,t){if((e=Ft(e))instanceof Ms)return e._internalPath;if(typeof e=="string")return zy(s,e);throw Yf("Field path arguments must be of type string or ",s,!1,void 0,t)}const mN=new RegExp("[~\\*/\\[\\]]");function zy(s,e,t){if(e.search(mN)>=0)throw Yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ms(...e.split("."))._internalPath}catch{throw Yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Yf(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ie(Y.INVALID_ARGUMENT,d+s+m)}function TS(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gN extends _c{data(){return super.data()}}function vd(s,e){return typeof e=="string"?zy(s,e):e instanceof Ms?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jy{}class Uc extends jy{}function ys(s,e,...t){let r=[];e instanceof jy&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof qy).length,d=l.filter(m=>m instanceof Ed).length;if(c>1||c>0&&d>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class Ed extends Uc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=this._parse(e);return AS(e._query,t),new Cn(e.firestore,e.converter,up(e._query,t))}_parse(e){const t=Qa(e.firestore);return function(l,c,d,m,p,_,T){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){eb(T,_);const x=[];for(const U of T)x.push(J0(m,l,U));w={arrayValue:{values:x}}}else w=J0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||eb(T,_),w=_S(d,c,T,_==="in"||_==="not-in");return qe.create(p,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pN(s,e,t){const r=e,a=vd("where",s);return Ed._create(a,r,t)}class qy extends jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:st.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)AS(c,m),c=up(c,m)}(e._query,t),new Cn(e.firestore,e.converter,up(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends Uc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dc(l,c)}(e._query,this._field,this._direction);return new Cn(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Mi(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function yN(s,e="asc"){const t=e,r=vd("orderBy",s);return Fy._create(r,t)}class Td extends Uc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Td(e,t,r)}_apply(e){return new Cn(e.firestore,e.converter,Bf(e._query,this._limit,this._limitType))}}function _N(s){return sS("limit",s),Td._create("limit",s,"F")}function vN(s){return sS("limitToLast",s),Td._create("limitToLast",s,"L")}class bd extends Uc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bd(e,t,r)}_apply(e){const t=wS(e,this.type,this._docOrFields,this._inclusive);return new Cn(e.firestore,e.converter,function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function EN(...s){return bd._create("startAt",s,!0)}function TN(...s){return bd._create("startAfter",s,!1)}class wd extends Uc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wd(e,t,r)}_apply(e){const t=wS(e,this.type,this._docOrFields,this._inclusive);return new Cn(e.firestore,e.converter,function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function bN(...s){return wd._create("endBefore",s,!1)}function wN(...s){return wd._create("endAt",s,!0)}function wS(s,e,t,r){if(t[0]=Ft(t[0]),t[0]instanceof _c)return function(l,c,d,m,p){if(!m)throw new ie(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Jo(l))if(T.field.isKeyField())_.push(Ma(c,m.key));else{const w=m.data.field(T.field);if(rd(w))throw new ie(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const R=T.field.canonicalString();throw new ie(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(w)}return new Vs(_,p)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=Qa(s.firestore);return function(c,d,m,p,_,T){const w=c.explicitOrderBy;if(_.length>w.length)throw new ie(Y.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let x=0;x<_.length;x++){const U=_[x];if(w[x].field.isKeyField()){if(typeof U!="string")throw new ie(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!Yp(c)&&U.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const L=c.path.child(je.fromString(U));if(!fe.isDocumentKey(L))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const Q=new fe(L);R.push(Ma(d,Q))}else{const L=_S(m,p,U);R.push(L)}}return new Vs(R,T)}(s._query,s.firestore._databaseId,a,e,t,r)}}function J0(s,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yp(e)&&t.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(je.fromString(t));if(!fe.isDocumentKey(r))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ma(s,new fe(r))}if(t instanceof Rt)return Ma(s,t._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(t)}.`)}function eb(s,e){if(!Array.isArray(s)||s.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(s,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Gy{convertValue(e,t="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Us(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[hl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Et(c.doubleValue));return new Ny(l)}convertGeoPoint(e){return new pd(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=id(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=je.fromString(e);Ee(cA(r));const a=new xs(r.get(1),r.get(3)),l=new fe(r.popFirst(5));return a.isEqual(t)||kt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class AN extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ni=class extends _c{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},tc=class extends Ni{data(e={}){return super.data(e)}},Ps=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ca(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tc(this._firestore,this._userDataWriter,r.key,r,new Ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new tc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ca(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new tc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ca(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:SN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function SN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function SS(s,e){return s instanceof Ni&&e instanceof Ni?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Ps&&e instanceof Ps&&s._firestore===e._firestore&&fS(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s){s=Xe(s,Rt);const e=Xe(s.firestore,Ut);return tS(Tn(e),s._key).then(t=>Hy(e,s,t))}class $a extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function IN(s){s=Xe(s,Rt);const e=Xe(s.firestore,Ut),t=Tn(e),r=new $a(e);return $2(t,s._key).then(a=>new Ni(e,r,s._key,a,new Ca(a!==null&&a.hasLocalMutations,!0),s.converter))}function xN(s){s=Xe(s,Rt);const e=Xe(s.firestore,Ut);return tS(Tn(e),s._key,{source:"server"}).then(t=>Hy(e,s,t))}function DN(s){s=Xe(s,Cn);const e=Xe(s.firestore,Ut),t=Tn(e),r=new $a(e);return bS(s._query),nS(t,s._query).then(a=>new Ps(e,r,s,a))}function CN(s){s=Xe(s,Cn);const e=Xe(s.firestore,Ut),t=Tn(e),r=new $a(e);return Y2(t,s._query).then(a=>new Ps(e,r,s,a))}function VN(s){s=Xe(s,Cn);const e=Xe(s.firestore,Ut),t=Tn(e),r=new $a(e);return nS(t,s._query,{source:"server"}).then(a=>new Ps(e,r,s,a))}function tb(s,e,t){s=Xe(s,Rt);const r=Xe(s.firestore,Ut),a=Ad(s.converter,e,t);return Bc(r,[_d(Qa(r),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,bt.none())])}function nb(s,e,t,...r){s=Xe(s,Rt);const a=Xe(s.firestore,Ut),l=Qa(a);let c;return c=typeof(e=Ft(e))=="string"||e instanceof Ms?Uy(l,"updateDoc",s._key,e,t,r):Ly(l,"updateDoc",s._key,e),Bc(a,[c.toMutation(s._key,bt.exists(!0))])}function NN(s){return Bc(Xe(s.firestore,Ut),[new Cl(s._key,bt.none())])}function ON(s,e){const t=Xe(s.firestore,Ut),r=$f(s),a=Ad(s.converter,e);return Bc(t,[_d(Qa(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,bt.exists(!1))]).then(()=>r)}function RS(s,...e){var t,r,a;s=Ft(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||bp(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(bp(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof Rt)p=Xe(s.firestore,Ut),_=xl(s._key.path),m={next:T=>{e[c]&&e[c](Hy(p,s,T))},error:e[c+1],complete:e[c+2]};else{const T=Xe(s,Cn);p=Xe(T.firestore,Ut),_=T._query;const w=new $a(p);m={next:R=>{e[c]&&e[c](new Ps(p,w,T,R))},error:e[c+1],complete:e[c+2]},bS(s._query)}return function(w,R,x,U){const L=new dd(U),Q=new by(R,L,x);return w.asyncQueue.enqueueAndForget(async()=>vy(await bl(w),Q)),()=>{L.su(),w.asyncQueue.enqueueAndForget(async()=>Ey(await bl(w),Q))}}(Tn(p),_,d,m)}function MN(s,e){return X2(Tn(s=Xe(s,Ut)),bp(e)?e:{next:e})}function Bc(s,e){return function(r,a){const l=new mn;return r.asyncQueue.enqueueAndForget(async()=>w2(await Cy(r),a,l)),l.promise}(Tn(s),e)}function Hy(s,e,t){const r=t.docs.get(e._key),a=new $a(s);return new Ni(s,a,e._key,r,new Ca(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kN=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qa(e)}set(e,t,r){this._verifyNotCommitted();const a=Es(e,this._firestore),l=Ad(a.converter,t,r),c=_d(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,bt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Es(e,this._firestore);let c;return c=typeof(t=Ft(t))=="string"||t instanceof Ms?Uy(this._dataReader,"WriteBatch.update",l._key,t,r,a):Ly(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Es(e,this._firestore);return this._mutations=this._mutations.concat(new Cl(t._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Es(s,e){if((s=Ft(s)).firestore!==e)throw new ie(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qa(e)}get(e){const t=Es(e,this._firestore),r=new AN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ye();const l=a[0];if(l.isFoundDocument())return new _c(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new _c(this._firestore,r,t._key,null,t.converter);throw ye()})}set(e,t,r){const a=Es(e,this._firestore),l=Ad(a.converter,t,r),c=_d(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=Es(e,this._firestore);let c;return c=typeof(t=Ft(t))=="string"||t instanceof Ms?Uy(this._dataReader,"Transaction.update",l._key,t,r,a):Ly(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Es(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UN=class extends LN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Es(e,this._firestore),r=new $a(this._firestore);return super.get(e).then(a=>new Ni(this._firestore,r,t._key,a._document,new Ca(!1,!1),t.converter))}};function BN(s,e,t){s=Xe(s,Ut);const r=Object.assign(Object.assign({},PN),t);return function(l){if(l.maxAttempts<1)throw new ie(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new mn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await H2(l);new F2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(Tn(s),a=>e(new UN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return new Lc("deleteField")}function jN(){return new Oy("serverTimestamp")}function qN(...s){return new My("arrayUnion",s)}function FN(...s){return new Py("arrayRemove",s)}function GN(s){return new ky("increment",s)}(function(e,t=!0){(function(a){Il=a})(Pp),il(new Oa("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Ut(new UD(r.getProvider("auth-internal")),new jD(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Ii(OT,MT,e),Ii(OT,MT,"esm2017")})();const HN="@firebase/firestore-compat",QN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function ib(){if(!TC())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class vc{constructor(e){this._delegate=e}static fromBase64String(e){return ib(),new vc(Wr.fromBase64String(e))}static fromUint8Array(e){return rb(),new vc(Wr.fromUint8Array(e))}toBase64(){return ib(),this._delegate.toBase64()}toUint8Array(){return rb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){return KN(s,["next","error","complete"])}function KN(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{enableIndexedDbPersistence(e,t){return rN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return iN(e._delegate)}clearIndexedDbPersistence(e){return sN(e._delegate)}}class IS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){J2(this._delegate,e,t,r)}enableNetwork(){return oN(this._delegate)}disableNetwork(){return lN(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return aN(this._delegate)}onSnapshotsInSync(e){return MN(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wl(this,cS(this._delegate,e))}catch(t){throw xn(t,"collection()","Firestore.collection()")}}doc(e){try{return new gr(this,$f(this._delegate,e))}catch(t){throw xn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new In(this,eN(this._delegate,e))}catch(t){throw xn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return BN(this._delegate,t=>e(new xS(this,t)))}batch(){return Tn(this._delegate),new DS(new kN(this._delegate,e=>Bc(this._delegate,e)))}loadBundle(e){return uN(this._delegate,e)}namedQuery(e){return cN(this._delegate,e).then(t=>t?new In(this,t):null)}}class Sd extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(new Wr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gr.forKey(t,this.firestore,null)}}function YN(s){MD(s)}class xS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Sd(e)}get(e){const t=Va(e);return this._delegate.get(t).then(r=>new Ec(this._firestore,new Ni(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Va(e);return r?(Qy("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Va(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Va(e);return this._delegate.delete(t),this}}class DS{constructor(e){this._delegate=e}set(e,t,r){const a=Va(e);return r?(Qy("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Va(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Va(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qa{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new tc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qa.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new qa(e,new Sd(e),t),a.set(t,l)),l}}qa.INSTANCES=new WeakMap;class gr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sd(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gr(t,new Rt(t._delegate,r,new fe(e)))}static forKey(e,t,r){return new gr(t,new Rt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wl(this.firestore,cS(this._delegate,e))}catch(t){throw xn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ft(e),e instanceof Rt?hS(this._delegate,e):!1}set(e,t){t=Qy("DocumentReference.set",t);try{return t?tb(this._delegate,e,t):tb(this._delegate,e)}catch(r){throw xn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?nb(this._delegate,e):nb(this._delegate,e,t,...r)}catch(a){throw xn(a,"updateDoc()","DocumentReference.update()")}}delete(){return NN(this._delegate)}onSnapshot(...e){const t=CS(e),r=VS(e,a=>new Ec(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return RS(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=IN(this._delegate):(e==null?void 0:e.source)==="server"?t=xN(this._delegate):t=RN(this._delegate),t.then(r=>new Ec(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gr(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function xn(s,e,t){return s.message=s.message.replace(e,t),s}function CS(s){for(const e of s)if(typeof e=="object"&&!Ap(e))return e;return{}}function VS(s,e){var t,r;let a;return Ap(s[0])?a=s[0]:Ap(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class Ec{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SS(this._delegate,e._delegate)}}class Tc extends Ec{data(e){const t=this._delegate.data(e);return this._delegate._converter||PD(t!==void 0),t}}class In{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sd(e)}where(e,t,r){try{return new In(this.firestore,ys(this._delegate,pN(e,t,r)))}catch(a){throw xn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new In(this.firestore,ys(this._delegate,yN(e,t)))}catch(r){throw xn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new In(this.firestore,ys(this._delegate,_N(e)))}catch(t){throw xn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new In(this.firestore,ys(this._delegate,vN(e)))}catch(t){throw xn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new In(this.firestore,ys(this._delegate,EN(...e)))}catch(t){throw xn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new In(this.firestore,ys(this._delegate,TN(...e)))}catch(t){throw xn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new In(this.firestore,ys(this._delegate,bN(...e)))}catch(t){throw xn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new In(this.firestore,ys(this._delegate,wN(...e)))}catch(t){throw xn(t,"endAt()","Query.endAt()")}}isEqual(e){return fS(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=CN(this._delegate):(e==null?void 0:e.source)==="server"?t=VN(this._delegate):t=DN(this._delegate),t.then(r=>new Sp(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CS(e),r=VS(e,a=>new Sp(this.firestore,new Ps(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return RS(this._delegate,t,r)}withConverter(e){return new In(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class XN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Sp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new In(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new XN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Tc(this._firestore,r))})}isEqual(e){return SS(this._delegate,e._delegate)}}class wl extends In{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gr(this.firestore,e):null}doc(e){try{return e===void 0?new gr(this.firestore,$f(this._delegate)):new gr(this.firestore,$f(this._delegate,e))}catch(t){throw xn(t,"doc()","CollectionReference.doc()")}}add(e){return ON(this._delegate,e).then(t=>new gr(this.firestore,t))}isEqual(e){return hS(this._delegate,e._delegate)}withConverter(e){return new wl(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Va(s){return Xe(s,Rt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(...e){this._delegate=new Ms(...e)}static documentId(){return new Ky(Tt.keyField().canonicalString())}isEqual(e){return e=Ft(e),e instanceof Ms?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static serverTimestamp(){const e=jN();return e._methodName="FieldValue.serverTimestamp",new xa(e)}static delete(){const e=zN();return e._methodName="FieldValue.delete",new xa(e)}static arrayUnion(...e){const t=qN(...e);return t._methodName="FieldValue.arrayUnion",new xa(t)}static arrayRemove(...e){const t=FN(...e);return t._methodName="FieldValue.arrayRemove",new xa(t)}static increment(e){const t=GN(e);return t._methodName="FieldValue.increment",new xa(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={Firestore:IS,GeoPoint:pd,Timestamp:wt,Blob:vc,Transaction:xS,WriteBatch:DS,DocumentReference:gr,DocumentSnapshot:Ec,Query:In,QueryDocumentSnapshot:Tc,QuerySnapshot:Sp,CollectionReference:wl,FieldPath:Ky,FieldValue:xa,setLogLevel:YN,CACHE_SIZE_UNLIMITED:nN};function WN(s,e){s.INTERNAL.registerComponent(new Oa("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},ZN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(s){WN(s,(e,t)=>new IS(e,t,new $N)),s.registerVersion(HN,QN)}JN(Dt);const eO={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let sb;function tO(){const[s,e]=F.useState(!1);return F.useEffect(()=>{Dt.apps.length||(Dt.initializeApp(eO),sb=Dt.firestore()),e(!0)},[]),{db:sb,initialized:s}}const nO="/clicker/assets/logo-BS-hctJj.png",Fg=1e3,rO=1,iO=1e3,sO=1e4,Gg=1800,aO=[{id:"click_1000",label:"1 000 кліків",condition:({totalCount:s})=>s>=1e3},{id:"click_10000",label:"10 000 кліків",condition:({totalCount:s})=>s>=1e4},{id:"click_100000",label:"100 000 кліків",condition:({totalCount:s})=>s>=1e5},{id:"click_500000",label:"500 000 кліків",condition:({totalCount:s})=>s>=5e5},{id:"click_1000000",label:"1 000 000 кліків",condition:({totalCount:s})=>s>=1e6},{id:"upgrade_multiplier_lvl5",label:"Множник lvl 5",condition:({multiplier:s})=>s>=5},{id:"upgrade_multiplier_lvl120",label:"Множник lvl 20",condition:({multiplier:s})=>s>=15},{id:"upgrade_energy_lvl5",label:"Енергія рівень 5",condition:({maxEnergyLevel:s})=>s>=5},{id:"upgrade_energy_lvl20",label:"Енергія рівень 20",condition:({maxEnergyLevel:s})=>s>=20},{id:"upgrade_regen_lvl5",label:"Регенерація рівень 20",condition:({regenSpeedLevel:s})=>s>=5},{id:"upgrade_regen_lvl20",label:"Регенерація рівень 20",condition:({regenSpeedLevel:s})=>s>=20}],oO={click_1000000:"gradient1",upgrade_multiplier_lvl120:"gradient2",upgrade_energy_lvl20:"gradient3"};function Pl({db:s,userId:e,initialized:t}){const[r,a]=F.useState(!0),[l,c]=F.useState(0),[d,m]=F.useState(0),[p,_]=F.useState(1),[T,w]=F.useState(""),[R,x]=F.useState(Fg),[U,L]=F.useState(1),[Q,re]=F.useState(1),[W,ce]=F.useState(!1),[le,ve]=F.useState(!1),[V,S]=F.useState([]),[I,O]=F.useState(null),[P,B]=F.useState([]),[D,Ce]=F.useState(!1),[be,Z]=F.useState(0),[ae,ge]=F.useState(0),[ze,N]=F.useState(0),[ne,he]=F.useState(0),[oe,Ae]=F.useState(null),[Pe,De]=F.useState(0),dt=`mainStats_${e}`,Oe=e&&s&&t,Un=F.useRef(Date.now()),Ve=pe=>s.collection("users").doc(String(e)).collection("stats").doc(pe),Wn=()=>s.collection("users").doc(String(e)),Bn=pe=>Fg*pe,xr=pe=>rO*pe,yr=pe=>1e3*Math.pow(2,pe);F.useEffect(()=>{if(!Oe)return;(async()=>{var de,Fe;try{const et=localStorage.getItem(dt);if(et){const ot=JSON.parse(et);c(ot.count??0),m(ot.totalCount??0),_(ot.multiplier??1),w(ot.username??""),x(ot.energy??Fg),L(ot.maxEnergyLevel??1),re(ot.regenSpeedLevel??1),O(ot.selectedSkin??null)}const[nt,Gt,Ht,Zt,Vt,_r,ni,Gs,zi,Jn,Dr]=await Promise.all([Ve("count").get(),Ve("multiplier").get(),Ve("totalCount").get(),Ve("username").get(),Ve("energy").get(),Ve("maxEnergyLevel").get(),Ve("regenSpeedLevel").get(),Wn().get(),Ve("achievements").get(),Ve("boost").get(),Ve("energyRegenCooldown").get()]),ji=nt.exists?nt.data().value:0,zn=Gt.exists?Gt.data().value:1,qi=Ht.exists?Ht.data().value:0,er=Zt.exists?Zt.data().value:"",vr=_r.exists?_r.data().value:1,tr=ni.exists?ni.data().value:1,Za=zi.exists?zi.data().value||[]:[];let We=Bn(vr);const Nt=xr(tr);if(Vt.exists){const ot=Vt.data(),gn=(ot==null?void 0:ot.value)??We;if((ot==null?void 0:ot.lastUpdated)instanceof Dt.firestore.Timestamp){const Tr=ot.lastUpdated.toMillis(),nr=Date.now(),rr=Math.floor((nr-Tr)/1e3);We=Math.min(Bn(vr),gn+rr*Nt)}else We=gn}const pt=Jn.exists?Jn.data():{},bn=Date.now();let Fi=!1,Wa=0,Er=0;if((de=pt.boostEndsAt)!=null&&de.toMillis){const ot=pt.boostEndsAt.toMillis(),gn=Math.floor((ot-bn)/1e3);Fi=gn>0,Wa=Math.max(gn,0)}if((Fe=pt.boostCooldownEndsAt)!=null&&Fe.toMillis){const ot=pt.boostCooldownEndsAt.toMillis(),gn=Math.floor((ot-bn)/1e3);Er=Math.max(gn,0)}Ce(Fi),Z(Wa),ge(Er),c(ji),m(qi),_(zn),x(We),L(vr),re(tr),B(Za),er?w(er):ce(!0),await Xa();const jn=Dt.firestore.FieldValue.serverTimestamp();Gs.exists||await Wn().set({createdAt:jn},{merge:!0}),nt.exists||await Ve("count").set({value:0,createdAt:jn}),Gt.exists||await Ve("multiplier").set({value:1,createdAt:jn}),Ht.exists||await Ve("totalCount").set({value:0,createdAt:jn}),Vt.exists||await Ve("energy").set({value:We,lastUpdated:jn,createdAt:jn}),_r.exists||await Ve("maxEnergyLevel").set({value:1,createdAt:jn}),ni.exists||await Ve("regenSpeedLevel").set({value:1,createdAt:jn}),localStorage.setItem(dt,JSON.stringify({count:ji,totalCount:qi,multiplier:zn,username:er,energy:We,maxEnergyLevel:vr,regenSpeedLevel:tr,selectedSkin:I}))}catch(et){console.error("[STATS] Завантаження помилка:",et)}finally{a(!1)}})()},[Oe]),F.useEffect(()=>{if(!Oe)return;const pe=setInterval(()=>{x(de=>{const Fe=Bn(U),et=xr(Q);if(de>=Fe)return de;const nt=Math.min(Fe,de+et),Gt=Date.now();if(Gt-Un.current>=sO){const Ht=Dt.firestore.FieldValue.serverTimestamp();Ve("energy").set({value:nt,updatedAt:Ht,lastUpdated:Ht},{merge:!0}),Un.current=Gt,localStorage.setItem(dt,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:nt,maxEnergyLevel:U,regenSpeedLevel:Q,selectedSkin:I}))}return nt})},iO);return()=>clearInterval(pe)},[Oe,l,d,p,T,U,Q,I]);const js=()=>{if(R<=0)return;D||x(de=>Math.max(0,de-1));const pe=D?p*10:p;c(de=>de+pe),m(de=>de+pe),ve(!0)};F.useEffect(()=>{if(!le||!Oe)return;const pe=setTimeout(()=>{const de=Dt.firestore.FieldValue.serverTimestamp(),Fe=Dt.firestore.Timestamp.now();Promise.all([Ve("count").set({value:l,updatedAt:de},{merge:!0}),Ve("totalCount").set({value:d,updatedAt:de},{merge:!0}),Ve("energy").set({value:R,updatedAt:de,lastUpdated:Fe},{merge:!0})]).then(()=>ve(!1)),localStorage.setItem(dt,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:R,maxEnergyLevel:U,regenSpeedLevel:Q,selectedSkin:I}))},200);return()=>clearTimeout(pe)},[le,l,d,R,Oe,I]),F.useEffect(()=>{if(!Oe||!d)return;(async()=>{try{const de=Dt.firestore.FieldValue.serverTimestamp(),Fe=Ve("achievements"),et=await Fe.get(),nt=et.exists?et.data().value||[]:[],Ht=aO.filter(Vt=>Vt.condition({totalCount:d,energy:R,maxEnergyLevel:U,regenSpeedLevel:Q,multiplier:p})).map(Vt=>Vt.id).filter(Vt=>!nt.includes(Vt));Ht.length>0?(await Fe.set({value:Dt.firestore.FieldValue.arrayUnion(...Ht),updatedAt:de},{merge:!0}),B([...nt,...Ht])):B(nt);const Zt=Ht.map(Vt=>oO[Vt]).filter(Boolean).filter(Vt=>!V.includes(Vt));Zt.length>0&&(await Ve("ownedSkins").set({value:Dt.firestore.FieldValue.arrayUnion(...Zt),updatedAt:de},{merge:!0}),S([...V,...Zt]))}catch(de){console.error("[ACHIEVEMENTS] Помилка при оновленні:",de)}})()},[d,Oe,R,U,Q,p,V]),F.useEffect(()=>{if(!Oe)return;const pe=localStorage.getItem(dt);if(pe){const de=JSON.parse(pe);localStorage.setItem(dt,JSON.stringify({...de,selectedSkin:I}))}},[I,Oe]);const Ya=async pe=>{if(!pe.trim())return;const de=Dt.firestore.FieldValue.serverTimestamp();await Ve("username").set({value:pe,updatedAt:de,createdAt:de}),w(pe),ce(!1)},Vn=async()=>{const pe=yr(U);if(l<pe)return;const de=U+1,Fe=Dt.firestore.FieldValue.serverTimestamp();await Ve("maxEnergyLevel").set({value:de,updatedAt:Fe},{merge:!0}),c(et=>et-pe),L(de)},kl=async()=>{const pe=yr(Q);if(l<pe)return;const de=Q+1,Fe=Dt.firestore.FieldValue.serverTimestamp();await Ve("regenSpeedLevel").set({value:de,updatedAt:Fe},{merge:!0}),c(et=>et-pe),re(de)};F.useEffect(()=>{if(!Oe)return;(async()=>{try{const de=Ve("ownedSkins"),Fe=Ve("selectedSkin"),[et,nt]=await Promise.all([de.get(),Fe.get()]),Gt=Dt.firestore.FieldValue.serverTimestamp();et.exists?S(et.data().value||[]):(await de.set({value:["default"],createdAt:Gt}),S(["default"])),nt.exists?O(nt.data().value||null):(await Fe.set({value:"default",createdAt:Gt}),O("default"))}catch(de){console.error("[STORE] Помилка при завантаженні скінів:",de)}})()},[Oe]);const qs=async(pe,de)=>{if(V.includes(pe)||l<de)return;const Fe=[...V,pe],et=Dt.firestore.FieldValue.serverTimestamp();await Ve("ownedSkins").set({value:Fe,updatedAt:et},{merge:!0}),S(Fe),c(nt=>nt-de)},Ui=async pe=>{if(!V.includes(pe))return;const de=Dt.firestore.FieldValue.serverTimestamp();await Ve("selectedSkin").set({value:pe,updatedAt:de},{merge:!0}),O(pe)};F.useEffect(()=>{if(!Oe||!D)return;(async()=>{const de=Dt.firestore.FieldValue.serverTimestamp();await Ve("boost").set({active:D,remainingTime:be,cooldown:ae,updatedAt:de},{merge:!0}),localStorage.setItem(dt,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:R,maxEnergyLevel:U,regenSpeedLevel:Q,selectedSkin:I,boostActive:D,boostRemainingTime:be,boostCooldown:ae}))})()},[D,be,ae,Oe]);const ei=()=>{const pe=Date.now();if(ae>0||D)return;const de=30*1e3,Fe=3600*1e3,et=pe+de,nt=et+Fe;Ce(!0),Z(30),ge(3600),Ve("boost").set({active:!0,boostEndsAt:new Date(et),boostCooldownEndsAt:new Date(nt),updatedAt:Dt.firestore.FieldValue.serverTimestamp()},{merge:!0})};F.useEffect(()=>{const pe=setInterval(()=>{D?(Z(de=>Math.max(de-1,0)),be<=1&&Ce(!1)):ae>0&&ge(de=>Math.max(de-1,0))},1e3);return()=>clearInterval(pe)},[D,be,ae]);const ti=pe=>{const de=Math.floor(pe/60).toString().padStart(2,"0"),Fe=(pe%60).toString().padStart(2,"0");return`${de}:${Fe}`},Bi=ti(be),Fs=ti(ae),Xa=async()=>{try{const pe=await Ve("energyRegenCooldown").get();if(pe.exists){const de=pe.data();if(de!=null&&de.lastRegenTime){const Fe=de.lastRegenTime,et=Math.floor((Date.now()-Fe)/1e3),nt=Math.max(Gg-et,0),Gt=ti(nt);Ae(Fe),he(nt)}}}catch(pe){console.error("Failed to fetch regen cooldown:",pe)}},_t=ti(ne),Ze=async()=>{if(R>=Bn(U))return;const pe=Date.now();if(!(!oe||pe-oe>=Gg*1e3))return;const Fe=Dt.firestore.FieldValue.serverTimestamp(),et=Bn(U);x(et),Ae(pe),he(Gg),await Ve("energy").set({value:et,updatedAt:Fe,lastUpdated:Fe},{merge:!0}),await Ve("energyRegenCooldown").set({lastRegenTime:pe},{merge:!0})};return F.useEffect(()=>{const pe=setInterval(()=>{he(de=>Math.max(de-1,0))},1e3);return()=>clearInterval(pe)},[]),{loading:r,count:l,totalCount:d,multiplier:p,username:T,showUsernameForm:W,setShowUsernameForm:ce,increment:js,saveUsername:Ya,energy:R,setEnergy:x,maxEnergyLevel:U,regenSpeedLevel:Q,upgradeMaxEnergy:Vn,upgradeRegenSpeed:kl,getUpgradeCost:yr,setMultiplier:_,setMaxEnergyLevel:L,setRegenSpeedLevel:re,setCount:c,ownedSkins:V,selectedSkin:I,buySkin:qs,selectSkin:Ui,achievements:P,setAchievements:B,boostActive:D,boostRemainingTime:be,boostCooldown:ae,activateBoost:ei,formattedBoostTime:Bi,formattedCooldown:Fs,energyRegenCooldown:ne,handleRegenEnergy:Ze,lastRegenTime:oe,formatTime:ti,formattedenergyCooldown:_t}}const bc="/clicker/assets/diamondpurple-DhR782hw.png",NS="/clicker/assets/bluediamond-DAS_-C76.png",OS="/clicker/assets/pinkdiamond-BhPCZE2S.png",MS="/clicker/assets/rubydiamond-BNEjWxti.png",PS="/clicker/assets/greendiamond-D3yAmbbI.png",kS="/clicker/assets/orangediamond-BGEiZPPy.png",LS="/clicker/assets/diamondgradiend1-3jbRu0wC.png",US="/clicker/assets/diamondgradiend2-CLCBil5L.png",BS="/clicker/assets/diamondgradiend3-D0RBMDbD.png",Al="/clicker/assets/settingsbutton-C3nhi6W5.png",lO={default:bc,blue:NS,pink:OS,ruby:MS,green:PS,orange:kS,gradient1:LS,gradient2:US,gradient3:BS};function uO(s){return new Promise(e=>{const t=lO[s]||bc,r=localStorage.getItem(`clickImage_${s}`);if(r)e(r);else{const a=new Image;a.src=t,a.onload=()=>e(a.src),a.onerror=()=>e(bc)}})}function cO({userId:s,db:e,initialized:t}){const[r,a]=F.useState(""),[l,c]=F.useState(null),[d,m]=F.useState(!1),p=F.useMemo(()=>{try{const Ce=localStorage.getItem(`mainStats_${s}`);if(Ce)return JSON.parse(Ce).selectedSkin||"default"}catch{}return"default"},[s]),{count:_,multiplier:T,username:w,showUsernameForm:R,increment:x,saveUsername:U,energy:L,setEnergy:Q,maxEnergyLevel:re,selectedSkin:W,boostActive:ce,boostCooldown:le,activateBoost:ve,formattedBoostTime:V,formattedCooldown:S,energyRegenCooldown:I,handleRegenEnergy:O,formattedenergyCooldown:P}=Pl({db:e,userId:s,initialized:t});F.useEffect(()=>{(async()=>{if(!localStorage.getItem("clickImage_default")){const ae=await(await fetch(bc)).blob(),ge=new FileReader;ge.onloadend=()=>{localStorage.setItem("clickImage_default",ge.result)},ge.readAsDataURL(ae)}})()},[]),F.useEffect(()=>{uO(W||p||"default").then(be=>{c(be),m(!0)})},[W,p]);const B=Ce=>{const be=T??1;if(L>=be||ce){ce||Q(N=>Math.max(0,N-be)),x();const Z=Ce.currentTarget.getBoundingClientRect(),ae=Ce.clientX-Z.left,ge=Ce.clientY-Z.top,ze=Math.floor(ce?be*10:be);D(`+${ze}`,ae,ge)}},D=(Ce,be,Z)=>{const ae=document.getElementById("floating-numbers-container");if(!ae)return;const ge=document.createElement("div");ge.className="floating-number",ge.textContent=Ce;const ze=Math.random()*30-15,N=Math.random()*30-15;ge.style.left=`${be+ze}px`,ge.style.top=`${Z+N}px`,ae.appendChild(ge),setTimeout(()=>ge.remove(),1e3)};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left"}),k.jsx("div",{className:"header-center",children:w&&d?w:""}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsxs("div",{className:"wrapper",children:[R&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal",children:[k.jsx("h2",{children:"Введіть свій нікнейм"}),k.jsx("input",{type:"text",value:r,onChange:Ce=>a(Ce.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),k.jsx("button",{className:"menu-button",onClick:()=>U(r),children:"Зберегти"})]})}),k.jsx("div",{className:"logo-image-wrapper",style:{backgroundImage:`url(${nO})`}}),k.jsxs("div",{className:"clicker-container",children:[k.jsxs("p",{className:"clicker-text",children:["Монети: ",k.jsx("strong",{children:_??0})]}),d&&k.jsxs("div",{className:"clicker-wrapper",children:[k.jsx("div",{className:`clicker-img ${L===0?"disabled":""}`,onClick:L>0?B:void 0,onContextMenu:Ce=>Ce.preventDefault(),style:{backgroundImage:`url(${l})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"160px",height:"160px",opacity:L===0?.5:1,cursor:L===0?"not-allowed":"pointer",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},role:"button","aria-disabled":L===0}),k.jsx("div",{id:"floating-numbers-container",className:"floating-container"})]}),k.jsx("p",{className:"clicker-text",children:k.jsxs("strong",{children:[L??0,"/",(re??1)*1e3,"⚡️"]})}),k.jsxs("div",{className:"booster-button-group",children:[k.jsx("div",{className:"booster-button-container",children:k.jsx("button",{onClick:ve,disabled:ce||le>0,className:`booster-button 
                  ${ce?"active":""}
                  ${le>0?"cooldown":""}
                  ${!ce&&le===0?"ready":""}
                `,children:ce?k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"Буст активний"}),k.jsx("span",{className:"cooldown-timer",children:V})]}):le>0?k.jsxs(k.Fragment,{children:[k.jsx("span",{children:"Тимчасовий множник"}),k.jsx("span",{className:"cooldown-timer",children:S})]}):k.jsx("span",{children:"Тимчасовий множник"})})}),k.jsx("div",{className:"booster-button-container",children:k.jsxs("button",{onClick:O,disabled:I>0,className:`booster-button
                  ${I>0?"cooldown":"ready"}
                `,children:[k.jsx("span",{children:"Відновлення енергії"}),I>0&&k.jsx("span",{className:"cooldown-timer",children:P})]})})]})]}),k.jsxs("div",{className:"button-group fade-in",children:[k.jsx(an,{to:"/upgrade",children:k.jsx("button",{className:"menu-button",children:"Покращення"})}),k.jsx(an,{to:"/shop",children:k.jsx("button",{className:"menu-button",children:"Магазин"})}),k.jsx(an,{to:"/achievements",children:k.jsx("button",{className:"menu-button",children:"Досягнення"})}),k.jsx(an,{to:"/leaderboard",children:k.jsx("button",{className:"menu-button",children:"Топ"})})]})]})]})}const hO="/clicker/assets/upgrade-CJRUvsqd.png",fO="/clicker/assets/multiplierclicks-tZKAk3yr.png",dO="/clicker/assets/maxenergy-guOvq93r.png",mO="/clicker/assets/energyregeneration-DYBrYNJV.png";function gO({userId:s,db:e,initialized:t}){const{count:r,multiplier:a,setCount:l,setMultiplier:c,maxEnergyLevel:d,regenSpeedLevel:m,setMaxEnergyLevel:p,setRegenSpeedLevel:_}=Pl({db:e,userId:s,initialized:t}),[T,w]=F.useState(!1),[R,x]=F.useState(r),[U,L]=F.useState(a),[Q,re]=F.useState(d),[W,ce]=F.useState(m);F.useEffect(()=>x(r),[r]),F.useEffect(()=>L(a),[a]),F.useEffect(()=>re(d),[d]),F.useEffect(()=>ce(m),[m]);const le=(P,B)=>Math.floor(B*Math.pow(P,2)),ve=le(U||1,100),V=le(Q||1,100),S=le(W||2,100),I=async P=>{const D={multiplier:{level:U,cost:ve,onUpgrade:async be=>{await e.collection("users").doc(String(s)).collection("stats").doc("multiplier").set({value:be,updatedAt:new Date},{merge:!0}),c(be),L(be)}},maxEnergy:{level:Q,cost:V,onUpgrade:async be=>{await e.collection("users").doc(String(s)).collection("stats").doc("maxEnergyLevel").set({value:be,updatedAt:new Date},{merge:!0}),p(be),re(be)}},regenSpeed:{level:W,cost:S,onUpgrade:async be=>{await e.collection("users").doc(String(s)).collection("stats").doc("regenSpeedLevel").set({value:be,updatedAt:new Date},{merge:!0}),_(be),ce(be)}}}[P],Ce=D.cost;if(R>=Ce){const be=D.level+1;await Promise.all([e.collection("users").doc(String(s)).collection("stats").doc("count").set({value:R-Ce,updatedAt:new Date},{merge:!0}),D.onUpgrade(be)]),l(R-Ce),x(R-Ce)}else w(!0)},O=[{type:"multiplier",title:"Множник кліку",level:U,cost:ve,bg:fO,desc:`Покращити за
 ${ve} монет`},{type:"maxEnergy",title:"Макс. енергія",level:Q,cost:V,bg:dO,desc:`Покращити за
 ${V} монет`},{type:"regenSpeed",title:"Регенерація",level:W,cost:S,bg:mO,desc:`Покращити за
 ${S} монет`}];return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})}),k.jsx("div",{className:"header-center"}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsxs("div",{className:"wrapper",children:[k.jsx("div",{className:"upgrade-image-wrapper",style:{backgroundImage:`url(${hO})`}}),k.jsxs("p",{className:"clicker-text",children:["Монети: ",k.jsx("strong",{children:R??"..."})]}),k.jsx("div",{className:"upgrade-container",children:k.jsx("div",{className:"upgrade-grid",children:O.map(({type:P,title:B,desc:D,bg:Ce,level:be,cost:Z})=>k.jsxs("div",{className:"upgrade-card",onClick:()=>I(P),children:[k.jsxs("div",{className:"level-badge",children:["lvl ",be]}),k.jsx("div",{className:"upgrade-card-img",style:{backgroundImage:`url(${Ce})`}}),k.jsx("p",{className:"upgrade-title",children:B}),D.split(`
`).map((ae,ge)=>k.jsx("p",{children:ae},ge))]},P))})})]}),T&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal",children:[k.jsx("h3",{children:"Недостатньо монет!"}),k.jsx("button",{className:"menu-button",onClick:()=>w(!1),children:"Ок"})]})})]})}const pO="/clicker/assets/leaderboard-eL_LwdNf.png";function yO({userId:s,db:e,initialized:t}){const[r,a]=F.useState([]),[l,c]=F.useState(!0),d=e&&t;Pl({db:e,userId:s,initialized:t}),F.useEffect(()=>{if(!d)return;(async()=>{try{const _=await e.collection("users").get(),T=[];for(const w of _.docs){const R=e.collection("users").doc(w.id).collection("stats"),x=await R.get(),U={};x.forEach(Q=>{U[Q.id]=Q.data().value});const L=[];if(U.username===void 0){const Q=`Гравець-${w.id.slice(0,4)}`;L.push(R.doc("username").set({value:Q})),U.username=Q}U.totalCount===void 0&&(L.push(R.doc("totalCount").set({value:0})),U.totalCount=0),U.multiplier===void 0&&(L.push(R.doc("multiplier").set({value:1})),U.multiplier=1),L.length>0&&await Promise.all(L),T.push({userId:w.id,username:U.username,totalCount:U.totalCount,multiplier:U.multiplier})}T.sort((w,R)=>R.totalCount-w.totalCount),a(T)}catch(_){console.error("[ЛІДЕРБОРД] Помилка завантаження:",_)}finally{c(!1)}})()},[d]);let m={};if(l)m={top10:Array.from({length:10},(p,_)=>({userId:`loading-${_}`,username:"...",totalCount:"...",multiplier:"...",place:_+1,isCurrentUser:!1})),currentUser:null};else{const p=r.map((R,x)=>({...R,place:x+1,isCurrentUser:R.userId==s})),_=p.slice(0,10),w=_.some(R=>R.userId==s)?null:p.find(R=>R.userId==s);m={top10:_,currentUser:w}}return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsx("div",{className:"wrapper",children:k.jsxs("div",{className:"leaderboard",children:[k.jsx("div",{className:"leaderboard-title-img",style:{backgroundImage:`url(${pO})`}}),k.jsxs("div",{className:"leaderboard-header",children:[k.jsx("span",{children:"🏅"}),k.jsx("span",{children:"Ім’я"}),k.jsx("span",{children:"Зароблено"})]}),k.jsxs("div",{className:"leaderboard-container",children:[m.top10.map((p,_)=>k.jsxs("div",{className:`leaderboard-row ${p.place===1?"gold":p.place===2?"silver":p.place===3?"bronze":""} ${p.isCurrentUser?"highlight-row":""}`,children:[k.jsx("span",{children:p.place}),k.jsx("span",{children:p.username}),k.jsx("span",{children:p.totalCount})]},`${p.userId}-${_}`)),m.currentUser&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"leaderboard-divider"}),k.jsxs("div",{className:"leaderboard-row highlight-row",children:[k.jsx("span",{children:m.currentUser.place}),k.jsx("span",{children:m.currentUser.username}),k.jsx("span",{children:m.currentUser.totalCount})]},`${m.currentUser.userId}-current`)]})]})]})})]})}const _O="/clicker/assets/Shop-DMGheY5Z.png";function vO({db:s,userId:e,initialized:t}){const{count:r,setCount:a}=Pl({db:s,userId:e,initialized:t}),[l,c]=F.useState(null),[d,m]=F.useState([]),[p,_]=F.useState(!1),T=[{id:"default",title:"Фіолетовий",image:bc,cost:0},{id:"blue",title:"Блакитний",image:NS,cost:1e4},{id:"pink",title:"Рожевий",image:OS,cost:1e4},{id:"ruby",title:"Рубін",image:MS,cost:1e4},{id:"green",title:"Зелений",image:PS,cost:1e4},{id:"orange",title:"Помаранчевий",image:kS,cost:1e4},{id:"gradient1",title:"Градіент",image:LS},{id:"gradient2",title:"Градіент",image:US},{id:"gradient3",title:"Градіент",image:BS}],w=["gradient1","gradient2","gradient3"];F.useEffect(()=>{(async()=>{const U=await s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").get(),L=await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").get();U.exists&&m(U.data().value||[]),L.exists&&c(L.data().value)})()},[s,e]);const R=async x=>{if(d.includes(x.id)){await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:x.id,updatedAt:new Date},{merge:!0}),c(x.id);return}if(!w.includes(x.id))if(r>=x.cost){const U=r-x.cost,L=[...d,x.id];await Promise.all([s.collection("users").doc(String(e)).collection("stats").doc("count").set({value:U,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").set({value:L,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:x.id,updatedAt:new Date},{merge:!0})]),a(U),m(L),c(x.id)}else _(!0)};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsxs("div",{className:"wrapper",children:[k.jsx("div",{className:"shop-title-img",style:{backgroundImage:`url(${_O})`}}),k.jsxs("p",{className:"shop-balance",children:["Монети: ",k.jsx("strong",{children:r})]}),k.jsx("div",{className:"shop-container",children:k.jsx("div",{className:"shop-grid",children:T.map(x=>k.jsxs("div",{className:`shop-card ${l===x.id?"selected":""}`,onClick:()=>R(x),children:[k.jsx("div",{className:"shop-card-img",style:{backgroundImage:`url(${x.image})`}}),k.jsxs("div",{className:"shop-card-content",children:[k.jsx("p",{className:"shop-card-title",children:x.title}),d.includes(x.id)?k.jsx("p",{className:"shop-owned",children:l===x.id?"Обрано":"Натисни, щоб обрати"}):x.id.startsWith("gradient")?k.jsxs("div",{className:"shop-achievement",children:[k.jsx("p",{children:"Для отримання"}),k.jsx("p",{children:"виконайте досягнення:"}),k.jsx("p",{children:k.jsxs("strong",{children:[x.id==="gradient1"&&"1 000 000 кліків",x.id==="gradient2"&&"Множник lvl 20",x.id==="gradient3"&&"Кількісь енергії lvl 20"]})})]}):k.jsxs("p",{className:"shop-cost",children:["Придбати за ",x.cost," монет"]})]})]},x.id))})})]}),p&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal",children:[k.jsx("h3",{children:"Недостатньо монет!"}),k.jsx("button",{className:"menu-button",onClick:()=>_(!1),children:"Ок"})]})})]})}function EO({db:s,userId:e,initialized:t}){const{username:r,showUsernameForm:a,setShowUsernameForm:l,saveUsername:c}=Pl({db:s,userId:e,initialized:t}),[d,m]=F.useState(r),p=()=>{m(r),l(!0)};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"header",children:k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})})}),k.jsxs("div",{className:"wrapper",children:[k.jsx("h2",{className:"clicker-text",children:"Налаштування"}),k.jsx("div",{className:"settings-section",children:k.jsxs("p",{className:"clicker-text",children:["ID: ",k.jsx("strong",{children:e})]})}),k.jsx("div",{className:"settings-section",children:k.jsx("button",{className:"menu-button",onClick:p,children:"Змінити нікнейм"})}),a&&k.jsx("div",{className:"modal-backdrop",children:k.jsxs("div",{className:"modal",children:[k.jsx("h2",{children:"Введіть свій нікнейм"}),k.jsx("input",{type:"text",value:d,onChange:_=>m(_.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),k.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[k.jsx("button",{className:"menu-button",onClick:()=>c(d),children:"Зберегти"}),k.jsx("button",{className:"menu-button cancel",onClick:()=>l(!1),style:{marginLeft:10},children:"Скасувати"})]})]})})]})]})}const ab="/clicker/assets/achievements-BtcYMwsE.png",TO=[{id:"click_1000",label:"1 000 кліків"},{id:"click_10000",label:"10 000 кліків"},{id:"click_100000",label:"100 000 кліків"},{id:"click_500000",label:"500 000 кліків"},{id:"click_1000000",label:"1 000 000 кліків"},{id:"upgrade_multiplier_lvl5",label:"Множник lvl 5"},{id:"upgrade_multiplier_lvl120",label:"Множник lvl 20"},{id:"upgrade_energy_lvl5",label:"Кількісь енергії lvl 5"},{id:"upgrade_energy_lvl20",label:"Кількісь енергії lvl 20"},{id:"upgrade_regen_lvl5",label:"Регенерація енергії lvl 5"},{id:"upgrade_regen_lvl20",label:"Регенерація енергії lvl 20"}];function bO({userId:s,db:e,initialized:t}){const{achievements:r,loading:a}=Pl({db:e,userId:s,initialized:t});return a?k.jsxs("div",{className:"wrapper",children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsx("div",{className:"avhievements-title-img",style:{backgroundImage:`url(${ab})`}}),k.jsx("p",{className:"achievements-loading",children:"Завантаження досягнень..."})]}):k.jsx(k.Fragment,{children:k.jsxs("div",{className:"wrapper",children:[k.jsxs("div",{className:"header",children:[k.jsx("div",{className:"header-left",children:k.jsx(an,{to:"/",className:"header-button",children:"←"})}),k.jsx("div",{className:"header-right",children:k.jsx(an,{to:"/settings",className:"settings-button",children:k.jsx("div",{className:"settings-icon",style:{backgroundImage:`url(${Al})`}})})})]}),k.jsx("div",{className:"achievements-title-img",style:{backgroundImage:`url(${ab})`}}),k.jsxs("div",{className:"achievements",children:[k.jsxs("div",{className:"achievements-header",children:[k.jsx("span",{children:"🏆"}),k.jsx("span",{children:"Досягнення"}),k.jsx("span",{children:"Статус"})]}),k.jsx("div",{className:"achievements-container",children:TO.map(({id:l,label:c})=>{const d=r.includes(l);return k.jsxs("div",{className:`achievements-row ${d?"achievements-completed":""}`,children:[k.jsx("span",{children:"🏅"}),k.jsx("span",{className:"achievement-title",children:c}),k.jsx("span",{className:"achievement-status",children:d?"Виконано":"Не виконано"})]},l)})})]})]})})}function wO(){const s=Q1(),{initialized:e,db:t}=tO();return s&&e&&t?k.jsx(k1,{basename:"/clicker",children:k.jsxs(f1,{children:[k.jsx(Ea,{path:"/",element:k.jsx(cO,{userId:s,db:t,initialized:e})}),k.jsx(Ea,{path:"/upgrade",element:k.jsx(gO,{userId:s,db:t,initialized:e})}),k.jsx(Ea,{path:"/leaderboard",element:k.jsx(yO,{userId:s,db:t,initialized:e})}),k.jsx(Ea,{path:"/shop",element:k.jsx(vO,{userId:s,db:t,initialized:e})}),k.jsx(Ea,{path:"/settings",element:k.jsx(EO,{db:t,userId:s,initialized:e})}),k.jsx(Ea,{path:"/achievements",element:k.jsx(bO,{db:t,userId:s,initialized:e})})]})}):k.jsx("div",{className:"wrapper",children:k.jsx("p",{children:"Завантаження…"})})}TI.createRoot(document.getElementById("root")).render(k.jsx(dI.StrictMode,{children:k.jsx(wO,{})}));
