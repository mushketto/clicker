(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function eA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var _g={exports:{}},bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function XR(){if(JE)return bu;JE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return bu.Fragment=t,bu.jsx=e,bu.jsxs=e,bu}var tT;function ZR(){return tT||(tT=1,_g.exports=XR()),_g.exports}var Ht=ZR(),vg={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function WR(){if(eT)return It;eT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,G={};function z(x,et,ct){this.props=x,this.context=et,this.refs=G,this.updater=ct||D}z.prototype.isReactComponent={},z.prototype.setState=function(x,et){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,et,"setState")},z.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function Y(){}Y.prototype=z.prototype;function it(x,et,ct){this.props=x,this.context=et,this.refs=G,this.updater=ct||D}var Z=it.prototype=new Y;Z.constructor=it,N(Z,z.prototype),Z.isPureReactComponent=!0;var dt=Array.isArray,ht={H:null,A:null,T:null,S:null,V:null},vt=Object.prototype.hasOwnProperty;function V(x,et,ct,st,Et,Ct){return ct=Ct.ref,{$$typeof:s,type:x,key:et,ref:ct!==void 0?ct:null,props:Ct}}function S(x,et){return V(x.type,et,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===s}function M(x){var et={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ct){return et[ct]})}var P=/\/+/g;function k(x,et){return typeof x=="object"&&x!==null&&x.key!=null?M(""+x.key):et.toString(36)}function C(){}function Qe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(C,C):(x.status="pending",x.then(function(et){x.status==="pending"&&(x.status="fulfilled",x.value=et)},function(et){x.status==="pending"&&(x.status="rejected",x.reason=et)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function ge(x,et,ct,st,Et){var Ct=typeof x;(Ct==="undefined"||Ct==="boolean")&&(x=null);var St=!1;if(x===null)St=!0;else switch(Ct){case"bigint":case"string":case"number":St=!0;break;case"object":switch(x.$$typeof){case s:case t:St=!0;break;case _:return St=x._init,ge(St(x._payload),et,ct,st,Et)}}if(St)return Et=Et(x),St=st===""?"."+k(x,0):st,dt(Et)?(ct="",St!=null&&(ct=St.replace(P,"$&/")+"/"),ge(Et,et,ct,"",function(nr){return nr})):Et!=null&&(R(Et)&&(Et=S(Et,ct+(Et.key==null||x&&x.key===Et.key?"":(""+Et.key).replace(P,"$&/")+"/")+St)),et.push(Et)),1;St=0;var Ue=st===""?".":st+":";if(dt(x))for(var ne=0;ne<x.length;ne++)st=x[ne],Ct=Ue+k(st,ne),St+=ge(st,et,ct,Ct,Et);else if(ne=b(x),typeof ne=="function")for(x=ne.call(x),ne=0;!(st=x.next()).done;)st=st.value,Ct=Ue+k(st,ne++),St+=ge(st,et,ct,Ct,Et);else if(Ct==="object"){if(typeof x.then=="function")return ge(Qe(x),et,ct,st,Et);throw et=String(x),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return St}function $(x,et,ct){if(x==null)return x;var st=[],Et=0;return ge(x,st,"","",function(Ct){return et.call(ct,Ct,Et++)}),st}function lt(x){if(x._status===-1){var et=x._result;et=et(),et.then(function(ct){(x._status===0||x._status===-1)&&(x._status=1,x._result=ct)},function(ct){(x._status===0||x._status===-1)&&(x._status=2,x._result=ct)}),x._status===-1&&(x._status=0,x._result=et)}if(x._status===1)return x._result.default;throw x._result}var _t=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Ft(){}return It.Children={map:$,forEach:function(x,et,ct){$(x,function(){et.apply(this,arguments)},ct)},count:function(x){var et=0;return $(x,function(){et++}),et},toArray:function(x){return $(x,function(et){return et})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},It.Component=z,It.Fragment=e,It.Profiler=a,It.PureComponent=it,It.StrictMode=r,It.Suspense=m,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,It.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ht.H.useMemoCache(x)}},It.cache=function(x){return function(){return x.apply(null,arguments)}},It.cloneElement=function(x,et,ct){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var st=N({},x.props),Et=x.key,Ct=void 0;if(et!=null)for(St in et.ref!==void 0&&(Ct=void 0),et.key!==void 0&&(Et=""+et.key),et)!vt.call(et,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&et.ref===void 0||(st[St]=et[St]);var St=arguments.length-2;if(St===1)st.children=ct;else if(1<St){for(var Ue=Array(St),ne=0;ne<St;ne++)Ue[ne]=arguments[ne+2];st.children=Ue}return V(x.type,Et,void 0,void 0,Ct,st)},It.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},It.createElement=function(x,et,ct){var st,Et={},Ct=null;if(et!=null)for(st in et.key!==void 0&&(Ct=""+et.key),et)vt.call(et,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(Et[st]=et[st]);var St=arguments.length-2;if(St===1)Et.children=ct;else if(1<St){for(var Ue=Array(St),ne=0;ne<St;ne++)Ue[ne]=arguments[ne+2];Et.children=Ue}if(x&&x.defaultProps)for(st in St=x.defaultProps,St)Et[st]===void 0&&(Et[st]=St[st]);return V(x,Ct,void 0,void 0,null,Et)},It.createRef=function(){return{current:null}},It.forwardRef=function(x){return{$$typeof:d,render:x}},It.isValidElement=R,It.lazy=function(x){return{$$typeof:_,_payload:{_status:-1,_result:x},_init:lt}},It.memo=function(x,et){return{$$typeof:p,type:x,compare:et===void 0?null:et}},It.startTransition=function(x){var et=ht.T,ct={};ht.T=ct;try{var st=x(),Et=ht.S;Et!==null&&Et(ct,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Ft,_t)}catch(Ct){_t(Ct)}finally{ht.T=et}},It.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},It.use=function(x){return ht.H.use(x)},It.useActionState=function(x,et,ct){return ht.H.useActionState(x,et,ct)},It.useCallback=function(x,et){return ht.H.useCallback(x,et)},It.useContext=function(x){return ht.H.useContext(x)},It.useDebugValue=function(){},It.useDeferredValue=function(x,et){return ht.H.useDeferredValue(x,et)},It.useEffect=function(x,et,ct){var st=ht.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(x,et)},It.useId=function(){return ht.H.useId()},It.useImperativeHandle=function(x,et,ct){return ht.H.useImperativeHandle(x,et,ct)},It.useInsertionEffect=function(x,et){return ht.H.useInsertionEffect(x,et)},It.useLayoutEffect=function(x,et){return ht.H.useLayoutEffect(x,et)},It.useMemo=function(x,et){return ht.H.useMemo(x,et)},It.useOptimistic=function(x,et){return ht.H.useOptimistic(x,et)},It.useReducer=function(x,et,ct){return ht.H.useReducer(x,et,ct)},It.useRef=function(x){return ht.H.useRef(x)},It.useState=function(x){return ht.H.useState(x)},It.useSyncExternalStore=function(x,et,ct){return ht.H.useSyncExternalStore(x,et,ct)},It.useTransition=function(){return ht.H.useTransition()},It.version="19.1.0",It}var nT;function Tp(){return nT||(nT=1,vg.exports=WR()),vg.exports}var W=Tp();const JR=eA(W);var Eg={exports:{}},wu={},Tg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function tI(){return rT||(rT=1,function(s){function t($,lt){var _t=$.length;$.push(lt);t:for(;0<_t;){var Ft=_t-1>>>1,x=$[Ft];if(0<a(x,lt))$[Ft]=lt,$[_t]=x,_t=Ft;else break t}}function e($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var lt=$[0],_t=$.pop();if(_t!==lt){$[0]=_t;t:for(var Ft=0,x=$.length,et=x>>>1;Ft<et;){var ct=2*(Ft+1)-1,st=$[ct],Et=ct+1,Ct=$[Et];if(0>a(st,_t))Et<x&&0>a(Ct,st)?($[Ft]=Ct,$[Et]=_t,Ft=Et):($[Ft]=st,$[ct]=_t,Ft=ct);else if(Et<x&&0>a(Ct,_t))$[Ft]=Ct,$[Et]=_t,Ft=Et;else break t}}return lt}function a($,lt){var _t=$.sortIndex-lt.sortIndex;return _t!==0?_t:$.id-lt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,b=3,D=!1,N=!1,G=!1,z=!1,Y=typeof setTimeout=="function"?setTimeout:null,it=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function dt($){for(var lt=e(p);lt!==null;){if(lt.callback===null)r(p);else if(lt.startTime<=$)r(p),lt.sortIndex=lt.expirationTime,t(m,lt);else break;lt=e(p)}}function ht($){if(G=!1,dt($),!N)if(e(m)!==null)N=!0,vt||(vt=!0,k());else{var lt=e(p);lt!==null&&ge(ht,lt.startTime-$)}}var vt=!1,V=-1,S=5,R=-1;function M(){return z?!0:!(s.unstable_now()-R<S)}function P(){if(z=!1,vt){var $=s.unstable_now();R=$;var lt=!0;try{t:{N=!1,G&&(G=!1,it(V),V=-1),D=!0;var _t=b;try{e:{for(dt($),T=e(m);T!==null&&!(T.expirationTime>$&&M());){var Ft=T.callback;if(typeof Ft=="function"){T.callback=null,b=T.priorityLevel;var x=Ft(T.expirationTime<=$);if($=s.unstable_now(),typeof x=="function"){T.callback=x,dt($),lt=!0;break e}T===e(m)&&r(m),dt($)}else r(m);T=e(m)}if(T!==null)lt=!0;else{var et=e(p);et!==null&&ge(ht,et.startTime-$),lt=!1}}break t}finally{T=null,b=_t,D=!1}lt=void 0}}finally{lt?k():vt=!1}}}var k;if(typeof Z=="function")k=function(){Z(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Qe=C.port2;C.port1.onmessage=P,k=function(){Qe.postMessage(null)}}else k=function(){Y(P,0)};function ge($,lt){V=Y(function(){$(s.unstable_now())},lt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function($){switch(b){case 1:case 2:case 3:var lt=3;break;default:lt=b}var _t=b;b=lt;try{return $()}finally{b=_t}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function($,lt){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var _t=b;b=$;try{return lt()}finally{b=_t}},s.unstable_scheduleCallback=function($,lt,_t){var Ft=s.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Ft+_t:Ft):_t=Ft,$){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=_t+x,$={id:_++,callback:lt,priorityLevel:$,startTime:_t,expirationTime:x,sortIndex:-1},_t>Ft?($.sortIndex=_t,t(p,$),e(m)===null&&$===e(p)&&(G?(it(V),V=-1):G=!0,ge(ht,_t-Ft))):($.sortIndex=x,t(m,$),N||D||(N=!0,vt||(vt=!0,k()))),$},s.unstable_shouldYield=M,s.unstable_wrapCallback=function($){var lt=b;return function(){var _t=b;b=lt;try{return $.apply(this,arguments)}finally{b=_t}}}}(Ag)),Ag}var iT;function eI(){return iT||(iT=1,Tg.exports=tI()),Tg.exports}var bg={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function nI(){if(sT)return rn;sT=1;var s=Tp();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,_)},rn.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},rn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},rn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},rn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:D}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},rn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},rn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},rn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},rn.requestFormReset=function(m){r.d.r(m)},rn.unstable_batchedUpdates=function(m,p){return m(p)},rn.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var aT;function rI(){if(aT)return bg.exports;aT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),bg.exports=nI(),bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function iI(){if(oT)return wu;oT=1;var s=eI(),t=Tp(),e=rI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),it=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case z:return"Profiler";case G:return"StrictMode";case ht:return"Suspense";case vt:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case Z:return(n.displayName||"Context")+".Provider";case it:return(n._context.displayName||"Context")+".Consumer";case dt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return i=n.displayName||null,i!==null?i:Qe(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return Qe(n(i))}catch{}}return null}var ge=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},Ft=[],x=-1;function et(n){return{current:n}}function ct(n){0>x||(n.current=Ft[x],Ft[x]=null,x--)}function st(n,i){x++,Ft[x]=n.current,n.current=i}var Et=et(null),Ct=et(null),St=et(null),Ue=et(null);function ne(n,i){switch(st(St,i),st(Ct,n),st(Et,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?IE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=IE(i),n=DE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ct(Et),st(Et,n)}function nr(){ct(Et),ct(Ct),ct(St)}function gi(n){n.memoizedState!==null&&st(Ue,n);var i=Et.current,o=DE(i,n.type);i!==o&&(st(Ct,n),st(Et,o))}function Vr(n){Ct.current===n&&(ct(Et),ct(Ct)),Ue.current===n&&(ct(Ue),_u._currentValue=_t)}var ys=Object.prototype.hasOwnProperty,_s=s.unstable_scheduleCallback,vs=s.unstable_cancelCallback,gl=s.unstable_shouldYield,Ic=s.unstable_requestPaint,Mn=s.unstable_now,_d=s.unstable_getCurrentPriorityLevel,pl=s.unstable_ImmediatePriority,Va=s.unstable_UserBlockingPriority,Es=s.unstable_NormalPriority,vd=s.unstable_LowPriority,xa=s.unstable_IdlePriority,yl=s.log,Dc=s.unstable_setDisableYieldValue,pe=null,Qt=null;function bn(n){if(typeof yl=="function"&&Dc(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(pe,n)}catch{}}var en=Math.clz32?Math.clz32:Ts,Cc=Math.log,Ed=Math.LN2;function Ts(n){return n>>>=0,n===0?32:31-(Cc(n)/Ed|0)|0}var As=256,bs=4194304;function $n(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Na(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=$n(u):(E&=A,E!==0?f=$n(E):o||(o=A&~n,o!==0&&(f=$n(o))))):(A=u&~g,A!==0?f=$n(A):E!==0?f=$n(E):o||(o=u&~n,o!==0&&(f=$n(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function ws(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function _l(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vl(){var n=As;return As<<=1,(As&4194048)===0&&(As=256),n}function El(){var n=bs;return bs<<=1,(bs&62914560)===0&&(bs=4194304),n}function xr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Nr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Tl(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,I=n.expirationTimes,F=n.hiddenUpdates;for(o=E&~o;0<o;){var X=31-en(o),tt=1<<X;A[X]=0,I[X]=-1;var j=F[X];if(j!==null)for(F[X]=null,X=0;X<j.length;X++){var H=j[X];H!==null&&(H.lane&=-536870913)}o&=~tt}u!==0&&rr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function rr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-en(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Al(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-en(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function pi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Oa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function yi(){var n=lt.p;return n!==0?n:(n=window.event,n===void 0?32:KE(n.type))}function Vc(n,i){var o=lt.p;try{return lt.p=n,i()}finally{lt.p=o}}var ae=Math.random().toString(36).slice(2),Ne="__reactFiber$"+ae,Re="__reactProps$"+ae,Pn="__reactContainer$"+ae,bl="__reactEvents$"+ae,Td="__reactListeners$"+ae,_i="__reactHandles$"+ae,xc="__reactResources$"+ae,Ss="__reactMarker$"+ae;function vi(n){delete n[Ne],delete n[Re],delete n[bl],delete n[Td],delete n[_i]}function Or(n){var i=n[Ne];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Pn]||o[Ne]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=NE(n);n!==null;){if(o=n[Ne])return o;n=NE(n)}return i}n=o,o=n.parentNode}return null}function ir(n){if(n=n[Ne]||n[Pn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function sr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function un(n){var i=n[xc];return i||(i=n[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ee(n){n[Ss]=!0}var wl=new Set,Ma={};function Xn(n,i){Mr(n,i),Mr(n+"Capture",i)}function Mr(n,i){for(Ma[n]=i,n=0;n<i.length;n++)wl.add(i[n])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oc={},Rs={};function Mc(n){return ys.call(Rs,n)?!0:ys.call(Oc,n)?!1:Nc.test(n)?Rs[n]=!0:(Oc[n]=!0,!1)}function Ei(n,i,o){if(Mc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function ar(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ke(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var Is,Pc;function Pr(n){if(Is===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Is=i&&i[1]||"",Pc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+n+Pc}var Pa=!1;function La(n,i){if(!n||Pa)return"";Pa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(H){var j=H}Reflect.construct(n,[],tt)}else{try{tt.call()}catch(H){j=H}n.call(tt.prototype)}}else{try{throw Error()}catch(H){j=H}(tt=n())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(H){if(H&&j&&typeof H.stack=="string")return[H.stack,j.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var I=E.split(`
`),F=A.split(`
`);for(f=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===I.length||f===F.length)for(u=I.length-1,f=F.length-1;1<=u&&0<=f&&I[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(I[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||I[u]!==F[f]){var X=`
`+I[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{Pa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Pr(o):""}function Sl(n){switch(n.tag){case 26:case 27:case 5:return Pr(n.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 15:return La(n.type,!1);case 11:return La(n.type.render,!1);case 1:return La(n.type,!0);case 31:return Pr("Activity");default:return""}}function ka(n){try{var i="";do i+=Sl(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Rl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ad(n){var i=Rl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ua(n){n._valueTracker||(n._valueTracker=Ad(n))}function Il(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Rl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ds(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var bd=/[\n"\\]/g;function Ie(n){return n.replace(bd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wn(n,i,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+cn(i)):n.value!==""+cn(i)&&(n.value=""+cn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Ti(n,E,cn(i)):o!=null?Ti(n,E,cn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+cn(A):n.removeAttribute("name")}function Cs(n,i,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+cn(o):"",i=i!=null?""+cn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ti(n,i,o){i==="number"&&Ds(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Lr(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+cn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Zt(n,i,o){if(i!=null&&(i=""+cn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+cn(o):""}function Vs(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(ge(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=cn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Ln(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var xs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||xs.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Dl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Lc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&Lc(n,g,i[g])}function Cl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(n){return Sd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var kr=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ur=null,Br=null;function Vl(n){var i=ir(n);if(i&&(n=i.stateNode)){var o=n[Re]||null;t:switch(n=i.stateNode,i.type){case"input":if(wn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ie(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[Re]||null;if(!f)throw Error(r(90));wn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Il(u)}break t;case"textarea":Zt(n,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Lr(n,!!o.multiple,i,!1)}}}var or=!1;function kc(n,i,o){if(or)return n(i,o);or=!0;try{var u=n(i);return u}finally{if(or=!1,(Ur!==null||Br!==null)&&(Vh(),Ur&&(i=Ur,n=Br,Br=Ur=null,Vl(i),n)))for(i=0;i<n.length;i++)Vl(n[i])}}function Ns(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Re]||null;if(u===null)return null;o=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(Zn)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){Un=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{Un=!1}var lr=null,Ai=null,zr=null;function xl(){if(zr)return zr;var n,i=Ai,o=i.length,u,f="value"in lr?lr.value:lr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return zr=f.slice(n,1<u?1-u:void 0)}function ur(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function cr(){return!0}function Nl(){return!1}function Be(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?cr:Nl,this.isPropagationStopped=Nl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=Be(Gt),Ms=_({},Gt,{view:0,detail:0}),Uc=Be(Ms),qa,Fa,hr,Ps=_({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hr&&(hr&&n.type==="mousemove"?(qa=n.screenX-hr.screenX,Fa=n.screenY-hr.screenY):Fa=qa=0,hr=n),qa)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),Bn=Be(Ps),Bc=_({},Ps,{dataTransfer:0}),Rd=Be(Bc),Ls=_({},Ms,{relatedTarget:0}),ja=Be(Ls),Ol=_({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Be(Ol),zc=_({},Gt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ha=Be(zc),Id=_({},Gt,{data:0}),Ml=Be(Id),ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Fc[n])?!!i[n]:!1}function Us(){return Pl}var jc=_({},Ms,{key:function(n){if(n.key){var i=ks[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ur(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(n){return n.type==="keypress"?ur(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ur(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qa=Be(jc),Gc=_({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ll=Be(Gc),qr=_({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),Hc=Be(qr),Qc=_({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kc=Be(Qc),Yc=_({},Ps,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Be(Yc),hn=_({},Gt,{newState:0,oldState:0}),$c=Be(hn),Xc=[9,13,27,32],fr=Zn&&"CompositionEvent"in window,h=null;Zn&&"documentMode"in document&&(h=document.documentMode);var y=Zn&&"TextEvent"in window&&!h,v=Zn&&(!fr||h&&8<h&&11>=h),w=" ",U=!1;function K(n,i){switch(n){case"keyup":return Xc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function at(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Lt=!1;function Oe(n,i){switch(n){case"compositionend":return at(i);case"keypress":return i.which!==32?null:(U=!0,w);case"textInput":return n=i.data,n===w&&U?null:n;default:return null}}function kt(n,i){if(Lt)return n==="compositionend"||!fr&&K(n,i)?(n=xl(),zr=Ai=lr=null,Lt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ze[n.type]:i==="textarea"}function Fr(n,i,o,u){Ur?Br?Br.push(u):Br=[u]:Ur=u,i=Lh(i,"onChange"),0<i.length&&(o=new za("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Ye=null,dr=null;function kl(n){AE(n,0)}function Zc(n){var i=sr(n);if(Il(i))return n}function jy(n,i){if(n==="change")return i}var Gy=!1;if(Zn){var Dd;if(Zn){var Cd="oninput"in document;if(!Cd){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),Cd=typeof Hy.oninput=="function"}Dd=Cd}else Dd=!1;Gy=Dd&&(!document.documentMode||9<document.documentMode)}function Qy(){Ye&&(Ye.detachEvent("onpropertychange",Ky),dr=Ye=null)}function Ky(n){if(n.propertyName==="value"&&Zc(dr)){var i=[];Fr(i,dr,n,kn(n)),kc(kl,i)}}function RS(n,i,o){n==="focusin"?(Qy(),Ye=i,dr=o,Ye.attachEvent("onpropertychange",Ky)):n==="focusout"&&Qy()}function IS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zc(dr)}function DS(n,i){if(n==="click")return Zc(i)}function CS(n,i){if(n==="input"||n==="change")return Zc(i)}function VS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:VS;function Ul(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ys.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function Yy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $y(n,i){var o=Yy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Yy(o)}}function Xy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Xy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Zy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ds(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ds(n.document)}return i}function Vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var xS=Zn&&"documentMode"in document&&11>=document.documentMode,Ya=null,xd=null,Bl=null,Nd=!1;function Wy(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Nd||Ya==null||Ya!==Ds(u)||(u=Ya,"selectionStart"in u&&Vd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&Ul(Bl,u)||(Bl=u,u=Lh(xd,"onSelect"),0<u.length&&(i=new za("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Ya)))}function Bs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var $a={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},Od={},Jy={};Zn&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function zs(n){if(Od[n])return Od[n];if(!$a[n])return n;var i=$a[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Jy)return Od[n]=i[o];return n}var t_=zs("animationend"),e_=zs("animationiteration"),n_=zs("animationstart"),NS=zs("transitionrun"),OS=zs("transitionstart"),MS=zs("transitioncancel"),r_=zs("transitionend"),i_=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function Wn(n,i){i_.set(n,i),Xn(i,[n])}var s_=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var o=s_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:ka(i)},s_.set(n,i),i)}return{value:n,source:i,stack:ka(i)}}var qn=[],Xa=0,Pd=0;function Wc(){for(var n=Xa,i=Pd=Xa=0;i<n;){var o=qn[i];qn[i++]=null;var u=qn[i];qn[i++]=null;var f=qn[i];qn[i++]=null;var g=qn[i];if(qn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&a_(o,f,g)}}function Jc(n,i,o,u){qn[Xa++]=n,qn[Xa++]=i,qn[Xa++]=o,qn[Xa++]=u,Pd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ld(n,i,o,u){return Jc(n,i,o,u),th(n)}function Za(n,i){return Jc(n,null,null,i),th(n)}function a_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-en(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function th(n){if(50<cu)throw cu=0,Fm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Wa={};function PS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,i,o,u){return new PS(n,i,o,u)}function kd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jr(n,i){var o=n.alternate;return o===null?(o=Rn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function o_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function eh(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")kd(n)&&(E=1);else if(typeof n=="string")E=kR(n,o,Et.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case R:return n=Rn(31,o,i,f),n.elementType=R,n.lanes=g,n;case N:return qs(o.children,f,g,i);case G:E=8,f|=24;break;case z:return n=Rn(12,o,i,f|2),n.elementType=z,n.lanes=g,n;case ht:return n=Rn(13,o,i,f),n.elementType=ht,n.lanes=g,n;case vt:return n=Rn(19,o,i,f),n.elementType=vt,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:case Z:E=10;break t;case it:E=9;break t;case dt:E=11;break t;case V:E=14;break t;case S:E=16,u=null;break t}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=Rn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function qs(n,i,o,u){return n=Rn(7,n,u,i),n.lanes=o,n}function Ud(n,i,o){return n=Rn(6,n,null,i),n.lanes=o,n}function Bd(n,i,o){return i=Rn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ja=[],to=0,nh=null,rh=0,Fn=[],jn=0,Fs=null,Gr=1,Hr="";function js(n,i){Ja[to++]=rh,Ja[to++]=nh,nh=n,rh=i}function l_(n,i,o){Fn[jn++]=Gr,Fn[jn++]=Hr,Fn[jn++]=Fs,Fs=n;var u=Gr;n=Hr;var f=32-en(u)-1;u&=~(1<<f),o+=1;var g=32-en(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Gr=1<<32-en(i)+f|o<<f|u,Hr=g+n}else Gr=1<<g|o<<f|u,Hr=n}function zd(n){n.return!==null&&(js(n,1),l_(n,1,0))}function qd(n){for(;n===nh;)nh=Ja[--to],Ja[to]=null,rh=Ja[--to],Ja[to]=null;for(;n===Fs;)Fs=Fn[--jn],Fn[jn]=null,Hr=Fn[--jn],Fn[jn]=null,Gr=Fn[--jn],Fn[jn]=null}var fn=null,ye=null,jt=!1,Gs=null,mr=!1,Fd=Error(r(519));function Hs(n){var i=Error(r(418,""));throw Fl(zn(i,n)),Fd}function u_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Ne]=n,i[Re]=u,o){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(o=0;o<fu.length;o++)Nt(fu[o],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),Cs(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ua(i);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),Vs(i,u.value,u.defaultValue,u.children),Ua(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||RE(i.textContent,o)?(u.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),u.onScroll!=null&&Nt("scroll",i),u.onScrollEnd!=null&&Nt("scrollend",i),u.onClick!=null&&(i.onclick=kh),i=!0):i=!1,i||Hs(n)}function c_(n){for(fn=n.return;fn;)switch(fn.tag){case 5:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:fn=fn.return}}function zl(n){if(n!==fn)return!1;if(!jt)return c_(n),jt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||ig(n.type,n.memoizedProps)),o=!o),o&&ye&&Hs(n),c_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){ye=tr(n.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}ye=null}}else i===27?(i=ye,Ui(n.type)?(n=lg,lg=null,ye=n):ye=i):ye=fn?tr(n.stateNode.nextSibling):null;return!0}function ql(){ye=fn=null,jt=!1}function h_(){var n=Gs;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Gs=null),n}function Fl(n){Gs===null?Gs=[n]:Gs.push(n)}var jd=et(null),Qs=null,Qr=null;function bi(n,i,o){st(jd,i._currentValue),i._currentValue=o}function Kr(n){n._currentValue=jd.current,ct(jd)}function Gd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Hd(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=f;for(var I=0;I<i.length;I++)if(A.context===i[I]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Gd(g.return,o,n),u||(E=null);break t}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Gd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function jl(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Sn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ue.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(_u):n=[_u])}f=f.return}n!==null&&Hd(i,n,o,u),i.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ks(n){Qs=n,Qr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return f_(Qs,n)}function sh(n,i){return Qs===null&&Ks(n),f_(n,i)}function f_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Qr===null){if(n===null)throw Error(r(308));Qr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Qr=Qr.next=i;return o}var LS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},kS=s.unstable_scheduleCallback,US=s.unstable_NormalPriority,Pe={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new LS,data:new Map,refCount:0}}function Gl(n){n.refCount--,n.refCount===0&&kS(US,function(){n.controller.abort()})}var Hl=null,Kd=0,eo=0,no=null;function BS(n,i){if(Hl===null){var o=Hl=[];Kd=0,eo=$m(),no={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Kd++,i.then(d_,d_),i}function d_(){if(--Kd===0&&Hl!==null){no!==null&&(no.status="fulfilled");var n=Hl;Hl=null,eo=0,no=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function zS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var m_=$.S;$.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&BS(n,i),m_!==null&&m_(n,i)};var Ys=et(null);function Yd(){var n=Ys.current;return n!==null?n:re.pooledCache}function ah(n,i){i===null?st(Ys,Ys.current):st(Ys,i.pool)}function g_(){var n=Yd();return n===null?null:{parent:Pe._currentValue,pool:n}}var Ql=Error(r(460)),p_=Error(r(474)),oh=Error(r(542)),$d={then:function(){}};function y_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function lh(){}function __(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(lh,lh),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,E_(n),n;default:if(typeof i.status=="string")i.then(lh,lh);else{if(n=re,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,E_(n),n}throw Kl=i,Ql}}var Kl=null;function v_(){if(Kl===null)throw Error(r(459));var n=Kl;return Kl=null,n}function E_(n){if(n===Ql||n===oh)throw Error(r(483))}var wi=!1;function Xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Si(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ri(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Kt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=th(n),a_(n,null,o),i}return Jc(n,u,i,o),th(n)}function Yl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Al(n,o)}}function Wd(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Jd=!1;function $l(){if(Jd){var n=no;if(n!==null)throw n}}function Xl(n,i,o,u){Jd=!1;var f=n.updateQueue;wi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var I=A,F=I.next;I.next=null,E===null?g=F:E.next=F,E=I;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==E&&(A===null?X.firstBaseUpdate=F:A.next=F,X.lastBaseUpdate=I))}if(g!==null){var tt=f.baseState;E=0,X=F=I=null,A=g;do{var j=A.lane&-536870913,H=j!==A.lane;if(H?(Ut&j)===j:(u&j)===j){j!==0&&j===eo&&(Jd=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var wt=n,Tt=A;j=i;var te=o;switch(Tt.tag){case 1:if(wt=Tt.payload,typeof wt=="function"){tt=wt.call(te,tt,j);break t}tt=wt;break t;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Tt.payload,j=typeof wt=="function"?wt.call(te,tt,j):wt,j==null)break t;tt=_({},tt,j);break t;case 2:wi=!0}}j=A.callback,j!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[j]:H.push(j))}else H={lane:j,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(F=X=H,I=tt):X=X.next=H,E|=j;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);X===null&&(I=tt),f.baseState=I,f.firstBaseUpdate=F,f.lastBaseUpdate=X,g===null&&(f.shared.lanes=0),Mi|=E,n.lanes=E,n.memoizedState=tt}}function T_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function A_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)T_(o[n],i)}var ro=et(null),uh=et(0);function b_(n,i){n=ti,st(uh,n),st(ro,i),ti=n|i.baseLanes}function tm(){st(uh,ti),st(ro,ro.current)}function em(){ti=uh.current,ct(ro),ct(uh)}var Ii=0,Dt=null,Wt=null,De=null,ch=!1,io=!1,$s=!1,hh=0,Zl=0,so=null,qS=0;function Te(){throw Error(r(321))}function nm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Sn(n[o],i[o]))return!1;return!0}function rm(n,i,o,u,f,g){return Ii=g,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=n===null||n.memoizedState===null?av:ov,$s=!1,g=o(u,f),$s=!1,io&&(g=S_(i,o,u,f)),w_(n),g}function w_(n){$.H=yh;var i=Wt!==null&&Wt.next!==null;if(Ii=0,De=Wt=Dt=null,ch=!1,Zl=0,so=null,i)throw Error(r(300));n===null||qe||(n=n.dependencies,n!==null&&ih(n)&&(qe=!0))}function S_(n,i,o,u){Dt=n;var f=0;do{if(io&&(so=null),Zl=0,io=!1,25<=f)throw Error(r(301));if(f+=1,De=Wt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=YS,g=i(o,u)}while(io);return g}function FS(){var n=$.H,i=n.useState()[0];return i=typeof i.then=="function"?Wl(i):i,n=n.useState()[0],(Wt!==null?Wt.memoizedState:null)!==n&&(Dt.flags|=1024),i}function im(){var n=hh!==0;return hh=0,n}function sm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function am(n){if(ch){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ch=!1}Ii=0,De=Wt=Dt=null,io=!1,Zl=hh=0,so=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Dt.memoizedState=De=n:De=De.next=n,De}function Ce(){if(Wt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Wt.next;var i=De===null?Dt.memoizedState:De.next;if(i!==null)De=i,Wt=n;else{if(n===null)throw Dt.alternate===null?Error(r(467)):Error(r(310));Wt=n,n={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},De===null?Dt.memoizedState=De=n:De=De.next=n}return De}function om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(n){var i=Zl;return Zl+=1,so===null&&(so=[]),n=__(so,n,i),i=Dt,(De===null?i.memoizedState:De.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?av:ov),n}function fh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wl(n);if(n.$$typeof===Z)return nn(n)}throw Error(r(438,String(n)))}function lm(n){var i=null,o=Dt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=om(),Dt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=M;return i.index++,o}function Yr(n,i){return typeof i=="function"?i(n):i}function dh(n){var i=Ce();return um(i,Wt,n)}function um(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var A=E=null,I=null,F=i,X=!1;do{var tt=F.lane&-536870913;if(tt!==F.lane?(Ut&tt)===tt:(Ii&tt)===tt){var j=F.revertLane;if(j===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),tt===eo&&(X=!0);else if((Ii&j)===j){F=F.next,j===eo&&(X=!0);continue}else tt={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(A=I=tt,E=g):I=I.next=tt,Dt.lanes|=j,Mi|=j;tt=F.action,$s&&o(g,tt),g=F.hasEagerState?F.eagerState:o(g,tt)}else j={lane:tt,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(A=I=j,E=g):I=I.next=j,Dt.lanes|=tt,Mi|=tt;F=F.next}while(F!==null&&F!==i);if(I===null?E=g:I.next=A,!Sn(g,n.memoizedState)&&(qe=!0,X&&(o=no,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=I,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function cm(n){var i=Ce(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Sn(g,i.memoizedState)||(qe=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function R_(n,i,o){var u=Dt,f=Ce(),g=jt;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Sn((Wt||f).memoizedState,o);E&&(f.memoizedState=o,qe=!0),f=f.queue;var A=C_.bind(null,u,f,n);if(Jl(2048,8,A,[n]),f.getSnapshot!==i||E||De!==null&&De.memoizedState.tag&1){if(u.flags|=2048,ao(9,mh(),D_.bind(null,u,f,o,i),null),re===null)throw Error(r(349));g||(Ii&124)!==0||I_(u,i,o)}return o}function I_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Dt.updateQueue,i===null?(i=om(),Dt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function D_(n,i,o,u){i.value=o,i.getSnapshot=u,V_(i)&&x_(n)}function C_(n,i,o){return o(function(){V_(i)&&x_(n)})}function V_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Sn(n,o)}catch{return!0}}function x_(n){var i=Za(n,2);i!==null&&xn(i,n,2)}function hm(n){var i=yn();if(typeof n=="function"){var o=n;if(n=o(),$s){bn(!0);try{o()}finally{bn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:n},i}function N_(n,i,o,u){return n.baseState=o,um(n,Wt,typeof u=="function"?u:Yr)}function jS(n,i,o,u,f){if(ph(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};$.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,O_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function O_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=$.T,E={};$.T=E;try{var A=o(f,u),I=$.S;I!==null&&I(E,A),M_(n,i,A)}catch(F){fm(n,i,F)}finally{$.T=g}}else try{g=o(f,u),M_(n,i,g)}catch(F){fm(n,i,F)}}function M_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){P_(n,i,u)},function(u){return fm(n,i,u)}):P_(n,i,o)}function P_(n,i,o){i.status="fulfilled",i.value=o,L_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,O_(n,o)))}function fm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,L_(i),i=i.next;while(i!==u)}n.action=null}function L_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function k_(n,i){return i}function U_(n,i){if(jt){var o=re.formState;if(o!==null){t:{var u=Dt;if(jt){if(ye){e:{for(var f=ye,g=mr;f.nodeType!==8;){if(!g){f=null;break e}if(f=tr(f.nextSibling),f===null){f=null;break e}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){ye=tr(f.nextSibling),u=f.data==="F!";break t}}Hs(u)}u=!1}u&&(i=o[0])}}return o=yn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:i},o.queue=u,o=rv.bind(null,Dt,u),u.dispatch=o,u=hm(!1),g=ym.bind(null,Dt,!1,u.queue),u=yn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=jS.bind(null,Dt,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function B_(n){var i=Ce();return z_(i,Wt,n)}function z_(n,i,o){if(i=um(n,i,k_)[0],n=dh(Yr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Wl(i)}catch(E){throw E===Ql?oh:E}else u=i;i=Ce();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Dt.flags|=2048,ao(9,mh(),GS.bind(null,f,o),null)),[u,g,n]}function GS(n,i){n.action=i}function q_(n){var i=Ce(),o=Wt;if(o!==null)return z_(i,o,n);Ce(),i=i.memoizedState,o=Ce();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function ao(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=om(),Dt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function mh(){return{destroy:void 0,resource:void 0}}function F_(){return Ce().memoizedState}function gh(n,i,o,u){var f=yn();u=u===void 0?null:u,Dt.flags|=n,f.memoizedState=ao(1|i,mh(),o,u)}function Jl(n,i,o,u){var f=Ce();u=u===void 0?null:u;var g=f.memoizedState.inst;Wt!==null&&u!==null&&nm(u,Wt.memoizedState.deps)?f.memoizedState=ao(i,g,o,u):(Dt.flags|=n,f.memoizedState=ao(1|i,g,o,u))}function j_(n,i){gh(8390656,8,n,i)}function G_(n,i){Jl(2048,8,n,i)}function H_(n,i){return Jl(4,2,n,i)}function Q_(n,i){return Jl(4,4,n,i)}function K_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Y_(n,i,o){o=o!=null?o.concat([n]):null,Jl(4,4,K_.bind(null,i,n),o)}function dm(){}function $_(n,i){var o=Ce();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&nm(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function X_(n,i){var o=Ce();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&nm(i,u[1]))return u[0];if(u=n(),$s){bn(!0);try{n()}finally{bn(!1)}}return o.memoizedState=[u,i],u}function mm(n,i,o){return o===void 0||(Ii&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=Jv(),Dt.lanes|=n,Mi|=n,o)}function Z_(n,i,o,u){return Sn(o,i)?o:ro.current!==null?(n=mm(n,o,u),Sn(n,i)||(qe=!0),n):(Ii&42)===0?(qe=!0,n.memoizedState=o):(n=Jv(),Dt.lanes|=n,Mi|=n,i)}function W_(n,i,o,u,f){var g=lt.p;lt.p=g!==0&&8>g?g:8;var E=$.T,A={};$.T=A,ym(n,!1,i,o);try{var I=f(),F=$.S;if(F!==null&&F(A,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var X=zS(I,u);tu(n,i,X,Vn(n))}else tu(n,i,u,Vn(n))}catch(tt){tu(n,i,{then:function(){},status:"rejected",reason:tt},Vn())}finally{lt.p=g,$.T=E}}function HS(){}function gm(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=J_(n).queue;W_(n,f,i,_t,o===null?HS:function(){return tv(n),o(u)})}function J_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:_t},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yr,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function tv(n){var i=J_(n).next.queue;tu(n,i,{},Vn())}function pm(){return nn(_u)}function ev(){return Ce().memoizedState}function nv(){return Ce().memoizedState}function QS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Vn();n=Si(o);var u=Ri(i,n,o);u!==null&&(xn(u,i,o),Yl(u,i,o)),i={cache:Qd()},n.payload=i;return}i=i.return}}function KS(n,i,o){var u=Vn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},ph(n)?iv(i,o):(o=Ld(n,i,o,u),o!==null&&(xn(o,n,u),sv(o,i,u)))}function rv(n,i,o){var u=Vn();tu(n,i,o,u)}function tu(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(ph(n))iv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,Sn(A,E))return Jc(n,i,f,0),re===null&&Wc(),!1}catch{}finally{}if(o=Ld(n,i,f,u),o!==null)return xn(o,n,u),sv(o,i,u),!0}return!1}function ym(n,i,o,u){if(u={lane:2,revertLane:$m(),action:u,hasEagerState:!1,eagerState:null,next:null},ph(n)){if(i)throw Error(r(479))}else i=Ld(n,o,u,2),i!==null&&xn(i,n,2)}function ph(n){var i=n.alternate;return n===Dt||i!==null&&i===Dt}function iv(n,i){io=ch=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function sv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Al(n,o)}}var yh={readContext:nn,use:fh,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te},av={readContext:nn,use:fh,useCallback:function(n,i){return yn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:j_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,gh(4194308,4,K_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return gh(4194308,4,n,i)},useInsertionEffect:function(n,i){gh(4,2,n,i)},useMemo:function(n,i){var o=yn();i=i===void 0?null:i;var u=n();if($s){bn(!0);try{n()}finally{bn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=yn();if(o!==void 0){var f=o(i);if($s){bn(!0);try{o(i)}finally{bn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=KS.bind(null,Dt,n),[u.memoizedState,n]},useRef:function(n){var i=yn();return n={current:n},i.memoizedState=n},useState:function(n){n=hm(n);var i=n.queue,o=rv.bind(null,Dt,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:dm,useDeferredValue:function(n,i){var o=yn();return mm(o,n,i)},useTransition:function(){var n=hm(!1);return n=W_.bind(null,Dt,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Dt,f=yn();if(jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),re===null)throw Error(r(349));(Ut&124)!==0||I_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,j_(C_.bind(null,u,g,n),[n]),u.flags|=2048,ao(9,mh(),D_.bind(null,u,g,o,i),null),o},useId:function(){var n=yn(),i=re.identifierPrefix;if(jt){var o=Hr,u=Gr;o=(u&~(1<<32-en(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=hh++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=qS++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:pm,useFormState:U_,useActionState:U_,useOptimistic:function(n){var i=yn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=ym.bind(null,Dt,!0,o),o.dispatch=i,[n,i]},useMemoCache:lm,useCacheRefresh:function(){return yn().memoizedState=QS.bind(null,Dt)}},ov={readContext:nn,use:fh,useCallback:$_,useContext:nn,useEffect:G_,useImperativeHandle:Y_,useInsertionEffect:H_,useLayoutEffect:Q_,useMemo:X_,useReducer:dh,useRef:F_,useState:function(){return dh(Yr)},useDebugValue:dm,useDeferredValue:function(n,i){var o=Ce();return Z_(o,Wt.memoizedState,n,i)},useTransition:function(){var n=dh(Yr)[0],i=Ce().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:R_,useId:ev,useHostTransitionStatus:pm,useFormState:B_,useActionState:B_,useOptimistic:function(n,i){var o=Ce();return N_(o,Wt,n,i)},useMemoCache:lm,useCacheRefresh:nv},YS={readContext:nn,use:fh,useCallback:$_,useContext:nn,useEffect:G_,useImperativeHandle:Y_,useInsertionEffect:H_,useLayoutEffect:Q_,useMemo:X_,useReducer:cm,useRef:F_,useState:function(){return cm(Yr)},useDebugValue:dm,useDeferredValue:function(n,i){var o=Ce();return Wt===null?mm(o,n,i):Z_(o,Wt.memoizedState,n,i)},useTransition:function(){var n=cm(Yr)[0],i=Ce().memoizedState;return[typeof n=="boolean"?n:Wl(n),i]},useSyncExternalStore:R_,useId:ev,useHostTransitionStatus:pm,useFormState:q_,useActionState:q_,useOptimistic:function(n,i){var o=Ce();return Wt!==null?N_(o,Wt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:lm,useCacheRefresh:nv},oo=null,eu=0;function _h(n){var i=eu;return eu+=1,oo===null&&(oo=[]),__(oo,n,i)}function nu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function lv(n){var i=n._init;return i(n._payload)}function uv(n){function i(L,O){if(n){var q=L.deletions;q===null?(L.deletions=[O],L.flags|=16):q.push(O)}}function o(L,O){if(!n)return null;for(;O!==null;)i(L,O),O=O.sibling;return null}function u(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function f(L,O){return L=jr(L,O),L.index=0,L.sibling=null,L}function g(L,O,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<O?(L.flags|=67108866,O):q):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,O,q,J){return O===null||O.tag!==6?(O=Ud(q,L.mode,J),O.return=L,O):(O=f(O,q),O.return=L,O)}function I(L,O,q,J){var mt=q.type;return mt===N?X(L,O,q.props.children,J,q.key):O!==null&&(O.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===S&&lv(mt)===O.type)?(O=f(O,q.props),nu(O,q),O.return=L,O):(O=eh(q.type,q.key,q.props,null,L.mode,J),nu(O,q),O.return=L,O)}function F(L,O,q,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==q.containerInfo||O.stateNode.implementation!==q.implementation?(O=Bd(q,L.mode,J),O.return=L,O):(O=f(O,q.children||[]),O.return=L,O)}function X(L,O,q,J,mt){return O===null||O.tag!==7?(O=qs(q,L.mode,J,mt),O.return=L,O):(O=f(O,q),O.return=L,O)}function tt(L,O,q){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ud(""+O,L.mode,q),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return q=eh(O.type,O.key,O.props,null,L.mode,q),nu(q,O),q.return=L,q;case D:return O=Bd(O,L.mode,q),O.return=L,O;case S:var J=O._init;return O=J(O._payload),tt(L,O,q)}if(ge(O)||k(O))return O=qs(O,L.mode,q,null),O.return=L,O;if(typeof O.then=="function")return tt(L,_h(O),q);if(O.$$typeof===Z)return tt(L,sh(L,O),q);vh(L,O)}return null}function j(L,O,q,J){var mt=O!==null?O.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return mt!==null?null:A(L,O,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===mt?I(L,O,q,J):null;case D:return q.key===mt?F(L,O,q,J):null;case S:return mt=q._init,q=mt(q._payload),j(L,O,q,J)}if(ge(q)||k(q))return mt!==null?null:X(L,O,q,J,null);if(typeof q.then=="function")return j(L,O,_h(q),J);if(q.$$typeof===Z)return j(L,O,sh(L,q),J);vh(L,q)}return null}function H(L,O,q,J,mt){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(q)||null,A(O,L,""+J,mt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return L=L.get(J.key===null?q:J.key)||null,I(O,L,J,mt);case D:return L=L.get(J.key===null?q:J.key)||null,F(O,L,J,mt);case S:var Vt=J._init;return J=Vt(J._payload),H(L,O,q,J,mt)}if(ge(J)||k(J))return L=L.get(q)||null,X(O,L,J,mt,null);if(typeof J.then=="function")return H(L,O,q,_h(J),mt);if(J.$$typeof===Z)return H(L,O,q,sh(O,J),mt);vh(O,J)}return null}function wt(L,O,q,J){for(var mt=null,Vt=null,yt=O,At=O=0,je=null;yt!==null&&At<q.length;At++){yt.index>At?(je=yt,yt=null):je=yt.sibling;var zt=j(L,yt,q[At],J);if(zt===null){yt===null&&(yt=je);break}n&&yt&&zt.alternate===null&&i(L,yt),O=g(zt,O,At),Vt===null?mt=zt:Vt.sibling=zt,Vt=zt,yt=je}if(At===q.length)return o(L,yt),jt&&js(L,At),mt;if(yt===null){for(;At<q.length;At++)yt=tt(L,q[At],J),yt!==null&&(O=g(yt,O,At),Vt===null?mt=yt:Vt.sibling=yt,Vt=yt);return jt&&js(L,At),mt}for(yt=u(yt);At<q.length;At++)je=H(yt,L,At,q[At],J),je!==null&&(n&&je.alternate!==null&&yt.delete(je.key===null?At:je.key),O=g(je,O,At),Vt===null?mt=je:Vt.sibling=je,Vt=je);return n&&yt.forEach(function(ji){return i(L,ji)}),jt&&js(L,At),mt}function Tt(L,O,q,J){if(q==null)throw Error(r(151));for(var mt=null,Vt=null,yt=O,At=O=0,je=null,zt=q.next();yt!==null&&!zt.done;At++,zt=q.next()){yt.index>At?(je=yt,yt=null):je=yt.sibling;var ji=j(L,yt,zt.value,J);if(ji===null){yt===null&&(yt=je);break}n&&yt&&ji.alternate===null&&i(L,yt),O=g(ji,O,At),Vt===null?mt=ji:Vt.sibling=ji,Vt=ji,yt=je}if(zt.done)return o(L,yt),jt&&js(L,At),mt;if(yt===null){for(;!zt.done;At++,zt=q.next())zt=tt(L,zt.value,J),zt!==null&&(O=g(zt,O,At),Vt===null?mt=zt:Vt.sibling=zt,Vt=zt);return jt&&js(L,At),mt}for(yt=u(yt);!zt.done;At++,zt=q.next())zt=H(yt,L,At,zt.value,J),zt!==null&&(n&&zt.alternate!==null&&yt.delete(zt.key===null?At:zt.key),O=g(zt,O,At),Vt===null?mt=zt:Vt.sibling=zt,Vt=zt);return n&&yt.forEach(function($R){return i(L,$R)}),jt&&js(L,At),mt}function te(L,O,q,J){if(typeof q=="object"&&q!==null&&q.type===N&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:t:{for(var mt=q.key;O!==null;){if(O.key===mt){if(mt=q.type,mt===N){if(O.tag===7){o(L,O.sibling),J=f(O,q.props.children),J.return=L,L=J;break t}}else if(O.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===S&&lv(mt)===O.type){o(L,O.sibling),J=f(O,q.props),nu(J,q),J.return=L,L=J;break t}o(L,O);break}else i(L,O);O=O.sibling}q.type===N?(J=qs(q.props.children,L.mode,J,q.key),J.return=L,L=J):(J=eh(q.type,q.key,q.props,null,L.mode,J),nu(J,q),J.return=L,L=J)}return E(L);case D:t:{for(mt=q.key;O!==null;){if(O.key===mt)if(O.tag===4&&O.stateNode.containerInfo===q.containerInfo&&O.stateNode.implementation===q.implementation){o(L,O.sibling),J=f(O,q.children||[]),J.return=L,L=J;break t}else{o(L,O);break}else i(L,O);O=O.sibling}J=Bd(q,L.mode,J),J.return=L,L=J}return E(L);case S:return mt=q._init,q=mt(q._payload),te(L,O,q,J)}if(ge(q))return wt(L,O,q,J);if(k(q)){if(mt=k(q),typeof mt!="function")throw Error(r(150));return q=mt.call(q),Tt(L,O,q,J)}if(typeof q.then=="function")return te(L,O,_h(q),J);if(q.$$typeof===Z)return te(L,O,sh(L,q),J);vh(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,O!==null&&O.tag===6?(o(L,O.sibling),J=f(O,q),J.return=L,L=J):(o(L,O),J=Ud(q,L.mode,J),J.return=L,L=J),E(L)):o(L,O)}return function(L,O,q,J){try{eu=0;var mt=te(L,O,q,J);return oo=null,mt}catch(yt){if(yt===Ql||yt===oh)throw yt;var Vt=Rn(29,yt,null,L.mode);return Vt.lanes=J,Vt.return=L,Vt}finally{}}}var lo=uv(!0),cv=uv(!1),Gn=et(null),gr=null;function Di(n){var i=n.alternate;st(Le,Le.current&1),st(Gn,n),gr===null&&(i===null||ro.current!==null||i.memoizedState!==null)&&(gr=n)}function hv(n){if(n.tag===22){if(st(Le,Le.current),st(Gn,n),gr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(gr=n)}}else Ci()}function Ci(){st(Le,Le.current),st(Gn,Gn.current)}function $r(n){ct(Gn),gr===n&&(gr=null),ct(Le)}var Le=et(0);function Eh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||og(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function _m(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var vm={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Vn(),f=Si(u);f.payload=i,o!=null&&(f.callback=o),i=Ri(n,f,u),i!==null&&(xn(i,n,u),Yl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Vn(),f=Si(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Ri(n,f,u),i!==null&&(xn(i,n,u),Yl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Vn(),u=Si(o);u.tag=2,i!=null&&(u.callback=i),i=Ri(n,u,o),i!==null&&(xn(i,n,o),Yl(i,n,o))}};function fv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Ul(o,u)||!Ul(f,g):!0}function dv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&vm.enqueueReplaceState(i,i.state,null)}function Xs(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Th=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function mv(n){Th(n)}function gv(n){console.error(n)}function pv(n){Th(n)}function Ah(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function yv(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Em(n,i,o){return o=Si(o),o.tag=3,o.payload={element:null},o.callback=function(){Ah(n,i)},o}function _v(n){return n=Si(n),n.tag=3,n}function vv(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){yv(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){yv(i,o,u),typeof f!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function $S(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&jl(i,o,f,!0),o=Gn.current,o!==null){switch(o.tag){case 13:return gr===null?Gm():o.alternate===null&&_e===0&&(_e=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===$d?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Qm(n,u,f)),!1;case 22:return o.flags|=65536,u===$d?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Qm(n,u,f)),!1}throw Error(r(435,o.tag))}return Qm(n,u,f),Gm(),!1}if(jt)return i=Gn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Fd&&(n=Error(r(422),{cause:u}),Fl(zn(n,o)))):(u!==Fd&&(i=Error(r(423),{cause:u}),Fl(zn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=zn(u,o),f=Em(n.stateNode,u,f),Wd(n,f),_e!==4&&(_e=2)),!1;var g=Error(r(520),{cause:u});if(g=zn(g,o),uu===null?uu=[g]:uu.push(g),_e!==4&&(_e=2),i===null)return!0;u=zn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Em(o.stateNode,u,n),Wd(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Pi===null||!Pi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=_v(f),vv(f,n,o,u),Wd(o,f),!1}o=o.return}while(o!==null);return!1}var Ev=Error(r(461)),qe=!1;function $e(n,i,o,u){i.child=n===null?cv(i,null,o,u):lo(i,n.child,o,u)}function Tv(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return Ks(i),u=rm(n,i,o,E,g,f),A=im(),n!==null&&!qe?(sm(n,i,f),Xr(n,i,f)):(jt&&A&&zd(i),i.flags|=1,$e(n,i,u,f),i.child)}function Av(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!kd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,bv(n,i,g,u,f)):(n=eh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Dm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ul,o(E,u)&&n.ref===i.ref)return Xr(n,i,f)}return i.flags|=1,n=jr(g,u),n.ref=i.ref,n.return=i,i.child=n}function bv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(Ul(g,u)&&n.ref===i.ref)if(qe=!1,i.pendingProps=u=g,Dm(n,f))(n.flags&131072)!==0&&(qe=!0);else return i.lanes=n.lanes,Xr(n,i,f)}return Tm(n,i,o,u,f)}function wv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return Sv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ah(i,g!==null?g.cachePool:null),g!==null?b_(i,g):tm(),hv(i);else return i.lanes=i.childLanes=536870912,Sv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(ah(i,g.cachePool),b_(i,g),Ci(),i.memoizedState=null):(n!==null&&ah(i,null),tm(),Ci());return $e(n,i,f,o),i.child}function Sv(n,i,o,u){var f=Yd();return f=f===null?null:{parent:Pe._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&ah(i,null),tm(),hv(i),n!==null&&jl(n,i,u,!0),null}function bh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Tm(n,i,o,u,f){return Ks(i),o=rm(n,i,o,u,void 0,f),u=im(),n!==null&&!qe?(sm(n,i,f),Xr(n,i,f)):(jt&&u&&zd(i),i.flags|=1,$e(n,i,o,f),i.child)}function Rv(n,i,o,u,f,g){return Ks(i),i.updateQueue=null,o=S_(i,u,o,f),w_(n),u=im(),n!==null&&!qe?(sm(n,i,g),Xr(n,i,g)):(jt&&u&&zd(i),i.flags|=1,$e(n,i,o,g),i.child)}function Iv(n,i,o,u,f){if(Ks(i),i.stateNode===null){var g=Wa,E=o.contextType;typeof E=="object"&&E!==null&&(g=nn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vm,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Xd(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?nn(E):Wa,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(_m(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&vm.enqueueReplaceState(g,g.state,null),Xl(i,u,g,f),$l(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var A=i.memoizedProps,I=Xs(o,A);g.props=I;var F=g.context,X=o.contextType;E=Wa,typeof X=="object"&&X!==null&&(E=nn(X));var tt=o.getDerivedStateFromProps;X=typeof tt=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,X||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||F!==E)&&dv(i,g,u,E),wi=!1;var j=i.memoizedState;g.state=j,Xl(i,u,g,f),$l(),F=i.memoizedState,A||j!==F||wi?(typeof tt=="function"&&(_m(i,o,tt,u),F=i.memoizedState),(I=wi||fv(i,o,I,u,j,F,E))?(X||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),g.props=u,g.state=F,g.context=E,u=I):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Zd(n,i),E=i.memoizedProps,X=Xs(o,E),g.props=X,tt=i.pendingProps,j=g.context,F=o.contextType,I=Wa,typeof F=="object"&&F!==null&&(I=nn(F)),A=o.getDerivedStateFromProps,(F=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==tt||j!==I)&&dv(i,g,u,I),wi=!1,j=i.memoizedState,g.state=j,Xl(i,u,g,f),$l();var H=i.memoizedState;E!==tt||j!==H||wi||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof A=="function"&&(_m(i,o,A,u),H=i.memoizedState),(X=wi||fv(i,o,X,u,j,H,I)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,I)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=I,u=X):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,bh(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=lo(i,n.child,null,f),i.child=lo(i,null,o,f)):$e(n,i,o,f),i.memoizedState=g.state,n=i.child):n=Xr(n,i,f),n}function Dv(n,i,o,u){return ql(),i.flags|=256,$e(n,i,o,u),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bm(n){return{baseLanes:n,cachePool:g_()}}function wm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Hn),n}function Cv(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Le.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(jt){if(f?Di(i):Ci(),jt){var A=ye,I;if(I=A){t:{for(I=A,A=mr;I.nodeType!==8;){if(!A){A=null;break t}if(I=tr(I.nextSibling),I===null){A=null;break t}}A=I}A!==null?(i.memoizedState={dehydrated:A,treeContext:Fs!==null?{id:Gr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},I=Rn(18,null,null,0),I.stateNode=A,I.return=i,i.child=I,fn=i,ye=null,I=!0):I=!1}I||Hs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return og(A)?i.lanes=32:i.lanes=536870912,null;$r(i)}return A=u.children,u=u.fallback,f?(Ci(),f=i.mode,A=wh({mode:"hidden",children:A},f),u=qs(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=bm(o),f.childLanes=wm(n,E,o),i.memoizedState=Am,u):(Di(i),Sm(i,A))}if(I=n.memoizedState,I!==null&&(A=I.dehydrated,A!==null)){if(g)i.flags&256?(Di(i),i.flags&=-257,i=Rm(n,i,o)):i.memoizedState!==null?(Ci(),i.child=n.child,i.flags|=128,i=null):(Ci(),f=u.fallback,A=i.mode,u=wh({mode:"visible",children:u.children},A),f=qs(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,lo(i,n.child,null,o),u=i.child,u.memoizedState=bm(o),u.childLanes=wm(n,E,o),i.memoizedState=Am,i=f);else if(Di(i),og(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(r(419)),u.stack="",u.digest=E,Fl({value:u,source:null,stack:null}),i=Rm(n,i,o)}else if(qe||jl(n,i,o,!1),E=(o&n.childLanes)!==0,qe||E){if(E=re,E!==null&&(u=o&-o,u=(u&42)!==0?1:pi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==I.retryLane))throw I.retryLane=u,Za(n,u),xn(E,n,u),Ev;A.data==="$?"||Gm(),i=Rm(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=I.treeContext,ye=tr(A.nextSibling),fn=i,jt=!0,Gs=null,mr=!1,n!==null&&(Fn[jn++]=Gr,Fn[jn++]=Hr,Fn[jn++]=Fs,Gr=n.id,Hr=n.overflow,Fs=i),i=Sm(i,u.children),i.flags|=4096);return i}return f?(Ci(),f=u.fallback,A=i.mode,I=n.child,F=I.sibling,u=jr(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&65011712,F!==null?f=jr(F,f):(f=qs(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=n.child.memoizedState,A===null?A=bm(o):(I=A.cachePool,I!==null?(F=Pe._currentValue,I=I.parent!==F?{parent:F,pool:F}:I):I=g_(),A={baseLanes:A.baseLanes|o,cachePool:I}),f.memoizedState=A,f.childLanes=wm(n,E,o),i.memoizedState=Am,u):(Di(i),o=n.child,n=o.sibling,o=jr(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Sm(n,i){return i=wh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function wh(n,i){return n=Rn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Rm(n,i,o){return lo(i,n.child,null,o),n=Sm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Vv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Gd(n.return,i,o)}function Im(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function xv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if($e(n,i,u.children,o),u=Le.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vv(n,o,i);else if(n.tag===19)Vv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(st(Le,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Eh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Im(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Eh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Im(i,!0,o,null,g);break;case"together":Im(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xr(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Mi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(jl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=jr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=jr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Dm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function XS(n,i,o){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),bi(i,Pe,n.memoizedState.cache),ql();break;case 27:case 5:gi(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:bi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Di(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Cv(n,i,o):(Di(i),n=Xr(n,i,o),n!==null?n.sibling:null);Di(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(jl(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return xv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Le,Le.current),u)break;return null;case 22:case 23:return i.lanes=0,wv(n,i,o);case 24:bi(i,Pe,n.memoizedState.cache)}return Xr(n,i,o)}function Nv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)qe=!0;else{if(!Dm(n,o)&&(i.flags&128)===0)return qe=!1,XS(n,i,o);qe=(n.flags&131072)!==0}else qe=!1,jt&&(i.flags&1048576)!==0&&l_(i,rh,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")kd(u)?(n=Xs(u,n),i.tag=1,i=Iv(null,i,u,n,o)):(i.tag=0,i=Tm(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===dt){i.tag=11,i=Tv(null,i,u,n,o);break t}else if(f===V){i.tag=14,i=Av(null,i,u,n,o);break t}}throw i=Qe(u)||u,Error(r(306,i,""))}}return i;case 0:return Tm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Xs(u,i.pendingProps),Iv(n,i,u,f,o);case 3:t:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,Zd(n,i),Xl(i,u,null,o);var E=i.memoizedState;if(u=E.cache,bi(i,Pe,u),u!==g.cache&&Hd(i,[Pe],o,!0),$l(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Dv(n,i,u,o);break t}else if(u!==f){f=zn(Error(r(424)),i),Fl(f),i=Dv(n,i,u,o);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ye=tr(n.firstChild),fn=i,jt=!0,Gs=null,mr=!0,o=cv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ql(),u===f){i=Xr(n,i,o);break t}$e(n,i,u,o)}i=i.child}return i;case 26:return bh(n,i),n===null?(o=LE(i.type,null,i.pendingProps,null))?i.memoizedState=o:jt||(o=i.type,n=i.pendingProps,u=Uh(St.current).createElement(o),u[Ne]=i,u[Re]=n,Ze(u,o,n),Ee(u),i.stateNode=u):i.memoizedState=LE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return gi(i),n===null&&jt&&(u=i.stateNode=OE(i.type,i.pendingProps,St.current),fn=i,mr=!0,f=ye,Ui(i.type)?(lg=f,ye=tr(u.firstChild)):ye=f),$e(n,i,i.pendingProps.children,o),bh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&jt&&((f=u=ye)&&(u=wR(u,i.type,i.pendingProps,mr),u!==null?(i.stateNode=u,fn=i,ye=tr(u.firstChild),mr=!1,f=!0):f=!1),f||Hs(i)),gi(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,ig(f,g)?u=null:E!==null&&ig(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=rm(n,i,FS,null,null,o),_u._currentValue=f),bh(n,i),$e(n,i,u,o),i.child;case 6:return n===null&&jt&&((n=o=ye)&&(o=SR(o,i.pendingProps,mr),o!==null?(i.stateNode=o,fn=i,ye=null,n=!0):n=!1),n||Hs(i)),null;case 13:return Cv(n,i,o);case 4:return ne(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=lo(i,null,u,o):$e(n,i,u,o),i.child;case 11:return Tv(n,i,i.type,i.pendingProps,o);case 7:return $e(n,i,i.pendingProps,o),i.child;case 8:return $e(n,i,i.pendingProps.children,o),i.child;case 12:return $e(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,bi(i,i.type,u.value),$e(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Ks(i),f=nn(f),u=u(f),i.flags|=1,$e(n,i,u,o),i.child;case 14:return Av(n,i,i.type,i.pendingProps,o);case 15:return bv(n,i,i.type,i.pendingProps,o);case 19:return xv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=wh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=jr(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return wv(n,i,o);case 24:return Ks(i),u=nn(Pe),n===null?(f=Yd(),f===null&&(f=re,g=Qd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},Xd(i),bi(i,Pe,f)):((n.lanes&o)!==0&&(Zd(n,i),Xl(i,null,null,o),$l()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),bi(i,Pe,u)):(u=g.cache,bi(i,Pe,u),u!==f.cache&&Hd(i,[Pe],o,!0))),$e(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Zr(n){n.flags|=4}function Ov(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!qE(i)){if(i=Gn.current,i!==null&&((Ut&4194048)===Ut?gr!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==gr))throw Kl=$d,p_;n.flags|=8192}}function Sh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?El():536870912,n.lanes|=i,fo|=i)}function ru(n,i){if(!jt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function fe(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function ZS(n,i,o){var u=i.pendingProps;switch(qd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(i),null;case 1:return fe(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Kr(Pe),nr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(zl(i)?Zr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,h_())),fe(i),null;case 26:return o=i.memoizedState,n===null?(Zr(i),o!==null?(fe(i),Ov(i,o)):(fe(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Zr(i),fe(i),Ov(i,o)):(fe(i),i.flags&=-16777217):(n.memoizedProps!==u&&Zr(i),fe(i),i.flags&=-16777217),null;case 27:Vr(i),o=St.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Zr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return fe(i),null}n=Et.current,zl(i)?u_(i):(n=OE(f,u,o),i.stateNode=n,Zr(i))}return fe(i),null;case 5:if(Vr(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Zr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return fe(i),null}if(n=Et.current,zl(i))u_(i);else{switch(f=Uh(St.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Ne]=i,n[Re]=u;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Ze(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Zr(i)}}return fe(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Zr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=St.current,zl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=fn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ne]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||RE(n.nodeValue,o)),n||Hs(i)}else n=Uh(n).createTextNode(u),n[Ne]=i,i.stateNode=n}return fe(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=zl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=i}else ql(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fe(i),f=!1}else f=h_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?($r(i),i):($r(i),null)}if($r(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Sh(i,i.updateQueue),fe(i),null;case 4:return nr(),n===null&&Jm(i.stateNode.containerInfo),fe(i),null;case 10:return Kr(i.type),fe(i),null;case 19:if(ct(Le),f=i.memoizedState,f===null)return fe(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)ru(f,!1);else{if(_e!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Eh(n),g!==null){for(i.flags|=128,ru(f,!1),n=g.updateQueue,i.updateQueue=n,Sh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)o_(o,n),o=o.sibling;return st(Le,Le.current&1|2),i.child}n=n.sibling}f.tail!==null&&Mn()>Dh&&(i.flags|=128,u=!0,ru(f,!1),i.lanes=4194304)}else{if(!u)if(n=Eh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Sh(i,n),ru(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!jt)return fe(i),null}else 2*Mn()-f.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,u=!0,ru(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Mn(),i.sibling=null,n=Le.current,st(Le,u?n&1|2:n&1),i):(fe(i),null);case 22:case 23:return $r(i),em(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(fe(i),i.subtreeFlags&6&&(i.flags|=8192)):fe(i),o=i.updateQueue,o!==null&&Sh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&ct(Ys),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Kr(Pe),fe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function WS(n,i){switch(qd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Kr(Pe),nr(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vr(i),null;case 13:if($r(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ql()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ct(Le),null;case 4:return nr(),null;case 10:return Kr(i.type),null;case 22:case 23:return $r(i),em(),n!==null&&ct(Ys),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Kr(Pe),null;case 25:return null;default:return null}}function Mv(n,i){switch(qd(i),i.tag){case 3:Kr(Pe),nr();break;case 26:case 27:case 5:Vr(i);break;case 4:nr();break;case 13:$r(i);break;case 19:ct(Le);break;case 10:Kr(i.type);break;case 22:case 23:$r(i),em(),n!==null&&ct(Ys);break;case 24:Kr(Pe)}}function iu(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){ee(i,i.return,A)}}function Vi(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var I=o,F=A;try{F()}catch(X){ee(f,I,X)}}}u=u.next}while(u!==g)}}catch(X){ee(i,i.return,X)}}function Pv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{A_(i,o)}catch(u){ee(n,n.return,u)}}}function Lv(n,i,o){o.props=Xs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ee(n,i,u)}}function su(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ee(n,i,f)}}function pr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ee(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ee(n,i,f)}else o.current=null}function kv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ee(n,n.return,f)}}function Cm(n,i,o){try{var u=n.stateNode;vR(u,n.type,o,i),u[Re]=i}catch(f){ee(n,n.return,f)}}function Uv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ui(n.type)||n.tag===4}function Vm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Uv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ui(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=kh));else if(u!==4&&(u===27&&Ui(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(xm(n,i,o),n=n.sibling;n!==null;)xm(n,i,o),n=n.sibling}function Rh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Ui(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Rh(n,i,o),n=n.sibling;n!==null;)Rh(n,i,o),n=n.sibling}function Bv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ze(i,u,o),i[Ne]=n,i[Re]=o}catch(g){ee(n,n.return,g)}}var Wr=!1,Ae=!1,Nm=!1,zv=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function JS(n,i){if(n=n.containerInfo,ng=Gh,n=Zy(n),Vd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var E=0,A=-1,I=-1,F=0,X=0,tt=n,j=null;e:for(;;){for(var H;tt!==o||f!==0&&tt.nodeType!==3||(A=E+f),tt!==g||u!==0&&tt.nodeType!==3||(I=E+u),tt.nodeType===3&&(E+=tt.nodeValue.length),(H=tt.firstChild)!==null;)j=tt,tt=H;for(;;){if(tt===n)break e;if(j===o&&++F===f&&(A=E),j===g&&++X===u&&(I=E),(H=tt.nextSibling)!==null)break;tt=j,j=tt.parentNode}tt=H}o=A===-1||I===-1?null:{start:A,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(rg={focusedElem:n,selectionRange:o},Gh=!1,Fe=i;Fe!==null;)if(i=Fe,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Fe=n;else for(;Fe!==null;){switch(i=Fe,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var wt=Xs(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(wt,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Tt){ee(o,o.return,Tt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)ag(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ag(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Fe=n;break}Fe=i.return}}function qv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:xi(n,o),u&4&&iu(5,o);break;case 1:if(xi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){ee(o,o.return,E)}else{var f=Xs(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ee(o,o.return,E)}}u&64&&Pv(o),u&512&&su(o,o.return);break;case 3:if(xi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{A_(n,i)}catch(E){ee(o,o.return,E)}}break;case 27:i===null&&u&4&&Bv(o);case 26:case 5:xi(n,o),i===null&&u&4&&kv(o),u&512&&su(o,o.return);break;case 12:xi(n,o);break;case 13:xi(n,o),u&4&&Gv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=lR.bind(null,o),RR(n,o))));break;case 22:if(u=o.memoizedState!==null||Wr,!u){i=i!==null&&i.memoizedState!==null||Ae,f=Wr;var g=Ae;Wr=u,(Ae=i)&&!g?Ni(n,o,(o.subtreeFlags&8772)!==0):xi(n,o),Wr=f,Ae=g}break;case 30:break;default:xi(n,o)}}function Fv(n){var i=n.alternate;i!==null&&(n.alternate=null,Fv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&vi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var oe=null,_n=!1;function Jr(n,i,o){for(o=o.child;o!==null;)jv(n,i,o),o=o.sibling}function jv(n,i,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(pe,o)}catch{}switch(o.tag){case 26:Ae||pr(o,i),Jr(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ae||pr(o,i);var u=oe,f=_n;Ui(o.type)&&(oe=o.stateNode,_n=!1),Jr(n,i,o),mu(o.stateNode),oe=u,_n=f;break;case 5:Ae||pr(o,i);case 6:if(u=oe,f=_n,oe=null,Jr(n,i,o),oe=u,_n=f,oe!==null)if(_n)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(o.stateNode)}catch(g){ee(o,i,g)}else try{oe.removeChild(o.stateNode)}catch(g){ee(o,i,g)}break;case 18:oe!==null&&(_n?(n=oe,xE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Au(n)):xE(oe,o.stateNode));break;case 4:u=oe,f=_n,oe=o.stateNode.containerInfo,_n=!0,Jr(n,i,o),oe=u,_n=f;break;case 0:case 11:case 14:case 15:Ae||Vi(2,o,i),Ae||Vi(4,o,i),Jr(n,i,o);break;case 1:Ae||(pr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Lv(o,i,u)),Jr(n,i,o);break;case 21:Jr(n,i,o);break;case 22:Ae=(u=Ae)||o.memoizedState!==null,Jr(n,i,o),Ae=u;break;default:Jr(n,i,o)}}function Gv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Au(n)}catch(o){ee(i,i.return,o)}}function tR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new zv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new zv),i;default:throw Error(r(435,n.tag))}}function Om(n,i){var o=tR(n);i.forEach(function(u){var f=uR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function In(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,A=E;t:for(;A!==null;){switch(A.tag){case 27:if(Ui(A.type)){oe=A.stateNode,_n=!1;break t}break;case 5:oe=A.stateNode,_n=!1;break t;case 3:case 4:oe=A.stateNode.containerInfo,_n=!0;break t}A=A.return}if(oe===null)throw Error(r(160));jv(g,E,f),oe=null,_n=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Hv(i,n),i=i.sibling}var Jn=null;function Hv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:In(i,n),Dn(n),u&4&&(Vi(3,n,n.return),iu(3,n),Vi(5,n,n.return));break;case 1:In(i,n),Dn(n),u&512&&(Ae||o===null||pr(o,o.return)),u&64&&Wr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Jn;if(In(i,n),Dn(n),u&512&&(Ae||o===null||pr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ss]||g[Ne]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Ze(g,u,o),g[Ne]=n,Ee(g),u=g;break t;case"link":var E=BE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break e}}g=f.createElement(u),Ze(g,u,o),f.head.appendChild(g);break;case"meta":if(E=BE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break e}}g=f.createElement(u),Ze(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Ne]=n,Ee(g),u=g}n.stateNode=u}else zE(f,n.type,n.stateNode);else n.stateNode=UE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?zE(f,n.type,n.stateNode):UE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Cm(n,n.memoizedProps,o.memoizedProps)}break;case 27:In(i,n),Dn(n),u&512&&(Ae||o===null||pr(o,o.return)),o!==null&&u&4&&Cm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(In(i,n),Dn(n),u&512&&(Ae||o===null||pr(o,o.return)),n.flags&32){f=n.stateNode;try{Ln(f,"")}catch(H){ee(n,n.return,H)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Cm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Nm=!0);break;case 6:if(In(i,n),Dn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(H){ee(n,n.return,H)}}break;case 3:if(qh=null,f=Jn,Jn=Bh(i.containerInfo),In(i,n),Jn=f,Dn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Au(i.containerInfo)}catch(H){ee(n,n.return,H)}Nm&&(Nm=!1,Qv(n));break;case 4:u=Jn,Jn=Bh(n.stateNode.containerInfo),In(i,n),Dn(n),Jn=u;break;case 12:In(i,n),Dn(n);break;case 13:In(i,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Bm=Mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Om(n,u)));break;case 22:f=n.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,F=Wr,X=Ae;if(Wr=F||f,Ae=X||I,In(i,n),Ae=X,Wr=F,Dn(n),u&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||I||Wr||Ae||Zs(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){I=o=i;try{if(g=I.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=I.stateNode;var tt=I.memoizedProps.style,j=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;A.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(H){ee(I,I.return,H)}}}else if(i.tag===6){if(o===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(H){ee(I,I.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Om(n,o))));break;case 19:In(i,n),Dn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Om(n,u)));break;case 30:break;case 21:break;default:In(i,n),Dn(n)}}function Dn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Uv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Vm(n);Rh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Ln(E,""),o.flags&=-33);var A=Vm(n);Rh(n,A,E);break;case 3:case 4:var I=o.stateNode.containerInfo,F=Vm(n);xm(n,F,I);break;default:throw Error(r(161))}}catch(X){ee(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Qv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Qv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function xi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)qv(n,i.alternate,i),i=i.sibling}function Zs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Vi(4,i,i.return),Zs(i);break;case 1:pr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Lv(i,i.return,o),Zs(i);break;case 27:mu(i.stateNode);case 26:case 5:pr(i,i.return),Zs(i);break;case 22:i.memoizedState===null&&Zs(i);break;case 30:Zs(i);break;default:Zs(i)}n=n.sibling}}function Ni(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Ni(f,g,o),iu(4,g);break;case 1:if(Ni(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ee(u,u.return,F)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)T_(I[f],A)}catch(F){ee(u,u.return,F)}}o&&E&64&&Pv(g),su(g,g.return);break;case 27:Bv(g);case 26:case 5:Ni(f,g,o),o&&u===null&&E&4&&kv(g),su(g,g.return);break;case 12:Ni(f,g,o);break;case 13:Ni(f,g,o),o&&E&4&&Gv(f,g);break;case 22:g.memoizedState===null&&Ni(f,g,o),su(g,g.return);break;case 30:break;default:Ni(f,g,o)}i=i.sibling}}function Mm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Gl(o))}function Pm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n))}function yr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Kv(n,i,o,u),i=i.sibling}function Kv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:yr(n,i,o,u),f&2048&&iu(9,i);break;case 1:yr(n,i,o,u);break;case 3:yr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n)));break;case 12:if(f&2048){yr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){ee(i,i.return,I)}}else yr(n,i,o,u);break;case 13:yr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?yr(n,i,o,u):au(n,i):g._visibility&2?yr(n,i,o,u):(g._visibility|=2,uo(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Mm(E,i);break;case 24:yr(n,i,o,u),f&2048&&Pm(i.alternate,i);break;default:yr(n,i,o,u)}}function uo(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,A=o,I=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:uo(g,E,A,I,f),iu(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?uo(g,E,A,I,f):au(g,E):(X._visibility|=2,uo(g,E,A,I,f)),f&&F&2048&&Mm(E.alternate,E);break;case 24:uo(g,E,A,I,f),f&&F&2048&&Pm(E.alternate,E);break;default:uo(g,E,A,I,f)}i=i.sibling}}function au(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:au(o,u),f&2048&&Mm(u.alternate,u);break;case 24:au(o,u),f&2048&&Pm(u.alternate,u);break;default:au(o,u)}i=i.sibling}}var ou=8192;function co(n){if(n.subtreeFlags&ou)for(n=n.child;n!==null;)Yv(n),n=n.sibling}function Yv(n){switch(n.tag){case 26:co(n),n.flags&ou&&n.memoizedState!==null&&BR(Jn,n.memoizedState,n.memoizedProps);break;case 5:co(n);break;case 3:case 4:var i=Jn;Jn=Bh(n.stateNode.containerInfo),co(n),Jn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ou,ou=16777216,co(n),ou=i):co(n));break;default:co(n)}}function $v(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function lu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Fe=u,Zv(u,n)}$v(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Xv(n),n=n.sibling}function Xv(n){switch(n.tag){case 0:case 11:case 15:lu(n),n.flags&2048&&Vi(9,n,n.return);break;case 3:lu(n);break;case 12:lu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ih(n)):lu(n);break;default:lu(n)}}function Ih(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Fe=u,Zv(u,n)}$v(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Vi(8,i,i.return),Ih(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ih(i));break;default:Ih(i)}n=n.sibling}}function Zv(n,i){for(;Fe!==null;){var o=Fe;switch(o.tag){case 0:case 11:case 15:Vi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Fe=u;else t:for(o=n;Fe!==null;){u=Fe;var f=u.sibling,g=u.return;if(Fv(u),u===o){Fe=null;break t}if(f!==null){f.return=g,Fe=f;break t}Fe=g}}}var eR={getCacheForType:function(n){var i=nn(Pe),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},nR=typeof WeakMap=="function"?WeakMap:Map,Kt=0,re=null,xt=null,Ut=0,Yt=0,Cn=null,Oi=!1,ho=!1,Lm=!1,ti=0,_e=0,Mi=0,Ws=0,km=0,Hn=0,fo=0,uu=null,vn=null,Um=!1,Bm=0,Dh=1/0,Ch=null,Pi=null,Xe=0,Li=null,mo=null,go=0,zm=0,qm=null,Wv=null,cu=0,Fm=null;function Vn(){if((Kt&2)!==0&&Ut!==0)return Ut&-Ut;if($.T!==null){var n=eo;return n!==0?n:$m()}return yi()}function Jv(){Hn===0&&(Hn=(Ut&536870912)===0||jt?vl():536870912);var n=Gn.current;return n!==null&&(n.flags|=32),Hn}function xn(n,i,o){(n===re&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)&&(po(n,0),ki(n,Ut,Hn,!1)),Nr(n,o),((Kt&2)===0||n!==re)&&(n===re&&((Kt&2)===0&&(Ws|=o),_e===4&&ki(n,Ut,Hn,!1)),_r(n))}function tE(n,i,o){if((Kt&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||ws(n,i),f=u?sR(n,i):Hm(n,i,!0),g=u;do{if(f===0){ho&&!u&&ki(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!rR(o)){f=Hm(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;t:{var A=n;f=uu;var I=A.current.memoizedState.isDehydrated;if(I&&(po(A,E).flags|=256),E=Hm(A,E,!1),E!==2){if(Lm&&!I){A.errorRecoveryDisabledLanes|=g,Ws|=g,f=4;break t}g=vn,vn=f,g!==null&&(vn===null?vn=g:vn.push.apply(vn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){po(n,0),ki(n,i,0,!0);break}t:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ki(u,i,Hn,!Oi);break t;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Bm+300-Mn(),10<f)){if(ki(u,i,Hn,!Oi),Na(u,0,!0)!==0)break t;u.timeoutHandle=CE(eE.bind(null,u,o,vn,Ch,Um,i,Hn,Ws,fo,Oi,g,2,-0,0),f);break t}eE(u,o,vn,Ch,Um,i,Hn,Ws,fo,Oi,g,0,-0,0)}}break}while(!0);_r(n)}function eE(n,i,o,u,f,g,E,A,I,F,X,tt,j,H){if(n.timeoutHandle=-1,tt=i.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:UR},Yv(i),tt=zR(),tt!==null)){n.cancelPendingCommit=tt(lE.bind(null,n,i,g,o,u,f,E,A,I,X,1,j,H)),ki(n,g,E,!F);return}lE(n,i,g,o,u,f,E,A,I)}function rR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Sn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ki(n,i,o,u){i&=~km,i&=~Ws,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-en(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&rr(n,o,i)}function Vh(){return(Kt&6)===0?(hu(0),!1):!0}function jm(){if(xt!==null){if(Yt===0)var n=xt.return;else n=xt,Qr=Qs=null,am(n),oo=null,eu=0,n=xt;for(;n!==null;)Mv(n.alternate,n),n=n.return;xt=null}}function po(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,TR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),jm(),re=n,xt=o=jr(n.current,null),Ut=i,Yt=0,Cn=null,Oi=!1,ho=ws(n,i),Lm=!1,fo=Hn=km=Ws=Mi=_e=0,vn=uu=null,Um=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-en(u),g=1<<f;i|=n[f],u&=~g}return ti=i,Wc(),o}function nE(n,i){Dt=null,$.H=yh,i===Ql||i===oh?(i=v_(),Yt=3):i===p_?(i=v_(),Yt=4):Yt=i===Ev?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,xt===null&&(_e=1,Ah(n,zn(i,n.current)))}function rE(){var n=$.H;return $.H=yh,n===null?yh:n}function iE(){var n=$.A;return $.A=eR,n}function Gm(){_e=4,Oi||(Ut&4194048)!==Ut&&Gn.current!==null||(ho=!0),(Mi&134217727)===0&&(Ws&134217727)===0||re===null||ki(re,Ut,Hn,!1)}function Hm(n,i,o){var u=Kt;Kt|=2;var f=rE(),g=iE();(re!==n||Ut!==i)&&(Ch=null,po(n,i)),i=!1;var E=_e;t:do try{if(Yt!==0&&xt!==null){var A=xt,I=Cn;switch(Yt){case 8:jm(),E=6;break t;case 3:case 2:case 9:case 6:Gn.current===null&&(i=!0);var F=Yt;if(Yt=0,Cn=null,yo(n,A,I,F),o&&ho){E=0;break t}break;default:F=Yt,Yt=0,Cn=null,yo(n,A,I,F)}}iR(),E=_e;break}catch(X){nE(n,X)}while(!0);return i&&n.shellSuspendCounter++,Qr=Qs=null,Kt=u,$.H=f,$.A=g,xt===null&&(re=null,Ut=0,Wc()),E}function iR(){for(;xt!==null;)sE(xt)}function sR(n,i){var o=Kt;Kt|=2;var u=rE(),f=iE();re!==n||Ut!==i?(Ch=null,Dh=Mn()+500,po(n,i)):ho=ws(n,i);t:do try{if(Yt!==0&&xt!==null){i=xt;var g=Cn;e:switch(Yt){case 1:Yt=0,Cn=null,yo(n,i,g,1);break;case 2:case 9:if(y_(g)){Yt=0,Cn=null,aE(i);break}i=function(){Yt!==2&&Yt!==9||re!==n||(Yt=7),_r(n)},g.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:y_(g)?(Yt=0,Cn=null,aE(i)):(Yt=0,Cn=null,yo(n,i,g,7));break;case 5:var E=null;switch(xt.tag){case 26:E=xt.memoizedState;case 5:case 27:var A=xt;if(!E||qE(E)){Yt=0,Cn=null;var I=A.sibling;if(I!==null)xt=I;else{var F=A.return;F!==null?(xt=F,xh(F)):xt=null}break e}}Yt=0,Cn=null,yo(n,i,g,5);break;case 6:Yt=0,Cn=null,yo(n,i,g,6);break;case 8:jm(),_e=6;break t;default:throw Error(r(462))}}aR();break}catch(X){nE(n,X)}while(!0);return Qr=Qs=null,$.H=u,$.A=f,Kt=o,xt!==null?0:(re=null,Ut=0,Wc(),_e)}function aR(){for(;xt!==null&&!gl();)sE(xt)}function sE(n){var i=Nv(n.alternate,n,ti);n.memoizedProps=n.pendingProps,i===null?xh(n):xt=i}function aE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Rv(o,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=Rv(o,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:am(i);default:Mv(o,i),i=xt=o_(i,ti),i=Nv(o,i,ti)}n.memoizedProps=n.pendingProps,i===null?xh(n):xt=i}function yo(n,i,o,u){Qr=Qs=null,am(i),oo=null,eu=0;var f=i.return;try{if($S(n,f,i,o,Ut)){_e=1,Ah(n,zn(o,n.current)),xt=null;return}}catch(g){if(f!==null)throw xt=f,g;_e=1,Ah(n,zn(o,n.current)),xt=null;return}i.flags&32768?(jt||u===1?n=!0:ho||(Ut&536870912)!==0?n=!1:(Oi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gn.current,u!==null&&u.tag===13&&(u.flags|=16384))),oE(i,n)):xh(i)}function xh(n){var i=n;do{if((i.flags&32768)!==0){oE(i,Oi);return}n=i.return;var o=ZS(i.alternate,i,ti);if(o!==null){xt=o;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=n}while(i!==null);_e===0&&(_e=5)}function oE(n,i){do{var o=WS(n.alternate,n);if(o!==null){o.flags&=32767,xt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){xt=n;return}xt=n=o}while(n!==null);_e=6,xt=null}function lE(n,i,o,u,f,g,E,A,I){n.cancelPendingCommit=null;do Nh();while(Xe!==0);if((Kt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Pd,Tl(n,o,g,E,A,I),n===re&&(xt=re=null,Ut=0),mo=i,Li=n,go=o,zm=g,qm=f,Wv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,cR(Es,function(){return dE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,f=lt.p,lt.p=2,E=Kt,Kt|=4;try{JS(n,i,o)}finally{Kt=E,lt.p=f,$.T=u}}Xe=1,uE(),cE(),hE()}}function uE(){if(Xe===1){Xe=0;var n=Li,i=mo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=lt.p;lt.p=2;var f=Kt;Kt|=4;try{Hv(i,n);var g=rg,E=Zy(n.containerInfo),A=g.focusedElem,I=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Xy(A.ownerDocument.documentElement,A)){if(I!==null&&Vd(A)){var F=I.start,X=I.end;if(X===void 0&&(X=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(X,A.value.length);else{var tt=A.ownerDocument||document,j=tt&&tt.defaultView||window;if(j.getSelection){var H=j.getSelection(),wt=A.textContent.length,Tt=Math.min(I.start,wt),te=I.end===void 0?Tt:Math.min(I.end,wt);!H.extend&&Tt>te&&(E=te,te=Tt,Tt=E);var L=$y(A,Tt),O=$y(A,te);if(L&&O&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var q=tt.createRange();q.setStart(L.node,L.offset),H.removeAllRanges(),Tt>te?(H.addRange(q),H.extend(O.node,O.offset)):(q.setEnd(O.node,O.offset),H.addRange(q))}}}}for(tt=[],H=A;H=H.parentNode;)H.nodeType===1&&tt.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<tt.length;A++){var J=tt[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Gh=!!ng,rg=ng=null}finally{Kt=f,lt.p=u,$.T=o}}n.current=i,Xe=2}}function cE(){if(Xe===2){Xe=0;var n=Li,i=mo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=lt.p;lt.p=2;var f=Kt;Kt|=4;try{qv(n,i.alternate,i)}finally{Kt=f,lt.p=u,$.T=o}}Xe=3}}function hE(){if(Xe===4||Xe===3){Xe=0,Ic();var n=Li,i=mo,o=go,u=Wv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xe=5:(Xe=0,mo=Li=null,fE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Pi=null),Oa(o),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(pe,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=$.T,f=lt.p,lt.p=2,$.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{$.T=i,lt.p=f}}(go&3)!==0&&Nh(),_r(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Fm?cu++:(cu=0,Fm=n):cu=0,hu(0)}}function fE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Gl(i)))}function Nh(n){return uE(),cE(),hE(),dE()}function dE(){if(Xe!==5)return!1;var n=Li,i=zm;zm=0;var o=Oa(go),u=$.T,f=lt.p;try{lt.p=32>o?32:o,$.T=null,o=qm,qm=null;var g=Li,E=go;if(Xe=0,mo=Li=null,go=0,(Kt&6)!==0)throw Error(r(331));var A=Kt;if(Kt|=4,Xv(g.current),Kv(g,g.current,E,o),Kt=A,hu(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(pe,g)}catch{}return!0}finally{lt.p=f,$.T=u,fE(n,i)}}function mE(n,i,o){i=zn(o,i),i=Em(n.stateNode,i,2),n=Ri(n,i,2),n!==null&&(Nr(n,2),_r(n))}function ee(n,i,o){if(n.tag===3)mE(n,n,o);else for(;i!==null;){if(i.tag===3){mE(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pi===null||!Pi.has(u))){n=zn(o,n),o=_v(2),u=Ri(i,o,2),u!==null&&(vv(o,u,i,n),Nr(u,2),_r(u));break}}i=i.return}}function Qm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new nR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Lm=!0,f.add(o),n=oR.bind(null,n,i,o),i.then(n,n))}function oR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,re===n&&(Ut&o)===o&&(_e===4||_e===3&&(Ut&62914560)===Ut&&300>Mn()-Bm?(Kt&2)===0&&po(n,0):km|=o,fo===Ut&&(fo=0)),_r(n)}function gE(n,i){i===0&&(i=El()),n=Za(n,i),n!==null&&(Nr(n,i),_r(n))}function lR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),gE(n,o)}function uR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),gE(n,o)}function cR(n,i){return _s(n,i)}var Oh=null,_o=null,Km=!1,Mh=!1,Ym=!1,Js=0;function _r(n){n!==_o&&n.next===null&&(_o===null?Oh=_o=n:_o=_o.next=n),Mh=!0,Km||(Km=!0,fR())}function hu(n,i){if(!Ym&&Mh){Ym=!0;do for(var o=!1,u=Oh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-en(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,vE(u,g))}else g=Ut,g=Na(u,u===re?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ws(u,g)||(o=!0,vE(u,g));u=u.next}while(o);Ym=!1}}function hR(){pE()}function pE(){Mh=Km=!1;var n=0;Js!==0&&(ER()&&(n=Js),Js=0);for(var i=Mn(),o=null,u=Oh;u!==null;){var f=u.next,g=yE(u,i);g===0?(u.next=null,o===null?Oh=f:o.next=f,f===null&&(_o=o)):(o=u,(n!==0||(g&3)!==0)&&(Mh=!0)),u=f}hu(n)}function yE(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-en(g),A=1<<E,I=f[E];I===-1?((A&o)===0||(A&u)!==0)&&(f[E]=_l(A,i)):I<=i&&(n.expiredLanes|=A),g&=~A}if(i=re,o=Ut,o=Na(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&vs(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ws(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&vs(u),Oa(o)){case 2:case 8:o=Va;break;case 32:o=Es;break;case 268435456:o=xa;break;default:o=Es}return u=_E.bind(null,n),o=_s(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&vs(u),n.callbackPriority=2,n.callbackNode=null,2}function _E(n,i){if(Xe!==0&&Xe!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Nh()&&n.callbackNode!==o)return null;var u=Ut;return u=Na(n,n===re?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(tE(n,u,i),yE(n,Mn()),n.callbackNode!=null&&n.callbackNode===o?_E.bind(null,n):null)}function vE(n,i){if(Nh())return null;tE(n,i,!0)}function fR(){AR(function(){(Kt&6)!==0?_s(pl,hR):pE()})}function $m(){return Js===0&&(Js=vl()),Js}function EE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ba(""+n)}function TE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function dR(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=EE((f[Re]||null).action),E=u.submitter;E&&(i=(i=E[Re]||null)?EE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new za("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Js!==0){var I=E?TE(f,E):new FormData(f);gm(o,{pending:!0,data:I,method:f.method,action:g},null,I)}}else typeof g=="function"&&(A.preventDefault(),I=E?TE(f,E):new FormData(f),gm(o,{pending:!0,data:I,method:f.method,action:g},g,I))},currentTarget:f}]})}}for(var Xm=0;Xm<Md.length;Xm++){var Zm=Md[Xm],mR=Zm.toLowerCase(),gR=Zm[0].toUpperCase()+Zm.slice(1);Wn(mR,"on"+gR)}Wn(t_,"onAnimationEnd"),Wn(e_,"onAnimationIteration"),Wn(n_,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(NS,"onTransitionRun"),Wn(OS,"onTransitionStart"),Wn(MS,"onTransitionCancel"),Wn(r_,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function AE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],I=A.instance,F=A.currentTarget;if(A=A.listener,I!==g&&f.isPropagationStopped())break t;g=A,f.currentTarget=F;try{g(f)}catch(X){Th(X)}f.currentTarget=null,g=I}else for(E=0;E<u.length;E++){if(A=u[E],I=A.instance,F=A.currentTarget,A=A.listener,I!==g&&f.isPropagationStopped())break t;g=A,f.currentTarget=F;try{g(f)}catch(X){Th(X)}f.currentTarget=null,g=I}}}}function Nt(n,i){var o=i[bl];o===void 0&&(o=i[bl]=new Set);var u=n+"__bubble";o.has(u)||(bE(i,n,2,!1),o.add(u))}function Wm(n,i,o){var u=0;i&&(u|=4),bE(o,n,u,i)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function Jm(n){if(!n[Ph]){n[Ph]=!0,wl.forEach(function(o){o!=="selectionchange"&&(pR.has(o)||Wm(o,!1,n),Wm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ph]||(i[Ph]=!0,Wm("selectionchange",!1,i))}}function bE(n,i,o,u){switch(KE(i)){case 2:var f=jR;break;case 8:f=GR;break;default:f=dg}o=f.bind(null,i,o,n),f=void 0,!Un||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function tg(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Or(A),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){u=g=E;continue t}A=A.parentNode}}u=u.return}kc(function(){var F=g,X=kn(o),tt=[];t:{var j=i_.get(n);if(j!==void 0){var H=za,wt=n;switch(n){case"keypress":if(ur(o)===0)break t;case"keydown":case"keyup":H=Qa;break;case"focusin":wt="focus",H=ja;break;case"focusout":wt="blur",H=ja;break;case"beforeblur":case"afterblur":H=ja;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Hc;break;case t_:case e_:case n_:H=Ga;break;case r_:H=Kc;break;case"scroll":case"scrollend":H=Uc;break;case"wheel":H=Ka;break;case"copy":case"cut":case"paste":H=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ll;break;case"toggle":case"beforetoggle":H=$c}var Tt=(i&4)!==0,te=!Tt&&(n==="scroll"||n==="scrollend"),L=Tt?j!==null?j+"Capture":null:j;Tt=[];for(var O=F,q;O!==null;){var J=O;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||L===null||(J=Ns(O,L),J!=null&&Tt.push(du(O,J,q))),te)break;O=O.return}0<Tt.length&&(j=new H(j,wt,null,o,X),tt.push({event:j,listeners:Tt}))}}if((i&7)===0){t:{if(j=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",j&&o!==kr&&(wt=o.relatedTarget||o.fromElement)&&(Or(wt)||wt[Pn]))break t;if((H||j)&&(j=X.window===X?X:(j=X.ownerDocument)?j.defaultView||j.parentWindow:window,H?(wt=o.relatedTarget||o.toElement,H=F,wt=wt?Or(wt):null,wt!==null&&(te=l(wt),Tt=wt.tag,wt!==te||Tt!==5&&Tt!==27&&Tt!==6)&&(wt=null)):(H=null,wt=F),H!==wt)){if(Tt=Bn,J="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Tt=Ll,J="onPointerLeave",L="onPointerEnter",O="pointer"),te=H==null?j:sr(H),q=wt==null?j:sr(wt),j=new Tt(J,O+"leave",H,o,X),j.target=te,j.relatedTarget=q,J=null,Or(X)===F&&(Tt=new Tt(L,O+"enter",wt,o,X),Tt.target=q,Tt.relatedTarget=te,J=Tt),te=J,H&&wt)e:{for(Tt=H,L=wt,O=0,q=Tt;q;q=vo(q))O++;for(q=0,J=L;J;J=vo(J))q++;for(;0<O-q;)Tt=vo(Tt),O--;for(;0<q-O;)L=vo(L),q--;for(;O--;){if(Tt===L||L!==null&&Tt===L.alternate)break e;Tt=vo(Tt),L=vo(L)}Tt=null}else Tt=null;H!==null&&wE(tt,j,H,Tt,!1),wt!==null&&te!==null&&wE(tt,te,wt,Tt,!0)}}t:{if(j=F?sr(F):window,H=j.nodeName&&j.nodeName.toLowerCase(),H==="select"||H==="input"&&j.type==="file")var mt=jy;else if(Me(j))if(Gy)mt=CS;else{mt=IS;var Vt=RS}else H=j.nodeName,!H||H.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?F&&Cl(F.elementType)&&(mt=jy):mt=DS;if(mt&&(mt=mt(n,F))){Fr(tt,mt,o,X);break t}Vt&&Vt(n,j,F),n==="focusout"&&F&&j.type==="number"&&F.memoizedProps.value!=null&&Ti(j,"number",j.value)}switch(Vt=F?sr(F):window,n){case"focusin":(Me(Vt)||Vt.contentEditable==="true")&&(Ya=Vt,xd=F,Bl=null);break;case"focusout":Bl=xd=Ya=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Wy(tt,o,X);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":Wy(tt,o,X)}var yt;if(fr)t:{switch(n){case"compositionstart":var At="onCompositionStart";break t;case"compositionend":At="onCompositionEnd";break t;case"compositionupdate":At="onCompositionUpdate";break t}At=void 0}else Lt?K(n,o)&&(At="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(At="onCompositionStart");At&&(v&&o.locale!=="ko"&&(Lt||At!=="onCompositionStart"?At==="onCompositionEnd"&&Lt&&(yt=xl()):(lr=X,Ai="value"in lr?lr.value:lr.textContent,Lt=!0)),Vt=Lh(F,At),0<Vt.length&&(At=new Ml(At,n,null,o,X),tt.push({event:At,listeners:Vt}),yt?At.data=yt:(yt=at(o),yt!==null&&(At.data=yt)))),(yt=y?Oe(n,o):kt(n,o))&&(At=Lh(F,"onBeforeInput"),0<At.length&&(Vt=new Ml("onBeforeInput","beforeinput",null,o,X),tt.push({event:Vt,listeners:At}),Vt.data=yt)),dR(tt,n,F,o,X)}AE(tt,i)})}function du(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Lh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Ns(n,o),f!=null&&u.unshift(du(n,f,g)),f=Ns(n,i),f!=null&&u.push(du(n,f,g))),n.tag===3)return u;n=n.return}return[]}function vo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function wE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var A=o,I=A.alternate,F=A.stateNode;if(A=A.tag,I!==null&&I===u)break;A!==5&&A!==26&&A!==27||F===null||(I=F,f?(F=Ns(o,g),F!=null&&E.unshift(du(o,F,I))):f||(F=Ns(o,g),F!=null&&E.push(du(o,F,I)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var yR=/\r\n?/g,_R=/\u0000|\uFFFD/g;function SE(n){return(typeof n=="string"?n:""+n).replace(yR,`
`).replace(_R,"")}function RE(n,i){return i=SE(i),SE(n)===i}function kh(){}function Jt(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Ln(n,""+u);break;case"className":ar(n,"class",u);break;case"tabIndex":ar(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(n,o,u);break;case"style":Dl(n,u,g);break;case"data":if(i!=="object"){ar(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ba(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Jt(n,i,"name",f.name,f,null),Jt(n,i,"formEncType",f.formEncType,f,null),Jt(n,i,"formMethod",f.formMethod,f,null),Jt(n,i,"formTarget",f.formTarget,f,null)):(Jt(n,i,"encType",f.encType,f,null),Jt(n,i,"method",f.method,f,null),Jt(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ba(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=kh);break;case"onScroll":u!=null&&Nt("scroll",n);break;case"onScrollEnd":u!=null&&Nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ba(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Nt("beforetoggle",n),Nt("toggle",n),Ei(n,"popover",u);break;case"xlinkActuate":Ke(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ke(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ke(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ke(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ke(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ke(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ke(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ke(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ke(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ei(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wd.get(o)||o,Ei(n,o,u))}}function eg(n,i,o,u,f,g){switch(o){case"style":Dl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&Ln(n,""+u);break;case"onScroll":u!=null&&Nt("scroll",n);break;case"onScrollEnd":u!=null&&Nt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=kh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[Re]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ei(n,o,u)}}}function Ze(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",n),Nt("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(n,i,g,E,o,null)}}f&&Jt(n,i,"srcSet",o.srcSet,o,null),u&&Jt(n,i,"src",o.src,o,null);return;case"input":Nt("invalid",n);var A=g=E=f=null,I=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":E=X;break;case"checked":I=X;break;case"defaultChecked":F=X;break;case"value":g=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:Jt(n,i,u,X,o,null)}}Cs(n,g,A,I,F,E,f,!1),Ua(n);return;case"select":Nt("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:Jt(n,i,f,A,o,null)}i=g,o=E,n.multiple=!!u,i!=null?Lr(n,!!u,i,!1):o!=null&&Lr(n,!!u,o,!0);return;case"textarea":Nt("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Jt(n,i,E,A,o,null)}Vs(n,u,f,g),Ua(n);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Jt(n,i,I,u,o,null)}return;case"dialog":Nt("beforetoggle",n),Nt("toggle",n),Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":Nt("load",n);break;case"video":case"audio":for(u=0;u<fu.length;u++)Nt(fu[u],n);break;case"image":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"embed":case"source":case"link":Nt("error",n),Nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Jt(n,i,F,u,o,null)}return;default:if(Cl(i)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&eg(n,i,X,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Jt(n,i,A,u,o,null))}function vR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,I=null,F=null,X=null;for(H in o){var tt=o[H];if(o.hasOwnProperty(H)&&tt!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=tt;default:u.hasOwnProperty(H)||Jt(n,i,H,null,u,tt)}}for(var j in u){var H=u[j];if(tt=o[j],u.hasOwnProperty(j)&&(H!=null||tt!=null))switch(j){case"type":g=H;break;case"name":f=H;break;case"checked":F=H;break;case"defaultChecked":X=H;break;case"value":E=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==tt&&Jt(n,i,j,H,u,tt)}}wn(n,E,A,I,F,X,g,f);return;case"select":H=E=A=j=null;for(g in o)if(I=o[g],o.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":H=I;default:u.hasOwnProperty(g)||Jt(n,i,g,null,u,I)}for(f in u)if(g=u[f],I=o[f],u.hasOwnProperty(f)&&(g!=null||I!=null))switch(f){case"value":j=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==I&&Jt(n,i,f,g,u,I)}i=A,o=E,u=H,j!=null?Lr(n,!!o,j,!1):!!u!=!!o&&(i!=null?Lr(n,!!o,i,!0):Lr(n,!!o,o?[]:"",!1));return;case"textarea":H=j=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Jt(n,i,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":j=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&Jt(n,i,E,f,u,g)}Zt(n,j,H);return;case"option":for(var wt in o)if(j=o[wt],o.hasOwnProperty(wt)&&j!=null&&!u.hasOwnProperty(wt))switch(wt){case"selected":n.selected=!1;break;default:Jt(n,i,wt,null,u,j)}for(I in u)if(j=u[I],H=o[I],u.hasOwnProperty(I)&&j!==H&&(j!=null||H!=null))switch(I){case"selected":n.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Jt(n,i,I,j,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in o)j=o[Tt],o.hasOwnProperty(Tt)&&j!=null&&!u.hasOwnProperty(Tt)&&Jt(n,i,Tt,null,u,j);for(F in u)if(j=u[F],H=o[F],u.hasOwnProperty(F)&&j!==H&&(j!=null||H!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:Jt(n,i,F,j,u,H)}return;default:if(Cl(i)){for(var te in o)j=o[te],o.hasOwnProperty(te)&&j!==void 0&&!u.hasOwnProperty(te)&&eg(n,i,te,void 0,u,j);for(X in u)j=u[X],H=o[X],!u.hasOwnProperty(X)||j===H||j===void 0&&H===void 0||eg(n,i,X,j,u,H);return}}for(var L in o)j=o[L],o.hasOwnProperty(L)&&j!=null&&!u.hasOwnProperty(L)&&Jt(n,i,L,null,u,j);for(tt in u)j=u[tt],H=o[tt],!u.hasOwnProperty(tt)||j===H||j==null&&H==null||Jt(n,i,tt,j,u,H)}var ng=null,rg=null;function Uh(n){return n.nodeType===9?n:n.ownerDocument}function IE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ig(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sg=null;function ER(){var n=window.event;return n&&n.type==="popstate"?n===sg?!1:(sg=n,!0):(sg=null,!1)}var CE=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,VE=typeof Promise=="function"?Promise:void 0,AR=typeof queueMicrotask=="function"?queueMicrotask:typeof VE<"u"?function(n){return VE.resolve(null).then(n).catch(bR)}:CE;function bR(n){setTimeout(function(){throw n})}function Ui(n){return n==="head"}function xE(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&mu(E.documentElement),o&2&&mu(E.body),o&4)for(o=E.head,mu(o),E=o.firstChild;E;){var A=E.nextSibling,I=E.nodeName;E[Ss]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),Au(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Au(i)}function ag(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ag(o),vi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function wR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ss])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=tr(n.nextSibling),n===null)break}return null}function SR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=tr(n.nextSibling),n===null))return null;return n}function og(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function RR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function tr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var lg=null;function NE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function OE(n,i,o){switch(i=Uh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function mu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);vi(n)}var Qn=new Map,ME=new Set;function Bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ei=lt.d;lt.d={f:IR,r:DR,D:CR,C:VR,L:xR,m:NR,X:MR,S:OR,M:PR};function IR(){var n=ei.f(),i=Vh();return n||i}function DR(n){var i=ir(n);i!==null&&i.tag===5&&i.type==="form"?tv(i):ei.r(n)}var Eo=typeof document>"u"?null:document;function PE(n,i,o){var u=Eo;if(u&&typeof i=="string"&&i){var f=Ie(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ME.has(f)||(ME.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Ze(i,"link",n),Ee(i),u.head.appendChild(i)))}}function CR(n){ei.D(n),PE("dns-prefetch",n,null)}function VR(n,i){ei.C(n,i),PE("preconnect",n,i)}function xR(n,i,o){ei.L(n,i,o);var u=Eo;if(u&&n&&i){var f='link[rel="preload"][as="'+Ie(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ie(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ie(o.imageSizes)+'"]')):f+='[href="'+Ie(n)+'"]';var g=f;switch(i){case"style":g=To(n);break;case"script":g=Ao(n)}Qn.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Qn.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(gu(g))||i==="script"&&u.querySelector(pu(g))||(i=u.createElement("link"),Ze(i,"link",n),Ee(i),u.head.appendChild(i)))}}function NR(n,i){ei.m(n,i);var o=Eo;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ie(u)+'"][href="'+Ie(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ao(n)}if(!Qn.has(g)&&(n=_({rel:"modulepreload",href:n},i),Qn.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pu(g)))return}u=o.createElement("link"),Ze(u,"link",n),Ee(u),o.head.appendChild(u)}}}function OR(n,i,o){ei.S(n,i,o);var u=Eo;if(u&&n){var f=un(u).hoistableStyles,g=To(n);i=i||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(gu(g)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Qn.get(g))&&ug(n,o);var I=E=u.createElement("link");Ee(I),Ze(I,"link",n),I._p=new Promise(function(F,X){I.onload=F,I.onerror=X}),I.addEventListener("load",function(){A.loading|=1}),I.addEventListener("error",function(){A.loading|=2}),A.loading|=4,zh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function MR(n,i){ei.X(n,i);var o=Eo;if(o&&n){var u=un(o).hoistableScripts,f=Ao(n),g=u.get(f);g||(g=o.querySelector(pu(f)),g||(n=_({src:n,async:!0},i),(i=Qn.get(f))&&cg(n,i),g=o.createElement("script"),Ee(g),Ze(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function PR(n,i){ei.M(n,i);var o=Eo;if(o&&n){var u=un(o).hoistableScripts,f=Ao(n),g=u.get(f);g||(g=o.querySelector(pu(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&cg(n,i),g=o.createElement("script"),Ee(g),Ze(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function LE(n,i,o,u){var f=(f=St.current)?Bh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=To(o.href),o=un(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=To(o.href);var g=un(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(gu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),Qn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qn.set(n,o),g||LR(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ao(o),o=un(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function To(n){return'href="'+Ie(n)+'"'}function gu(n){return'link[rel="stylesheet"]['+n+"]"}function kE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function LR(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ze(i,"link",o),Ee(i),n.head.appendChild(i))}function Ao(n){return'[src="'+Ie(n)+'"]'}function pu(n){return"script[async]"+n}function UE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Ie(o.href)+'"]');if(u)return i.instance=u,Ee(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ee(u),Ze(u,"style",f),zh(u,o.precedence,n),i.instance=u;case"stylesheet":f=To(o.href);var g=n.querySelector(gu(f));if(g)return i.state.loading|=4,i.instance=g,Ee(g),g;u=kE(o),(f=Qn.get(f))&&ug(u,f),g=(n.ownerDocument||n).createElement("link"),Ee(g);var E=g;return E._p=new Promise(function(A,I){E.onload=A,E.onerror=I}),Ze(g,"link",u),i.state.loading|=4,zh(g,o.precedence,n),i.instance=g;case"script":return g=Ao(o.src),(f=n.querySelector(pu(g)))?(i.instance=f,Ee(f),f):(u=o,(f=Qn.get(g))&&(u=_({},o),cg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ee(f),Ze(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,zh(u,o.precedence,n));return i.instance}function zh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function ug(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function cg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var qh=null;function BE(n,i,o){if(qh===null){var u=new Map,f=qh=new Map;f.set(o,u)}else f=qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ss]||g[Ne]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function zE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function kR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function qE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var yu=null;function UR(){}function BR(n,i,o){if(yu===null)throw Error(r(475));var u=yu;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=To(o.href),g=n.querySelector(gu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Fh.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,Ee(g);return}g=n.ownerDocument||n,o=kE(o),(f=Qn.get(f))&&ug(o,f),g=g.createElement("link"),Ee(g);var E=g;E._p=new Promise(function(A,I){E.onload=A,E.onerror=I}),Ze(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Fh.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function zR(){if(yu===null)throw Error(r(475));var n=yu;return n.stylesheets&&n.count===0&&hg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&hg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Fh(){if(this.count--,this.count===0){if(this.stylesheets)hg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var jh=null;function hg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,jh=new Map,i.forEach(qR,n),jh=null,Fh.call(n))}function qR(n,i){if(!(i.state.loading&4)){var o=jh.get(n);if(o)var u=o.get(null);else{o=new Map,jh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Fh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var _u={$$typeof:Z,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function FR(n,i,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function FE(n,i,o,u,f,g,E,A,I,F,X,tt){return n=new FR(n,i,o,E,A,I,F,tt),i=1,g===!0&&(i|=24),g=Rn(3,null,null,i),n.current=g,g.stateNode=n,i=Qd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},Xd(g),n}function jE(n){return n?(n=Wa,n):Wa}function GE(n,i,o,u,f,g){f=jE(f),u.context===null?u.context=f:u.pendingContext=f,u=Si(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Ri(n,u,i),o!==null&&(xn(o,n,i),Yl(o,n,i))}function HE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function fg(n,i){HE(n,i),(n=n.alternate)&&HE(n,i)}function QE(n){if(n.tag===13){var i=Za(n,67108864);i!==null&&xn(i,n,67108864),fg(n,67108864)}}var Gh=!0;function jR(n,i,o,u){var f=$.T;$.T=null;var g=lt.p;try{lt.p=2,dg(n,i,o,u)}finally{lt.p=g,$.T=f}}function GR(n,i,o,u){var f=$.T;$.T=null;var g=lt.p;try{lt.p=8,dg(n,i,o,u)}finally{lt.p=g,$.T=f}}function dg(n,i,o,u){if(Gh){var f=mg(u);if(f===null)tg(n,i,u,Hh,o),YE(n,u);else if(QR(f,n,i,o,u))u.stopPropagation();else if(YE(n,u),i&4&&-1<HR.indexOf(n)){for(;f!==null;){var g=ir(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=$n(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var I=1<<31-en(E);A.entanglements[1]|=I,E&=~I}_r(g),(Kt&6)===0&&(Dh=Mn()+500,hu(0))}}break;case 13:A=Za(g,2),A!==null&&xn(A,g,2),Vh(),fg(g,2)}if(g=mg(u),g===null&&tg(n,i,u,Hh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else tg(n,i,u,null,o)}}function mg(n){return n=kn(n),gg(n)}var Hh=null;function gg(n){if(Hh=null,n=Or(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Hh=n,null}function KE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_d()){case pl:return 2;case Va:return 8;case Es:case vd:return 32;case xa:return 268435456;default:return 32}default:return 32}}var pg=!1,Bi=null,zi=null,qi=null,vu=new Map,Eu=new Map,Fi=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YE(n,i){switch(n){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":vu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(i.pointerId)}}function Tu(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=ir(i),i!==null&&QE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function QR(n,i,o,u,f){switch(i){case"focusin":return Bi=Tu(Bi,n,i,o,u,f),!0;case"dragenter":return zi=Tu(zi,n,i,o,u,f),!0;case"mouseover":return qi=Tu(qi,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return vu.set(g,Tu(vu.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Eu.set(g,Tu(Eu.get(g)||null,n,i,o,u,f)),!0}return!1}function $E(n){var i=Or(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Vc(n.priority,function(){if(o.tag===13){var u=Vn();u=pi(u);var f=Za(o,u);f!==null&&xn(f,o,u),fg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=mg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);kr=u,o.target.dispatchEvent(u),kr=null}else return i=ir(o),i!==null&&QE(i),n.blockedOn=o,!1;i.shift()}return!0}function XE(n,i,o){Qh(n)&&o.delete(i)}function KR(){pg=!1,Bi!==null&&Qh(Bi)&&(Bi=null),zi!==null&&Qh(zi)&&(zi=null),qi!==null&&Qh(qi)&&(qi=null),vu.forEach(XE),Eu.forEach(XE)}function Kh(n,i){n.blockedOn===i&&(n.blockedOn=null,pg||(pg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,KR)))}var Yh=null;function ZE(n){Yh!==n&&(Yh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yh===n&&(Yh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(gg(u||o)===null)continue;break}var g=ir(o);g!==null&&(n.splice(i,3),i-=3,gm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Au(n){function i(I){return Kh(I,n)}Bi!==null&&Kh(Bi,n),zi!==null&&Kh(zi,n),qi!==null&&Kh(qi,n),vu.forEach(i),Eu.forEach(i);for(var o=0;o<Fi.length;o++){var u=Fi[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Fi.length&&(o=Fi[0],o.blockedOn===null);)$E(o),o.blockedOn===null&&Fi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Re]||null;if(typeof g=="function")E||ZE(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Re]||null)A=E.formAction;else if(gg(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),ZE(o)}}}function yg(n){this._internalRoot=n}$h.prototype.render=yg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Vn();GE(o,u,n,i,null,null)},$h.prototype.unmount=yg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;GE(n.current,2,null,n,null,null),Vh(),i[Pn]=null}};function $h(n){this._internalRoot=n}$h.prototype.unstable_scheduleHydration=function(n){if(n){var i=yi();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Fi.length&&i!==0&&i<Fi[o].priority;o++);Fi.splice(o,0,n),o===0&&$E(n)}};var WE=t.version;if(WE!=="19.1.0")throw Error(r(527,WE,"19.1.0"));lt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var YR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{pe=Xh.inject(YR),Qt=Xh}catch{}}return wu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=mv,g=gv,E=pv,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=FE(n,1,!1,null,null,o,u,f,g,E,A,null),n[Pn]=i.current,Jm(n),new yg(i)},wu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=mv,E=gv,A=pv,I=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),i=FE(n,1,!0,i,o??null,u,f,g,E,A,I,F),i.context=jE(null),o=i.current,u=Vn(),u=pi(u),f=Si(u),f.callback=null,Ri(o,f,u),o=u,i.current.lanes=o,Nr(i,o),_r(i),n[Pn]=i.current,Jm(n),new $h(i)},wu.version="19.1.0",wu}var lT;function sI(){if(lT)return Eg.exports;lT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Eg.exports=iI(),Eg.exports}var aI=sI();const oI=eA(aI);var Su={},uT;function lI(){if(uT)return Su;uT=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.parse=c,Su.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,D){const N=new l,G=b.length;if(G<2)return N;const z=(D==null?void 0:D.decode)||_;let Y=0;do{const it=b.indexOf("=",Y);if(it===-1)break;const Z=b.indexOf(";",Y),dt=Z===-1?G:Z;if(it>dt){Y=b.lastIndexOf(";",it-1)+1;continue}const ht=d(b,Y,it),vt=m(b,it,ht),V=b.slice(ht,vt);if(N[V]===void 0){let S=d(b,it+1,dt),R=m(b,dt,S);const M=z(b.slice(S,R));N[V]=M}Y=dt+1}while(Y<G);return N}function d(b,D,N){do{const G=b.charCodeAt(D);if(G!==32&&G!==9)return D}while(++D<N);return N}function m(b,D,N){for(;D>N;){const G=b.charCodeAt(--D);if(G!==32&&G!==9)return D+1}return N}function p(b,D,N){const G=(N==null?void 0:N.encode)||encodeURIComponent;if(!s.test(b))throw new TypeError(`argument name is invalid: ${b}`);const z=G(D);if(!t.test(z))throw new TypeError(`argument val is invalid: ${D}`);let Y=b+"="+z;if(!N)return Y;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);Y+="; Max-Age="+N.maxAge}if(N.domain){if(!e.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);Y+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);Y+="; Path="+N.path}if(N.expires){if(!T(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);Y+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(Y+="; HttpOnly"),N.secure&&(Y+="; Secure"),N.partitioned&&(Y+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return Y}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function T(b){return a.call(b)==="[object Date]"}return Su}lI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cT="popstate";function uI(s={}){function t(r,a){let{pathname:l,search:c,hash:d}=r.location;return Bg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(r,a){return typeof a=="string"?a:Gu(a)}return hI(t,e,null,s)}function de(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Sr(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cI(){return Math.random().toString(36).substring(2,10)}function hT(s,t){return{usr:s.state,key:s.key,idx:t}}function Bg(s,t,e=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?sl(t):t,state:e,key:t&&t.key||r||cI()}}function Gu({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function sl(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let r=s.indexOf("?");r>=0&&(t.search=s.substring(r),s=s.substring(0,r)),s&&(t.pathname=s)}return t}function hI(s,t,e,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let z=_(),Y=z==null?null:z-p;p=z,m&&m({action:d,location:G.location,delta:Y})}function b(z,Y){d="PUSH";let it=Bg(G.location,z,Y);p=_()+1;let Z=hT(it,p),dt=G.createHref(it);try{c.pushState(Z,"",dt)}catch(ht){if(ht instanceof DOMException&&ht.name==="DataCloneError")throw ht;a.location.assign(dt)}l&&m&&m({action:d,location:G.location,delta:1})}function D(z,Y){d="REPLACE";let it=Bg(G.location,z,Y);p=_();let Z=hT(it,p),dt=G.createHref(it);c.replaceState(Z,"",dt),l&&m&&m({action:d,location:G.location,delta:0})}function N(z){let Y=a.location.origin!=="null"?a.location.origin:a.location.href,it=typeof z=="string"?z:Gu(z);return it=it.replace(/ $/,"%20"),de(Y,`No window.location.(origin|href) available to create URL for href: ${it}`),new URL(it,Y)}let G={get action(){return d},get location(){return s(a,c)},listen(z){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(cT,T),m=z,()=>{a.removeEventListener(cT,T),m=null}},createHref(z){return t(a,z)},createURL:N,encodeLocation(z){let Y=N(z);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:b,replace:D,go(z){return c.go(z)}};return G}function nA(s,t,e="/"){return fI(s,t,e,!1)}function fI(s,t,e,r){let a=typeof t=="string"?sl(t):t,l=si(a.pathname||"/",e);if(l==null)return null;let c=rA(s);dI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=wI(l);d=AI(c[m],p,r)}return d}function rA(s,t=[],e=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(de(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=ri([r,m.relativePath]),_=e.concat(m);l.children&&l.children.length>0&&(de(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),rA(l.children,t,_,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:EI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of iA(l.path))a(l,c,m)}),t}function iA(s){let t=s.split("/");if(t.length===0)return[];let[e,...r]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=iA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function dI(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:TI(t.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var mI=/^:[\w-]+$/,gI=3,pI=2,yI=1,_I=10,vI=-2,fT=s=>s==="*";function EI(s,t){let e=s.split("/"),r=e.length;return e.some(fT)&&(r+=vI),t&&(r+=pI),e.filter(a=>!fT(a)).reduce((a,l)=>a+(mI.test(l)?gI:l===""?yI:_I),r)}function TI(s,t){return s.length===t.length&&s.slice(0,-1).every((r,a)=>r===t[a])?s[s.length-1]-t[t.length-1]:0}function AI(s,t,e=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?t:t.slice(l.length)||"/",T=_f({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),b=m.route;if(!T&&p&&e&&!r[r.length-1].route.index&&(T=_f({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:ri([l,T.pathname]),pathnameBase:DI(ri([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=ri([l,T.pathnameBase]))}return c}function _f(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,r]=bI(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},b)=>{if(_==="*"){let N=d[b]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const D=d[b];return T&&!D?p[_]=void 0:p[_]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function bI(s,t=!1,e=!0){Sr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function wI(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function si(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,r=s.charAt(e);return r&&r!=="/"?null:s.slice(e)||"/"}function SI(s,t="/"){let{pathname:e,search:r="",hash:a=""}=typeof s=="string"?sl(s):s;return{pathname:e?e.startsWith("/")?e:RI(e,t):t,search:CI(r),hash:VI(a)}}function RI(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function wg(s,t,e,r){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function II(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function sA(s){let t=II(s);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function aA(s,t,e,r=!1){let a;typeof s=="string"?a=sl(s):(a={...s},de(!a.pathname||!a.pathname.includes("?"),wg("?","pathname","search",a)),de(!a.pathname||!a.pathname.includes("#"),wg("#","pathname","hash",a)),de(!a.search||!a.search.includes("#"),wg("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=e;else{let T=t.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?t[T]:"/"}let m=SI(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var ri=s=>s.join("/").replace(/\/\/+/g,"/"),DI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),CI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,VI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function xI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var oA=["POST","PUT","PATCH","DELETE"];new Set(oA);var NI=["GET",...oA];new Set(NI);var al=W.createContext(null);al.displayName="DataRouter";var Ff=W.createContext(null);Ff.displayName="DataRouterState";var lA=W.createContext({isTransitioning:!1});lA.displayName="ViewTransition";var OI=W.createContext(new Map);OI.displayName="Fetchers";var MI=W.createContext(null);MI.displayName="Await";var Cr=W.createContext(null);Cr.displayName="Navigation";var cc=W.createContext(null);cc.displayName="Location";var ci=W.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var Ap=W.createContext(null);Ap.displayName="RouteError";function PI(s,{relative:t}={}){de(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=W.useContext(Cr),{hash:a,pathname:l,search:c}=fc(s,{relative:t}),d=l;return e!=="/"&&(d=l==="/"?e:ri([e,l])),r.createHref({pathname:d,search:c,hash:a})}function hc(){return W.useContext(cc)!=null}function wa(){return de(hc(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(cc).location}var uA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cA(s){W.useContext(Cr).static||W.useLayoutEffect(s)}function LI(){let{isDataRoute:s}=W.useContext(ci);return s?$I():kI()}function kI(){de(hc(),"useNavigate() may be used only in the context of a <Router> component.");let s=W.useContext(al),{basename:t,navigator:e}=W.useContext(Cr),{matches:r}=W.useContext(ci),{pathname:a}=wa(),l=JSON.stringify(sA(r)),c=W.useRef(!1);return cA(()=>{c.current=!0}),W.useCallback((m,p={})=>{if(Sr(c.current,uA),!c.current)return;if(typeof m=="number"){e.go(m);return}let _=aA(m,JSON.parse(l),a,p.relative==="path");s==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:ri([t,_.pathname])),(p.replace?e.replace:e.push)(_,p.state,p)},[t,e,l,a,s])}W.createContext(null);function fc(s,{relative:t}={}){let{matches:e}=W.useContext(ci),{pathname:r}=wa(),a=JSON.stringify(sA(e));return W.useMemo(()=>aA(s,JSON.parse(a),r,t==="path"),[s,a,r,t])}function UI(s,t){return hA(s,t)}function hA(s,t,e,r){var it;de(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=W.useContext(Cr),{matches:c}=W.useContext(ci),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let Z=T&&T.path||"";fA(p,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let b=wa(),D;if(t){let Z=typeof t=="string"?sl(t):t;de(_==="/"||((it=Z.pathname)==null?void 0:it.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),D=Z}else D=b;let N=D.pathname||"/",G=N;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");G="/"+N.replace(/^\//,"").split("/").slice(Z.length).join("/")}let z=!l&&e&&e.matches&&e.matches.length>0?e.matches:nA(s,{pathname:G});Sr(T||z!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Sr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=jI(z&&z.map(Z=>Object.assign({},Z,{params:Object.assign({},m,Z.params),pathname:ri([_,a.encodeLocation?a.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:ri([_,a.encodeLocation?a.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,e,r);return t&&Y?W.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},Y):Y}function BI(){let s=YI(),t=xI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=W.createElement(W.Fragment,null,W.createElement("p",null,"💿 Hey developer 👋"),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:l},"ErrorBoundary")," or"," ",W.createElement("code",{style:l},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},t),e?W.createElement("pre",{style:a},e):null,c)}var zI=W.createElement(BI,null),qI=class extends W.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){console.error("React Router caught the following error during render",s,t)}render(){return this.state.error!==void 0?W.createElement(ci.Provider,{value:this.props.routeContext},W.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FI({routeContext:s,match:t,children:e}){let r=W.useContext(al);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(ci.Provider,{value:s},e)}function jI(s,t=[],e=null,r=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let a=s,l=e==null?void 0:e.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);de(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(e)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=e,b=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,b=!1,D=null,N=null;e&&(T=l&&p.route.id?l[p.route.id]:void 0,D=p.route.errorElement||zI,c&&(d<0&&_===0?(fA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):d===_&&(b=!0,N=p.route.hydrateFallbackElement||null)));let G=t.concat(a.slice(0,_+1)),z=()=>{let Y;return T?Y=D:b?Y=N:p.route.Component?Y=W.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=m,W.createElement(FI,{match:p,routeContext:{outlet:m,matches:G,isDataRoute:e!=null},children:Y})};return e&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?W.createElement(qI,{location:e.location,revalidation:e.revalidation,component:D,error:T,children:z(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):z()},null)}function bp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GI(s){let t=W.useContext(al);return de(t,bp(s)),t}function HI(s){let t=W.useContext(Ff);return de(t,bp(s)),t}function QI(s){let t=W.useContext(ci);return de(t,bp(s)),t}function wp(s){let t=QI(s),e=t.matches[t.matches.length-1];return de(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function KI(){return wp("useRouteId")}function YI(){var r;let s=W.useContext(Ap),t=HI("useRouteError"),e=wp("useRouteError");return s!==void 0?s:(r=t.errors)==null?void 0:r[e]}function $I(){let{router:s}=GI("useNavigate"),t=wp("useNavigate"),e=W.useRef(!1);return cA(()=>{e.current=!0}),W.useCallback(async(a,l={})=>{Sr(e.current,uA),e.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:t,...l}))},[s,t])}var dT={};function fA(s,t,e){!t&&!dT[s]&&(dT[s]=!0,Sr(!1,e))}W.memo(XI);function XI({routes:s,future:t,state:e}){return hA(s,void 0,e,t)}function zg(s){de(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZI({basename:s="/",children:t=null,location:e,navigationType:r="POP",navigator:a,static:l=!1}){de(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=W.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof e=="string"&&(e=sl(e));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:b="default"}=e,D=W.useMemo(()=>{let N=si(m,c);return N==null?null:{location:{pathname:N,search:p,hash:_,state:T,key:b},navigationType:r}},[c,m,p,_,T,b,r]);return Sr(D!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:W.createElement(Cr.Provider,{value:d},W.createElement(cc.Provider,{children:t,value:D}))}function WI({children:s,location:t}){return UI(qg(s),t)}function qg(s,t=[]){let e=[];return W.Children.forEach(s,(r,a)=>{if(!W.isValidElement(r))return;let l=[...t,a];if(r.type===W.Fragment){e.push.apply(e,qg(r.props.children,l));return}de(r.type===zg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),de(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=qg(r.props.children,l)),e.push(c)}),e}var af="get",of="application/x-www-form-urlencoded";function jf(s){return s!=null&&typeof s.tagName=="string"}function JI(s){return jf(s)&&s.tagName.toLowerCase()==="button"}function t1(s){return jf(s)&&s.tagName.toLowerCase()==="form"}function e1(s){return jf(s)&&s.tagName.toLowerCase()==="input"}function n1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function r1(s,t){return s.button===0&&(!t||t==="_self")&&!n1(s)}var Zh=null;function i1(){if(Zh===null)try{new FormData(document.createElement("form"),0),Zh=!1}catch{Zh=!0}return Zh}var s1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(s){return s!=null&&!s1.has(s)?(Sr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):s}function a1(s,t){let e,r,a,l,c;if(t1(s)){let d=s.getAttribute("action");r=d?si(d,t):null,e=s.getAttribute("method")||af,a=Sg(s.getAttribute("enctype"))||of,l=new FormData(s)}else if(JI(s)||e1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?si(m,t):null,e=s.getAttribute("formmethod")||d.getAttribute("method")||af,a=Sg(s.getAttribute("formenctype"))||Sg(d.getAttribute("enctype"))||of,l=new FormData(d,s),!i1()){let{name:p,type:_,value:T}=s;if(_==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(jf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=af,r=null,a=of,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:l,body:c}}function Sp(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}async function o1(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function u1(s,t,e){let r=await Promise.all(s.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await o1(l,e);return c.links?c.links():[]}return[]}));return d1(r.flat(1).filter(l1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function mT(s,t,e,r,a,l){let c=(m,p)=>e[p]?m.route.id!==e[p].route.id:!0,d=(m,p)=>{var _;return e[p].pathname!==m.pathname||((_=e[p].route.path)==null?void 0:_.endsWith("*"))&&e[p].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?t.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=e[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function c1(s,t,{includeHydrateFallback:e}={}){return h1(s.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function h1(s){return[...new Set(s)]}function f1(s){let t={},e=Object.keys(s).sort();for(let r of e)t[r]=s[r];return t}function d1(s,t){let e=new Set;return new Set(t),s.reduce((r,a)=>{let l=JSON.stringify(f1(a));return e.has(l)||(e.add(l),r.push({key:l,link:a})),r},[])}var m1=new Set([100,101,204,205]);function g1(s,t){let e=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e.pathname==="/"?e.pathname="_root.data":t&&si(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function dA(){let s=W.useContext(al);return Sp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function p1(){let s=W.useContext(Ff);return Sp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Rp=W.createContext(void 0);Rp.displayName="FrameworkContext";function mA(){let s=W.useContext(Rp);return Sp(s,"You must render this element inside a <HydratedRouter> element"),s}function y1(s,t){let e=W.useContext(Rp),[r,a]=W.useState(!1),[l,c]=W.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=t,b=W.useRef(null);W.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let G=Y=>{Y.forEach(it=>{c(it.isIntersecting)})},z=new IntersectionObserver(G,{threshold:.5});return b.current&&z.observe(b.current),()=>{z.disconnect()}}},[s]),W.useEffect(()=>{if(r){let G=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(G)}}},[r]);let D=()=>{a(!0)},N=()=>{a(!1),c(!1)};return e?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Ru(d,D),onBlur:Ru(m,N),onMouseEnter:Ru(p,D),onMouseLeave:Ru(_,N),onTouchStart:Ru(T,D)}]:[!1,b,{}]}function Ru(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function _1({page:s,...t}){let{router:e}=dA(),r=W.useMemo(()=>nA(e.routes,s,e.basename),[e.routes,s,e.basename]);return r?W.createElement(E1,{page:s,matches:r,...t}):null}function v1(s){let{manifest:t,routeModules:e}=mA(),[r,a]=W.useState([]);return W.useEffect(()=>{let l=!1;return u1(s,t,e).then(c=>{l||a(c)}),()=>{l=!0}},[s,t,e]),r}function E1({page:s,matches:t,...e}){let r=wa(),{manifest:a,routeModules:l}=mA(),{basename:c}=dA(),{loaderData:d,matches:m}=p1(),p=W.useMemo(()=>mT(s,t,m,a,r,"data"),[s,t,m,a,r]),_=W.useMemo(()=>mT(s,t,m,a,r,"assets"),[s,t,m,a,r]),T=W.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let N=new Set,G=!1;if(t.forEach(Y=>{var Z;let it=a.routes[Y.route.id];!it||!it.hasLoader||(!p.some(dt=>dt.route.id===Y.route.id)&&Y.route.id in d&&((Z=l[Y.route.id])!=null&&Z.shouldRevalidate)||it.hasClientLoader?G=!0:N.add(Y.route.id))}),N.size===0)return[];let z=g1(s,c);return G&&N.size>0&&z.searchParams.set("_routes",t.filter(Y=>N.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[c,d,r,a,p,t,s,l]),b=W.useMemo(()=>c1(_,a),[_,a]),D=v1(_);return W.createElement(W.Fragment,null,T.map(N=>W.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...e})),b.map(N=>W.createElement("link",{key:N,rel:"modulepreload",href:N,...e})),D.map(({key:N,link:G})=>W.createElement("link",{key:N,...G})))}function T1(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var gA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gA&&(window.__reactRouterVersion="7.5.1")}catch{}function A1({basename:s,children:t,window:e}){let r=W.useRef();r.current==null&&(r.current=uI({window:e,v5Compat:!0}));let a=r.current,[l,c]=W.useState({action:a.action,location:a.location}),d=W.useCallback(m=>{W.startTransition(()=>c(m))},[c]);return W.useLayoutEffect(()=>a.listen(d),[a,d]),W.createElement(ZI,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:a})}var pA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=W.forwardRef(function({onClick:t,discover:e="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...b},D){let{basename:N}=W.useContext(Cr),G=typeof p=="string"&&pA.test(p),z,Y=!1;if(typeof p=="string"&&G&&(z=p,gA))try{let R=new URL(window.location.href),M=p.startsWith("//")?new URL(R.protocol+p):new URL(p),P=si(M.pathname,N);M.origin===R.origin&&P!=null?p=P+M.search+M.hash:Y=!0}catch{Sr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let it=PI(p,{relative:a}),[Z,dt,ht]=y1(r,b),vt=R1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function V(R){t&&t(R),R.defaultPrevented||vt(R)}let S=W.createElement("a",{...b,...ht,href:z||it,onClick:Y||l?t:V,ref:T1(D,dt),target:m,"data-discover":!G&&e==="render"?"true":void 0});return Z&&!G?W.createElement(W.Fragment,null,S,W.createElement(_1,{page:it})):S});ua.displayName="Link";var b1=W.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=fc(c,{relative:p.relative}),b=wa(),D=W.useContext(Ff),{navigator:N,basename:G}=W.useContext(Cr),z=D!=null&&x1(T)&&d===!0,Y=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,it=b.pathname,Z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;e||(it=it.toLowerCase(),Z=Z?Z.toLowerCase():null,Y=Y.toLowerCase()),Z&&G&&(Z=si(Z,G)||Z);const dt=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ht=it===Y||!a&&it.startsWith(Y)&&it.charAt(dt)==="/",vt=Z!=null&&(Z===Y||!a&&Z.startsWith(Y)&&Z.charAt(Y.length)==="/"),V={isActive:ht,isPending:vt,isTransitioning:z},S=ht?t:void 0,R;typeof r=="function"?R=r(V):R=[r,ht?"active":null,vt?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(V):l;return W.createElement(ua,{...p,"aria-current":S,className:R,ref:_,style:M,to:c,viewTransition:d},typeof m=="function"?m(V):m)});b1.displayName="NavLink";var w1=W.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:r,replace:a,state:l,method:c=af,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...b},D)=>{let N=C1(),G=V1(d,{relative:p}),z=c.toLowerCase()==="get"?"get":"post",Y=typeof d=="string"&&pA.test(d),it=Z=>{if(m&&m(Z),Z.defaultPrevented)return;Z.preventDefault();let dt=Z.nativeEvent.submitter,ht=(dt==null?void 0:dt.getAttribute("formmethod"))||c;N(dt||Z.currentTarget,{fetcherKey:t,method:ht,navigate:e,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return W.createElement("form",{ref:D,method:z,action:G,onSubmit:r?m:it,...b,"data-discover":!Y&&s==="render"?"true":void 0})});w1.displayName="Form";function S1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yA(s){let t=W.useContext(al);return de(t,S1(s)),t}function R1(s,{target:t,replace:e,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=LI(),m=wa(),p=fc(s,{relative:l});return W.useCallback(_=>{if(r1(_,t)){_.preventDefault();let T=e!==void 0?e:Gu(m)===Gu(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,e,r,t,s,a,l,c])}var I1=0,D1=()=>`__${String(++I1)}__`;function C1(){let{router:s}=yA("useSubmit"),{basename:t}=W.useContext(Cr),e=KI();return W.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=a1(r,t);if(a.navigate===!1){let _=a.fetcherKey||D1();await s.fetch(_,e,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,t,e])}function V1(s,{relative:t}={}){let{basename:e}=W.useContext(Cr),r=W.useContext(ci);de(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...fc(s||".",{relative:t})},c=wa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:ri([e,l.pathname])),Gu(l)}function x1(s,t={}){let e=W.useContext(lA);de(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yA("useViewTransitionState"),a=fc(s,{relative:t.relative});if(!e.isTransitioning)return!1;let l=si(e.currentLocation.pathname,r)||e.currentLocation.pathname,c=si(e.nextLocation.pathname,r)||e.nextLocation.pathname;return _f(a.pathname,c)!=null||_f(a.pathname,l)!=null}new TextEncoder;[...m1];const N1="/clicker/assets/click-pWWDwmzr.png",O1=()=>{};var gT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},M1=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const a=s[e++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[e++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[e++],c=s[e++],d=s[e++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(m>>10)),t[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[e++],c=s[e++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},vA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,D=p&63;m||(D=64,c||(b=64)),r.push(e[_],e[T],e[b],e[D])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(_A(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):M1(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=e[s.charAt(a++)],d=a<s.length?e[s.charAt(a)]:0;++a;const p=a<s.length?e[s.charAt(a)]:64;++a;const T=a<s.length?e[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new P1;const b=l<<2|d>>4;if(r.push(b),p!==64){const D=d<<4&240|p>>2;if(r.push(D),T!==64){const N=p<<6&192|T;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class P1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L1=function(s){const t=_A(s);return vA.encodeByteArray(t,!0)},vf=function(s){return L1(s).replace(/\./g,"")},EA=function(s){try{return vA.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ef(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!k1(e)||(s[e]=Ef(s[e],t[e]));return s}function k1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=()=>TA().__FIREBASE_DEFAULTS__,B1=()=>{if(typeof process>"u"||typeof gT>"u")return;const s=gT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},z1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&EA(s[1]);return t&&JSON.parse(t)},AA=()=>{try{return O1()||U1()||B1()||z1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},bA=()=>{var s;return(s=AA())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[vf(JSON.stringify(e)),vf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j1(){var s;const t=(s=AA())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G1(){return typeof window<"u"||wA()}function wA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function SA(){return!j1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RA(){try{return typeof indexedDB=="object"}catch{return!1}}function H1(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="FirebaseError";class Sa extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=Q1,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gf.prototype.create)}}class Gf{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?K1(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Sa(a,d,r)}}function K1(s,t){return s.replace(Y1,(e,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const Y1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Lo(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const a of e){if(!r.includes(a))return!1;const l=s[a],c=t[a];if(yT(l)&&yT(c)){if(!Lo(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!e.includes(a))return!1;return!0}function yT(s){return s!==null&&typeof s=="object"}function $1(s,t){const e=new X1(s,t);return e.subscribe.bind(e)}class X1{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let a;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");Z1(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:r},a.next===void 0&&(a.next=Rg),a.error===void 0&&(a.error=Rg),a.complete===void 0&&(a.complete=Rg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z1(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(s){return s&&s._delegate?s._delegate:s}class ma{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new q1;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tD(t))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=ea){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ea){return this.instances.has(t)}getOptions(t=ea){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,e){var r;const a=this.normalizeInstanceIdentifier(e),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const a of r)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J1(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ea){return this.component?this.component.multipleInstances?t:ea:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J1(s){return s===ea?void 0:s}function tD(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new W1(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=[];var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const DA={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},eD=Pt.INFO,nD={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},rD=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),a=nD[t];if(a)console[a](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dp{constructor(t){this.name=t,this._logLevel=eD,this._logHandler=rD,this._userLogHandler=null,Ip.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}function iD(s){Ip.forEach(t=>{t.setLogLevel(s)})}function sD(s,t){for(const e of Ip){let r=null;t&&t.level&&(r=DA[t.level]),s===null?e.userLogHandler=null:e.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:Pt[l].toLowerCase(),message:d,args:c,type:a.name})}}}const aD=(s,t)=>t.some(e=>s instanceof e);let _T,vT;function oD(){return _T||(_T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lD(){return vT||(vT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CA=new WeakMap,Fg=new WeakMap,VA=new WeakMap,Ig=new WeakMap,Cp=new WeakMap;function uD(s){const t=new Promise((e,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{e(Zi(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&CA.set(e,s)}).catch(()=>{}),Cp.set(t,s),t}function cD(s){if(Fg.has(s))return;const t=new Promise((e,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Fg.set(s,t)}let jg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Fg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||VA.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Zi(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function hD(s){jg=s(jg)}function fD(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(Dg(this),t,...e);return VA.set(r,t.sort?t.sort():[t]),Zi(r)}:lD().includes(s)?function(...t){return s.apply(Dg(this),t),Zi(CA.get(this))}:function(...t){return Zi(s.apply(Dg(this),t))}}function dD(s){return typeof s=="function"?fD(s):(s instanceof IDBTransaction&&cD(s),aD(s,oD())?new Proxy(s,jg):s)}function Zi(s){if(s instanceof IDBRequest)return uD(s);if(Ig.has(s))return Ig.get(s);const t=dD(s);return t!==s&&(Ig.set(s,t),Cp.set(t,s)),t}const Dg=s=>Cp.get(s);function mD(s,t,{blocked:e,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,t),d=Zi(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Zi(c.result),m.oldVersion,m.newVersion,Zi(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const gD=["get","getKey","getAll","getAllKeys","count"],pD=["put","add","delete","clear"],Cg=new Map;function ET(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Cg.get(t))return Cg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,a=pD.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(a||gD.includes(e)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[e](...d),a&&m.done]))[0]};return Cg.set(t,l),l}hD(s=>({...s,get:(t,e,r)=>ET(t,e)||s.get(t,e,r),has:(t,e)=>!!ET(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(_D(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function _D(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Af="@firebase/app",Gg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Dp("@firebase/app"),vD="@firebase/app-compat",ED="@firebase/analytics-compat",TD="@firebase/analytics",AD="@firebase/app-check-compat",bD="@firebase/app-check",wD="@firebase/auth",SD="@firebase/auth-compat",RD="@firebase/database",ID="@firebase/data-connect",DD="@firebase/database-compat",CD="@firebase/functions",VD="@firebase/functions-compat",xD="@firebase/installations",ND="@firebase/installations-compat",OD="@firebase/messaging",MD="@firebase/messaging-compat",PD="@firebase/performance",LD="@firebase/performance-compat",kD="@firebase/remote-config",UD="@firebase/remote-config-compat",BD="@firebase/storage",zD="@firebase/storage-compat",qD="@firebase/firestore",FD="@firebase/vertexai",jD="@firebase/firestore-compat",GD="firebase",HD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]",QD={[Af]:"fire-core",[vD]:"fire-core-compat",[TD]:"fire-analytics",[ED]:"fire-analytics-compat",[bD]:"fire-app-check",[AD]:"fire-app-check-compat",[wD]:"fire-auth",[SD]:"fire-auth-compat",[RD]:"fire-rtdb",[ID]:"fire-data-connect",[DD]:"fire-rtdb-compat",[CD]:"fire-fn",[VD]:"fire-fn-compat",[xD]:"fire-iid",[ND]:"fire-iid-compat",[OD]:"fire-fcm",[MD]:"fire-fcm-compat",[PD]:"fire-perf",[LD]:"fire-perf-compat",[kD]:"fire-rc",[UD]:"fire-rc-compat",[BD]:"fire-gcs",[zD]:"fire-gcs-compat",[qD]:"fire-fst",[jD]:"fire-fst-compat",[FD]:"fire-vertex","fire-js":"fire-js",[GD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Map,ko=new Map,Uo=new Map;function Hu(s,t){try{s.container.addComponent(t)}catch(e){ai.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function xA(s,t){s.container.addOrOverwriteComponent(t)}function Bo(s){const t=s.name;if(Uo.has(t))return ai.debug(`There were multiple attempts to register component ${t}.`),!1;Uo.set(t,s);for(const e of ns.values())Hu(e,s);for(const e of ko.values())Hu(e,s);return!0}function NA(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function KD(s,t,e=es){NA(s,t).clearInstance(e)}function OA(s){return s.options!==void 0}function MA(s){return s==null?!1:s.settings!==void 0}function YD(){Uo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Gf("app","Firebase",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PA=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(s,t){const e=EA(s.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(e).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class XD extends PA{constructor(t,e,r,a){const l=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(t.apiKey!==void 0)super(t,c,a);else{const d=t;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},e),this._serverConfig.authIdToken&&TT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&TT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,ii(Af,Gg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Np(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=HD;function xp(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:es,automaticDataCollectionEnabled:!1},t),a=r.name;if(typeof a!="string"||!a)throw Yn.create("bad-app-name",{appName:String(a)});if(e||(e=bA()),!e)throw Yn.create("no-options");const l=ns.get(a);if(l){if(Lo(e,l.options)&&Lo(r,l.config))return l;throw Yn.create("duplicate-app",{appName:a})}const c=new IA(a);for(const m of Uo.values())c.addComponent(m);const d=new PA(e,r,c);return ns.set(a,d),d}function ZD(s,t){if(G1()&&!wA())throw Yn.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let e;OA(s)?e=s.options:e=s;const r=Object.assign(Object.assign({},t),e);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Yn.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=ko.get(l);if(c)return c.incRefCount(t.releaseOnDeref),c;const d=new IA(l);for(const p of Uo.values())d.addComponent(p);const m=new XD(e,t,l,d);return ko.set(l,m),m}function WD(s=es){const t=ns.get(s);if(!t&&s===es&&bA())return xp();if(!t)throw Yn.create("no-app",{appName:s});return t}function JD(){return Array.from(ns.values())}async function Np(s){let t=!1;const e=s.name;ns.has(e)?(t=!0,ns.delete(e)):ko.has(e)&&s.decRefCount()<=0&&(ko.delete(e),t=!0),t&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function ii(s,t,e){var r;let a=(r=QD[s])!==null&&r!==void 0?r:s;e&&(a+=`-${e}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ai.warn(d.join(" "));return}Bo(new ma(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}function LA(s,t){if(s!==null&&typeof s!="function")throw Yn.create("invalid-log-argument");sD(s,t)}function kA(s){iD(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",eC=1,Qu="firebase-heartbeat-store";let Vg=null;function UA(){return Vg||(Vg=mD(tC,eC,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Qu)}catch(e){console.warn(e)}}}}).catch(s=>{throw Yn.create("idb-open",{originalErrorMessage:s.message})})),Vg}async function nC(s){try{const e=(await UA()).transaction(Qu),r=await e.objectStore(Qu).get(BA(s));return await e.done,r}catch(t){if(t instanceof Sa)ai.warn(t.message);else{const e=Yn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ai.warn(e.message)}}}async function AT(s,t){try{const r=(await UA()).transaction(Qu,"readwrite");await r.objectStore(Qu).put(t,BA(s)),await r.done}catch(e){if(e instanceof Sa)ai.warn(e.message);else{const r=Yn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ai.warn(r.message)}}}function BA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=1024,iC=30;class sC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new oC(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=bT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>iC){const c=lC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ai.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bT(),{heartbeatsToSend:r,unsentEntries:a}=aC(this._heartbeatsCache.heartbeats),l=vf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ai.warn(e),""}}}function bT(){return new Date().toISOString().substring(0,10)}function aC(s,t=rC){const e=[];let r=s.slice();for(const a of s){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),wT(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),wT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class oC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RA()?H1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await nC(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return AT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return AT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function wT(s){return vf(JSON.stringify({version:2,heartbeats:s})).length}function lC(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(s){Bo(new ma("platform-logger",t=>new yD(t),"PRIVATE")),Bo(new ma("heartbeat",t=>new sC(t),"PRIVATE")),ii(Af,Gg,s),ii(Af,Gg,"esm2017"),ii("fire-js","")}uC("");const cC=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Sa,SDK_VERSION:Vp,_DEFAULT_ENTRY_NAME:es,_addComponent:Hu,_addOrOverwriteComponent:xA,_apps:ns,_clearComponents:YD,_components:Uo,_getProvider:NA,_isFirebaseApp:OA,_isFirebaseServerApp:MA,_registerComponent:Bo,_removeServiceInstance:KD,_serverApps:ko,deleteApp:Np,getApp:WD,getApps:JD,initializeApp:xp,initializeServerApp:ZD,onLog:LA,registerVersion:ii,setLogLevel:kA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,e){this._delegate=t,this.firebase=e,Hu(t,new ma("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Np(this._delegate)))}_getService(t,e=es){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(t);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:e})}_removeServiceInstance(t,e=es){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Hu(this._delegate,t)}_addOrOverwriteComponent(t){xA(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ST=new Gf("app-compat","Firebase",fC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(s){const t={},e={__esModule:!0,initializeApp:l,app:a,registerVersion:ii,setLogLevel:kA,onLog:LA,apps:null,SDK_VERSION:Vp,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:cC}};e.default=e,Object.defineProperty(e,"apps",{get:c});function r(p){delete t[p]}function a(p){if(p=p||es,!pT(t,p))throw ST.create("no-app",{appName:p});return t[p]}a.App=s;function l(p,_={}){const T=xp(p,_);if(pT(t,T.name))return t[T.name];const b=new s(T,e);return t[T.name]=b,b}function c(){return Object.keys(t).map(p=>t[p])}function d(p){const _=p.name,T=_.replace("-compat","");if(Bo(p)&&p.type==="PUBLIC"){const b=(D=a())=>{if(typeof D[T]!="function")throw ST.create("invalid-app-argument",{appName:_});return D[T]()};p.serviceProps!==void 0&&Ef(b,p.serviceProps),e[T]=b,s.prototype[T]=function(...D){return this._getService.bind(this,_).apply(this,p.multipleInstances?D:[])}}return p.type==="PUBLIC"?e[T]:null}function m(p,_){return _==="serverAuth"?null:_}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){const s=dC(hC);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:zA,extendNamespace:t,createSubscribe:$1,ErrorFactory:Gf,deepExtend:Ef});function t(e){Ef(s,e)}return s}const mC=zA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Dp("@firebase/app-compat"),gC="@firebase/app-compat",pC="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(s){ii(gC,pC,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=TA();if(s.firebase!==void 0){RT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&RT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Lu=mC;yC();var _C="firebase",vC="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lu.registerVersion(_C,vC,"app-compat");var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wi,qA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function R(){}R.prototype=S.prototype,V.D=S.prototype,V.prototype=new R,V.prototype.constructor=V,V.C=function(M,P,k){for(var C=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)C[Qe-2]=arguments[Qe];return S.prototype[P].apply(M,C)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,S,R){R||(R=0);var M=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)M[P]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(P=0;16>P;++P)M[P]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=V.g[0],R=V.g[1],P=V.g[2];var k=V.g[3],C=S+(k^R&(P^k))+M[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+M[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+M[2]+606105819&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+M[3]+3250441966&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+M[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+M[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+M[6]+2821735955&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+M[7]+4249261313&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+M[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+M[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+M[10]+4294925233&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+M[11]+2304563134&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+M[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+M[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+M[14]+2792965006&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+M[15]+1236535329&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(P^k&(R^P))+M[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+M[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+M[11]+643717713&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+M[0]+3921069994&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+M[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+M[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+M[15]+3634488961&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+M[4]+3889429448&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+M[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+M[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+M[3]+4107603335&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+M[8]+1163531501&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+M[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+M[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+M[7]+1735328473&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+M[12]+2368359562&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(R^P^k)+M[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+M[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+M[11]+1839030562&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+M[14]+4259657740&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+M[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+M[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+M[7]+4139469664&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+M[10]+3200236656&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+M[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+M[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+M[3]+3572445317&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+M[6]+76029189&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+M[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+M[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+M[15]+530742520&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+M[2]+3299628645&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(P^(R|~k))+M[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+M[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+M[14]+2878612391&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+M[5]+4237533241&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+M[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+M[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+M[10]+4293915773&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+M[1]+2240044497&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+M[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+M[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+M[6]+2734768916&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+M[13]+1309151649&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+M[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+M[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+M[2]+718787259&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+M[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+k&4294967295}r.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var R=S-this.blockSize,M=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=R;)a(this,V,k),k+=this.blockSize;if(typeof V=="string"){for(;k<S;)if(M[P++]=V.charCodeAt(k++),P==this.blockSize){a(this,M),P=0;break}}else for(;k<S;)if(M[P++]=V[k++],P==this.blockSize){a(this,M),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var R=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=R&255,R/=256;for(this.u(V),V=Array(16),S=R=0;4>S;++S)for(var M=0;32>M;M+=8)V[R++]=this.g[S]>>>M&255;return V};function l(V,S){var R=d;return Object.prototype.hasOwnProperty.call(R,V)?R[V]:R[V]=S(V)}function c(V,S){this.h=S;for(var R=[],M=!0,P=V.length-1;0<=P;P--){var k=V[P]|0;M&&k==S||(R[P]=k,M=!1)}this.g=R}var d={};function m(V){return-128<=V&&128>V?l(V,function(S){return new c([S|0],0>S?-1:0)}):new c([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return T;if(0>V)return z(p(-V));for(var S=[],R=1,M=0;V>=R;M++)S[M]=V/R|0,R*=4294967296;return new c(S,0)}function _(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return z(_(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(S,8)),M=T,P=0;P<V.length;P+=8){var k=Math.min(8,V.length-P),C=parseInt(V.substring(P,P+k),S);8>k?(k=p(Math.pow(S,k)),M=M.j(k).add(p(C))):(M=M.j(R),M=M.add(p(C)))}return M}var T=m(0),b=m(1),D=m(16777216);s=c.prototype,s.m=function(){if(G(this))return-z(this).m();for(var V=0,S=1,R=0;R<this.g.length;R++){var M=this.i(R);V+=(0<=M?M:4294967296+M)*S,S*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(N(this))return"0";if(G(this))return"-"+z(this).toString(V);for(var S=p(Math.pow(V,6)),R=this,M="";;){var P=dt(R,S).g;R=Y(R,P.j(S));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(V);if(R=P,N(R))return k+M;for(;6>k.length;)k="0"+k;M=k+M}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function N(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function G(V){return V.h==-1}s.l=function(V){return V=Y(this,V),G(V)?-1:N(V)?0:1};function z(V){for(var S=V.g.length,R=[],M=0;M<S;M++)R[M]=~V.g[M];return new c(R,~V.h).add(b)}s.abs=function(){return G(this)?z(this):this},s.add=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],M=0,P=0;P<=S;P++){var k=M+(this.i(P)&65535)+(V.i(P)&65535),C=(k>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);M=C>>>16,k&=65535,C&=65535,R[P]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Y(V,S){return V.add(z(S))}s.j=function(V){if(N(this)||N(V))return T;if(G(this))return G(V)?z(this).j(z(V)):z(z(this).j(V));if(G(V))return z(this.j(z(V)));if(0>this.l(D)&&0>V.l(D))return p(this.m()*V.m());for(var S=this.g.length+V.g.length,R=[],M=0;M<2*S;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<V.g.length;P++){var k=this.i(M)>>>16,C=this.i(M)&65535,Qe=V.i(P)>>>16,ge=V.i(P)&65535;R[2*M+2*P]+=C*ge,it(R,2*M+2*P),R[2*M+2*P+1]+=k*ge,it(R,2*M+2*P+1),R[2*M+2*P+1]+=C*Qe,it(R,2*M+2*P+1),R[2*M+2*P+2]+=k*Qe,it(R,2*M+2*P+2)}for(M=0;M<S;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=S;M<2*S;M++)R[M]=0;return new c(R,0)};function it(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function Z(V,S){this.g=V,this.h=S}function dt(V,S){if(N(S))throw Error("division by zero");if(N(V))return new Z(T,T);if(G(V))return S=dt(z(V),S),new Z(z(S.g),z(S.h));if(G(S))return S=dt(V,z(S)),new Z(z(S.g),S.h);if(30<V.g.length){if(G(V)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var R=b,M=S;0>=M.l(V);)R=ht(R),M=ht(M);var P=vt(R,1),k=vt(M,1);for(M=vt(M,2),R=vt(R,2);!N(M);){var C=k.add(M);0>=C.l(V)&&(P=P.add(R),k=C),M=vt(M,1),R=vt(R,1)}return S=Y(V,P.j(S)),new Z(P,S)}for(P=T;0<=V.l(S);){for(R=Math.max(1,Math.floor(V.m()/S.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),k=p(R),C=k.j(S);G(C)||0<C.l(V);)R-=M,k=p(R),C=k.j(S);N(k)&&(k=b),P=P.add(k),V=Y(V,C)}return new Z(P,V)}s.A=function(V){return dt(this,V).h},s.and=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)&V.i(M);return new c(R,this.h&V.h)},s.or=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)|V.i(M);return new c(R,this.h|V.h)},s.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),R=[],M=0;M<S;M++)R[M]=this.i(M)^V.i(M);return new c(R,this.h^V.h)};function ht(V){for(var S=V.g.length+1,R=[],M=0;M<S;M++)R[M]=V.i(M)<<1|V.i(M-1)>>>31;return new c(R,V.h)}function vt(V,S){var R=S>>5;S%=32;for(var M=V.g.length-R,P=[],k=0;k<M;k++)P[k]=0<S?V.i(k+R)>>>S|V.i(k+R+1)<<32-S:V.i(k+R);return new c(P,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,Wi=c}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FA,Nu,jA,lf,Hg,GA,HA,QA;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function a(h,y){if(y)t:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var U=h[w];if(!(U in v))break t;v=v[U]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,U={next:function(){if(!w&&v<h.length){var K=v++;return{value:y(K,h[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),h.apply(y,U)}}return function(){return h.apply(y,arguments)}}function b(h,y,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,b.apply(null,arguments)}function D(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function N(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,U,K){for(var at=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)at[Lt-2]=arguments[Lt];return y.prototype[U].apply(w,at)}}function G(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function z(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const U=h.length||0,K=w.length||0;h.length=U+K;for(let at=0;at<K;at++)h[U+at]=w[at]}else h.push(w)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function it(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function dt(h){return dt[" "](h),h}dt[" "]=function(){};var ht=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function vt(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function V(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,y){let v,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(v in w)h[v]=w[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function k(h){d.setTimeout(()=>{throw h},0)}function C(){var h=Ft;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Qe{constructor(){this.h=this.g=null}add(y,v){const w=ge.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var ge=new Y(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,_t=!1,Ft=new Qe,x=()=>{const h=d.Promise.resolve(void 0);lt=()=>{h.then(et)}};var et=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){k(v)}var y=ge;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}_t=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Ct(h,y){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ht){t:{try{dt(y.nodeName);var U=!0;break t}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:St[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ct.aa.h.call(this)}}N(Ct,st);var St={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),ne=0;function nr(h,y,v,w,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=U,this.key=++ne,this.da=this.fa=!1}function gi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vr(h){this.src=h,this.g={},this.h=0}Vr.prototype.add=function(h,y,v,w,U){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var at=_s(h,y,w,U);return-1<at?(y=h[at],v||(y.fa=!1)):(y=new nr(y,this.src,K,!!w,U),y.fa=v,h.push(y)),y};function ys(h,y){var v=y.type;if(v in h.g){var w=h.g[v],U=Array.prototype.indexOf.call(w,y,void 0),K;(K=0<=U)&&Array.prototype.splice.call(w,U,1),K&&(gi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function _s(h,y,v,w){for(var U=0;U<h.length;++U){var K=h[U];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==w)return U}return-1}var vs="closure_lm_"+(1e6*Math.random()|0),gl={};function Ic(h,y,v,w,U){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Ic(h,y[K],v,w,U);return null}return v=Dc(v),h&&h[Ue]?h.K(y,v,p(w)?!!w.capture:!1,U):Mn(h,y,v,!1,w,U)}function Mn(h,y,v,w,U,K){if(!y)throw Error("Invalid event type");var at=p(U)?!!U.capture:!!U,Lt=xa(h);if(Lt||(h[vs]=Lt=new Vr(h)),v=Lt.add(y,v,w,at,K),v.proxy)return v;if(w=_d(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)Et||(U=at),U===void 0&&(U=!1),h.addEventListener(y.toString(),w,U);else if(h.attachEvent)h.attachEvent(Es(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function _d(){function h(v){return y.call(h.src,h.listener,v)}const y=vd;return h}function pl(h,y,v,w,U){if(Array.isArray(y))for(var K=0;K<y.length;K++)pl(h,y[K],v,w,U);else w=p(w)?!!w.capture:!!w,v=Dc(v),h&&h[Ue]?(h=h.i,y=String(y).toString(),y in h.g&&(K=h.g[y],v=_s(K,v,w,U),-1<v&&(gi(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete h.g[y],h.h--)))):h&&(h=xa(h))&&(y=h.g[y.toString()],h=-1,y&&(h=_s(y,v,w,U)),(v=-1<h?y[h]:null)&&Va(v))}function Va(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ue])ys(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Es(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=xa(y))?(ys(v,h),v.h==0&&(v.src=null,y[vs]=null)):gi(h)}}}function Es(h){return h in gl?gl[h]:gl[h]="on"+h}function vd(h,y){if(h.da)h=!0;else{y=new Ct(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&Va(h),h=v.call(w,y)}return h}function xa(h){return h=h[vs],h instanceof Vr?h:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dc(h){return typeof h=="function"?h:(h[yl]||(h[yl]=function(y){return h.handleEvent(y)}),h[yl])}function pe(){ct.call(this),this.i=new Vr(this),this.M=this,this.F=null}N(pe,ct),pe.prototype[Ue]=!0,pe.prototype.removeEventListener=function(h,y,v,w){pl(this,h,y,v,w)};function Qt(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new st(y,h);else if(y instanceof st)y.target=y.target||h;else{var U=y;y=new st(w,h),M(y,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var at=y.g=v[K];U=bn(at,w,!0,y)&&U}if(at=y.g=h,U=bn(at,w,!0,y)&&U,U=bn(at,w,!1,y)&&U,v)for(K=0;K<v.length;K++)at=y.g=v[K],U=bn(at,w,!1,y)&&U}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)gi(v[w]);delete h.g[y],h.h--}}this.F=null},pe.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},pe.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function bn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,K=0;K<y.length;++K){var at=y[K];if(at&&!at.da&&at.capture==v){var Lt=at.listener,Oe=at.ha||at.src;at.fa&&ys(h.i,at),U=Lt.call(Oe,w)!==!1&&U}}return U&&!w.defaultPrevented}function en(h,y,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Cc(h){h.g=en(()=>{h.g=null,h.i&&(h.i=!1,Cc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ed extends ct{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Cc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(h){ct.call(this),this.h=h,this.g={}}N(Ts,ct);var As=[];function bs(h){vt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Va(y)},h),h.g={}}Ts.prototype.N=function(){Ts.aa.N.call(this),bs(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=d.JSON.stringify,Na=d.JSON.parse,ws=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function _l(){}_l.prototype.h=null;function vl(h){return h.h||(h.h=h.i())}function El(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nr(){st.call(this,"d")}N(Nr,st);function Tl(){st.call(this,"c")}N(Tl,st);var rr={},Al=null;function pi(){return Al=Al||new pe}rr.La="serverreachability";function Oa(h){st.call(this,rr.La,h)}N(Oa,st);function yi(h){const y=pi();Qt(y,new Oa(y))}rr.STAT_EVENT="statevent";function Vc(h,y){st.call(this,rr.STAT_EVENT,h),this.stat=y}N(Vc,st);function ae(h){const y=pi();Qt(y,new Vc(y,h))}rr.Ma="timingevent";function Ne(h,y){st.call(this,rr.Ma,h),this.size=y}N(Ne,st);function Re(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function bl(h,y,v,w,U,K){h.info(function(){if(h.g)if(K)for(var at="",Lt=K.split("&"),Oe=0;Oe<Lt.length;Oe++){var kt=Lt[Oe].split("=");if(1<kt.length){var ze=kt[0];kt=kt[1];var Me=ze.split("_");at=2<=Me.length&&Me[1]=="type"?at+(ze+"="+kt+"&"):at+(ze+"=redacted&")}}else at=null;else at=K;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+y+`
`+v+`
`+at})}function Td(h,y,v,w,U,K,at){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+y+`
`+v+`
`+K+" "+at})}function _i(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ss(h,v)+(w?" "+w:"")})}function xc(h,y){h.info(function(){return"TIMEOUT: "+y})}Pn.prototype.info=function(){};function Ss(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var at=1;at<U.length;at++)U[at]=""}}}}return $n(v)}catch{return y}}var vi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Or={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function sr(){}N(sr,_l),sr.prototype.g=function(){return new XMLHttpRequest},sr.prototype.i=function(){return{}},ir=new sr;function un(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new Ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ee}function Ee(){this.i=null,this.g="",this.h=!1}var wl={},Ma={};function Xn(h,y,v){h.L=1,h.v=Vs(wn(y)),h.m=v,h.P=!0,Mr(h,null)}function Mr(h,y){h.F=Date.now(),Rs(h),h.A=wn(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Vl(v.i,"t",w),h.C=0,v=h.j.J,h.h=new Ee,h.g=Kc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Ed(b(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var U="readystatechange";Array.isArray(U)||(U&&(As[0]=U.toString()),U=As);for(var K=0;K<U.length;K++){var at=Ic(v,U[K],w||y.handleEvent,!1,y.h||y);if(!at)break;y.g[at.key]=at}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),yi(),bl(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const y=this.M;y&&Bn(h)==3?y.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)t:{const Me=Bn(this.g);var y=this.g.Ba();const Fr=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Bc(this.g)))){this.J||Me!=4||y==7||(y==8||0>=Fr?yi(3):yi(2)),Ei(this);var v=this.g.Z();this.X=v;e:if(Nc(this)){var w=Bc(this.g);h="";var U=w.length,K=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ke(this),ar(this);var at="";break e}this.h.i=new d.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!(K&&y==U-1)});w.length=0,this.h.g+=h,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=v==200,Td(this.i,this.u,this.A,this.l,this.R,Me,v),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Oe=this.g;if((Lt=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!it(Lt)){var kt=Lt;break e}}kt=null}if(v=kt)_i(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Is(this,v);else{this.o=!1,this.s=3,ae(12),Ke(this),ar(this);break t}}if(this.P){v=!0;let Ye;for(;!this.J&&this.C<at.length;)if(Ye=Oc(this,at),Ye==Ma){Me==4&&(this.s=4,ae(14),v=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==wl){this.s=4,ae(15),_i(this.i,this.l,at,"[Invalid Chunk]"),v=!1;break}else _i(this.i,this.l,Ye,null),Is(this,Ye);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||at.length!=0||this.h.h||(this.s=1,ae(16),v=!1),this.o=this.o&&v,!v)_i(this.i,this.l,at,"[Invalid Chunked Response]"),Ke(this),ar(this);else if(0<at.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),Us(ze),ze.M=!0,ae(11))}}else _i(this.i,this.l,at,null),Is(this,at);Me==4&&Ke(this),this.o&&!this.J&&(Me==4?Gc(this.j,this):(this.o=!1,Rs(this)))}else Rd(this.g),v==400&&0<at.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),Ke(this),ar(this)}}}catch{}finally{}};function Nc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Oc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Ma:(v=Number(y.substring(v,w)),isNaN(v)?wl:(w+=1,w+v>y.length?Ma:(y=y.slice(w,w+v),h.C=w+v,y)))}un.prototype.cancel=function(){this.J=!0,Ke(this)};function Rs(h){h.S=Date.now()+h.I,Mc(h,h.I)}function Mc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Re(b(h.ba,h),y)}function Ei(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(xc(this.i,this.A),this.L!=2&&(yi(),ae(17)),Ke(this),this.s=2,ar(this)):Mc(this,this.S-h)};function ar(h){h.j.G==0||h.J||Gc(h.j,h)}function Ke(h){Ei(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,bs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Is(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Sl(v.h,h))){if(!h.K&&Sl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Qa(v),Ga(v);else break t;Pl(v),ae(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Re(b(v.Za,v),6e3));if(1>=La(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else qr(v,11)}else if((h.K||v.g==h)&&Qa(v),!it(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let kt=U[y];if(v.T=kt[0],kt=kt[1],v.G==2)if(kt[0]=="c"){v.K=kt[1],v.ia=kt[2];const ze=kt[3];ze!=null&&(v.la=ze,v.j.info("VER="+v.la));const Me=kt[4];Me!=null&&(v.Aa=Me,v.j.info("SVER="+v.Aa));const Fr=kt[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(w=1.5*Fr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Ye=h.g;if(Ye){const dr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dr){var K=w.h;K.g||dr.indexOf("spdy")==-1&&dr.indexOf("quic")==-1&&dr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ka(K,K.h),K.h=null))}if(w.D){const kl=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(w.ya=kl,Zt(w.I,w.D,kl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var at=h;if(w.qa=Qc(w,w.J?w.ia:null,w.W),at.K){cn(w.h,at);var Lt=at,Oe=w.L;Oe&&(Lt.I=Oe),Lt.B&&(Ei(Lt),Rs(Lt)),w.g=at}else Fc(w);0<v.i.length&&Ha(v)}else kt[0]!="stop"&&kt[0]!="close"||qr(v,7);else v.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?qr(v,7):Ol(v):kt[0]!="noop"&&v.l&&v.l.ta(kt),v.v=0)}}yi(4)}catch{}}var Pc=class{constructor(h,y){this.g=h,this.map=y}};function Pr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function La(h){return h.h?1:h.g?h.g.size:0}function Sl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ka(h,y){h.g?h.g.add(y):h.h=y}function cn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Pr.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return G(h.i)}function Ad(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function Ua(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function Il(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Ua(h),w=Ad(h),U=w.length,K=0;K<U;K++)y.call(void 0,w[K],v&&v[K],h)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),U=null;if(0<=w){var K=h[v].substring(0,w);U=h[v].substring(w+1)}else K=h[v];y(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ie(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ie){this.h=h.h,Cs(this,h.j),this.o=h.o,this.g=h.g,Ti(this,h.s),this.l=h.l;var y=h.i,v=new kr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Lr(this,v),this.m=h.m}else h&&(y=String(h).match(Ds))?(this.h=!1,Cs(this,y[1]||"",!0),this.o=Ln(y[2]||""),this.g=Ln(y[3]||"",!0),Ti(this,y[4]),this.l=Ln(y[5]||"",!0),Lr(this,y[6]||"",!0),this.m=Ln(y[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}Ie.prototype.toString=function(){var h=[],y=this.j;y&&h.push(xs(y,Dl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(xs(y,Dl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(xs(v,v.charAt(0)=="/"?wd:Cl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",xs(v,Ba)),h.join("")};function wn(h){return new Ie(h)}function Cs(h,y,v){h.j=v?Ln(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ti(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Lr(h,y,v){y instanceof kr?(h.i=y,kc(h.i,h.h)):(v||(y=xs(y,Sd)),h.i=new kr(y,h.h))}function Zt(h,y,v){h.i.set(y,v)}function Vs(h){return Zt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ln(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Lc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Lc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Dl=/[#\/\?@]/g,Cl=/[#\?:]/g,wd=/[#\?]/g,Sd=/[#\?@]/g,Ba=/#/g;function kr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&bd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=kr.prototype,s.add=function(h,y){kn(this),this.i=null,h=or(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Ur(h,y){kn(h),y=or(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Br(h,y){return kn(h),y=or(h,y),h.g.has(y)}s.forEach=function(h,y){kn(this),this.g.forEach(function(v,w){v.forEach(function(U){h.call(y,U,w,this)},this)},this)},s.na=function(){kn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const U=h[w];for(let K=0;K<U.length;K++)v.push(y[w])}return v},s.V=function(h){kn(this);let y=[];if(typeof h=="string")Br(this,h)&&(y=y.concat(this.g.get(or(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return kn(this),this.i=null,h=or(this,h),Br(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Vl(h,y,v){Ur(h,y),0<v.length&&(h.i=null,h.g.set(or(h,y),G(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const K=encodeURIComponent(String(w)),at=this.V(w);for(w=0;w<at.length;w++){var U=K;at[w]!==""&&(U+="="+encodeURIComponent(String(at[w]))),h.push(U)}}return this.i=h.join("&")};function or(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function kc(h,y){y&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(v,w){var U=w.toLowerCase();w!=U&&(Ur(this,w),Vl(this,U,v))},h)),h.j=y}function Ns(h,y){const v=new Pn;if(d.Image){const w=new Image;w.onload=D(Un,v,"TestLoadImage: loaded",!0,y,w),w.onerror=D(Un,v,"TestLoadImage: error",!1,y,w),w.onabort=D(Un,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=D(Un,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Zn(h,y){const v=new Pn,w=new AbortController,U=setTimeout(()=>{w.abort(),Un(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(K=>{clearTimeout(U),K.ok?Un(v,"TestPingServer: ok",!0,y):Un(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Un(v,"TestPingServer: error",!1,y)})}function Un(h,y,v,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(v)}catch{}}function Os(){this.g=new ws}function lr(h,y,v){const w=v||"";try{Il(h,function(U,K){let at=U;p(U)&&(at=$n(U)),y.push(w+K+"="+encodeURIComponent(at))})}catch(U){throw y.push(w+"type="+encodeURIComponent("_badmap")),U}}function Ai(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Ai,_l),Ai.prototype.g=function(){return new zr(this.l,this.j)},Ai.prototype.i=function(h){return function(){return h}}({});function zr(h,y){pe.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(zr,pe),s=zr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,cr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ur(this):cr(this),this.readyState==3&&xl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,ur(this))},s.Qa=function(h){this.g&&(this.response=h,ur(this))},s.ga=function(){this.g&&ur(this)};function ur(h){h.readyState=4,h.l=null,h.j=null,h.v=null,cr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Nl(h){let y="";return vt(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Be(h,y,v){t:{for(w in v){var w=!1;break t}w=!0}w||(v=Nl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Zt(h,y,v))}function Gt(h){pe.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Gt,pe);var za=/^https?$/i,Ms=["POST","PUT"];s=Gt.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?vl(this.o):vl(ir),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Uc(this,K);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)v.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())v.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ms,y,void 0))||w||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,at]of v)this.g.setRequestHeader(K,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ps(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){Uc(this,K)}};function Uc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,qa(h),hr(h)}function qa(h){h.A||(h.A=!0,Qt(h,"complete"),Qt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qt(this,"complete"),Qt(this,"abort"),hr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hr(this,!0)),Gt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},s.bb=function(){Fa(this)};function Fa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Bn(h)!=4||h.Z()!=2)){if(h.u&&Bn(h)==4)en(h.Ea,0,h);else if(Qt(h,"readystatechange"),Bn(h)==4){h.h=!1;try{const at=h.Z();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var w;if(w=at===0){var U=String(h.D).match(Ds)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),w=!za.test(U?U.toLowerCase():"")}v=w}if(v)Qt(h,"complete"),Qt(h,"success");else{h.m=6;try{var K=2<Bn(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",qa(h)}}finally{hr(h)}}}}function hr(h,y){if(h.g){Ps(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Qt(h,"ready");try{v.onreadystatechange=w}catch{}}}function Ps(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Bn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Na(y)}};function Bc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rd(h){const y={};h=(h.g&&2<=Bn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(it(h[w]))continue;var v=P(h[w]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[U]||[];y[U]=K,K.push(v)}V(y,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function ja(h){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,h),this.cb=Ls("retryDelaySeedMs",1e4,h),this.Wa=Ls("forwardChannelMaxRetries",2,h),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Pr(h&&h.concurrentRequestLimit),this.Da=new Os,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ja.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,w){ae(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Qc(this,null,this.W),Ha(this)};function Ol(h){if(zc(h),h.G==3){var y=h.U++,v=wn(h.I);if(Zt(v,"SID",h.K),Zt(v,"RID",y),Zt(v,"TYPE","terminate"),ks(h,v),y=new un(h,h.j,y),y.L=2,y.v=Vs(wn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Kc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Rs(y)}Hc(h)}function Ga(h){h.g&&(Us(h),h.g.cancel(),h.g=null)}function zc(h){Ga(h),h.u&&(d.clearTimeout(h.u),h.u=null),Qa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ha(h){if(!Pa(h.h)&&!h.s){h.s=!0;var y=h.Ga;lt||x(),_t||(lt(),_t=!0),Ft.add(y,h),h.B=0}}function Id(h,y){return La(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Re(b(h.Ga,h,y),Ll(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new un(this,this.j,h);let K=this.o;if(this.S&&(K?(K=S(K),M(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=qc(this,U,y),v=wn(this.I),Zt(v,"RID",h),Zt(v,"CVER",22),this.D&&Zt(v,"X-HTTP-Session-Id",this.D),ks(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(Nl(K)))+"&"+y:this.m&&Be(v,this.m,K)),ka(this.h,U),this.Ua&&Zt(v,"TYPE","init"),this.P?(Zt(v,"$req",y),Zt(v,"SID","null"),U.T=!0,Xn(U,v,null)):Xn(U,v,y),this.G=2}}else this.G==3&&(h?Ml(this,h):this.i.length==0||Pa(this.h)||Ml(this))};function Ml(h,y){var v;y?v=y.l:v=h.U++;const w=wn(h.I);Zt(w,"SID",h.K),Zt(w,"RID",v),Zt(w,"AID",h.T),ks(h,w),h.m&&h.o&&Be(w,h.m,h.o),v=new un(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=qc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ka(h.h,v),Xn(v,w,y)}function ks(h,y){h.H&&vt(h.H,function(v,w){Zt(y,w,v)}),h.l&&Il({},function(v,w){Zt(y,w,v)})}function qc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?b(h.l.Na,h.l,h):null;t:{var U=h.i;let K=-1;for(;;){const at=["count="+v];K==-1?0<v?(K=U[0].g,at.push("ofs="+K)):K=0:at.push("ofs="+K);let Lt=!0;for(let Oe=0;Oe<v;Oe++){let kt=U[Oe].g;const ze=U[Oe].map;if(kt-=K,0>kt)K=Math.max(0,U[Oe].g-100),Lt=!1;else try{lr(ze,at,"req"+kt+"_")}catch{w&&w(ze)}}if(Lt){w=at.join("&");break t}}}return h=h.i.splice(0,v),y.D=h,w}function Fc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;lt||x(),_t||(lt(),_t=!0),Ft.add(y,h),h.v=0}}function Pl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Re(b(h.Fa,h),Ll(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,jc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Re(b(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),Ga(this),jc(this))};function Us(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function jc(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wn(h.qa);Zt(y,"RID","rpc"),Zt(y,"SID",h.K),Zt(y,"AID",h.T),Zt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Zt(y,"TO",h.ja),Zt(y,"TYPE","xmlhttp"),ks(h,y),h.m&&h.o&&Be(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Vs(wn(y)),v.m=null,v.P=!0,Mr(v,h)}s.Za=function(){this.C!=null&&(this.C=null,Ga(this),Pl(this),ae(19))};function Qa(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Gc(h,y){var v=null;if(h.g==y){Qa(h),Us(h),h.g=null;var w=2}else if(Sl(h.h,y))v=y.D,cn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=h.B;w=pi(),Qt(w,new Ne(w,v)),Ha(h)}else Fc(h);else if(U=y.s,U==3||U==0&&0<y.X||!(w==1&&Id(h,y)||w==2&&Pl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),U){case 1:qr(h,5);break;case 4:qr(h,10);break;case 3:qr(h,6);break;default:qr(h,2)}}}function Ll(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function qr(h,y){if(h.j.info("Error code "+y),y==2){var v=b(h.fb,h),w=h.Xa;const U=!w;w=new Ie(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Cs(w,"https"),Vs(w),U?Ns(w.toString(),v):Zn(w.toString(),v)}else ae(2);h.G=0,h.l&&h.l.sa(y),Hc(h),zc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function Hc(h){if(h.G=0,h.ka=[],h.l){const y=Rl(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ka,y),z(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function Qc(h,y,v){var w=v instanceof Ie?wn(v):new Ie(v);if(w.g!="")y&&(w.g=y+"."+w.g),Ti(w,w.s);else{var U=d.location;w=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var K=new Ie(null);w&&Cs(K,w),y&&(K.g=y),U&&Ti(K,U),v&&(K.l=v),w=K}return v=h.D,y=h.ya,v&&y&&Zt(w,v,y),Zt(w,"VER",h.la),ks(h,w),w}function Kc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Gt(new Ai({eb:v})):new Gt(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}s=Yc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ka(){}Ka.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){pe.call(this),this.g=new ja(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!it(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!it(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new fr(this)}N(hn,pe),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ol(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=$n(h),h=v);y.i.push(new Pc(y.Ya++,h)),y.G==3&&Ha(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,hn.aa.N.call(this)};function $c(h){Nr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}N($c,Nr);function Xc(){Tl.call(this),this.status=1}N(Xc,Tl);function fr(h){this.g=h}N(fr,Yc),fr.prototype.ua=function(){Qt(this.g,"a")},fr.prototype.ta=function(h){Qt(this.g,new $c(h))},fr.prototype.sa=function(h){Qt(this.g,new Xc)},fr.prototype.ra=function(){Qt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,QA=function(){return new Ka},HA=function(){return pi()},GA=rr,Hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vi.NO_ERROR=0,vi.TIMEOUT=8,vi.HTTP_ERROR=6,lf=vi,Or.COMPLETE="complete",jA=Or,El.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",pe.prototype.listen=pe.prototype.K,Nu=El,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,FA=Gt}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});const DT="@firebase/firestore",CT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Dp("@firebase/firestore");function Co(){return rs.logLevel}function EC(s){rs.setLogLevel(s)}function rt(s,...t){if(rs.logLevel<=Pt.DEBUG){const e=t.map(Op);rs.debug(`Firestore (${ol}): ${s}`,...e)}}function be(s,...t){if(rs.logLevel<=Pt.ERROR){const e=t.map(Op);rs.error(`Firestore (${ol}): ${s}`,...e)}}function Rr(s,...t){if(rs.logLevel<=Pt.WARN){const e=t.map(Op);rs.warn(`Firestore (${ol}): ${s}`,...e)}}function Op(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(s="Unexpected state"){const t=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+s;throw be(t),new Error(t)}function gt(s,t){s||ft()}function TC(s,t){s||ft()}function ut(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Sa{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class AC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(He.UNAUTHENTICATED))}shutdown(){}}class bC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class wC{constructor(t){this.t=t,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){gt(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,e(m)):Promise.resolve();let l=new tn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new tn,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new tn)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new KA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string"),new He(t)}}class SC{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class RC{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new SC(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IC{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,MA(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){gt(this.o===void 0);const r=l=>{l.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,rt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new VT(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(gt(typeof e.token=="string"),this.R=e.token,new VT(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=DC(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<e&&(r+=t.charAt(a[l]%62))}return r}}function bt(s,t){return s<t?-1:s>t?1:0}function Qg(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=s.codePointAt(e),a=t.codePointAt(e);if(r!==a){if(r<128&&a<128)return bt(r,a);{const l=Mp(),c=CC(l.encode(xT(s,e)),l.encode(xT(t,e)));return c!==0?c:bt(r,a)}}e+=r>65535?2:1}return bt(s.length,t.length)}function xT(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function CC(s,t){for(let e=0;e<s.length&&e<t.length;++e)if(s[e]!==t[e])return bt(s[e],t[e]);return bt(s.length,t.length)}function zo(s,t,e){return s.length===t.length&&s.every((r,a)=>e(r,t[a]))}function $A(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=-62135596800,OT=1e6;class he{static now(){return he.fromMillis(Date.now())}static fromDate(t){return he.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*OT);return new he(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<NT)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OT}_compareTo(t){return this.seconds===t.seconds?bt(this.nanoseconds,t.nanoseconds):bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-NT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static fromTimestamp(t){return new pt(t)}static min(){return new pt(new he(0,0))}static max(){return new pt(new he(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__name__";class vr{constructor(t,e,r){e===void 0?e=0:e>t.length&&ft(),r===void 0?r=t.length-e:r>t.length-e&&ft(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return vr.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof vr?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let a=0;a<r;a++){const l=vr.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return bt(t.length,e.length)}static compareSegments(t,e){const r=vr.isNumericId(t),a=vr.isNumericId(e);return r&&!a?-1:!r&&a?1:r&&a?vr.extractNumericId(t).compare(vr.extractNumericId(e)):Qg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Wi.fromString(t.substring(4,t.length-2))}}class Ot extends vr{construct(t,e,r){return new Ot(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new nt(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(a=>a.length>0))}return new Ot(e)}static emptyPath(){return new Ot([])}}const VC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends vr{construct(t,e,r){return new ue(t,e,r)}static isValidIdentifier(t){return VC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new ue([MT])}static fromServerFormat(t){const e=[];let r="",a=0;const l=()=>{if(r.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new nt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new nt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new nt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(e)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.path=t}static fromPath(t){return new ot(Ot.fromString(t))}static fromName(t){return new ot(Ot.fromString(t).popFirst(5))}static empty(){return new ot(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ot.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ot.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ot(new Ot(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=-1;class bf{constructor(t,e,r,a){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=a}}function Kg(s){return s.fields.find(t=>t.kind===2)}function na(s){return s.fields.filter(t=>t.kind!==2)}bf.UNKNOWN_ID=-1;class uf{constructor(t,e){this.fieldPath=t,this.kind=e}}class Ku{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Ku(0,On.min())}}function XA(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=pt.fromTimestamp(r===1e9?new he(e+1,0):new he(e,r));return new On(a,ot.empty(),t)}function ZA(s){return new On(s.readTime,s.key,qo)}class On{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new On(pt.min(),ot.empty(),qo)}static max(){return new On(pt.max(),ot.empty(),qo)}}function Pp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=ot.comparator(s.documentKey,t.documentKey),e!==0?e:bt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fs(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==WA)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):B.reject(e)}static resolve(t){return new B((e,r)=>{e(t)})}static reject(t){return new B((e,r)=>{r(t)})}static waitFor(t){return new B((e,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&e()},m=>r(m))}),c=!0,l===a&&e()})}static or(t){let e=B.resolve(!1);for(const r of t)e=e.next(a=>a?B.resolve(a):r());return e}static forEach(t,e){const r=[];return t.forEach((a,l)=>{r.push(e.call(this,a,l))}),this.waitFor(r)}static mapArray(t,e){return new B((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;e(t[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(t,e){return new B((r,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Hf{static open(t,e,r,a){try{return new Hf(e,t.transaction(a,r))}catch(l){throw new ku(e,l)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.m=new tn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{e.error?this.m.reject(new ku(t,e.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=Lp(r.target.error);this.m.reject(new ku(t,a))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(rt(Nn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new NC(e)}}class br{static delete(t){return rt(Nn,"Removing database:",t),ia(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!RA())return!1;if(br.v())return!0;const t=Tf(),e=br.C(t),r=0<e&&e<10,a=tb(t),l=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static C(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.O=r,br.C(Tf())===12.2&&be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(rt(Nn,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;e(c)},a.onblocked=()=>{r(new ku(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new nt(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new nt(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ku(t,c))},a.onupgradeneeded=l=>{rt(Nn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{rt(Nn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,a){const l=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(t);const d=Hf.open(this.db,t,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),B.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(rt(Nn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tb(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class xC{constructor(t){this.q=t,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.U=t}delete(){return ia(this.q.delete())}}class ku extends nt{constructor(t,e){super(Q.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ds(s){return s.name==="IndexedDbTransactionError"}class NC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(rt(Nn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(rt(Nn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ia(r)}add(t){return rt(Nn,"ADD",this.store.name,t,t),ia(this.store.add(t))}get(t){return ia(this.store.get(t)).next(e=>(e===void 0&&(e=null),rt(Nn,"GET",this.store.name,t,e),e))}delete(t){return rt(Nn,"DELETE",this.store.name,t),ia(this.store.delete(t))}count(){return rt(Nn,"COUNT",this.store.name),ia(this.store.count())}G(t,e){const r=this.options(t,e),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new B((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new B((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(t,e){rt(Nn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(t,e){let r;e?r=t:(r={},e=t);const a=this.cursor(r);return this.j(a,e)}X(t){const e=this.cursor({});return new B((r,a)=>{e.onerror=l=>{const c=Lp(l.target.error);a(c)},e.onsuccess=l=>{const c=l.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(t,e){const r=[];return new B((a,l)=>{t.onerror=c=>{l(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new xC(d),p=e(d.primaryKey,d.value,m);if(p instanceof B){const _=p.catch(T=>(m.done(),B.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>B.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.Y?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ia(s){return new B((t,e)=>{s.onsuccess=r=>{const a=r.target.result;t(a)},s.onerror=r=>{const a=Lp(r.target.error);e(a)}})}let PT=!1;function Lp(s){const t=br.C(Tf());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PT||(PT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Uu="IndexBackfiller";class OC{constructor(t,e){this.asyncQueue=t,this.ee=e,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){rt(Uu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ee.ne();rt(Uu,`Documents written: ${e}`)}catch(e){ds(e)?rt(Uu,"Ignoring IndexedDB error during index backfill: ",e):await fs(e)}await this.te(6e4)})}}class MC{constructor(t,e){this.localStore=t,this.persistence=e}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.re(e,t))}re(t,e){const r=new Set;let a=e,l=!0;return B.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(c!==null&&!r.has(c))return rt(Uu,`Processing collection: ${c}`),this.ie(t,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>e-a)}ie(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(a=>this.localStore.localDocuments.getNextDocuments(t,e,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.se(a,l)).next(d=>(rt(Uu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}se(t,e){let r=t;return e.changes.forEach((a,l)=>{const c=ZA(l);Pp(c,r)>0&&(r=c)}),new On(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}En.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=-1;function dc(s){return s==null}function Yu(s){return s===0&&1/s==-1/0}function eb(s){return typeof s=="number"&&Number.isInteger(s)&&!Yu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="";function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=LT(t)),t=PC(s.get(e),t);return LT(t)}function PC(s,t){let e=t;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":e+="";break;case wf:e+="";break;default:e+=l}}return e}function LT(s){return s+wf+""}function Tr(s){const t=s.length;if(gt(t>=2),t===2)return gt(s.charAt(0)===wf&&s.charAt(1)===""),Ot.emptyPath();const e=t-2,r=[];let a="";for(let l=0;l<t;){const c=s.indexOf(wf,l);switch((c<0||c>e)&&ft(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ft()}l=c+2}return new Ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="remoteDocuments",mc="owner",bo="owner",$u="mutationQueues",LC="userId",er="mutations",kT="batchId",ca="userMutationsIndex",UT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(s,t){return[s,on(t)]}function nb(s,t,e){return[s,on(t),e]}const kC={},Fo="documentMutations",Sf="remoteDocumentsV14",UC=["prefixPath","collectionGroup","readTime","documentId"],hf="documentKeyIndex",BC=["prefixPath","collectionGroup","documentId"],rb="collectionGroupIndex",zC=["collectionGroup","readTime","prefixPath","documentId"],Xu="remoteDocumentGlobal",Yg="remoteDocumentGlobalKey",jo="targets",ib="queryTargetsIndex",qC=["canonicalId","targetId"],Go="targetDocuments",FC=["targetId","path"],kp="documentTargetsIndex",jC=["path","targetId"],Rf="targetGlobalKey",da="targetGlobal",Zu="collectionParents",GC=["collectionId","parent"],Ho="clientMetadata",HC="clientId",Qf="bundles",QC="bundleId",Kf="namedQueries",KC="name",Up="indexConfiguration",YC="indexId",$g="collectionGroupIndex",$C="collectionGroup",If="indexState",XC=["indexId","uid"],sb="sequenceNumberIndex",ZC=["uid","sequenceNumber"],Df="indexEntries",WC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ab="documentKeyIndex",JC=["indexId","uid","orderedDocumentKey"],Yf="documentOverlays",tV=["userId","collectionPath","documentId"],Xg="collectionPathOverlayIndex",eV=["userId","collectionPath","largestBatchId"],ob="collectionGroupOverlayIndex",nV=["userId","collectionGroup","largestBatchId"],Bp="globals",rV="name",lb=[$u,er,Fo,ra,jo,mc,da,Go,Ho,Xu,Zu,Qf,Kf],iV=[...lb,Yf],ub=[$u,er,Fo,Sf,jo,mc,da,Go,Ho,Xu,Zu,Qf,Kf,Yf],cb=ub,zp=[...cb,Up,If,Df],sV=zp,aV=[...zp,Bp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends JA{constructor(t,e){super(),this.ue=t,this.currentSequenceNumber=e}}function ke(s,t){const e=ut(s);return br.M(e.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function ms(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function hb(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e){this.comparator=t,this.root=e||We.EMPTY}insert(t,e){return new ie(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,We.BLACK,null,null))}remove(t){return new ie(this.comparator,this.root.remove(t,this.comparator).copy(null,null,We.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return e+r.left.size;a<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jh(this.root,t,this.comparator,!0)}}class Jh{constructor(t,e,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class We{constructor(t,e,r,a,l){this.key=t,this.value=e,this.color=r??We.RED,this.left=a??We.EMPTY,this.right=l??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,a,l){return new We(t??this.key,e??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,r),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return We.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(t,e,r,a,l){return this}insert(t,e,r){return new We(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.comparator=t,this.data=new ie(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new zT(this.data.getIterator())}getIteratorFrom(t){return new zT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Xt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Xt(this.comparator);return e.data=t,e}}class zT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new Tn([])}unionWith(t){let e=new Xt(ue.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Tn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return zo(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new fb("Invalid base64 string: "+l):l}}(t);return new ve(e)}static fromUint8Array(t){const e=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new ve(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ve.EMPTY_BYTE_STRING=new ve("");const lV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(s){if(gt(!!s),typeof s=="string"){let t=0;const e=lV.exec(s);if(gt(!!e),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:le(s.seconds),nanos:le(s.nanos)}}function le(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function li(s){return typeof s=="string"?ve.fromBase64String(s):ve.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="server_timestamp",mb="__type__",gb="__previous_value__",pb="__local_write_time__";function $f(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[mb])===null||e===void 0?void 0:e.stringValue)===db}function Xf(s){const t=s.mapValue.fields[gb];return $f(t)?Xf(t):t}function Wu(s){const t=oi(s.mapValue.fields[pb].timestampValue);return new he(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t,e,r,a,l,c,d,m,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const Wg="(default)";class is{constructor(t,e){this.projectId=t,this.database=e||Wg}static empty(){return new is("","")}get isDefaultDatabase(){return this.database===Wg}isEqual(t){return t instanceof is&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="__type__",yb="__max__",$i={mapValue:{fields:{__type__:{stringValue:yb}}}},Fp="__vector__",Qo="value",ff={nullValue:"NULL_VALUE"};function ss(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$f(s)?4:_b(s)?9007199254740991:Zf(s)?10:11:ft()}function Ir(s,t){if(s===t)return!0;const e=ss(s);if(e!==ss(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Wu(s).isEqual(Wu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=oi(a.timestampValue),d=oi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(a,l){return li(a.bytesValue).isEqual(li(l.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(a,l){return le(a.geoPointValue.latitude)===le(l.geoPointValue.latitude)&&le(a.geoPointValue.longitude)===le(l.geoPointValue.longitude)}(s,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return le(a.integerValue)===le(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=le(a.doubleValue),d=le(l.doubleValue);return c===d?Yu(c)===Yu(d):isNaN(c)&&isNaN(d)}return!1}(s,t);case 9:return zo(s.arrayValue.values||[],t.arrayValue.values||[],Ir);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(BT(c)!==BT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ir(c[m],d[m])))return!1;return!0}(s,t);default:return ft()}}function Ju(s,t){return(s.values||[]).find(e=>Ir(e,t))!==void 0}function as(s,t){if(s===t)return 0;const e=ss(s),r=ss(t);if(e!==r)return bt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,t.booleanValue);case 2:return function(l,c){const d=le(l.integerValue||l.doubleValue),m=le(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,t);case 3:return qT(s.timestampValue,t.timestampValue);case 4:return qT(Wu(s),Wu(t));case 5:return Qg(s.stringValue,t.stringValue);case 6:return function(l,c){const d=li(l),m=li(c);return d.compareTo(m)}(s.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=bt(d[p],m[p]);if(_!==0)return _}return bt(d.length,m.length)}(s.referenceValue,t.referenceValue);case 8:return function(l,c){const d=bt(le(l.latitude),le(c.latitude));return d!==0?d:bt(le(l.longitude),le(c.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return FT(s.arrayValue,t.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},b=c.fields||{},D=(d=T[Qo])===null||d===void 0?void 0:d.arrayValue,N=(m=b[Qo])===null||m===void 0?void 0:m.arrayValue,G=bt(((p=D==null?void 0:D.values)===null||p===void 0?void 0:p.length)||0,((_=N==null?void 0:N.values)===null||_===void 0?void 0:_.length)||0);return G!==0?G:FT(D,N)}(s.mapValue,t.mapValue);case 11:return function(l,c){if(l===$i.mapValue&&c===$i.mapValue)return 0;if(l===$i.mapValue)return 1;if(c===$i.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Qg(m[T],_[T]);if(b!==0)return b;const D=as(d[m[T]],p[_[T]]);if(D!==0)return D}return bt(m.length,_.length)}(s.mapValue,t.mapValue);default:throw ft()}}function qT(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return bt(s,t);const e=oi(s),r=oi(t),a=bt(e.seconds,r.seconds);return a!==0?a:bt(e.nanos,r.nanos)}function FT(s,t){const e=s.values||[],r=t.values||[];for(let a=0;a<e.length&&a<r.length;++a){const l=as(e[a],r[a]);if(l)return l}return bt(e.length,r.length)}function Ko(s){return Jg(s)}function Jg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=oi(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return li(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return ot.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",a=!0;for(const l of e.values||[])a?a=!1:r+=",",r+=Jg(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Jg(e.fields[c])}`;return a+"}"}(s.mapValue):ft()}function df(s){switch(ss(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xf(s);return t?16+df(t):16;case 5:return 2*s.stringValue.length;case 6:return li(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+df(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return ms(r.fields,(l,c)=>{a+=l.length+df(c)}),a}(s.mapValue);default:throw ft()}}function ga(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function tp(s){return!!s&&"integerValue"in s}function tc(s){return!!s&&"arrayValue"in s}function jT(s){return!!s&&"nullValue"in s}function GT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function mf(s){return!!s&&"mapValue"in s}function Zf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[qp])===null||e===void 0?void 0:e.stringValue)===Fp}function Bu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ms(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Bu(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Bu(s.arrayValue.values[e]);return t}return Object.assign({},s)}function _b(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===yb}const vb={mapValue:{fields:{[qp]:{stringValue:Fp},[Qo]:{arrayValue:{}}}}};function cV(s){return"nullValue"in s?ff:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ga(is.empty(),ot.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Zf(s)?vb:{mapValue:{}}:ft()}function hV(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ga(is.empty(),ot.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?vb:"mapValue"in s?Zf(s)?{mapValue:{}}:$i:ft()}function HT(s,t){const e=as(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function QT(s,t){const e=as(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.value=t}static empty(){return new Je({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!mf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bu(e)}setAll(t){let e=ue.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const m=this.getFieldsMap(e);this.applyChanges(m,r,a),r={},a=[],e=d.popLast()}c?r[d.lastSegment()]=Bu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,a)}delete(t){const e=this.field(t.popLast());mf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ir(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=e.mapValue.fields[t.get(r)];mf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,r){ms(e,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Je(Bu(this.value))}}function Eb(s){const t=[];return ms(s.fields,(e,r)=>{const a=new ue([e]);if(mf(r)){const l=Eb(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,e,r,a,l,c,d){this.key=t,this.documentType=e,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new se(t,0,pt.min(),pt.min(),pt.min(),Je.empty(),0)}static newFoundDocument(t,e,r,a){return new se(t,1,e,pt.min(),r,a,0)}static newNoDocument(t,e){return new se(t,2,e,pt.min(),pt.min(),Je.empty(),0)}static newUnknownDocument(t,e){return new se(t,3,e,pt.min(),pt.min(),Je.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof se&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new se(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t,e){this.position=t,this.inclusive=e}}function KT(s,t,e){let r=0;for(let a=0;a<s.position.length;a++){const l=t[a],c=s.position[a];if(l.field.isKeyField()?r=ot.comparator(ot.fromName(c.referenceValue),e.key):r=as(c,e.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function YT(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Ir(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e="asc"){this.field=t,this.dir=e}}function fV(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{}class Mt extends Tb{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new dV(t,e,r):e==="array-contains"?new pV(t,r):e==="in"?new Ib(t,r):e==="not-in"?new yV(t,r):e==="array-contains-any"?new _V(t,r):new Mt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new mV(t,r):new gV(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(as(e,this.value)):e!==null&&ss(this.value)===ss(e)&&this.matchesComparison(as(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends Tb{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new $t(t,e)}matches(t){return Yo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Yo(s){return s.op==="and"}function ep(s){return s.op==="or"}function jp(s){return Ab(s)&&Yo(s)}function Ab(s){for(const t of s.filters)if(t instanceof $t)return!1;return!0}function np(s){if(s instanceof Mt)return s.field.canonicalString()+s.op.toString()+Ko(s.value);if(jp(s))return s.filters.map(t=>np(t)).join(",");{const t=s.filters.map(e=>np(e)).join(",");return`${s.op}(${t})`}}function bb(s,t){return s instanceof Mt?function(r,a){return a instanceof Mt&&r.op===a.op&&r.field.isEqual(a.field)&&Ir(r.value,a.value)}(s,t):s instanceof $t?function(r,a){return a instanceof $t&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&bb(c,a.filters[d]),!0):!1}(s,t):void ft()}function wb(s,t){const e=s.filters.concat(t);return $t.create(e,s.op)}function Sb(s){return s instanceof Mt?function(e){return`${e.field.canonicalString()} ${e.op} ${Ko(e.value)}`}(s):s instanceof $t?function(e){return e.op.toString()+" {"+e.getFilters().map(Sb).join(" ,")+"}"}(s):"Filter"}class dV extends Mt{constructor(t,e,r){super(t,e,r),this.key=ot.fromName(r.referenceValue)}matches(t){const e=ot.comparator(t.key,this.key);return this.matchesComparison(e)}}class mV extends Mt{constructor(t,e){super(t,"in",e),this.keys=Rb("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class gV extends Mt{constructor(t,e){super(t,"not-in",e),this.keys=Rb("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Rb(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>ot.fromName(r.referenceValue))}class pV extends Mt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return tc(e)&&Ju(e.arrayValue,this.value)}}class Ib extends Mt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ju(this.value.arrayValue,e)}}class yV extends Mt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Ju(this.value.arrayValue,e)}}class _V extends Mt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!tc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(t,e=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function rp(s,t=null,e=[],r=[],a=null,l=null,c=null){return new vV(s,t,e,r,a,l,c)}function pa(s){const t=ut(s);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>np(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),dc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Ko(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Ko(r)).join(",")),t.le=e}return t.le}function gc(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!fV(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!bb(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!YT(s.startAt,t.startAt)&&YT(s.endAt,t.endAt)}function Cf(s){return ot.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Vf(s,t){return s.filters.filter(e=>e instanceof Mt&&e.field.isEqual(t))}function $T(s,t,e){let r=ff,a=!0;for(const l of Vf(s,t)){let c=ff,d=!0;switch(l.op){case"<":case"<=":c=cV(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=ff}HT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];HT({value:r,inclusive:a},{value:c,inclusive:e.inclusive})<0&&(r=c,a=e.inclusive);break}}return{value:r,inclusive:a}}function XT(s,t,e){let r=$i,a=!0;for(const l of Vf(s,t)){let c=$i,d=!0;switch(l.op){case">=":case">":c=hV(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=$i}QT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(e!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(t)){const c=e.position[l];QT({value:r,inclusive:a},{value:c,inclusive:e.inclusive})>0&&(r=c,a=e.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,e=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Db(s,t,e,r,a,l,c,d){return new hi(s,t,e,r,a,l,c,d)}function ll(s){return new hi(s)}function ZT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Gp(s){return s.collectionGroup!==null}function Mo(s){const t=ut(s);if(t.he===null){t.he=[];const e=new Set;for(const l of t.explicitOrderBy)t.he.push(l),e.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xt(ue.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.he.push(new ec(l,r))}),e.has(ue.keyField().canonicalString())||t.he.push(new ec(ue.keyField(),r))}return t.he}function gn(s){const t=ut(s);return t.Pe||(t.Pe=EV(t,Mo(s))),t.Pe}function EV(s,t){if(s.limitType==="F")return rp(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ec(a.field,l)});const e=s.endAt?new os(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new os(s.startAt.position,s.startAt.inclusive):null;return rp(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function ip(s,t){const e=s.filters.concat([t]);return new hi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function xf(s,t,e){return new hi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function pc(s,t){return gc(gn(s),gn(t))&&s.limitType===t.limitType}function Cb(s){return`${pa(gn(s))}|lt:${s.limitType}`}function Vo(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(a=>Sb(a)).join(", ")}]`),dc(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(a=>Ko(a)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(a=>Ko(a)).join(",")),`Target(${r})`}(gn(s))}; limitType=${s.limitType})`}function yc(s,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ot.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,t)&&function(r,a){for(const l of Mo(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,t)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=KT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Mo(r),a)||r.endAt&&!function(c,d,m){const p=KT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Mo(r),a))}(s,t)}function Vb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function xb(s){return(t,e)=>{let r=!1;for(const a of Mo(s)){const l=TV(a,t,e);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function TV(s,t,e){const r=s.field.isKeyField()?ot.comparator(t.key,e.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?as(m,p):ft()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[e]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){ms(this.inner,(e,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return hb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=new ie(ot.comparator);function An(){return AV}const Nb=new ie(ot.comparator);function Ou(...s){let t=Nb;for(const e of s)t=t.insert(e.key,e);return t}function Ob(s){let t=Nb;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ar(){return zu()}function Mb(){return zu()}function zu(){return new fi(s=>s.toString(),(s,t)=>s.isEqual(t))}const bV=new ie(ot.comparator),wV=new Xt(ot.comparator);function Rt(...s){let t=wV;for(const e of s)t=t.add(e);return t}const SV=new Xt(bt);function Hp(){return SV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(t)?"-0":t}}function Pb(s){return{integerValue:""+s}}function Lb(s,t){return eb(t)?Pb(t):Qp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function RV(s,t,e){return s instanceof $o?function(a,l){const c={fields:{[mb]:{stringValue:db},[pb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$f(l)&&(l=Xf(l)),l&&(c.fields[gb]=l),{mapValue:c}}(e,t):s instanceof ya?Ub(s,t):s instanceof _a?Bb(s,t):function(a,l){const c=kb(a,l),d=WT(c)+WT(a.Ie);return tp(c)&&tp(a.Ie)?Pb(d):Qp(a.serializer,d)}(s,t)}function IV(s,t,e){return s instanceof ya?Ub(s,t):s instanceof _a?Bb(s,t):e}function kb(s,t){return s instanceof Xo?function(r){return tp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class $o extends Wf{}class ya extends Wf{constructor(t){super(),this.elements=t}}function Ub(s,t){const e=zb(t);for(const r of s.elements)e.some(a=>Ir(a,r))||e.push(r);return{arrayValue:{values:e}}}class _a extends Wf{constructor(t){super(),this.elements=t}}function Bb(s,t){let e=zb(t);for(const r of s.elements)e=e.filter(a=>!Ir(a,r));return{arrayValue:{values:e}}}class Xo extends Wf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function WT(s){return le(s.integerValue||s.doubleValue)}function zb(s){return tc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,e){this.field=t,this.transform=e}}function DV(s,t){return s.field.isEqual(t.field)&&function(r,a){return r instanceof ya&&a instanceof ya||r instanceof _a&&a instanceof _a?zo(r.elements,a.elements,Ir):r instanceof Xo&&a instanceof Xo?Ir(r.Ie,a.Ie):r instanceof $o&&a instanceof $o}(s.transform,t.transform)}class CV{constructor(t,e){this.version=t,this.transformResults=e}}class ce{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ce}static exists(t){return new ce(void 0,t)}static updateTime(t){return new ce(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function gf(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Jf{}function qb(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new cl(s.key,ce.none()):new ul(s.key,s.data,ce.none());{const e=s.data,r=Je.empty();let a=new Xt(ue.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new di(s.key,r,new Tn(a.toArray()),ce.none())}}function VV(s,t,e){s instanceof ul?function(a,l,c){const d=a.value.clone(),m=t0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,t,e):s instanceof di?function(a,l,c){if(!gf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=t0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Fb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,t,e):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function qu(s,t,e,r){return s instanceof ul?function(l,c,d,m){if(!gf(l.precondition,c))return d;const p=l.value.clone(),_=e0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,t,e,r):s instanceof di?function(l,c,d,m){if(!gf(l.precondition,c))return d;const p=e0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Fb(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,t,e,r):function(l,c,d){return gf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,t,e)}function xV(s,t){let e=null;for(const r of s.fieldTransforms){const a=t.data.field(r.field),l=kb(r.transform,a||null);l!=null&&(e===null&&(e=Je.empty()),e.set(r.field,l))}return e||null}function JT(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&zo(r,a,(l,c)=>DV(l,c))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class ul extends Jf{constructor(t,e,r,a=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class di extends Jf{constructor(t,e,r,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Fb(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function t0(s,t,e){const r=new Map;gt(s.length===e.length);for(let a=0;a<e.length;a++){const l=s[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,IV(c,d,e[a]))}return r}function e0(s,t,e){const r=new Map;for(const a of s){const l=a.transform,c=e.data.field(a.field);r.set(a.field,RV(l,c,t))}return r}class cl extends Jf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kp extends Jf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(t,e,r,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&VV(l,t,r[a])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=qu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=qu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=Mb();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(a.key)?null:d;const m=qb(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Rt())}isEqual(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(e,r)=>JT(e,r))&&zo(this.baseMutations,t.baseMutations,(e,r)=>JT(e,r))}}class $p{constructor(t,e,r,a){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=a}static from(t,e,r){gt(t.mutations.length===r.length);let a=function(){return bV}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new $p(t,e,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,Bt;function jb(s){switch(s){case Q.OK:return ft();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ft()}}function Gb(s){if(s===void 0)return be("GRPC error has no .code"),Q.UNKNOWN;switch(s){case Ve.OK:return Q.OK;case Ve.CANCELLED:return Q.CANCELLED;case Ve.UNKNOWN:return Q.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return Q.INTERNAL;case Ve.UNAVAILABLE:return Q.UNAVAILABLE;case Ve.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ve.NOT_FOUND:return Q.NOT_FOUND;case Ve.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ve.ABORTED:return Q.ABORTED;case Ve.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ve.DATA_LOSS:return Q.DATA_LOSS;default:return ft()}}(Bt=Ve||(Ve={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new Wi([4294967295,4294967295],0);function n0(s){const t=Mp().encode(s),e=new qA;return e.update(t),new Uint8Array(e.digest())}function r0(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Wi([e,r],0),new Wi([a,l],0)]}class Zp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Mu(`Invalid padding: ${e}`);if(r<0)throw new Mu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Wi.fromNumber(this.Ee)}Ae(t,e,r){let a=t.add(e.multiply(Wi.fromNumber(r)));return a.compare(OV)===1&&(a=new Wi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=n0(t),[r,a]=r0(e);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(t,e,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Zp(l,a,e);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.Ee===0)return;const e=n0(t),[r,a]=r0(e);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e,r,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const a=new Map;return a.set(t,Ec.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new vc(pt.min(),a,new ie(bt),An(),Rt())}}class Ec{constructor(t,e,r,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Ec(r,e,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(t,e,r,a){this.me=t,this.removedTargetIds=e,this.key=r,this.fe=a}}class Hb{constructor(t,e){this.targetId=t,this.ge=e}}class Qb{constructor(t,e,r=ve.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=a}}class i0{constructor(){this.pe=0,this.ye=s0(),this.we=ve.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Rt(),e=Rt(),r=Rt();return this.ye.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:r=r.add(a);break;default:ft()}}),new Ec(this.we,this.Se,t,e,r)}Me(){this.be=!1,this.ye=s0()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,gt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class MV{constructor(t){this.ke=t,this.qe=new Map,this.Qe=An(),this.$e=tf(),this.Ue=tf(),this.Ke=new ie(bt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const r=this.He(e);switch(t.state){case 0:this.Je(e)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(t.resumeToken));break;default:ft()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((r,a)=>{this.Je(a)&&e(a)})}Ze(t){const e=t.targetId,r=t.ge.count,a=this.Xe(e);if(a){const l=a.target;if(Cf(l))if(r===0){const c=new ot(l.path);this.ze(e,c,se.newNoDocument(c,pt.min()))}else gt(r===1);else{const c=this.et(e);if(c!==r){const d=this.tt(t),m=d?this.nt(d,t,c):1;if(m!==0){this.Ye(e);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,p)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=e;let c,d;try{c=li(r).toUint8Array()}catch(m){if(m instanceof fb)return Rr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Zp(c,a,l)}catch(m){return Rr(m instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(t,e,r){return e.ge.count===r-this.st(t,e.targetId)?0:2}st(t,e){const r=this.ke.getRemoteKeysForTarget(e);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.ze(e,l,null),a++)}),a}ot(t){const e=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Cf(d.target)){const m=new ot(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,se.newNoDocument(m,t))}l.ve&&(e.set(c,l.Fe()),l.Me())}});let r=Rt();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(t));const a=new vc(t,e,this.Ke,this.Qe,r);return this.Qe=An(),this.$e=tf(),this.Ue=tf(),this.Ke=new ie(bt),a}Ge(t,e){if(!this.Je(t))return;const r=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,r){if(!this.Je(t))return;const a=this.He(t);this.ut(t,e)?a.xe(e,1):a.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new i0,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Xt(bt),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Xt(bt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new i0),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function tf(){return new ie(ot.comparator)}function s0(){return new ie(ot.comparator)}const PV={asc:"ASCENDING",desc:"DESCENDING"},LV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kV={and:"AND",or:"OR"};class UV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function sp(s,t){return s.useProto3Json||dc(t)?t:{value:t}}function Zo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kb(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function BV(s,t){return Zo(s,t.toTimestamp())}function we(s){return gt(!!s),pt.fromTimestamp(function(e){const r=oi(e);return new he(r.seconds,r.nanos)}(s))}function Wp(s,t){return ap(s,t).canonicalString()}function ap(s,t){const e=function(a){return new Ot(["projects",a.projectId,"databases",a.database])}(s).child("documents");return t===void 0?e:e.child(t)}function Yb(s){const t=Ot.fromString(s);return gt(iw(t)),t}function nc(s,t){return Wp(s.databaseId,t.path)}function wr(s,t){const e=Yb(t);if(e.get(1)!==s.databaseId.projectId)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new ot(Zb(e))}function $b(s,t){return Wp(s.databaseId,t)}function Xb(s){const t=Yb(s);return t.length===4?Ot.emptyPath():Zb(t)}function op(s){return new Ot(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Zb(s){return gt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function a0(s,t,e){return{name:nc(s,t),fields:e.value.mapValue.fields}}function Wb(s,t,e){const r=wr(s,t.name),a=we(t.updateTime),l=t.createTime?we(t.createTime):pt.min(),c=new Je({mapValue:{fields:t.fields}}),d=se.newFoundDocument(r,a,l,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function zV(s,t){return"found"in t?function(r,a){gt(!!a.found),a.found.name,a.found.updateTime;const l=wr(r,a.found.name),c=we(a.found.updateTime),d=a.found.createTime?we(a.found.createTime):pt.min(),m=new Je({mapValue:{fields:a.found.fields}});return se.newFoundDocument(l,c,d,m)}(s,t):"missing"in t?function(r,a){gt(!!a.missing),gt(!!a.readTime);const l=wr(r,a.missing),c=we(a.readTime);return se.newNoDocument(l,c)}(s,t):ft()}function qV(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ft()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(gt(_===void 0||typeof _=="string"),ve.fromBase64String(_||"")):(gt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),ve.fromUint8Array(_||new Uint8Array))}(s,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const _=p.code===void 0?Q.UNKNOWN:Gb(p.code);return new nt(_,p.message||"")}(c);e=new Qb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=wr(s,r.document.name),l=we(r.document.updateTime),c=r.document.createTime?we(r.document.createTime):pt.min(),d=new Je({mapValue:{fields:r.document.fields}}),m=se.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];e=new pf(p,_,m.key,m)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=wr(s,r.document),l=r.readTime?we(r.readTime):pt.min(),c=se.newNoDocument(a,l),d=r.removedTargetIds||[];e=new pf([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=wr(s,r.document),l=r.removedTargetIds||[];e=new pf([],l,a,null)}else{if(!("filter"in t))return ft();{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new NV(a,l),d=r.targetId;e=new Hb(d,c)}}return e}function rc(s,t){let e;if(t instanceof ul)e={update:a0(s,t.key,t.value)};else if(t instanceof cl)e={delete:nc(s,t.key)};else if(t instanceof di)e={update:a0(s,t.key,t.data),updateMask:KV(t.fieldMask)};else{if(!(t instanceof Kp))return ft();e={verify:nc(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof $o)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ya)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof _a)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xo)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ft()}(0,r))),t.precondition.isNone||(e.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:BV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ft()}(s,t.precondition)),e}function lp(s,t){const e=t.currentDocument?function(l){return l.updateTime!==void 0?ce.updateTime(we(l.updateTime)):l.exists!==void 0?ce.exists(l.exists):ce.none()}(t.currentDocument):ce.none(),r=t.updateTransforms?t.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)gt(d.setToServerValue==="REQUEST_TIME"),m=new $o;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new ya(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new _a(_)}else"increment"in d?m=new Xo(c,d.increment):ft();const p=ue.fromServerFormat(d.fieldPath);return new _c(p,m)}(s,a)):[];if(t.update){t.update.name;const a=wr(s,t.update.name),l=new Je({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Tn(p.map(_=>ue.fromServerFormat(_)))}(t.updateMask);return new di(a,l,c,e,r)}return new ul(a,l,e,r)}if(t.delete){const a=wr(s,t.delete);return new cl(a,e)}if(t.verify){const a=wr(s,t.verify);return new Kp(a,e)}return ft()}function FV(s,t){return s&&s.length>0?(gt(t!==void 0),s.map(e=>function(a,l){let c=a.updateTime?we(a.updateTime):we(l);return c.isEqual(pt.min())&&(c=we(l)),new CV(c,a.transformResults||[])}(e,t))):[]}function Jb(s,t){return{documents:[$b(s,t.path)]}}function tw(s,t){const e={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=$b(s,a);const l=function(p){if(p.length!==0)return rw($t.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(b){return{field:xo(b.field),direction:GV(b.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=sp(s,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{ht:e,parent:a}}function ew(s){let t=Xb(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let a=null;if(r>0){gt(r===1);const _=e.from[0];_.allDescendants?a=_.collectionId:t=t.child(_.collectionId)}let l=[];e.where&&(l=function(T){const b=nw(T);return b instanceof $t&&jp(b)?b.getFilters():[b]}(e.where));let c=[];e.orderBy&&(c=function(T){return T.map(b=>function(N){return new ec(No(N.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(e.orderBy));let d=null;e.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,dc(b)?null:b}(e.limit));let m=null;e.startAt&&(m=function(T){const b=!!T.before,D=T.values||[];return new os(D,b)}(e.startAt));let p=null;return e.endAt&&(p=function(T){const b=!T.before,D=T.values||[];return new os(D,b)}(e.endAt)),Db(t,a,c,l,d,"F",m,p)}function jV(s,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function nw(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=No(e.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=No(e.unaryFilter.field);return Mt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(e.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(e.unaryFilter.field);return Mt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(s):s.fieldFilter!==void 0?function(e){return Mt.create(No(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return $t.create(e.compositeFilter.filters.map(r=>nw(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(s):ft()}function GV(s){return PV[s]}function HV(s){return LV[s]}function QV(s){return kV[s]}function xo(s){return{fieldPath:s.canonicalString()}}function No(s){return ue.fromServerFormat(s.fieldPath)}function rw(s){return s instanceof Mt?function(e){if(e.op==="=="){if(GT(e.value))return{unaryFilter:{field:xo(e.field),op:"IS_NAN"}};if(jT(e.value))return{unaryFilter:{field:xo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(GT(e.value))return{unaryFilter:{field:xo(e.field),op:"IS_NOT_NAN"}};if(jT(e.value))return{unaryFilter:{field:xo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(e.field),op:HV(e.op),value:e.value}}}(s):s instanceof $t?function(e){const r=e.getFilters().map(a=>rw(a));return r.length===1?r[0]:{compositeFilter:{op:QV(e.op),filters:r}}}(s):ft()}function KV(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function iw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t,e,r,a,l=pt.min(),c=pt.min(),d=ve.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new ni(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t){this.Tt=t}}function YV(s,t){let e;if(t.document)e=Wb(s.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=ot.fromSegments(t.noDocument.path),a=Ea(t.noDocument.readTime);e=se.newNoDocument(r,a),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ft();{const r=ot.fromSegments(t.unknownDocument.path),a=Ea(t.unknownDocument.version);e=se.newUnknownDocument(r,a)}}return t.readTime&&e.setReadTime(function(a){const l=new he(a[0],a[1]);return pt.fromTimestamp(l)}(t.readTime)),e}function o0(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Nf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(l,c){return{name:nc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Zo(l,c.version.toTimestamp()),createTime:Zo(l,c.createTime.toTimestamp())}}(s.Tt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:va(t.version)};else{if(!t.isUnknownDocument())return ft();r.unknownDocument={path:e.path.toArray(),version:va(t.version)}}return r}function Nf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function va(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ea(s){const t=new he(s.seconds,s.nanoseconds);return pt.fromTimestamp(t)}function sa(s,t){const e=(t.baseMutations||[]).map(l=>lp(s.Tt,l));for(let l=0;l<t.mutations.length-1;++l){const c=t.mutations[l];if(l+1<t.mutations.length&&t.mutations[l+1].transform!==void 0){const d=t.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,t.mutations.splice(l+1,1),++l}}const r=t.mutations.map(l=>lp(s.Tt,l)),a=he.fromMillis(t.localWriteTimeMs);return new Yp(t.batchId,a,e,r)}function Pu(s){const t=Ea(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Ea(s.lastLimboFreeSnapshotVersion):pt.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return gt(l.documents.length===1),gn(ll(Xb(l.documents[0])))}(s.query):function(l){return gn(ew(l))}(s.query),new ni(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,ve.fromBase64String(s.resumeToken))}function aw(s,t){const e=va(t.snapshotVersion),r=va(t.lastLimboFreeSnapshotVersion);let a;a=Cf(t.target)?Jb(s.Tt,t.target):tw(s.Tt,t.target).ht;const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pa(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Jp(s){const t=ew({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?xf(t,t.limit,"L"):t}function xg(s,t){return new Xp(t.largestBatchId,lp(s.Tt,t.overlayMutation))}function l0(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function u0(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:va(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{getBundleMetadata(t,e){return c0(t).get(e).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ea(l.createTime),version:l.version}}(r)})}saveBundleMetadata(t,e){return c0(t).put(function(a){return{bundleId:a.id,createTime:va(we(a.createTime)),version:a.version}}(e))}getNamedQuery(t,e){return h0(t).get(e).next(r=>{if(r)return function(l){return{name:l.name,query:Jp(l.bundledQuery),readTime:Ea(l.readTime)}}(r)})}saveNamedQuery(t,e){return h0(t).put(function(a){return{name:a.name,readTime:va(we(a.readTime)),bundledQuery:a.bundledQuery}}(e))}}function c0(s){return ke(s,Qf)}function h0(s){return ke(s,Kf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e){this.serializer=t,this.userId=e}static It(t,e){const r=e.uid||"";return new td(t,r)}getOverlay(t,e){return Iu(t).get(l0(this.userId,e)).next(r=>r?xg(this.serializer,r):null)}getOverlays(t,e){const r=Ar();return B.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,e,r){const a=[];return r.forEach((l,c)=>{const d=new Xp(e,c);a.push(this.Et(t,d))}),B.waitFor(a)}removeOverlaysForBatchId(t,e,r){const a=new Set;e.forEach(c=>a.add(on(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Iu(t).J(Xg,d))}),B.waitFor(l)}getOverlaysForCollection(t,e,r){const a=Ar(),l=on(e),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Iu(t).G(Xg,c).next(d=>{for(const m of d){const p=xg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(t,e,r,a){const l=Ar();let c;const d=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Iu(t).Z({index:ob,range:d},(m,p,_)=>{const T=xg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(t,e){return Iu(t).put(function(a,l,c){const[d,m,p]=l0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:rc(a.Tt,c.mutation)}}(this.serializer,this.userId,e))}}function Iu(s){return ke(s,Yf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{dt(t){return ke(t,Bp)}getSessionToken(t){return this.dt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?ve.fromUint8Array(r):ve.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(le(t.integerValue));else if("doubleValue"in t){const r=le(t.doubleValue);isNaN(r)?this.ft(e,13):(this.ft(e,15),Yu(r)?e.gt(0):e.gt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.ft(e,20),typeof r=="string"&&(r=oi(r)),e.yt(`${r.seconds||""}`),e.gt(r.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(li(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ft(e,45),e.gt(r.latitude||0),e.gt(r.longitude||0)}else"mapValue"in t?_b(t)?this.ft(e,Number.MAX_SAFE_INTEGER):Zf(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):ft()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const r=t.fields||{};this.ft(e,55);for(const a of Object.keys(r))this.wt(a,e),this.Rt(r[a],e)}vt(t,e){var r,a;const l=t.fields||{};this.ft(e,53);const c=Qo,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(e,15),e.gt(le(d)),this.wt(c,e),this.Rt(l[c],e)}Ft(t,e){const r=t.values||[];this.ft(e,50);for(const a of r)this.Rt(a,e)}Dt(t,e){this.ft(e,37),ot.fromName(t).path.forEach(r=>{this.ft(e,60),this.Mt(r,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}}aa.xt=new aa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=255;function ZV(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function f0(s){const t=64-function(r){let a=0;for(let l=0;l<8;++l){const c=ZV(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(t/8)}class WV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Nt(r.value),r=e.next();this.Bt()}Lt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.kt(r.value),r=e.next();this.qt()}Qt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=e.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=e.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(t){const e=this.Kt(t),r=f0(e);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=e.length-r;a<e.length;++a)this.buffer[this.position++]=255&e[a]}Gt(t){const e=this.Kt(t),r=f0(e);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=e.length-r;a<e.length;++a)this.buffer[this.position++]=~(255&e[a])}zt(){this.jt(So),this.jt(255)}Ht(){this.Jt(So),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Kt(t){const e=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let a=1;a<e.length;++a)e[a]^=r?255:0;return e}Nt(t){const e=255&t;e===0?(this.jt(0),this.jt(255)):e===So?(this.jt(So),this.jt(0)):this.jt(e)}kt(t){const e=255&t;e===0?(this.Jt(0),this.Jt(255)):e===So?(this.Jt(So),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class JV{constructor(t){this.Zt=t}bt(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Ut(t)}Vt(){this.Zt.zt()}}class tx{constructor(t){this.Zt=t}bt(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class Du{constructor(){this.Zt=new WV,this.Xt=new JV(this.Zt),this.en=new tx(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,e,r,a){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=a}nn(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new oa(this.indexId,this.documentKey,this.arrayValue,r)}}function Gi(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=d0(s.arrayValue,t.arrayValue),e!==0?e:(e=d0(s.directionalValue,t.directionalValue),e!==0?e:ot.comparator(s.documentKey,t.documentKey)))}function d0(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t){this.rn=new Xt((e,r)=>ue.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const e of t.filters){const r=e;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(t){if(gt(t.collectionGroup===this.collectionId),this.an)return!1;const e=Kg(t);if(e!==void 0&&!this.cn(e))return!1;const r=na(t);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let t=new Xt(ue.comparator);const e=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new uf(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new uf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new uf(r.field,r.dir==="asc"?0:1)));return new bf(bf.UNKNOWN_ID,this.collectionId,e,Ku.empty())}cn(t){for(const e of this._n)if(this.ln(e,t))return!0;return!1}ln(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}hn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(s){var t,e;if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt){if(s instanceof Ib){const a=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(l=>Mt.create(s.field,"==",l)))||[];return $t.create(a,"or")}return s}const r=s.filters.map(a=>ow(a));return $t.create(r,s.op)}function ex(s){if(s.getFilters().length===0)return[];const t=hp(ow(s));return gt(lw(t)),up(t)||cp(t)?[t]:t.getFilters()}function up(s){return s instanceof Mt}function cp(s){return s instanceof $t&&jp(s)}function lw(s){return up(s)||cp(s)||function(e){if(e instanceof $t&&ep(e)){for(const r of e.getFilters())if(!up(r)&&!cp(r))return!1;return!0}return!1}(s)}function hp(s){if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt)return s;if(s.filters.length===1)return hp(s.filters[0]);const t=s.filters.map(r=>hp(r));let e=$t.create(t,s.op);return e=Of(e),lw(e)?e:(gt(e instanceof $t),gt(Yo(e)),gt(e.filters.length>1),e.filters.reduce((r,a)=>ty(r,a)))}function ty(s,t){let e;return gt(s instanceof Mt||s instanceof $t),gt(t instanceof Mt||t instanceof $t),e=s instanceof Mt?t instanceof Mt?function(a,l){return $t.create([a,l],"and")}(s,t):g0(s,t):t instanceof Mt?g0(t,s):function(a,l){if(gt(a.filters.length>0&&l.filters.length>0),Yo(a)&&Yo(l))return wb(a,l.getFilters());const c=ep(a)?a:l,d=ep(a)?l:a,m=c.filters.map(p=>ty(p,d));return $t.create(m,"or")}(s,t),Of(e)}function g0(s,t){if(Yo(t))return wb(t,s.getFilters());{const e=t.filters.map(r=>ty(s,r));return $t.create(e,"or")}}function Of(s){if(gt(s instanceof Mt||s instanceof $t),s instanceof Mt)return s;const t=s.getFilters();if(t.length===1)return Of(t[0]);if(Ab(s))return s;const e=t.map(a=>Of(a)),r=[];return e.forEach(a=>{a instanceof Mt?r.push(a):a instanceof $t&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:$t.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.Tn=new ey}addToCollectionParentIndex(t,e){return this.Tn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(On.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(On.min())}updateCollectionGroup(t,e,r){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class ey{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e]||new Xt(Ot.comparator),l=!a.has(r);return this.index[e]=a.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),a=this.index[e];return a&&a.has(r)}getEntries(t){return(this.index[t]||new Xt(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="IndexedDbIndexManager",ef=new Uint8Array(0);class rx{constructor(t,e){this.databaseId=e,this.In=new ey,this.En=new fi(r=>pa(r),(r,a)=>gc(r,a)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.In.has(e)){const r=e.lastSegment(),a=e.popLast();t.addOnCommittedListener(()=>{this.In.add(e)});const l={collectionId:r,parent:on(a)};return y0(t).put(l)}return B.resolve()}getCollectionParents(t,e){const r=[],a=IDBKeyRange.bound([e,""],[$A(e),""],!1,!0);return y0(t).G(a).next(l=>{for(const c of l){if(c.collectionId!==e)break;r.push(Tr(c.parent))}return r})}addFieldIndex(t,e){const r=Cu(t),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(e);delete a.indexId;const l=r.add(a);if(e.indexState){const c=Io(t);return l.next(d=>{c.put(u0(d,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return l.next()}deleteFieldIndex(t,e){const r=Cu(t),a=Io(t),l=Ro(t);return r.delete(e.indexId).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=Cu(t),r=Ro(t),a=Io(t);return e.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(t,e){return B.forEach(this.dn(e),r=>this.getIndexType(t,r).next(a=>{if(a===0||a===1){const l=new m0(r).Pn();if(l!=null)return this.addFieldIndex(t,l)}}))}getDocumentsMatchingTarget(t,e){const r=Ro(t);let a=!0;const l=new Map;return B.forEach(this.dn(e),c=>this.An(t,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=Rt();const d=[];return B.forEach(l,(m,p)=>{rt(p0,`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`}(m)} to execute ${pa(e)}`);const _=function(Z,dt){const ht=Kg(dt);if(ht===void 0)return null;for(const vt of Vf(Z,ht.fieldPath))switch(vt.op){case"array-contains-any":return vt.value.arrayValue.values||[];case"array-contains":return[vt.value]}return null}(p,m),T=function(Z,dt){const ht=new Map;for(const vt of na(dt))for(const V of Vf(Z,vt.fieldPath))switch(V.op){case"==":case"in":ht.set(vt.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ht.set(vt.fieldPath.canonicalString(),V.value),Array.from(ht.values())}return null}(p,m),b=function(Z,dt){const ht=[];let vt=!0;for(const V of na(dt)){const S=V.kind===0?$T(Z,V.fieldPath,Z.startAt):XT(Z,V.fieldPath,Z.startAt);ht.push(S.value),vt&&(vt=S.inclusive)}return new os(ht,vt)}(p,m),D=function(Z,dt){const ht=[];let vt=!0;for(const V of na(dt)){const S=V.kind===0?XT(Z,V.fieldPath,Z.endAt):$T(Z,V.fieldPath,Z.endAt);ht.push(S.value),vt&&(vt=S.inclusive)}return new os(ht,vt)}(p,m),N=this.Rn(m,p,b),G=this.Rn(m,p,D),z=this.Vn(m,p,T),Y=this.mn(m.indexId,_,N,b.inclusive,G,D.inclusive,z);return B.forEach(Y,it=>r.H(it,e.limit).next(Z=>{Z.forEach(dt=>{const ht=ot.fromSegments(dt.documentKey);c.has(ht)||(c=c.add(ht),d.push(ht))})}))}).next(()=>d)}return B.resolve(null)})}dn(t){let e=this.En.get(t);return e||(t.filters.length===0?e=[t]:e=ex($t.create(t.filters,"and")).map(r=>rp(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,e),e)}mn(t,e,r,a,l,c,d){const m=(e!=null?e.length:1)*Math.max(r.length,l.length),p=m/(e!=null?e.length:1),_=[];for(let T=0;T<m;++T){const b=e?this.fn(e[T/p]):ef,D=this.gn(t,b,r[T%p],a),N=this.pn(t,b,l[T%p],c),G=d.map(z=>this.gn(t,b,z,!0));_.push(...this.createRange(D,N,G))}return _}gn(t,e,r,a){const l=new oa(t,ot.empty(),e,r);return a?l:l.nn()}pn(t,e,r,a){const l=new oa(t,ot.empty(),e,r);return a?l.nn():l}An(t,e){const r=new m0(e),a=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let r=2;const a=this.dn(e);return B.forEach(a,l=>this.An(t,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new Xt(ue.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(e)&&a.length>1&&r===2?1:r)}yn(t,e){const r=new Du;for(const a of na(t)){const l=e.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);aa.xt.At(l,c)}return r.Yt()}fn(t){const e=new Du;return aa.xt.At(t,e.tn(0)),e.Yt()}wn(t,e){const r=new Du;return aa.xt.At(ga(this.databaseId,e),r.tn(function(l){const c=na(l);return c.length===0?0:c[c.length-1].kind}(t))),r.Yt()}Vn(t,e,r){if(r===null)return[];let a=[];a.push(new Du);let l=0;for(const c of na(t)){const d=r[l++];for(const m of a)if(this.Sn(e,c.fieldPath)&&tc(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);aa.xt.At(d,p)}}return this.Dn(a)}Rn(t,e,r){return this.Vn(t,e,r.position)}Dn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Yt();return e}bn(t,e,r){const a=[...t],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Du;m.seed(d.Yt()),aa.xt.At(c,m.tn(e.kind)),l.push(m)}return l}Sn(t,e){return!!t.filters.find(r=>r instanceof Mt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=Cu(t),a=Io(t);return(e?r.G($g,IDBKeyRange.bound(e,e)):r.G()).next(l=>{const c=[];return B.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const b=T?new Ku(T.sequenceNumber,new On(Ea(T.readTime),new ot(Tr(T.documentKey)),T.largestBatchId)):Ku.empty(),D=_.fields.map(([N,G])=>new uf(ue.fromServerFormat(N),G));return new bf(_.indexId,_.collectionGroup,D,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:bt(r.collectionGroup,a.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const a=Cu(t),l=Io(t);return this.vn(t).next(c=>a.G($g,IDBKeyRange.bound(e,e)).next(d=>B.forEach(d,m=>l.put(u0(m.indexId,this.uid,c,r)))))}updateIndexEntries(t,e){const r=new Map;return B.forEach(e,(a,l)=>{const c=r.get(a.collectionGroup);return(c?B.resolve(c):this.getFieldIndexes(t,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),B.forEach(d,m=>this.Cn(t,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?B.resolve():this.Mn(t,l,m,p,_)}))))})}xn(t,e,r,a){return Ro(t).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,e.key),documentKey:e.key.path.toArray()})}On(t,e,r,a){return Ro(t).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,e.key),e.key.path.toArray()])}Cn(t,e,r){const a=Ro(t);let l=new Xt(Gi);return a.Z({index:ab,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,e)])},(c,d)=>{l=l.add(new oa(r.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(t,e){let r=new Xt(Gi);const a=this.yn(e,t);if(a==null)return r;const l=Kg(e);if(l!=null){const c=t.data.field(l.fieldPath);if(tc(c))for(const d of c.arrayValue.values||[])r=r.add(new oa(e.indexId,t.key,this.fn(d),a))}else r=r.add(new oa(e.indexId,t.key,ef,a));return r}Mn(t,e,r,a,l){rt(p0,"Updating index entries for document '%s'",e.key);const c=[];return function(m,p,_,T,b){const D=m.getIterator(),N=p.getIterator();let G=wo(D),z=wo(N);for(;G||z;){let Y=!1,it=!1;if(G&&z){const Z=_(G,z);Z<0?it=!0:Z>0&&(Y=!0)}else G!=null?it=!0:Y=!0;Y?(T(z),z=wo(N)):it?(b(G),G=wo(D)):(G=wo(D),z=wo(N))}}(a,l,Gi,d=>{c.push(this.xn(t,e,r,d))},d=>{c.push(this.On(t,e,r,d))}),B.waitFor(c)}vn(t){let e=1;return Io(t).Z({index:sb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),e=a.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,d)=>Gi(c,d)).filter((c,d,m)=>!d||Gi(c,m[d-1])!==0);const a=[];a.push(t);for(const c of r){const d=Gi(c,t),m=Gi(c,e);if(d===0)a[0]=t.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(e);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,ef,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,ef,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(t,e){return Gi(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(_0)}getMinOffset(t,e){return B.mapArray(this.dn(e),r=>this.An(t,r).next(a=>a||ft())).next(_0)}}function y0(s){return ke(s,Zu)}function Ro(s){return ke(s,Df)}function Cu(s){return ke(s,Up)}function Io(s){return ke(s,If)}function _0(s){gt(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;Pp(a,t)<0&&(t=a),e<a.largestBatchId&&(e=a.largestBatchId)}return new On(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uw=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(s,t,e){const r=s.store(er),a=s.store(Fo),l=[],c=IDBKeyRange.only(e.batchId);let d=0;const m=r.Z({range:c},(_,T,b)=>(d++,b.delete()));l.push(m.next(()=>{gt(d===1)}));const p=[];for(const _ of e.mutations){const T=nb(t,_.key.path,e.batchId);l.push(a.delete(T)),p.push(_.key)}return B.waitFor(l).next(()=>p)}function Mf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ft();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(uw,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);class ed{constructor(t,e,r,a){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(t,e,r,a){gt(t.uid!=="");const l=t.isAuthenticated()?t.uid:"";return new ed(l,e,r,a)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hi(t).Z({index:ca,range:r},(a,l,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,a){const l=Oo(t),c=Hi(t);return c.add({}).next(d=>{gt(typeof d=="number");const m=new Yp(d,e,r,a),p=function(D,N,G){const z=G.baseMutations.map(it=>rc(D.Tt,it)),Y=G.mutations.map(it=>rc(D.Tt,it));return{userId:N,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:z,mutations:Y}}(this.serializer,this.userId,m),_=[];let T=new Xt((b,D)=>bt(b.canonicalString(),D.canonicalString()));for(const b of a){const D=nb(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(p)),_.push(l.put(D,kC))}return T.forEach(b=>{_.push(this.indexManager.addToCollectionParentIndex(t,b))}),t.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),B.waitFor(_).next(()=>m)})}lookupMutationBatch(t,e){return Hi(t).get(e).next(r=>r?(gt(r.userId===this.userId),sa(this.serializer,r)):null)}Ln(t,e){return this.Bn[e]?B.resolve(this.Bn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const a=r.keys();return this.Bn[e]=a,a}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Hi(t).Z({index:ca,range:a},(c,d,m)=>{d.userId===this.userId&&(gt(d.batchId>=r),l=sa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ji;return Hi(t).Z({index:ca,range:e,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Ji],[this.userId,Number.POSITIVE_INFINITY]);return Hi(t).G(ca,e).next(r=>r.map(a=>sa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=cf(this.userId,e.path),a=IDBKeyRange.lowerBound(r),l=[];return Oo(t).Z({range:a},(c,d,m)=>{const[p,_,T]=c,b=Tr(_);if(p===this.userId&&e.path.isEqual(b))return Hi(t).get(T).next(D=>{if(!D)throw ft();gt(D.userId===this.userId),l.push(sa(this.serializer,D))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Xt(bt);const a=[];return e.forEach(l=>{const c=cf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Oo(t).Z({range:d},(p,_,T)=>{const[b,D,N]=p,G=Tr(D);b===this.userId&&l.path.isEqual(G)?r=r.add(N):T.done()});a.push(m)}),B.waitFor(a).next(()=>this.kn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1,l=cf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Xt(bt);return Oo(t).Z({range:c},(m,p,_)=>{const[T,b,D]=m,N=Tr(b);T===this.userId&&r.isPrefixOf(N)?N.length===a&&(d=d.add(D)):_.done()}).next(()=>this.kn(t,d))}kn(t,e){const r=[],a=[];return e.forEach(l=>{a.push(Hi(t).get(l).next(c=>{if(c===null)throw ft();gt(c.userId===this.userId),r.push(sa(this.serializer,c))}))}),B.waitFor(a).next(()=>r)}removeMutationBatch(t,e){return cw(t.ue,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.qn(e.batchId)}),B.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(t,a))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return B.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Oo(t).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Tr(l[1]);a.push(m)}else d.done()}).next(()=>{gt(a.length===0)})})}containsKey(t,e){return hw(t,this.userId,e)}Qn(t){return fw(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ji,lastStreamToken:""})}}function hw(s,t,e){const r=cf(t,e.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Oo(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,b]=d;_===t&&T===a&&(c=!0),p.done()}).next(()=>c)}function Hi(s){return ke(s,er)}function Oo(s){return ke(s,Fo)}function fw(s){return ke(s,$u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Ta(0)}static Kn(){return new Ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Wn(t).next(e=>{const r=new Ta(e.highestTargetId);return e.highestTargetId=r.next(),this.Gn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(e=>pt.fromTimestamp(new he(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.Wn(t).next(a=>(a.highestListenSequenceNumber=e,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),e>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=e),this.Gn(t,a)))}addTargetData(t,e){return this.zn(t,e).next(()=>this.Wn(t).next(r=>(r.targetCount+=1,this.jn(e,r),this.Gn(t,r))))}updateTargetData(t,e){return this.zn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Do(t).delete(e.targetId)).next(()=>this.Wn(t)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.Gn(t,r)))}removeTargets(t,e,r){let a=0;const l=[];return Do(t).Z((c,d)=>{const m=Pu(d);m.sequenceNumber<=e&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(t,m)))}).next(()=>B.waitFor(l)).next(()=>a)}forEachTarget(t,e){return Do(t).Z((r,a)=>{const l=Pu(a);e(l)})}Wn(t){return E0(t).get(Rf).next(e=>(gt(e!==null),e))}Gn(t,e){return E0(t).put(Rf,e)}zn(t,e){return Do(t).put(aw(this.serializer,e))}jn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.Wn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=pa(e),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Do(t).Z({range:a,index:ib},(c,d,m)=>{const p=Pu(d);gc(e,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(t,e,r){const a=[],l=Yi(t);return e.forEach(c=>{const d=on(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(t,r,c))}),B.waitFor(a)}removeMatchingKeys(t,e,r){const a=Yi(t);return B.forEach(e,l=>{const c=on(l.path);return B.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=Yi(t),a=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),a=Yi(t);let l=Rt();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Tr(c[1]),_=new ot(p);l=l.add(_)}).next(()=>l)}containsKey(t,e){const r=on(e.path),a=IDBKeyRange.bound([r],[$A(r)],!1,!0);let l=0;return Yi(t).Z({index:kp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(t,e){return Do(t).get(e).next(r=>r?Pu(r):null)}}function Do(s){return ke(s,jo)}function E0(s){return ke(s,da)}function Yi(s){return ke(s,Go)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LruGarbageCollector",sx=1048576;function A0([s,t],[e,r]){const a=bt(s,e);return a===0?bt(t,r):a}class ax{constructor(t){this.Hn=t,this.buffer=new Xt(A0),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();A0(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class dw{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){rt(T0,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ds(e)?rt(T0,"Ignoring IndexedDB error during garbage collection: ",e):await fs(e)}await this.er(3e5)})}}class ox{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return B.resolve(En.ae);const r=new ax(e);return this.tr.forEachTarget(t,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(t,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.tr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(v0)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v0):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(t,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(t,r,e))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(T=>(p=Date.now(),Co()<=Pt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function mw(s,t){return new ox(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t,e){this.db=t,this.garbageCollector=mw(this,e)}nr(t){const e=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(a=>r+a))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}rr(t,e){return this._r(t,(r,a)=>e(a))}addReference(t,e,r){return nf(t,r)}removeReference(t,e,r){return nf(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return nf(t,e)}ar(t,e){return function(a,l){let c=!1;return fw(a).X(d=>hw(a,d,l).next(m=>(m&&(c=!0),B.resolve(!m)))).next(()=>c)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(t,(c,d)=>{if(d<=e){const m=this.ar(t,c).next(p=>{if(!p)return l++,r.getEntry(t,c).next(()=>(r.removeEntry(c,pt.min()),Yi(t).delete(function(T){return[0,on(T.path)]}(c))))});a.push(m)}}).next(()=>B.waitFor(a)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return nf(t,e)}_r(t,e){const r=Yi(t);let a,l=En.ae;return r.Z({index:kp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==En.ae&&e(new ot(Tr(a)),l),l=p,a=m):l=En.ae}).next(()=>{l!==En.ae&&e(new ot(Tr(a)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function nf(s,t){return Yi(s).put(function(r,a){return{targetId:0,path:on(r.path),sequenceNumber:a}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.changes=new fi(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,se.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?B.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return ta(t).put(r)}removeEntry(t,e,r){return ta(t).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Nf(c),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.ur(t,r)))}getEntry(t,e){let r=se.newInvalidDocument(e);return ta(t).Z({index:hf,range:IDBKeyRange.only(Vu(e))},(a,l)=>{r=this.cr(e,l)}).next(()=>r)}lr(t,e){let r={size:0,document:se.newInvalidDocument(e)};return ta(t).Z({index:hf,range:IDBKeyRange.only(Vu(e))},(a,l)=>{r={document:this.cr(e,l),size:Mf(l)}}).next(()=>r)}getEntries(t,e){let r=An();return this.hr(t,e,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(t,e){let r=An(),a=new ie(ot.comparator);return this.hr(t,e,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,Mf(c))}).next(()=>({documents:r,Tr:a}))}hr(t,e,r){if(e.isEmpty())return B.resolve();let a=new Xt(S0);e.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Vu(a.first()),Vu(a.last())),c=a.getIterator();let d=c.getNext();return ta(t).Z({index:hf,range:l},(m,p,_)=>{const T=ot.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&S0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(Vu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,r,a,l){const c=e.path,d=[c.popLast().toArray(),c.lastSegment(),Nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(t).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=An();for(const T of p){const b=this.cr(ot.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(yc(e,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _})}getAllFromCollectionGroup(t,e,r,a){let l=An();const c=w0(e,r),d=w0(e,On.max());return ta(t).Z({index:rb,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(ot.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(t){return new cx(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return b0(t).get(Yg).next(e=>(gt(!!e),e))}ur(t,e){return b0(t).put(Yg,e)}cr(t,e){if(e){const r=YV(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(pt.min())))return r}return se.newInvalidDocument(t)}}function pw(s){return new ux(s)}class cx extends gw{constructor(t,e){super(),this.Ir=t,this.trackRemovals=e,this.Er=new fi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(t){const e=[];let r=0,a=new Xt((l,c)=>bt(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(e.push(this.Ir.removeEntry(t,l,d.readTime)),c.isValidDocument()){const m=o0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=Mf(m);r+=p-d.size,e.push(this.Ir.addEntry(t,l,m))}else if(r-=d.size,this.trackRemovals){const m=o0(this.Ir.serializer,c.convertToNoDocument(pt.min()));e.push(this.Ir.addEntry(t,l,m))}}),a.forEach(l=>{e.push(this.Ir.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Ir.updateMetadata(t,r)),B.waitFor(e)}getFromCache(t,e){return this.Ir.lr(t,e).next(r=>(this.Er.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Ir.Pr(t,e).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function b0(s){return ke(s,Xu)}function ta(s){return ke(s,Sf)}function Vu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function w0(s,t){const e=t.documentKey.path.toArray();return[s,Nf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function S0(s,t){const e=s.path.toArray(),r=t.path.toArray();let a=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(a=bt(e[l],r[l]),a)return a;return a=bt(e.length,r.length),a||(a=bt(e[e.length-2],r[r.length-2]),a||bt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t,e,r,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(r!==null&&qu(r.mutation,a,Tn.empty(),he.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Rt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Rt()){const a=Ar();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,r).next(l=>{let c=Ou();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const r=Ar();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Rt()))}populateOverlays(t,e,r){const a=[];return r.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,r,a){let l=An();const c=zu(),d=function(){return zu()}();return e.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof di)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),qu(_.mutation,p,_.mutation.getFieldMask(),he.now())):c.set(p.key,Tn.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),e.forEach((p,_)=>{var T;return d.set(p,new hx(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(t,e){const r=zu();let a=new ie((c,d)=>c-d),l=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=e.get(m);if(p===null)return;let _=r.get(m)||Tn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||Rt()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Mb();_.forEach(b=>{if(!l.has(b)){const D=qb(e.get(b),r.get(b));D!==null&&T.set(b,D),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return B.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,a){return function(c){return ot.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Gp(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,a):this.getDocumentsMatchingCollectionQuery(t,e,r,a)}getNextDocuments(t,e,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,a-l.size):B.resolve(Ar());let d=qo,m=l;return c.next(p=>B.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?B.resolve():this.remoteDocumentCache.getEntry(t,_).next(b=>{m=m.insert(_,b)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,Rt())).next(_=>({batchId:d,changes:Ob(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ot(e)).next(r=>{let a=Ou();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,r,a){const l=e.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(t,l).next(d=>B.forEach(d,m=>{const p=function(T,b){return new hi(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,r,a).next(_=>{_.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,se.newInvalidDocument(_)))});let d=Ou();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&qu(_.mutation,p,Tn.empty(),he.now()),yc(e,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return B.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:we(a.createTime)}}(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(a){return{name:a.name,query:Jp(a.bundledQuery),readTime:we(a.readTime)}}(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.overlays=new ie(ot.comparator),this.Rr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ar();return B.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((a,l)=>{this.Et(t,e,l)}),B.resolve()}removeOverlaysForBatchId(t,e,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),B.resolve()}getOverlaysForCollection(t,e,r){const a=Ar(),l=e.length+1,c=new ot(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return B.resolve(a)}getOverlaysForCollectionGroup(t,e,r,a){let l=new ie((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Ar(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Ar(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return B.resolve(d)}Et(t,e,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Xp(e,r));let l=this.Rr.get(e);l===void 0&&(l=Rt(),this.Rr.set(e,l)),this.Rr.set(e,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.sessionToken=ve.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.Vr=new Xt(Ge.mr),this.gr=new Xt(Ge.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.wr(new Ge(t,e))}Sr(t,e){t.forEach(r=>this.removeReference(r,e))}br(t){const e=new ot(new Ot([])),r=new Ge(e,t),a=new Ge(e,t+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new ot(new Ot([])),r=new Ge(e,t),a=new Ge(e,t+1);let l=Rt();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const e=new Ge(t,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return ot.comparator(t.key,e.key)||bt(t.Cr,e.Cr)}static pr(t,e){return bt(t.Cr,e.Cr)||ot.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Xt(Ge.mr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yp(l,e,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new Ge(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return B.resolve(c)}lookupMutationBatch(t,e){return B.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,a=this.Nr(r),l=a<0?0:a;return B.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ji:this.Fr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),a=new Ge(e,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),B.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Xt(bt);return e.forEach(a=>{const l=new Ge(a,0),c=new Ge(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),B.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,a=r.length+1;let l=r;ot.isDocumentKey(l)||(l=l.child(""));const c=new Ge(new ot(l),0);let d=new Xt(bt);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),B.resolve(this.Br(d))}Br(t){const e=[];return t.forEach(r=>{const a=this.Or(r);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){gt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return B.forEach(e.mutations,a=>{const l=new Ge(a.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,e){const r=new Ge(e,0),a=this.Mr.firstAfterOrEqual(r);return B.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t){this.kr=t,this.docs=function(){return new ie(ot.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return B.resolve(r?r.document.mutableCopy():se.newInvalidDocument(e))}getEntries(t,e){let r=An();return e.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():se.newInvalidDocument(a))}),B.resolve(r)}getDocumentsMatchingQuery(t,e,r,a){let l=An();const c=e.path,d=new ot(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Pp(ZA(_),r)<=0||(a.has(_.key)||yc(e,_))&&(l=l.insert(_.key,_.mutableCopy()))}return B.resolve(l)}getAllFromCollectionGroup(t,e,r,a){ft()}qr(t,e){return B.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new yx(this)}getSize(t){return B.resolve(this.size)}}class yx extends gw{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?e.push(this.Ir.addEntry(t,a)):this.Ir.removeEntry(r)}),B.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t){this.persistence=t,this.Qr=new fi(e=>pa(e),gc),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ny,this.targetCount=0,this.Kr=Ta.Un()}forEachTarget(t,e){return this.Qr.forEach((r,a)=>e(a)),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),B.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new Ta(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.zn(e),B.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=e&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),B.waitFor(l).next(()=>a)}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const r=this.Qr.get(e)||null;return B.resolve(r)}addMatchingKeys(t,e,r){return this.Ur.yr(e,r),B.resolve()}removeMatchingKeys(t,e,r){this.Ur.Sr(e,r);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),B.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),B.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Ur.vr(e);return B.resolve(r)}containsKey(t,e){return B.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new En(0),this.zr=!1,this.zr=!0,this.jr=new mx,this.referenceDelegate=t(this),this.Hr=new _x(this),this.indexManager=new nx,this.remoteDocumentCache=function(a){return new px(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new sw(e),this.Yr=new fx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new dx,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Wr[t.toKey()];return r||(r=new gx(e,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,r){rt("MemoryPersistence","Starting transaction:",t);const a=new vx(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(t,e){return B.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,e)))}}class vx extends JA{constructor(t){super(),this.currentSequenceNumber=t}}class nd{constructor(t){this.persistence=t,this.ti=new ny,this.ni=null}static ri(t){return new nd(t)}get ii(){if(this.ni)return this.ni;throw ft()}addReference(t,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),B.resolve()}removeReference(t,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),B.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ii,r=>{const a=ot.fromPath(r);return this.si(t,a).next(l=>{l||e.removeEntry(a,pt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return B.or([()=>B.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Pf{constructor(t,e){this.persistence=t,this.oi=new fi(r=>on(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=mw(this,e)}static ri(t,e){return new Pf(t,e)}Zr(){}Xr(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(a=>r+a))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}rr(t,e){return B.forEach(this.oi,(r,a)=>this.ar(t,r,a).next(l=>l?B.resolve():e(a)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(t,c=>this.ar(t,c,e).next(d=>{d||(r++,l.removeEntry(c,pt.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}removeReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=df(t.data.value)),e}ar(t,e,r){return B.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.oi.get(e);return B.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(t){this.serializer=t}B(t,e,r,a){const l=new Hf("createOrUpgrade",e);r<1&&a>=1&&(function(m){m.createObjectStore(mc)}(t),function(m){m.createObjectStore($u,{keyPath:LC}),m.createObjectStore(er,{keyPath:kT,autoIncrement:!0}).createIndex(ca,UT,{unique:!0}),m.createObjectStore(Fo)}(t),R0(t),function(m){m.createObjectStore(ra)}(t));let c=B.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(Go),m.deleteObjectStore(jo),m.deleteObjectStore(da)}(t),R0(t)),c=c.next(()=>function(m){const p=m.store(da),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return p.put(Rf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(er).G().next(T=>{m.deleteObjectStore(er),m.createObjectStore(er,{keyPath:kT,autoIncrement:!0}).createIndex(ca,UT,{unique:!0});const b=p.store(er),D=T.map(N=>b.put(N));return B.waitFor(D)})}(t,l))),c=c.next(()=>{(function(m){m.createObjectStore(Ho,{keyPath:HC})})(t)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Xu)}(t),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(t,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Qf,{keyPath:QC})})(t),function(m){m.createObjectStore(Kf,{keyPath:KC})}(t)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(Yf,{keyPath:tV});p.createIndex(Xg,eV,{unique:!1}),p.createIndex(ob,nV,{unique:!1})})(t)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(Sf,{keyPath:UC});p.createIndex(hf,BC),p.createIndex(rb,zC)}(t)).next(()=>this.hi(t,l)).next(()=>t.deleteObjectStore(ra))),r<14&&a>=14&&(c=c.next(()=>this.Pi(t,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Up,{keyPath:YC,autoIncrement:!0}).createIndex($g,$C,{unique:!1}),m.createObjectStore(If,{keyPath:XC}).createIndex(sb,ZC,{unique:!1}),m.createObjectStore(Df,{keyPath:WC}).createIndex(ab,JC,{unique:!1})}(t))),r<16&&a>=16&&(c=c.next(()=>{e.objectStore(If).clear()}).next(()=>{e.objectStore(Df).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Bp,{keyPath:rV})})(t)})),c}ai(t){let e=0;return t.store(ra).Z((r,a)=>{e+=Mf(a)}).next(()=>{const r={byteSize:e};return t.store(Xu).put(Yg,r)})}_i(t){const e=t.store($u),r=t.store(er);return e.G().next(a=>B.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Ji],[l.userId,l.lastAcknowledgedBatchId]);return r.G(ca,c).next(d=>B.forEach(d,m=>{gt(m.userId===l.userId);const p=sa(this.serializer,m);return cw(t,l.userId,p).next(()=>{})}))}))}ui(t){const e=t.store(Go),r=t.store(ra);return t.store(da).get(Rf).next(a=>{const l=[];return r.Z((c,d)=>{const m=new Ot(c),p=function(T){return[0,on(T)]}(m);l.push(e.get(p).next(_=>_?B.resolve():(T=>e.put({targetId:0,path:on(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>B.waitFor(l))})}ci(t,e){t.createObjectStore(Zu,{keyPath:GC});const r=e.store(Zu),a=new ey,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:on(m)})}};return e.store(ra).Z({Y:!0},(c,d)=>{const m=new Ot(c);return l(m.popLast())}).next(()=>e.store(Fo).Z({Y:!0},([c,d,m],p)=>{const _=Tr(d);return l(_.popLast())}))}li(t){const e=t.store(jo);return e.Z((r,a)=>{const l=Pu(a),c=aw(this.serializer,l);return e.put(c)})}hi(t,e){const r=e.store(ra),a=[];return r.Z((l,c)=>{const d=e.store(Sf),m=function(T){return T.document?new ot(Ot.fromString(T.document.name).popFirst(5)):T.noDocument?ot.fromSegments(T.noDocument.path):T.unknownDocument?ot.fromSegments(T.unknownDocument.path):ft()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>B.waitFor(a))}Pi(t,e){const r=e.store(er),a=pw(this.serializer),l=new ry(nd.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:Rt();sa(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),B.forEach(d,(m,p)=>{const _=new He(p),T=td.It(this.serializer,_),b=l.getIndexManager(_),D=ed.It(_,this.serializer,b,l.referenceDelegate);return new yw(a,D,T,b).recalculateAndSaveOverlaysForDocumentKeys(new Zg(e,En.ae),m).next()})})}}function R0(s){s.createObjectStore(Go,{keyPath:FC}).createIndex(kp,jC,{unique:!0}),s.createObjectStore(jo,{keyPath:"targetId"}).createIndex(ib,qC,{unique:!0}),s.createObjectStore(da)}const Qi="IndexedDbPersistence",Ng=18e5,Og=5e3,Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_w="main";class iy{constructor(t,e,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!iy.D())throw new nt(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lx(this,a),this.gi=e+_w,this.serializer=new sw(m),this.pi=new br(this.gi,this.di,new Ex(this.serializer)),this.jr=new XV,this.Hr=new ix(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pw(this.serializer),this.Yr=new $V,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&be(Qi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(Q.FAILED_PRECONDITION,Mg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new En(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>rf(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(e=>this.isPrimary&&!e?this.xi(t).next(()=>!1):!!e&&this.Oi(t).next(()=>!0))).catch(t=>{if(ds(t))return rt(Qi,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt(Qi,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return xu(t).get(bo).next(e=>B.resolve(this.Ni(e)))}Bi(t){return rf(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Ng)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=ke(e,Ho);return r.G().next(a=>{const l=this.qi(a,Ng),c=a.filter(d=>l.indexOf(d)===-1);return B.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const e of t)this.yi.removeItem(this.Qi(e.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?B.resolve(!0):xu(t).get(bo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,Og)&&!this.$i(e.ownerId)){if(this.Ni(e)&&this.networkEnabled)return!0;if(!this.Ni(e)){if(!e.allowTabSynchronization)throw new nt(Q.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||rf(t).G().next(r=>this.qi(r,Og).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&rt(Qi,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[mc,Ho],t=>{const e=new Zg(t,En.ae);return this.xi(e).next(()=>this.Bi(e))}),this.pi.close(),this.Gi()}qi(t,e){return t.filter(r=>this.ki(r.updateTimeMs,e)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>rf(t).G().next(e=>this.qi(e,Ng).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,e){return ed.It(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new rx(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return td.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,e,r){rt(Qi,"Starting transaction:",t);const a=e==="readonly"?"readonly":"readwrite",l=function(m){return m===17?aV:m===16?sV:m===15?zp:m===14?cb:m===13?ub:m===12?iV:m===11?lb:void ft()}(this.di);let c;return this.pi.runTransaction(t,a,l,d=>(c=new Zg(d,this.Gr?this.Gr.next():En.ae),e==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw be(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new nt(Q.FAILED_PRECONDITION,WA);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(t){return xu(t).get(bo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,Og)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nt(Q.FAILED_PRECONDITION,Mg)})}Oi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xu(t).put(bo,e)}static D(){return br.D()}xi(t){const e=xu(t);return e.get(bo).next(r=>this.Ni(r)?(rt(Qi,"Releasing primary lease."),e.delete(bo)):B.resolve())}ki(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(be(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;SA()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var e;try{const r=((e=this.yi)===null||e===void 0?void 0:e.getItem(this.Qi(t)))!==null;return rt(Qi,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return be(Qi,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){be("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function xu(s){return ke(s,mc)}function rf(s){return ke(s,Ho)}function sy(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e,r,a){this.targetId=t,this.fromCache=e,this.Hi=r,this.Ji=a}static Yi(t,e){let r=Rt(),a=Rt();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ay(t,e.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return SA()?8:tb(Tf())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,r,a){const l={result:null};return this.rs(t,e).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(t,e,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Tx;return this._s(t,e,c).next(d=>{if(l.result=d,this.Xi)return this.us(t,e,c,d.size)})}).next(()=>l.result)}us(t,e,r,a){return r.documentReadCount<this.es?(Co()<=Pt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Vo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),B.resolve()):(Co()<=Pt.DEBUG&&rt("QueryEngine","Query:",Vo(e),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Co()<=Pt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Vo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gn(e))):B.resolve())}rs(t,e){if(ZT(e))return B.resolve(null);let r=gn(e);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=xf(e,null,"F"),r=gn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Rt(...l);return this.ns.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(m=>{const p=this.cs(e,d);return this.ls(e,p,c,m.readTime)?this.rs(t,xf(e,null,"F")):this.hs(t,p,e,m)}))})))}ss(t,e,r,a){return ZT(e)||a.isEqual(pt.min())?B.resolve(null):this.ns.getDocuments(t,r).next(l=>{const c=this.cs(e,l);return this.ls(e,c,r,a)?B.resolve(null):(Co()<=Pt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Vo(e)),this.hs(t,c,e,XA(a,qo)).next(d=>d))})}cs(t,e){let r=new Xt(xb(t));return e.forEach((a,l)=>{yc(t,l)&&(r=r.add(l))}),r}ls(t,e,r,a){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(t,e,r){return Co()<=Pt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Vo(e)),this.ns.getDocumentsMatchingQuery(t,e,On.min(),r)}hs(t,e,r,a){return this.ns.getDocumentsMatchingQuery(t,r,a).next(l=>(e.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",Ax=3e8;class bx{constructor(t,e,r,a){this.persistence=t,this.Ps=e,this.serializer=a,this.Ts=new ie(bt),this.Is=new fi(l=>pa(l),gc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function Ew(s,t,e,r){return new bx(s,t,e,r)}async function Tw(s,t){const e=ut(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let a;return e.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,e.As(t),e.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Rt();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return e.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function wx(s,t){const e=ut(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=e.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,b=T.keys();let D=B.resolve();return b.forEach(N=>{D=D.next(()=>_.getEntry(m,N)).next(G=>{const z=p.docVersions.get(N);gt(z!==null),G.version.compareTo(z)<0&&(T.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),_.addEntry(G)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Rt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(t))).next(()=>e.localDocuments.getDocuments(r,a))})}function Aw(s){const t=ut(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function Sx(s,t){const e=ut(s),r=t.snapshotVersion;let a=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=e.ds.newChangeBuffer({trackRemovals:!0});a=e.Ts;const d=[];t.targetChanges.forEach((_,T)=>{const b=a.get(T);if(!b)return;d.push(e.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>e.Hr.addMatchingKeys(l,_.addedDocuments,T)));let D=b.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(T)!==null?D=D.withResumeToken(ve.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),a=a.insert(T,D),function(G,z,Y){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=Ax?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(b,D,_)&&d.push(e.Hr.updateTargetData(l,D))});let m=An(),p=Rt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(bw(l,c,t.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(pt.min())){const _=e.Hr.getLastRemoteSnapshotVersion(l).next(T=>e.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return B.waitFor(d).next(()=>c.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(e.Ts=a,l))}function bw(s,t,e){let r=Rt(),a=Rt();return e.forEach(l=>r=r.add(l)),t.getEntries(s,r).next(l=>{let c=An();return e.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(pt.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):rt(oy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function Rx(s,t){const e=ut(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Ji),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Wo(s,t){const e=ut(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return e.Hr.getTargetData(r,t).next(l=>l?(a=l,B.resolve(a)):e.Hr.allocateTargetId(r).next(c=>(a=new ni(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=e.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(t,r.targetId)),r})}async function Jo(s,t,e){const r=ut(s),a=r.Ts.get(t),l=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!ds(c))throw c;rt(oy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ts=r.Ts.remove(t),r.Is.delete(a.target)}function Lf(s,t,e){const r=ut(s);let a=pt.min(),l=Rt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=ut(m),b=T.Is.get(_);return b!==void 0?B.resolve(T.Ts.get(b)):T.Hr.getTargetData(p,_)}(r,c,gn(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,t,e?a:pt.min(),e?l:Rt())).next(d=>(Rw(r,Vb(t),d),{documents:d,gs:l})))}function ww(s,t){const e=ut(s),r=ut(e.Hr),a=e.Ts.get(t);return a?Promise.resolve(a.target):e.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,t).next(c=>c?c.target:null))}function Sw(s,t){const e=ut(s),r=e.Es.get(t)||pt.min();return e.persistence.runTransaction("Get new document changes","readonly",a=>e.ds.getAllFromCollectionGroup(a,t,XA(r,qo),Number.MAX_SAFE_INTEGER)).then(a=>(Rw(e,t,a),a))}function Rw(s,t,e){let r=s.Es.get(t)||pt.min();e.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(t,r)}async function Ix(s,t,e,r){const a=ut(s);let l=Rt(),c=An();for(const p of e){const _=t.ps(p.metadata.name);p.document&&(l=l.add(_));const T=t.ys(p);T.setReadTime(t.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await Wo(a,function(_){return gn(ll(Ot.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>bw(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function Dx(s,t,e=Rt()){const r=await Wo(s,gn(Jp(t.bundledQuery))),a=ut(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=we(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,t);const d=r.withResumeToken(ve.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,e,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firestore_clients";function I0(s,t){return`${Iw}_${s}_${t}`}const Dw="firestore_mutations";function D0(s,t,e){let r=`${Dw}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Cw="firestore_targets";function Pg(s,t){return`${Cw}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="SharedClientState";class kf{constructor(t,e,r,a){this.user=t,this.batchId=e,this.state=r,this.error=a}static Ss(t,e,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new nt(a.error.code,a.error.message))),c?new kf(t,e,a.state,l):(be(Er,`Failed to parse mutation state for ID '${e}': ${r}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Fu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ss(t,e){const r=JSON.parse(e);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new nt(r.error.code,r.error.message))),l?new Fu(t,r.state,a):(be(Er,`Failed to parse target state for ID '${t}': ${e}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ss(t,e){const r=JSON.parse(e);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Hp();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=eb(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Uf(t,l):(be(Er,`Failed to parse client data for instance '${t}': ${e}`),null)}}class ly{constructor(t,e){this.clientId=t,this.onlineState=e}static Ss(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new ly(e.clientId,e.onlineState):(be(Er,`Failed to parse online state: ${t}`),null)}}class fp{constructor(){this.activeTargetIds=Hp()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lg{constructor(t,e,r,a,l){this.window=t,this.Ti=e,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ie(bt),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=I0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new fp),this.Ls=new RegExp(`^${Iw}_${c}_([^_]*)$`),this.ks=new RegExp(`^${Dw}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Cw}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.zi();for(const r of t){if(r===this.Cs)continue;const a=this.getItem(I0(this.persistenceKey,r));if(a){const l=Uf.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const e=this.storage.getItem(this.Qs);if(e){const r=this.Ks(e);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Bs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(t){let e=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.zs(t,"pending")}updateMutationState(t,e,r){this.zs(t,e,r),this.js(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const a=this.storage.getItem(Pg(this.persistenceKey,t));if(a){const l=Fu.Ss(t,a);l&&(r=l.state)}}return e&&this.Hs.Ds(t),this.Us(),r}removeLocalQueryTarget(t){this.Hs.vs(t),this.Us()}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Pg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Js(t,e,r)}handleUserChange(t,e,r){e.forEach(a=>{this.js(a)}),this.currentUser=t,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(t){this.Ys(t)}notifyBundleLoaded(t){this.Zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return rt(Er,"READ",t,e),e}setItem(t,e){rt(Er,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){rt(Er,"REMOVE",t),this.storage.removeItem(t)}Ms(t){const e=t;if(e.storageArea===this.storage){if(rt(Er,"EVENT",e.key,e.newValue),e.key===this.Ns)return void be("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.Ls.test(e.key)){if(e.newValue==null){const r=this.Xs(e.key);return this.eo(r,null)}{const r=this.no(e.key,e.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(e.key)){if(e.newValue!==null){const r=this.ro(e.key,e.newValue);if(r)return this.io(r)}}else if(this.qs.test(e.key)){if(e.newValue!==null){const r=this.so(e.key,e.newValue);if(r)return this.oo(r)}}else if(e.key===this.Qs){if(e.newValue!==null){const r=this.Ks(e.newValue);if(r)return this.Ws(r)}}else if(e.key===this.Bs){const r=function(l){let c=En.ae;if(l!=null)try{const d=JSON.parse(l);gt(typeof d=="number"),c=d}catch(d){be(Er,"Failed to read sequence number from WebStorage",d)}return c}(e.newValue);r!==En.ae&&this.sequenceNumberHandler(r)}else if(e.key===this.$s){const r=this._o(e.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(e)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(t,e,r){const a=new kf(this.currentUser,t,e,r),l=D0(this.persistenceKey,this.currentUser,t);this.setItem(l,a.bs())}js(t){const e=D0(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ys(t){const e={clientId:this.Cs,onlineState:t};this.storage.setItem(this.Qs,JSON.stringify(e))}Js(t,e,r){const a=Pg(this.persistenceKey,t),l=new Fu(t,e,r);this.setItem(a,l.bs())}Zs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.$s,e)}Xs(t){const e=this.Ls.exec(t);return e?e[1]:null}no(t,e){const r=this.Xs(t);return Uf.Ss(r,e)}ro(t,e){const r=this.ks.exec(t),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return kf.Ss(new He(l),a,e)}so(t,e){const r=this.qs.exec(t),a=Number(r[1]);return Fu.Ss(a,e)}Ks(t){return ly.Ss(t)}_o(t){return JSON.parse(t)}async io(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.uo(t.batchId,t.state,t.error);rt(Er,`Ignoring mutation for non-active user ${t.user.uid}`)}oo(t){return this.syncEngine.co(t.targetId,t.state,t.error)}eo(t,e){const r=e?this.xs.insert(t,e):this.xs.remove(t),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(t){this.xs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Gs(t){let e=Hp();return t.forEach((r,a)=>{e=e.unionWith(a.activeTargetIds)}),e}}class Vw{constructor(){this.ho=new fp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,r){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new fp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="ConnectivityMonitor";class V0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){rt(C0,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){rt(C0,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=null;function dp(){return sf===null?sf=function(){return 268435456+Math.round(2147483648*Math.random())}():sf++,"0x"+sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="RestConnection",Vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xx{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===Wg?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(t,e,r,a,l){const c=dp(),d=this.bo(t,e.toUriEncodedString());rt(kg,`Sending RPC '${t}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(t,d,m,r).then(p=>(rt(kg,`Received RPC '${t}' ${c}: `,p),p),p=>{throw Rr(kg,`RPC '${t}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(t,e,r,a,l,c){return this.So(t,e,r,a,l)}Do(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}bo(t,e){const r=Vx[t];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class Ox extends xx{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,r,a){const l=dp();return new Promise((c,d)=>{const m=new FA;m.setWithCredentials(!0),m.listenOnce(jA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case lf.NO_ERROR:const _=m.getResponseJson();rt(sn,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(_)),c(_);break;case lf.TIMEOUT:rt(sn,`RPC '${t}' ${l} timed out`),d(new nt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const T=m.getStatus();if(rt(sn,`RPC '${t}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const D=b==null?void 0:b.error;if(D&&D.status&&D.message){const N=function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(Y)>=0?Y:Q.UNKNOWN}(D.status);d(new nt(N,D.message))}else d(new nt(Q.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new nt(Q.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{rt(sn,`RPC '${t}' ${l} completed.`)}});const p=JSON.stringify(a);rt(sn,`RPC '${t}' ${l} sending request:`,a),m.send(e,"POST",p,r,15)})}Wo(t,e,r){const a=dp(),l=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=QA(),d=HA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,e,r),m.encodeInitMessageHeaders=!0;const _=l.join("");rt(sn,`Creating RPC '${t}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let b=!1,D=!1;const N=new Nx({Fo:z=>{D?rt(sn,`Not sending because RPC '${t}' stream ${a} is closed:`,z):(b||(rt(sn,`Opening RPC '${t}' stream ${a} transport.`),T.open(),b=!0),rt(sn,`RPC '${t}' stream ${a} sending:`,z),T.send(z))},Mo:()=>T.close()}),G=(z,Y,it)=>{z.listen(Y,Z=>{try{it(Z)}catch(dt){setTimeout(()=>{throw dt},0)}})};return G(T,Nu.EventType.OPEN,()=>{D||(rt(sn,`RPC '${t}' stream ${a} transport opened.`),N.Qo())}),G(T,Nu.EventType.CLOSE,()=>{D||(D=!0,rt(sn,`RPC '${t}' stream ${a} transport closed`),N.Uo())}),G(T,Nu.EventType.ERROR,z=>{D||(D=!0,Rr(sn,`RPC '${t}' stream ${a} transport errored:`,z),N.Uo(new nt(Q.UNAVAILABLE,"The operation could not be completed")))}),G(T,Nu.EventType.MESSAGE,z=>{var Y;if(!D){const it=z.data[0];gt(!!it);const Z=it,dt=(Z==null?void 0:Z.error)||((Y=Z[0])===null||Y===void 0?void 0:Y.error);if(dt){rt(sn,`RPC '${t}' stream ${a} received error:`,dt);const ht=dt.status;let vt=function(R){const M=Ve[R];if(M!==void 0)return Gb(M)}(ht),V=dt.message;vt===void 0&&(vt=Q.INTERNAL,V="Unknown error status: "+ht+" with message "+dt.message),D=!0,N.Uo(new nt(vt,V)),T.close()}else rt(sn,`RPC '${t}' stream ${a} received:`,it),N.Ko(it)}}),G(d,GA.STAT_EVENT,z=>{z.stat===Hg.PROXY?rt(sn,`RPC '${t}' stream ${a} detected buffering proxy`):z.stat===Hg.NOPROXY&&rt(sn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){return typeof window<"u"?window:null}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(s){return new UV(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,e,r=1e3,a=1.5,l=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,e-r);a>0&&rt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="PersistentStream";class Nw{constructor(t,e,r,a,l,c,d,m){this.Ti=t,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new uy(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===Q.RESOURCE_EXHAUSTED?(be(e.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===e&&this.V_(r,a)},r=>{t(()=>{const a=new nt(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(t,e){const r=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return rt(x0,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(rt(x0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mx extends Nw{constructor(t,e,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,a,c),this.serializer=l}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=qV(this.serializer,t),r=function(l){if(!("targetChange"in l))return pt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?pt.min():c.readTime?we(c.readTime):pt.min()}(t);return this.listener.p_(e,r)}y_(t){const e={};e.database=op(this.serializer),e.addTarget=function(l,c){let d;const m=c.target;if(d=Cf(m)?{documents:Jb(l,m)}:{query:tw(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Kb(l,c.resumeToken);const p=sp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(pt.min())>0){d.readTime=Zo(l,c.snapshotVersion.toTimestamp());const p=sp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const r=jV(this.serializer,t);r&&(e.labels=r),this.I_(e)}w_(t){const e={};e.database=op(this.serializer),e.removeTarget=t,this.I_(e)}}class Px extends Nw{constructor(t,e,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return gt(!!t.streamToken),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=FV(t.writeResults,t.commitTime),r=we(t.commitTime);return this.listener.v_(r,e)}C_(){const t={};t.database=op(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>rc(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{}class kx extends Lx{constructor(t,e,r,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(t,ap(e,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new nt(Q.UNKNOWN,l.toString())})}Co(t,e,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(t,ap(e,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new nt(Q.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Ux{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(be(e),this.N_=!1):rt("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="RemoteStore";class Bx{constructor(t,e,r,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{gs(this)&&(rt(Aa,"Restarting streams for network reachability change."),await async function(m){const p=ut(m);p.W_.add(4),await hl(p),p.j_.set("Unknown"),p.W_.delete(4),await Ac(p)}(this))})}),this.j_=new Ux(r,a)}}async function Ac(s){if(gs(s))for(const t of s.G_)await t(!0)}async function hl(s){for(const t of s.G_)await t(!1)}function rd(s,t){const e=ut(s);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),fy(e)?hy(e):dl(e).c_()&&cy(e,t))}function tl(s,t){const e=ut(s),r=dl(e);e.K_.delete(t),r.c_()&&Ow(e,t),e.K_.size===0&&(r.c_()?r.P_():gs(e)&&e.j_.set("Unknown"))}function cy(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}dl(s).y_(t)}function Ow(s,t){s.H_.Ne(t),dl(s).w_(t)}function hy(s){s.H_=new MV({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),dl(s).start(),s.j_.B_()}function fy(s){return gs(s)&&!dl(s).u_()&&s.K_.size>0}function gs(s){return ut(s).W_.size===0}function Mw(s){s.H_=void 0}async function zx(s){s.j_.set("Online")}async function qx(s){s.K_.forEach((t,e)=>{cy(s,t)})}async function Fx(s,t){Mw(s),fy(s)?(s.j_.q_(t),hy(s)):s.j_.set("Unknown")}async function jx(s,t,e){if(s.j_.set("Online"),t instanceof Qb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,t)}catch(r){rt(Aa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Bf(s,r)}else if(t instanceof pf?s.H_.We(t):t instanceof Hb?s.H_.Ze(t):s.H_.je(t),!e.isEqual(pt.min()))try{const r=await Aw(s.localStore);e.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(ve.EMPTY_BYTE_STRING,_.snapshotVersion)),Ow(l,m);const T=new ni(_.target,m,p,_.sequenceNumber);cy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,e)}catch(r){rt(Aa,"Failed to raise snapshot:",r),await Bf(s,r)}}async function Bf(s,t,e){if(!ds(t))throw t;s.W_.add(1),await hl(s),s.j_.set("Offline"),e||(e=()=>Aw(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{rt(Aa,"Retrying IndexedDB access"),await e(),s.W_.delete(1),await Ac(s)})}function Pw(s,t){return t().catch(e=>Bf(s,e,t))}async function fl(s){const t=ut(s),e=ls(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Ji;for(;Gx(t);)try{const a=await Rx(t.localStore,r);if(a===null){t.U_.length===0&&e.P_();break}r=a.batchId,Hx(t,a)}catch(a){await Bf(t,a)}Lw(t)&&kw(t)}function Gx(s){return gs(s)&&s.U_.length<10}function Hx(s,t){s.U_.push(t);const e=ls(s);e.c_()&&e.S_&&e.b_(t.mutations)}function Lw(s){return gs(s)&&!ls(s).u_()&&s.U_.length>0}function kw(s){ls(s).start()}async function Qx(s){ls(s).C_()}async function Kx(s){const t=ls(s);for(const e of s.U_)t.b_(e.mutations)}async function Yx(s,t,e){const r=s.U_.shift(),a=$p.from(r,t,e);await Pw(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await fl(s)}async function $x(s,t){t&&ls(s).S_&&await async function(r,a){if(function(c){return jb(c)&&c!==Q.ABORTED}(a.code)){const l=r.U_.shift();ls(r).h_(),await Pw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await fl(r)}}(s,t),Lw(s)&&kw(s)}async function N0(s,t){const e=ut(s);e.asyncQueue.verifyOperationInProgress(),rt(Aa,"RemoteStore received new credentials");const r=gs(e);e.W_.add(3),await hl(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ac(e)}async function mp(s,t){const e=ut(s);t?(e.W_.delete(2),await Ac(e)):t||(e.W_.add(2),await hl(e),e.j_.set("Unknown"))}function dl(s){return s.J_||(s.J_=function(e,r,a){const l=ut(e);return l.M_(),new Mx(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:zx.bind(null,s),No:qx.bind(null,s),Lo:Fx.bind(null,s),p_:jx.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),fy(s)?hy(s):s.j_.set("Unknown")):(await s.J_.stop(),Mw(s))})),s.J_}function ls(s){return s.Y_||(s.Y_=function(e,r,a){const l=ut(e);return l.M_(),new Px(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:Qx.bind(null,s),Lo:$x.bind(null,s),D_:Kx.bind(null,s),v_:Yx.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await fl(s)):(await s.Y_.stop(),s.U_.length>0&&(rt(Aa,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,e,r,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,a,l){const c=Date.now()+r,d=new dy(t,e,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ml(s,t){if(be("AsyncQueue",`${t}: ${s}`),ds(s))return new nt(Q.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(t){return new Po(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||ot.comparator(e.key,r.key):(e,r)=>ot.comparator(e.key,r.key),this.keyedMap=Ou(),this.sortedSet=new ie(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Po)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Po;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.Z_=new ie(ot.comparator)}track(t){const e=t.doc.key,r=this.Z_.get(e);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(e):t.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ft():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,r)=>{t.push(r)}),t}}class el{constructor(t,e,r,a,l,c,d,m,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,a,l){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new el(t,e,Po.emptySet(e),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&pc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==r[a].type||!e[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class Zx{constructor(){this.queries=M0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const a=ut(e),l=a.queries;a.queries=M0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new nt(Q.ABORTED,"Firestore shutting down"))}}function M0(){return new fi(s=>Cb(s),pc)}async function my(s,t){const e=ut(s);let r=3;const a=t.query;let l=e.queries.get(a);l?!l.na()&&t.ra()&&(r=2):(l=new Xx,r=t.ra()?0:1);try{switch(r){case 0:l.ea=await e.onListen(a,!0);break;case 1:l.ea=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const d=ml(c,`Initialization of query '${Vo(t.query)}' failed`);return void t.onError(d)}e.queries.set(a,l),l.ta.push(t),t.sa(e.onlineState),l.ea&&t.oa(l.ea)&&py(e)}async function gy(s,t){const e=ut(s),r=t.query;let a=3;const l=e.queries.get(r);if(l){const c=l.ta.indexOf(t);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=t.ra()?0:1:!l.na()&&t.ra()&&(a=2))}switch(a){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Wx(s,t){const e=ut(s);let r=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&py(e)}function Jx(s,t,e){const r=ut(s),a=r.queries.get(t);if(a)for(const l of a.ta)l.onError(e);r.queries.delete(t)}function py(s){s.ia.forEach(t=>{t.next()})}var gp,P0;(P0=gp||(gp={}))._a="default",P0.Cache="cache";class yy{constructor(t,e,r){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new el(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=el.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(t,e){this.Ia=t,this.byteLength=e}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t){this.serializer=t}ps(t){return wr(this.serializer,t)}ys(t){return t.metadata.exists?Wb(this.serializer,t.document,!1):se.newNoDocument(this.ps(t.metadata.name),this.ws(t.metadata.readTime))}ws(t){return we(t)}}class e2{constructor(t,e,r){this.da=t,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Uw(t)}Aa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Ia.namedQuery)this.queries.push(t.Ia.namedQuery);else if(t.Ia.documentMetadata){this.documents.push({metadata:t.Ia.documentMetadata}),t.Ia.documentMetadata.exists||++e;const r=Ot.fromString(t.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.Ia.document&&(this.documents[this.documents.length-1].document=t.Ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ra(t){const e=new Map,r=new L0(this.serializer);for(const a of t)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(e.get(c)||Rt()).add(l);e.set(c,d)}}return e}async complete(){const t=await Ix(this.localStore,new L0(this.serializer),this.documents,this.da.id),e=this.Ra(this.documents);for(const r of this.queries)await Dx(this.localStore,r,e.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:t}}}function Uw(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.key=t}}class zw{constructor(t){this.key=t}}class qw{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Rt(),this.mutatedKeys=Rt(),this.ya=xb(t),this.wa=new Po(this.ya)}get Sa(){return this.fa}ba(t,e){const r=e?e.Da:new O0,a=e?e.wa:this.wa;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((_,T)=>{const b=a.get(_),D=yc(this.query,T)?T:null,N=!!b&&this.mutatedKeys.has(b.key),G=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;b&&D?b.data.isEqual(D.data)?N!==G&&(r.track({type:3,doc:D}),z=!0):this.va(b,D)||(r.track({type:2,doc:D}),z=!0,(m&&this.ya(D,m)>0||p&&this.ya(D,p)<0)&&(d=!0)):!b&&D?(r.track({type:0,doc:D}),z=!0):b&&!D&&(r.track({type:1,doc:b}),z=!0,(m||p)&&(d=!0)),z&&(D?(c=c.add(D),l=G?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,a){const l=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const c=t.Da.X_();c.sort((_,T)=>function(D,N){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return G(D)-G(N)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=e&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new el(this.query,t.wa,l,c,t.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new O0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Rt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return t.forEach(r=>{this.pa.has(r)||e.push(new zw(r))}),this.pa.forEach(r=>{t.has(r)||e.push(new Bw(r))}),e}Oa(t){this.fa=t.gs,this.pa=Rt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return el.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ps="SyncEngine";class n2{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class r2{constructor(t){this.key=t,this.Ba=!1}}class i2{constructor(t,e,r,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new fi(d=>Cb(d),pc),this.qa=new Map,this.Qa=new Set,this.$a=new ie(ot.comparator),this.Ua=new Map,this.Ka=new ny,this.Wa={},this.Ga=new Map,this.za=Ta.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function s2(s,t,e=!0){const r=id(s);let a;const l=r.ka.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await Fw(r,t,e,!0),a}async function a2(s,t){const e=id(s);await Fw(e,t,!0,!1)}async function Fw(s,t,e,r){const a=await Wo(s.localStore,gn(t)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,e);let d;return r&&(d=await _y(s,t,l,c==="current",a.resumeToken)),s.isPrimaryClient&&e&&rd(s.remoteStore,a),d}async function _y(s,t,e,r,a){s.Ha=(T,b,D)=>async function(G,z,Y,it){let Z=z.view.ba(Y);Z.ls&&(Z=await Lf(G.localStore,z.query,!1).then(({documents:V})=>z.view.ba(V,Z)));const dt=it&&it.targetChanges.get(z.targetId),ht=it&&it.targetMismatches.get(z.targetId)!=null,vt=z.view.applyChanges(Z,G.isPrimaryClient,dt,ht);return pp(G,z.targetId,vt.Ma),vt.snapshot}(s,T,b,D);const l=await Lf(s.localStore,t,!0),c=new qw(t,l.gs),d=c.ba(l.documents),m=Ec.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);pp(s,e,p.Ma);const _=new n2(t,e,c);return s.ka.set(t,_),s.qa.has(e)?s.qa.get(e).push(t):s.qa.set(e,[t]),p.snapshot}async function o2(s,t,e){const r=ut(s),a=r.ka.get(t),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!pc(c,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Jo(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),e&&tl(r.remoteStore,a.targetId),nl(r,a.targetId)}).catch(fs)):(nl(r,a.targetId),await Jo(r.localStore,a.targetId,!0))}async function l2(s,t){const e=ut(s),r=e.ka.get(t),a=e.qa.get(r.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),tl(e.remoteStore,r.targetId))}async function u2(s,t,e){const r=Ay(s);try{const a=await function(c,d){const m=ut(c),p=he.now(),_=d.reduce((D,N)=>D.add(N.key),Rt());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",D=>{let N=An(),G=Rt();return m.ds.getEntries(D,_).next(z=>{N=z,N.forEach((Y,it)=>{it.isValidDocument()||(G=G.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(D,N)).next(z=>{T=z;const Y=[];for(const it of d){const Z=xV(it,T.get(it.key).overlayedDocument);Z!=null&&Y.push(new di(it.key,Z,Eb(Z.value.mapValue),ce.exists(!0)))}return m.mutationQueue.addMutationBatch(D,p,Y,d)}).next(z=>{b=z;const Y=z.applyToLocalDocumentSet(T,G);return m.documentOverlayCache.saveOverlays(D,z.batchId,Y)})}).then(()=>({batchId:b.batchId,changes:Ob(T)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new ie(bt)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,e),await mi(r,a.changes),await fl(r.remoteStore)}catch(a){const l=ml(a,"Failed to persist write");e.reject(l)}}async function jw(s,t){const e=ut(s);try{const r=await Sx(e.localStore,t);t.targetChanges.forEach((a,l)=>{const c=e.Ua.get(l);c&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?gt(c.Ba):a.removedDocuments.size>0&&(gt(c.Ba),c.Ba=!1))}),await mi(e,r,t)}catch(r){await fs(r)}}function k0(s,t,e){const r=ut(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=ut(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const b of T.ta)b.sa(d)&&(p=!0)}),p&&py(m)}(r.eventManager,t),a.length&&r.La.p_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function c2(s,t,e){const r=ut(s);r.sharedClientState.updateQueryState(t,"rejected",e);const a=r.Ua.get(t),l=a&&a.key;if(l){let c=new ie(ot.comparator);c=c.insert(l,se.newNoDocument(l,pt.min()));const d=Rt().add(l),m=new vc(pt.min(),new Map,new ie(bt),c,d);await jw(r,m),r.$a=r.$a.remove(l),r.Ua.delete(t),Ty(r)}else await Jo(r.localStore,t,!1).then(()=>nl(r,t,e)).catch(fs)}async function h2(s,t){const e=ut(s),r=t.batch.batchId;try{const a=await wx(e.localStore,t);Ey(e,r,null),vy(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await mi(e,a)}catch(a){await fs(a)}}async function f2(s,t,e){const r=ut(s);try{const a=await function(c,d){const m=ut(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(gt(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,t);Ey(r,t,e),vy(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await mi(r,a)}catch(a){await fs(a)}}async function d2(s,t){const e=ut(s);gs(e.remoteStore)||rt(ps,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=ut(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(e.localStore);if(r===Ji)return void t.resolve();const a=e.Ga.get(r)||[];a.push(t),e.Ga.set(r,a)}catch(r){const a=ml(r,"Initialization of waitForPendingWrites() operation failed");t.reject(a)}}function vy(s,t){(s.Ga.get(t)||[]).forEach(e=>{e.resolve()}),s.Ga.delete(t)}function Ey(s,t,e){const r=ut(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),r.Wa[r.currentUser.toKey()]=a}}function nl(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.qa.get(t))s.ka.delete(r),e&&s.La.Ja(r,e);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(r=>{s.Ka.containsKey(r)||Gw(s,r)})}function Gw(s,t){s.Qa.delete(t.path.canonicalString());const e=s.$a.get(t);e!==null&&(tl(s.remoteStore,e),s.$a=s.$a.remove(t),s.Ua.delete(e),Ty(s))}function pp(s,t,e){for(const r of e)r instanceof Bw?(s.Ka.addReference(r.key,t),m2(s,r)):r instanceof zw?(rt(ps,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,t),s.Ka.containsKey(r.key)||Gw(s,r.key)):ft()}function m2(s,t){const e=t.key,r=e.path.canonicalString();s.$a.get(e)||s.Qa.has(r)||(rt(ps,"New document in limbo: "+e),s.Qa.add(r),Ty(s))}function Ty(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const e=new ot(Ot.fromString(t)),r=s.za.next();s.Ua.set(r,new r2(e)),s.$a=s.$a.insert(e,r),rd(s.remoteStore,new ni(gn(ll(e.path)),r,"TargetPurposeLimboResolution",En.ae))}}async function mi(s,t,e){const r=ut(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,t,e).then(p=>{var _;if((p||e)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=e==null?void 0:e.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=ay.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=ut(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>B.forEach(p,b=>B.forEach(b.Hi,D=>_.persistence.referenceDelegate.addReference(T,b.targetId,D)).next(()=>B.forEach(b.Ji,D=>_.persistence.referenceDelegate.removeReference(T,b.targetId,D)))))}catch(T){if(!ds(T))throw T;rt(oy,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const D=_.Ts.get(b),N=D.snapshotVersion,G=D.withLastLimboFreeSnapshotVersion(N);_.Ts=_.Ts.insert(b,G)}}}(r.localStore,l))}async function g2(s,t){const e=ut(s);if(!e.currentUser.isEqual(t)){rt(ps,"User change. New user:",t.toKey());const r=await Tw(e.localStore,t);e.currentUser=t,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new nt(Q.CANCELLED,c))})}),l.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await mi(e,r.Rs)}}function p2(s,t){const e=ut(s),r=e.Ua.get(t);if(r&&r.Ba)return Rt().add(r.key);{let a=Rt();const l=e.qa.get(t);if(!l)return a;for(const c of l){const d=e.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function y2(s,t){const e=ut(s),r=await Lf(e.localStore,t.query,!0),a=t.view.Oa(r);return e.isPrimaryClient&&pp(e,t.targetId,a.Ma),a}async function _2(s,t){const e=ut(s);return Sw(e.localStore,t).then(r=>mi(e,r))}async function v2(s,t,e,r){const a=ut(s),l=await function(d,m){const p=ut(d),_=ut(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):B.resolve(null)))}(a.localStore,t);l!==null?(e==="pending"?await fl(a.remoteStore):e==="acknowledged"||e==="rejected"?(Ey(a,t,r||null),vy(a,t),function(d,m){ut(ut(d).mutationQueue).qn(m)}(a.localStore,t)):ft(),await mi(a,l)):rt(ps,"Cannot apply mutation batch with id: "+t)}async function E2(s,t){const e=ut(s);if(id(e),Ay(e),t===!0&&e.ja!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),a=await U0(e,r.toArray());e.ja=!0,await mp(e.remoteStore,!0);for(const l of a)rd(e.remoteStore,l)}else if(t===!1&&e.ja!==!1){const r=[];let a=Promise.resolve();e.qa.forEach((l,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(nl(e,c),Jo(e.localStore,c,!0))),tl(e.remoteStore,c)}),await a,await U0(e,r),function(c){const d=ut(c);d.Ua.forEach((m,p)=>{tl(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new ie(ot.comparator)}(e),e.ja=!1,await mp(e.remoteStore,!1)}}async function U0(s,t,e){const r=ut(s),a=[],l=[];for(const c of t){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await Wo(r.localStore,gn(m[0]));for(const p of m){const _=r.ka.get(p),T=await y2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await ww(r.localStore,c);d=await Wo(r.localStore,p),await _y(r,Hw(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function Hw(s){return Db(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function T2(s){return function(e){return ut(ut(e).persistence).zi()}(ut(s).localStore)}async function A2(s,t,e,r){const a=ut(s);if(a.ja)return void rt(ps,"Ignoring unexpected query state notification.");const l=a.qa.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const c=await Sw(a.localStore,Vb(l[0])),d=vc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",ve.EMPTY_BYTE_STRING);await mi(a,c,d);break}case"rejected":await Jo(a.localStore,t,!0),nl(a,t,r);break;default:ft()}}async function b2(s,t,e){const r=id(s);if(r.ja){for(const a of t){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){rt(ps,"Adding an already active target "+a);continue}const l=await ww(r.localStore,a),c=await Wo(r.localStore,l);await _y(r,Hw(l),c.targetId,!1,c.resumeToken),rd(r.remoteStore,c)}for(const a of e)r.qa.has(a)&&await Jo(r.localStore,a,!1).then(()=>{tl(r.remoteStore,a),nl(r,a)}).catch(fs)}}function id(s){const t=ut(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=p2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=c2.bind(null,t),t.La.p_=Wx.bind(null,t.eventManager),t.La.Ja=Jx.bind(null,t.eventManager),t}function Ay(s){const t=ut(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=h2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=f2.bind(null,t),t}function w2(s,t,e){const r=ut(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(D,N){const G=ut(D),z=we(N.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Y=>G.Yr.getBundleMetadata(Y,N.id)).then(Y=>!!Y&&Y.createTime.compareTo(z)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(Uw(m));const p=new e2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const b=await p.Aa(_);b&&d._updateProgress(b),_=await c.Ya()}const T=await p.complete();return await mi(l,T.ma,void 0),await function(D,N){const G=ut(D);return G.persistence.runTransaction("Save bundle","readwrite",z=>G.Yr.saveBundleMetadata(z,N))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return Rr(ps,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,t,e).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Tc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return Ew(this.persistence,new vw,t.initialUser,this.serializer)}Xa(t){return new ry(nd.ri,this.serializer)}Za(t){return new Vw}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class S2 extends ic{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){gt(this.persistence.referenceDelegate instanceof Pf);const r=this.persistence.referenceDelegate.garbageCollector;return new dw(r,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new ry(r=>Pf.ri(r,e),this.serializer)}}class Qw extends ic{constructor(t,e,r){super(),this.ru=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await Ay(this.ru.syncEngine),await fl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return Ew(this.persistence,new vw,t.initialUser,this.serializer)}tu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new dw(r,t.asyncQueue,e)}nu(t,e){const r=new MC(e,this.persistence);return new OC(t.asyncQueue,r)}Xa(t){const e=sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new iy(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,xw(),yf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new Vw}}class R2 extends Qw{constructor(t,e){super(t,e,!1),this.ru=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ru.syncEngine;this.sharedClientState instanceof Lg&&(this.sharedClientState.syncEngine={uo:v2.bind(null,e),co:A2.bind(null,e),lo:b2.bind(null,e),zi:T2.bind(null,e),ao:_2.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await E2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(t){const e=xw();if(!Lg.D(e))throw new nt(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Lg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class sc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>k0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g2.bind(null,this.syncEngine),await mp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Zx}()}createDatastore(t){const e=Tc(t.databaseInfo.databaseId),r=function(l){return new Ox(l)}(t.databaseInfo);return function(l,c,d,m){return new kx(l,c,d,m)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,a,l,c,d){return new Bx(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>k0(this.syncEngine,e,0),function(){return V0.D()?new V0:new Cx}())}createSyncEngine(t,e){return function(a,l,c,d,m,p,_){const T=new i2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=ut(a);rt(Aa,"RemoteStore shutting down."),l.W_.add(5),await hl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}sc.provider={build:()=>new sc};function B0(s,t=10240){let e=0;return{async read(){if(e<s.byteLength){const r={value:s.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):be("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,e){this.ou=t,this.serializer=e,this.metadata=new tn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const t=await this.uu();if(t===null)return null;const e=this._u.decode(t),r=Number(e);isNaN(r)&&this.cu(`length string (${e}) is not valid number`);const a=await this.lu(r);return new t2(JSON.parse(a),t.length+r)}hu(){return this.buffer.findIndex(t=>t===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const t=this.hu();t<0&&this.cu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async lu(t){for(;this.buffer.length<t;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const e=this._u.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}cu(t){throw this.ou.cancel(),new Error(`Invalid bundle format: ${t}`)}async Pu(){const t=await this.ou.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nt(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(a,l){const c=ut(a),d={documents:l.map(T=>nc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,Ot.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=zV(c.serializer,T);p.set(b.key.toString(),b)});const _=[];return l.forEach(T=>{const b=p.get(T.toString());gt(!!b),_.push(b)}),_}(this.datastore,t);return e.forEach(r=>this.recordVersion(r)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new cl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,r)=>{const a=ot.fromPath(r);this.mutations.push(new Kp(a,this.precondition(a)))}),await async function(r,a){const l=ut(r),c={writes:a.map(d=>rc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Ot.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ft();e=pt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new nt(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(pt.min())?ce.exists(!1):ce.updateTime(e):ce.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(pt.min()))throw new nt(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ce.updateTime(e)}return ce.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(t,e,r,a,l){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new uy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new D2(this.datastore),e=this.du(t);e&&e.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(t){try{const e=this.updateFunction(t);return!dc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!jb(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class V2{constructor(t,e,r,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=a,this.user=He.UNAUTHENTICATED,this.clientId=YA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{rt(us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(rt(us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ml(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ug(s,t){s.asyncQueue.verifyOperationInProgress(),rt(us,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Tw(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function z0(s,t){s.asyncQueue.verifyOperationInProgress();const e=await by(s);rt(us,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>N0(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>N0(t.remoteStore,a)),s._onlineComponents=t}async function by(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(us,"Using user provided OfflineComponentProvider");try{await Ug(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Rr("Error using user provided cache. Falling back to memory cache: "+e),await Ug(s,new ic)}}else rt(us,"Using default OfflineComponentProvider"),await Ug(s,new S2(void 0));return s._offlineComponents}async function ad(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(us,"Using user provided OnlineComponentProvider"),await z0(s,s._uninitializedComponentsProvider._online)):(rt(us,"Using default OnlineComponentProvider"),await z0(s,new sc))),s._onlineComponents}function Kw(s){return by(s).then(t=>t.persistence)}function wy(s){return by(s).then(t=>t.localStore)}function Yw(s){return ad(s).then(t=>t.remoteStore)}function Sy(s){return ad(s).then(t=>t.syncEngine)}function x2(s){return ad(s).then(t=>t.datastore)}async function rl(s){const t=await ad(s),e=t.eventManager;return e.onListen=s2.bind(null,t.syncEngine),e.onUnlisten=o2.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=a2.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=l2.bind(null,t.syncEngine),e}function N2(s){return s.asyncQueue.enqueue(async()=>{const t=await Kw(s),e=await Yw(s);return t.setNetworkEnabled(!0),function(a){const l=ut(a);return l.W_.delete(0),Ac(l)}(e)})}function O2(s){return s.asyncQueue.enqueue(async()=>{const t=await Kw(s),e=await Yw(s);return t.setNetworkEnabled(!1),async function(a){const l=ut(a);l.W_.add(0),await hl(l),l.j_.set("Offline")}(e)})}function M2(s,t){const e=new tn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=ut(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new nt(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=ml(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await wy(s),t,e)),e.promise}function $w(s,t,e={}){const r=new tn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new sd({next:b=>{_.su(),c.enqueueAndForget(()=>gy(l,T));const D=b.docs.has(d);!D&&b.fromCache?p.reject(new nt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&m&&m.source==="server"?p.reject(new nt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new yy(ll(d.path),_,{includeMetadataChanges:!0,Ta:!0});return my(l,T)}(await rl(s),s.asyncQueue,t,e,r)),r.promise}function P2(s,t){const e=new tn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await Lf(a,l,!0),m=new qw(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=ml(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await wy(s),t,e)),e.promise}function Xw(s,t,e={}){const r=new tn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new sd({next:b=>{_.su(),c.enqueueAndForget(()=>gy(l,T)),b.fromCache&&m.source==="server"?p.reject(new nt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new yy(d,_,{includeMetadataChanges:!0,Ta:!0});return my(l,T)}(await rl(s),s.asyncQueue,t,e,r)),r.promise}function L2(s,t){const e=new sd(t);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){ut(a).ia.add(l),l.next()}(await rl(s),e)),()=>{e.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){ut(a).ia.delete(l)}(await rl(s),e))}}function k2(s,t,e,r){const a=function(c,d){let m;return m=typeof c=="string"?Mp().encode(c):c,function(_,T){return new I2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return B0(_,T);if(_ instanceof ArrayBuffer)return B0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(e,Tc(t));s.asyncQueue.enqueueAndForget(async()=>{w2(await Sy(s),a,r)})}function U2(s,t){return s.asyncQueue.enqueue(async()=>function(r,a){const l=ut(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await wy(s),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(s,t,e){if(!e)throw new nt(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Ww(s,t,e,r){if(t===!0&&r===!0)throw new nt(Q.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function F0(s){if(!ot.isDocumentKey(s))throw new nt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function j0(s){if(ot.isDocumentKey(s))throw new nt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function od(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ft()}function qt(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new nt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=od(s);throw new nt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function Jw(s,t){if(t<=0)throw new nt(Q.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firestore.googleapis.com",G0=!0;class H0{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new nt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tS,this.ssl=G0}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:G0;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=uw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<sx)throw new nt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ww("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zw((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bc{constructor(t,e,r,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AC;switch(r.type){case"firstParty":return new RC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new nt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=q0.get(e);r&&(rt("ComponentProvider","Removing Datastore"),q0.delete(e),r.terminate())}(this),Promise.resolve()}}function B2(s,t,e,r={}){var a;const l=(s=qt(s,bc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${t}:${e}`;l.host!==tS&&l.host!==d&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!Lo(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=He.MOCK_USER;else{p=F1(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new nt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new He(T)}s._authCredentials=new bC(new KA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pn=class eS{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new eS(this.firestore,t,this._query)}},me=class nS{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nS(this.firestore,t,this._key)}},ts=class rS extends pn{constructor(t,e,r){super(t,e,ll(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new me(this.firestore,null,new ot(t))}withConverter(t){return new rS(this.firestore,t,this._path)}};function iS(s,t,...e){if(s=xe(s),Ry("collection","path",t),s instanceof bc){const r=Ot.fromString(t,...e);return j0(r),new ts(s,null,r)}{if(!(s instanceof me||s instanceof ts))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return j0(r),new ts(s.firestore,null,r)}}function z2(s,t){if(s=qt(s,bc),Ry("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nt(Q.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pn(s,null,function(r){return new hi(Ot.emptyPath(),r)}(t))}function zf(s,t,...e){if(s=xe(s),arguments.length===1&&(t=YA.newId()),Ry("doc","path",t),s instanceof bc){const r=Ot.fromString(t,...e);return F0(r),new me(s,null,new ot(r))}{if(!(s instanceof me||s instanceof ts))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ot.fromString(t,...e));return F0(r),new me(s.firestore,s instanceof ts?s.converter:null,new ot(r))}}function sS(s,t){return s=xe(s),t=xe(t),(s instanceof me||s instanceof ts)&&(t instanceof me||t instanceof ts)&&s.firestore===t.firestore&&s.path===t.path&&s.converter===t.converter}function aS(s,t){return s=xe(s),t=xe(t),s instanceof pn&&t instanceof pn&&s.firestore===t.firestore&&pc(s._query,t._query)&&s.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="AsyncQueue";class K0{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new uy(this,"async_queue_retry"),this.Su=()=>{const r=yf();r&&rt(Q0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const e=yf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=yf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new tn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!ds(t))throw t;rt(Q0,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw be("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const a=dy.createAndSchedule(this,t,e,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ft()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function yp(s){return function(e,r){if(typeof e!="object"||e===null)return!1;const a=e;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class q2{constructor(){this._progressObserver={},this._taskCompletionResolver=new tn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=-1;let Se=class extends bc{constructor(t,e,r,a){super(t,e,r,a),this.type="firestore",this._queue=new K0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new K0(t),this._firestoreClient=void 0,await t}}};function ln(s){if(s._terminated)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||oS(s),s._firestoreClient}function oS(s){var t,e,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new uV(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Zw(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new V2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function j2(s,t){Rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return lS(s,sc.provider,{build:r=>new Qw(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function G2(s){Rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();lS(s,sc.provider,{build:e=>new R2(e,t.cacheSizeBytes)})}function lS(s,t,e){if((s=qt(s,Se))._firestoreClient||s._terminated)throw new nt(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new nt(Q.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},oS(s)}function H2(s){if(s._initialized&&!s._terminated)throw new nt(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new tn;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!br.D())return Promise.resolve();const a=r+_w;await br.delete(a)}(sy(s._databaseId,s._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function Q2(s){return function(e){const r=new tn;return e.asyncQueue.enqueueAndForget(async()=>d2(await Sy(e),r)),r.promise}(ln(s=qt(s,Se)))}function K2(s){return N2(ln(s=qt(s,Se)))}function Y2(s){return O2(ln(s=qt(s,Se)))}function $2(s,t){const e=ln(s=qt(s,Se)),r=new q2;return k2(e,s._databaseId,t,r),r}function X2(s,t){return U2(ln(s=qt(s,Se)),t).then(e=>e?new pn(s,null,e.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Dr(ve.fromBase64String(t))}catch(e){throw new nt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Dr(ve.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new nt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new nt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new nt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return bt(this._lat,t._lat)||bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=/^__.*__$/;class W2{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new di(t,this.data,this.fieldMask,e,this.fieldTransforms):new ul(t,this.data,e,this.fieldTransforms)}}class uS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new di(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function cS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class ud{constructor(t,e,r,a,l,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new ud(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.ku({path:r,Qu:!1});return a.$u(t),a}Uu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return qf(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(cS(this.Lu)&&Z2.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class J2{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Tc(t)}ju(t,e,r,a=!1){return new ud({Lu:t,methodName:e,zu:r,path:ue.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ia(s){const t=s._freezeSettings(),e=Tc(s._databaseId);return new J2(s._databaseId,!!t.ignoreUndefinedProperties,e)}function cd(s,t,e,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,t,e,a);My("Data must be an object, but it was:",c,r);const d=dS(r,c);let m,p;if(l.merge)m=new Tn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=_p(t,T,e);if(!c.contains(b))throw new nt(Q.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);gS(_,b)||_.push(b)}m=new Tn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new W2(new Je(d),m,p)}class wc extends Ra{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wc}}function hS(s,t,e){return new ud({Lu:3,zu:t.settings.zu,methodName:s._methodName,Qu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Dy extends Ra{_toFieldTransform(t){return new _c(t.path,new $o)}isEqual(t){return t instanceof Dy}}class Cy extends Ra{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=hS(this,t,!0),r=this.Hu.map(l=>Da(l,e)),a=new ya(r);return new _c(t.path,a)}isEqual(t){return t instanceof Cy&&Lo(this.Hu,t.Hu)}}class Vy extends Ra{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=hS(this,t,!0),r=this.Hu.map(l=>Da(l,e)),a=new _a(r);return new _c(t.path,a)}isEqual(t){return t instanceof Vy&&Lo(this.Hu,t.Hu)}}class xy extends Ra{constructor(t,e){super(t),this.Ju=e}_toFieldTransform(t){const e=new Xo(t.serializer,Lb(t.serializer,this.Ju));return new _c(t.path,e)}isEqual(t){return t instanceof xy&&this.Ju===t.Ju}}function Ny(s,t,e,r){const a=s.ju(1,t,e);My("Data must be an object, but it was:",a,r);const l=[],c=Je.empty();ms(r,(m,p)=>{const _=Py(t,m,e);p=xe(p);const T=a.Uu(_);if(p instanceof wc)l.push(_);else{const b=Da(p,T);b!=null&&(l.push(_),c.set(_,b))}});const d=new Tn(l);return new uS(c,d,a.fieldTransforms)}function Oy(s,t,e,r,a,l){const c=s.ju(1,t,e),d=[_p(t,r,e)],m=[a];if(l.length%2!=0)throw new nt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(_p(t,l[b])),m.push(l[b+1]);const p=[],_=Je.empty();for(let b=d.length-1;b>=0;--b)if(!gS(p,d[b])){const D=d[b];let N=m[b];N=xe(N);const G=c.Uu(D);if(N instanceof wc)p.push(D);else{const z=Da(N,G);z!=null&&(p.push(D),_.set(D,z))}}const T=new Tn(p);return new uS(_,T,c.fieldTransforms)}function fS(s,t,e,r=!1){return Da(e,s.ju(r?4:3,t))}function Da(s,t){if(mS(s=xe(s)))return My("Unsupported field value:",t,s),dS(s,t);if(s instanceof Ra)return function(r,a){if(!cS(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Da(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,t)}return function(r,a){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lb(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=he.fromDate(r);return{timestampValue:Zo(a.serializer,l)}}if(r instanceof he){const l=new he(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zo(a.serializer,l)}}if(r instanceof ld)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:Kb(a.serializer,r._byteString)};if(r instanceof me){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Iy)return function(c,d){return{mapValue:{fields:{[qp]:{stringValue:Fp},[Qo]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Qp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${od(r)}`)}(s,t)}function dS(s,t){const e={};return hb(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ms(s,(r,a)=>{const l=Da(a,t.qu(r));l!=null&&(e[r]=l)}),{mapValue:{fields:e}}}function mS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof he||s instanceof ld||s instanceof Dr||s instanceof me||s instanceof Ra||s instanceof Iy)}function My(s,t,e){if(!mS(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const r=od(e);throw r==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+r)}}function _p(s,t,e){if((t=xe(t))instanceof cs)return t._internalPath;if(typeof t=="string")return Py(s,t);throw qf("Field path arguments must be of type string or ",s,!1,void 0,e)}const tN=new RegExp("[~\\*/\\[\\]]");function Py(s,t,e){if(t.search(tN)>=0)throw qf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new cs(...t.split("."))._internalPath}catch{throw qf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function qf(s,t,e,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new nt(Q.INVALID_ARGUMENT,d+s+m)}function gS(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,e,r,a,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(hd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class eN extends ac{data(){return super.data()}}function hd(s,t){return typeof t=="string"?Py(s,t):t instanceof cs?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new nt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ly{}class Sc extends Ly{}function Ki(s,t,...e){let r=[];t instanceof Ly&&r.push(t),r=r.concat(e),function(l){const c=l.filter(m=>m instanceof ky).length,d=l.filter(m=>m instanceof fd).length;if(c>1||c>0&&d>0)throw new nt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class fd extends Sc{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new fd(t,e,r)}_apply(t){const e=this._parse(t);return _S(t._query,e),new pn(t.firestore,t.converter,ip(t._query,e))}_parse(t){const e=Ia(t.firestore);return function(l,c,d,m,p,_,T){let b;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){$0(T,_);const N=[];for(const G of T)N.push(Y0(m,l,G));b={arrayValue:{values:N}}}else b=Y0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||$0(T,_),b=fS(d,c,T,_==="in"||_==="not-in");return Mt.create(p,_,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function nN(s,t,e){const r=t,a=hd("where",s);return fd._create(a,r,e)}class ky extends Ly{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ky(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:$t.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)_S(c,m),c=ip(c,m)}(t._query,e),new pn(t.firestore,t.converter,ip(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uy extends Sc{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Uy(t,e)}_apply(t){const e=function(a,l,c){if(a.startAt!==null)throw new nt(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new nt(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(l,c)}(t._query,this._field,this._direction);return new pn(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new hi(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,e))}}function rN(s,t="asc"){const e=t,r=hd("orderBy",s);return Uy._create(r,e)}class dd extends Sc{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new dd(t,e,r)}_apply(t){return new pn(t.firestore,t.converter,xf(t._query,this._limit,this._limitType))}}function iN(s){return Jw("limit",s),dd._create("limit",s,"F")}function sN(s){return Jw("limitToLast",s),dd._create("limitToLast",s,"L")}class md extends Sc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new md(t,e,r)}_apply(t){const e=yS(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,function(a,l){return new hi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(t._query,e))}}function aN(...s){return md._create("startAt",s,!0)}function oN(...s){return md._create("startAfter",s,!1)}class gd extends Sc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new gd(t,e,r)}_apply(t){const e=yS(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,function(a,l){return new hi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(t._query,e))}}function lN(...s){return gd._create("endBefore",s,!1)}function uN(...s){return gd._create("endAt",s,!0)}function yS(s,t,e,r){if(e[0]=xe(e[0]),e[0]instanceof ac)return function(l,c,d,m,p){if(!m)throw new nt(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Mo(l))if(T.field.isKeyField())_.push(ga(c,m.key));else{const b=m.data.field(T.field);if($f(b))throw new nt(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const D=T.field.canonicalString();throw new nt(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}_.push(b)}return new os(_,p)}(s._query,s.firestore._databaseId,t,e[0]._document,r);{const a=Ia(s.firestore);return function(c,d,m,p,_,T){const b=c.explicitOrderBy;if(_.length>b.length)throw new nt(Q.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let N=0;N<_.length;N++){const G=_[N];if(b[N].field.isKeyField()){if(typeof G!="string")throw new nt(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof G}`);if(!Gp(c)&&G.indexOf("/")!==-1)throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${G}' contains a slash.`);const z=c.path.child(Ot.fromString(G));if(!ot.isDocumentKey(z))throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const Y=new ot(z);D.push(ga(d,Y))}else{const z=fS(m,p,G);D.push(z)}}return new os(D,T)}(s._query,s.firestore._databaseId,a,t,e,r)}}function Y0(s,t,e){if(typeof(e=xe(e))=="string"){if(e==="")throw new nt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gp(t)&&e.indexOf("/")!==-1)throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Ot.fromString(e));if(!ot.isDocumentKey(r))throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ga(s,new ot(r))}if(e instanceof me)return ga(s,e._key);throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(e)}.`)}function $0(s,t){if(!Array.isArray(s)||s.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _S(s,t){const e=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class By{convertValue(t,e="none"){switch(ss(t)){case 0:return null;case 1:return t.booleanValue;case 2:return le(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(li(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ft()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return ms(t,(a,l)=>{r[a]=this.convertValue(l,e)}),r}convertVectorValue(t){var e,r,a;const l=(a=(r=(e=t.fields)===null||e===void 0?void 0:e[Qo].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>le(c.doubleValue));return new Iy(l)}convertGeoPoint(t){return new ld(le(t.latitude),le(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Xf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Wu(t));default:return null}}convertTimestamp(t){const e=oi(t);return new he(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Ot.fromString(t);gt(iw(r));const a=new is(r.get(1),r.get(3)),l=new ot(r.popFirst(5));return a.isEqual(e)||be(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class cN extends By{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let ui=class extends ac{constructor(t,e,r,a,l,c){super(t,e,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(hd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}},ju=class extends ui{data(t={}){return super.data(t)}},hs=class{constructor(t,e,r,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new ha(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new ju(this._firestore,this._userDataWriter,r.key,r,new ha(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new ju(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ha(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new ju(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ha(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:hN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function hN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function vS(s,t){return s instanceof ui&&t instanceof ui?s._firestore===t._firestore&&s._key.isEqual(t._key)&&(s._document===null?t._document===null:s._document.isEqual(t._document))&&s._converter===t._converter:s instanceof hs&&t instanceof hs&&s._firestore===t._firestore&&aS(s.query,t.query)&&s.metadata.isEqual(t.metadata)&&s._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(s){s=qt(s,me);const t=qt(s.firestore,Se);return $w(ln(t),s._key).then(e=>zy(t,s,e))}class Ca extends By{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new me(this.firestore,null,e)}}function dN(s){s=qt(s,me);const t=qt(s.firestore,Se),e=ln(t),r=new Ca(t);return M2(e,s._key).then(a=>new ui(t,r,s._key,a,new ha(a!==null&&a.hasLocalMutations,!0),s.converter))}function mN(s){s=qt(s,me);const t=qt(s.firestore,Se);return $w(ln(t),s._key,{source:"server"}).then(e=>zy(t,s,e))}function gN(s){s=qt(s,pn);const t=qt(s.firestore,Se),e=ln(t),r=new Ca(t);return pS(s._query),Xw(e,s._query).then(a=>new hs(t,r,s,a))}function pN(s){s=qt(s,pn);const t=qt(s.firestore,Se),e=ln(t),r=new Ca(t);return P2(e,s._query).then(a=>new hs(t,r,s,a))}function yN(s){s=qt(s,pn);const t=qt(s.firestore,Se),e=ln(t),r=new Ca(t);return Xw(e,s._query,{source:"server"}).then(a=>new hs(t,r,s,a))}function X0(s,t,e){s=qt(s,me);const r=qt(s.firestore,Se),a=pd(s.converter,t,e);return Rc(r,[cd(Ia(r),"setDoc",s._key,a,s.converter!==null,e).toMutation(s._key,ce.none())])}function Z0(s,t,e,...r){s=qt(s,me);const a=qt(s.firestore,Se),l=Ia(a);let c;return c=typeof(t=xe(t))=="string"||t instanceof cs?Oy(l,"updateDoc",s._key,t,e,r):Ny(l,"updateDoc",s._key,t),Rc(a,[c.toMutation(s._key,ce.exists(!0))])}function _N(s){return Rc(qt(s.firestore,Se),[new cl(s._key,ce.none())])}function vN(s,t){const e=qt(s.firestore,Se),r=zf(s),a=pd(s.converter,t);return Rc(e,[cd(Ia(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,ce.exists(!1))]).then(()=>r)}function ES(s,...t){var e,r,a;s=xe(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||yp(t[c])||(l=t[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(yp(t[c])){const T=t[c];t[c]=(e=T.next)===null||e===void 0?void 0:e.bind(T),t[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),t[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof me)p=qt(s.firestore,Se),_=ll(s._key.path),m={next:T=>{t[c]&&t[c](zy(p,s,T))},error:t[c+1],complete:t[c+2]};else{const T=qt(s,pn);p=qt(T.firestore,Se),_=T._query;const b=new Ca(p);m={next:D=>{t[c]&&t[c](new hs(p,b,T,D))},error:t[c+1],complete:t[c+2]},pS(s._query)}return function(b,D,N,G){const z=new sd(G),Y=new yy(D,z,N);return b.asyncQueue.enqueueAndForget(async()=>my(await rl(b),Y)),()=>{z.su(),b.asyncQueue.enqueueAndForget(async()=>gy(await rl(b),Y))}}(ln(p),_,d,m)}function EN(s,t){return L2(ln(s=qt(s,Se)),yp(t)?t:{next:t})}function Rc(s,t){return function(r,a){const l=new tn;return r.asyncQueue.enqueueAndForget(async()=>u2(await Sy(r),a,l)),l.promise}(ln(s),t)}function zy(s,t,e){const r=e.docs.get(t._key),a=new Ca(s);return new ui(s,a,t._key,r,new ha(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AN=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ia(t)}set(t,e,r){this._verifyNotCommitted();const a=Xi(t,this._firestore),l=pd(a.converter,e,r),c=cd(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,ce.none())),this}update(t,e,r,...a){this._verifyNotCommitted();const l=Xi(t,this._firestore);let c;return c=typeof(e=xe(e))=="string"||e instanceof cs?Oy(this._dataReader,"WriteBatch.update",l._key,e,r,a):Ny(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(c.toMutation(l._key,ce.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Xi(t,this._firestore);return this._mutations=this._mutations.concat(new cl(e._key,ce.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xi(s,t){if((s=xe(s)).firestore!==t)throw new nt(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ia(t)}get(t){const e=Xi(t,this._firestore),r=new cN(this._firestore);return this._transaction.lookup([e._key]).then(a=>{if(!a||a.length!==1)return ft();const l=a[0];if(l.isFoundDocument())return new ac(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new ac(this._firestore,r,e._key,null,e.converter);throw ft()})}set(t,e,r){const a=Xi(t,this._firestore),l=pd(a.converter,e,r),c=cd(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(t,e,r,...a){const l=Xi(t,this._firestore);let c;return c=typeof(e=xe(e))=="string"||e instanceof cs?Oy(this._dataReader,"Transaction.update",l._key,e,r,a):Ny(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,c),this}delete(t){const e=Xi(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN=class extends bN{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Xi(t,this._firestore),r=new Ca(this._firestore);return super.get(t).then(a=>new ui(this._firestore,r,e._key,a._document,new ha(!1,!1),e.converter))}};function SN(s,t,e){s=qt(s,Se);const r=Object.assign(Object.assign({},TN),e);return function(l){if(l.maxAttempts<1)throw new nt(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new tn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await x2(l);new C2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(ln(s),a=>t(new wN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){return new wc("deleteField")}function IN(){return new Dy("serverTimestamp")}function DN(...s){return new Cy("arrayUnion",s)}function CN(...s){return new Vy("arrayRemove",s)}function VN(s){return new xy("increment",s)}(function(t,e=!0){(function(a){ol=a})(Vp),Bo(new ma("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Se(new wC(r.getProvider("auth-internal")),new IC(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new nt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),ii(DT,CT,t),ii(DT,CT,"esm2017")})();const xN="@firebase/firestore-compat",NN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new nt("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(){if(typeof Uint8Array>"u")throw new nt("unimplemented","Uint8Arrays are not available in this environment.")}function J0(){if(!oV())throw new nt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class oc{constructor(t){this._delegate=t}static fromBase64String(t){return J0(),new oc(Dr.fromBase64String(t))}static fromUint8Array(t){return W0(),new oc(Dr.fromUint8Array(t))}toBase64(){return J0(),this._delegate.toBase64()}toUint8Array(){return W0(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(s){return ON(s,["next","error","complete"])}function ON(s,t){if(typeof s!="object"||s===null)return!1;const e=s;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{enableIndexedDbPersistence(t,e){return j2(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return G2(t._delegate)}clearIndexedDbPersistence(t){return H2(t._delegate)}}class TS{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof is||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,r={}){B2(this._delegate,t,e,r)}enableNetwork(){return K2(this._delegate)}disableNetwork(){return Y2(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,Ww("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Q2(this._delegate)}onSnapshotsInSync(t){return EN(this._delegate,t)}get app(){if(!this._appCompat)throw new nt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new il(this,iS(this._delegate,t))}catch(e){throw mn(e,"collection()","Firestore.collection()")}}doc(t){try{return new Kn(this,zf(this._delegate,t))}catch(e){throw mn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new dn(this,z2(this._delegate,t))}catch(e){throw mn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return SN(this._delegate,e=>t(new AS(this,e)))}batch(){return ln(this._delegate),new bS(new AN(this._delegate,t=>Rc(this._delegate,t)))}loadBundle(t){return $2(this._delegate,t)}namedQuery(t){return X2(this._delegate,t).then(e=>e?new dn(this,e):null)}}class yd extends By{constructor(t){super(),this.firestore=t}convertBytes(t){return new oc(new Dr(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Kn.forKey(e,this.firestore,null)}}function PN(s){EC(s)}class AS{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new yd(t)}get(t){const e=fa(t);return this._delegate.get(e).then(r=>new lc(this._firestore,new ui(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const a=fa(t);return r?(qy("Transaction.set",r),this._delegate.set(a,e,r)):this._delegate.set(a,e),this}update(t,e,r,...a){const l=fa(t);return arguments.length===2?this._delegate.update(l,e):this._delegate.update(l,e,r,...a),this}delete(t){const e=fa(t);return this._delegate.delete(e),this}}class bS{constructor(t){this._delegate=t}set(t,e,r){const a=fa(t);return r?(qy("WriteBatch.set",r),this._delegate.set(a,e,r)):this._delegate.set(a,e),this}update(t,e,r,...a){const l=fa(t);return arguments.length===2?this._delegate.update(l,e):this._delegate.update(l,e,r,...a),this}delete(t){const e=fa(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class ba{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new ju(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new uc(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=ba.INSTANCES;let a=r.get(t);a||(a=new WeakMap,r.set(t,a));let l=a.get(e);return l||(l=new ba(t,new yd(t),e),a.set(e,l)),l}}ba.INSTANCES=new WeakMap;class Kn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new yd(t)}static forPath(t,e,r){if(t.length%2!==0)throw new nt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Kn(e,new me(e._delegate,r,new ot(t)))}static forKey(t,e,r){return new Kn(e,new me(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new il(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new il(this.firestore,iS(this._delegate,t))}catch(e){throw mn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=xe(t),t instanceof me?sS(this._delegate,t):!1}set(t,e){e=qy("DocumentReference.set",e);try{return e?X0(this._delegate,t,e):X0(this._delegate,t)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return arguments.length===1?Z0(this._delegate,t):Z0(this._delegate,t,e,...r)}catch(a){throw mn(a,"updateDoc()","DocumentReference.update()")}}delete(){return _N(this._delegate)}onSnapshot(...t){const e=wS(t),r=SS(t,a=>new lc(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return ES(this._delegate,e,r)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=dN(this._delegate):(t==null?void 0:t.source)==="server"?e=mN(this._delegate):e=fN(this._delegate),e.then(r=>new lc(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Kn(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function mn(s,t,e){return s.message=s.message.replace(t,e),s}function wS(s){for(const t of s)if(typeof t=="object"&&!vp(t))return t;return{}}function SS(s,t){var e,r;let a;return vp(s[0])?a=s[0]:vp(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(t(l))},error:(e=a.error)===null||e===void 0?void 0:e.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class lc{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return vS(this._delegate,t._delegate)}}class uc extends lc{data(t){const e=this._delegate.data(t);return this._delegate._converter||TC(e!==void 0),e}}class dn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new yd(t)}where(t,e,r){try{return new dn(this.firestore,Ki(this._delegate,nN(t,e,r)))}catch(a){throw mn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new dn(this.firestore,Ki(this._delegate,rN(t,e)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new dn(this.firestore,Ki(this._delegate,iN(t)))}catch(e){throw mn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new dn(this.firestore,Ki(this._delegate,sN(t)))}catch(e){throw mn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new dn(this.firestore,Ki(this._delegate,aN(...t)))}catch(e){throw mn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new dn(this.firestore,Ki(this._delegate,oN(...t)))}catch(e){throw mn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new dn(this.firestore,Ki(this._delegate,lN(...t)))}catch(e){throw mn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new dn(this.firestore,Ki(this._delegate,uN(...t)))}catch(e){throw mn(e,"endAt()","Query.endAt()")}}isEqual(t){return aS(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=pN(this._delegate):(t==null?void 0:t.source)==="server"?e=yN(this._delegate):e=gN(this._delegate),e.then(r=>new Ep(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=wS(t),r=SS(t,a=>new Ep(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return ES(this._delegate,e,r)}withConverter(t){return new dn(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class LN{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new uc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ep{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new uc(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new LN(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new uc(this._firestore,r))})}isEqual(t){return vS(this._delegate,t._delegate)}}class il extends dn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Kn(this.firestore,t):null}doc(t){try{return t===void 0?new Kn(this.firestore,zf(this._delegate)):new Kn(this.firestore,zf(this._delegate,t))}catch(e){throw mn(e,"doc()","CollectionReference.doc()")}}add(t){return vN(this._delegate,t).then(e=>new Kn(this.firestore,e))}isEqual(t){return sS(this._delegate,t._delegate)}withConverter(t){return new il(this.firestore,t?this._delegate.withConverter(ba.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function fa(s){return qt(s,me)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(...t){this._delegate=new cs(...t)}static documentId(){return new Fy(ue.keyField().canonicalString())}isEqual(t){return t=xe(t),t instanceof cs?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{static serverTimestamp(){const t=IN();return t._methodName="FieldValue.serverTimestamp",new la(t)}static delete(){const t=RN();return t._methodName="FieldValue.delete",new la(t)}static arrayUnion(...t){const e=DN(...t);return e._methodName="FieldValue.arrayUnion",new la(e)}static arrayRemove(...t){const e=CN(...t);return e._methodName="FieldValue.arrayRemove",new la(e)}static increment(t){const e=VN(t);return e._methodName="FieldValue.increment",new la(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN={Firestore:TS,GeoPoint:ld,Timestamp:he,Blob:oc,Transaction:AS,WriteBatch:bS,DocumentReference:Kn,DocumentSnapshot:lc,Query:dn,QueryDocumentSnapshot:uc,QuerySnapshot:Ep,CollectionReference:il,FieldPath:Fy,FieldValue:la,setLogLevel:PN,CACHE_SIZE_UNLIMITED:F2};function UN(s,t){s.INTERNAL.registerComponent(new ma("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),a=e.getProvider("firestore").getImmediate();return t(r,a)},"PUBLIC").setServiceProps(Object.assign({},kN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(s){UN(s,(t,e)=>new TS(t,e,new MN)),s.registerVersion(xN,NN)}BN(Lu);const zN={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let tA;function qN(){const[s,t]=W.useState(!1);return W.useEffect(()=>{Lu.apps.length||(Lu.initializeApp(zN),tA=Lu.firestore()),t(!0)},[]),{db:tA,initialized:s}}function FN(){const[s,t]=W.useState(null);return W.useEffect(()=>{var a,l;const e=(a=window.Telegram)==null?void 0:a.WebApp;if(!e)return;e.ready(),e.expand();const r=e.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&t(r.user.id)},[]),s}function jN(){eruda.init();const s=FN(),{db:t,initialized:e}=qN(),[r,a]=W.useState(0),[l,c]=W.useState(!0),[d,m]=W.useState(!1);W.useEffect(()=>{if(!e||!t||!s)return;const _=t.collection("users").doc(String(s));_.get().then(T=>{T.exists?a(T.data().count||0):(_.set({count:0}),a(0))}).catch(T=>console.error("Error fetching count:",T)).finally(()=>c(!1))},[e,t,s]);const p=()=>{a(_=>_+1),m(!0)};return W.useEffect(()=>{const _=()=>{t&&e&&s&&t.collection("users").doc(String(s)).set({count:r})};return window.addEventListener("beforeunload",_),()=>window.removeEventListener("beforeunload",_)},[t,e,s,r]),W.useEffect(()=>{if(!d||!e||!t||!s)return;const _=setTimeout(()=>{t.collection("users").doc(String(s)).set({count:r}).then(()=>{console.log("Saved to Firestore:",r),m(!1)}).catch(T=>console.error("Error saving count:",T))},300);return()=>clearTimeout(_)},[r,d,t,e,s]),l?Ht.jsx("div",{className:"wrapper",children:Ht.jsx("p",{children:"Завантаження…"})}):Ht.jsxs("div",{className:"wrapper",children:[Ht.jsxs("div",{className:"clicker-container",children:[s&&Ht.jsxs("p",{className:"clicker-text",children:["Ваш Telegram ID: ",Ht.jsx("strong",{children:s})]}),Ht.jsx("p",{className:"clicker-text",children:Ht.jsx("strong",{children:r})}),Ht.jsx("img",{src:N1,alt:"Click",className:"clicker-img",onClick:p,onContextMenu:_=>_.preventDefault(),onTouchStart:_=>_.preventDefault()})]}),Ht.jsxs("div",{className:"button-group",children:[Ht.jsx(ua,{to:"/upgrade",children:Ht.jsx("button",{className:"menu-button",children:"🛠 Покращення"})}),Ht.jsx(ua,{to:"/shop",children:Ht.jsx("button",{className:"menu-button",children:"🛒 Магазин"})}),Ht.jsx(ua,{to:"/leaderboard",children:Ht.jsx("button",{className:"menu-button",children:"🏆 Топ"})}),Ht.jsx(ua,{to:"/settings",children:Ht.jsx("button",{className:"menu-button",children:"⚙️ Налаштування"})})]})]})}function GN(){return Ht.jsxs("div",{className:"wrapper",children:[Ht.jsx("h2",{children:"Покращення"}),Ht.jsx("p",{children:"Тут будуть ваші доступні покращення 🎯"}),Ht.jsx(ua,{to:"/",className:"upgrade-button",children:"⬅ Назад"})]})}function HN(){return Ht.jsx(A1,{basename:"/clicker",children:Ht.jsxs(WI,{children:[Ht.jsx(zg,{path:"/",element:Ht.jsx(jN,{})}),Ht.jsx(zg,{path:"/upgrade",element:Ht.jsx(GN,{})})]})})}oI.createRoot(document.getElementById("root")).render(Ht.jsx(JR.StrictMode,{children:Ht.jsx(HN,{})}));
