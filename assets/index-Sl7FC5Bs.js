(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function sA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tg={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function lI(){if(nT)return Nu;nT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var rT;function uI(){return rT||(rT=1,Tg.exports=lI()),Tg.exports}var z=uI(),Ag={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function cI(){if(iT)return Ve;iT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,U={};function k(O,ne,he){this.props=O,this.context=ne,this.refs=U,this.updater=he||R}k.prototype.isReactComponent={},k.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Q(){}Q.prototype=k.prototype;function re(O,ne,he){this.props=O,this.context=ne,this.refs=U,this.updater=he||R}var W=re.prototype=new Q;W.constructor=re,x(W,k.prototype),W.isPureReactComponent=!0;var me=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function V(O,ne,he,ae,be,Ne){return he=Ne.ref,{$$typeof:s,type:O,key:ne,ref:he!==void 0?he:null,props:Ne}}function S(O,ne){return V(O.type,ne,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function N(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(he){return ne[he]})}var P=/\/+/g;function L(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):ne.toString(36)}function D(){}function ke(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Ce(O,ne,he,ae,be){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var xe=!1;if(O===null)xe=!0;else switch(Ne){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(O.$$typeof){case s:case e:xe=!0;break;case _:return xe=O._init,Ce(xe(O._payload),ne,he,ae,be)}}if(xe)return be=be(O),xe=ae===""?"."+L(O,0):ae,me(be)?(he="",xe!=null&&(he=xe.replace(P,"$&/")+"/"),Ce(be,ne,he,"",function(Ke){return Ke})):be!=null&&(I(be)&&(be=S(be,he+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace(P,"$&/")+"/")+xe)),ne.push(be)),1;xe=0;var Ee=ae===""?".":ae+":";if(me(O))for(var pe=0;pe<O.length;pe++)ae=O[pe],Ne=Ee+L(ae,pe),xe+=Ce(ae,ne,he,Ne,be);else if(pe=b(O),typeof pe=="function")for(O=pe.call(O),pe=0;!(ae=O.next()).done;)ae=ae.value,Ne=Ee+L(ae,pe++),xe+=Ce(ae,ne,he,Ne,be);else if(Ne==="object"){if(typeof O.then=="function")return Ce(ke(O),ne,he,ae,be);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function $(O,ne,he){if(O==null)return O;var ae=[],be=0;return Ce(O,ae,"","",function(Ne){return ne.call(he,Ne,be++)}),ae}function ue(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(he){(O._status===0||O._status===-1)&&(O._status=1,O._result=he)},function(he){(O._status===0||O._status===-1)&&(O._status=2,O._result=he)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var ve=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function je(){}return Ve.Children={map:$,forEach:function(O,ne,he){$(O,function(){ne.apply(this,arguments)},he)},count:function(O){var ne=0;return $(O,function(){ne++}),ne},toArray:function(O){return $(O,function(ne){return ne})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=k,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=re,Ve.StrictMode=r,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return le.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cloneElement=function(O,ne,he){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=x({},O.props),be=O.key,Ne=void 0;if(ne!=null)for(xe in ne.ref!==void 0&&(Ne=void 0),ne.key!==void 0&&(be=""+ne.key),ne)!de.call(ne,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ne.ref===void 0||(ae[xe]=ne[xe]);var xe=arguments.length-2;if(xe===1)ae.children=he;else if(1<xe){for(var Ee=Array(xe),pe=0;pe<xe;pe++)Ee[pe]=arguments[pe+2];ae.children=Ee}return V(O.type,be,void 0,void 0,Ne,ae)},Ve.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ve.createElement=function(O,ne,he){var ae,be={},Ne=null;if(ne!=null)for(ae in ne.key!==void 0&&(Ne=""+ne.key),ne)de.call(ne,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(be[ae]=ne[ae]);var xe=arguments.length-2;if(xe===1)be.children=he;else if(1<xe){for(var Ee=Array(xe),pe=0;pe<xe;pe++)Ee[pe]=arguments[pe+2];be.children=Ee}if(O&&O.defaultProps)for(ae in xe=O.defaultProps,xe)be[ae]===void 0&&(be[ae]=xe[ae]);return V(O,Ne,void 0,void 0,null,be)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=I,Ve.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ue}},Ve.memo=function(O,ne){return{$$typeof:p,type:O,compare:ne===void 0?null:ne}},Ve.startTransition=function(O){var ne=le.T,he={};le.T=he;try{var ae=O(),be=le.S;be!==null&&be(he,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(je,ve)}catch(Ne){ve(Ne)}finally{le.T=ne}},Ve.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ve.use=function(O){return le.H.use(O)},Ve.useActionState=function(O,ne,he){return le.H.useActionState(O,ne,he)},Ve.useCallback=function(O,ne){return le.H.useCallback(O,ne)},Ve.useContext=function(O){return le.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,ne){return le.H.useDeferredValue(O,ne)},Ve.useEffect=function(O,ne,he){var ae=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(O,ne)},Ve.useId=function(){return le.H.useId()},Ve.useImperativeHandle=function(O,ne,he){return le.H.useImperativeHandle(O,ne,he)},Ve.useInsertionEffect=function(O,ne){return le.H.useInsertionEffect(O,ne)},Ve.useLayoutEffect=function(O,ne){return le.H.useLayoutEffect(O,ne)},Ve.useMemo=function(O,ne){return le.H.useMemo(O,ne)},Ve.useOptimistic=function(O,ne){return le.H.useOptimistic(O,ne)},Ve.useReducer=function(O,ne,he){return le.H.useReducer(O,ne,he)},Ve.useRef=function(O){return le.H.useRef(O)},Ve.useState=function(O){return le.H.useState(O)},Ve.useSyncExternalStore=function(O,ne,he){return le.H.useSyncExternalStore(O,ne,he)},Ve.useTransition=function(){return le.H.useTransition()},Ve.version="19.1.0",Ve}var sT;function wp(){return sT||(sT=1,Ag.exports=cI()),Ag.exports}var H=wp();const hI=sA(H);var bg={exports:{}},Ou={},wg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function fI(){return aT||(aT=1,function(s){function e($,ue){var ve=$.length;$.push(ue);e:for(;0<ve;){var je=ve-1>>>1,O=$[je];if(0<a(O,ue))$[je]=ue,$[ve]=O,ve=je;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ue=$[0],ve=$.pop();if(ve!==ue){$[0]=ve;e:for(var je=0,O=$.length,ne=O>>>1;je<ne;){var he=2*(je+1)-1,ae=$[he],be=he+1,Ne=$[be];if(0>a(ae,ve))be<O&&0>a(Ne,ae)?($[je]=Ne,$[be]=ve,je=be):($[je]=ae,$[he]=ve,je=he);else if(be<O&&0>a(Ne,ve))$[je]=Ne,$[be]=ve,je=be;else break e}}return ue}function a($,ue){var ve=$.sortIndex-ue.sortIndex;return ve!==0?ve:$.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,b=3,R=!1,x=!1,U=!1,k=!1,Q=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function me($){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=$)r(p),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(p)}}function le($){if(U=!1,me($),!x)if(t(m)!==null)x=!0,de||(de=!0,L());else{var ue=t(p);ue!==null&&Ce(le,ue.startTime-$)}}var de=!1,V=-1,S=5,I=-1;function N(){return k?!0:!(s.unstable_now()-I<S)}function P(){if(k=!1,de){var $=s.unstable_now();I=$;var ue=!0;try{e:{x=!1,U&&(U=!1,re(V),V=-1),R=!0;var ve=b;try{t:{for(me($),T=t(m);T!==null&&!(T.expirationTime>$&&N());){var je=T.callback;if(typeof je=="function"){T.callback=null,b=T.priorityLevel;var O=je(T.expirationTime<=$);if($=s.unstable_now(),typeof O=="function"){T.callback=O,me($),ue=!0;break t}T===t(m)&&r(m),me($)}else r(m);T=t(m)}if(T!==null)ue=!0;else{var ne=t(p);ne!==null&&Ce(le,ne.startTime-$),ue=!1}}break e}finally{T=null,b=ve,R=!1}ue=void 0}}finally{ue?L():de=!1}}}var L;if(typeof W=="function")L=function(){W(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ke=D.port2;D.port1.onmessage=P,L=function(){ke.postMessage(null)}}else L=function(){Q(P,0)};function Ce($,ue){V=Q(function(){$(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function($){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var ve=b;b=ue;try{return $()}finally{b=ve}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ve=b;b=$;try{return ue()}finally{b=ve}},s.unstable_scheduleCallback=function($,ue,ve){var je=s.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,$){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ve+O,$={id:_++,callback:ue,priorityLevel:$,startTime:ve,expirationTime:O,sortIndex:-1},ve>je?($.sortIndex=ve,e(p,$),t(m)===null&&$===t(p)&&(U?(re(V),V=-1):U=!0,Ce(le,ve-je))):($.sortIndex=O,e(m,$),x||R||(x=!0,de||(de=!0,L()))),$},s.unstable_shouldYield=N,s.unstable_wrapCallback=function($){var ue=b;return function(){var ve=b;b=ue;try{return $.apply(this,arguments)}finally{b=ve}}}}(Sg)),Sg}var oT;function dI(){return oT||(oT=1,wg.exports=fI()),wg.exports}var Rg={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function mI(){if(lT)return dn;lT=1;var s=wp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},dn.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},dn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},dn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},dn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},dn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},dn.requestFormReset=function(m){r.d.r(m)},dn.unstable_batchedUpdates=function(m,p){return m(p)},dn.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var uT;function gI(){if(uT)return Rg.exports;uT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rg.exports=mI(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function pI(){if(cT)return Ou;cT=1;var s=dI(),e=wp(),t=gI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),W=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function ke(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case k:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case de:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case W:return(n.displayName||"Context")+".Provider";case re:return(n._context.displayName||"Context")+".Consumer";case me:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return i=n.displayName||null,i!==null?i:ke(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return ke(n(i))}catch{}}return null}var Ce=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],O=-1;function ne(n){return{current:n}}function he(n){0>O||(n.current=je[O],je[O]=null,O--)}function ae(n,i){O++,je[O]=n.current,n.current=i}var be=ne(null),Ne=ne(null),xe=ne(null),Ee=ne(null);function pe(n,i){switch(ae(xe,i),ae(Ne,n),ae(be,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?CE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=CE(i),n=VE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(be),ae(be,n)}function Ke(){he(be),he(Ne),he(xe)}function lt(n){n.memoizedState!==null&&ae(Ee,n);var i=be.current,o=VE(i,n.type);i!==o&&(ae(Ne,n),ae(be,o))}function ut(n){Ne.current===n&&(he(be),he(Ne)),Ee.current===n&&(he(Ee),Iu._currentValue=ve)}var nn=Object.prototype.hasOwnProperty,Bt=s.unstable_scheduleCallback,_n=s.unstable_cancelCallback,Nt=s.unstable_shouldYield,Ba=s.unstable_requestPaint,vn=s.unstable_now,za=s.unstable_getCurrentPriorityLevel,Ii=s.unstable_ImmediatePriority,qr=s.unstable_UserBlockingPriority,ir=s.unstable_NormalPriority,xi=s.unstable_LowPriority,dr=s.unstable_IdlePriority,Cs=s.log,sr=s.unstable_setDisableYieldValue,dt=null,Me=null;function Ze(n){if(typeof Cs=="function"&&sr(n),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(dt,n)}catch{}}var zt=Math.clz32?Math.clz32:jr,qa=Math.log,Rl=Math.LN2;function jr(n){return n>>>=0,n===0?32:31-(qa(n)/Rl|0)|0}var Vs=256,Ns=4194304;function ar(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ja(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=ar(u):(E&=A,E!==0?f=ar(E):o||(o=A&~n,o!==0&&(f=ar(o))))):(A=u&~g,A!==0?f=ar(A):E!==0?f=ar(E):o||(o=u&~n,o!==0&&(f=ar(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Os(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Il(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xl(){var n=Vs;return Vs<<=1,(Vs&4194048)===0&&(Vs=256),n}function Dl(){var n=Ns;return Ns<<=1,(Ns&62914560)===0&&(Ns=4194304),n}function Fr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Gr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Cl(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,C=n.expirationTimes,G=n.hiddenUpdates;for(o=E&~o;0<o;){var J=31-zt(o),te=1<<J;A[J]=0,C[J]=-1;var K=G[J];if(K!==null)for(G[J]=null,J=0;J<K.length;J++){var Y=K[J];Y!==null&&(Y.lane&=-536870913)}o&=~te}u!==0&&mr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function mr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-zt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Vl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-zt(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function Di(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ci(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:XE(n.type))}function kc(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var mt=Math.random().toString(36).slice(2),qt="__reactFiber$"+mt,Ot="__reactProps$"+mt,Gn="__reactContainer$"+mt,Nl="__reactEvents$"+mt,wd="__reactListeners$"+mt,Vi="__reactHandles$"+mt,Lc="__reactResources$"+mt,Ms="__reactMarker$"+mt;function Ni(n){delete n[qt],delete n[Ot],delete n[Nl],delete n[wd],delete n[Vi]}function Hr(n){var i=n[qt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Gn]||o[qt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=PE(n);n!==null;){if(o=n[qt])return o;n=PE(n)}return i}n=o,o=n.parentNode}return null}function gr(n){if(n=n[qt]||n[Gn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function pr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function En(n){var i=n[Lc];return i||(i=n[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(n){n[Ms]=!0}var Ol=new Set,Ga={};function or(n,i){Qr(n,i),Qr(n+"Capture",i)}function Qr(n,i){for(Ga[n]=i,n=0;n<i.length;n++)Ol.add(i[n])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},Ps={};function zc(n){return nn.call(Ps,n)?!0:nn.call(Bc,n)?!1:Uc.test(n)?Ps[n]=!0:(Bc[n]=!0,!1)}function Oi(n,i,o){if(zc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function yr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function rn(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var ks,qc;function Kr(n){if(ks===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ks=i&&i[1]||"",qc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+n+qc}var Ha=!1;function Qa(n,i){if(!n||Ha)return"";Ha=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Y){var K=Y}Reflect.construct(n,[],te)}else{try{te.call()}catch(Y){K=Y}n.call(te.prototype)}}else{try{throw Error()}catch(Y){K=Y}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var C=E.split(`
`),G=A.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===G.length)for(u=C.length-1,f=G.length-1;1<=u&&0<=f&&C[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==G[f]){var J=`
`+C[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{Ha=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Kr(o):""}function Ml(n){switch(n.tag){case 26:case 27:case 5:return Kr(n.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 15:return Qa(n.type,!1);case 11:return Qa(n.type.render,!1);case 1:return Qa(n.type,!0);case 31:return Kr("Activity");default:return""}}function Ka(n){try{var i="";do i+=Ml(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sd(n){var i=Pl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function $a(n){n._valueTracker||(n._valueTracker=Sd(n))}function kl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Pl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ls(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rd=/[\n"\\]/g;function Mt(n){return n.replace(Rd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Mn(n,i,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Tn(i)):n.value!==""+Tn(i)&&(n.value=""+Tn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Mi(n,E,Tn(i)):o!=null?Mi(n,E,Tn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Tn(A):n.removeAttribute("name")}function Us(n,i,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+Tn(o):"",i=i!=null?""+Tn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Mi(n,i,o){i==="number"&&Ls(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function $r(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Tn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function rt(n,i,o){if(i!=null&&(i=""+Tn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Tn(o):""}function Bs(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ce(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Tn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Hn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||zs.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Ll(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&jc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&jc(n,g,i[g])}function Ul(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(n){return xd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Yr=null;function Qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xr=null,Zr=null;function Bl(n){var i=gr(n);if(i&&(n=i.stateNode)){var o=n[Ot]||null;e:switch(n=i.stateNode,i.type){case"input":if(Mn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Mt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[Ot]||null;if(!f)throw Error(r(90));Mn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&kl(u)}break e;case"textarea":rt(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&$r(n,!!o.multiple,i,!1)}}}var _r=!1;function Fc(n,i,o){if(_r)return n(i,o);_r=!0;try{var u=n(i);return u}finally{if(_r=!1,(Xr!==null||Zr!==null)&&(kh(),Xr&&(i=Xr,n=Zr,Zr=Xr=null,Bl(i),n)))for(i=0;i<n.length;i++)Bl(n[i])}}function qs(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Ot]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kn=!1;if(lr)try{var js={};Object.defineProperty(js,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Kn=!1}var vr=null,Pi=null,Wr=null;function zl(){if(Wr)return Wr;var n,i=Pi,o=i.length,u,f="value"in vr?vr.value:vr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return Wr=f.slice(n,1<u?1-u:void 0)}function Er(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Tr(){return!0}function ql(){return!1}function $t(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Tr:ql,this.isPropagationStopped=ql,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=$t(We),Fs=_({},We,{view:0,detail:0}),Gc=$t(Fs),Za,Wa,Ar,Gs=_({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ar&&(Ar&&n.type==="mousemove"?(Za=n.screenX-Ar.screenX,Wa=n.screenY-Ar.screenY):Wa=Za=0,Ar=n),Za)},movementY:function(n){return"movementY"in n?n.movementY:Wa}}),$n=$t(Gs),Hc=_({},Gs,{dataTransfer:0}),Dd=$t(Hc),Hs=_({},Fs,{relatedTarget:0}),Ja=$t(Hs),jl=_({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=$t(jl),Qc=_({},We,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),to=$t(Qc),Cd=_({},We,{data:0}),Fl=$t(Cd),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=$c[n])?!!i[n]:!1}function Ks(){return Gl}var Yc=_({},Fs,{key:function(n){if(n.key){var i=Qs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Er(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Kc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(n){return n.type==="keypress"?Er(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Er(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),no=$t(Yc),Xc=_({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hl=$t(Xc),Jr=_({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Zc=$t(Jr),Wc=_({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jc=$t(Wc),eh=_({},Gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ro=$t(eh),An=_({},We,{newState:0,oldState:0}),th=$t(An),nh=[9,13,27,32],br=lr&&"CompositionEvent"in window,h=null;lr&&"documentMode"in document&&(h=document.documentMode);var y=lr&&"TextEvent"in window&&!h,v=lr&&(!br||h&&8<h&&11>=h),w=" ",q=!1;function Z(n,i){switch(n){case"keyup":return nh.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function jt(n,i){switch(n){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(q=!0,w);case"textInput":return n=i.data,n===w&&q?null:n;default:return null}}function Ge(n,i){if(Fe)return n==="compositionend"||!br&&Z(n,i)?(n=zl(),Wr=Pi=vr=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Yt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Yt[n.type]:i==="textarea"}function ei(n,i,o,u){Xr?Zr?Zr.push(u):Zr=[u]:Xr=u,i=jh(i,"onChange"),0<i.length&&(o=new Xa("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var sn=null,wr=null;function Ql(n){SE(n,0)}function rh(n){var i=pr(n);if(kl(i))return n}function Qy(n,i){if(n==="change")return i}var Ky=!1;if(lr){var Vd;if(lr){var Nd="oninput"in document;if(!Nd){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),Nd=typeof $y.oninput=="function"}Vd=Nd}else Vd=!1;Ky=Vd&&(!document.documentMode||9<document.documentMode)}function Yy(){sn&&(sn.detachEvent("onpropertychange",Xy),wr=sn=null)}function Xy(n){if(n.propertyName==="value"&&rh(wr)){var i=[];ei(i,wr,n,Qn(n)),Fc(Ql,i)}}function US(n,i,o){n==="focusin"?(Yy(),sn=i,wr=o,sn.attachEvent("onpropertychange",Xy)):n==="focusout"&&Yy()}function BS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rh(wr)}function zS(n,i){if(n==="click")return rh(i)}function qS(n,i){if(n==="input"||n==="change")return rh(i)}function jS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Pn=typeof Object.is=="function"?Object.is:jS;function Kl(n,i){if(Pn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!nn.call(i,f)||!Pn(n[f],i[f]))return!1}return!0}function Zy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wy(n,i){var o=Zy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Zy(o)}}function Jy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Jy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function e_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ls(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ls(n.document)}return i}function Od(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var FS=lr&&"documentMode"in document&&11>=document.documentMode,io=null,Md=null,$l=null,Pd=!1;function t_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pd||io==null||io!==Ls(u)||(u=io,"selectionStart"in u&&Od(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$l&&Kl($l,u)||($l=u,u=jh(Md,"onSelect"),0<u.length&&(i=new Xa("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=io)))}function $s(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var so={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},kd={},n_={};lr&&(n_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Ys(n){if(kd[n])return kd[n];if(!so[n])return n;var i=so[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in n_)return kd[n]=i[o];return n}var r_=Ys("animationend"),i_=Ys("animationiteration"),s_=Ys("animationstart"),GS=Ys("transitionrun"),HS=Ys("transitionstart"),QS=Ys("transitioncancel"),a_=Ys("transitionend"),o_=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function ur(n,i){o_.set(n,i),or(i,[n])}var l_=new WeakMap;function Yn(n,i){if(typeof n=="object"&&n!==null){var o=l_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ka(i)},l_.set(n,i),i)}return{value:n,source:i,stack:Ka(i)}}var Xn=[],ao=0,Ud=0;function ih(){for(var n=ao,i=Ud=ao=0;i<n;){var o=Xn[i];Xn[i++]=null;var u=Xn[i];Xn[i++]=null;var f=Xn[i];Xn[i++]=null;var g=Xn[i];if(Xn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&u_(o,f,g)}}function sh(n,i,o,u){Xn[ao++]=n,Xn[ao++]=i,Xn[ao++]=o,Xn[ao++]=u,Ud|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,o,u){return sh(n,i,o,u),ah(n)}function oo(n,i){return sh(n,null,null,i),ah(n)}function u_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-zt(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function ah(n){if(50<vu)throw vu=0,Hm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var lo={};function KS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(n,i,o,u){return new KS(n,i,o,u)}function zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ti(n,i){var o=n.alternate;return o===null?(o=kn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function c_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function oh(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")zd(n)&&(E=1);else if(typeof n=="string")E=YR(n,o,be.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=kn(31,o,i,f),n.elementType=I,n.lanes=g,n;case x:return Xs(o.children,f,g,i);case U:E=8,f|=24;break;case k:return n=kn(12,o,i,f|2),n.elementType=k,n.lanes=g,n;case le:return n=kn(13,o,i,f),n.elementType=le,n.lanes=g,n;case de:return n=kn(19,o,i,f),n.elementType=de,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case W:E=10;break e;case re:E=9;break e;case me:E=11;break e;case V:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=kn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function Xs(n,i,o,u){return n=kn(7,n,u,i),n.lanes=o,n}function qd(n,i,o){return n=kn(6,n,null,i),n.lanes=o,n}function jd(n,i,o){return i=kn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var uo=[],co=0,lh=null,uh=0,Zn=[],Wn=0,Zs=null,ni=1,ri="";function Ws(n,i){uo[co++]=uh,uo[co++]=lh,lh=n,uh=i}function h_(n,i,o){Zn[Wn++]=ni,Zn[Wn++]=ri,Zn[Wn++]=Zs,Zs=n;var u=ni;n=ri;var f=32-zt(u)-1;u&=~(1<<f),o+=1;var g=32-zt(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,ni=1<<32-zt(i)+f|o<<f|u,ri=g+n}else ni=1<<g|o<<f|u,ri=n}function Fd(n){n.return!==null&&(Ws(n,1),h_(n,1,0))}function Gd(n){for(;n===lh;)lh=uo[--co],uo[co]=null,uh=uo[--co],uo[co]=null;for(;n===Zs;)Zs=Zn[--Wn],Zn[Wn]=null,ri=Zn[--Wn],Zn[Wn]=null,ni=Zn[--Wn],Zn[Wn]=null}var bn=null,bt=null,Xe=!1,Js=null,Sr=!1,Hd=Error(r(519));function ea(n){var i=Error(r(418,""));throw Zl(Yn(i,n)),Hd}function f_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[qt]=n,i[Ot]=u,o){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(o=0;o<Tu.length;o++)Ue(Tu[o],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),Us(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),$a(i);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),Bs(i,u.value,u.defaultValue,u.children),$a(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||DE(i.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),u.onScroll!=null&&Ue("scroll",i),u.onScrollEnd!=null&&Ue("scrollend",i),u.onClick!=null&&(i.onclick=Fh),i=!0):i=!1,i||ea(n)}function d_(n){for(bn=n.return;bn;)switch(bn.tag){case 5:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:bn=bn.return}}function Yl(n){if(n!==bn)return!1;if(!Xe)return d_(n),Xe=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||og(n.type,n.memoizedProps)),o=!o),o&&bt&&ea(n),d_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){bt=hr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}bt=null}}else i===27?(i=bt,Zi(n.type)?(n=hg,hg=null,bt=n):bt=i):bt=bn?hr(n.stateNode.nextSibling):null;return!0}function Xl(){bt=bn=null,Xe=!1}function m_(){var n=Js;return n!==null&&(Cn===null?Cn=n:Cn.push.apply(Cn,n),Js=null),n}function Zl(n){Js===null?Js=[n]:Js.push(n)}var Qd=ne(null),ta=null,ii=null;function ki(n,i,o){ae(Qd,i._currentValue),i._currentValue=o}function si(n){n._currentValue=Qd.current,he(Qd)}function Kd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function $d(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=f;for(var C=0;C<i.length;C++)if(A.context===i[C]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Kd(g.return,o,n),u||(E=null);break e}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Kd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Wl(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Pn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ee.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Iu):n=[Iu])}f=f.return}n!==null&&$d(i,n,o,u),i.flags|=262144}function ch(n){for(n=n.firstContext;n!==null;){if(!Pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function na(n){ta=n,ii=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function fn(n){return g_(ta,n)}function hh(n,i){return ta===null&&na(n),g_(n,i)}function g_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ii===null){if(n===null)throw Error(r(308));ii=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ii=ii.next=i;return o}var $S=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},YS=s.unstable_scheduleCallback,XS=s.unstable_NormalPriority,Gt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new $S,data:new Map,refCount:0}}function Jl(n){n.refCount--,n.refCount===0&&YS(XS,function(){n.controller.abort()})}var eu=null,Xd=0,ho=0,fo=null;function ZS(n,i){if(eu===null){var o=eu=[];Xd=0,ho=Wm(),fo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Xd++,i.then(p_,p_),i}function p_(){if(--Xd===0&&eu!==null){fo!==null&&(fo.status="fulfilled");var n=eu;eu=null,ho=0,fo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function WS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var y_=$.S;$.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&ZS(n,i),y_!==null&&y_(n,i)};var ra=ne(null);function Zd(){var n=ra.current;return n!==null?n:ct.pooledCache}function fh(n,i){i===null?ae(ra,ra.current):ae(ra,i.pool)}function __(){var n=Zd();return n===null?null:{parent:Gt._currentValue,pool:n}}var tu=Error(r(460)),v_=Error(r(474)),dh=Error(r(542)),Wd={then:function(){}};function E_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mh(){}function T_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(mh,mh),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,b_(n),n;default:if(typeof i.status=="string")i.then(mh,mh);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,b_(n),n}throw nu=i,tu}}var nu=null;function A_(){if(nu===null)throw Error(r(459));var n=nu;return nu=null,n}function b_(n){if(n===tu||n===dh)throw Error(r(483))}var Li=!1;function Jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ui(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Bi(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=ah(n),u_(n,null,o),i}return sh(n,u,i,o),ah(n)}function ru(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Vl(n,o)}}function tm(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var nm=!1;function iu(){if(nm){var n=fo;if(n!==null)throw n}}function su(n,i,o,u){nm=!1;var f=n.updateQueue;Li=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,G=C.next;C.next=null,E===null?g=G:E.next=G,E=C;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==E&&(A===null?J.firstBaseUpdate=G:A.next=G,J.lastBaseUpdate=C))}if(g!==null){var te=f.baseState;E=0,J=G=C=null,A=g;do{var K=A.lane&-536870913,Y=K!==A.lane;if(Y?(He&K)===K:(u&K)===K){K!==0&&K===ho&&(nm=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ie=n,we=A;K=i;var at=o;switch(we.tag){case 1:if(Ie=we.payload,typeof Ie=="function"){te=Ie.call(at,te,K);break e}te=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=we.payload,K=typeof Ie=="function"?Ie.call(at,te,K):Ie,K==null)break e;te=_({},te,K);break e;case 2:Li=!0}}K=A.callback,K!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(G=J=Y,C=te):J=J.next=Y,E|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);J===null&&(C=te),f.baseState=C,f.firstBaseUpdate=G,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),Ki|=E,n.lanes=E,n.memoizedState=te}}function w_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function S_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)w_(o[n],i)}var mo=ne(null),gh=ne(0);function R_(n,i){n=fi,ae(gh,n),ae(mo,i),fi=n|i.baseLanes}function rm(){ae(gh,fi),ae(mo,mo.current)}function im(){fi=gh.current,he(mo),he(gh)}var zi=0,Oe=null,it=null,Pt=null,ph=!1,go=!1,ia=!1,yh=0,au=0,po=null,JS=0;function It(){throw Error(r(321))}function sm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Pn(n[o],i[o]))return!1;return!0}function am(n,i,o,u,f,g){return zi=g,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=n===null||n.memoizedState===null?uv:cv,ia=!1,g=o(u,f),ia=!1,go&&(g=x_(i,o,u,f)),I_(n),g}function I_(n){$.H=bh;var i=it!==null&&it.next!==null;if(zi=0,Pt=it=Oe=null,ph=!1,au=0,po=null,i)throw Error(r(300));n===null||Xt||(n=n.dependencies,n!==null&&ch(n)&&(Xt=!0))}function x_(n,i,o,u){Oe=n;var f=0;do{if(go&&(po=null),au=0,go=!1,25<=f)throw Error(r(301));if(f+=1,Pt=it=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=aR,g=i(o,u)}while(go);return g}function eR(){var n=$.H,i=n.useState()[0];return i=typeof i.then=="function"?ou(i):i,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Oe.flags|=1024),i}function om(){var n=yh!==0;return yh=0,n}function lm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function um(n){if(ph){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ph=!1}zi=0,Pt=it=Oe=null,go=!1,au=yh=0,po=null}function xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Oe.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function kt(){if(it===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var i=Pt===null?Oe.memoizedState:Pt.next;if(i!==null)Pt=i,it=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Pt===null?Oe.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(n){var i=au;return au+=1,po===null&&(po=[]),n=T_(po,n,i),i=Oe,(Pt===null?i.memoizedState:Pt.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?uv:cv),n}function _h(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ou(n);if(n.$$typeof===W)return fn(n)}throw Error(r(438,String(n)))}function hm(n){var i=null,o=Oe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=cm(),Oe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=N;return i.index++,o}function ai(n,i){return typeof i=="function"?i(n):i}function vh(n){var i=kt();return fm(i,it,n)}function fm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var A=E=null,C=null,G=i,J=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(He&te)===te:(zi&te)===te){var K=G.revertLane;if(K===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===ho&&(J=!0);else if((zi&K)===K){G=G.next,K===ho&&(J=!0);continue}else te={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(A=C=te,E=g):C=C.next=te,Oe.lanes|=K,Ki|=K;te=G.action,ia&&o(g,te),g=G.hasEagerState?G.eagerState:o(g,te)}else K={lane:te,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(A=C=K,E=g):C=C.next=K,Oe.lanes|=te,Ki|=te;G=G.next}while(G!==null&&G!==i);if(C===null?E=g:C.next=A,!Pn(g,n.memoizedState)&&(Xt=!0,J&&(o=fo,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=C,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function dm(n){var i=kt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Pn(g,i.memoizedState)||(Xt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function D_(n,i,o){var u=Oe,f=kt(),g=Xe;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Pn((it||f).memoizedState,o);E&&(f.memoizedState=o,Xt=!0),f=f.queue;var A=N_.bind(null,u,f,n);if(lu(2048,8,A,[n]),f.getSnapshot!==i||E||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,yo(9,Eh(),V_.bind(null,u,f,o,i),null),ct===null)throw Error(r(349));g||(zi&124)!==0||C_(u,i,o)}return o}function C_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Oe.updateQueue,i===null?(i=cm(),Oe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function V_(n,i,o,u){i.value=o,i.getSnapshot=u,O_(i)&&M_(n)}function N_(n,i,o){return o(function(){O_(i)&&M_(n)})}function O_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Pn(n,o)}catch{return!0}}function M_(n){var i=oo(n,2);i!==null&&qn(i,n,2)}function mm(n){var i=xn();if(typeof n=="function"){var o=n;if(n=o(),ia){Ze(!0);try{o()}finally{Ze(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},i}function P_(n,i,o,u){return n.baseState=o,fm(n,it,typeof u=="function"?u:ai)}function tR(n,i,o,u,f){if(Ah(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};$.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,k_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function k_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=$.T,E={};$.T=E;try{var A=o(f,u),C=$.S;C!==null&&C(E,A),L_(n,i,A)}catch(G){gm(n,i,G)}finally{$.T=g}}else try{g=o(f,u),L_(n,i,g)}catch(G){gm(n,i,G)}}function L_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){U_(n,i,u)},function(u){return gm(n,i,u)}):U_(n,i,o)}function U_(n,i,o){i.status="fulfilled",i.value=o,B_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,k_(n,o)))}function gm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,B_(i),i=i.next;while(i!==u)}n.action=null}function B_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function z_(n,i){return i}function q_(n,i){if(Xe){var o=ct.formState;if(o!==null){e:{var u=Oe;if(Xe){if(bt){t:{for(var f=bt,g=Sr;f.nodeType!==8;){if(!g){f=null;break t}if(f=hr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){bt=hr(f.nextSibling),u=f.data==="F!";break e}}ea(u)}u=!1}u&&(i=o[0])}}return o=xn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z_,lastRenderedState:i},o.queue=u,o=av.bind(null,Oe,u),u.dispatch=o,u=mm(!1),g=Em.bind(null,Oe,!1,u.queue),u=xn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=tR.bind(null,Oe,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function j_(n){var i=kt();return F_(i,it,n)}function F_(n,i,o){if(i=fm(n,i,z_)[0],n=vh(ai)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=ou(i)}catch(E){throw E===tu?dh:E}else u=i;i=kt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Oe.flags|=2048,yo(9,Eh(),nR.bind(null,f,o),null)),[u,g,n]}function nR(n,i){n.action=i}function G_(n){var i=kt(),o=it;if(o!==null)return F_(i,o,n);kt(),i=i.memoizedState,o=kt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function yo(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=cm(),Oe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function Eh(){return{destroy:void 0,resource:void 0}}function H_(){return kt().memoizedState}function Th(n,i,o,u){var f=xn();u=u===void 0?null:u,Oe.flags|=n,f.memoizedState=yo(1|i,Eh(),o,u)}function lu(n,i,o,u){var f=kt();u=u===void 0?null:u;var g=f.memoizedState.inst;it!==null&&u!==null&&sm(u,it.memoizedState.deps)?f.memoizedState=yo(i,g,o,u):(Oe.flags|=n,f.memoizedState=yo(1|i,g,o,u))}function Q_(n,i){Th(8390656,8,n,i)}function K_(n,i){lu(2048,8,n,i)}function $_(n,i){return lu(4,2,n,i)}function Y_(n,i){return lu(4,4,n,i)}function X_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Z_(n,i,o){o=o!=null?o.concat([n]):null,lu(4,4,X_.bind(null,i,n),o)}function pm(){}function W_(n,i){var o=kt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&sm(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function J_(n,i){var o=kt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&sm(i,u[1]))return u[0];if(u=n(),ia){Ze(!0);try{n()}finally{Ze(!1)}}return o.memoizedState=[u,i],u}function ym(n,i,o){return o===void 0||(zi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=nE(),Oe.lanes|=n,Ki|=n,o)}function ev(n,i,o,u){return Pn(o,i)?o:mo.current!==null?(n=ym(n,o,u),Pn(n,i)||(Xt=!0),n):(zi&42)===0?(Xt=!0,n.memoizedState=o):(n=nE(),Oe.lanes|=n,Ki|=n,i)}function tv(n,i,o,u,f){var g=ue.p;ue.p=g!==0&&8>g?g:8;var E=$.T,A={};$.T=A,Em(n,!1,i,o);try{var C=f(),G=$.S;if(G!==null&&G(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=WS(C,u);uu(n,i,J,zn(n))}else uu(n,i,u,zn(n))}catch(te){uu(n,i,{then:function(){},status:"rejected",reason:te},zn())}finally{ue.p=g,$.T=E}}function rR(){}function _m(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=nv(n).queue;tv(n,f,i,ve,o===null?rR:function(){return rv(n),o(u)})}function nv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:ve},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function rv(n){var i=nv(n).next.queue;uu(n,i,{},zn())}function vm(){return fn(Iu)}function iv(){return kt().memoizedState}function sv(){return kt().memoizedState}function iR(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=zn();n=Ui(o);var u=Bi(i,n,o);u!==null&&(qn(u,i,o),ru(u,i,o)),i={cache:Yd()},n.payload=i;return}i=i.return}}function sR(n,i,o){var u=zn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ah(n)?ov(i,o):(o=Bd(n,i,o,u),o!==null&&(qn(o,n,u),lv(o,i,u)))}function av(n,i,o){var u=zn();uu(n,i,o,u)}function uu(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ah(n))ov(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,Pn(A,E))return sh(n,i,f,0),ct===null&&ih(),!1}catch{}finally{}if(o=Bd(n,i,f,u),o!==null)return qn(o,n,u),lv(o,i,u),!0}return!1}function Em(n,i,o,u){if(u={lane:2,revertLane:Wm(),action:u,hasEagerState:!1,eagerState:null,next:null},Ah(n)){if(i)throw Error(r(479))}else i=Bd(n,o,u,2),i!==null&&qn(i,n,2)}function Ah(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function ov(n,i){go=ph=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function lv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Vl(n,o)}}var bh={readContext:fn,use:_h,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},uv={readContext:fn,use:_h,useCallback:function(n,i){return xn().memoizedState=[n,i===void 0?null:i],n},useContext:fn,useEffect:Q_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Th(4194308,4,X_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Th(4194308,4,n,i)},useInsertionEffect:function(n,i){Th(4,2,n,i)},useMemo:function(n,i){var o=xn();i=i===void 0?null:i;var u=n();if(ia){Ze(!0);try{n()}finally{Ze(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=xn();if(o!==void 0){var f=o(i);if(ia){Ze(!0);try{o(i)}finally{Ze(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=sR.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var i=xn();return n={current:n},i.memoizedState=n},useState:function(n){n=mm(n);var i=n.queue,o=av.bind(null,Oe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:pm,useDeferredValue:function(n,i){var o=xn();return ym(o,n,i)},useTransition:function(){var n=mm(!1);return n=tv.bind(null,Oe,n.queue,!0,!1),xn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Oe,f=xn();if(Xe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),ct===null)throw Error(r(349));(He&124)!==0||C_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,Q_(N_.bind(null,u,g,n),[n]),u.flags|=2048,yo(9,Eh(),V_.bind(null,u,g,o,i),null),o},useId:function(){var n=xn(),i=ct.identifierPrefix;if(Xe){var o=ri,u=ni;o=(u&~(1<<32-zt(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=yh++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=JS++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:vm,useFormState:q_,useActionState:q_,useOptimistic:function(n){var i=xn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Em.bind(null,Oe,!0,o),o.dispatch=i,[n,i]},useMemoCache:hm,useCacheRefresh:function(){return xn().memoizedState=iR.bind(null,Oe)}},cv={readContext:fn,use:_h,useCallback:W_,useContext:fn,useEffect:K_,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:J_,useReducer:vh,useRef:H_,useState:function(){return vh(ai)},useDebugValue:pm,useDeferredValue:function(n,i){var o=kt();return ev(o,it.memoizedState,n,i)},useTransition:function(){var n=vh(ai)[0],i=kt().memoizedState;return[typeof n=="boolean"?n:ou(n),i]},useSyncExternalStore:D_,useId:iv,useHostTransitionStatus:vm,useFormState:j_,useActionState:j_,useOptimistic:function(n,i){var o=kt();return P_(o,it,n,i)},useMemoCache:hm,useCacheRefresh:sv},aR={readContext:fn,use:_h,useCallback:W_,useContext:fn,useEffect:K_,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:J_,useReducer:dm,useRef:H_,useState:function(){return dm(ai)},useDebugValue:pm,useDeferredValue:function(n,i){var o=kt();return it===null?ym(o,n,i):ev(o,it.memoizedState,n,i)},useTransition:function(){var n=dm(ai)[0],i=kt().memoizedState;return[typeof n=="boolean"?n:ou(n),i]},useSyncExternalStore:D_,useId:iv,useHostTransitionStatus:vm,useFormState:G_,useActionState:G_,useOptimistic:function(n,i){var o=kt();return it!==null?P_(o,it,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hm,useCacheRefresh:sv},_o=null,cu=0;function wh(n){var i=cu;return cu+=1,_o===null&&(_o=[]),T_(_o,n,i)}function hu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Sh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function hv(n){var i=n._init;return i(n._payload)}function fv(n){function i(B,M){if(n){var F=B.deletions;F===null?(B.deletions=[M],B.flags|=16):F.push(M)}}function o(B,M){if(!n)return null;for(;M!==null;)i(B,M),M=M.sibling;return null}function u(B){for(var M=new Map;B!==null;)B.key!==null?M.set(B.key,B):M.set(B.index,B),B=B.sibling;return M}function f(B,M){return B=ti(B,M),B.index=0,B.sibling=null,B}function g(B,M,F){return B.index=F,n?(F=B.alternate,F!==null?(F=F.index,F<M?(B.flags|=67108866,M):F):(B.flags|=67108866,M)):(B.flags|=1048576,M)}function E(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function A(B,M,F,ee){return M===null||M.tag!==6?(M=qd(F,B.mode,ee),M.return=B,M):(M=f(M,F),M.return=B,M)}function C(B,M,F,ee){var ye=F.type;return ye===x?J(B,M,F.props.children,ee,F.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&hv(ye)===M.type)?(M=f(M,F.props),hu(M,F),M.return=B,M):(M=oh(F.type,F.key,F.props,null,B.mode,ee),hu(M,F),M.return=B,M)}function G(B,M,F,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=jd(F,B.mode,ee),M.return=B,M):(M=f(M,F.children||[]),M.return=B,M)}function J(B,M,F,ee,ye){return M===null||M.tag!==7?(M=Xs(F,B.mode,ee,ye),M.return=B,M):(M=f(M,F),M.return=B,M)}function te(B,M,F){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qd(""+M,B.mode,F),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return F=oh(M.type,M.key,M.props,null,B.mode,F),hu(F,M),F.return=B,F;case R:return M=jd(M,B.mode,F),M.return=B,M;case S:var ee=M._init;return M=ee(M._payload),te(B,M,F)}if(Ce(M)||L(M))return M=Xs(M,B.mode,F,null),M.return=B,M;if(typeof M.then=="function")return te(B,wh(M),F);if(M.$$typeof===W)return te(B,hh(B,M),F);Sh(B,M)}return null}function K(B,M,F,ee){var ye=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:A(B,M,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===ye?C(B,M,F,ee):null;case R:return F.key===ye?G(B,M,F,ee):null;case S:return ye=F._init,F=ye(F._payload),K(B,M,F,ee)}if(Ce(F)||L(F))return ye!==null?null:J(B,M,F,ee,null);if(typeof F.then=="function")return K(B,M,wh(F),ee);if(F.$$typeof===W)return K(B,M,hh(B,F),ee);Sh(B,F)}return null}function Y(B,M,F,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(F)||null,A(M,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return B=B.get(ee.key===null?F:ee.key)||null,C(M,B,ee,ye);case R:return B=B.get(ee.key===null?F:ee.key)||null,G(M,B,ee,ye);case S:var Pe=ee._init;return ee=Pe(ee._payload),Y(B,M,F,ee,ye)}if(Ce(ee)||L(ee))return B=B.get(F)||null,J(M,B,ee,ye,null);if(typeof ee.then=="function")return Y(B,M,F,wh(ee),ye);if(ee.$$typeof===W)return Y(B,M,F,hh(M,ee),ye);Sh(M,ee)}return null}function Ie(B,M,F,ee){for(var ye=null,Pe=null,Ae=M,Se=M=0,Wt=null;Ae!==null&&Se<F.length;Se++){Ae.index>Se?(Wt=Ae,Ae=null):Wt=Ae.sibling;var $e=K(B,Ae,F[Se],ee);if($e===null){Ae===null&&(Ae=Wt);break}n&&Ae&&$e.alternate===null&&i(B,Ae),M=g($e,M,Se),Pe===null?ye=$e:Pe.sibling=$e,Pe=$e,Ae=Wt}if(Se===F.length)return o(B,Ae),Xe&&Ws(B,Se),ye;if(Ae===null){for(;Se<F.length;Se++)Ae=te(B,F[Se],ee),Ae!==null&&(M=g(Ae,M,Se),Pe===null?ye=Ae:Pe.sibling=Ae,Pe=Ae);return Xe&&Ws(B,Se),ye}for(Ae=u(Ae);Se<F.length;Se++)Wt=Y(Ae,B,Se,F[Se],ee),Wt!==null&&(n&&Wt.alternate!==null&&Ae.delete(Wt.key===null?Se:Wt.key),M=g(Wt,M,Se),Pe===null?ye=Wt:Pe.sibling=Wt,Pe=Wt);return n&&Ae.forEach(function(ns){return i(B,ns)}),Xe&&Ws(B,Se),ye}function we(B,M,F,ee){if(F==null)throw Error(r(151));for(var ye=null,Pe=null,Ae=M,Se=M=0,Wt=null,$e=F.next();Ae!==null&&!$e.done;Se++,$e=F.next()){Ae.index>Se?(Wt=Ae,Ae=null):Wt=Ae.sibling;var ns=K(B,Ae,$e.value,ee);if(ns===null){Ae===null&&(Ae=Wt);break}n&&Ae&&ns.alternate===null&&i(B,Ae),M=g(ns,M,Se),Pe===null?ye=ns:Pe.sibling=ns,Pe=ns,Ae=Wt}if($e.done)return o(B,Ae),Xe&&Ws(B,Se),ye;if(Ae===null){for(;!$e.done;Se++,$e=F.next())$e=te(B,$e.value,ee),$e!==null&&(M=g($e,M,Se),Pe===null?ye=$e:Pe.sibling=$e,Pe=$e);return Xe&&Ws(B,Se),ye}for(Ae=u(Ae);!$e.done;Se++,$e=F.next())$e=Y(Ae,B,Se,$e.value,ee),$e!==null&&(n&&$e.alternate!==null&&Ae.delete($e.key===null?Se:$e.key),M=g($e,M,Se),Pe===null?ye=$e:Pe.sibling=$e,Pe=$e);return n&&Ae.forEach(function(oI){return i(B,oI)}),Xe&&Ws(B,Se),ye}function at(B,M,F,ee){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var ye=F.key;M!==null;){if(M.key===ye){if(ye=F.type,ye===x){if(M.tag===7){o(B,M.sibling),ee=f(M,F.props.children),ee.return=B,B=ee;break e}}else if(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&hv(ye)===M.type){o(B,M.sibling),ee=f(M,F.props),hu(ee,F),ee.return=B,B=ee;break e}o(B,M);break}else i(B,M);M=M.sibling}F.type===x?(ee=Xs(F.props.children,B.mode,ee,F.key),ee.return=B,B=ee):(ee=oh(F.type,F.key,F.props,null,B.mode,ee),hu(ee,F),ee.return=B,B=ee)}return E(B);case R:e:{for(ye=F.key;M!==null;){if(M.key===ye)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){o(B,M.sibling),ee=f(M,F.children||[]),ee.return=B,B=ee;break e}else{o(B,M);break}else i(B,M);M=M.sibling}ee=jd(F,B.mode,ee),ee.return=B,B=ee}return E(B);case S:return ye=F._init,F=ye(F._payload),at(B,M,F,ee)}if(Ce(F))return Ie(B,M,F,ee);if(L(F)){if(ye=L(F),typeof ye!="function")throw Error(r(150));return F=ye.call(F),we(B,M,F,ee)}if(typeof F.then=="function")return at(B,M,wh(F),ee);if(F.$$typeof===W)return at(B,M,hh(B,F),ee);Sh(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,M!==null&&M.tag===6?(o(B,M.sibling),ee=f(M,F),ee.return=B,B=ee):(o(B,M),ee=qd(F,B.mode,ee),ee.return=B,B=ee),E(B)):o(B,M)}return function(B,M,F,ee){try{cu=0;var ye=at(B,M,F,ee);return _o=null,ye}catch(Ae){if(Ae===tu||Ae===dh)throw Ae;var Pe=kn(29,Ae,null,B.mode);return Pe.lanes=ee,Pe.return=B,Pe}finally{}}}var vo=fv(!0),dv=fv(!1),Jn=ne(null),Rr=null;function qi(n){var i=n.alternate;ae(Ht,Ht.current&1),ae(Jn,n),Rr===null&&(i===null||mo.current!==null||i.memoizedState!==null)&&(Rr=n)}function mv(n){if(n.tag===22){if(ae(Ht,Ht.current),ae(Jn,n),Rr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Rr=n)}}else ji()}function ji(){ae(Ht,Ht.current),ae(Jn,Jn.current)}function oi(n){he(Jn),Rr===n&&(Rr=null),he(Ht)}var Ht=ne(0);function Rh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||cg(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Tm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Am={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=zn(),f=Ui(u);f.payload=i,o!=null&&(f.callback=o),i=Bi(n,f,u),i!==null&&(qn(i,n,u),ru(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=zn(),f=Ui(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Bi(n,f,u),i!==null&&(qn(i,n,u),ru(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=zn(),u=Ui(o);u.tag=2,i!=null&&(u.callback=i),i=Bi(n,u,o),i!==null&&(qn(i,n,o),ru(i,n,o))}};function gv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Kl(o,u)||!Kl(f,g):!0}function pv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Am.enqueueReplaceState(i,i.state,null)}function sa(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Ih=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function yv(n){Ih(n)}function _v(n){console.error(n)}function vv(n){Ih(n)}function xh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Ev(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function bm(n,i,o){return o=Ui(o),o.tag=3,o.payload={element:null},o.callback=function(){xh(n,i)},o}function Tv(n){return n=Ui(n),n.tag=3,n}function Av(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Ev(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Ev(i,o,u),typeof f!="function"&&($i===null?$i=new Set([this]):$i.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function oR(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Wl(i,o,f,!0),o=Jn.current,o!==null){switch(o.tag){case 13:return Rr===null?Km():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Ym(n,u,f)),!1;case 22:return o.flags|=65536,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Ym(n,u,f)),!1}throw Error(r(435,o.tag))}return Ym(n,u,f),Km(),!1}if(Xe)return i=Jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Hd&&(n=Error(r(422),{cause:u}),Zl(Yn(n,o)))):(u!==Hd&&(i=Error(r(423),{cause:u}),Zl(Yn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Yn(u,o),f=bm(n.stateNode,u,f),tm(n,f),wt!==4&&(wt=2)),!1;var g=Error(r(520),{cause:u});if(g=Yn(g,o),_u===null?_u=[g]:_u.push(g),wt!==4&&(wt=2),i===null)return!0;u=Yn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=bm(o.stateNode,u,n),tm(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&($i===null||!$i.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Tv(f),Av(f,n,o,u),tm(o,f),!1}o=o.return}while(o!==null);return!1}var bv=Error(r(461)),Xt=!1;function an(n,i,o,u){i.child=n===null?dv(i,null,o,u):vo(i,n.child,o,u)}function wv(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return na(i),u=am(n,i,o,E,g,f),A=om(),n!==null&&!Xt?(lm(n,i,f),li(n,i,f)):(Xe&&A&&Fd(i),i.flags|=1,an(n,i,u,f),i.child)}function Sv(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!zd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Rv(n,i,g,u,f)):(n=oh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Vm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Kl,o(E,u)&&n.ref===i.ref)return li(n,i,f)}return i.flags|=1,n=ti(g,u),n.ref=i.ref,n.return=i,i.child=n}function Rv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(Kl(g,u)&&n.ref===i.ref)if(Xt=!1,i.pendingProps=u=g,Vm(n,f))(n.flags&131072)!==0&&(Xt=!0);else return i.lanes=n.lanes,li(n,i,f)}return wm(n,i,o,u,f)}function Iv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return xv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&fh(i,g!==null?g.cachePool:null),g!==null?R_(i,g):rm(),mv(i);else return i.lanes=i.childLanes=536870912,xv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(fh(i,g.cachePool),R_(i,g),ji(),i.memoizedState=null):(n!==null&&fh(i,null),rm(),ji());return an(n,i,f,o),i.child}function xv(n,i,o,u){var f=Zd();return f=f===null?null:{parent:Gt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&fh(i,null),rm(),mv(i),n!==null&&Wl(n,i,u,!0),null}function Dh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function wm(n,i,o,u,f){return na(i),o=am(n,i,o,u,void 0,f),u=om(),n!==null&&!Xt?(lm(n,i,f),li(n,i,f)):(Xe&&u&&Fd(i),i.flags|=1,an(n,i,o,f),i.child)}function Dv(n,i,o,u,f,g){return na(i),i.updateQueue=null,o=x_(i,u,o,f),I_(n),u=om(),n!==null&&!Xt?(lm(n,i,g),li(n,i,g)):(Xe&&u&&Fd(i),i.flags|=1,an(n,i,o,g),i.child)}function Cv(n,i,o,u,f){if(na(i),i.stateNode===null){var g=lo,E=o.contextType;typeof E=="object"&&E!==null&&(g=fn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Am,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Jd(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?fn(E):lo,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Tm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Am.enqueueReplaceState(g,g.state,null),su(i,u,g,f),iu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var A=i.memoizedProps,C=sa(o,A);g.props=C;var G=g.context,J=o.contextType;E=lo,typeof J=="object"&&J!==null&&(E=fn(J));var te=o.getDerivedStateFromProps;J=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||G!==E)&&pv(i,g,u,E),Li=!1;var K=i.memoizedState;g.state=K,su(i,u,g,f),iu(),G=i.memoizedState,A||K!==G||Li?(typeof te=="function"&&(Tm(i,o,te,u),G=i.memoizedState),(C=Li||gv(i,o,C,u,K,G,E))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=G),g.props=u,g.state=G,g.context=E,u=C):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,em(n,i),E=i.memoizedProps,J=sa(o,E),g.props=J,te=i.pendingProps,K=g.context,G=o.contextType,C=lo,typeof G=="object"&&G!==null&&(C=fn(G)),A=o.getDerivedStateFromProps,(G=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==te||K!==C)&&pv(i,g,u,C),Li=!1,K=i.memoizedState,g.state=K,su(i,u,g,f),iu();var Y=i.memoizedState;E!==te||K!==Y||Li||n!==null&&n.dependencies!==null&&ch(n.dependencies)?(typeof A=="function"&&(Tm(i,o,A,u),Y=i.memoizedState),(J=Li||gv(i,o,J,u,K,Y,C)||n!==null&&n.dependencies!==null&&ch(n.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Y,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Y,C)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Y),g.props=u,g.state=Y,g.context=C,u=J):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Dh(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=vo(i,n.child,null,f),i.child=vo(i,null,o,f)):an(n,i,o,f),i.memoizedState=g.state,n=i.child):n=li(n,i,f),n}function Vv(n,i,o,u){return Xl(),i.flags|=256,an(n,i,o,u),i.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:__()}}function Im(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=er),n}function Nv(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Ht.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Xe){if(f?qi(i):ji(),Xe){var A=bt,C;if(C=A){e:{for(C=A,A=Sr;C.nodeType!==8;){if(!A){A=null;break e}if(C=hr(C.nextSibling),C===null){A=null;break e}}A=C}A!==null?(i.memoizedState={dehydrated:A,treeContext:Zs!==null?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},C=kn(18,null,null,0),C.stateNode=A,C.return=i,i.child=C,bn=i,bt=null,C=!0):C=!1}C||ea(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return cg(A)?i.lanes=32:i.lanes=536870912,null;oi(i)}return A=u.children,u=u.fallback,f?(ji(),f=i.mode,A=Ch({mode:"hidden",children:A},f),u=Xs(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=Rm(o),f.childLanes=Im(n,E,o),i.memoizedState=Sm,u):(qi(i),xm(i,A))}if(C=n.memoizedState,C!==null&&(A=C.dehydrated,A!==null)){if(g)i.flags&256?(qi(i),i.flags&=-257,i=Dm(n,i,o)):i.memoizedState!==null?(ji(),i.child=n.child,i.flags|=128,i=null):(ji(),f=u.fallback,A=i.mode,u=Ch({mode:"visible",children:u.children},A),f=Xs(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,vo(i,n.child,null,o),u=i.child,u.memoizedState=Rm(o),u.childLanes=Im(n,E,o),i.memoizedState=Sm,i=f);else if(qi(i),cg(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var G=E.dgst;E=G,u=Error(r(419)),u.stack="",u.digest=E,Zl({value:u,source:null,stack:null}),i=Dm(n,i,o)}else if(Xt||Wl(n,i,o,!1),E=(o&n.childLanes)!==0,Xt||E){if(E=ct,E!==null&&(u=o&-o,u=(u&42)!==0?1:Di(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,oo(n,u),qn(E,n,u),bv;A.data==="$?"||Km(),i=Dm(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,bt=hr(A.nextSibling),bn=i,Xe=!0,Js=null,Sr=!1,n!==null&&(Zn[Wn++]=ni,Zn[Wn++]=ri,Zn[Wn++]=Zs,ni=n.id,ri=n.overflow,Zs=i),i=xm(i,u.children),i.flags|=4096);return i}return f?(ji(),f=u.fallback,A=i.mode,C=n.child,G=C.sibling,u=ti(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,G!==null?f=ti(G,f):(f=Xs(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=n.child.memoizedState,A===null?A=Rm(o):(C=A.cachePool,C!==null?(G=Gt._currentValue,C=C.parent!==G?{parent:G,pool:G}:C):C=__(),A={baseLanes:A.baseLanes|o,cachePool:C}),f.memoizedState=A,f.childLanes=Im(n,E,o),i.memoizedState=Sm,u):(qi(i),o=n.child,n=o.sibling,o=ti(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function xm(n,i){return i=Ch({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Ch(n,i){return n=kn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Dm(n,i,o){return vo(i,n.child,null,o),n=xm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ov(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Kd(n.return,i,o)}function Cm(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function Mv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(an(n,i,u.children,o),u=Ht.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ov(n,o,i);else if(n.tag===19)Ov(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ae(Ht,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Rh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Cm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Rh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Cm(i,!0,o,null,g);break;case"together":Cm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function li(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Ki|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Wl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ti(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ti(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Vm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ch(n)))}function lR(n,i,o){switch(i.tag){case 3:pe(i,i.stateNode.containerInfo),ki(i,Gt,n.memoizedState.cache),Xl();break;case 27:case 5:lt(i);break;case 4:pe(i,i.stateNode.containerInfo);break;case 10:ki(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(qi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Nv(n,i,o):(qi(i),n=li(n,i,o),n!==null?n.sibling:null);qi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Wl(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Mv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(Ht,Ht.current),u)break;return null;case 22:case 23:return i.lanes=0,Iv(n,i,o);case 24:ki(i,Gt,n.memoizedState.cache)}return li(n,i,o)}function Pv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Xt=!0;else{if(!Vm(n,o)&&(i.flags&128)===0)return Xt=!1,lR(n,i,o);Xt=(n.flags&131072)!==0}else Xt=!1,Xe&&(i.flags&1048576)!==0&&h_(i,uh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")zd(u)?(n=sa(u,n),i.tag=1,i=Cv(null,i,u,n,o)):(i.tag=0,i=wm(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===me){i.tag=11,i=wv(null,i,u,n,o);break e}else if(f===V){i.tag=14,i=Sv(null,i,u,n,o);break e}}throw i=ke(u)||u,Error(r(306,i,""))}}return i;case 0:return wm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=sa(u,i.pendingProps),Cv(n,i,u,f,o);case 3:e:{if(pe(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,em(n,i),su(i,u,null,o);var E=i.memoizedState;if(u=E.cache,ki(i,Gt,u),u!==g.cache&&$d(i,[Gt],o,!0),iu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Vv(n,i,u,o);break e}else if(u!==f){f=Yn(Error(r(424)),i),Zl(f),i=Vv(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=hr(n.firstChild),bn=i,Xe=!0,Js=null,Sr=!0,o=dv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Xl(),u===f){i=li(n,i,o);break e}an(n,i,u,o)}i=i.child}return i;case 26:return Dh(n,i),n===null?(o=BE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Xe||(o=i.type,n=i.pendingProps,u=Gh(xe.current).createElement(o),u[qt]=i,u[Ot]=n,ln(u,o,n),Rt(u),i.stateNode=u):i.memoizedState=BE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return lt(i),n===null&&Xe&&(u=i.stateNode=kE(i.type,i.pendingProps,xe.current),bn=i,Sr=!0,f=bt,Zi(i.type)?(hg=f,bt=hr(u.firstChild)):bt=f),an(n,i,i.pendingProps.children,o),Dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Xe&&((f=u=bt)&&(u=kR(u,i.type,i.pendingProps,Sr),u!==null?(i.stateNode=u,bn=i,bt=hr(u.firstChild),Sr=!1,f=!0):f=!1),f||ea(i)),lt(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,og(f,g)?u=null:E!==null&&og(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=am(n,i,eR,null,null,o),Iu._currentValue=f),Dh(n,i),an(n,i,u,o),i.child;case 6:return n===null&&Xe&&((n=o=bt)&&(o=LR(o,i.pendingProps,Sr),o!==null?(i.stateNode=o,bn=i,bt=null,n=!0):n=!1),n||ea(i)),null;case 13:return Nv(n,i,o);case 4:return pe(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=vo(i,null,u,o):an(n,i,u,o),i.child;case 11:return wv(n,i,i.type,i.pendingProps,o);case 7:return an(n,i,i.pendingProps,o),i.child;case 8:return an(n,i,i.pendingProps.children,o),i.child;case 12:return an(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,ki(i,i.type,u.value),an(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,na(i),f=fn(f),u=u(f),i.flags|=1,an(n,i,u,o),i.child;case 14:return Sv(n,i,i.type,i.pendingProps,o);case 15:return Rv(n,i,i.type,i.pendingProps,o);case 19:return Mv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=Ch(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ti(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Iv(n,i,o);case 24:return na(i),u=fn(Gt),n===null?(f=Zd(),f===null&&(f=ct,g=Yd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},Jd(i),ki(i,Gt,f)):((n.lanes&o)!==0&&(em(n,i),su(i,null,null,o),iu()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ki(i,Gt,u)):(u=g.cache,ki(i,Gt,u),u!==f.cache&&$d(i,[Gt],o,!0))),an(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ui(n){n.flags|=4}function kv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!GE(i)){if(i=Jn.current,i!==null&&((He&4194048)===He?Rr!==null:(He&62914560)!==He&&(He&536870912)===0||i!==Rr))throw nu=Wd,v_;n.flags|=8192}}function Vh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Dl():536870912,n.lanes|=i,bo|=i)}function fu(n,i){if(!Xe)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Et(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function uR(n,i,o){var u=i.pendingProps;switch(Gd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(i),null;case 1:return Et(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),si(Gt),Ke(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Yl(i)?ui(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,m_())),Et(i),null;case 26:return o=i.memoizedState,n===null?(ui(i),o!==null?(Et(i),kv(i,o)):(Et(i),i.flags&=-16777217)):o?o!==n.memoizedState?(ui(i),Et(i),kv(i,o)):(Et(i),i.flags&=-16777217):(n.memoizedProps!==u&&ui(i),Et(i),i.flags&=-16777217),null;case 27:ut(i),o=xe.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ui(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Et(i),null}n=be.current,Yl(i)?f_(i):(n=kE(f,u,o),i.stateNode=n,ui(i))}return Et(i),null;case 5:if(ut(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ui(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Et(i),null}if(n=be.current,Yl(i))f_(i);else{switch(f=Gh(xe.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[qt]=i,n[Ot]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(ln(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ui(i)}}return Et(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&ui(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=xe.current,Yl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=bn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[qt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||DE(n.nodeValue,o)),n||ea(i)}else n=Gh(n).createTextNode(u),n[qt]=i,i.stateNode=n}return Et(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Yl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[qt]=i}else Xl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),f=!1}else f=m_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(oi(i),i):(oi(i),null)}if(oi(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Vh(i,i.updateQueue),Et(i),null;case 4:return Ke(),n===null&&ng(i.stateNode.containerInfo),Et(i),null;case 10:return si(i.type),Et(i),null;case 19:if(he(Ht),f=i.memoizedState,f===null)return Et(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)fu(f,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Rh(n),g!==null){for(i.flags|=128,fu(f,!1),n=g.updateQueue,i.updateQueue=n,Vh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)c_(o,n),o=o.sibling;return ae(Ht,Ht.current&1|2),i.child}n=n.sibling}f.tail!==null&&vn()>Mh&&(i.flags|=128,u=!0,fu(f,!1),i.lanes=4194304)}else{if(!u)if(n=Rh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Vh(i,n),fu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Xe)return Et(i),null}else 2*vn()-f.renderingStartTime>Mh&&o!==536870912&&(i.flags|=128,u=!0,fu(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=vn(),i.sibling=null,n=Ht.current,ae(Ht,u?n&1|2:n&1),i):(Et(i),null);case 22:case 23:return oi(i),im(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Et(i),i.subtreeFlags&6&&(i.flags|=8192)):Et(i),o=i.updateQueue,o!==null&&Vh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&he(ra),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),si(Gt),Et(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function cR(n,i){switch(Gd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return si(Gt),Ke(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ut(i),null;case 13:if(oi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Xl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(Ht),null;case 4:return Ke(),null;case 10:return si(i.type),null;case 22:case 23:return oi(i),im(),n!==null&&he(ra),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return si(Gt),null;case 25:return null;default:return null}}function Lv(n,i){switch(Gd(i),i.tag){case 3:si(Gt),Ke();break;case 26:case 27:case 5:ut(i);break;case 4:Ke();break;case 13:oi(i);break;case 19:he(Ht);break;case 10:si(i.type);break;case 22:case 23:oi(i),im(),n!==null&&he(ra);break;case 24:si(Gt)}}function du(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){ot(i,i.return,A)}}function Fi(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var C=o,G=A;try{G()}catch(J){ot(f,C,J)}}}u=u.next}while(u!==g)}}catch(J){ot(i,i.return,J)}}function Uv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{S_(i,o)}catch(u){ot(n,n.return,u)}}}function Bv(n,i,o){o.props=sa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ot(n,i,u)}}function mu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){ot(n,i,f)}}function Ir(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ot(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ot(n,i,f)}else o.current=null}function zv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ot(n,n.return,f)}}function Nm(n,i,o){try{var u=n.stateNode;VR(u,n.type,o,i),u[Ot]=i}catch(f){ot(n,n.return,f)}}function qv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zi(n.type)||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Fh));else if(u!==4&&(u===27&&Zi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Mm(n,i,o),n=n.sibling;n!==null;)Mm(n,i,o),n=n.sibling}function Nh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Zi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Nh(n,i,o),n=n.sibling;n!==null;)Nh(n,i,o),n=n.sibling}function jv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);ln(i,u,o),i[qt]=n,i[Ot]=o}catch(g){ot(n,n.return,g)}}var ci=!1,xt=!1,Pm=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function hR(n,i){if(n=n.containerInfo,sg=Xh,n=e_(n),Od(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,A=-1,C=-1,G=0,J=0,te=n,K=null;t:for(;;){for(var Y;te!==o||f!==0&&te.nodeType!==3||(A=E+f),te!==g||u!==0&&te.nodeType!==3||(C=E+u),te.nodeType===3&&(E+=te.nodeValue.length),(Y=te.firstChild)!==null;)K=te,te=Y;for(;;){if(te===n)break t;if(K===o&&++G===f&&(A=E),K===g&&++J===u&&(C=E),(Y=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=Y}o=A===-1||C===-1?null:{start:A,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ag={focusedElem:n,selectionRange:o},Xh=!1,Zt=i;Zt!==null;)if(i=Zt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Zt=n;else for(;Zt!==null;){switch(i=Zt,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ie=sa(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Ie,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){ot(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)ug(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ug(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Zt=n;break}Zt=i.return}}function Gv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(n,o),u&4&&du(5,o);break;case 1:if(Gi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){ot(o,o.return,E)}else{var f=sa(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ot(o,o.return,E)}}u&64&&Uv(o),u&512&&mu(o,o.return);break;case 3:if(Gi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{S_(n,i)}catch(E){ot(o,o.return,E)}}break;case 27:i===null&&u&4&&jv(o);case 26:case 5:Gi(n,o),i===null&&u&4&&zv(o),u&512&&mu(o,o.return);break;case 12:Gi(n,o);break;case 13:Gi(n,o),u&4&&Kv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=ER.bind(null,o),UR(n,o))));break;case 22:if(u=o.memoizedState!==null||ci,!u){i=i!==null&&i.memoizedState!==null||xt,f=ci;var g=xt;ci=u,(xt=i)&&!g?Hi(n,o,(o.subtreeFlags&8772)!==0):Gi(n,o),ci=f,xt=g}break;case 30:break;default:Gi(n,o)}}function Hv(n){var i=n.alternate;i!==null&&(n.alternate=null,Hv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ni(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,Dn=!1;function hi(n,i,o){for(o=o.child;o!==null;)Qv(n,i,o),o=o.sibling}function Qv(n,i,o){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(dt,o)}catch{}switch(o.tag){case 26:xt||Ir(o,i),hi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xt||Ir(o,i);var u=gt,f=Dn;Zi(o.type)&&(gt=o.stateNode,Dn=!1),hi(n,i,o),bu(o.stateNode),gt=u,Dn=f;break;case 5:xt||Ir(o,i);case 6:if(u=gt,f=Dn,gt=null,hi(n,i,o),gt=u,Dn=f,gt!==null)if(Dn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(o.stateNode)}catch(g){ot(o,i,g)}else try{gt.removeChild(o.stateNode)}catch(g){ot(o,i,g)}break;case 18:gt!==null&&(Dn?(n=gt,ME(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Vu(n)):ME(gt,o.stateNode));break;case 4:u=gt,f=Dn,gt=o.stateNode.containerInfo,Dn=!0,hi(n,i,o),gt=u,Dn=f;break;case 0:case 11:case 14:case 15:xt||Fi(2,o,i),xt||Fi(4,o,i),hi(n,i,o);break;case 1:xt||(Ir(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Bv(o,i,u)),hi(n,i,o);break;case 21:hi(n,i,o);break;case 22:xt=(u=xt)||o.memoizedState!==null,hi(n,i,o),xt=u;break;default:hi(n,i,o)}}function Kv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Vu(n)}catch(o){ot(i,i.return,o)}}function fR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Fv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Fv),i;default:throw Error(r(435,n.tag))}}function km(n,i){var o=fR(n);i.forEach(function(u){var f=TR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Ln(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Zi(A.type)){gt=A.stateNode,Dn=!1;break e}break;case 5:gt=A.stateNode,Dn=!1;break e;case 3:case 4:gt=A.stateNode.containerInfo,Dn=!0;break e}A=A.return}if(gt===null)throw Error(r(160));Qv(g,E,f),gt=null,Dn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)$v(i,n),i=i.sibling}var cr=null;function $v(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ln(i,n),Un(n),u&4&&(Fi(3,n,n.return),du(3,n),Fi(5,n,n.return));break;case 1:Ln(i,n),Un(n),u&512&&(xt||o===null||Ir(o,o.return)),u&64&&ci&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=cr;if(Ln(i,n),Un(n),u&512&&(xt||o===null||Ir(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ms]||g[qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),ln(g,u,o),g[qt]=n,Rt(g),u=g;break e;case"link":var E=jE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}g=f.createElement(u),ln(g,u,o),f.head.appendChild(g);break;case"meta":if(E=jE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}g=f.createElement(u),ln(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[qt]=n,Rt(g),u=g}n.stateNode=u}else FE(f,n.type,n.stateNode);else n.stateNode=qE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?FE(f,n.type,n.stateNode):qE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Ln(i,n),Un(n),u&512&&(xt||o===null||Ir(o,o.return)),o!==null&&u&4&&Nm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Ln(i,n),Un(n),u&512&&(xt||o===null||Ir(o,o.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(Y){ot(n,n.return,Y)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Nm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Pm=!0);break;case 6:if(Ln(i,n),Un(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Y){ot(n,n.return,Y)}}break;case 3:if(Kh=null,f=cr,cr=Hh(i.containerInfo),Ln(i,n),cr=f,Un(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Vu(i.containerInfo)}catch(Y){ot(n,n.return,Y)}Pm&&(Pm=!1,Yv(n));break;case 4:u=cr,cr=Hh(n.stateNode.containerInfo),Ln(i,n),Un(n),cr=u;break;case 12:Ln(i,n),Un(n);break;case 13:Ln(i,n),Un(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=vn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,km(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,G=ci,J=xt;if(ci=G||f,xt=J||C,Ln(i,n),xt=J,ci=G,Un(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||C||ci||xt||aa(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){C=o=i;try{if(g=C.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=C.stateNode;var te=C.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Y){ot(C,C.return,Y)}}}else if(i.tag===6){if(o===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(Y){ot(C,C.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,km(n,o))));break;case 19:Ln(i,n),Un(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,km(n,u)));break;case 30:break;case 21:break;default:Ln(i,n),Un(n)}}function Un(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(qv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Om(n);Nh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Hn(E,""),o.flags&=-33);var A=Om(n);Nh(n,A,E);break;case 3:case 4:var C=o.stateNode.containerInfo,G=Om(n);Mm(n,G,C);break;default:throw Error(r(161))}}catch(J){ot(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Yv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Gi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Gv(n,i.alternate,i),i=i.sibling}function aa(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Fi(4,i,i.return),aa(i);break;case 1:Ir(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Bv(i,i.return,o),aa(i);break;case 27:bu(i.stateNode);case 26:case 5:Ir(i,i.return),aa(i);break;case 22:i.memoizedState===null&&aa(i);break;case 30:aa(i);break;default:aa(i)}n=n.sibling}}function Hi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Hi(f,g,o),du(4,g);break;case 1:if(Hi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ot(u,u.return,G)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)w_(C[f],A)}catch(G){ot(u,u.return,G)}}o&&E&64&&Uv(g),mu(g,g.return);break;case 27:jv(g);case 26:case 5:Hi(f,g,o),o&&u===null&&E&4&&zv(g),mu(g,g.return);break;case 12:Hi(f,g,o);break;case 13:Hi(f,g,o),o&&E&4&&Kv(f,g);break;case 22:g.memoizedState===null&&Hi(f,g,o),mu(g,g.return);break;case 30:break;default:Hi(f,g,o)}i=i.sibling}}function Lm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Jl(o))}function Um(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Jl(n))}function xr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xv(n,i,o,u),i=i.sibling}function Xv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:xr(n,i,o,u),f&2048&&du(9,i);break;case 1:xr(n,i,o,u);break;case 3:xr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Jl(n)));break;case 12:if(f&2048){xr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){ot(i,i.return,C)}}else xr(n,i,o,u);break;case 13:xr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?xr(n,i,o,u):gu(n,i):g._visibility&2?xr(n,i,o,u):(g._visibility|=2,Eo(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Lm(E,i);break;case 24:xr(n,i,o,u),f&2048&&Um(i.alternate,i);break;default:xr(n,i,o,u)}}function Eo(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,A=o,C=u,G=E.flags;switch(E.tag){case 0:case 11:case 15:Eo(g,E,A,C,f),du(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?Eo(g,E,A,C,f):gu(g,E):(J._visibility|=2,Eo(g,E,A,C,f)),f&&G&2048&&Lm(E.alternate,E);break;case 24:Eo(g,E,A,C,f),f&&G&2048&&Um(E.alternate,E);break;default:Eo(g,E,A,C,f)}i=i.sibling}}function gu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:gu(o,u),f&2048&&Lm(u.alternate,u);break;case 24:gu(o,u),f&2048&&Um(u.alternate,u);break;default:gu(o,u)}i=i.sibling}}var pu=8192;function To(n){if(n.subtreeFlags&pu)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 26:To(n),n.flags&pu&&n.memoizedState!==null&&ZR(cr,n.memoizedState,n.memoizedProps);break;case 5:To(n);break;case 3:case 4:var i=cr;cr=Hh(n.stateNode.containerInfo),To(n),cr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=pu,pu=16777216,To(n),pu=i):To(n));break;default:To(n)}}function Wv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function yu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Zt=u,eE(u,n)}Wv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jv(n),n=n.sibling}function Jv(n){switch(n.tag){case 0:case 11:case 15:yu(n),n.flags&2048&&Fi(9,n,n.return);break;case 3:yu(n);break;case 12:yu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Oh(n)):yu(n);break;default:yu(n)}}function Oh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Zt=u,eE(u,n)}Wv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Fi(8,i,i.return),Oh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Oh(i));break;default:Oh(i)}n=n.sibling}}function eE(n,i){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:Fi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Zt=u;else e:for(o=n;Zt!==null;){u=Zt;var f=u.sibling,g=u.return;if(Hv(u),u===o){Zt=null;break e}if(f!==null){f.return=g,Zt=f;break e}Zt=g}}}var dR={getCacheForType:function(n){var i=fn(Gt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},mR=typeof WeakMap=="function"?WeakMap:Map,Je=0,ct=null,Le=null,He=0,et=0,Bn=null,Qi=!1,Ao=!1,Bm=!1,fi=0,wt=0,Ki=0,oa=0,zm=0,er=0,bo=0,_u=null,Cn=null,qm=!1,jm=0,Mh=1/0,Ph=null,$i=null,on=0,Yi=null,wo=null,So=0,Fm=0,Gm=null,tE=null,vu=0,Hm=null;function zn(){if((Je&2)!==0&&He!==0)return He&-He;if($.T!==null){var n=ho;return n!==0?n:Wm()}return Ci()}function nE(){er===0&&(er=(He&536870912)===0||Xe?xl():536870912);var n=Jn.current;return n!==null&&(n.flags|=32),er}function qn(n,i,o){(n===ct&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(Ro(n,0),Xi(n,He,er,!1)),Gr(n,o),((Je&2)===0||n!==ct)&&(n===ct&&((Je&2)===0&&(oa|=o),wt===4&&Xi(n,He,er,!1)),Dr(n))}function rE(n,i,o){if((Je&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Os(n,i),f=u?yR(n,i):$m(n,i,!0),g=u;do{if(f===0){Ao&&!u&&Xi(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!gR(o)){f=$m(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=n;f=_u;var C=A.current.memoizedState.isDehydrated;if(C&&(Ro(A,E).flags|=256),E=$m(A,E,!1),E!==2){if(Bm&&!C){A.errorRecoveryDisabledLanes|=g,oa|=g,f=4;break e}g=Cn,Cn=f,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Ro(n,0),Xi(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Xi(u,i,er,!Qi);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=jm+300-vn(),10<f)){if(Xi(u,i,er,!Qi),ja(u,0,!0)!==0)break e;u.timeoutHandle=NE(iE.bind(null,u,o,Cn,Ph,qm,i,er,oa,bo,Qi,g,2,-0,0),f);break e}iE(u,o,Cn,Ph,qm,i,er,oa,bo,Qi,g,0,-0,0)}}break}while(!0);Dr(n)}function iE(n,i,o,u,f,g,E,A,C,G,J,te,K,Y){if(n.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:XR},Zv(i),te=WR(),te!==null)){n.cancelPendingCommit=te(hE.bind(null,n,i,g,o,u,f,E,A,C,J,1,K,Y)),Xi(n,g,E,!G);return}hE(n,i,g,o,u,f,E,A,C)}function gR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Pn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xi(n,i,o,u){i&=~zm,i&=~oa,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-zt(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&mr(n,o,i)}function kh(){return(Je&6)===0?(Eu(0),!1):!0}function Qm(){if(Le!==null){if(et===0)var n=Le.return;else n=Le,ii=ta=null,um(n),_o=null,cu=0,n=Le;for(;n!==null;)Lv(n.alternate,n),n=n.return;Le=null}}function Ro(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,OR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Qm(),ct=n,Le=o=ti(n.current,null),He=i,et=0,Bn=null,Qi=!1,Ao=Os(n,i),Bm=!1,bo=er=zm=oa=Ki=wt=0,Cn=_u=null,qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-zt(u),g=1<<f;i|=n[f],u&=~g}return fi=i,ih(),o}function sE(n,i){Oe=null,$.H=bh,i===tu||i===dh?(i=A_(),et=3):i===v_?(i=A_(),et=4):et=i===bv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,Le===null&&(wt=1,xh(n,Yn(i,n.current)))}function aE(){var n=$.H;return $.H=bh,n===null?bh:n}function oE(){var n=$.A;return $.A=dR,n}function Km(){wt=4,Qi||(He&4194048)!==He&&Jn.current!==null||(Ao=!0),(Ki&134217727)===0&&(oa&134217727)===0||ct===null||Xi(ct,He,er,!1)}function $m(n,i,o){var u=Je;Je|=2;var f=aE(),g=oE();(ct!==n||He!==i)&&(Ph=null,Ro(n,i)),i=!1;var E=wt;e:do try{if(et!==0&&Le!==null){var A=Le,C=Bn;switch(et){case 8:Qm(),E=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(i=!0);var G=et;if(et=0,Bn=null,Io(n,A,C,G),o&&Ao){E=0;break e}break;default:G=et,et=0,Bn=null,Io(n,A,C,G)}}pR(),E=wt;break}catch(J){sE(n,J)}while(!0);return i&&n.shellSuspendCounter++,ii=ta=null,Je=u,$.H=f,$.A=g,Le===null&&(ct=null,He=0,ih()),E}function pR(){for(;Le!==null;)lE(Le)}function yR(n,i){var o=Je;Je|=2;var u=aE(),f=oE();ct!==n||He!==i?(Ph=null,Mh=vn()+500,Ro(n,i)):Ao=Os(n,i);e:do try{if(et!==0&&Le!==null){i=Le;var g=Bn;t:switch(et){case 1:et=0,Bn=null,Io(n,i,g,1);break;case 2:case 9:if(E_(g)){et=0,Bn=null,uE(i);break}i=function(){et!==2&&et!==9||ct!==n||(et=7),Dr(n)},g.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:E_(g)?(et=0,Bn=null,uE(i)):(et=0,Bn=null,Io(n,i,g,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var A=Le;if(!E||GE(E)){et=0,Bn=null;var C=A.sibling;if(C!==null)Le=C;else{var G=A.return;G!==null?(Le=G,Lh(G)):Le=null}break t}}et=0,Bn=null,Io(n,i,g,5);break;case 6:et=0,Bn=null,Io(n,i,g,6);break;case 8:Qm(),wt=6;break e;default:throw Error(r(462))}}_R();break}catch(J){sE(n,J)}while(!0);return ii=ta=null,$.H=u,$.A=f,Je=o,Le!==null?0:(ct=null,He=0,ih(),wt)}function _R(){for(;Le!==null&&!Nt();)lE(Le)}function lE(n){var i=Pv(n.alternate,n,fi);n.memoizedProps=n.pendingProps,i===null?Lh(n):Le=i}function uE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Dv(o,i,i.pendingProps,i.type,void 0,He);break;case 11:i=Dv(o,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:um(i);default:Lv(o,i),i=Le=c_(i,fi),i=Pv(o,i,fi)}n.memoizedProps=n.pendingProps,i===null?Lh(n):Le=i}function Io(n,i,o,u){ii=ta=null,um(i),_o=null,cu=0;var f=i.return;try{if(oR(n,f,i,o,He)){wt=1,xh(n,Yn(o,n.current)),Le=null;return}}catch(g){if(f!==null)throw Le=f,g;wt=1,xh(n,Yn(o,n.current)),Le=null;return}i.flags&32768?(Xe||u===1?n=!0:Ao||(He&536870912)!==0?n=!1:(Qi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Jn.current,u!==null&&u.tag===13&&(u.flags|=16384))),cE(i,n)):Lh(i)}function Lh(n){var i=n;do{if((i.flags&32768)!==0){cE(i,Qi);return}n=i.return;var o=uR(i.alternate,i,fi);if(o!==null){Le=o;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=n}while(i!==null);wt===0&&(wt=5)}function cE(n,i){do{var o=cR(n.alternate,n);if(o!==null){o.flags&=32767,Le=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Le=n;return}Le=n=o}while(n!==null);wt=6,Le=null}function hE(n,i,o,u,f,g,E,A,C){n.cancelPendingCommit=null;do Uh();while(on!==0);if((Je&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Ud,Cl(n,o,g,E,A,C),n===ct&&(Le=ct=null,He=0),wo=i,Yi=n,So=o,Fm=g,Gm=f,tE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AR(ir,function(){return pE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,f=ue.p,ue.p=2,E=Je,Je|=4;try{hR(n,i,o)}finally{Je=E,ue.p=f,$.T=u}}on=1,fE(),dE(),mE()}}function fE(){if(on===1){on=0;var n=Yi,i=wo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var f=Je;Je|=4;try{$v(i,n);var g=ag,E=e_(n.containerInfo),A=g.focusedElem,C=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Jy(A.ownerDocument.documentElement,A)){if(C!==null&&Od(A)){var G=C.start,J=C.end;if(J===void 0&&(J=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(J,A.value.length);else{var te=A.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var Y=K.getSelection(),Ie=A.textContent.length,we=Math.min(C.start,Ie),at=C.end===void 0?we:Math.min(C.end,Ie);!Y.extend&&we>at&&(E=at,at=we,we=E);var B=Wy(A,we),M=Wy(A,at);if(B&&M&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var F=te.createRange();F.setStart(B.node,B.offset),Y.removeAllRanges(),we>at?(Y.addRange(F),Y.extend(M.node,M.offset)):(F.setEnd(M.node,M.offset),Y.addRange(F))}}}}for(te=[],Y=A;Y=Y.parentNode;)Y.nodeType===1&&te.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<te.length;A++){var ee=te[A];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Xh=!!sg,ag=sg=null}finally{Je=f,ue.p=u,$.T=o}}n.current=i,on=2}}function dE(){if(on===2){on=0;var n=Yi,i=wo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var f=Je;Je|=4;try{Gv(n,i.alternate,i)}finally{Je=f,ue.p=u,$.T=o}}on=3}}function mE(){if(on===4||on===3){on=0,Ba();var n=Yi,i=wo,o=So,u=tE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?on=5:(on=0,wo=Yi=null,gE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&($i=null),Fa(o),i=i.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(dt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=$.T,f=ue.p,ue.p=2,$.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{$.T=i,ue.p=f}}(So&3)!==0&&Uh(),Dr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Hm?vu++:(vu=0,Hm=n):vu=0,Eu(0)}}function gE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Jl(i)))}function Uh(n){return fE(),dE(),mE(),pE()}function pE(){if(on!==5)return!1;var n=Yi,i=Fm;Fm=0;var o=Fa(So),u=$.T,f=ue.p;try{ue.p=32>o?32:o,$.T=null,o=Gm,Gm=null;var g=Yi,E=So;if(on=0,wo=Yi=null,So=0,(Je&6)!==0)throw Error(r(331));var A=Je;if(Je|=4,Jv(g.current),Xv(g,g.current,E,o),Je=A,Eu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(dt,g)}catch{}return!0}finally{ue.p=f,$.T=u,gE(n,i)}}function yE(n,i,o){i=Yn(o,i),i=bm(n.stateNode,i,2),n=Bi(n,i,2),n!==null&&(Gr(n,2),Dr(n))}function ot(n,i,o){if(n.tag===3)yE(n,n,o);else for(;i!==null;){if(i.tag===3){yE(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($i===null||!$i.has(u))){n=Yn(o,n),o=Tv(2),u=Bi(i,o,2),u!==null&&(Av(o,u,i,n),Gr(u,2),Dr(u));break}}i=i.return}}function Ym(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new mR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Bm=!0,f.add(o),n=vR.bind(null,n,i,o),i.then(n,n))}function vR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ct===n&&(He&o)===o&&(wt===4||wt===3&&(He&62914560)===He&&300>vn()-jm?(Je&2)===0&&Ro(n,0):zm|=o,bo===He&&(bo=0)),Dr(n)}function _E(n,i){i===0&&(i=Dl()),n=oo(n,i),n!==null&&(Gr(n,i),Dr(n))}function ER(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),_E(n,o)}function TR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),_E(n,o)}function AR(n,i){return Bt(n,i)}var Bh=null,xo=null,Xm=!1,zh=!1,Zm=!1,la=0;function Dr(n){n!==xo&&n.next===null&&(xo===null?Bh=xo=n:xo=xo.next=n),zh=!0,Xm||(Xm=!0,wR())}function Eu(n,i){if(!Zm&&zh){Zm=!0;do for(var o=!1,u=Bh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-zt(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,AE(u,g))}else g=He,g=ja(u,u===ct?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Os(u,g)||(o=!0,AE(u,g));u=u.next}while(o);Zm=!1}}function bR(){vE()}function vE(){zh=Xm=!1;var n=0;la!==0&&(NR()&&(n=la),la=0);for(var i=vn(),o=null,u=Bh;u!==null;){var f=u.next,g=EE(u,i);g===0?(u.next=null,o===null?Bh=f:o.next=f,f===null&&(xo=o)):(o=u,(n!==0||(g&3)!==0)&&(zh=!0)),u=f}Eu(n)}function EE(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-zt(g),A=1<<E,C=f[E];C===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Il(A,i)):C<=i&&(n.expiredLanes|=A),g&=~A}if(i=ct,o=He,o=ja(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(et===2||et===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&_n(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Os(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&_n(u),Fa(o)){case 2:case 8:o=qr;break;case 32:o=ir;break;case 268435456:o=dr;break;default:o=ir}return u=TE.bind(null,n),o=Bt(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&_n(u),n.callbackPriority=2,n.callbackNode=null,2}function TE(n,i){if(on!==0&&on!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Uh()&&n.callbackNode!==o)return null;var u=He;return u=ja(n,n===ct?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(rE(n,u,i),EE(n,vn()),n.callbackNode!=null&&n.callbackNode===o?TE.bind(null,n):null)}function AE(n,i){if(Uh())return null;rE(n,i,!0)}function wR(){MR(function(){(Je&6)!==0?Bt(Ii,bR):vE()})}function Wm(){return la===0&&(la=xl()),la}function bE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ya(""+n)}function wE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function SR(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=bE((f[Ot]||null).action),E=u.submitter;E&&(i=(i=E[Ot]||null)?bE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new Xa("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(la!==0){var C=E?wE(f,E):new FormData(f);_m(o,{pending:!0,data:C,method:f.method,action:g},null,C)}}else typeof g=="function"&&(A.preventDefault(),C=E?wE(f,E):new FormData(f),_m(o,{pending:!0,data:C,method:f.method,action:g},g,C))},currentTarget:f}]})}}for(var Jm=0;Jm<Ld.length;Jm++){var eg=Ld[Jm],RR=eg.toLowerCase(),IR=eg[0].toUpperCase()+eg.slice(1);ur(RR,"on"+IR)}ur(r_,"onAnimationEnd"),ur(i_,"onAnimationIteration"),ur(s_,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(GS,"onTransitionRun"),ur(HS,"onTransitionStart"),ur(QS,"onTransitionCancel"),ur(a_,"onTransitionEnd"),Qr("onMouseEnter",["mouseout","mouseover"]),Qr("onMouseLeave",["mouseout","mouseover"]),Qr("onPointerEnter",["pointerout","pointerover"]),Qr("onPointerLeave",["pointerout","pointerover"]),or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),or("onBeforeInput",["compositionend","keypress","textInput","paste"]),or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tu));function SE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],C=A.instance,G=A.currentTarget;if(A=A.listener,C!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=G;try{g(f)}catch(J){Ih(J)}f.currentTarget=null,g=C}else for(E=0;E<u.length;E++){if(A=u[E],C=A.instance,G=A.currentTarget,A=A.listener,C!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=G;try{g(f)}catch(J){Ih(J)}f.currentTarget=null,g=C}}}}function Ue(n,i){var o=i[Nl];o===void 0&&(o=i[Nl]=new Set);var u=n+"__bubble";o.has(u)||(RE(i,n,2,!1),o.add(u))}function tg(n,i,o){var u=0;i&&(u|=4),RE(o,n,u,i)}var qh="_reactListening"+Math.random().toString(36).slice(2);function ng(n){if(!n[qh]){n[qh]=!0,Ol.forEach(function(o){o!=="selectionchange"&&(xR.has(o)||tg(o,!1,n),tg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[qh]||(i[qh]=!0,tg("selectionchange",!1,i))}}function RE(n,i,o,u){switch(XE(i)){case 2:var f=tI;break;case 8:f=nI;break;default:f=pg}o=f.bind(null,i,o,n),f=void 0,!Kn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function rg(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Hr(A),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=g=E;continue e}A=A.parentNode}}u=u.return}Fc(function(){var G=g,J=Qn(o),te=[];e:{var K=o_.get(n);if(K!==void 0){var Y=Xa,Ie=n;switch(n){case"keypress":if(Er(o)===0)break e;case"keydown":case"keyup":Y=no;break;case"focusin":Ie="focus",Y=Ja;break;case"focusout":Ie="blur",Y=Ja;break;case"beforeblur":case"afterblur":Y=Ja;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Zc;break;case r_:case i_:case s_:Y=eo;break;case a_:Y=Jc;break;case"scroll":case"scrollend":Y=Gc;break;case"wheel":Y=ro;break;case"copy":case"cut":case"paste":Y=to;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Hl;break;case"toggle":case"beforetoggle":Y=th}var we=(i&4)!==0,at=!we&&(n==="scroll"||n==="scrollend"),B=we?K!==null?K+"Capture":null:K;we=[];for(var M=G,F;M!==null;){var ee=M;if(F=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||F===null||B===null||(ee=qs(M,B),ee!=null&&we.push(Au(M,ee,F))),at)break;M=M.return}0<we.length&&(K=new Y(K,Ie,null,o,J),te.push({event:K,listeners:we}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",K&&o!==Yr&&(Ie=o.relatedTarget||o.fromElement)&&(Hr(Ie)||Ie[Gn]))break e;if((Y||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(Ie=o.relatedTarget||o.toElement,Y=G,Ie=Ie?Hr(Ie):null,Ie!==null&&(at=l(Ie),we=Ie.tag,Ie!==at||we!==5&&we!==27&&we!==6)&&(Ie=null)):(Y=null,Ie=G),Y!==Ie)){if(we=$n,ee="onMouseLeave",B="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(we=Hl,ee="onPointerLeave",B="onPointerEnter",M="pointer"),at=Y==null?K:pr(Y),F=Ie==null?K:pr(Ie),K=new we(ee,M+"leave",Y,o,J),K.target=at,K.relatedTarget=F,ee=null,Hr(J)===G&&(we=new we(B,M+"enter",Ie,o,J),we.target=F,we.relatedTarget=at,ee=we),at=ee,Y&&Ie)t:{for(we=Y,B=Ie,M=0,F=we;F;F=Do(F))M++;for(F=0,ee=B;ee;ee=Do(ee))F++;for(;0<M-F;)we=Do(we),M--;for(;0<F-M;)B=Do(B),F--;for(;M--;){if(we===B||B!==null&&we===B.alternate)break t;we=Do(we),B=Do(B)}we=null}else we=null;Y!==null&&IE(te,K,Y,we,!1),Ie!==null&&at!==null&&IE(te,at,Ie,we,!0)}}e:{if(K=G?pr(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var ye=Qy;else if(Ft(K))if(Ky)ye=qS;else{ye=BS;var Pe=US}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Ul(G.elementType)&&(ye=Qy):ye=zS;if(ye&&(ye=ye(n,G))){ei(te,ye,o,J);break e}Pe&&Pe(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Mi(K,"number",K.value)}switch(Pe=G?pr(G):window,n){case"focusin":(Ft(Pe)||Pe.contentEditable==="true")&&(io=Pe,Md=G,$l=null);break;case"focusout":$l=Md=io=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,t_(te,o,J);break;case"selectionchange":if(FS)break;case"keydown":case"keyup":t_(te,o,J)}var Ae;if(br)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?Z(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(v&&o.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(Ae=zl()):(vr=J,Pi="value"in vr?vr.value:vr.textContent,Fe=!0)),Pe=jh(G,Se),0<Pe.length&&(Se=new Fl(Se,n,null,o,J),te.push({event:Se,listeners:Pe}),Ae?Se.data=Ae:(Ae=oe(o),Ae!==null&&(Se.data=Ae)))),(Ae=y?jt(n,o):Ge(n,o))&&(Se=jh(G,"onBeforeInput"),0<Se.length&&(Pe=new Fl("onBeforeInput","beforeinput",null,o,J),te.push({event:Pe,listeners:Se}),Pe.data=Ae)),SR(te,n,G,o,J)}SE(te,i)})}function Au(n,i,o){return{instance:n,listener:i,currentTarget:o}}function jh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=qs(n,o),f!=null&&u.unshift(Au(n,f,g)),f=qs(n,i),f!=null&&u.push(Au(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Do(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function IE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var A=o,C=A.alternate,G=A.stateNode;if(A=A.tag,C!==null&&C===u)break;A!==5&&A!==26&&A!==27||G===null||(C=G,f?(G=qs(o,g),G!=null&&E.unshift(Au(o,G,C))):f||(G=qs(o,g),G!=null&&E.push(Au(o,G,C)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var DR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function xE(n){return(typeof n=="string"?n:""+n).replace(DR,`
`).replace(CR,"")}function DE(n,i){return i=xE(i),xE(n)===i}function Fh(){}function st(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Hn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Hn(n,""+u);break;case"className":yr(n,"class",u);break;case"tabIndex":yr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(n,o,u);break;case"style":Ll(n,u,g);break;case"data":if(i!=="object"){yr(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ya(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&st(n,i,"name",f.name,f,null),st(n,i,"formEncType",f.formEncType,f,null),st(n,i,"formMethod",f.formMethod,f,null),st(n,i,"formTarget",f.formTarget,f,null)):(st(n,i,"encType",f.encType,f,null),st(n,i,"method",f.method,f,null),st(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ya(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Fh);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ya(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),Oi(n,"popover",u);break;case"xlinkActuate":rn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":rn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":rn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":rn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":rn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":rn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":rn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":rn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":rn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Oi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Id.get(o)||o,Oi(n,o,u))}}function ig(n,i,o,u,f,g){switch(o){case"style":Ll(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Hn(n,u):(typeof u=="number"||typeof u=="bigint")&&Hn(n,""+u);break;case"onScroll":u!=null&&Ue("scroll",n);break;case"onScrollEnd":u!=null&&Ue("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ga.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[Ot]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Oi(n,o,u)}}}function ln(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(n,i,g,E,o,null)}}f&&st(n,i,"srcSet",o.srcSet,o,null),u&&st(n,i,"src",o.src,o,null);return;case"input":Ue("invalid",n);var A=g=E=f=null,C=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":E=J;break;case"checked":C=J;break;case"defaultChecked":G=J;break;case"value":g=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:st(n,i,u,J,o,null)}}Us(n,g,A,C,G,E,f,!1),$a(n);return;case"select":Ue("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:st(n,i,f,A,o,null)}i=g,o=E,n.multiple=!!u,i!=null?$r(n,!!u,i,!1):o!=null&&$r(n,!!u,o,!0);return;case"textarea":Ue("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:st(n,i,E,A,o,null)}Bs(n,u,f,g),$a(n);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(n,i,C,u,o,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(u=0;u<Tu.length;u++)Ue(Tu[u],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(n,i,G,u,o,null)}return;default:if(Ul(i)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&ig(n,i,J,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&st(n,i,A,u,o,null))}function VR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,C=null,G=null,J=null;for(Y in o){var te=o[Y];if(o.hasOwnProperty(Y)&&te!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":C=te;default:u.hasOwnProperty(Y)||st(n,i,Y,null,u,te)}}for(var K in u){var Y=u[K];if(te=o[K],u.hasOwnProperty(K)&&(Y!=null||te!=null))switch(K){case"type":g=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":J=Y;break;case"value":E=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==te&&st(n,i,K,Y,u,te)}}Mn(n,E,A,C,G,J,g,f);return;case"select":Y=E=A=K=null;for(g in o)if(C=o[g],o.hasOwnProperty(g)&&C!=null)switch(g){case"value":break;case"multiple":Y=C;default:u.hasOwnProperty(g)||st(n,i,g,null,u,C)}for(f in u)if(g=u[f],C=o[f],u.hasOwnProperty(f)&&(g!=null||C!=null))switch(f){case"value":K=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==C&&st(n,i,f,g,u,C)}i=A,o=E,u=Y,K!=null?$r(n,!!o,K,!1):!!u!=!!o&&(i!=null?$r(n,!!o,i,!0):$r(n,!!o,o?[]:"",!1));return;case"textarea":Y=K=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:st(n,i,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":K=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&st(n,i,E,f,u,g)}rt(n,K,Y);return;case"option":for(var Ie in o)if(K=o[Ie],o.hasOwnProperty(Ie)&&K!=null&&!u.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:st(n,i,Ie,null,u,K)}for(C in u)if(K=u[C],Y=o[C],u.hasOwnProperty(C)&&K!==Y&&(K!=null||Y!=null))switch(C){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:st(n,i,C,K,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)K=o[we],o.hasOwnProperty(we)&&K!=null&&!u.hasOwnProperty(we)&&st(n,i,we,null,u,K);for(G in u)if(K=u[G],Y=o[G],u.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:st(n,i,G,K,u,Y)}return;default:if(Ul(i)){for(var at in o)K=o[at],o.hasOwnProperty(at)&&K!==void 0&&!u.hasOwnProperty(at)&&ig(n,i,at,void 0,u,K);for(J in u)K=u[J],Y=o[J],!u.hasOwnProperty(J)||K===Y||K===void 0&&Y===void 0||ig(n,i,J,K,u,Y);return}}for(var B in o)K=o[B],o.hasOwnProperty(B)&&K!=null&&!u.hasOwnProperty(B)&&st(n,i,B,null,u,K);for(te in u)K=u[te],Y=o[te],!u.hasOwnProperty(te)||K===Y||K==null&&Y==null||st(n,i,te,K,u,Y)}var sg=null,ag=null;function Gh(n){return n.nodeType===9?n:n.ownerDocument}function CE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function og(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lg=null;function NR(){var n=window.event;return n&&n.type==="popstate"?n===lg?!1:(lg=n,!0):(lg=null,!1)}var NE=typeof setTimeout=="function"?setTimeout:void 0,OR=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,MR=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(n){return OE.resolve(null).then(n).catch(PR)}:NE;function PR(n){setTimeout(function(){throw n})}function Zi(n){return n==="head"}function ME(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&bu(E.documentElement),o&2&&bu(E.body),o&4)for(o=E.head,bu(o),E=o.firstChild;E;){var A=E.nextSibling,C=E.nodeName;E[Ms]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),Vu(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Vu(i)}function ug(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ug(o),Ni(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function kR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ms])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=hr(n.nextSibling),n===null)break}return null}function LR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=hr(n.nextSibling),n===null))return null;return n}function cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function UR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function hr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var hg=null;function PE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function kE(n,i,o){switch(i=Gh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function bu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ni(n)}var tr=new Map,LE=new Set;function Hh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var di=ue.d;ue.d={f:BR,r:zR,D:qR,C:jR,L:FR,m:GR,X:QR,S:HR,M:KR};function BR(){var n=di.f(),i=kh();return n||i}function zR(n){var i=gr(n);i!==null&&i.tag===5&&i.type==="form"?rv(i):di.r(n)}var Co=typeof document>"u"?null:document;function UE(n,i,o){var u=Co;if(u&&typeof i=="string"&&i){var f=Mt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),LE.has(f)||(LE.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),ln(i,"link",n),Rt(i),u.head.appendChild(i)))}}function qR(n){di.D(n),UE("dns-prefetch",n,null)}function jR(n,i){di.C(n,i),UE("preconnect",n,i)}function FR(n,i,o){di.L(n,i,o);var u=Co;if(u&&n&&i){var f='link[rel="preload"][as="'+Mt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Mt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Mt(o.imageSizes)+'"]')):f+='[href="'+Mt(n)+'"]';var g=f;switch(i){case"style":g=Vo(n);break;case"script":g=No(n)}tr.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),tr.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(wu(g))||i==="script"&&u.querySelector(Su(g))||(i=u.createElement("link"),ln(i,"link",n),Rt(i),u.head.appendChild(i)))}}function GR(n,i){di.m(n,i);var o=Co;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Mt(u)+'"][href="'+Mt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=No(n)}if(!tr.has(g)&&(n=_({rel:"modulepreload",href:n},i),tr.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Su(g)))return}u=o.createElement("link"),ln(u,"link",n),Rt(u),o.head.appendChild(u)}}}function HR(n,i,o){di.S(n,i,o);var u=Co;if(u&&n){var f=En(u).hoistableStyles,g=Vo(n);i=i||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(wu(g)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=tr.get(g))&&fg(n,o);var C=E=u.createElement("link");Rt(C),ln(C,"link",n),C._p=new Promise(function(G,J){C.onload=G,C.onerror=J}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Qh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function QR(n,i){di.X(n,i);var o=Co;if(o&&n){var u=En(o).hoistableScripts,f=No(n),g=u.get(f);g||(g=o.querySelector(Su(f)),g||(n=_({src:n,async:!0},i),(i=tr.get(f))&&dg(n,i),g=o.createElement("script"),Rt(g),ln(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function KR(n,i){di.M(n,i);var o=Co;if(o&&n){var u=En(o).hoistableScripts,f=No(n),g=u.get(f);g||(g=o.querySelector(Su(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=tr.get(f))&&dg(n,i),g=o.createElement("script"),Rt(g),ln(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function BE(n,i,o,u){var f=(f=xe.current)?Hh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Vo(o.href),o=En(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Vo(o.href);var g=En(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(wu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),tr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},tr.set(n,o),g||$R(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=No(o),o=En(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Vo(n){return'href="'+Mt(n)+'"'}function wu(n){return'link[rel="stylesheet"]['+n+"]"}function zE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function $R(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),ln(i,"link",o),Rt(i),n.head.appendChild(i))}function No(n){return'[src="'+Mt(n)+'"]'}function Su(n){return"script[async]"+n}function qE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Mt(o.href)+'"]');if(u)return i.instance=u,Rt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Rt(u),ln(u,"style",f),Qh(u,o.precedence,n),i.instance=u;case"stylesheet":f=Vo(o.href);var g=n.querySelector(wu(f));if(g)return i.state.loading|=4,i.instance=g,Rt(g),g;u=zE(o),(f=tr.get(f))&&fg(u,f),g=(n.ownerDocument||n).createElement("link"),Rt(g);var E=g;return E._p=new Promise(function(A,C){E.onload=A,E.onerror=C}),ln(g,"link",u),i.state.loading|=4,Qh(g,o.precedence,n),i.instance=g;case"script":return g=No(o.src),(f=n.querySelector(Su(g)))?(i.instance=f,Rt(f),f):(u=o,(f=tr.get(g))&&(u=_({},o),dg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),ln(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Qh(u,o.precedence,n));return i.instance}function Qh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function fg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Kh=null;function jE(n,i,o){if(Kh===null){var u=new Map,f=Kh=new Map;f.set(o,u)}else f=Kh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ms]||g[qt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function FE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function YR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function GE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ru=null;function XR(){}function ZR(n,i,o){if(Ru===null)throw Error(r(475));var u=Ru;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Vo(o.href),g=n.querySelector(wu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=$h.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,Rt(g);return}g=n.ownerDocument||n,o=zE(o),(f=tr.get(f))&&fg(o,f),g=g.createElement("link"),Rt(g);var E=g;E._p=new Promise(function(A,C){E.onload=A,E.onerror=C}),ln(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=$h.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function WR(){if(Ru===null)throw Error(r(475));var n=Ru;return n.stylesheets&&n.count===0&&mg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&mg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)mg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yh=null;function mg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yh=new Map,i.forEach(JR,n),Yh=null,$h.call(n))}function JR(n,i){if(!(i.state.loading&4)){var o=Yh.get(n);if(o)var u=o.get(null);else{o=new Map,Yh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Iu={$$typeof:W,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function eI(n,i,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function HE(n,i,o,u,f,g,E,A,C,G,J,te){return n=new eI(n,i,o,E,A,C,G,te),i=1,g===!0&&(i|=24),g=kn(3,null,null,i),n.current=g,g.stateNode=n,i=Yd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},Jd(g),n}function QE(n){return n?(n=lo,n):lo}function KE(n,i,o,u,f,g){f=QE(f),u.context===null?u.context=f:u.pendingContext=f,u=Ui(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Bi(n,u,i),o!==null&&(qn(o,n,i),ru(o,n,i))}function $E(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function gg(n,i){$E(n,i),(n=n.alternate)&&$E(n,i)}function YE(n){if(n.tag===13){var i=oo(n,67108864);i!==null&&qn(i,n,67108864),gg(n,67108864)}}var Xh=!0;function tI(n,i,o,u){var f=$.T;$.T=null;var g=ue.p;try{ue.p=2,pg(n,i,o,u)}finally{ue.p=g,$.T=f}}function nI(n,i,o,u){var f=$.T;$.T=null;var g=ue.p;try{ue.p=8,pg(n,i,o,u)}finally{ue.p=g,$.T=f}}function pg(n,i,o,u){if(Xh){var f=yg(u);if(f===null)rg(n,i,u,Zh,o),ZE(n,u);else if(iI(f,n,i,o,u))u.stopPropagation();else if(ZE(n,u),i&4&&-1<rI.indexOf(n)){for(;f!==null;){var g=gr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=ar(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var C=1<<31-zt(E);A.entanglements[1]|=C,E&=~C}Dr(g),(Je&6)===0&&(Mh=vn()+500,Eu(0))}}break;case 13:A=oo(g,2),A!==null&&qn(A,g,2),kh(),gg(g,2)}if(g=yg(u),g===null&&rg(n,i,u,Zh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else rg(n,i,u,null,o)}}function yg(n){return n=Qn(n),_g(n)}var Zh=null;function _g(n){if(Zh=null,n=Hr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Zh=n,null}function XE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(za()){case Ii:return 2;case qr:return 8;case ir:case xi:return 32;case dr:return 268435456;default:return 32}default:return 32}}var vg=!1,Wi=null,Ji=null,es=null,xu=new Map,Du=new Map,ts=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZE(n,i){switch(n){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":xu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(i.pointerId)}}function Cu(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=gr(i),i!==null&&YE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function iI(n,i,o,u,f){switch(i){case"focusin":return Wi=Cu(Wi,n,i,o,u,f),!0;case"dragenter":return Ji=Cu(Ji,n,i,o,u,f),!0;case"mouseover":return es=Cu(es,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return xu.set(g,Cu(xu.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Du.set(g,Cu(Du.get(g)||null,n,i,o,u,f)),!0}return!1}function WE(n){var i=Hr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,kc(n.priority,function(){if(o.tag===13){var u=zn();u=Di(u);var f=oo(o,u);f!==null&&qn(f,o,u),gg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=yg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Yr=u,o.target.dispatchEvent(u),Yr=null}else return i=gr(o),i!==null&&YE(i),n.blockedOn=o,!1;i.shift()}return!0}function JE(n,i,o){Wh(n)&&o.delete(i)}function sI(){vg=!1,Wi!==null&&Wh(Wi)&&(Wi=null),Ji!==null&&Wh(Ji)&&(Ji=null),es!==null&&Wh(es)&&(es=null),xu.forEach(JE),Du.forEach(JE)}function Jh(n,i){n.blockedOn===i&&(n.blockedOn=null,vg||(vg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,sI)))}var ef=null;function eT(n){ef!==n&&(ef=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ef===n&&(ef=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(_g(u||o)===null)continue;break}var g=gr(o);g!==null&&(n.splice(i,3),i-=3,_m(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Vu(n){function i(C){return Jh(C,n)}Wi!==null&&Jh(Wi,n),Ji!==null&&Jh(Ji,n),es!==null&&Jh(es,n),xu.forEach(i),Du.forEach(i);for(var o=0;o<ts.length;o++){var u=ts[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ts.length&&(o=ts[0],o.blockedOn===null);)WE(o),o.blockedOn===null&&ts.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Ot]||null;if(typeof g=="function")E||eT(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Ot]||null)A=E.formAction;else if(_g(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),eT(o)}}}function Eg(n){this._internalRoot=n}tf.prototype.render=Eg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=zn();KE(o,u,n,i,null,null)},tf.prototype.unmount=Eg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;KE(n.current,2,null,n,null,null),kh(),i[Gn]=null}};function tf(n){this._internalRoot=n}tf.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ci();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ts.length&&i!==0&&i<ts[o].priority;o++);ts.splice(o,0,n),o===0&&WE(n)}};var tT=e.version;if(tT!=="19.1.0")throw Error(r(527,tT,"19.1.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var aI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{dt=nf.inject(aI),Me=nf}catch{}}return Ou.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=yv,g=_v,E=vv,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=HE(n,1,!1,null,null,o,u,f,g,E,A,null),n[Gn]=i.current,ng(n),new Eg(i)},Ou.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=yv,E=_v,A=vv,C=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),i=HE(n,1,!0,i,o??null,u,f,g,E,A,C,G),i.context=QE(null),o=i.current,u=zn(),u=Di(u),f=Ui(u),f.callback=null,Bi(o,f,u),o=u,i.current.lanes=o,Gr(i,o),Dr(i),n[Gn]=i.current,ng(n),new tf(i)},Ou.version="19.1.0",Ou}var hT;function yI(){if(hT)return bg.exports;hT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bg.exports=pI(),bg.exports}var _I=yI();const vI=sA(_I);var Mu={},fT;function EI(){if(fT)return Mu;fT=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.parse=c,Mu.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,R){const x=new l,U=b.length;if(U<2)return x;const k=(R==null?void 0:R.decode)||_;let Q=0;do{const re=b.indexOf("=",Q);if(re===-1)break;const W=b.indexOf(";",Q),me=W===-1?U:W;if(re>me){Q=b.lastIndexOf(";",re-1)+1;continue}const le=d(b,Q,re),de=m(b,re,le),V=b.slice(le,de);if(x[V]===void 0){let S=d(b,re+1,me),I=m(b,me,S);const N=k(b.slice(S,I));x[V]=N}Q=me+1}while(Q<U);return x}function d(b,R,x){do{const U=b.charCodeAt(R);if(U!==32&&U!==9)return R}while(++R<x);return x}function m(b,R,x){for(;R>x;){const U=b.charCodeAt(--R);if(U!==32&&U!==9)return R+1}return x}function p(b,R,x){const U=(x==null?void 0:x.encode)||encodeURIComponent;if(!s.test(b))throw new TypeError(`argument name is invalid: ${b}`);const k=U(R);if(!e.test(k))throw new TypeError(`argument val is invalid: ${R}`);let Q=b+"="+k;if(!x)return Q;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);Q+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);Q+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);Q+="; Path="+x.path}if(x.expires){if(!T(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);Q+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(Q+="; HttpOnly"),x.secure&&(Q+="; Secure"),x.partitioned&&(Q+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return Q}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function T(b){return a.call(b)==="[object Date]"}return Mu}EI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dT="popstate";function TI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Fg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Wu(a)}return bI(e,t,null,s)}function Tt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function kr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function mT(s,e){return{usr:s.state,key:s.key,idx:e}}function Fg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?gl(e):e,state:t,key:e&&e.key||r||AI()}}function Wu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function gl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function bI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let k=_(),Q=k==null?null:k-p;p=k,m&&m({action:d,location:U.location,delta:Q})}function b(k,Q){d="PUSH";let re=Fg(U.location,k,Q);p=_()+1;let W=mT(re,p),me=U.createHref(re);try{c.pushState(W,"",me)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(me)}l&&m&&m({action:d,location:U.location,delta:1})}function R(k,Q){d="REPLACE";let re=Fg(U.location,k,Q);p=_();let W=mT(re,p),me=U.createHref(re);c.replaceState(W,"",me),l&&m&&m({action:d,location:U.location,delta:0})}function x(k){let Q=a.location.origin!=="null"?a.location.origin:a.location.href,re=typeof k=="string"?k:Wu(k);return re=re.replace(/ $/,"%20"),Tt(Q,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,Q)}let U={get action(){return d},get location(){return s(a,c)},listen(k){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(dT,T),m=k,()=>{a.removeEventListener(dT,T),m=null}},createHref(k){return e(a,k)},createURL:x,encodeLocation(k){let Q=x(k);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:b,replace:R,go(k){return c.go(k)}};return U}function aA(s,e,t="/"){return wI(s,e,t,!1)}function wI(s,e,t,r){let a=typeof e=="string"?gl(e):e,l=yi(a.pathname||"/",t);if(l==null)return null;let c=oA(s);SI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=kI(l);d=MI(c[m],p,r)}return d}function oA(s,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Tt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=gi([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(Tt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),oA(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:NI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of lA(l.path))a(l,c,m)}),e}function lA(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=lA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function SI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:OI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var RI=/^:[\w-]+$/,II=3,xI=2,DI=1,CI=10,VI=-2,gT=s=>s==="*";function NI(s,e){let t=s.split("/"),r=t.length;return t.some(gT)&&(r+=VI),e&&(r+=xI),t.filter(a=>!gT(a)).reduce((a,l)=>a+(RI.test(l)?II:l===""?DI:CI),r)}function OI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function MI(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=wf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),b=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=wf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:gi([l,T.pathname]),pathnameBase:zI(gi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=gi([l,T.pathnameBase]))}return c}function wf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=PI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},b)=>{if(_==="*"){let x=d[b]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const R=d[b];return T&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function PI(s,e=!1,t=!0){kr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function kI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function yi(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function LI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?gl(s):s;return{pathname:t?t.startsWith("/")?t:UI(t,e):e,search:qI(r),hash:jI(a)}}function UI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ig(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uA(s){let e=BI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function cA(s,e,t,r=!1){let a;typeof s=="string"?a=gl(s):(a={...s},Tt(!a.pathname||!a.pathname.includes("?"),Ig("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),Ig("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),Ig("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=LI(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var gi=s=>s.join("/").replace(/\/\/+/g,"/"),zI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),qI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,jI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function FI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var hA=["POST","PUT","PATCH","DELETE"];new Set(hA);var GI=["GET",...hA];new Set(GI);var pl=H.createContext(null);pl.displayName="DataRouter";var $f=H.createContext(null);$f.displayName="DataRouterState";var fA=H.createContext({isTransitioning:!1});fA.displayName="ViewTransition";var HI=H.createContext(new Map);HI.displayName="Fetchers";var QI=H.createContext(null);QI.displayName="Await";var zr=H.createContext(null);zr.displayName="Navigation";var vc=H.createContext(null);vc.displayName="Location";var Ai=H.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var Sp=H.createContext(null);Sp.displayName="RouteError";function KI(s,{relative:e}={}){Tt(Ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=H.useContext(zr),{hash:a,pathname:l,search:c}=Tc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:gi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Ec(){return H.useContext(vc)!=null}function Oa(){return Tt(Ec(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(vc).location}var dA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(s){H.useContext(zr).static||H.useLayoutEffect(s)}function $I(){let{isDataRoute:s}=H.useContext(Ai);return s?o1():YI()}function YI(){Tt(Ec(),"useNavigate() may be used only in the context of a <Router> component.");let s=H.useContext(pl),{basename:e,navigator:t}=H.useContext(zr),{matches:r}=H.useContext(Ai),{pathname:a}=Oa(),l=JSON.stringify(uA(r)),c=H.useRef(!1);return mA(()=>{c.current=!0}),H.useCallback((m,p={})=>{if(kr(c.current,dA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=cA(m,JSON.parse(l),a,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:gi([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,s])}H.createContext(null);function Tc(s,{relative:e}={}){let{matches:t}=H.useContext(Ai),{pathname:r}=Oa(),a=JSON.stringify(uA(t));return H.useMemo(()=>cA(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function XI(s,e){return gA(s,e)}function gA(s,e,t,r){var re;Tt(Ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=H.useContext(zr),{matches:c}=H.useContext(Ai),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let W=T&&T.path||"";pA(p,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let b=Oa(),R;if(e){let W=typeof e=="string"?gl(e):e;Tt(_==="/"||((re=W.pathname)==null?void 0:re.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${W.pathname}" was given in the \`location\` prop.`),R=W}else R=b;let x=R.pathname||"/",U=x;if(_!=="/"){let W=_.replace(/^\//,"").split("/");U="/"+x.replace(/^\//,"").split("/").slice(W.length).join("/")}let k=!l&&t&&t.matches&&t.matches.length>0?t.matches:aA(s,{pathname:U});kr(T||k!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),kr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=t1(k&&k.map(W=>Object.assign({},W,{params:Object.assign({},m,W.params),pathname:gi([_,a.encodeLocation?a.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?_:gi([_,a.encodeLocation?a.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),c,t,r);return e&&Q?H.createElement(vc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Q):Q}function ZI(){let s=a1(),e=FI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:a},t):null,c)}var WI=H.createElement(ZI,null),JI=class extends H.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?H.createElement(Ai.Provider,{value:this.props.routeContext},H.createElement(Sp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function e1({routeContext:s,match:e,children:t}){let r=H.useContext(pl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Ai.Provider,{value:s},t)}function t1(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Tt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,b=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,b=!1,R=null,x=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||WI,c&&(d<0&&_===0?(pA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):d===_&&(b=!0,x=p.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,_+1)),k=()=>{let Q;return T?Q=R:b?Q=x:p.route.Component?Q=H.createElement(p.route.Component,null):p.route.element?Q=p.route.element:Q=m,H.createElement(e1,{match:p,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:Q})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?H.createElement(JI,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:k(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):k()},null)}function Rp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n1(s){let e=H.useContext(pl);return Tt(e,Rp(s)),e}function r1(s){let e=H.useContext($f);return Tt(e,Rp(s)),e}function i1(s){let e=H.useContext(Ai);return Tt(e,Rp(s)),e}function Ip(s){let e=i1(s),t=e.matches[e.matches.length-1];return Tt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function s1(){return Ip("useRouteId")}function a1(){var r;let s=H.useContext(Sp),e=r1("useRouteError"),t=Ip("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function o1(){let{router:s}=n1("useNavigate"),e=Ip("useNavigate"),t=H.useRef(!1);return mA(()=>{t.current=!0}),H.useCallback(async(a,l={})=>{kr(t.current,dA),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var pT={};function pA(s,e,t){!e&&!pT[s]&&(pT[s]=!0,kr(!1,t))}H.memo(l1);function l1({routes:s,future:e,state:t}){return gA(s,void 0,t,e)}function ca(s){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u1({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){Tt(!Ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=gl(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:b="default"}=t,R=H.useMemo(()=>{let x=yi(m,c);return x==null?null:{location:{pathname:x,search:p,hash:_,state:T,key:b},navigationType:r}},[c,m,p,_,T,b,r]);return kr(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:H.createElement(zr.Provider,{value:d},H.createElement(vc.Provider,{children:e,value:R}))}function c1({children:s,location:e}){return XI(Gg(s),e)}function Gg(s,e=[]){let t=[];return H.Children.forEach(s,(r,a)=>{if(!H.isValidElement(r))return;let l=[...e,a];if(r.type===H.Fragment){t.push.apply(t,Gg(r.props.children,l));return}Tt(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Gg(r.props.children,l)),t.push(c)}),t}var ff="get",df="application/x-www-form-urlencoded";function Yf(s){return s!=null&&typeof s.tagName=="string"}function h1(s){return Yf(s)&&s.tagName.toLowerCase()==="button"}function f1(s){return Yf(s)&&s.tagName.toLowerCase()==="form"}function d1(s){return Yf(s)&&s.tagName.toLowerCase()==="input"}function m1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function g1(s,e){return s.button===0&&(!e||e==="_self")&&!m1(s)}var rf=null;function p1(){if(rf===null)try{new FormData(document.createElement("form"),0),rf=!1}catch{rf=!0}return rf}var y1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xg(s){return s!=null&&!y1.has(s)?(kr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${df}"`),null):s}function _1(s,e){let t,r,a,l,c;if(f1(s)){let d=s.getAttribute("action");r=d?yi(d,e):null,t=s.getAttribute("method")||ff,a=xg(s.getAttribute("enctype"))||df,l=new FormData(s)}else if(h1(s)||d1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?yi(m,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||ff,a=xg(s.getAttribute("formenctype"))||xg(d.getAttribute("enctype"))||df,l=new FormData(d,s),!p1()){let{name:p,type:_,value:T}=s;if(_==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(Yf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ff,r=null,a=df,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function xp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function v1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function E1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function T1(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await v1(l,t);return c.links?c.links():[]}return[]}));return S1(r.flat(1).filter(E1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function yT(s,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function A1(s,e,{includeHydrateFallback:t}={}){return b1(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function b1(s){return[...new Set(s)]}function w1(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function S1(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(w1(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}var R1=new Set([100,101,204,205]);function I1(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&yi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yA(){let s=H.useContext(pl);return xp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function x1(){let s=H.useContext($f);return xp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Dp=H.createContext(void 0);Dp.displayName="FrameworkContext";function _A(){let s=H.useContext(Dp);return xp(s,"You must render this element inside a <HydratedRouter> element"),s}function D1(s,e){let t=H.useContext(Dp),[r,a]=H.useState(!1),[l,c]=H.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,b=H.useRef(null);H.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let U=Q=>{Q.forEach(re=>{c(re.isIntersecting)})},k=new IntersectionObserver(U,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[s]),H.useEffect(()=>{if(r){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[r]);let R=()=>{a(!0)},x=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Pu(d,R),onBlur:Pu(m,x),onMouseEnter:Pu(p,R),onMouseLeave:Pu(_,x),onTouchStart:Pu(T,R)}]:[!1,b,{}]}function Pu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function C1({page:s,...e}){let{router:t}=yA(),r=H.useMemo(()=>aA(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?H.createElement(N1,{page:s,matches:r,...e}):null}function V1(s){let{manifest:e,routeModules:t}=_A(),[r,a]=H.useState([]);return H.useEffect(()=>{let l=!1;return T1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function N1({page:s,matches:e,...t}){let r=Oa(),{manifest:a,routeModules:l}=_A(),{basename:c}=yA(),{loaderData:d,matches:m}=x1(),p=H.useMemo(()=>yT(s,e,m,a,r,"data"),[s,e,m,a,r]),_=H.useMemo(()=>yT(s,e,m,a,r,"assets"),[s,e,m,a,r]),T=H.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let x=new Set,U=!1;if(e.forEach(Q=>{var W;let re=a.routes[Q.route.id];!re||!re.hasLoader||(!p.some(me=>me.route.id===Q.route.id)&&Q.route.id in d&&((W=l[Q.route.id])!=null&&W.shouldRevalidate)||re.hasClientLoader?U=!0:x.add(Q.route.id))}),x.size===0)return[];let k=I1(s,c);return U&&x.size>0&&k.searchParams.set("_routes",e.filter(Q=>x.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[k.pathname+k.search]},[c,d,r,a,p,e,s,l]),b=H.useMemo(()=>A1(_,a),[_,a]),R=V1(_);return H.createElement(H.Fragment,null,T.map(x=>H.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),b.map(x=>H.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),R.map(({key:x,link:U})=>H.createElement("link",{key:x,...U})))}function O1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vA&&(window.__reactRouterVersion="7.5.1")}catch{}function M1({basename:s,children:e,window:t}){let r=H.useRef();r.current==null&&(r.current=TI({window:t,v5Compat:!0}));let a=r.current,[l,c]=H.useState({action:a.action,location:a.location}),d=H.useCallback(m=>{H.startTransition(()=>c(m))},[c]);return H.useLayoutEffect(()=>a.listen(d),[a,d]),H.createElement(u1,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=H.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...b},R){let{basename:x}=H.useContext(zr),U=typeof p=="string"&&EA.test(p),k,Q=!1;if(typeof p=="string"&&U&&(k=p,vA))try{let I=new URL(window.location.href),N=p.startsWith("//")?new URL(I.protocol+p):new URL(p),P=yi(N.pathname,x);N.origin===I.origin&&P!=null?p=P+N.search+N.hash:Q=!0}catch{kr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=KI(p,{relative:a}),[W,me,le]=D1(r,b),de=U1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function V(I){e&&e(I),I.defaultPrevented||de(I)}let S=H.createElement("a",{...b,...le,href:k||re,onClick:Q||l?e:V,ref:O1(R,me),target:m,"data-discover":!U&&t==="render"?"true":void 0});return W&&!U?H.createElement(H.Fragment,null,S,H.createElement(C1,{page:re})):S});tn.displayName="Link";var P1=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=Tc(c,{relative:p.relative}),b=Oa(),R=H.useContext($f),{navigator:x,basename:U}=H.useContext(zr),k=R!=null&&F1(T)&&d===!0,Q=x.encodeLocation?x.encodeLocation(T).pathname:T.pathname,re=b.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(re=re.toLowerCase(),W=W?W.toLowerCase():null,Q=Q.toLowerCase()),W&&U&&(W=yi(W,U)||W);const me=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let le=re===Q||!a&&re.startsWith(Q)&&re.charAt(me)==="/",de=W!=null&&(W===Q||!a&&W.startsWith(Q)&&W.charAt(Q.length)==="/"),V={isActive:le,isPending:de,isTransitioning:k},S=le?e:void 0,I;typeof r=="function"?I=r(V):I=[r,le?"active":null,de?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(V):l;return H.createElement(tn,{...p,"aria-current":S,className:I,ref:_,style:N,to:c,viewTransition:d},typeof m=="function"?m(V):m)});P1.displayName="NavLink";var k1=H.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=ff,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...b},R)=>{let x=q1(),U=j1(d,{relative:p}),k=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&EA.test(d),re=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let me=W.nativeEvent.submitter,le=(me==null?void 0:me.getAttribute("formmethod"))||c;x(me||W.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return H.createElement("form",{ref:R,method:k,action:U,onSubmit:r?m:re,...b,"data-discover":!Q&&s==="render"?"true":void 0})});k1.displayName="Form";function L1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TA(s){let e=H.useContext(pl);return Tt(e,L1(s)),e}function U1(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=$I(),m=Oa(),p=Tc(s,{relative:l});return H.useCallback(_=>{if(g1(_,e)){_.preventDefault();let T=t!==void 0?t:Wu(m)===Wu(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,s,a,l,c])}var B1=0,z1=()=>`__${String(++B1)}__`;function q1(){let{router:s}=TA("useSubmit"),{basename:e}=H.useContext(zr),t=s1();return H.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=_1(r,e);if(a.navigate===!1){let _=a.fetcherKey||z1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function j1(s,{relative:e}={}){let{basename:t}=H.useContext(zr),r=H.useContext(Ai);Tt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Tc(s||".",{relative:e})},c=Oa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:gi([t,l.pathname])),Wu(l)}function F1(s,e={}){let t=H.useContext(fA);Tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=TA("useViewTransitionState"),a=Tc(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=yi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=yi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return wf(a.pathname,c)!=null||wf(a.pathname,l)!=null}new TextEncoder;[...R1];function G1(){const[s,e]=H.useState(null);return H.useEffect(()=>{var a,l;const t=(a=window.Telegram)==null?void 0:a.WebApp;if(!t)return;t.ready(),t.expand();const r=t.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&e(r.user.id)},[]),s}const H1=()=>{};var _T={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Q1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},bA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,R=p&63;m||(R=64,c||(b=64)),r.push(t[_],t[T],t[b],t[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(AA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Q1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new K1;const b=l<<2|d>>4;if(r.push(b),p!==64){const R=d<<4&240|p>>2;if(r.push(R),T!==64){const x=p<<6&192|T;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class K1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $1=function(s){const e=AA(s);return bA.encodeByteArray(e,!0)},Sf=function(s){return $1(s).replace(/\./g,"")},wA=function(s){try{return bA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Y1(t)||(s[t]=Rf(s[t],e[t]));return s}function Y1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=()=>SA().__FIREBASE_DEFAULTS__,Z1=()=>{if(typeof process>"u"||typeof _T>"u")return;const s=_T.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},W1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&wA(s[1]);return e&&JSON.parse(e)},RA=()=>{try{return H1()||X1()||Z1()||W1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},IA=()=>{var s;return(s=RA())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){var s;const e=(s=RA())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nx(){return typeof window<"u"||xA()}function xA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function DA(){return!tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CA(){try{return typeof indexedDB=="object"}catch{return!1}}function rx(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="FirebaseError";class Ma extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ix,Object.setPrototypeOf(this,Ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xf.prototype.create)}}class Xf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?sx(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ma(a,d,r)}}function sx(s,e){return s.replace(ax,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const ax=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Qo(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(ET(l)&&ET(c)){if(!Qo(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function ET(s){return s!==null&&typeof s=="object"}function ox(s,e){const t=new lx(s,e);return t.subscribe.bind(t)}class lx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ux(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Dg),a.error===void 0&&(a.error=Dg),a.complete===void 0&&(a.complete=Dg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ux(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Dg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s){return s&&s._delegate?s._delegate:s}class ba{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new J1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fx(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hx(s){return s===ha?void 0:s}function fx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=[];var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const NA={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},dx=qe.INFO,mx={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},gx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=mx[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=dx,this._logHandler=gx,this._userLogHandler=null,Cp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}function px(s){Cp.forEach(e=>{e.setLogLevel(s)})}function yx(s,e){for(const t of Cp){let r=null;e&&e.level&&(r=NA[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:qe[l].toLowerCase(),message:d,args:c,type:a.name})}}}const _x=(s,e)=>e.some(t=>s instanceof t);let TT,AT;function vx(){return TT||(TT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OA=new WeakMap,Hg=new WeakMap,MA=new WeakMap,Cg=new WeakMap,Np=new WeakMap;function Tx(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(cs(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&OA.set(t,s)}).catch(()=>{}),Np.set(e,s),e}function Ax(s){if(Hg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Hg.set(s,e)}let Qg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Hg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||MA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function bx(s){Qg=s(Qg)}function wx(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Vg(this),e,...t);return MA.set(r,e.sort?e.sort():[e]),cs(r)}:Ex().includes(s)?function(...e){return s.apply(Vg(this),e),cs(OA.get(this))}:function(...e){return cs(s.apply(Vg(this),e))}}function Sx(s){return typeof s=="function"?wx(s):(s instanceof IDBTransaction&&Ax(s),_x(s,vx())?new Proxy(s,Qg):s)}function cs(s){if(s instanceof IDBRequest)return Tx(s);if(Cg.has(s))return Cg.get(s);const e=Sx(s);return e!==s&&(Cg.set(s,e),Np.set(e,s)),e}const Vg=s=>Np.get(s);function Rx(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=cs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(cs(c.result),m.oldVersion,m.newVersion,cs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Ix=["get","getKey","getAll","getAllKeys","count"],xx=["put","add","delete","clear"],Ng=new Map;function bT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=xx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Ix.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Ng.set(e,l),l}bx(s=>({...s,get:(e,t,r)=>bT(e,t)||s.get(e,t,r),has:(e,t)=>!!bT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Cx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Cx(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",Kg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Vp("@firebase/app"),Vx="@firebase/app-compat",Nx="@firebase/analytics-compat",Ox="@firebase/analytics",Mx="@firebase/app-check-compat",Px="@firebase/app-check",kx="@firebase/auth",Lx="@firebase/auth-compat",Ux="@firebase/database",Bx="@firebase/data-connect",zx="@firebase/database-compat",qx="@firebase/functions",jx="@firebase/functions-compat",Fx="@firebase/installations",Gx="@firebase/installations-compat",Hx="@firebase/messaging",Qx="@firebase/messaging-compat",Kx="@firebase/performance",$x="@firebase/performance-compat",Yx="@firebase/remote-config",Xx="@firebase/remote-config-compat",Zx="@firebase/storage",Wx="@firebase/storage-compat",Jx="@firebase/firestore",eD="@firebase/vertexai",tD="@firebase/firestore-compat",nD="firebase",rD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]",iD={[xf]:"fire-core",[Vx]:"fire-core-compat",[Ox]:"fire-analytics",[Nx]:"fire-analytics-compat",[Px]:"fire-app-check",[Mx]:"fire-app-check-compat",[kx]:"fire-auth",[Lx]:"fire-auth-compat",[Ux]:"fire-rtdb",[Bx]:"fire-data-connect",[zx]:"fire-rtdb-compat",[qx]:"fire-fn",[jx]:"fire-fn-compat",[Fx]:"fire-iid",[Gx]:"fire-iid-compat",[Hx]:"fire-fcm",[Qx]:"fire-fcm-compat",[Kx]:"fire-perf",[$x]:"fire-perf-compat",[Yx]:"fire-rc",[Xx]:"fire-rc-compat",[Zx]:"fire-gcs",[Wx]:"fire-gcs-compat",[Jx]:"fire-fst",[tD]:"fire-fst-compat",[eD]:"fire-vertex","fire-js":"fire-js",[nD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Map,Ko=new Map,$o=new Map;function Ju(s,e){try{s.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function PA(s,e){s.container.addOrOverwriteComponent(e)}function Yo(s){const e=s.name;if($o.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;$o.set(e,s);for(const t of gs.values())Ju(t,s);for(const t of Ko.values())Ju(t,s);return!0}function kA(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function sD(s,e,t=ms){kA(s,e).clearInstance(t)}function LA(s){return s.options!==void 0}function UA(s){return s==null?!1:s.settings!==void 0}function aD(){$o.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Xf("app","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s,e){const t=wA(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class lD extends BA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&wT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&wT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,pi(xf,Kg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw rr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=rD;function Mp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ms,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw rr.create("bad-app-name",{appName:String(a)});if(t||(t=IA()),!t)throw rr.create("no-options");const l=gs.get(a);if(l){if(Qo(t,l.options)&&Qo(r,l.config))return l;throw rr.create("duplicate-app",{appName:a})}const c=new VA(a);for(const m of $o.values())c.addComponent(m);const d=new BA(t,r,c);return gs.set(a,d),d}function uD(s,e){if(nx()&&!xA())throw rr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;LA(s)?t=s.options:t=s;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw rr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=Ko.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new VA(l);for(const p of $o.values())d.addComponent(p);const m=new lD(t,e,l,d);return Ko.set(l,m),m}function cD(s=ms){const e=gs.get(s);if(!e&&s===ms&&IA())return Mp();if(!e)throw rr.create("no-app",{appName:s});return e}function hD(){return Array.from(gs.values())}async function Pp(s){let e=!1;const t=s.name;gs.has(t)?(e=!0,gs.delete(t)):Ko.has(t)&&s.decRefCount()<=0&&(Ko.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function pi(s,e,t){var r;let a=(r=iD[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(d.join(" "));return}Yo(new ba(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function zA(s,e){if(s!==null&&typeof s!="function")throw rr.create("invalid-log-argument");yx(s,e)}function qA(s){px(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="firebase-heartbeat-database",dD=1,ec="firebase-heartbeat-store";let Og=null;function jA(){return Og||(Og=Rx(fD,dD,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ec)}catch(t){console.warn(t)}}}}).catch(s=>{throw rr.create("idb-open",{originalErrorMessage:s.message})})),Og}async function mD(s){try{const t=(await jA()).transaction(ec),r=await t.objectStore(ec).get(FA(s));return await t.done,r}catch(e){if(e instanceof Ma)_i.warn(e.message);else{const t=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_i.warn(t.message)}}}async function ST(s,e){try{const r=(await jA()).transaction(ec,"readwrite");await r.objectStore(ec).put(e,FA(s)),await r.done}catch(t){if(t instanceof Ma)_i.warn(t.message);else{const r=rr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_i.warn(r.message)}}}function FA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=1024,pD=30;class yD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=RT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>pD){const c=ED(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=RT(),{heartbeatsToSend:r,unsentEntries:a}=_D(this._heartbeatsCache.heartbeats),l=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return _i.warn(t),""}}}function RT(){return new Date().toISOString().substring(0,10)}function _D(s,e=gD){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),IT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),IT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class vD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CA()?rx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function IT(s){return Sf(JSON.stringify({version:2,heartbeats:s})).length}function ED(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(s){Yo(new ba("platform-logger",e=>new Dx(e),"PRIVATE")),Yo(new ba("heartbeat",e=>new yD(e),"PRIVATE")),pi(xf,Kg,s),pi(xf,Kg,"esm2017"),pi("fire-js","")}TD("");const AD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ma,SDK_VERSION:Op,_DEFAULT_ENTRY_NAME:ms,_addComponent:Ju,_addOrOverwriteComponent:PA,_apps:gs,_clearComponents:aD,_components:$o,_getProvider:kA,_isFirebaseApp:LA,_isFirebaseServerApp:UA,_registerComponent:Yo,_removeServiceInstance:sD,_serverApps:Ko,deleteApp:Pp,getApp:cD,getApps:hD,initializeApp:Mp,initializeServerApp:uD,onLog:zA,registerVersion:pi,setLogLevel:qA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t){this._delegate=e,this.firebase=t,Ju(e,new ba("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Pp(this._delegate)))}_getService(e,t=ms){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=ms){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ju(this._delegate,e)}_addOrOverwriteComponent(e){PA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},xT=new Xf("app-compat","Firebase",wD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:pi,setLogLevel:qA,onLog:zA,apps:null,SDK_VERSION:Op,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:AD}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function a(p){if(p=p||ms,!vT(e,p))throw xT.create("no-app",{appName:p});return e[p]}a.App=s;function l(p,_={}){const T=Mp(p,_);if(vT(e,T.name))return e[T.name];const b=new s(T,t);return e[T.name]=b,b}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const _=p.name,T=_.replace("-compat","");if(Yo(p)&&p.type==="PUBLIC"){const b=(R=a())=>{if(typeof R[T]!="function")throw xT.create("invalid-app-argument",{appName:_});return R[T]()};p.serviceProps!==void 0&&Rf(b,p.serviceProps),t[T]=b,s.prototype[T]=function(...R){return this._getService.bind(this,_).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){const s=SD(bD);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:GA,extendNamespace:e,createSubscribe:ox,ErrorFactory:Xf,deepExtend:Rf});function e(t){Rf(s,t)}return s}const RD=GA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Vp("@firebase/app-compat"),ID="@firebase/app-compat",xD="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(s){pi(ID,xD,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=SA();if(s.firebase!==void 0){DT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&DT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Qt=RD;DD();var CD="firebase",VD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.registerVersion(CD,VD,"app-compat");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,HA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,S){function I(){}I.prototype=S.prototype,V.D=S.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(N,P,L){for(var D=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)D[ke-2]=arguments[ke];return S.prototype[P].apply(N,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,S,I){I||(I=0);var N=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)N[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)N[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=V.g[0],I=V.g[1],P=V.g[2];var L=V.g[3],D=S+(L^I&(P^L))+N[0]+3614090360&4294967295;S=I+(D<<7&4294967295|D>>>25),D=L+(P^S&(I^P))+N[1]+3905402710&4294967295,L=S+(D<<12&4294967295|D>>>20),D=P+(I^L&(S^I))+N[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=I+(S^P&(L^S))+N[3]+3250441966&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(L^I&(P^L))+N[4]+4118548399&4294967295,S=I+(D<<7&4294967295|D>>>25),D=L+(P^S&(I^P))+N[5]+1200080426&4294967295,L=S+(D<<12&4294967295|D>>>20),D=P+(I^L&(S^I))+N[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=I+(S^P&(L^S))+N[7]+4249261313&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(L^I&(P^L))+N[8]+1770035416&4294967295,S=I+(D<<7&4294967295|D>>>25),D=L+(P^S&(I^P))+N[9]+2336552879&4294967295,L=S+(D<<12&4294967295|D>>>20),D=P+(I^L&(S^I))+N[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=I+(S^P&(L^S))+N[11]+2304563134&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(L^I&(P^L))+N[12]+1804603682&4294967295,S=I+(D<<7&4294967295|D>>>25),D=L+(P^S&(I^P))+N[13]+4254626195&4294967295,L=S+(D<<12&4294967295|D>>>20),D=P+(I^L&(S^I))+N[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=I+(S^P&(L^S))+N[15]+1236535329&4294967295,I=P+(D<<22&4294967295|D>>>10),D=S+(P^L&(I^P))+N[1]+4129170786&4294967295,S=I+(D<<5&4294967295|D>>>27),D=L+(I^P&(S^I))+N[6]+3225465664&4294967295,L=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(L^S))+N[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=I+(L^S&(P^L))+N[0]+3921069994&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^L&(I^P))+N[5]+3593408605&4294967295,S=I+(D<<5&4294967295|D>>>27),D=L+(I^P&(S^I))+N[10]+38016083&4294967295,L=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(L^S))+N[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=I+(L^S&(P^L))+N[4]+3889429448&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^L&(I^P))+N[9]+568446438&4294967295,S=I+(D<<5&4294967295|D>>>27),D=L+(I^P&(S^I))+N[14]+3275163606&4294967295,L=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(L^S))+N[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=I+(L^S&(P^L))+N[8]+1163531501&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(P^L&(I^P))+N[13]+2850285829&4294967295,S=I+(D<<5&4294967295|D>>>27),D=L+(I^P&(S^I))+N[2]+4243563512&4294967295,L=S+(D<<9&4294967295|D>>>23),D=P+(S^I&(L^S))+N[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=I+(L^S&(P^L))+N[12]+2368359562&4294967295,I=P+(D<<20&4294967295|D>>>12),D=S+(I^P^L)+N[5]+4294588738&4294967295,S=I+(D<<4&4294967295|D>>>28),D=L+(S^I^P)+N[8]+2272392833&4294967295,L=S+(D<<11&4294967295|D>>>21),D=P+(L^S^I)+N[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=I+(P^L^S)+N[14]+4259657740&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^L)+N[1]+2763975236&4294967295,S=I+(D<<4&4294967295|D>>>28),D=L+(S^I^P)+N[4]+1272893353&4294967295,L=S+(D<<11&4294967295|D>>>21),D=P+(L^S^I)+N[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=I+(P^L^S)+N[10]+3200236656&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^L)+N[13]+681279174&4294967295,S=I+(D<<4&4294967295|D>>>28),D=L+(S^I^P)+N[0]+3936430074&4294967295,L=S+(D<<11&4294967295|D>>>21),D=P+(L^S^I)+N[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=I+(P^L^S)+N[6]+76029189&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(I^P^L)+N[9]+3654602809&4294967295,S=I+(D<<4&4294967295|D>>>28),D=L+(S^I^P)+N[12]+3873151461&4294967295,L=S+(D<<11&4294967295|D>>>21),D=P+(L^S^I)+N[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=I+(P^L^S)+N[2]+3299628645&4294967295,I=P+(D<<23&4294967295|D>>>9),D=S+(P^(I|~L))+N[0]+4096336452&4294967295,S=I+(D<<6&4294967295|D>>>26),D=L+(I^(S|~P))+N[7]+1126891415&4294967295,L=S+(D<<10&4294967295|D>>>22),D=P+(S^(L|~I))+N[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=I+(L^(P|~S))+N[5]+4237533241&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~L))+N[12]+1700485571&4294967295,S=I+(D<<6&4294967295|D>>>26),D=L+(I^(S|~P))+N[3]+2399980690&4294967295,L=S+(D<<10&4294967295|D>>>22),D=P+(S^(L|~I))+N[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=I+(L^(P|~S))+N[1]+2240044497&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~L))+N[8]+1873313359&4294967295,S=I+(D<<6&4294967295|D>>>26),D=L+(I^(S|~P))+N[15]+4264355552&4294967295,L=S+(D<<10&4294967295|D>>>22),D=P+(S^(L|~I))+N[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=I+(L^(P|~S))+N[13]+1309151649&4294967295,I=P+(D<<21&4294967295|D>>>11),D=S+(P^(I|~L))+N[4]+4149444226&4294967295,S=I+(D<<6&4294967295|D>>>26),D=L+(I^(S|~P))+N[11]+3174756917&4294967295,L=S+(D<<10&4294967295|D>>>22),D=P+(S^(L|~I))+N[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=I+(L^(P|~S))+N[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+L&4294967295}r.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var I=S-this.blockSize,N=this.B,P=this.h,L=0;L<S;){if(P==0)for(;L<=I;)a(this,V,L),L+=this.blockSize;if(typeof V=="string"){for(;L<S;)if(N[P++]=V.charCodeAt(L++),P==this.blockSize){a(this,N),P=0;break}}else for(;L<S;)if(N[P++]=V[L++],P==this.blockSize){a(this,N),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var I=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=I&255,I/=256;for(this.u(V),V=Array(16),S=I=0;4>S;++S)for(var N=0;32>N;N+=8)V[I++]=this.g[S]>>>N&255;return V};function l(V,S){var I=d;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=S(V)}function c(V,S){this.h=S;for(var I=[],N=!0,P=V.length-1;0<=P;P--){var L=V[P]|0;N&&L==S||(I[P]=L,N=!1)}this.g=I}var d={};function m(V){return-128<=V&&128>V?l(V,function(S){return new c([S|0],0>S?-1:0)}):new c([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return T;if(0>V)return k(p(-V));for(var S=[],I=1,N=0;V>=I;N++)S[N]=V/I|0,I*=4294967296;return new c(S,0)}function _(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return k(_(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(S,8)),N=T,P=0;P<V.length;P+=8){var L=Math.min(8,V.length-P),D=parseInt(V.substring(P,P+L),S);8>L?(L=p(Math.pow(S,L)),N=N.j(L).add(p(D))):(N=N.j(I),N=N.add(p(D)))}return N}var T=m(0),b=m(1),R=m(16777216);s=c.prototype,s.m=function(){if(U(this))return-k(this).m();for(var V=0,S=1,I=0;I<this.g.length;I++){var N=this.i(I);V+=(0<=N?N:4294967296+N)*S,S*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(x(this))return"0";if(U(this))return"-"+k(this).toString(V);for(var S=p(Math.pow(V,6)),I=this,N="";;){var P=me(I,S).g;I=Q(I,P.j(S));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=P,x(I))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function x(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function U(V){return V.h==-1}s.l=function(V){return V=Q(this,V),U(V)?-1:x(V)?0:1};function k(V){for(var S=V.g.length,I=[],N=0;N<S;N++)I[N]=~V.g[N];return new c(I,~V.h).add(b)}s.abs=function(){return U(this)?k(this):this},s.add=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],N=0,P=0;P<=S;P++){var L=N+(this.i(P)&65535)+(V.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);N=D>>>16,L&=65535,D&=65535,I[P]=D<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function Q(V,S){return V.add(k(S))}s.j=function(V){if(x(this)||x(V))return T;if(U(this))return U(V)?k(this).j(k(V)):k(k(this).j(V));if(U(V))return k(this.j(k(V)));if(0>this.l(R)&&0>V.l(R))return p(this.m()*V.m());for(var S=this.g.length+V.g.length,I=[],N=0;N<2*S;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<V.g.length;P++){var L=this.i(N)>>>16,D=this.i(N)&65535,ke=V.i(P)>>>16,Ce=V.i(P)&65535;I[2*N+2*P]+=D*Ce,re(I,2*N+2*P),I[2*N+2*P+1]+=L*Ce,re(I,2*N+2*P+1),I[2*N+2*P+1]+=D*ke,re(I,2*N+2*P+1),I[2*N+2*P+2]+=L*ke,re(I,2*N+2*P+2)}for(N=0;N<S;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=S;N<2*S;N++)I[N]=0;return new c(I,0)};function re(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function W(V,S){this.g=V,this.h=S}function me(V,S){if(x(S))throw Error("division by zero");if(x(V))return new W(T,T);if(U(V))return S=me(k(V),S),new W(k(S.g),k(S.h));if(U(S))return S=me(V,k(S)),new W(k(S.g),S.h);if(30<V.g.length){if(U(V)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,N=S;0>=N.l(V);)I=le(I),N=le(N);var P=de(I,1),L=de(N,1);for(N=de(N,2),I=de(I,2);!x(N);){var D=L.add(N);0>=D.l(V)&&(P=P.add(I),L=D),N=de(N,1),I=de(I,1)}return S=Q(V,P.j(S)),new W(P,S)}for(P=T;0<=V.l(S);){for(I=Math.max(1,Math.floor(V.m()/S.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=p(I),D=L.j(S);U(D)||0<D.l(V);)I-=N,L=p(I),D=L.j(S);x(L)&&(L=b),P=P.add(L),V=Q(V,D)}return new W(P,V)}s.A=function(V){return me(this,V).h},s.and=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],N=0;N<S;N++)I[N]=this.i(N)&V.i(N);return new c(I,this.h&V.h)},s.or=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],N=0;N<S;N++)I[N]=this.i(N)|V.i(N);return new c(I,this.h|V.h)},s.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],N=0;N<S;N++)I[N]=this.i(N)^V.i(N);return new c(I,this.h^V.h)};function le(V){for(var S=V.g.length+1,I=[],N=0;N<S;N++)I[N]=V.i(N)<<1|V.i(N-1)>>>31;return new c(I,V.h)}function de(V,S){var I=S>>5;S%=32;for(var N=V.g.length-I,P=[],L=0;L<N;L++)P[L]=0<S?V.i(L+I)>>>S|V.i(L+I+1)<<32-S:V.i(L+I);return new c(P,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,hs=c}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QA,qu,KA,mf,$g,$A,YA,XA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var q=h[w];if(!(q in v))break e;v=v[q]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,q={next:function(){if(!w&&v<h.length){var Z=v++;return{value:y(Z,h[Z]),done:!1}}return w=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,w),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function b(h,y,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,b.apply(null,arguments)}function R(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function x(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,q,Z){for(var oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)oe[Fe-2]=arguments[Fe];return y.prototype[q].apply(w,oe)}}function U(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function k(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const q=h.length||0,Z=w.length||0;h.length=q+Z;for(let oe=0;oe<Z;oe++)h[q+oe]=w[oe]}else h.push(w)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function me(h){return me[" "](h),h}me[" "]=function(){};var le=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function de(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function V(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,y){let v,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(v in w)h[v]=w[v];for(let Z=0;Z<I.length;Z++)v=I[Z],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function L(h){d.setTimeout(()=>{throw h},0)}function D(){var h=je;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ke{constructor(){this.h=this.g=null}add(y,v){const w=Ce.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Ce=new Q(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ve=!1,je=new ke,O=()=>{const h=d.Promise.resolve(void 0);ue=()=>{h.then(ne)}};var ne=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){L(v)}var y=Ce;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ve=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Ne(h,y){if(ae.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(le){e:{try{me(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:xe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ne.aa.h.call(this)}}x(Ne,ae);var xe={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Ke(h,y,v,w,q){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=q,this.key=++pe,this.da=this.fa=!1}function lt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ut(h){this.src=h,this.g={},this.h=0}ut.prototype.add=function(h,y,v,w,q){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var oe=Bt(h,y,w,q);return-1<oe?(y=h[oe],v||(y.fa=!1)):(y=new Ke(y,this.src,Z,!!w,q),y.fa=v,h.push(y)),y};function nn(h,y){var v=y.type;if(v in h.g){var w=h.g[v],q=Array.prototype.indexOf.call(w,y,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(w,q,1),Z&&(lt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Bt(h,y,v,w){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==y&&Z.capture==!!v&&Z.ha==w)return q}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),Nt={};function Ba(h,y,v,w,q){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)Ba(h,y[Z],v,w,q);return null}return v=sr(v),h&&h[Ee]?h.K(y,v,p(w)?!!w.capture:!1,q):vn(h,y,v,!1,w,q)}function vn(h,y,v,w,q,Z){if(!y)throw Error("Invalid event type");var oe=p(q)?!!q.capture:!!q,Fe=dr(h);if(Fe||(h[_n]=Fe=new ut(h)),v=Fe.add(y,v,w,oe,Z),v.proxy)return v;if(w=za(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)be||(q=oe),q===void 0&&(q=!1),h.addEventListener(y.toString(),w,q);else if(h.attachEvent)h.attachEvent(ir(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function za(){function h(v){return y.call(h.src,h.listener,v)}const y=xi;return h}function Ii(h,y,v,w,q){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Ii(h,y[Z],v,w,q);else w=p(w)?!!w.capture:!!w,v=sr(v),h&&h[Ee]?(h=h.i,y=String(y).toString(),y in h.g&&(Z=h.g[y],v=Bt(Z,v,w,q),-1<v&&(lt(Z[v]),Array.prototype.splice.call(Z,v,1),Z.length==0&&(delete h.g[y],h.h--)))):h&&(h=dr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Bt(y,v,w,q)),(v=-1<h?y[h]:null)&&qr(v))}function qr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ee])nn(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(ir(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=dr(y))?(nn(v,h),v.h==0&&(v.src=null,y[_n]=null)):lt(h)}}}function ir(h){return h in Nt?Nt[h]:Nt[h]="on"+h}function xi(h,y){if(h.da)h=!0;else{y=new Ne(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&qr(h),h=v.call(w,y)}return h}function dr(h){return h=h[_n],h instanceof ut?h:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(h){return typeof h=="function"?h:(h[Cs]||(h[Cs]=function(y){return h.handleEvent(y)}),h[Cs])}function dt(){he.call(this),this.i=new ut(this),this.M=this,this.F=null}x(dt,he),dt.prototype[Ee]=!0,dt.prototype.removeEventListener=function(h,y,v,w){Ii(this,h,y,v,w)};function Me(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new ae(y,h);else if(y instanceof ae)y.target=y.target||h;else{var q=y;y=new ae(w,h),N(y,q)}if(q=!0,v)for(var Z=v.length-1;0<=Z;Z--){var oe=y.g=v[Z];q=Ze(oe,w,!0,y)&&q}if(oe=y.g=h,q=Ze(oe,w,!0,y)&&q,q=Ze(oe,w,!1,y)&&q,v)for(Z=0;Z<v.length;Z++)oe=y.g=v[Z],q=Ze(oe,w,!1,y)&&q}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)lt(v[w]);delete h.g[y],h.h--}}this.F=null},dt.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},dt.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Ze(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Z=0;Z<y.length;++Z){var oe=y[Z];if(oe&&!oe.da&&oe.capture==v){var Fe=oe.listener,jt=oe.ha||oe.src;oe.fa&&nn(h.i,oe),q=Fe.call(jt,w)!==!1&&q}}return q&&!w.defaultPrevented}function zt(h,y,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function qa(h){h.g=zt(()=>{h.g=null,h.i&&(h.i=!1,qa(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Rl extends he{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(h){he.call(this),this.h=h,this.g={}}x(jr,he);var Vs=[];function Ns(h){de(h.g,function(y,v){this.g.hasOwnProperty(v)&&qr(y)},h),h.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Ns(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=d.JSON.stringify,ja=d.JSON.parse,Os=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Il(){}Il.prototype.h=null;function xl(h){return h.h||(h.h=h.i())}function Dl(){}var Fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gr(){ae.call(this,"d")}x(Gr,ae);function Cl(){ae.call(this,"c")}x(Cl,ae);var mr={},Vl=null;function Di(){return Vl=Vl||new dt}mr.La="serverreachability";function Fa(h){ae.call(this,mr.La,h)}x(Fa,ae);function Ci(h){const y=Di();Me(y,new Fa(y))}mr.STAT_EVENT="statevent";function kc(h,y){ae.call(this,mr.STAT_EVENT,h),this.stat=y}x(kc,ae);function mt(h){const y=Di();Me(y,new kc(y,h))}mr.Ma="timingevent";function qt(h,y){ae.call(this,mr.Ma,h),this.size=y}x(qt,ae);function Ot(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function Nl(h,y,v,w,q,Z){h.info(function(){if(h.g)if(Z)for(var oe="",Fe=Z.split("&"),jt=0;jt<Fe.length;jt++){var Ge=Fe[jt].split("=");if(1<Ge.length){var Yt=Ge[0];Ge=Ge[1];var Ft=Yt.split("_");oe=2<=Ft.length&&Ft[1]=="type"?oe+(Yt+"="+Ge+"&"):oe+(Yt+"=redacted&")}}else oe=null;else oe=Z;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+v+`
`+oe})}function wd(h,y,v,w,q,Z,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+v+`
`+Z+" "+oe})}function Vi(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ms(h,v)+(w?" "+w:"")})}function Lc(h,y){h.info(function(){return"TIMEOUT: "+y})}Gn.prototype.info=function(){};function Ms(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var q=w[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var oe=1;oe<q.length;oe++)q[oe]=""}}}}return ar(v)}catch{return y}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gr;function pr(){}x(pr,Il),pr.prototype.g=function(){return new XMLHttpRequest},pr.prototype.i=function(){return{}},gr=new pr;function En(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}var Ol={},Ga={};function or(h,y,v){h.L=1,h.v=Bs(Mn(y)),h.m=v,h.P=!0,Qr(h,null)}function Qr(h,y){h.F=Date.now(),Ps(h),h.A=Mn(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Bl(v.i,"t",w),h.C=0,v=h.j.J,h.h=new Rt,h.g=Jc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Rl(b(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Vs[0]=q.toString()),q=Vs);for(var Z=0;Z<q.length;Z++){var oe=Ba(v,q[Z],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ci(),Nl(h.i,h.u,h.A,h.l,h.R,h.m)}En.prototype.ca=function(h){h=h.target;const y=this.M;y&&$n(h)==3?y.j():this.Y(h)},En.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=$n(this.g);var y=this.g.Ba();const ei=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Hc(this.g)))){this.J||Ft!=4||y==7||(y==8||0>=ei?Ci(3):Ci(2)),Oi(this);var v=this.g.Z();this.X=v;t:if(Uc(this)){var w=Hc(this.g);h="";var q=w.length,Z=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),yr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!(Z&&y==q-1)});w.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,wd(this.i,this.u,this.A,this.l,this.R,Ft,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,jt=this.g;if((Fe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)Vi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ks(this,v);else{this.o=!1,this.s=3,mt(12),rn(this),yr(this);break e}}if(this.P){v=!0;let sn;for(;!this.J&&this.C<oe.length;)if(sn=Bc(this,oe),sn==Ga){Ft==4&&(this.s=4,mt(14),v=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Ol){this.s=4,mt(15),Vi(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else Vi(this.i,this.l,sn,null),ks(this,sn);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||oe.length!=0||this.h.h||(this.s=1,mt(16),v=!1),this.o=this.o&&v,!v)Vi(this.i,this.l,oe,"[Invalid Chunked Response]"),rn(this),yr(this);else if(0<oe.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Ks(Yt),Yt.M=!0,mt(11))}}else Vi(this.i,this.l,oe,null),ks(this,oe);Ft==4&&rn(this),this.o&&!this.J&&(Ft==4?Xc(this.j,this):(this.o=!1,Ps(this)))}else Dd(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),rn(this),yr(this)}}}catch{}finally{}};function Uc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Bc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Ga:(v=Number(y.substring(v,w)),isNaN(v)?Ol:(w+=1,w+v>y.length?Ga:(y=y.slice(w,w+v),h.C=w+v,y)))}En.prototype.cancel=function(){this.J=!0,rn(this)};function Ps(h){h.S=Date.now()+h.I,zc(h,h.I)}function zc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(b(h.ba,h),y)}function Oi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}En.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Lc(this.i,this.A),this.L!=2&&(Ci(),mt(17)),rn(this),this.s=2,yr(this)):zc(this,this.S-h)};function yr(h){h.j.G==0||h.J||Xc(h.j,h)}function rn(h){Oi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ns(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function ks(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Ml(v.h,h))){if(!h.K&&Ml(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)no(v),eo(v);else break e;Gl(v),mt(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ot(b(v.Za,v),6e3));if(1>=Qa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Jr(v,11)}else if((h.K||v.g==h)&&no(v),!re(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let Ge=q[y];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const Yt=Ge[3];Yt!=null&&(v.la=Yt,v.j.info("VER="+v.la));const Ft=Ge[4];Ft!=null&&(v.Aa=Ft,v.j.info("SVER="+v.Aa));const ei=Ge[5];ei!=null&&typeof ei=="number"&&0<ei&&(w=1.5*ei,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const sn=h.g;if(sn){const wr=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wr){var Z=w.h;Z.g||wr.indexOf("spdy")==-1&&wr.indexOf("quic")==-1&&wr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ka(Z,Z.h),Z.h=null))}if(w.D){const Ql=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ql&&(w.ya=Ql,rt(w.I,w.D,Ql))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var oe=h;if(w.qa=Wc(w,w.J?w.ia:null,w.W),oe.K){Tn(w.h,oe);var Fe=oe,jt=w.L;jt&&(Fe.I=jt),Fe.B&&(Oi(Fe),Ps(Fe)),w.g=oe}else $c(w);0<v.i.length&&to(v)}else Ge[0]!="stop"&&Ge[0]!="close"||Jr(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Jr(v,7):jl(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}Ci(4)}catch{}}var qc=class{constructor(h,y){this.g=h,this.map=y}};function Kr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ha(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Qa(h){return h.h?1:h.g?h.g.size:0}function Ml(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ka(h,y){h.g?h.g.add(y):h.h=y}function Tn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Kr.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Pl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return U(h.i)}function Sd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function $a(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function kl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=$a(h),w=Sd(h),q=w.length,Z=0;Z<q;Z++)y.call(void 0,w[Z],v&&v[Z],h)}var Ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),q=null;if(0<=w){var Z=h[v].substring(0,w);q=h[v].substring(w+1)}else Z=h[v];y(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Mt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Mt){this.h=h.h,Us(this,h.j),this.o=h.o,this.g=h.g,Mi(this,h.s),this.l=h.l;var y=h.i,v=new Yr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),$r(this,v),this.m=h.m}else h&&(y=String(h).match(Ls))?(this.h=!1,Us(this,y[1]||"",!0),this.o=Hn(y[2]||""),this.g=Hn(y[3]||"",!0),Mi(this,y[4]),this.l=Hn(y[5]||"",!0),$r(this,y[6]||"",!0),this.m=Hn(y[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}Mt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(zs(y,Ll,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(zs(y,Ll,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(zs(v,v.charAt(0)=="/"?Id:Ul,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",zs(v,Ya)),h.join("")};function Mn(h){return new Mt(h)}function Us(h,y,v){h.j=v?Hn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function $r(h,y,v){y instanceof Yr?(h.i=y,Fc(h.i,h.h)):(v||(y=zs(y,xd)),h.i=new Yr(y,h.h))}function rt(h,y,v){h.i.set(y,v)}function Bs(h){return rt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,jc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ll=/[#\/\?@]/g,Ul=/[#\?:]/g,Id=/[#\?]/g,xd=/[#\?@]/g,Ya=/#/g;function Yr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Qn(h){h.g||(h.g=new Map,h.h=0,h.i&&Rd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Yr.prototype,s.add=function(h,y){Qn(this),this.i=null,h=_r(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Xr(h,y){Qn(h),y=_r(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Zr(h,y){return Qn(h),y=_r(h,y),h.g.has(y)}s.forEach=function(h,y){Qn(this),this.g.forEach(function(v,w){v.forEach(function(q){h.call(y,q,w,this)},this)},this)},s.na=function(){Qn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const q=h[w];for(let Z=0;Z<q.length;Z++)v.push(y[w])}return v},s.V=function(h){Qn(this);let y=[];if(typeof h=="string")Zr(this,h)&&(y=y.concat(this.g.get(_r(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return Qn(this),this.i=null,h=_r(this,h),Zr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Bl(h,y,v){Xr(h,y),0<v.length&&(h.i=null,h.g.set(_r(h,y),U(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const Z=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var q=Z;oe[w]!==""&&(q+="="+encodeURIComponent(String(oe[w]))),h.push(q)}}return this.i=h.join("&")};function _r(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Fc(h,y){y&&!h.j&&(Qn(h),h.i=null,h.g.forEach(function(v,w){var q=w.toLowerCase();w!=q&&(Xr(this,w),Bl(this,q,v))},h)),h.j=y}function qs(h,y){const v=new Gn;if(d.Image){const w=new Image;w.onload=R(Kn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=R(Kn,v,"TestLoadImage: error",!1,y,w),w.onabort=R(Kn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=R(Kn,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function lr(h,y){const v=new Gn,w=new AbortController,q=setTimeout(()=>{w.abort(),Kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Z=>{clearTimeout(q),Z.ok?Kn(v,"TestPingServer: ok",!0,y):Kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Kn(v,"TestPingServer: error",!1,y)})}function Kn(h,y,v,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(v)}catch{}}function js(){this.g=new Os}function vr(h,y,v){const w=v||"";try{kl(h,function(q,Z){let oe=q;p(q)&&(oe=ar(q)),y.push(w+Z+"="+encodeURIComponent(oe))})}catch(q){throw y.push(w+"type="+encodeURIComponent("_badmap")),q}}function Pi(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Pi,Il),Pi.prototype.g=function(){return new Wr(this.l,this.j)},Pi.prototype.i=function(h){return function(){return h}}({});function Wr(h,y){dt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Wr,dt),s=Wr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Tr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function zl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Er(this):Tr(this),this.readyState==3&&zl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,Er(this))},s.Qa=function(h){this.g&&(this.response=h,Er(this))},s.ga=function(){this.g&&Er(this)};function Er(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Tr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ql(h){let y="";return de(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function $t(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=ql(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):rt(h,y,v))}function We(h){dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(We,dt);var Xa=/^https?$/i,Fs=["POST","PUT"];s=We.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gr.g(),this.v=this.o?xl(this.o):xl(gr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Z){Gc(this,Z);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)v.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Z of w.keys())v.set(Z,w.get(Z));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Fs,y,void 0))||w||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,oe]of v)this.g.setRequestHeader(Z,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Gc(this,Z)}};function Gc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Za(h),Ar(h)}function Za(h){h.A||(h.A=!0,Me(h,"complete"),Me(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Me(this,"complete"),Me(this,"abort"),Ar(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),We.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},s.bb=function(){Wa(this)};function Wa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)zt(h.Ea,0,h);else if(Me(h,"readystatechange"),$n(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=oe===0){var q=String(h.D).match(Ls)[1]||null;!q&&d.self&&d.self.location&&(q=d.self.location.protocol.slice(0,-1)),w=!Xa.test(q?q.toLowerCase():"")}v=w}if(v)Me(h,"complete"),Me(h,"success");else{h.m=6;try{var Z=2<$n(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Za(h)}}finally{Ar(h)}}}}function Ar(h,y){if(h.g){Gs(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Me(h,"ready");try{v.onreadystatechange=w}catch{}}}function Gs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ja(y)}};function Hc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Dd(h){const y={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(re(h[w]))continue;var v=P(h[w]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Z=y[q]||[];y[q]=Z,Z.push(v)}V(y,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ja(h){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hs("baseRetryDelayMs",5e3,h),this.cb=Hs("retryDelaySeedMs",1e4,h),this.Wa=Hs("forwardChannelMaxRetries",2,h),this.wa=Hs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Kr(h&&h.concurrentRequestLimit),this.Da=new js,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ja.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,w){mt(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Wc(this,null,this.W),to(this)};function jl(h){if(Qc(h),h.G==3){var y=h.U++,v=Mn(h.I);if(rt(v,"SID",h.K),rt(v,"RID",y),rt(v,"TYPE","terminate"),Qs(h,v),y=new En(h,h.j,y),y.L=2,y.v=Bs(Mn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Jc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ps(y)}Zc(h)}function eo(h){h.g&&(Ks(h),h.g.cancel(),h.g=null)}function Qc(h){eo(h),h.u&&(d.clearTimeout(h.u),h.u=null),no(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function to(h){if(!Ha(h.h)&&!h.s){h.s=!0;var y=h.Ga;ue||O(),ve||(ue(),ve=!0),je.add(y,h),h.B=0}}function Cd(h,y){return Qa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(b(h.Ga,h,y),Hl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new En(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=S(Z),N(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Kc(this,q,y),v=Mn(this.I),rt(v,"RID",h),rt(v,"CVER",22),this.D&&rt(v,"X-HTTP-Session-Id",this.D),Qs(this,v),Z&&(this.O?y="headers="+encodeURIComponent(String(ql(Z)))+"&"+y:this.m&&$t(v,this.m,Z)),Ka(this.h,q),this.Ua&&rt(v,"TYPE","init"),this.P?(rt(v,"$req",y),rt(v,"SID","null"),q.T=!0,or(q,v,null)):or(q,v,y),this.G=2}}else this.G==3&&(h?Fl(this,h):this.i.length==0||Ha(this.h)||Fl(this))};function Fl(h,y){var v;y?v=y.l:v=h.U++;const w=Mn(h.I);rt(w,"SID",h.K),rt(w,"RID",v),rt(w,"AID",h.T),Qs(h,w),h.m&&h.o&&$t(w,h.m,h.o),v=new En(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Kc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ka(h.h,v),or(v,w,y)}function Qs(h,y){h.H&&de(h.H,function(v,w){rt(y,w,v)}),h.l&&kl({},function(v,w){rt(y,w,v)})}function Kc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?b(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const oe=["count="+v];Z==-1?0<v?(Z=q[0].g,oe.push("ofs="+Z)):Z=0:oe.push("ofs="+Z);let Fe=!0;for(let jt=0;jt<v;jt++){let Ge=q[jt].g;const Yt=q[jt].map;if(Ge-=Z,0>Ge)Z=Math.max(0,q[jt].g-100),Fe=!1;else try{vr(Yt,oe,"req"+Ge+"_")}catch{w&&w(Yt)}}if(Fe){w=oe.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function $c(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ue||O(),ve||(ue(),ve=!0),je.add(y,h),h.v=0}}function Gl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(b(h.Fa,h),Hl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(b(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),eo(this),Yc(this))};function Ks(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Yc(h){h.g=new En(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Mn(h.qa);rt(y,"RID","rpc"),rt(y,"SID",h.K),rt(y,"AID",h.T),rt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&rt(y,"TO",h.ja),rt(y,"TYPE","xmlhttp"),Qs(h,y),h.m&&h.o&&$t(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Bs(Mn(y)),v.m=null,v.P=!0,Qr(v,h)}s.Za=function(){this.C!=null&&(this.C=null,eo(this),Gl(this),mt(19))};function no(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Xc(h,y){var v=null;if(h.g==y){no(h),Ks(h),h.g=null;var w=2}else if(Ml(h.h,y))v=y.D,Tn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;w=Di(),Me(w,new qt(w,v)),to(h)}else $c(h);else if(q=y.s,q==3||q==0&&0<y.X||!(w==1&&Cd(h,y)||w==2&&Gl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),q){case 1:Jr(h,5);break;case 4:Jr(h,10);break;case 3:Jr(h,6);break;default:Jr(h,2)}}}function Hl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Jr(h,y){if(h.j.info("Error code "+y),y==2){var v=b(h.fb,h),w=h.Xa;const q=!w;w=new Mt(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Us(w,"https"),Bs(w),q?qs(w.toString(),v):lr(w.toString(),v)}else mt(2);h.G=0,h.l&&h.l.sa(y),Zc(h),Qc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Zc(h){if(h.G=0,h.ka=[],h.l){const y=Pl(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ka,y),k(h.ka,h.i),h.h.i.length=0,U(h.i),h.i.length=0),h.l.ra()}}function Wc(h,y,v){var w=v instanceof Mt?Mn(v):new Mt(v);if(w.g!="")y&&(w.g=y+"."+w.g),Mi(w,w.s);else{var q=d.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Z=new Mt(null);w&&Us(Z,w),y&&(Z.g=y),q&&Mi(Z,q),v&&(Z.l=v),w=Z}return v=h.D,y=h.ya,v&&y&&rt(w,v,y),rt(w,"VER",h.la),Qs(h,w),w}function Jc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new We(new Pi({eb:v})):new We(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function eh(){}s=eh.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ro(){}ro.prototype.g=function(h,y){return new An(h,y)};function An(h,y){dt.call(this),this.g=new Ja(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!re(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new br(this)}x(An,dt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){jl(this.g)},An.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=ar(h),h=v);y.i.push(new qc(y.Ya++,h)),y.G==3&&to(y)},An.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,An.aa.N.call(this)};function th(h){Gr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}x(th,Gr);function nh(){Cl.call(this),this.status=1}x(nh,Cl);function br(h){this.g=h}x(br,eh),br.prototype.ua=function(){Me(this.g,"a")},br.prototype.ta=function(h){Me(this.g,new th(h))},br.prototype.sa=function(h){Me(this.g,new nh)},br.prototype.ra=function(){Me(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,XA=function(){return new ro},YA=function(){return Di()},$A=mr,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,mf=Ni,Hr.COMPLETE="complete",KA=Hr,Dl.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",dt.prototype.listen=dt.prototype.K,qu=Dl,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,QA=We}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});const VT="@firebase/firestore",NT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Vp("@firebase/firestore");function Bo(){return ps.logLevel}function ND(s){ps.setLogLevel(s)}function se(s,...e){if(ps.logLevel<=qe.DEBUG){const t=e.map(kp);ps.debug(`Firestore (${yl}): ${s}`,...t)}}function Dt(s,...e){if(ps.logLevel<=qe.ERROR){const t=e.map(kp);ps.error(`Firestore (${yl}): ${s}`,...t)}}function Lr(s,...e){if(ps.logLevel<=qe.WARN){const t=e.map(kp);ps.warn(`Firestore (${yl}): ${s}`,...t)}}function kp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(s="Unexpected state"){const e=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: `+s;throw Dt(e),new Error(e)}function _e(s,e){s||ge()}function OD(s,e){s||ge()}function fe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ma{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class PD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kD{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hn,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hn)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new ZA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new en(e)}}class LD{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class UD{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new LD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BD{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,UA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new OT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string"),this.R=t.token,new OT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=zD(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Re(s,e){return s<e?-1:s>e?1:0}function Yg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Re(r,a);{const l=Lp(),c=qD(l.encode(MT(s,t)),l.encode(MT(e,t)));return c!==0?c:Re(r,a)}}t+=r>65535?2:1}return Re(s.length,e.length)}function MT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function qD(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Re(s[t],e[t]);return Re(s.length,e.length)}function Xo(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function JA(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=-62135596800,kT=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kT);return new vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PT)throw new ie(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kT}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-PT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new vt(0,0))}static max(){return new Te(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="__name__";class Cr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Cr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const r=Cr.isNumericId(e),a=Cr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):Yg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class Be extends Cr{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const jD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Cr{construct(e,t,r){return new yt(e,t,r)}static isValidIdentifier(e){return jD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LT}static keyField(){return new yt([LT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ie(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ie(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ie(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(t)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=-1;class Df{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Xg(s){return s.fields.find(e=>e.kind===2)}function fa(s){return s.fields.filter(e=>e.kind!==2)}Df.UNKNOWN_ID=-1;class gf{constructor(e,t){this.fieldPath=e,this.kind=t}}class tc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tc(0,Fn.min())}}function eb(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new Fn(a,ce.empty(),e)}function tb(s){return new Fn(s.readTime,s.key,Zo)}class Fn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fn(Te.min(),ce.empty(),Zo)}static max(){return new Fn(Te.max(),ce.empty(),Zo)}}function Up(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(s.documentKey,e.documentKey),t!==0?t:Re(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==nb)throw s;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(a=>a?j.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new j((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new j((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class Zf{static open(e,t,r,a){try{return new Zf(t,e.transaction(a,r))}catch(l){throw new Hu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new hn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Hu(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=Bp(r.target.error);this.m.reject(new Hu(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GD(t)}}class Mr{static delete(e){return se(jn,"Removing database:",e),ma(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!CA())return!1;if(Mr.v())return!0;const e=If(),t=Mr.C(e),r=0<t&&t<10,a=ib(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Mr.C(If())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(jn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Hu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ie(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Hu(e,c))},a.onupgradeneeded=l=>{se(jn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{se(jn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=Zf.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),j.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(se(jn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ib(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class FD{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return ma(this.q.delete())}}class Hu extends ie{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Rs(s){return s.name==="IndexedDbTransactionError"}class GD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(jn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(jn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ma(r)}add(e){return se(jn,"ADD",this.store.name,e,e),ma(this.store.add(e))}get(e){return ma(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(jn,"GET",this.store.name,e,t),t))}delete(e){return se(jn,"DELETE",this.store.name,e),ma(this.store.delete(e))}count(){return se(jn,"COUNT",this.store.name),ma(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new j((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(e,t){se(jn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new j((r,a)=>{t.onerror=l=>{const c=Bp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new j((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new FD(d),p=t(d.primaryKey,d.value,m);if(p instanceof j){const _=p.catch(T=>(m.done(),j.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ma(s){return new j((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=Bp(r.target.error);t(a)}})}let UT=!1;function Bp(s){const e=Mr.C(If());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UT||(UT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Qu="IndexBackfiller";class HD{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(Qu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(Qu,`Documents written: ${t}`)}catch(t){Rs(t)?se(Qu,"Ignoring IndexedDB error during index backfill: ",t):await Ss(t)}await this.te(6e4)})}}class QD{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return se(Qu,`Processing collection: ${c}`),this.ie(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(a,l)).next(d=>(se(Qu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=tb(l);Up(c,r)>0&&(r=c)}),new Fn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Vn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=-1;function Ac(s){return s==null}function nc(s){return s===0&&1/s==-1/0}function sb(s){return typeof s=="number"&&Number.isInteger(s)&&!nc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="";function pn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=BT(e)),e=KD(s.get(t),e);return BT(e)}function KD(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Cf:t+="";break;default:t+=l}}return t}function BT(s){return s+Cf+""}function Nr(s){const e=s.length;if(_e(e>=2),e===2)return _e(s.charAt(0)===Cf&&s.charAt(1)===""),Be.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Cf,l);switch((c<0||c>t)&&ge(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ge()}l=c+2}return new Be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="remoteDocuments",bc="owner",Oo="owner",rc="mutationQueues",$D="userId",fr="mutations",zT="batchId",va="userMutationsIndex",qT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(s,e){return[s,pn(e)]}function ab(s,e,t){return[s,pn(e),t]}const YD={},Wo="documentMutations",Vf="remoteDocumentsV14",XD=["prefixPath","collectionGroup","readTime","documentId"],yf="documentKeyIndex",ZD=["prefixPath","collectionGroup","documentId"],ob="collectionGroupIndex",WD=["collectionGroup","readTime","prefixPath","documentId"],ic="remoteDocumentGlobal",Zg="remoteDocumentGlobalKey",Jo="targets",lb="queryTargetsIndex",JD=["canonicalId","targetId"],el="targetDocuments",eC=["targetId","path"],zp="documentTargetsIndex",tC=["path","targetId"],Nf="targetGlobalKey",Aa="targetGlobal",sc="collectionParents",nC=["collectionId","parent"],tl="clientMetadata",rC="clientId",Wf="bundles",iC="bundleId",Jf="namedQueries",sC="name",qp="indexConfiguration",aC="indexId",Wg="collectionGroupIndex",oC="collectionGroup",Of="indexState",lC=["indexId","uid"],ub="sequenceNumberIndex",uC=["uid","sequenceNumber"],Mf="indexEntries",cC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cb="documentKeyIndex",hC=["indexId","uid","orderedDocumentKey"],ed="documentOverlays",fC=["userId","collectionPath","documentId"],Jg="collectionPathOverlayIndex",dC=["userId","collectionPath","largestBatchId"],hb="collectionGroupOverlayIndex",mC=["userId","collectionGroup","largestBatchId"],jp="globals",gC="name",fb=[rc,fr,Wo,da,Jo,bc,Aa,el,tl,ic,sc,Wf,Jf],pC=[...fb,ed],db=[rc,fr,Wo,Vf,Jo,bc,Aa,el,tl,ic,sc,Wf,Jf,ed],mb=db,Fp=[...mb,qp,Of,Mf],yC=Fp,_C=[...Fp,jp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends rb{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Kt(s,e){const t=fe(s);return Mr.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Is(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function gb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??un.RED,this.left=a??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new un(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return un.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,a,l){return this}insert(e,t,r){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nt(this.comparator);return t.data=e,t}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new nt(yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pb("Invalid base64 string: "+l):l}}(e);return new St(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const EC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(s){if(_e(!!s),typeof s=="string"){let e=0;const t=EC.exec(s);if(_e(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(s.seconds),nanos:pt(s.nanos)}}function pt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ei(s){return typeof s=="string"?St.fromBase64String(s):St.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="server_timestamp",_b="__type__",vb="__previous_value__",Eb="__local_write_time__";function td(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[_b])===null||t===void 0?void 0:t.stringValue)===yb}function nd(s){const e=s.mapValue.fields[vb];return td(e)?nd(e):e}function ac(s){const e=vi(s.mapValue.fields[Eb].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,r,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const tp="(default)";class ys{constructor(e,t){this.projectId=e,this.database=t||tp}static empty(){return new ys("","")}get isDefaultDatabase(){return this.database===tp}isEqual(e){return e instanceof ys&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="__type__",Tb="__max__",ls={mapValue:{fields:{__type__:{stringValue:Tb}}}},Hp="__vector__",nl="value",_f={nullValue:"NULL_VALUE"};function _s(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?td(s)?4:Ab(s)?9007199254740991:rd(s)?10:11:ge()}function Ur(s,e){if(s===e)return!0;const t=_s(s);if(t!==_s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ac(s).isEqual(ac(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=vi(a.timestampValue),d=vi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return Ei(a.bytesValue).isEqual(Ei(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return pt(a.geoPointValue.latitude)===pt(l.geoPointValue.latitude)&&pt(a.geoPointValue.longitude)===pt(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return pt(a.integerValue)===pt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=pt(a.doubleValue),d=pt(l.doubleValue);return c===d?nc(c)===nc(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return Xo(s.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(jT(c)!==jT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ur(c[m],d[m])))return!1;return!0}(s,e);default:return ge()}}function oc(s,e){return(s.values||[]).find(t=>Ur(t,e))!==void 0}function vs(s,e){if(s===e)return 0;const t=_s(s),r=_s(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=pt(l.integerValue||l.doubleValue),m=pt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,e);case 3:return GT(s.timestampValue,e.timestampValue);case 4:return GT(ac(s),ac(e));case 5:return Yg(s.stringValue,e.stringValue);case 6:return function(l,c){const d=Ei(l),m=Ei(c);return d.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Re(d[p],m[p]);if(_!==0)return _}return Re(d.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Re(pt(l.latitude),pt(c.latitude));return d!==0?d:Re(pt(l.longitude),pt(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return HT(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},b=c.fields||{},R=(d=T[nl])===null||d===void 0?void 0:d.arrayValue,x=(m=b[nl])===null||m===void 0?void 0:m.arrayValue,U=Re(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:HT(R,x)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===ls.mapValue&&c===ls.mapValue)return 0;if(l===ls.mapValue)return 1;if(c===ls.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Yg(m[T],_[T]);if(b!==0)return b;const R=vs(d[m[T]],p[_[T]]);if(R!==0)return R}return Re(m.length,_.length)}(s.mapValue,e.mapValue);default:throw ge()}}function GT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Re(s,e);const t=vi(s),r=vi(e),a=Re(t.seconds,r.seconds);return a!==0?a:Re(t.nanos,r.nanos)}function HT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=vs(t[a],r[a]);if(l)return l}return Re(t.length,r.length)}function rl(s){return np(s)}function np(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=vi(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return Ei(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ce.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=np(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${np(t.fields[c])}`;return a+"}"}(s.mapValue):ge()}function vf(s){switch(_s(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(s);return e?16+vf(e):16;case 5:return 2*s.stringValue.length;case 6:return Ei(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+vf(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return Is(r.fields,(l,c)=>{a+=l.length+vf(c)}),a}(s.mapValue);default:throw ge()}}function wa(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function rp(s){return!!s&&"integerValue"in s}function lc(s){return!!s&&"arrayValue"in s}function QT(s){return!!s&&"nullValue"in s}function KT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ef(s){return!!s&&"mapValue"in s}function rd(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gp])===null||t===void 0?void 0:t.stringValue)===Hp}function Ku(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Is(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ku(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ku(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Ab(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Tb}const bb={mapValue:{fields:{[Gp]:{stringValue:Hp},[nl]:{arrayValue:{}}}}};function AC(s){return"nullValue"in s?_f:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?wa(ys.empty(),ce.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?rd(s)?bb:{mapValue:{}}:ge()}function bC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?wa(ys.empty(),ce.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?bb:"mapValue"in s?rd(s)?{mapValue:{}}:ls:ge()}function $T(s,e){const t=vs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function YT(s,e){const t=vs(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(t)}setAll(e){let t=yt.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Ku(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Is(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new cn(Ku(this.value))}}function wb(s){const e=[];return Is(s.fields,(t,r)=>{const a=new yt([t]);if(Ef(r)){const l=wb(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ft(e,0,Te.min(),Te.min(),Te.min(),cn.empty(),0)}static newFoundDocument(e,t,r,a){return new ft(e,1,t,Te.min(),r,a,0)}static newNoDocument(e,t){return new ft(e,2,t,Te.min(),Te.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new ft(e,3,t,Te.min(),Te.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t){this.position=e,this.inclusive=t}}function XT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(c.referenceValue),t.key):r=vs(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ur(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function wC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{}class ze extends Sb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SC(e,t,r):t==="array-contains"?new xC(e,r):t==="in"?new Vb(e,r):t==="not-in"?new DC(e,r):t==="array-contains-any"?new CC(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RC(e,r):new IC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(vs(t,this.value)):t!==null&&_s(this.value)===_s(t)&&this.matchesComparison(vs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tt extends Sb{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new tt(e,t)}matches(e){return il(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function il(s){return s.op==="and"}function ip(s){return s.op==="or"}function Qp(s){return Rb(s)&&il(s)}function Rb(s){for(const e of s.filters)if(e instanceof tt)return!1;return!0}function sp(s){if(s instanceof ze)return s.field.canonicalString()+s.op.toString()+rl(s.value);if(Qp(s))return s.filters.map(e=>sp(e)).join(",");{const e=s.filters.map(t=>sp(t)).join(",");return`${s.op}(${e})`}}function Ib(s,e){return s instanceof ze?function(r,a){return a instanceof ze&&r.op===a.op&&r.field.isEqual(a.field)&&Ur(r.value,a.value)}(s,e):s instanceof tt?function(r,a){return a instanceof tt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Ib(c,a.filters[d]),!0):!1}(s,e):void ge()}function xb(s,e){const t=s.filters.concat(e);return tt.create(t,s.op)}function Db(s){return s instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`}(s):s instanceof tt?function(t){return t.op.toString()+" {"+t.getFilters().map(Db).join(" ,")+"}"}(s):"Filter"}class SC extends ze{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class RC extends ze{constructor(e,t){super(e,"in",t),this.keys=Cb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class IC extends ze{constructor(e,t){super(e,"not-in",t),this.keys=Cb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cb(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ce.fromName(r.referenceValue))}class xC extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&oc(t.arrayValue,this.value)}}class Vb extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class DC extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!oc(this.value.arrayValue,t)}}class CC extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function ap(s,e=null,t=[],r=[],a=null,l=null,c=null){return new VC(s,e,t,r,a,l,c)}function Sa(s){const e=fe(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rl(r)).join(",")),e.le=t}return e.le}function wc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!wC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Ib(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ZT(s.startAt,e.startAt)&&ZT(s.endAt,e.endAt)}function Pf(s){return ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function kf(s,e){return s.filters.filter(t=>t instanceof ze&&t.field.isEqual(e))}function WT(s,e,t){let r=_f,a=!0;for(const l of kf(s,e)){let c=_f,d=!0;switch(l.op){case"<":case"<=":c=AC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=_f}$T({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];$T({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function JT(s,e,t){let r=ls,a=!0;for(const l of kf(s,e)){let c=ls,d=!0;switch(l.op){case">=":case">":c=bC(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ls}YT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];YT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Nb(s,e,t,r,a,l,c,d){return new bi(s,e,t,r,a,l,c,d)}function _l(s){return new bi(s)}function e0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Kp(s){return s.collectionGroup!==null}function Go(s){const e=fe(s);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new nt(yt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new uc(l,r))}),t.has(yt.keyField().canonicalString())||e.he.push(new uc(yt.keyField(),r))}return e.he}function Rn(s){const e=fe(s);return e.Pe||(e.Pe=NC(e,Go(s))),e.Pe}function NC(s,e){if(s.limitType==="F")return ap(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new uc(a.field,l)});const t=s.endAt?new Es(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Es(s.startAt.position,s.startAt.inclusive):null;return ap(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function op(s,e){const t=s.filters.concat([e]);return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Lf(s,e,t){return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Sc(s,e){return wc(Rn(s),Rn(e))&&s.limitType===e.limitType}function Ob(s){return`${Sa(Rn(s))}|lt:${s.limitType}`}function zo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>Db(a)).join(", ")}]`),Ac(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>rl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>rl(a)).join(",")),`Target(${r})`}(Rn(s))}; limitType=${s.limitType})`}function Rc(s,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,a){for(const l of Go(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=XT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Go(r),a)||r.endAt&&!function(c,d,m){const p=XT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Go(r),a))}(s,e)}function Mb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Pb(s){return(e,t)=>{let r=!1;for(const a of Go(s)){const l=OC(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function OC(s,e,t){const r=s.field.isKeyField()?ce.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?vs(m,p):ge()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return gb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new ht(ce.comparator);function On(){return MC}const kb=new ht(ce.comparator);function ju(...s){let e=kb;for(const t of s)e=e.insert(t.key,t);return e}function Lb(s){let e=kb;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Or(){return $u()}function Ub(){return $u()}function $u(){return new wi(s=>s.toString(),(s,e)=>s.isEqual(e))}const PC=new ht(ce.comparator),kC=new nt(ce.comparator);function De(...s){let e=kC;for(const t of s)e=e.add(t);return e}const LC=new nt(Re);function $p(){return LC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function Bb(s){return{integerValue:""+s}}function zb(s,e){return sb(e)?Bb(e):Yp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this._=void 0}}function UC(s,e,t){return s instanceof sl?function(a,l){const c={fields:{[_b]:{stringValue:yb},[Eb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&td(l)&&(l=nd(l)),l&&(c.fields[vb]=l),{mapValue:c}}(t,e):s instanceof Ra?jb(s,e):s instanceof Ia?Fb(s,e):function(a,l){const c=qb(a,l),d=t0(c)+t0(a.Ie);return rp(c)&&rp(a.Ie)?Bb(d):Yp(a.serializer,d)}(s,e)}function BC(s,e,t){return s instanceof Ra?jb(s,e):s instanceof Ia?Fb(s,e):t}function qb(s,e){return s instanceof al?function(r){return rp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class sl extends id{}class Ra extends id{constructor(e){super(),this.elements=e}}function jb(s,e){const t=Gb(e);for(const r of s.elements)t.some(a=>Ur(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ia extends id{constructor(e){super(),this.elements=e}}function Fb(s,e){let t=Gb(e);for(const r of s.elements)t=t.filter(a=>!Ur(a,r));return{arrayValue:{values:t}}}class al extends id{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function t0(s){return pt(s.integerValue||s.doubleValue)}function Gb(s){return lc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.field=e,this.transform=t}}function zC(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof Ra&&a instanceof Ra||r instanceof Ia&&a instanceof Ia?Xo(r.elements,a.elements,Ur):r instanceof al&&a instanceof al?Ur(r.Ie,a.Ie):r instanceof sl&&a instanceof sl}(s.transform,e.transform)}class qC{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class sd{}function Hb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new El(s.key,_t.none()):new vl(s.key,s.data,_t.none());{const t=s.data,r=cn.empty();let a=new nt(yt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Si(s.key,r,new Nn(a.toArray()),_t.none())}}function jC(s,e,t){s instanceof vl?function(a,l,c){const d=a.value.clone(),m=r0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof Si?function(a,l,c){if(!Tf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=r0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Qb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Yu(s,e,t,r){return s instanceof vl?function(l,c,d,m){if(!Tf(l.precondition,c))return d;const p=l.value.clone(),_=i0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,e,t,r):s instanceof Si?function(l,c,d,m){if(!Tf(l.precondition,c))return d;const p=i0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Qb(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(l,c,d){return Tf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function FC(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=qb(r.transform,a||null);l!=null&&(t===null&&(t=cn.empty()),t.set(r.field,l))}return t||null}function n0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Xo(r,a,(l,c)=>zC(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class vl extends sd{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Si extends sd{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function r0(s,e,t){const r=new Map;_e(s.length===t.length);for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,BC(c,d,t[a]))}return r}function i0(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,UC(l,c,e))}return r}class El extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xp extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&jC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ub();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Hb(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,r)=>n0(t,r))&&Xo(this.baseMutations,e.baseMutations,(t,r)=>n0(t,r))}}class Wp{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){_e(e.mutations.length===r.length);let a=function(){return PC}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Wp(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Qe;function Kb(s){switch(s){case X.OK:return ge();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return ge()}}function $b(s){if(s===void 0)return Dt("GRPC error has no .code"),X.UNKNOWN;switch(s){case Lt.OK:return X.OK;case Lt.CANCELLED:return X.CANCELLED;case Lt.UNKNOWN:return X.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return X.INTERNAL;case Lt.UNAVAILABLE:return X.UNAVAILABLE;case Lt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Lt.NOT_FOUND:return X.NOT_FOUND;case Lt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Lt.ABORTED:return X.ABORTED;case Lt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Lt.DATA_LOSS:return X.DATA_LOSS;default:return ge()}}(Qe=Lt||(Lt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new hs([4294967295,4294967295],0);function s0(s){const e=Lp().encode(s),t=new HA;return t.update(e),new Uint8Array(t.digest())}function a0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new hs([t,r],0),new hs([a,l],0)]}class ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fu(`Invalid padding: ${t}`);if(r<0)throw new Fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=hs.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(hs.fromNumber(r)));return a.compare(HC)===1&&(a=new hs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=s0(e),[r,a]=a0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ey(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=s0(e),[r,a]=a0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xc(Te.min(),a,new ht(Re),On(),De())}}class Dc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Dc(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class Yb{constructor(e,t){this.targetId=e,this.ge=t}}class Xb{constructor(e,t,r=St.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class o0{constructor(){this.pe=0,this.ye=l0(),this.we=St.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=De(),t=De(),r=De();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ge()}}),new Dc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=l0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,_e(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class QC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=On(),this.$e=of(),this.Ue=of(),this.Ke=new ht(Re)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(Pf(l))if(r===0){const c=new ce(l.path);this.ze(t,c,ft.newNoDocument(c,Te.min()))}else _e(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ei(r).toUint8Array()}catch(m){if(m instanceof pb)return Lr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new ey(c,a,l)}catch(m){return Lr(m instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Pf(d.target)){const m=new ce(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,ft.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=De();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new xc(e,t,this.Ke,this.Qe,r);return this.Qe=On(),this.$e=of(),this.Ue=of(),this.Ke=new ht(Re),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new o0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new nt(Re),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new nt(Re),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new o0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function of(){return new ht(ce.comparator)}function l0(){return new ht(ce.comparator)}const KC={asc:"ASCENDING",desc:"DESCENDING"},$C={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YC={and:"AND",or:"OR"};class XC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lp(s,e){return s.useProto3Json||Ac(e)?e:{value:e}}function ol(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function ZC(s,e){return ol(s,e.toTimestamp())}function Ct(s){return _e(!!s),Te.fromTimestamp(function(t){const r=vi(t);return new vt(r.seconds,r.nanos)}(s))}function ty(s,e){return up(s,e).canonicalString()}function up(s,e){const t=function(a){return new Be(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Wb(s){const e=Be.fromString(s);return _e(lw(e)),e}function cc(s,e){return ty(s.databaseId,e.path)}function Pr(s,e){const t=Wb(e);if(t.get(1)!==s.databaseId.projectId)throw new ie(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ie(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ce(tw(t))}function Jb(s,e){return ty(s.databaseId,e)}function ew(s){const e=Wb(s);return e.length===4?Be.emptyPath():tw(e)}function cp(s){return new Be(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function tw(s){return _e(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function u0(s,e,t){return{name:cc(s,e),fields:t.value.mapValue.fields}}function nw(s,e,t){const r=Pr(s,e.name),a=Ct(e.updateTime),l=e.createTime?Ct(e.createTime):Te.min(),c=new cn({mapValue:{fields:e.fields}}),d=ft.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function WC(s,e){return"found"in e?function(r,a){_e(!!a.found),a.found.name,a.found.updateTime;const l=Pr(r,a.found.name),c=Ct(a.found.updateTime),d=a.found.createTime?Ct(a.found.createTime):Te.min(),m=new cn({mapValue:{fields:a.found.fields}});return ft.newFoundDocument(l,c,d,m)}(s,e):"missing"in e?function(r,a){_e(!!a.missing),_e(!!a.readTime);const l=Pr(r,a.missing),c=Ct(a.readTime);return ft.newNoDocument(l,c)}(s,e):ge()}function JC(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(_e(_===void 0||typeof _=="string"),St.fromBase64String(_||"")):(_e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),St.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?X.UNKNOWN:$b(p.code);return new ie(_,p.message||"")}(c);t=new Xb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Pr(s,r.document.name),l=Ct(r.document.updateTime),c=r.document.createTime?Ct(r.document.createTime):Te.min(),d=new cn({mapValue:{fields:r.document.fields}}),m=ft.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Af(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Pr(s,r.document),l=r.readTime?Ct(r.readTime):Te.min(),c=ft.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Pr(s,r.document),l=r.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new GC(a,l),d=r.targetId;t=new Yb(d,c)}}return t}function hc(s,e){let t;if(e instanceof vl)t={update:u0(s,e.key,e.value)};else if(e instanceof El)t={delete:cc(s,e.key)};else if(e instanceof Si)t={update:u0(s,e.key,e.data),updateMask:sV(e.fieldMask)};else{if(!(e instanceof Xp))return ge();t={verify:cc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof sl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ra)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ia)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof al)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:ZC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge()}(s,e.precondition)),t}function hp(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?_t.updateTime(Ct(l.updateTime)):l.exists!==void 0?_t.exists(l.exists):_t.none()}(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)_e(d.setToServerValue==="REQUEST_TIME"),m=new sl;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new Ra(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new Ia(_)}else"increment"in d?m=new al(c,d.increment):ge();const p=yt.fromServerFormat(d.fieldPath);return new Ic(p,m)}(s,a)):[];if(e.update){e.update.name;const a=Pr(s,e.update.name),l=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Nn(p.map(_=>yt.fromServerFormat(_)))}(e.updateMask);return new Si(a,l,c,t,r)}return new vl(a,l,t,r)}if(e.delete){const a=Pr(s,e.delete);return new El(a,t)}if(e.verify){const a=Pr(s,e.verify);return new Xp(a,t)}return ge()}function eV(s,e){return s&&s.length>0?(_e(e!==void 0),s.map(t=>function(a,l){let c=a.updateTime?Ct(a.updateTime):Ct(l);return c.isEqual(Te.min())&&(c=Ct(l)),new qC(c,a.transformResults||[])}(t,e))):[]}function rw(s,e){return{documents:[Jb(s,e.path)]}}function iw(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Jb(s,a);const l=function(p){if(p.length!==0)return ow(tt.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(b){return{field:qo(b.field),direction:nV(b.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=lp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function sw(s){let e=ew(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){_e(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const b=aw(T);return b instanceof tt&&Qp(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(b=>function(x){return new uc(jo(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(t.orderBy));let d=null;t.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,Ac(b)?null:b}(t.limit));let m=null;t.startAt&&(m=function(T){const b=!!T.before,R=T.values||[];return new Es(R,b)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const b=!T.before,R=T.values||[];return new Es(R,b)}(t.endAt)),Nb(e,a,c,l,d,"F",m,p)}function tV(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aw(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jo(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=jo(t.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(s):s.fieldFilter!==void 0?function(t){return ze.create(jo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return tt.create(t.compositeFilter.filters.map(r=>aw(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(s):ge()}function nV(s){return KC[s]}function rV(s){return $C[s]}function iV(s){return YC[s]}function qo(s){return{fieldPath:s.canonicalString()}}function jo(s){return yt.fromServerFormat(s.fieldPath)}function ow(s){return s instanceof ze?function(t){if(t.op==="=="){if(KT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NAN"}};if(QT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NAN"}};if(QT(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(t.field),op:rV(t.op),value:t.value}}}(s):s instanceof tt?function(t){const r=t.getFilters().map(a=>ow(a));return r.length===1?r[0]:{compositeFilter:{op:iV(t.op),filters:r}}}(s):ge()}function sV(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,r,a,l=Te.min(),c=Te.min(),d=St.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.Tt=e}}function aV(s,e){let t;if(e.document)t=nw(s.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=Da(e.noDocument.readTime);t=ft.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=ce.fromSegments(e.unknownDocument.path),a=Da(e.unknownDocument.version);t=ft.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new vt(a[0],a[1]);return Te.fromTimestamp(l)}(e.readTime)),t}function c0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:cc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ol(l,c.version.toTimestamp()),createTime:ol(l,c.createTime.toTimestamp())}}(s.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xa(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:t.path.toArray(),version:xa(e.version)}}return r}function Uf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function xa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Da(s){const e=new vt(s.seconds,s.nanoseconds);return Te.fromTimestamp(e)}function ga(s,e){const t=(e.baseMutations||[]).map(l=>hp(s.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>hp(s.Tt,l)),a=vt.fromMillis(e.localWriteTimeMs);return new Zp(e.batchId,a,t,r)}function Gu(s){const e=Da(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Da(s.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return _e(l.documents.length===1),Rn(_l(ew(l.documents[0])))}(s.query):function(l){return Rn(sw(l))}(s.query),new mi(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,St.fromBase64String(s.resumeToken))}function cw(s,e){const t=xa(e.snapshotVersion),r=xa(e.lastLimboFreeSnapshotVersion);let a;a=Pf(e.target)?rw(s.Tt,e.target):iw(s.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function ny(s){const e=sw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Lf(e,e.limit,"L"):e}function Mg(s,e){return new Jp(e.largestBatchId,hp(s.Tt,e.overlayMutation))}function h0(s,e){const t=e.path.lastSegment();return[s,pn(e.path.popLast()),t]}function f0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:xa(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{getBundleMetadata(e,t){return d0(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Da(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return d0(e).put(function(a){return{bundleId:a.id,createTime:xa(Ct(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return m0(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:ny(l.bundledQuery),readTime:Da(l.readTime)}}(r)})}saveNamedQuery(e,t){return m0(e).put(function(a){return{name:a.name,readTime:xa(Ct(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function d0(s){return Kt(s,Wf)}function m0(s){return Kt(s,Jf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new ad(e,r)}getOverlay(e,t){return ku(e).get(h0(this.userId,t)).next(r=>r?Mg(this.serializer,r):null)}getOverlays(e,t){const r=Or();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new Jp(t,c);a.push(this.Et(e,d))}),j.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(pn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(ku(e).J(Jg,d))}),j.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Or(),l=pn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ku(e).G(Jg,c).next(d=>{for(const m of d){const p=Mg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Or();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ku(e).Z({index:hb,range:d},(m,p,_)=>{const T=Mg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return ku(e).put(function(a,l,c){const[d,m,p]=h0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:hc(a.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function ku(s){return Kt(s,ed)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{dt(e){return Kt(e,jp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),nc(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=vi(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Ei(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?Ab(e)?this.ft(t,Number.MAX_SAFE_INTEGER):rd(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ge()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const c=nl,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(pt(d)),this.wt(c,t),this.Rt(l[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),ce.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}pa.xt=new pa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=255;function uV(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function g0(s){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=uV(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class cV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=g0(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=g0(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Po),this.jt(255)}Ht(){this.Jt(Po),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Po?(this.jt(Po),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Po?(this.Jt(Po),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class hV{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class fV{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Lu{constructor(){this.Zt=new cV,this.Xt=new hV(this.Zt),this.en=new fV(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ya(this.indexId,this.documentKey,this.arrayValue,r)}}function rs(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=p0(s.arrayValue,e.arrayValue),t!==0?t:(t=p0(s.directionalValue,e.directionalValue),t!==0?t:ce.comparator(s.documentKey,e.documentKey)))}function p0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.rn=new nt((t,r)=>yt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(_e(e.collectionGroup===this.collectionId),this.an)return!1;const t=Xg(e);if(t!==void 0&&!this.cn(t))return!1;const r=fa(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new nt(yt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new gf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new gf(r.field,r.dir==="asc"?0:1)));return new Df(Df.UNKNOWN_ID,this.collectionId,t,tc.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(s){var e,t;if(_e(s instanceof ze||s instanceof tt),s instanceof ze){if(s instanceof Vb){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>ze.create(s.field,"==",l)))||[];return tt.create(a,"or")}return s}const r=s.filters.map(a=>hw(a));return tt.create(r,s.op)}function dV(s){if(s.getFilters().length===0)return[];const e=mp(hw(s));return _e(fw(e)),fp(e)||dp(e)?[e]:e.getFilters()}function fp(s){return s instanceof ze}function dp(s){return s instanceof tt&&Qp(s)}function fw(s){return fp(s)||dp(s)||function(t){if(t instanceof tt&&ip(t)){for(const r of t.getFilters())if(!fp(r)&&!dp(r))return!1;return!0}return!1}(s)}function mp(s){if(_e(s instanceof ze||s instanceof tt),s instanceof ze)return s;if(s.filters.length===1)return mp(s.filters[0]);const e=s.filters.map(r=>mp(r));let t=tt.create(e,s.op);return t=Bf(t),fw(t)?t:(_e(t instanceof tt),_e(il(t)),_e(t.filters.length>1),t.filters.reduce((r,a)=>ry(r,a)))}function ry(s,e){let t;return _e(s instanceof ze||s instanceof tt),_e(e instanceof ze||e instanceof tt),t=s instanceof ze?e instanceof ze?function(a,l){return tt.create([a,l],"and")}(s,e):_0(s,e):e instanceof ze?_0(e,s):function(a,l){if(_e(a.filters.length>0&&l.filters.length>0),il(a)&&il(l))return xb(a,l.getFilters());const c=ip(a)?a:l,d=ip(a)?l:a,m=c.filters.map(p=>ry(p,d));return tt.create(m,"or")}(s,e),Bf(t)}function _0(s,e){if(il(e))return xb(e,s.getFilters());{const t=e.filters.map(r=>ry(s,r));return tt.create(t,"or")}}function Bf(s){if(_e(s instanceof ze||s instanceof tt),s instanceof ze)return s;const e=s.getFilters();if(e.length===1)return Bf(e[0]);if(Rb(s))return s;const t=e.map(a=>Bf(a)),r=[];return t.forEach(a=>{a instanceof ze?r.push(a):a instanceof tt&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:tt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Tn=new iy}addToCollectionParentIndex(e,t){return this.Tn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Fn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new nt(Be.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new nt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="IndexedDbIndexManager",lf=new Uint8Array(0);class gV{constructor(e,t){this.databaseId=t,this.In=new iy,this.En=new wi(r=>Sa(r),(r,a)=>wc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:pn(a)};return E0(e).put(l)}return j.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[JA(t),""],!1,!0);return E0(e).G(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Nr(c.parent))}return r})}addFieldIndex(e,t){const r=Uu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Lo(e);return l.next(d=>{c.put(f0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Uu(e),a=Lo(e),l=ko(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Uu(e),r=ko(e),a=Lo(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return j.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new y0(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=ko(e);let a=!0;const l=new Map;return j.forEach(this.dn(t),c=>this.An(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=De();const d=[];return j.forEach(l,(m,p)=>{se(v0,`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(me=>`${me.fieldPath}:${me.kind}`).join(",")}`}(m)} to execute ${Sa(t)}`);const _=function(W,me){const le=Xg(me);if(le===void 0)return null;for(const de of kf(W,le.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(p,m),T=function(W,me){const le=new Map;for(const de of fa(me))for(const V of kf(W,de.fieldPath))switch(V.op){case"==":case"in":le.set(de.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return le.set(de.fieldPath.canonicalString(),V.value),Array.from(le.values())}return null}(p,m),b=function(W,me){const le=[];let de=!0;for(const V of fa(me)){const S=V.kind===0?WT(W,V.fieldPath,W.startAt):JT(W,V.fieldPath,W.startAt);le.push(S.value),de&&(de=S.inclusive)}return new Es(le,de)}(p,m),R=function(W,me){const le=[];let de=!0;for(const V of fa(me)){const S=V.kind===0?JT(W,V.fieldPath,W.endAt):WT(W,V.fieldPath,W.endAt);le.push(S.value),de&&(de=S.inclusive)}return new Es(le,de)}(p,m),x=this.Rn(m,p,b),U=this.Rn(m,p,R),k=this.Vn(m,p,T),Q=this.mn(m.indexId,_,x,b.inclusive,U,R.inclusive,k);return j.forEach(Q,re=>r.H(re,t.limit).next(W=>{W.forEach(me=>{const le=ce.fromSegments(me.documentKey);c.has(le)||(c=c.add(le),d.push(le))})}))}).next(()=>d)}return j.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=dV(tt.create(e.filters,"and")).map(r=>ap(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const b=t?this.fn(t[T/p]):lf,R=this.gn(e,b,r[T%p],a),x=this.pn(e,b,l[T%p],c),U=d.map(k=>this.gn(e,b,k,!0));_.push(...this.createRange(R,x,U))}return _}gn(e,t,r,a){const l=new ya(e,ce.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new ya(e,ce.empty(),t,r);return a?l.nn():l}An(e,t){const r=new y0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.dn(t);return j.forEach(a,l=>this.An(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new nt(yt.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Lu;for(const a of fa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);pa.xt.At(l,c)}return r.Yt()}fn(e){const t=new Lu;return pa.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Lu;return pa.xt.At(wa(this.databaseId,t),r.tn(function(l){const c=fa(l);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Lu);let l=0;for(const c of fa(e)){const d=r[l++];for(const m of a)if(this.Sn(t,c.fieldPath)&&lc(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);pa.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Lu;m.seed(d.Yt()),pa.xt.At(c,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Uu(e),a=Lo(e);return(t?r.G(Wg,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const c=[];return j.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const b=T?new tc(T.sequenceNumber,new Fn(Da(T.readTime),new ce(Nr(T.documentKey)),T.largestBatchId)):tc.empty(),R=_.fields.map(([x,U])=>new gf(yt.fromServerFormat(x),U));return new Df(_.indexId,_.collectionGroup,R,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Uu(e),l=Lo(e);return this.vn(e).next(c=>a.G(Wg,IDBKeyRange.bound(t,t)).next(d=>j.forEach(d,m=>l.put(f0(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),j.forEach(d,m=>this.Cn(e,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?j.resolve():this.Mn(e,l,m,p,_)}))))})}xn(e,t,r,a){return ko(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return ko(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=ko(e);let l=new nt(rs);return a.Z({index:cb,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{l=l.add(new ya(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new nt(rs);const a=this.yn(t,e);if(a==null)return r;const l=Xg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(lc(c))for(const d of c.arrayValue.values||[])r=r.add(new ya(t.indexId,e.key,this.fn(d),a))}else r=r.add(new ya(t.indexId,e.key,lf,a));return r}Mn(e,t,r,a,l){se(v0,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,_,T,b){const R=m.getIterator(),x=p.getIterator();let U=Mo(R),k=Mo(x);for(;U||k;){let Q=!1,re=!1;if(U&&k){const W=_(U,k);W<0?re=!0:W>0&&(Q=!0)}else U!=null?re=!0:Q=!0;Q?(T(k),k=Mo(x)):re?(b(U),U=Mo(R)):(U=Mo(R),k=Mo(x))}}(a,l,rs,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),j.waitFor(c)}vn(e){let t=1;return Lo(e).Z({index:ub,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>rs(c,d)).filter((c,d,m)=>!d||rs(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=rs(c,e),m=rs(c,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,lf,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,lf,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return rs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(T0)}getMinOffset(e,t){return j.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ge())).next(T0)}}function E0(s){return Kt(s,sc)}function ko(s){return Kt(s,Mf)}function Uu(s){return Kt(s,qp)}function Lo(s){return Kt(s,Of)}function T0(s){_e(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;Up(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Fn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(s,e,t){const r=s.store(fr),a=s.store(Wo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:c},(_,T,b)=>(d++,b.delete()));l.push(m.next(()=>{_e(d===1)}));const p=[];for(const _ of t.mutations){const T=ab(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return j.waitFor(l).next(()=>p)}function zf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ge();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(dw,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class od{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){_e(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new od(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(e).Z({index:va,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Fo(e),c=is(e);return c.add({}).next(d=>{_e(typeof d=="number");const m=new Zp(d,t,r,a),p=function(R,x,U){const k=U.baseMutations.map(re=>hc(R.Tt,re)),Q=U.mutations.map(re=>hc(R.Tt,re));return{userId:x,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:k,mutations:Q}}(this.serializer,this.userId,m),_=[];let T=new nt((b,R)=>Re(b.canonicalString(),R.canonicalString()));for(const b of a){const R=ab(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(p)),_.push(l.put(R,YD))}return T.forEach(b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),j.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return is(e).get(t).next(r=>r?(_e(r.userId===this.userId),ga(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?j.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return is(e).Z({index:va,range:a},(c,d,m)=>{d.userId===this.userId&&(_e(d.batchId>=r),l=ga(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fs;return is(e).Z({index:va,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fs],[this.userId,Number.POSITIVE_INFINITY]);return is(e).G(va,t).next(r=>r.map(a=>ga(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Fo(e).Z({range:a},(c,d,m)=>{const[p,_,T]=c,b=Nr(_);if(p===this.userId&&t.path.isEqual(b))return is(e).get(T).next(R=>{if(!R)throw ge();_e(R.userId===this.userId),l.push(ga(this.serializer,R))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(Re);const a=[];return t.forEach(l=>{const c=pf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Fo(e).Z({range:d},(p,_,T)=>{const[b,R,x]=p,U=Nr(R);b===this.userId&&l.path.isEqual(U)?r=r.add(x):T.done()});a.push(m)}),j.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=pf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new nt(Re);return Fo(e).Z({range:c},(m,p,_)=>{const[T,b,R]=m,x=Nr(b);T===this.userId&&r.isPrefixOf(x)?x.length===a&&(d=d.add(R)):_.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(is(e).get(l).next(c=>{if(c===null)throw ge();_e(c.userId===this.userId),r.push(ga(this.serializer,c))}))}),j.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return mw(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),j.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Fo(e).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Nr(l[1]);a.push(m)}else d.done()}).next(()=>{_e(a.length===0)})})}containsKey(e,t){return gw(e,this.userId,t)}Qn(e){return pw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:fs,lastStreamToken:""})}}function gw(s,e,t){const r=pf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Fo(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function is(s){return Kt(s,fr)}function Fo(s){return Kt(s,Wo)}function pw(s){return Kt(s,rc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ca(0)}static Kn(){return new Ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Ca(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Te.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uo(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Uo(e).Z((c,d)=>{const m=Gu(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Uo(e).Z((r,a)=>{const l=Gu(a);t(l)})}Wn(e){return b0(e).get(Nf).next(t=>(_e(t!==null),t))}Gn(e,t){return b0(e).put(Nf,t)}zn(e,t){return Uo(e).put(cw(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sa(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Uo(e).Z({range:a,index:lb},(c,d,m)=>{const p=Gu(d);wc(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=os(e);return t.forEach(c=>{const d=pn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),j.waitFor(a)}removeMatchingKeys(e,t,r){const a=os(e);return j.forEach(t,l=>{const c=pn(l.path);return j.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=os(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=os(e);let l=De();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Nr(c[1]),_=new ce(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=pn(t.path),a=IDBKeyRange.bound([r],[JA(r)],!1,!0);let l=0;return os(e).Z({index:zp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Uo(e).get(t).next(r=>r?Gu(r):null)}}function Uo(s){return Kt(s,Jo)}function b0(s){return Kt(s,Aa)}function os(s){return Kt(s,el)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="LruGarbageCollector",yV=1048576;function S0([s,e],[t,r]){const a=Re(s,t);return a===0?Re(e,r):a}class _V{constructor(e){this.Hn=e,this.buffer=new nt(S0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();S0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(w0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rs(t)?se(w0,"Ignoring IndexedDB error during garbage collection: ",t):await Ss(t)}await this.er(3e5)})}}class vV{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Vn.ae);const r=new _V(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(A0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),Bo()<=qe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function _w(s,e){return new vV(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t){this.db=e,this.garbageCollector=_w(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return uf(e,r)}removeReference(e,t,r){return uf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uf(e,t)}ar(e,t){return function(a,l){let c=!1;return pw(a).X(d=>gw(a,d,l).next(m=>(m&&(c=!0),j.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(c,d)=>{if(d<=t){const m=this.ar(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Te.min()),os(e).delete(function(T){return[0,pn(T.path)]}(c))))});a.push(m)}}).next(()=>j.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uf(e,t)}_r(e,t){const r=os(e);let a,l=Vn.ae;return r.Z({index:zp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==Vn.ae&&t(new ce(Nr(a)),l),l=p,a=m):l=Vn.ae}).next(()=>{l!==Vn.ae&&t(new ce(Nr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uf(s,e){return os(s).put(function(r,a){return{targetId:0,path:pn(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.changes=new wi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ua(e).put(r)}removeEntry(e,t,r){return ua(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Uf(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=ft.newInvalidDocument(t);return ua(e).Z({index:yf,range:IDBKeyRange.only(Bu(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:ft.newInvalidDocument(t)};return ua(e).Z({index:yf,range:IDBKeyRange.only(Bu(t))},(a,l)=>{r={document:this.cr(t,l),size:zf(l)}}).next(()=>r)}getEntries(e,t){let r=On();return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(e,t){let r=On(),a=new ht(ce.comparator);return this.hr(e,t,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,zf(c))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return j.resolve();let a=new nt(x0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Bu(a.first()),Bu(a.last())),c=a.getIterator();let d=c.getNext();return ua(e).Z({index:yf,range:l},(m,p,_)=>{const T=ce.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&x0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(Bu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ua(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=On();for(const T of p){const b=this.cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(Rc(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=On();const c=I0(t,r),d=I0(t,Fn.max());return ua(e).Z({index:ob,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new AV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return R0(e).get(Zg).next(t=>(_e(!!t),t))}ur(e,t){return R0(e).put(Zg,t)}cr(e,t){if(t){const r=aV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return ft.newInvalidDocument(e)}}function Ew(s){return new TV(s)}class AV extends vw{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new wi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new nt((l,c)=>Re(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=c0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=zf(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=c0(this.Ir.serializer,c.convertToNoDocument(Te.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function R0(s){return Kt(s,ic)}function ua(s){return Kt(s,Vf)}function Bu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function I0(s,e){const t=e.documentKey.path.toArray();return[s,Uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x0(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Re(t[l],r[l]),a)return a;return a=Re(t.length,r.length),a||(a=Re(t[t.length-2],r[r.length-2]),a||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Yu(r.mutation,a,Nn.empty(),vt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,t,r=De()){const a=Or();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=ju();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Or();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,De()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=On();const c=$u(),d=function(){return $u()}();return t.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Si)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Yu(_.mutation,p,_.mutation.getFieldMask(),vt.now())):c.set(p.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new bV(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=$u();let a=new ht((c,d)=>c-d),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||Nn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||De()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Ub();_.forEach(b=>{if(!l.has(b)){const R=Hb(t.get(b),r.get(b));R!==null&&T.set(b,R),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return j.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):j.resolve(Or());let d=Zo,m=l;return c.next(p=>j.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{m=m.insert(_,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,De())).next(_=>({batchId:d,changes:Lb(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let a=ju();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=ju();return this.indexManager.getCollectionParents(e,l).next(d=>j.forEach(d,m=>{const p=function(T,b){return new bi(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,ft.newInvalidDocument(_)))});let d=ju();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&Yu(_.mutation,p,Nn.empty(),vt.now()),Rc(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return j.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Ct(a.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:ny(a.bundledQuery),readTime:Ct(a.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.overlays=new ht(ce.comparator),this.Rr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Or();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const a=Or(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ht((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Or(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Or(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return j.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jp(t,r));let l=this.Rr.get(t);l===void 0&&(l=De(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Vr=new nt(Jt.mr),this.gr=new nt(Jt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Jt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Jt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new ce(new Be([])),r=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ce(new Be([])),r=new Jt(t,e),a=new Jt(t,e+1);let l=De();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Jt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ce.comparator(e.key,t.key)||Re(e.Cr,t.Cr)}static pr(e,t){return Re(e.Cr,t.Cr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new nt(Jt.mr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Zp(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new Jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?fs:this.Fr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(Re);return t.forEach(a=>{const l=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),j.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new ce(l),0);let d=new nt(Re);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),j.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){_e(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return j.forEach(t.mutations,a=>{const l=new Jt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Jt(t,0),a=this.Mr.firstAfterOrEqual(r);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.kr=e,this.docs=function(){return new ht(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let r=On();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ft.newInvalidDocument(a))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=On();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Up(tb(_),r)<=0||(a.has(_.key)||Rc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ge()}qr(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DV(this)}getSize(e){return j.resolve(this.size)}}class DV extends vw{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.persistence=e,this.Qr=new wi(t=>Sa(t),wc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.$r=0,this.Ur=new sy,this.targetCount=0,this.Kr=Ca.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),j.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.zn(t),j.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Vn(0),this.zr=!1,this.zr=!0,this.jr=new RV,this.referenceDelegate=e(this),this.Hr=new CV(this),this.indexManager=new mV,this.remoteDocumentCache=function(a){return new xV(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new uw(t),this.Yr=new wV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new IV(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new VV(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return j.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class VV extends rb{constructor(e){super(),this.currentSequenceNumber=e}}class ld{constructor(e){this.persistence=e,this.ti=new sy,this.ni=null}static ri(e){return new ld(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),j.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ii,r=>{const a=ce.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,Te.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return j.or([()=>j.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class qf{constructor(e,t){this.persistence=e,this.oi=new wi(r=>pn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=_w(this,t)}static ri(e,t){return new qf(e,t)}Zr(){}Xr(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return j.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?j.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,Te.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),j.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vf(e.data.value)),t}ar(e,t,r){return j.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return j.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Zf("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(bc)}(e),function(m){m.createObjectStore(rc,{keyPath:$D}),m.createObjectStore(fr,{keyPath:zT,autoIncrement:!0}).createIndex(va,qT,{unique:!0}),m.createObjectStore(Wo)}(e),D0(e),function(m){m.createObjectStore(da)}(e));let c=j.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(el),m.deleteObjectStore(Jo),m.deleteObjectStore(Aa)}(e),D0(e)),c=c.next(()=>function(m){const p=m.store(Aa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Nf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(fr).G().next(T=>{m.deleteObjectStore(fr),m.createObjectStore(fr,{keyPath:zT,autoIncrement:!0}).createIndex(va,qT,{unique:!0});const b=p.store(fr),R=T.map(x=>b.put(x));return j.waitFor(R)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(tl,{keyPath:rC})})(e)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(ic)}(e),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Wf,{keyPath:iC})})(e),function(m){m.createObjectStore(Jf,{keyPath:sC})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(ed,{keyPath:fC});p.createIndex(Jg,dC,{unique:!1}),p.createIndex(hb,mC,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(Vf,{keyPath:XD});p.createIndex(yf,ZD),p.createIndex(ob,WD)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(da))),r<14&&a>=14&&(c=c.next(()=>this.Pi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(qp,{keyPath:aC,autoIncrement:!0}).createIndex(Wg,oC,{unique:!1}),m.createObjectStore(Of,{keyPath:lC}).createIndex(ub,uC,{unique:!1}),m.createObjectStore(Mf,{keyPath:cC}).createIndex(cb,hC,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Of).clear()}).next(()=>{t.objectStore(Mf).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(jp,{keyPath:gC})})(e)})),c}ai(e){let t=0;return e.store(da).Z((r,a)=>{t+=zf(a)}).next(()=>{const r={byteSize:t};return e.store(ic).put(Zg,r)})}_i(e){const t=e.store(rc),r=e.store(fr);return t.G().next(a=>j.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,fs],[l.userId,l.lastAcknowledgedBatchId]);return r.G(va,c).next(d=>j.forEach(d,m=>{_e(m.userId===l.userId);const p=ga(this.serializer,m);return mw(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(el),r=e.store(da);return e.store(Aa).get(Nf).next(a=>{const l=[];return r.Z((c,d)=>{const m=new Be(c),p=function(T){return[0,pn(T)]}(m);l.push(t.get(p).next(_=>_?j.resolve():(T=>t.put({targetId:0,path:pn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>j.waitFor(l))})}ci(e,t){e.createObjectStore(sc,{keyPath:nC});const r=t.store(sc),a=new iy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:pn(m)})}};return t.store(da).Z({Y:!0},(c,d)=>{const m=new Be(c);return l(m.popLast())}).next(()=>t.store(Wo).Z({Y:!0},([c,d,m],p)=>{const _=Nr(d);return l(_.popLast())}))}li(e){const t=e.store(Jo);return t.Z((r,a)=>{const l=Gu(a),c=cw(this.serializer,l);return t.put(c)})}hi(e,t){const r=t.store(da),a=[];return r.Z((l,c)=>{const d=t.store(Vf),m=function(T){return T.document?new ce(Be.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):ge()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>j.waitFor(a))}Pi(e,t){const r=t.store(fr),a=Ew(this.serializer),l=new ay(ld.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:De();ga(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),j.forEach(d,(m,p)=>{const _=new en(p),T=ad.It(this.serializer,_),b=l.getIndexManager(_),R=od.It(_,this.serializer,b,l.referenceDelegate);return new Tw(a,R,T,b).recalculateAndSaveOverlaysForDocumentKeys(new ep(t,Vn.ae),m).next()})})}}function D0(s){s.createObjectStore(el,{keyPath:eC}).createIndex(zp,tC,{unique:!0}),s.createObjectStore(Jo,{keyPath:"targetId"}).createIndex(lb,JD,{unique:!0}),s.createObjectStore(Aa)}const ss="IndexedDbPersistence",Pg=18e5,kg=5e3,Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Aw="main";class oy{constructor(e,t,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!oy.D())throw new ie(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EV(this,a),this.gi=t+Aw,this.serializer=new uw(m),this.pi=new Mr(this.gi,this.di,new NV(this.serializer)),this.jr=new lV,this.Hr=new pV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ew(this.serializer),this.Yr=new oV,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&Dt(ss,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(X.FAILED_PRECONDITION,Lg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Vn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Rs(e))return se(ss,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(ss,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return zu(e).get(Oo).next(t=>j.resolve(this.Ni(t)))}Bi(e){return cf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Pg)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Kt(t,tl);return r.G().next(a=>{const l=this.qi(a,Pg),c=a.filter(d=>l.indexOf(d)===-1);return j.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?j.resolve(!0):zu(e).get(Oo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,kg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ie(X.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||cf(e).G().next(r=>this.qi(r,kg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(ss,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[bc,tl],e=>{const t=new ep(e,Vn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>cf(e).G().next(t=>this.qi(t,Pg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return od.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gV(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return ad.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){se(ss,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?_C:m===16?yC:m===15?Fp:m===14?mb:m===13?db:m===12?pC:m===11?fb:void ge()}(this.di);let c;return this.pi.runTransaction(e,a,l,d=>(c=new ep(d,this.Gr?this.Gr.next():Vn.ae),t==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ie(X.FAILED_PRECONDITION,nb);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return zu(e).get(Oo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,kg)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(X.FAILED_PRECONDITION,Lg)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zu(e).put(Oo,t)}static D(){return Mr.D()}xi(e){const t=zu(e);return t.get(Oo).next(r=>this.Ni(r)?(se(ss,"Releasing primary lease."),t.delete(Oo)):j.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;DA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(ss,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt(ss,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zu(s){return Kt(s,bc)}function cf(s){return Kt(s,tl)}function ly(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=De(),a=De();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new uy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return DA()?8:ib(If())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new OV;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(Bo()<=qe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),j.resolve()):(Bo()<=qe.DEBUG&&se("QueryEngine","Query:",zo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Bo()<=qe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(t))):j.resolve())}rs(e,t){if(e0(t))return j.resolve(null);let r=Rn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Lf(t,null,"F"),r=Rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=De(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Lf(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return e0(t)||a.isEqual(Te.min())?j.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?j.resolve(null):(Bo()<=qe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(t)),this.hs(e,c,t,eb(a,Zo)).next(d=>d))})}cs(e,t){let r=new nt(Pb(e));return t.forEach((a,l)=>{Rc(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return Bo()<=qe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ns.getDocumentsMatchingQuery(e,t,Fn.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",MV=3e8;class PV{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new ht(Re),this.Is=new wi(l=>Sa(l),wc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ww(s,e,t,r){return new PV(s,e,t,r)}async function Sw(s,e){const t=fe(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=De();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function kV(s,e){const t=fe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,b=T.keys();let R=j.resolve();return b.forEach(x=>{R=R.next(()=>_.getEntry(m,x)).next(U=>{const k=p.docVersions.get(x);_e(k!==null),U.version.compareTo(k)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=De();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Rw(s){const e=fe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function LV(s,e){const t=fe(s),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,T)));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(St.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(T,R),function(U,k,Q){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=MV?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(b,R,_)&&d.push(t.Hr.updateTargetData(l,R))});let m=On(),p=De();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(Iw(l,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(Te.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return j.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function Iw(s,e,t){let r=De(),a=De();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=On();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(cy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function UV(s,e){const t=fe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ll(s,e){const t=fe(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,j.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new mi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ul(s,e,t){const r=fe(s),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Rs(c))throw c;se(cy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function jf(s,e,t){const r=fe(s);let a=Te.min(),l=De();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=fe(m),b=T.Is.get(_);return b!==void 0?j.resolve(T.Ts.get(b)):T.Hr.getTargetData(p,_)}(r,c,Rn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:De())).next(d=>(Cw(r,Mb(e),d),{documents:d,gs:l})))}function xw(s,e){const t=fe(s),r=fe(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(c=>c?c.target:null))}function Dw(s,e){const t=fe(s),r=t.Es.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,eb(r,Zo),Number.MAX_SAFE_INTEGER)).then(a=>(Cw(t,e,a),a))}function Cw(s,e,t){let r=s.Es.get(e)||Te.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(e,r)}async function BV(s,e,t,r){const a=fe(s);let l=De(),c=On();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const T=e.ys(p);T.setReadTime(e.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await ll(a,function(_){return Rn(_l(Be.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>Iw(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function zV(s,e,t=De()){const r=await ll(s,Rn(ny(e.bundledQuery))),a=fe(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=Ct(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(St.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firestore_clients";function C0(s,e){return`${Vw}_${s}_${e}`}const Nw="firestore_mutations";function V0(s,e,t){let r=`${Nw}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Ow="firestore_targets";function Ug(s,e){return`${Ow}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="SharedClientState";class Ff{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ie(a.error.code,a.error.message))),c?new Ff(e,t,a.state,l):(Dt(Vr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ie(r.error.code,r.error.message))),l?new Xu(e,r.state,a):(Dt(Vr,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=$p();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=sb(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Gf(e,l):(Dt(Vr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class hy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new hy(t.clientId,t.onlineState):(Dt(Vr,`Failed to parse online state: ${e}`),null)}}class gp{constructor(){this.activeTargetIds=$p()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ht(Re),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=C0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new gp),this.Ls=new RegExp(`^${Vw}_${c}_([^_]*)$`),this.ks=new RegExp(`^${Nw}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Ow}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(C0(this.persistenceKey,r));if(a){const l=Gf.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ug(this.persistenceKey,e));if(a){const l=Xu.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Vr,"READ",e,t),t}setItem(e,t){se(Vr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Vr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(Vr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let c=Vn.ae;if(l!=null)try{const d=JSON.parse(l);_e(typeof d=="number"),c=d}catch(d){Dt(Vr,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==Vn.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new Ff(this.currentUser,e,t,r),l=V0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=V0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=Ug(this.persistenceKey,e),l=new Xu(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Gf.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Ff.Ss(new en(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return Xu.Ss(a,t)}Ks(e){return hy.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(Vr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=$p();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Mw{constructor(){this.ho=new gp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new gp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="ConnectivityMonitor";class O0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(N0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(N0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function pp(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="RestConnection",jV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===tp?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=pp(),d=this.bo(e,t.toUriEncodedString());se(zg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(se(zg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Lr(zg,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=jV[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class HV extends FV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=pp();return new Promise((c,d)=>{const m=new QA;m.setWithCredentials(!0),m.listenOnce(KA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case mf.NO_ERROR:const _=m.getResponseJson();se(mn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case mf.TIMEOUT:se(mn,`RPC '${e}' ${l} timed out`),d(new ie(X.DEADLINE_EXCEEDED,"Request time out"));break;case mf.HTTP_ERROR:const T=m.getStatus();if(se(mn,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b==null?void 0:b.error;if(R&&R.status&&R.message){const x=function(k){const Q=k.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Q)>=0?Q:X.UNKNOWN}(R.status);d(new ie(x,R.message))}else d(new ie(X.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ie(X.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{se(mn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);se(mn,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=pp(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=XA(),d=YA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");se(mn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let b=!1,R=!1;const x=new GV({Fo:k=>{R?se(mn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(b||(se(mn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),se(mn,`RPC '${e}' stream ${a} sending:`,k),T.send(k))},Mo:()=>T.close()}),U=(k,Q,re)=>{k.listen(Q,W=>{try{re(W)}catch(me){setTimeout(()=>{throw me},0)}})};return U(T,qu.EventType.OPEN,()=>{R||(se(mn,`RPC '${e}' stream ${a} transport opened.`),x.Qo())}),U(T,qu.EventType.CLOSE,()=>{R||(R=!0,se(mn,`RPC '${e}' stream ${a} transport closed`),x.Uo())}),U(T,qu.EventType.ERROR,k=>{R||(R=!0,Lr(mn,`RPC '${e}' stream ${a} transport errored:`,k),x.Uo(new ie(X.UNAVAILABLE,"The operation could not be completed")))}),U(T,qu.EventType.MESSAGE,k=>{var Q;if(!R){const re=k.data[0];_e(!!re);const W=re,me=(W==null?void 0:W.error)||((Q=W[0])===null||Q===void 0?void 0:Q.error);if(me){se(mn,`RPC '${e}' stream ${a} received error:`,me);const le=me.status;let de=function(I){const N=Lt[I];if(N!==void 0)return $b(N)}(le),V=me.message;de===void 0&&(de=X.INTERNAL,V="Unknown error status: "+le+" with message "+me.message),R=!0,x.Uo(new ie(de,V)),T.close()}else se(mn,`RPC '${e}' stream ${a} received:`,re),x.Ko(re)}}),U(d,$A.STAT_EVENT,k=>{k.stat===$g.PROXY?se(mn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===$g.NOPROXY&&se(mn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof window<"u"?window:null}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(s){return new XC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class kw{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fy(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ie(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QV extends kw{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=JC(this.serializer,e),r=function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?Ct(c.readTime):Te.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=cp(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Pf(m)?{documents:rw(l,m)}:{query:iw(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Zb(l,c.resumeToken);const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=ol(l,c.snapshotVersion.toTimestamp());const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=tV(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=cp(this.serializer),t.removeTarget=e,this.I_(t)}}class KV extends kw{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=eV(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=cp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hc(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{}class YV extends $V{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ie(X.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,up(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(X.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,up(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(X.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class XV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Dt(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class ZV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{xs(this)&&(se(Va,"Restarting streams for network reachability change."),await async function(m){const p=fe(m);p.W_.add(4),await Tl(p),p.j_.set("Unknown"),p.W_.delete(4),await Vc(p)}(this))})}),this.j_=new XV(r,a)}}async function Vc(s){if(xs(s))for(const e of s.G_)await e(!0)}async function Tl(s){for(const e of s.G_)await e(!1)}function ud(s,e){const t=fe(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),gy(t)?my(t):bl(t).c_()&&dy(t,e))}function cl(s,e){const t=fe(s),r=bl(t);t.K_.delete(e),r.c_()&&Lw(t,e),t.K_.size===0&&(r.c_()?r.P_():xs(t)&&t.j_.set("Unknown"))}function dy(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bl(s).y_(e)}function Lw(s,e){s.H_.Ne(e),bl(s).w_(e)}function my(s){s.H_=new QC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),bl(s).start(),s.j_.B_()}function gy(s){return xs(s)&&!bl(s).u_()&&s.K_.size>0}function xs(s){return fe(s).W_.size===0}function Uw(s){s.H_=void 0}async function WV(s){s.j_.set("Online")}async function JV(s){s.K_.forEach((e,t)=>{dy(s,e)})}async function e2(s,e){Uw(s),gy(s)?(s.j_.q_(e),my(s)):s.j_.set("Unknown")}async function t2(s,e,t){if(s.j_.set("Online"),e instanceof Xb&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,e)}catch(r){se(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(s,r)}else if(e instanceof Af?s.H_.We(e):e instanceof Yb?s.H_.Ze(e):s.H_.je(e),!t.isEqual(Te.min()))try{const r=await Rw(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(St.EMPTY_BYTE_STRING,_.snapshotVersion)),Lw(l,m);const T=new mi(_.target,m,p,_.sequenceNumber);dy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){se(Va,"Failed to raise snapshot:",r),await Hf(s,r)}}async function Hf(s,e,t){if(!Rs(e))throw e;s.W_.add(1),await Tl(s),s.j_.set("Offline"),t||(t=()=>Rw(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{se(Va,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await Vc(s)})}function Bw(s,e){return e().catch(t=>Hf(s,t,e))}async function Al(s){const e=fe(s),t=Ts(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:fs;for(;n2(e);)try{const a=await UV(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,r2(e,a)}catch(a){await Hf(e,a)}zw(e)&&qw(e)}function n2(s){return xs(s)&&s.U_.length<10}function r2(s,e){s.U_.push(e);const t=Ts(s);t.c_()&&t.S_&&t.b_(e.mutations)}function zw(s){return xs(s)&&!Ts(s).u_()&&s.U_.length>0}function qw(s){Ts(s).start()}async function i2(s){Ts(s).C_()}async function s2(s){const e=Ts(s);for(const t of s.U_)e.b_(t.mutations)}async function a2(s,e,t){const r=s.U_.shift(),a=Wp.from(r,e,t);await Bw(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Al(s)}async function o2(s,e){e&&Ts(s).S_&&await async function(r,a){if(function(c){return Kb(c)&&c!==X.ABORTED}(a.code)){const l=r.U_.shift();Ts(r).h_(),await Bw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Al(r)}}(s,e),zw(s)&&qw(s)}async function P0(s,e){const t=fe(s);t.asyncQueue.verifyOperationInProgress(),se(Va,"RemoteStore received new credentials");const r=xs(t);t.W_.add(3),await Tl(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Vc(t)}async function yp(s,e){const t=fe(s);e?(t.W_.delete(2),await Vc(t)):e||(t.W_.add(2),await Tl(t),t.j_.set("Unknown"))}function bl(s){return s.J_||(s.J_=function(t,r,a){const l=fe(t);return l.M_(),new QV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:WV.bind(null,s),No:JV.bind(null,s),Lo:e2.bind(null,s),p_:t2.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),gy(s)?my(s):s.j_.set("Unknown")):(await s.J_.stop(),Uw(s))})),s.J_}function Ts(s){return s.Y_||(s.Y_=function(t,r,a){const l=fe(t);return l.M_(),new KV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:i2.bind(null,s),Lo:o2.bind(null,s),D_:s2.bind(null,s),v_:a2.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await Al(s)):(await s.Y_.stop(),s.U_.length>0&&(se(Va,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new py(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wl(s,e){if(Dt("AsyncQueue",`${e}: ${s}`),Rs(s))return new ie(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=ju(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Z_=new ht(ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hl{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new hl(e,t,Ho.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class u2{constructor(){this.queries=L0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=fe(t),l=a.queries;a.queries=L0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new ie(X.ABORTED,"Firestore shutting down"))}}function L0(){return new wi(s=>Ob(s),Sc)}async function yy(s,e){const t=fe(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new l2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=wl(c,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&vy(t)}async function _y(s,e){const t=fe(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function c2(s,e){const t=fe(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&vy(t)}function h2(s,e,t){const r=fe(s),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function vy(s){s.ia.forEach(e=>{e.next()})}var _p,U0;(U0=_p||(_p={}))._a="default",U0.Cache="cache";class Ey{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.serializer=e}ps(e){return Pr(this.serializer,e)}ys(e){return e.metadata.exists?nw(this.serializer,e.document,!1):ft.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return Ct(e)}}class d2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jw(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Be.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new B0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||De()).add(l);t.set(c,d)}}return t}async complete(){const e=await BV(this.localStore,new B0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await zV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function jw(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.key=e}}class Gw{constructor(e){this.key=e}}class Hw{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=De(),this.mutatedKeys=De(),this.ya=Pb(e),this.wa=new Ho(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new k0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const b=a.get(_),R=Rc(this.query,T)?T:null,x=!!b&&this.mutatedKeys.has(b.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;b&&R?b.data.isEqual(R.data)?x!==U&&(r.track({type:3,doc:R}),k=!0):this.va(b,R)||(r.track({type:2,doc:R}),k=!0,(m&&this.ya(R,m)>0||p&&this.ya(R,p)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),k=!0):b&&!R&&(r.track({type:1,doc:b}),k=!0,(m||p)&&(d=!0)),k&&(R?(c=c.add(R),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(R,x){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return U(R)-U(x)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new hl(this.query,e.wa,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new k0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=De(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Gw(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Fw(r))}),t}Oa(e){this.fa=e.gs,this.pa=De();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return hl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ds="SyncEngine";class m2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class g2{constructor(e){this.key=e,this.Ba=!1}}class p2{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new wi(d=>Ob(d),Sc),this.qa=new Map,this.Qa=new Set,this.$a=new ht(ce.comparator),this.Ua=new Map,this.Ka=new sy,this.Wa={},this.Ga=new Map,this.za=Ca.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function y2(s,e,t=!0){const r=cd(s);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await Qw(r,e,t,!0),a}async function _2(s,e){const t=cd(s);await Qw(t,e,!0,!1)}async function Qw(s,e,t,r){const a=await ll(s.localStore,Rn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Ty(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&ud(s.remoteStore,a),d}async function Ty(s,e,t,r,a){s.Ha=(T,b,R)=>async function(U,k,Q,re){let W=k.view.ba(Q);W.ls&&(W=await jf(U.localStore,k.query,!1).then(({documents:V})=>k.view.ba(V,W)));const me=re&&re.targetChanges.get(k.targetId),le=re&&re.targetMismatches.get(k.targetId)!=null,de=k.view.applyChanges(W,U.isPrimaryClient,me,le);return vp(U,k.targetId,de.Ma),de.snapshot}(s,T,b,R);const l=await jf(s.localStore,e,!0),c=new Hw(e,l.gs),d=c.ba(l.documents),m=Dc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);vp(s,t,p.Ma);const _=new m2(e,t,c);return s.ka.set(e,_),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function v2(s,e,t){const r=fe(s),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!Sc(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ul(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&cl(r.remoteStore,a.targetId),fl(r,a.targetId)}).catch(Ss)):(fl(r,a.targetId),await ul(r.localStore,a.targetId,!0))}async function E2(s,e){const t=fe(s),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cl(t.remoteStore,r.targetId))}async function T2(s,e,t){const r=Sy(s);try{const a=await function(c,d){const m=fe(c),p=vt.now(),_=d.reduce((R,x)=>R.add(x.key),De());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let x=On(),U=De();return m.ds.getEntries(R,_).next(k=>{x=k,x.forEach((Q,re)=>{re.isValidDocument()||(U=U.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,x)).next(k=>{T=k;const Q=[];for(const re of d){const W=FC(re,T.get(re.key).overlayedDocument);W!=null&&Q.push(new Si(re.key,W,wb(W.value.mapValue),_t.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,Q,d)}).next(k=>{b=k;const Q=k.applyToLocalDocumentSet(T,U);return m.documentOverlayCache.saveOverlays(R,k.batchId,Q)})}).then(()=>({batchId:b.batchId,changes:Lb(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new ht(Re)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,t),await Ri(r,a.changes),await Al(r.remoteStore)}catch(a){const l=wl(a,"Failed to persist write");t.reject(l)}}async function Kw(s,e){const t=fe(s);try{const r=await LV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?_e(c.Ba):a.removedDocuments.size>0&&(_e(c.Ba),c.Ba=!1))}),await Ri(t,r,e)}catch(r){await Ss(r)}}function z0(s,e,t){const r=fe(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=fe(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const b of T.ta)b.sa(d)&&(p=!0)}),p&&vy(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A2(s,e,t){const r=fe(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new ht(ce.comparator);c=c.insert(l,ft.newNoDocument(l,Te.min()));const d=De().add(l),m=new xc(Te.min(),new Map,new ht(Re),c,d);await Kw(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),wy(r)}else await ul(r.localStore,e,!1).then(()=>fl(r,e,t)).catch(Ss)}async function b2(s,e){const t=fe(s),r=e.batch.batchId;try{const a=await kV(t.localStore,e);by(t,r,null),Ay(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ri(t,a)}catch(a){await Ss(a)}}async function w2(s,e,t){const r=fe(s);try{const a=await function(c,d){const m=fe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(_e(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);by(r,e,t),Ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ri(r,a)}catch(a){await Ss(a)}}async function S2(s,e){const t=fe(s);xs(t.remoteStore)||se(Ds,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=fe(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===fs)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=wl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Ay(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function by(s,e,t){const r=fe(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function fl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.qa.get(e))s.ka.delete(r),t&&s.La.Ja(r,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(r=>{s.Ka.containsKey(r)||$w(s,r)})}function $w(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(cl(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),wy(s))}function vp(s,e,t){for(const r of t)r instanceof Fw?(s.Ka.addReference(r.key,e),R2(s,r)):r instanceof Gw?(se(Ds,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,e),s.Ka.containsKey(r.key)||$w(s,r.key)):ge()}function R2(s,e){const t=e.key,r=t.path.canonicalString();s.$a.get(t)||s.Qa.has(r)||(se(Ds,"New document in limbo: "+t),s.Qa.add(r),wy(s))}function wy(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new ce(Be.fromString(e)),r=s.za.next();s.Ua.set(r,new g2(t)),s.$a=s.$a.insert(t,r),ud(s.remoteStore,new mi(Rn(_l(t.path)),r,"TargetPurposeLimboResolution",Vn.ae))}}async function Ri(s,e,t){const r=fe(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=uy.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=fe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>j.forEach(p,b=>j.forEach(b.Hi,R=>_.persistence.referenceDelegate.addReference(T,b.targetId,R)).next(()=>j.forEach(b.Ji,R=>_.persistence.referenceDelegate.removeReference(T,b.targetId,R)))))}catch(T){if(!Rs(T))throw T;se(cy,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const R=_.Ts.get(b),x=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(x);_.Ts=_.Ts.insert(b,U)}}}(r.localStore,l))}async function I2(s,e){const t=fe(s);if(!t.currentUser.isEqual(e)){se(Ds,"User change. New user:",e.toKey());const r=await Sw(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ie(X.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ri(t,r.Rs)}}function x2(s,e){const t=fe(s),r=t.Ua.get(e);if(r&&r.Ba)return De().add(r.key);{let a=De();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function D2(s,e){const t=fe(s),r=await jf(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&vp(t,e.targetId,a.Ma),a}async function C2(s,e){const t=fe(s);return Dw(t.localStore,e).then(r=>Ri(t,r))}async function V2(s,e,t,r){const a=fe(s),l=await function(d,m){const p=fe(d),_=fe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):j.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Al(a.remoteStore):t==="acknowledged"||t==="rejected"?(by(a,e,r||null),Ay(a,e),function(d,m){fe(fe(d).mutationQueue).qn(m)}(a.localStore,e)):ge(),await Ri(a,l)):se(Ds,"Cannot apply mutation batch with id: "+e)}async function N2(s,e){const t=fe(s);if(cd(t),Sy(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await q0(t,r.toArray());t.ja=!0,await yp(t.remoteStore,!0);for(const l of a)ud(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(fl(t,c),ul(t.localStore,c,!0))),cl(t.remoteStore,c)}),await a,await q0(t,r),function(c){const d=fe(c);d.Ua.forEach((m,p)=>{cl(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new ht(ce.comparator)}(t),t.ja=!1,await yp(t.remoteStore,!1)}}async function q0(s,e,t){const r=fe(s),a=[],l=[];for(const c of e){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await ll(r.localStore,Rn(m[0]));for(const p of m){const _=r.ka.get(p),T=await D2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await xw(r.localStore,c);d=await ll(r.localStore,p),await Ty(r,Yw(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function Yw(s){return Nb(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function O2(s){return function(t){return fe(fe(t).persistence).zi()}(fe(s).localStore)}async function M2(s,e,t,r){const a=fe(s);if(a.ja)return void se(Ds,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Dw(a.localStore,Mb(l[0])),d=xc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await Ri(a,c,d);break}case"rejected":await ul(a.localStore,e,!0),fl(a,e,r);break;default:ge()}}async function P2(s,e,t){const r=cd(s);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(Ds,"Adding an already active target "+a);continue}const l=await xw(r.localStore,a),c=await ll(r.localStore,l);await Ty(r,Yw(l),c.targetId,!1,c.resumeToken),ud(r.remoteStore,c)}for(const a of t)r.qa.has(a)&&await ul(r.localStore,a,!1).then(()=>{cl(r.remoteStore,a),fl(r,a)}).catch(Ss)}}function cd(s){const e=fe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A2.bind(null,e),e.La.p_=c2.bind(null,e.eventManager),e.La.Ja=h2.bind(null,e.eventManager),e}function Sy(s){const e=fe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w2.bind(null,e),e}function k2(s,e,t){const r=fe(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(R,x){const U=fe(R),k=Ct(x.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",Q=>U.Yr.getBundleMetadata(Q,x.id)).then(Q=>!!Q&&Q.createTime.compareTo(k)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(jw(m));const p=new d2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const b=await p.Aa(_);b&&d._updateProgress(b),_=await c.Ya()}const T=await p.complete();return await Ri(l,T.ma,void 0),await function(R,x){const U=fe(R);return U.persistence.runTransaction("Save bundle","readwrite",k=>U.Yr.saveBundleMetadata(k,x))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return Lr(Ds,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ww(this.persistence,new bw,e.initialUser,this.serializer)}Xa(e){return new ay(ld.ri,this.serializer)}Za(e){return new Mw}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class L2 extends fc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){_e(this.persistence.referenceDelegate instanceof qf);const r=this.persistence.referenceDelegate.garbageCollector;return new yw(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new ay(r=>qf.ri(r,t),this.serializer)}}class Xw extends fc{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Sy(this.ru.syncEngine),await Al(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return ww(this.persistence,new bw,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new yw(r,e.asyncQueue,t)}nu(e,t){const r=new QD(t,this.persistence);return new HD(e.asyncQueue,r)}Xa(e){const t=ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new oy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Pw(),bf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Mw}}class U2 extends Xw{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={uo:V2.bind(null,t),co:M2.bind(null,t),lo:P2.bind(null,t),zi:O2.bind(null,t),ao:C2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await N2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=Pw();if(!Bg.D(t))throw new ie(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class dc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),await yp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u2}()}createDatastore(e){const t=Cc(e.databaseInfo.databaseId),r=function(l){return new HV(l)}(e.databaseInfo);return function(l,c,d,m){return new YV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new ZV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>z0(this.syncEngine,t,0),function(){return O0.D()?new O0:new qV}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new p2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=fe(a);se(Va,"RemoteStore shutting down."),l.W_.add(5),await Tl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dc.provider={build:()=>new dc};function j0(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new hn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new f2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=fe(a),d={documents:l.map(T=>cc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,Be.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=WC(c.serializer,T);p.set(b.key.toString(),b)});const _=[];return l.forEach(T=>{const b=p.get(T.toString());_e(!!b),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new El(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=ce.fromPath(r);this.mutations.push(new Xp(a,this.precondition(a)))}),await async function(r,a){const l=fe(r),c={writes:a.map(d=>hc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Be.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge();t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ie(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new ie(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new fy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new z2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Ac(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Kb(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="FirestoreClient";class j2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=en.UNAUTHENTICATED,this.clientId=WA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{se(As,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(se(As,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qg(s,e){s.asyncQueue.verifyOperationInProgress(),se(As,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Sw(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function F0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Ry(s);se(As,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>P0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>P0(e.remoteStore,a)),s._onlineComponents=e}async function Ry(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){se(As,"Using user provided OfflineComponentProvider");try{await qg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),await qg(s,new fc)}}else se(As,"Using default OfflineComponentProvider"),await qg(s,new L2(void 0));return s._offlineComponents}async function fd(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(se(As,"Using user provided OnlineComponentProvider"),await F0(s,s._uninitializedComponentsProvider._online)):(se(As,"Using default OnlineComponentProvider"),await F0(s,new dc))),s._onlineComponents}function Zw(s){return Ry(s).then(e=>e.persistence)}function Iy(s){return Ry(s).then(e=>e.localStore)}function Ww(s){return fd(s).then(e=>e.remoteStore)}function xy(s){return fd(s).then(e=>e.syncEngine)}function F2(s){return fd(s).then(e=>e.datastore)}async function dl(s){const e=await fd(s),t=e.eventManager;return t.onListen=y2.bind(null,e.syncEngine),t.onUnlisten=v2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E2.bind(null,e.syncEngine),t}function G2(s){return s.asyncQueue.enqueue(async()=>{const e=await Zw(s),t=await Ww(s);return e.setNetworkEnabled(!0),function(a){const l=fe(a);return l.W_.delete(0),Vc(l)}(t)})}function H2(s){return s.asyncQueue.enqueue(async()=>{const e=await Zw(s),t=await Ww(s);return e.setNetworkEnabled(!1),async function(a){const l=fe(a);l.W_.add(0),await Tl(l),l.j_.set("Offline")}(t)})}function Q2(s,e){const t=new hn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=fe(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ie(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=wl(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await Iy(s),e,t)),t.promise}function Jw(s,e,t={}){const r=new hn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new hd({next:b=>{_.su(),c.enqueueAndForget(()=>_y(l,T));const R=b.docs.has(d);!R&&b.fromCache?p.reject(new ie(X.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&m&&m.source==="server"?p.reject(new ie(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Ey(_l(d.path),_,{includeMetadataChanges:!0,Ta:!0});return yy(l,T)}(await dl(s),s.asyncQueue,e,t,r)),r.promise}function K2(s,e){const t=new hn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await jf(a,l,!0),m=new Hw(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=wl(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await Iy(s),e,t)),t.promise}function eS(s,e,t={}){const r=new hn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new hd({next:b=>{_.su(),c.enqueueAndForget(()=>_y(l,T)),b.fromCache&&m.source==="server"?p.reject(new ie(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Ey(d,_,{includeMetadataChanges:!0,Ta:!0});return yy(l,T)}(await dl(s),s.asyncQueue,e,t,r)),r.promise}function $2(s,e){const t=new hd(e);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.add(l),l.next()}(await dl(s),t)),()=>{t.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.delete(l)}(await dl(s),t))}}function Y2(s,e,t,r){const a=function(c,d){let m;return m=typeof c=="string"?Lp().encode(c):c,function(_,T){return new B2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return j0(_,T);if(_ instanceof ArrayBuffer)return j0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Cc(e));s.asyncQueue.enqueueAndForget(async()=>{k2(await xy(s),a,r)})}function X2(s,e){return s.asyncQueue.enqueue(async()=>function(r,a){const l=fe(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await Iy(s),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(s,e,t){if(!t)throw new ie(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nS(s,e,t,r){if(e===!0&&r===!0)throw new ie(X.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function H0(s){if(!ce.isDocumentKey(s))throw new ie(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Q0(s){if(ce.isDocumentKey(s))throw new ie(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function dd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ge()}function Ye(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dd(s);throw new ie(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function rS(s,e){if(e<=0)throw new ie(X.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="firestore.googleapis.com",K0=!0;class $0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iS,this.ssl=K0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:K0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yV)throw new ie(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MD;switch(r.type){case"firstParty":return new UD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=G0.get(t);r&&(se("ComponentProvider","Removing Datastore"),G0.delete(t),r.terminate())}(this),Promise.resolve()}}function Z2(s,e,t,r={}){var a;const l=(s=Ye(s,Nc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==iS&&l.host!==d&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!Qo(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=en.MOCK_USER;else{p=ex(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new en(T)}s._authCredentials=new PD(new ZA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class sS{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sS(this.firestore,e,this._query)}},At=class aS{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new aS(this.firestore,e,this._key)}},ds=class oS extends In{constructor(e,t,r){super(e,t,_l(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ce(e))}withConverter(e){return new oS(this.firestore,e,this._path)}};function lS(s,e,...t){if(s=Ut(s),Dy("collection","path",e),s instanceof Nc){const r=Be.fromString(e,...t);return Q0(r),new ds(s,null,r)}{if(!(s instanceof At||s instanceof ds))throw new ie(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Be.fromString(e,...t));return Q0(r),new ds(s.firestore,null,r)}}function W2(s,e){if(s=Ye(s,Nc),Dy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new In(s,null,function(r){return new bi(Be.emptyPath(),r)}(e))}function Qf(s,e,...t){if(s=Ut(s),arguments.length===1&&(e=WA.newId()),Dy("doc","path",e),s instanceof Nc){const r=Be.fromString(e,...t);return H0(r),new At(s,null,new ce(r))}{if(!(s instanceof At||s instanceof ds))throw new ie(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Be.fromString(e,...t));return H0(r),new At(s.firestore,s instanceof ds?s.converter:null,new ce(r))}}function uS(s,e){return s=Ut(s),e=Ut(e),(s instanceof At||s instanceof ds)&&(e instanceof At||e instanceof ds)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function cS(s,e){return s=Ut(s),e=Ut(e),s instanceof In&&e instanceof In&&s.firestore===e.firestore&&Sc(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="AsyncQueue";class X0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fy(this,"async_queue_retry"),this.Su=()=>{const r=bf();r&&se(Y0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new hn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Rs(e))throw e;se(Y0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw Dt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=py.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ep(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class J2{constructor(){this._progressObserver={},this._taskCompletionResolver=new hn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=-1;let Vt=class extends Nc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new X0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X0(e),this._firestoreClient=void 0,await e}}};function yn(s){if(s._terminated)throw new ie(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||hS(s),s._firestoreClient}function hS(s){var e,t,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new TC(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,tS(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new j2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function tN(s,e){Lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return fS(s,dc.provider,{build:r=>new Xw(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function nN(s){Lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();fS(s,dc.provider,{build:t=>new U2(t,e.cacheSizeBytes)})}function fS(s,e,t){if((s=Ye(s,Vt))._firestoreClient||s._terminated)throw new ie(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ie(X.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},hS(s)}function rN(s){if(s._initialized&&!s._terminated)throw new ie(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hn;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Mr.D())return Promise.resolve();const a=r+Aw;await Mr.delete(a)}(ly(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function iN(s){return function(t){const r=new hn;return t.asyncQueue.enqueueAndForget(async()=>S2(await xy(t),r)),r.promise}(yn(s=Ye(s,Vt)))}function sN(s){return G2(yn(s=Ye(s,Vt)))}function aN(s){return H2(yn(s=Ye(s,Vt)))}function oN(s,e){const t=yn(s=Ye(s,Vt)),r=new J2;return Y2(t,s._databaseId,e,r),r}function lN(s,e){return X2(yn(s=Ye(s,Vt)),e).then(t=>t?new In(s,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(St.fromBase64String(e))}catch(t){throw new ie(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Br(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/^__.*__$/;class cN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class dS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Si(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class gd{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Kf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(mS(this.Lu)&&uN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class hN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cc(e)}ju(e,t,r,a=!1){return new gd({Lu:e,methodName:t,zu:r,path:yt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ka(s){const e=s._freezeSettings(),t=Cc(s._databaseId);return new hN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function pd(s,e,t,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,e,t,a);Ly("Data must be an object, but it was:",c,r);const d=yS(r,c);let m,p;if(l.merge)m=new Nn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=Tp(e,T,t);if(!c.contains(b))throw new ie(X.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);vS(_,b)||_.push(b)}m=new Nn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new cN(new cn(d),m,p)}class Oc extends Pa{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oc}}function gS(s,e,t){return new gd({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vy extends Pa{_toFieldTransform(e){return new Ic(e.path,new sl)}isEqual(e){return e instanceof Vy}}class Ny extends Pa{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=gS(this,e,!0),r=this.Hu.map(l=>La(l,t)),a=new Ra(r);return new Ic(e.path,a)}isEqual(e){return e instanceof Ny&&Qo(this.Hu,e.Hu)}}class Oy extends Pa{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=gS(this,e,!0),r=this.Hu.map(l=>La(l,t)),a=new Ia(r);return new Ic(e.path,a)}isEqual(e){return e instanceof Oy&&Qo(this.Hu,e.Hu)}}class My extends Pa{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new al(e.serializer,zb(e.serializer,this.Ju));return new Ic(e.path,t)}isEqual(e){return e instanceof My&&this.Ju===e.Ju}}function Py(s,e,t,r){const a=s.ju(1,e,t);Ly("Data must be an object, but it was:",a,r);const l=[],c=cn.empty();Is(r,(m,p)=>{const _=Uy(e,m,t);p=Ut(p);const T=a.Uu(_);if(p instanceof Oc)l.push(_);else{const b=La(p,T);b!=null&&(l.push(_),c.set(_,b))}});const d=new Nn(l);return new dS(c,d,a.fieldTransforms)}function ky(s,e,t,r,a,l){const c=s.ju(1,e,t),d=[Tp(e,r,t)],m=[a];if(l.length%2!=0)throw new ie(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Tp(e,l[b])),m.push(l[b+1]);const p=[],_=cn.empty();for(let b=d.length-1;b>=0;--b)if(!vS(p,d[b])){const R=d[b];let x=m[b];x=Ut(x);const U=c.Uu(R);if(x instanceof Oc)p.push(R);else{const k=La(x,U);k!=null&&(p.push(R),_.set(R,k))}}const T=new Nn(p);return new dS(_,T,c.fieldTransforms)}function pS(s,e,t,r=!1){return La(t,s.ju(r?4:3,e))}function La(s,e){if(_S(s=Ut(s)))return Ly("Unsupported field value:",e,s),yS(s,e);if(s instanceof Pa)return function(r,a){if(!mS(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=La(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,a){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zb(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=vt.fromDate(r);return{timestampValue:ol(a.serializer,l)}}if(r instanceof vt){const l=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(a.serializer,l)}}if(r instanceof md)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:Zb(a.serializer,r._byteString)};if(r instanceof At){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ty(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Cy)return function(c,d){return{mapValue:{fields:{[Gp]:{stringValue:Hp},[nl]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Yp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${dd(r)}`)}(s,e)}function yS(s,e){const t={};return gb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(s,(r,a)=>{const l=La(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function _S(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof vt||s instanceof md||s instanceof Br||s instanceof At||s instanceof Pa||s instanceof Cy)}function Ly(s,e,t){if(!_S(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=dd(t);throw r==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+r)}}function Tp(s,e,t){if((e=Ut(e))instanceof bs)return e._internalPath;if(typeof e=="string")return Uy(s,e);throw Kf("Field path arguments must be of type string or ",s,!1,void 0,t)}const fN=new RegExp("[~\\*/\\[\\]]");function Uy(s,e,t){if(e.search(fN)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new bs(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Kf(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ie(X.INVALID_ARGUMENT,d+s+m)}function vS(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dN extends mc{data(){return super.data()}}function yd(s,e){return typeof e=="string"?Uy(s,e):e instanceof bs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class Mc extends By{}function as(s,e,...t){let r=[];e instanceof By&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof zy).length,d=l.filter(m=>m instanceof _d).length;if(c>1||c>0&&d>0)throw new ie(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class _d extends Mc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _d(e,t,r)}_apply(e){const t=this._parse(e);return AS(e._query,t),new In(e.firestore,e.converter,op(e._query,t))}_parse(e){const t=ka(e.firestore);return function(l,c,d,m,p,_,T){let b;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){W0(T,_);const x=[];for(const U of T)x.push(Z0(m,l,U));b={arrayValue:{values:x}}}else b=Z0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||W0(T,_),b=pS(d,c,T,_==="in"||_==="not-in");return ze.create(p,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mN(s,e,t){const r=e,a=yd("where",s);return _d._create(a,r,t)}class zy extends By{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)AS(c,m),c=op(c,m)}(e._query,t),new In(e.firestore,e.converter,op(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qy extends Mc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ie(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uc(l,c)}(e._query,this._field,this._direction);return new In(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new bi(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function gN(s,e="asc"){const t=e,r=yd("orderBy",s);return qy._create(r,t)}class vd extends Mc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new vd(e,t,r)}_apply(e){return new In(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function pN(s){return rS("limit",s),vd._create("limit",s,"F")}function yN(s){return rS("limitToLast",s),vd._create("limitToLast",s,"L")}class Ed extends Mc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=TS(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,function(a,l){return new bi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function _N(...s){return Ed._create("startAt",s,!0)}function vN(...s){return Ed._create("startAfter",s,!1)}class Td extends Mc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Td(e,t,r)}_apply(e){const t=TS(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,function(a,l){return new bi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function EN(...s){return Td._create("endBefore",s,!1)}function TN(...s){return Td._create("endAt",s,!0)}function TS(s,e,t,r){if(t[0]=Ut(t[0]),t[0]instanceof mc)return function(l,c,d,m,p){if(!m)throw new ie(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Go(l))if(T.field.isKeyField())_.push(wa(c,m.key));else{const b=m.data.field(T.field);if(td(b))throw new ie(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const R=T.field.canonicalString();throw new ie(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(b)}return new Es(_,p)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=ka(s.firestore);return function(c,d,m,p,_,T){const b=c.explicitOrderBy;if(_.length>b.length)throw new ie(X.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let x=0;x<_.length;x++){const U=_[x];if(b[x].field.isKeyField()){if(typeof U!="string")throw new ie(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!Kp(c)&&U.indexOf("/")!==-1)throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const k=c.path.child(Be.fromString(U));if(!ce.isDocumentKey(k))throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const Q=new ce(k);R.push(wa(d,Q))}else{const k=pS(m,p,U);R.push(k)}}return new Es(R,T)}(s._query,s.firestore._databaseId,a,e,t,r)}}function Z0(s,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ie(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kp(e)&&t.indexOf("/")!==-1)throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Be.fromString(t));if(!ce.isDocumentKey(r))throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wa(s,new ce(r))}if(t instanceof At)return wa(s,t._key);throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(t)}.`)}function W0(s,e){if(!Array.isArray(s)||s.length===0)throw new ie(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(s,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ie(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jy{convertValue(e,t="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Is(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[nl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>pt(c.doubleValue));return new Cy(l)}convertGeoPoint(e){return new md(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const t=vi(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);_e(lw(r));const a=new ys(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||Dt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class AN extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ti=class extends mc{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Zu=class extends Ti{data(e={}){return super.data(e)}},ws=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ea(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zu(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Zu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ea(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Zu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ea(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:bN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function bN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function bS(s,e){return s instanceof Ti&&e instanceof Ti?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ws&&e instanceof ws&&s._firestore===e._firestore&&cS(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(s){s=Ye(s,At);const e=Ye(s.firestore,Vt);return Jw(yn(e),s._key).then(t=>Fy(e,s,t))}class Ua extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function SN(s){s=Ye(s,At);const e=Ye(s.firestore,Vt),t=yn(e),r=new Ua(e);return Q2(t,s._key).then(a=>new Ti(e,r,s._key,a,new Ea(a!==null&&a.hasLocalMutations,!0),s.converter))}function RN(s){s=Ye(s,At);const e=Ye(s.firestore,Vt);return Jw(yn(e),s._key,{source:"server"}).then(t=>Fy(e,s,t))}function IN(s){s=Ye(s,In);const e=Ye(s.firestore,Vt),t=yn(e),r=new Ua(e);return ES(s._query),eS(t,s._query).then(a=>new ws(e,r,s,a))}function xN(s){s=Ye(s,In);const e=Ye(s.firestore,Vt),t=yn(e),r=new Ua(e);return K2(t,s._query).then(a=>new ws(e,r,s,a))}function DN(s){s=Ye(s,In);const e=Ye(s.firestore,Vt),t=yn(e),r=new Ua(e);return eS(t,s._query,{source:"server"}).then(a=>new ws(e,r,s,a))}function J0(s,e,t){s=Ye(s,At);const r=Ye(s.firestore,Vt),a=Ad(s.converter,e,t);return Pc(r,[pd(ka(r),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,_t.none())])}function eA(s,e,t,...r){s=Ye(s,At);const a=Ye(s.firestore,Vt),l=ka(a);let c;return c=typeof(e=Ut(e))=="string"||e instanceof bs?ky(l,"updateDoc",s._key,e,t,r):Py(l,"updateDoc",s._key,e),Pc(a,[c.toMutation(s._key,_t.exists(!0))])}function CN(s){return Pc(Ye(s.firestore,Vt),[new El(s._key,_t.none())])}function VN(s,e){const t=Ye(s.firestore,Vt),r=Qf(s),a=Ad(s.converter,e);return Pc(t,[pd(ka(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function wS(s,...e){var t,r,a;s=Ut(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ep(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ep(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof At)p=Ye(s.firestore,Vt),_=_l(s._key.path),m={next:T=>{e[c]&&e[c](Fy(p,s,T))},error:e[c+1],complete:e[c+2]};else{const T=Ye(s,In);p=Ye(T.firestore,Vt),_=T._query;const b=new Ua(p);m={next:R=>{e[c]&&e[c](new ws(p,b,T,R))},error:e[c+1],complete:e[c+2]},ES(s._query)}return function(b,R,x,U){const k=new hd(U),Q=new Ey(R,k,x);return b.asyncQueue.enqueueAndForget(async()=>yy(await dl(b),Q)),()=>{k.su(),b.asyncQueue.enqueueAndForget(async()=>_y(await dl(b),Q))}}(yn(p),_,d,m)}function NN(s,e){return $2(yn(s=Ye(s,Vt)),Ep(e)?e:{next:e})}function Pc(s,e){return function(r,a){const l=new hn;return r.asyncQueue.enqueueAndForget(async()=>T2(await xy(r),a,l)),l.promise}(yn(s),e)}function Fy(s,e,t){const r=t.docs.get(e._key),a=new Ua(s);return new Ti(s,a,e._key,r,new Ea(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MN=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ka(e)}set(e,t,r){this._verifyNotCommitted();const a=us(e,this._firestore),l=Ad(a.converter,t,r),c=pd(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,_t.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=us(e,this._firestore);let c;return c=typeof(t=Ut(t))=="string"||t instanceof bs?ky(this._dataReader,"WriteBatch.update",l._key,t,r,a):Py(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=us(e,this._firestore);return this._mutations=this._mutations.concat(new El(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function us(s,e){if((s=Ut(s)).firestore!==e)throw new ie(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ka(e)}get(e){const t=us(e,this._firestore),r=new AN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ge();const l=a[0];if(l.isFoundDocument())return new mc(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new mc(this._firestore,r,t._key,null,t.converter);throw ge()})}set(e,t,r){const a=us(e,this._firestore),l=Ad(a.converter,t,r),c=pd(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=us(e,this._firestore);let c;return c=typeof(t=Ut(t))=="string"||t instanceof bs?ky(this._dataReader,"Transaction.update",l._key,t,r,a):Py(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=us(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kN=class extends PN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=us(e,this._firestore),r=new Ua(this._firestore);return super.get(e).then(a=>new Ti(this._firestore,r,t._key,a._document,new Ea(!1,!1),t.converter))}};function LN(s,e,t){s=Ye(s,Vt);const r=Object.assign(Object.assign({},ON),t);return function(l){if(l.maxAttempts<1)throw new ie(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new hn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await F2(l);new q2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(yn(s),a=>e(new kN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return new Oc("deleteField")}function BN(){return new Vy("serverTimestamp")}function zN(...s){return new Ny("arrayUnion",s)}function qN(...s){return new Oy("arrayRemove",s)}function jN(s){return new My("increment",s)}(function(e,t=!0){(function(a){yl=a})(Op),Yo(new ba("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Vt(new kD(r.getProvider("auth-internal")),new BD(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ys(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pi(VT,NT,e),pi(VT,NT,"esm2017")})();const FN="@firebase/firestore-compat",GN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function nA(){if(!vC())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gc{constructor(e){this._delegate=e}static fromBase64String(e){return nA(),new gc(Br.fromBase64String(e))}static fromUint8Array(e){return tA(),new gc(Br.fromUint8Array(e))}toBase64(){return nA(),this._delegate.toBase64()}toUint8Array(){return tA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){return HN(s,["next","error","complete"])}function HN(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{enableIndexedDbPersistence(e,t){return tN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return nN(e._delegate)}clearIndexedDbPersistence(e){return rN(e._delegate)}}class SS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ys||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Z2(this._delegate,e,t,r)}enableNetwork(){return sN(this._delegate)}disableNetwork(){return aN(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iN(this._delegate)}onSnapshotsInSync(e){return NN(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ml(this,lS(this._delegate,e))}catch(t){throw Sn(t,"collection()","Firestore.collection()")}}doc(e){try{return new nr(this,Qf(this._delegate,e))}catch(t){throw Sn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wn(this,W2(this._delegate,e))}catch(t){throw Sn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LN(this._delegate,t=>e(new RS(this,t)))}batch(){return yn(this._delegate),new IS(new MN(this._delegate,e=>Pc(this._delegate,e)))}loadBundle(e){return oN(this._delegate,e)}namedQuery(e){return lN(this._delegate,e).then(t=>t?new wn(this,t):null)}}class bd extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(new Br(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nr.forKey(t,this.firestore,null)}}function KN(s){ND(s)}class RS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bd(e)}get(e){const t=Ta(e);return this._delegate.get(t).then(r=>new pc(this._firestore,new Ti(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Ta(e);return r?(Gy("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Ta(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Ta(e);return this._delegate.delete(t),this}}class IS{constructor(e){this._delegate=e}set(e,t,r){const a=Ta(e);return r?(Gy("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Ta(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Ta(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Na{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Na.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Na(e,new bd(e),t),a.set(t,l)),l}}Na.INSTANCES=new WeakMap;class nr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bd(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nr(t,new At(t._delegate,r,new ce(e)))}static forKey(e,t,r){return new nr(t,new At(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ml(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ml(this.firestore,lS(this._delegate,e))}catch(t){throw Sn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ut(e),e instanceof At?uS(this._delegate,e):!1}set(e,t){t=Gy("DocumentReference.set",t);try{return t?J0(this._delegate,e,t):J0(this._delegate,e)}catch(r){throw Sn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?eA(this._delegate,e):eA(this._delegate,e,t,...r)}catch(a){throw Sn(a,"updateDoc()","DocumentReference.update()")}}delete(){return CN(this._delegate)}onSnapshot(...e){const t=xS(e),r=DS(e,a=>new pc(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return wS(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=SN(this._delegate):(e==null?void 0:e.source)==="server"?t=RN(this._delegate):t=wN(this._delegate),t.then(r=>new pc(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new nr(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sn(s,e,t){return s.message=s.message.replace(e,t),s}function xS(s){for(const e of s)if(typeof e=="object"&&!Ap(e))return e;return{}}function DS(s,e){var t,r;let a;return Ap(s[0])?a=s[0]:Ap(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class pc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class yc extends pc{data(e){const t=this._delegate.data(e);return this._delegate._converter||OD(t!==void 0),t}}class wn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bd(e)}where(e,t,r){try{return new wn(this.firestore,as(this._delegate,mN(e,t,r)))}catch(a){throw Sn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wn(this.firestore,as(this._delegate,gN(e,t)))}catch(r){throw Sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wn(this.firestore,as(this._delegate,pN(e)))}catch(t){throw Sn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wn(this.firestore,as(this._delegate,yN(e)))}catch(t){throw Sn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wn(this.firestore,as(this._delegate,_N(...e)))}catch(t){throw Sn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wn(this.firestore,as(this._delegate,vN(...e)))}catch(t){throw Sn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wn(this.firestore,as(this._delegate,EN(...e)))}catch(t){throw Sn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wn(this.firestore,as(this._delegate,TN(...e)))}catch(t){throw Sn(t,"endAt()","Query.endAt()")}}isEqual(e){return cS(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=xN(this._delegate):(e==null?void 0:e.source)==="server"?t=DN(this._delegate):t=IN(this._delegate),t.then(r=>new bp(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xS(e),r=DS(e,a=>new bp(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return wS(this._delegate,t,r)}withConverter(e){return new wn(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class $N{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $N(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yc(this._firestore,r))})}isEqual(e){return bS(this._delegate,e._delegate)}}class ml extends wn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nr(this.firestore,e):null}doc(e){try{return e===void 0?new nr(this.firestore,Qf(this._delegate)):new nr(this.firestore,Qf(this._delegate,e))}catch(t){throw Sn(t,"doc()","CollectionReference.doc()")}}add(e){return VN(this._delegate,e).then(t=>new nr(this.firestore,t))}isEqual(e){return uS(this._delegate,e._delegate)}withConverter(e){return new ml(this.firestore,e?this._delegate.withConverter(Na.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ta(s){return Ye(s,At)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(...e){this._delegate=new bs(...e)}static documentId(){return new Hy(yt.keyField().canonicalString())}isEqual(e){return e=Ut(e),e instanceof bs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static serverTimestamp(){const e=BN();return e._methodName="FieldValue.serverTimestamp",new _a(e)}static delete(){const e=UN();return e._methodName="FieldValue.delete",new _a(e)}static arrayUnion(...e){const t=zN(...e);return t._methodName="FieldValue.arrayUnion",new _a(t)}static arrayRemove(...e){const t=qN(...e);return t._methodName="FieldValue.arrayRemove",new _a(t)}static increment(e){const t=jN(e);return t._methodName="FieldValue.increment",new _a(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN={Firestore:SS,GeoPoint:md,Timestamp:vt,Blob:gc,Transaction:RS,WriteBatch:IS,DocumentReference:nr,DocumentSnapshot:pc,Query:wn,QueryDocumentSnapshot:yc,QuerySnapshot:bp,CollectionReference:ml,FieldPath:Hy,FieldValue:_a,setLogLevel:KN,CACHE_SIZE_UNLIMITED:eN};function XN(s,e){s.INTERNAL.registerComponent(new ba("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},YN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(s){XN(s,(e,t)=>new SS(e,t,new QN)),s.registerVersion(FN,GN)}ZN(Qt);const WN={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let rA;function JN(){const[s,e]=H.useState(!1);return H.useEffect(()=>{Qt.apps.length||(Qt.initializeApp(WN),rA=Qt.firestore()),e(!0)},[]),{db:rA,initialized:s}}const eO="/clicker/assets/logo-BS-hctJj.png",jg=1e3,tO=1,nO=1e3,rO=1e4,iO=[{id:"click_1000",label:"1 000 кліків",condition:({totalCount:s})=>s>=1e3},{id:"click_10000",label:"10 000 кліків",condition:({totalCount:s})=>s>=1e4},{id:"click_100000",label:"100 000 кліків",condition:({totalCount:s})=>s>=1e5},{id:"click_500000",label:"500 000 кліків",condition:({totalCount:s})=>s>=5e5},{id:"click_1000000",label:"1 000 000 кліків",condition:({totalCount:s})=>s>=1e6},{id:"upgrade_multiplier_lvl5",label:"Множник lvl 5",condition:({multiplier:s})=>s>=5},{id:"upgrade_multiplier_lvl120",label:"Множник lvl 20",condition:({multiplier:s})=>s>=15},{id:"upgrade_energy_lvl5",label:"Енергія рівень 5",condition:({maxEnergyLevel:s})=>s>=5},{id:"upgrade_energy_lvl20",label:"Енергія рівень 20",condition:({maxEnergyLevel:s})=>s>=20},{id:"upgrade_regen_lvl5",label:"Регенерація рівень 20",condition:({regenSpeedLevel:s})=>s>=5},{id:"upgrade_regen_lvl20",label:"Регенерація рівень 20",condition:({regenSpeedLevel:s})=>s>=20}],sO={click_1000000:"gradient1",upgrade_multiplier_lvl120:"gradient2",upgrade_energy_lvl20:"gradient3"};function Sl({db:s,userId:e,initialized:t}){const[r,a]=H.useState(!0),[l,c]=H.useState(0),[d,m]=H.useState(0),[p,_]=H.useState(1),[T,b]=H.useState(""),[R,x]=H.useState(jg),[U,k]=H.useState(1),[Q,re]=H.useState(1),[W,me]=H.useState(!1),[le,de]=H.useState(!1),[V,S]=H.useState([]),[I,N]=H.useState(null),[P,L]=H.useState([]),D=`mainStats_${e}`,ke=e&&s&&t,Ce=H.useRef(Date.now()),$=Ee=>s.collection("users").doc(String(e)).collection("stats").doc(Ee),ue=()=>s.collection("users").doc(String(e)),ve=Ee=>jg*Ee,je=Ee=>tO*Ee,O=Ee=>1e3*Math.pow(2,Ee);H.useEffect(()=>{if(!ke)return;(async()=>{try{const pe=localStorage.getItem(D);if(pe){const Ze=JSON.parse(pe);c(Ze.count??0),m(Ze.totalCount??0),_(Ze.multiplier??1),b(Ze.username??""),x(Ze.energy??jg),k(Ze.maxEnergyLevel??1),re(Ze.regenSpeedLevel??1),N(Ze.selectedSkin??null)}const[Ke,lt,ut,nn,Bt,_n,Nt,Ba,vn]=await Promise.all([$("count").get(),$("multiplier").get(),$("totalCount").get(),$("username").get(),$("energy").get(),$("maxEnergyLevel").get(),$("regenSpeedLevel").get(),ue().get(),$("achievements").get()]),za=Ke.exists?Ke.data().value:0,Ii=lt.exists?lt.data().value:1,qr=ut.exists?ut.data().value:0,ir=nn.exists?nn.data().value:"",xi=_n.exists?_n.data().value:1,dr=Nt.exists?Nt.data().value:1,Cs=vn.exists?vn.data().value||[]:[];let sr=ve(xi);const dt=je(dr);if(Bt.exists){const Ze=Bt.data(),zt=(Ze==null?void 0:Ze.value)??sr;if((Ze==null?void 0:Ze.lastUpdated)instanceof Qt.firestore.Timestamp){const qa=Ze.lastUpdated.toMillis(),Rl=Date.now(),jr=Math.floor((Rl-qa)/1e3);sr=Math.min(ve(xi),zt+jr*dt)}else sr=zt}c(za),m(qr),_(Ii),x(sr),k(xi),re(dr),L(Cs),ir?b(ir):me(!0);const Me=Qt.firestore.FieldValue.serverTimestamp();Ba.exists||await ue().set({createdAt:Me},{merge:!0}),Ke.exists||await $("count").set({value:0,createdAt:Me}),lt.exists||await $("multiplier").set({value:1,createdAt:Me}),ut.exists||await $("totalCount").set({value:0,createdAt:Me}),Bt.exists||await $("energy").set({value:sr,lastUpdated:Me,createdAt:Me}),_n.exists||await $("maxEnergyLevel").set({value:1,createdAt:Me}),Nt.exists||await $("regenSpeedLevel").set({value:1,createdAt:Me}),localStorage.setItem(D,JSON.stringify({count:za,totalCount:qr,multiplier:Ii,username:ir,energy:sr,maxEnergyLevel:xi,regenSpeedLevel:dr,selectedSkin:I}))}catch(pe){console.error("[STATS] Завантаження помилка:",pe)}finally{a(!1)}})()},[ke]),H.useEffect(()=>{if(!ke)return;const Ee=setInterval(()=>{x(pe=>{const Ke=ve(U),lt=je(Q);if(pe>=Ke)return pe;const ut=Math.min(Ke,pe+lt),nn=Date.now();if(nn-Ce.current>=rO){const Bt=Qt.firestore.FieldValue.serverTimestamp();$("energy").set({value:ut,updatedAt:Bt,lastUpdated:Bt},{merge:!0}),Ce.current=nn,localStorage.setItem(D,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:ut,maxEnergyLevel:U,regenSpeedLevel:Q,selectedSkin:I}))}return ut})},nO);return()=>clearInterval(Ee)},[ke,l,d,p,T,U,Q,I]);const ne=()=>{R<=0||(x(Ee=>Math.max(0,Ee-1)),c(Ee=>Ee+p),m(Ee=>Ee+p),de(!0))};H.useEffect(()=>{if(!le||!ke)return;const Ee=setTimeout(()=>{const pe=Qt.firestore.FieldValue.serverTimestamp(),Ke=Qt.firestore.Timestamp.now();Promise.all([$("count").set({value:l,updatedAt:pe},{merge:!0}),$("totalCount").set({value:d,updatedAt:pe},{merge:!0}),$("energy").set({value:R,updatedAt:pe,lastUpdated:Ke},{merge:!0})]).then(()=>de(!1)),localStorage.setItem(D,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:R,maxEnergyLevel:U,regenSpeedLevel:Q,selectedSkin:I}))},200);return()=>clearTimeout(Ee)},[le,l,d,R,ke,I]),H.useEffect(()=>{if(!ke||!d)return;(async()=>{try{const pe=Qt.firestore.FieldValue.serverTimestamp(),Ke=$("achievements"),lt=await Ke.get(),ut=lt.exists?lt.data().value||[]:[],Bt=iO.filter(Nt=>Nt.condition({totalCount:d,energy:R,maxEnergyLevel:U,regenSpeedLevel:Q,multiplier:p})).map(Nt=>Nt.id).filter(Nt=>!ut.includes(Nt));Bt.length>0?(await Ke.set({value:Qt.firestore.FieldValue.arrayUnion(...Bt),updatedAt:pe},{merge:!0}),L([...ut,...Bt])):L(ut);const _n=Bt.map(Nt=>sO[Nt]).filter(Boolean).filter(Nt=>!V.includes(Nt));_n.length>0&&(await $("ownedSkins").set({value:Qt.firestore.FieldValue.arrayUnion(..._n),updatedAt:pe},{merge:!0}),S([...V,..._n]))}catch(pe){console.error("[ACHIEVEMENTS] Помилка при оновленні:",pe)}})()},[d,ke,R,U,Q,p,V]),H.useEffect(()=>{if(!ke)return;const Ee=localStorage.getItem(D);if(Ee){const pe=JSON.parse(Ee);localStorage.setItem(D,JSON.stringify({...pe,selectedSkin:I}))}},[I,ke]);const he=async Ee=>{if(!Ee.trim())return;const pe=Qt.firestore.FieldValue.serverTimestamp();await $("username").set({value:Ee,updatedAt:pe,createdAt:pe}),b(Ee),me(!1)},ae=async()=>{const Ee=O(U);if(l<Ee)return;const pe=U+1,Ke=Qt.firestore.FieldValue.serverTimestamp();await $("maxEnergyLevel").set({value:pe,updatedAt:Ke},{merge:!0}),c(lt=>lt-Ee),k(pe)},be=async()=>{const Ee=O(Q);if(l<Ee)return;const pe=Q+1,Ke=Qt.firestore.FieldValue.serverTimestamp();await $("regenSpeedLevel").set({value:pe,updatedAt:Ke},{merge:!0}),c(lt=>lt-Ee),re(pe)};return H.useEffect(()=>{if(!ke)return;(async()=>{try{const pe=$("ownedSkins"),Ke=$("selectedSkin"),[lt,ut]=await Promise.all([pe.get(),Ke.get()]),nn=Qt.firestore.FieldValue.serverTimestamp();lt.exists?S(lt.data().value||[]):(await pe.set({value:["default"],createdAt:nn}),S(["default"])),ut.exists?N(ut.data().value||null):(await Ke.set({value:"default",createdAt:nn}),N("default"))}catch(pe){console.error("[STORE] Помилка при завантаженні скінів:",pe)}})()},[ke]),{loading:r,count:l,totalCount:d,multiplier:p,username:T,showUsernameForm:W,setShowUsernameForm:me,increment:ne,saveUsername:he,energy:R,setEnergy:x,maxEnergyLevel:U,regenSpeedLevel:Q,upgradeMaxEnergy:ae,upgradeRegenSpeed:be,getUpgradeCost:O,setMultiplier:_,setMaxEnergyLevel:k,setRegenSpeedLevel:re,setCount:c,ownedSkins:V,selectedSkin:I,buySkin:async(Ee,pe)=>{if(V.includes(Ee)||l<pe)return;const Ke=[...V,Ee],lt=Qt.firestore.FieldValue.serverTimestamp();await $("ownedSkins").set({value:Ke,updatedAt:lt},{merge:!0}),S(Ke),c(ut=>ut-pe)},selectSkin:async Ee=>{if(!V.includes(Ee))return;const pe=Qt.firestore.FieldValue.serverTimestamp();await $("selectedSkin").set({value:Ee,updatedAt:pe},{merge:!0}),N(Ee)},achievements:P,setAchievements:L}}const _c="/clicker/assets/diamondpurple-DhR782hw.png",CS="/clicker/assets/bluediamond-DAS_-C76.png",VS="/clicker/assets/pinkdiamond-BhPCZE2S.png",NS="/clicker/assets/rubydiamond-BNEjWxti.png",OS="/clicker/assets/greendiamond-D3yAmbbI.png",MS="/clicker/assets/orangediamond-BGEiZPPy.png",PS="/clicker/assets/diamondgradiend1-3jbRu0wC.png",kS="/clicker/assets/diamondgradiend2-CLCBil5L.png",LS="/clicker/assets/diamondgradiend3-D0RBMDbD.png",aO={default:_c,blue:CS,pink:VS,ruby:NS,green:OS,orange:MS,gradient1:PS,gradient2:kS,gradient3:LS};function oO(s){return new Promise(e=>{const t=aO[s]||_c,r=localStorage.getItem(`clickImage_${s}`);if(r)e(r);else{const a=new Image;a.src=t,a.onload=()=>e(a.src),a.onerror=()=>e(_c)}})}function lO({userId:s,db:e,initialized:t}){const[r,a]=H.useState(""),[l,c]=H.useState(null),[d,m]=H.useState(!1),p=H.useMemo(()=>{try{const de=localStorage.getItem(`mainStats_${s}`);if(de)return JSON.parse(de).selectedSkin||"default"}catch{}return"default"},[s]),{count:_,multiplier:T,username:b,showUsernameForm:R,increment:x,saveUsername:U,energy:k,setEnergy:Q,maxEnergyLevel:re,selectedSkin:W}=Sl({db:e,userId:s,initialized:t});H.useEffect(()=>{(async()=>{if(!localStorage.getItem("clickImage_default")){const I=await(await fetch(_c)).blob(),N=new FileReader;N.onloadend=()=>{localStorage.setItem("clickImage_default",N.result)},N.readAsDataURL(I)}})()},[]),H.useEffect(()=>{oO(W||p||"default").then(V=>{c(V),m(!0)})},[W,p]);const me=de=>{const V=T??1;if(k>=V){x(),Q(P=>Math.max(0,P-V));const S=de.currentTarget.getBoundingClientRect(),I=de.clientX-S.left,N=de.clientY-S.top;le(`+${V}`,I,N)}},le=(de,V,S)=>{const I=document.getElementById("floating-numbers-container");if(!I)return;const N=document.createElement("div");N.className="floating-number",N.textContent=de;const P=Math.random()*30-15,L=Math.random()*30-15;N.style.left=`${V+P}px`,N.style.top=`${S+L}px`,I.appendChild(N),setTimeout(()=>N.remove(),1e3)};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left"}),z.jsx("div",{className:"header-center",children:b&&d?b:""}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsxs("div",{className:"wrapper",children:[R&&z.jsx("div",{className:"modal-backdrop",children:z.jsxs("div",{className:"modal",children:[z.jsx("h2",{children:"Введіть свій нікнейм"}),z.jsx("input",{type:"text",value:r,onChange:de=>a(de.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),z.jsx("button",{className:"menu-button",onClick:()=>U(r),children:"Зберегти"})]})}),z.jsx("div",{className:"logo-image-wrapper",style:{backgroundImage:`url(${eO})`}}),z.jsxs("div",{className:"clicker-container",children:[z.jsxs("p",{className:"clicker-text",children:["Монети: ",z.jsx("strong",{children:_??0})]}),d&&z.jsxs("div",{className:"clicker-wrapper",children:[z.jsx("div",{className:`clicker-img ${k===0?"disabled":""}`,onClick:k>0?me:void 0,onContextMenu:de=>de.preventDefault(),style:{backgroundImage:`url(${l})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"160px",height:"160px",opacity:k===0?.5:1,cursor:k===0?"not-allowed":"pointer",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},role:"button","aria-disabled":k===0}),z.jsx("div",{id:"floating-numbers-container",className:"floating-container"})]}),z.jsx("p",{className:"clicker-text",children:z.jsxs("strong",{children:[k??0,"/",(re??1)*1e3,"⚡️"]})})]}),z.jsxs("div",{className:"button-group fade-in",children:[z.jsx(tn,{to:"/upgrade",children:z.jsx("button",{className:"menu-button",children:"Покращення"})}),z.jsx(tn,{to:"/shop",children:z.jsx("button",{className:"menu-button",children:"Магазин"})}),z.jsx(tn,{to:"/achievements",children:z.jsx("button",{className:"menu-button",children:"Досягнення"})}),z.jsx(tn,{to:"/leaderboard",children:z.jsx("button",{className:"menu-button",children:"Топ"})})]})]})]})}const uO="/clicker/assets/upgrade-CJRUvsqd.png",cO="/clicker/assets/multiplierclicks-tZKAk3yr.png",hO="/clicker/assets/maxenergy-guOvq93r.png",fO="/clicker/assets/energyregeneration-DYBrYNJV.png";function dO({userId:s,db:e,initialized:t}){const{count:r,multiplier:a,setCount:l,setMultiplier:c,maxEnergyLevel:d,regenSpeedLevel:m,setMaxEnergyLevel:p,setRegenSpeedLevel:_}=Sl({db:e,userId:s,initialized:t}),[T,b]=H.useState(!1),[R,x]=H.useState(r),[U,k]=H.useState(a),[Q,re]=H.useState(d),[W,me]=H.useState(m);H.useEffect(()=>x(r),[r]),H.useEffect(()=>k(a),[a]),H.useEffect(()=>re(d),[d]),H.useEffect(()=>me(m),[m]);const le=(P,L)=>Math.floor(L*Math.pow(P,2)),de=le(U||1,100),V=le(Q||1,100),S=le(W||2,100),I=async P=>{const D={multiplier:{level:U,cost:de,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("multiplier").set({value:Ce,updatedAt:new Date},{merge:!0}),c(Ce),k(Ce)}},maxEnergy:{level:Q,cost:V,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("maxEnergyLevel").set({value:Ce,updatedAt:new Date},{merge:!0}),p(Ce),re(Ce)}},regenSpeed:{level:W,cost:S,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("regenSpeedLevel").set({value:Ce,updatedAt:new Date},{merge:!0}),_(Ce),me(Ce)}}}[P],ke=D.cost;if(R>=ke){const Ce=D.level+1;await Promise.all([e.collection("users").doc(String(s)).collection("stats").doc("count").set({value:R-ke,updatedAt:new Date},{merge:!0}),D.onUpgrade(Ce)]),l(R-ke),x(R-ke)}else b(!0)},N=[{type:"multiplier",title:"Множник кліку",level:U,cost:de,bg:cO,desc:`Покращити за
 ${de} монет`},{type:"maxEnergy",title:"Макс. енергія",level:Q,cost:V,bg:hO,desc:`Покращити за
 ${V} монет`},{type:"regenSpeed",title:"Регенерація",level:W,cost:S,bg:fO,desc:`Покращити за
 ${S} монет`}];return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})}),z.jsx("div",{className:"header-center"}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsxs("div",{className:"wrapper",children:[z.jsx("div",{className:"upgrade-image-wrapper",style:{backgroundImage:`url(${uO})`}}),z.jsxs("p",{className:"clicker-text",children:["Монети: ",z.jsx("strong",{children:R??"..."})]}),z.jsx("div",{className:"upgrade-container",children:z.jsx("div",{className:"upgrade-grid",children:N.map(({type:P,title:L,desc:D,bg:ke,level:Ce,cost:$})=>z.jsxs("div",{className:"upgrade-card",onClick:()=>I(P),children:[z.jsxs("div",{className:"level-badge",children:["lvl ",Ce]}),z.jsx("div",{className:"upgrade-card-img",style:{backgroundImage:`url(${ke})`}}),z.jsx("p",{className:"upgrade-title",children:L}),D.split(`
`).map((ue,ve)=>z.jsx("p",{children:ue},ve))]},P))})})]}),T&&z.jsx("div",{className:"modal-backdrop",children:z.jsxs("div",{className:"modal",children:[z.jsx("h3",{children:"Недостатньо монет!"}),z.jsx("button",{className:"menu-button",onClick:()=>b(!1),children:"Ок"})]})})]})}const mO="/clicker/assets/leaderboard-eL_LwdNf.png";function gO({userId:s,db:e,initialized:t}){const[r,a]=H.useState([]),[l,c]=H.useState(!0),d=e&&t;Sl({db:e,userId:s,initialized:t}),H.useEffect(()=>{if(!d)return;(async()=>{try{const _=await e.collection("users").get(),T=[];for(const b of _.docs){const R=e.collection("users").doc(b.id).collection("stats"),x=await R.get(),U={};x.forEach(Q=>{U[Q.id]=Q.data().value});const k=[];if(U.username===void 0){const Q=`Гравець-${b.id.slice(0,4)}`;k.push(R.doc("username").set({value:Q})),U.username=Q}U.totalCount===void 0&&(k.push(R.doc("totalCount").set({value:0})),U.totalCount=0),U.multiplier===void 0&&(k.push(R.doc("multiplier").set({value:1})),U.multiplier=1),k.length>0&&await Promise.all(k),T.push({userId:b.id,username:U.username,totalCount:U.totalCount,multiplier:U.multiplier})}T.sort((b,R)=>R.totalCount-b.totalCount),a(T)}catch(_){console.error("[ЛІДЕРБОРД] Помилка завантаження:",_)}finally{c(!1)}})()},[d]);let m={};if(l)m={top10:Array.from({length:10},(p,_)=>({userId:`loading-${_}`,username:"...",totalCount:"...",multiplier:"...",place:_+1,isCurrentUser:!1})),currentUser:null};else{const p=r.map((R,x)=>({...R,place:x+1,isCurrentUser:R.userId==s})),_=p.slice(0,10),b=_.some(R=>R.userId==s)?null:p.find(R=>R.userId==s);m={top10:_,currentUser:b}}return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsx("div",{className:"wrapper",children:z.jsxs("div",{className:"leaderboard",children:[z.jsx("div",{className:"leaderboard-title-img",style:{backgroundImage:`url(${mO})`}}),z.jsxs("div",{className:"leaderboard-header",children:[z.jsx("span",{children:"🏅"}),z.jsx("span",{children:"Ім’я"}),z.jsx("span",{children:"Зароблено"})]}),z.jsxs("div",{className:"leaderboard-container",children:[m.top10.map((p,_)=>z.jsxs("div",{className:`leaderboard-row ${p.place===1?"gold":p.place===2?"silver":p.place===3?"bronze":""} ${p.isCurrentUser?"highlight-row":""}`,children:[z.jsx("span",{children:p.place}),z.jsx("span",{children:p.username}),z.jsx("span",{children:p.totalCount})]},`${p.userId}-${_}`)),m.currentUser&&z.jsxs(z.Fragment,{children:[z.jsx("div",{className:"leaderboard-divider"}),z.jsxs("div",{className:"leaderboard-row highlight-row",children:[z.jsx("span",{children:m.currentUser.place}),z.jsx("span",{children:m.currentUser.username}),z.jsx("span",{children:m.currentUser.totalCount})]},`${m.currentUser.userId}-current`)]})]})]})})]})}const pO="/clicker/assets/Shop-DMGheY5Z.png";function yO({db:s,userId:e,initialized:t}){const{count:r,setCount:a}=Sl({db:s,userId:e,initialized:t}),[l,c]=H.useState(null),[d,m]=H.useState([]),[p,_]=H.useState(!1),T=[{id:"default",title:"Фіолетовий",image:_c,cost:0},{id:"blue",title:"Блакитний",image:CS,cost:1e4},{id:"pink",title:"Рожевий",image:VS,cost:1e4},{id:"ruby",title:"Рубін",image:NS,cost:1e4},{id:"green",title:"Зелений",image:OS,cost:1e4},{id:"orange",title:"Помаранчевий",image:MS,cost:1e4},{id:"gradient1",title:"Градіент",image:PS},{id:"gradient2",title:"Градіент",image:kS},{id:"gradient3",title:"Градіент",image:LS}],b=["gradient1","gradient2","gradient3"];H.useEffect(()=>{(async()=>{const U=await s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").get(),k=await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").get();U.exists&&m(U.data().value||[]),k.exists&&c(k.data().value)})()},[s,e]);const R=async x=>{if(d.includes(x.id)){await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:x.id,updatedAt:new Date},{merge:!0}),c(x.id);return}if(!b.includes(x.id))if(r>=x.cost){const U=r-x.cost,k=[...d,x.id];await Promise.all([s.collection("users").doc(String(e)).collection("stats").doc("count").set({value:U,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").set({value:k,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:x.id,updatedAt:new Date},{merge:!0})]),a(U),m(k),c(x.id)}else _(!0)};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsxs("div",{className:"wrapper",children:[z.jsx("div",{className:"shop-title-img",style:{backgroundImage:`url(${pO})`}}),z.jsxs("p",{className:"shop-balance",children:["Монети: ",z.jsx("strong",{children:r})]}),z.jsx("div",{className:"shop-container",children:z.jsx("div",{className:"shop-grid",children:T.map(x=>z.jsxs("div",{className:`shop-card ${l===x.id?"selected":""}`,onClick:()=>R(x),children:[z.jsx("div",{className:"shop-card-img",style:{backgroundImage:`url(${x.image})`}}),z.jsxs("div",{className:"shop-card-content",children:[z.jsx("p",{className:"shop-card-title",children:x.title}),d.includes(x.id)?z.jsx("p",{className:"shop-owned",children:l===x.id?"Обрано":"Натисни, щоб обрати"}):x.id.startsWith("gradient")?z.jsxs("div",{className:"shop-achievement",children:[z.jsx("p",{children:"Для отримання"}),z.jsx("p",{children:"виконайте досягнення:"}),z.jsx("p",{children:z.jsxs("strong",{children:[x.id==="gradient1"&&"1 000 000 кліків",x.id==="gradient2"&&"Множник lvl 20",x.id==="gradient3"&&"Кількісь енергії lvl 20"]})})]}):z.jsxs("p",{className:"shop-cost",children:["Придбати за ",x.cost," монет"]})]})]},x.id))})})]}),p&&z.jsx("div",{className:"modal-backdrop",children:z.jsxs("div",{className:"modal",children:[z.jsx("h3",{children:"Недостатньо монет!"}),z.jsx("button",{className:"menu-button",onClick:()=>_(!1),children:"Ок"})]})})]})}function _O({db:s,userId:e,initialized:t}){const{username:r,showUsernameForm:a,setShowUsernameForm:l,saveUsername:c}=Sl({db:s,userId:e,initialized:t}),[d,m]=H.useState(r),p=()=>{m(r),l(!0)};return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:"header",children:z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})})}),z.jsxs("div",{className:"wrapper",children:[z.jsx("h2",{className:"clicker-text",children:"⚙️ Налаштування"}),z.jsx("div",{className:"settings-section",children:z.jsxs("p",{className:"clicker-text",children:["ID: ",z.jsx("strong",{children:e})]})}),z.jsx("div",{className:"settings-section",children:z.jsx("button",{className:"menu-button",onClick:p,children:"Змінити нікнейм"})}),a&&z.jsx("div",{className:"modal-backdrop",children:z.jsxs("div",{className:"modal",children:[z.jsx("h2",{children:"Введіть свій нікнейм"}),z.jsx("input",{type:"text",value:d,onChange:_=>m(_.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),z.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[z.jsx("button",{className:"menu-button",onClick:()=>c(d),children:"Зберегти"}),z.jsx("button",{className:"menu-button cancel",onClick:()=>l(!1),style:{marginLeft:10},children:"Скасувати"})]})]})})]})]})}const iA="/clicker/assets/achievements-BtcYMwsE.png",vO=[{id:"click_1000",label:"1 000 кліків"},{id:"click_10000",label:"10 000 кліків"},{id:"click_100000",label:"100 000 кліків"},{id:"click_500000",label:"500 000 кліків"},{id:"click_1000000",label:"1 000 000 кліків"},{id:"upgrade_multiplier_lvl5",label:"Множник lvl 5"},{id:"upgrade_multiplier_lvl120",label:"Множник lvl 20"},{id:"upgrade_energy_lvl5",label:"Кількісь енергії lvl 5"},{id:"upgrade_energy_lvl20",label:"Кількісь енергії lvl 20"},{id:"upgrade_regen_lvl5",label:"Регенерація енергії lvl 5"},{id:"upgrade_regen_lvl20",label:"Регенерація енергії lvl 20"}];function EO({userId:s,db:e,initialized:t}){const{achievements:r,loading:a}=Sl({db:e,userId:s,initialized:t});return a?z.jsxs("div",{className:"wrapper",children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsx("div",{className:"avhievements-title-img",style:{backgroundImage:`url(${iA})`}}),z.jsx("p",{className:"achievements-loading",children:"Завантаження досягнень..."})]}):z.jsx(z.Fragment,{children:z.jsxs("div",{className:"wrapper",children:[z.jsxs("div",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(tn,{to:"/",className:"header-button",children:"←"})}),z.jsx("div",{className:"header-right",children:z.jsx(tn,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),z.jsx("div",{className:"achievements-title-img",style:{backgroundImage:`url(${iA})`}}),z.jsxs("div",{className:"achievements",children:[z.jsxs("div",{className:"achievements-header",children:[z.jsx("span",{children:"🏆"}),z.jsx("span",{children:"Досягнення"}),z.jsx("span",{children:"Статус"})]}),z.jsx("div",{className:"achievements-container",children:vO.map(({id:l,label:c})=>{const d=r.includes(l);return z.jsxs("div",{className:`achievements-row ${d?"achievements-completed":""}`,children:[z.jsx("span",{children:"🏅"}),z.jsx("span",{className:"achievement-title",children:c}),z.jsx("span",{className:"achievement-status",children:d?"Виконано":"Не виконано"})]},l)})})]})]})})}function TO(){const s=G1(),{initialized:e,db:t}=JN();return s&&e&&t?z.jsx(M1,{basename:"/clicker",children:z.jsxs(c1,{children:[z.jsx(ca,{path:"/",element:z.jsx(lO,{userId:s,db:t,initialized:e})}),z.jsx(ca,{path:"/upgrade",element:z.jsx(dO,{userId:s,db:t,initialized:e})}),z.jsx(ca,{path:"/leaderboard",element:z.jsx(gO,{userId:s,db:t,initialized:e})}),z.jsx(ca,{path:"/shop",element:z.jsx(yO,{userId:s,db:t,initialized:e})}),z.jsx(ca,{path:"/settings",element:z.jsx(_O,{db:t,userId:s,initialized:e})}),z.jsx(ca,{path:"/achievements",element:z.jsx(EO,{db:t,userId:s,initialized:e})})]})}):z.jsx("div",{className:"wrapper",children:z.jsx("p",{children:"Завантаження…"})})}vI.createRoot(document.getElementById("root")).render(z.jsx(hI.StrictMode,{children:z.jsx(TO,{})}));
