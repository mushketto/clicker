(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function aA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tg={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function tI(){if(nT)return Iu;nT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var rT;function nI(){return rT||(rT=1,Tg.exports=tI()),Tg.exports}var re=nI(),Ag={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function rI(){if(iT)return Ce;iT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=T&&C[T]||C["@@iterator"],typeof C=="function"?C:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,B={};function L(C,ee,le){this.props=C,this.context=ee,this.refs=B,this.updater=le||R}L.prototype.isReactComponent={},L.prototype.setState=function(C,ee){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,ee,"setState")},L.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function G(){}G.prototype=L.prototype;function J(C,ee,le){this.props=C,this.context=ee,this.refs=B,this.updater=le||R}var X=J.prototype=new G;X.constructor=J,O(X,L.prototype),X.isPureReactComponent=!0;var fe=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function N(C,ee,le,ae,ve,De){return le=De.ref,{$$typeof:s,type:C,key:ee,ref:le!==void 0?le:null,props:De}}function S(C,ee){return N(C.type,ee,void 0,void 0,void 0,C.props)}function I(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function V(C){var ee={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(le){return ee[le]})}var P=/\/+/g;function U(C,ee){return typeof C=="object"&&C!==null&&C.key!=null?V(""+C.key):ee.toString(36)}function x(){}function We(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(x,x):(C.status="pending",C.then(function(ee){C.status==="pending"&&(C.status="fulfilled",C.value=ee)},function(ee){C.status==="pending"&&(C.status="rejected",C.reason=ee)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Ve(C,ee,le,ae,ve){var De=typeof C;(De==="undefined"||De==="boolean")&&(C=null);var we=!1;if(C===null)we=!0;else switch(De){case"bigint":case"string":case"number":we=!0;break;case"object":switch(C.$$typeof){case s:case e:we=!0;break;case _:return we=C._init,Ve(we(C._payload),ee,le,ae,ve)}}if(we)return ve=ve(C),we=ae===""?"."+U(C,0):ae,fe(ve)?(le="",we!=null&&(le=we.replace(P,"$&/")+"/"),Ve(ve,ee,le,"",function(Sn){return Sn})):ve!=null&&(I(ve)&&(ve=S(ve,le+(ve.key==null||C&&C.key===ve.key?"":(""+ve.key).replace(P,"$&/")+"/")+we)),ee.push(ve)),1;we=0;var yt=ae===""?".":ae+":";if(fe(C))for(var Je=0;Je<C.length;Je++)ae=C[Je],De=yt+U(ae,Je),we+=Ve(ae,ee,le,De,ve);else if(Je=b(C),typeof Je=="function")for(C=Je.call(C),Je=0;!(ae=C.next()).done;)ae=ae.value,De=yt+U(ae,Je++),we+=Ve(ae,ee,le,De,ve);else if(De==="object"){if(typeof C.then=="function")return Ve(We(C),ee,le,ae,ve);throw ee=String(C),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return we}function Z(C,ee,le){if(C==null)return C;var ae=[],ve=0;return Ve(C,ae,"","",function(De){return ee.call(le,De,ve++)}),ae}function he(C){if(C._status===-1){var ee=C._result;ee=ee(),ee.then(function(le){(C._status===0||C._status===-1)&&(C._status=1,C._result=le)},function(le){(C._status===0||C._status===-1)&&(C._status=2,C._result=le)}),C._status===-1&&(C._status=0,C._result=ee)}if(C._status===1)return C._result.default;throw C._result}var Ae=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function _e(){}return Ce.Children={map:Z,forEach:function(C,ee,le){Z(C,function(){ee.apply(this,arguments)},le)},count:function(C){var ee=0;return Z(C,function(){ee++}),ee},toArray:function(C){return Z(C,function(ee){return ee})||[]},only:function(C){if(!I(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ce.Component=L,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=J,Ce.StrictMode=r,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(C){return oe.H.useMemoCache(C)}},Ce.cache=function(C){return function(){return C.apply(null,arguments)}},Ce.cloneElement=function(C,ee,le){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ae=O({},C.props),ve=C.key,De=void 0;if(ee!=null)for(we in ee.ref!==void 0&&(De=void 0),ee.key!==void 0&&(ve=""+ee.key),ee)!me.call(ee,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ee.ref===void 0||(ae[we]=ee[we]);var we=arguments.length-2;if(we===1)ae.children=le;else if(1<we){for(var yt=Array(we),Je=0;Je<we;Je++)yt[Je]=arguments[Je+2];ae.children=yt}return N(C.type,ve,void 0,void 0,De,ae)},Ce.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},Ce.createElement=function(C,ee,le){var ae,ve={},De=null;if(ee!=null)for(ae in ee.key!==void 0&&(De=""+ee.key),ee)me.call(ee,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ve[ae]=ee[ae]);var we=arguments.length-2;if(we===1)ve.children=le;else if(1<we){for(var yt=Array(we),Je=0;Je<we;Je++)yt[Je]=arguments[Je+2];ve.children=yt}if(C&&C.defaultProps)for(ae in we=C.defaultProps,we)ve[ae]===void 0&&(ve[ae]=we[ae]);return N(C,De,void 0,void 0,null,ve)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(C){return{$$typeof:d,render:C}},Ce.isValidElement=I,Ce.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:he}},Ce.memo=function(C,ee){return{$$typeof:p,type:C,compare:ee===void 0?null:ee}},Ce.startTransition=function(C){var ee=oe.T,le={};oe.T=le;try{var ae=C(),ve=oe.S;ve!==null&&ve(le,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(_e,Ae)}catch(De){Ae(De)}finally{oe.T=ee}},Ce.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},Ce.use=function(C){return oe.H.use(C)},Ce.useActionState=function(C,ee,le){return oe.H.useActionState(C,ee,le)},Ce.useCallback=function(C,ee){return oe.H.useCallback(C,ee)},Ce.useContext=function(C){return oe.H.useContext(C)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(C,ee){return oe.H.useDeferredValue(C,ee)},Ce.useEffect=function(C,ee,le){var ae=oe.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(C,ee)},Ce.useId=function(){return oe.H.useId()},Ce.useImperativeHandle=function(C,ee,le){return oe.H.useImperativeHandle(C,ee,le)},Ce.useInsertionEffect=function(C,ee){return oe.H.useInsertionEffect(C,ee)},Ce.useLayoutEffect=function(C,ee){return oe.H.useLayoutEffect(C,ee)},Ce.useMemo=function(C,ee){return oe.H.useMemo(C,ee)},Ce.useOptimistic=function(C,ee){return oe.H.useOptimistic(C,ee)},Ce.useReducer=function(C,ee,le){return oe.H.useReducer(C,ee,le)},Ce.useRef=function(C){return oe.H.useRef(C)},Ce.useState=function(C){return oe.H.useState(C)},Ce.useSyncExternalStore=function(C,ee,le){return oe.H.useSyncExternalStore(C,ee,le)},Ce.useTransition=function(){return oe.H.useTransition()},Ce.version="19.1.0",Ce}var sT;function wp(){return sT||(sT=1,Ag.exports=rI()),Ag.exports}var K=wp();const iI=aA(K);var bg={exports:{}},Du={},wg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function sI(){return aT||(aT=1,function(s){function e(Z,he){var Ae=Z.length;Z.push(he);e:for(;0<Ae;){var _e=Ae-1>>>1,C=Z[_e];if(0<a(C,he))Z[_e]=he,Z[Ae]=C,Ae=_e;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var he=Z[0],Ae=Z.pop();if(Ae!==he){Z[0]=Ae;e:for(var _e=0,C=Z.length,ee=C>>>1;_e<ee;){var le=2*(_e+1)-1,ae=Z[le],ve=le+1,De=Z[ve];if(0>a(ae,Ae))ve<C&&0>a(De,ae)?(Z[_e]=De,Z[ve]=Ae,_e=ve):(Z[_e]=ae,Z[le]=Ae,_e=le);else if(ve<C&&0>a(De,Ae))Z[_e]=De,Z[ve]=Ae,_e=ve;else break e}}return he}function a(Z,he){var Ae=Z.sortIndex-he.sortIndex;return Ae!==0?Ae:Z.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,b=3,R=!1,O=!1,B=!1,L=!1,G=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function fe(Z){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=Z)r(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function oe(Z){if(B=!1,fe(Z),!O)if(t(m)!==null)O=!0,me||(me=!0,U());else{var he=t(p);he!==null&&Ve(oe,he.startTime-Z)}}var me=!1,N=-1,S=5,I=-1;function V(){return L?!0:!(s.unstable_now()-I<S)}function P(){if(L=!1,me){var Z=s.unstable_now();I=Z;var he=!0;try{e:{O=!1,B&&(B=!1,J(N),N=-1),R=!0;var Ae=b;try{t:{for(fe(Z),T=t(m);T!==null&&!(T.expirationTime>Z&&V());){var _e=T.callback;if(typeof _e=="function"){T.callback=null,b=T.priorityLevel;var C=_e(T.expirationTime<=Z);if(Z=s.unstable_now(),typeof C=="function"){T.callback=C,fe(Z),he=!0;break t}T===t(m)&&r(m),fe(Z)}else r(m);T=t(m)}if(T!==null)he=!0;else{var ee=t(p);ee!==null&&Ve(oe,ee.startTime-Z),he=!1}}break e}finally{T=null,b=Ae,R=!1}he=void 0}}finally{he?U():me=!1}}}var U;if(typeof X=="function")U=function(){X(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,We=x.port2;x.port1.onmessage=P,U=function(){We.postMessage(null)}}else U=function(){G(P,0)};function Ve(Z,he){N=G(function(){Z(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var Ae=b;b=he;try{return Z()}finally{b=Ae}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ae=b;b=Z;try{return he()}finally{b=Ae}},s.unstable_scheduleCallback=function(Z,he,Ae){var _e=s.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?_e+Ae:_e):Ae=_e,Z){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Ae+C,Z={id:_++,callback:he,priorityLevel:Z,startTime:Ae,expirationTime:C,sortIndex:-1},Ae>_e?(Z.sortIndex=Ae,e(p,Z),t(m)===null&&Z===t(p)&&(B?(J(N),N=-1):B=!0,Ve(oe,Ae-_e))):(Z.sortIndex=C,e(m,Z),O||R||(O=!0,me||(me=!0,U()))),Z},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Z){var he=b;return function(){var Ae=b;b=he;try{return Z.apply(this,arguments)}finally{b=Ae}}}}(Sg)),Sg}var oT;function aI(){return oT||(oT=1,wg.exports=sI()),wg.exports}var Rg={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function oI(){if(lT)return an;lT=1;var s=wp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},an.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},an.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},an.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},an.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},an.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},an.requestFormReset=function(m){r.d.r(m)},an.unstable_batchedUpdates=function(m,p){return m(p)},an.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.1.0",an}var uT;function lI(){if(uT)return Rg.exports;uT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rg.exports=oI(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function uI(){if(cT)return Du;cT=1;var s=aI(),e=wp(),t=lI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),X=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case L:return"Profiler";case B:return"StrictMode";case oe:return"Suspense";case me:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case X:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case fe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return i=n.displayName||null,i!==null?i:We(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return We(n(i))}catch{}}return null}var Ve=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},_e=[],C=-1;function ee(n){return{current:n}}function le(n){0>C||(n.current=_e[C],_e[C]=null,C--)}function ae(n,i){C++,_e[C]=n.current,n.current=i}var ve=ee(null),De=ee(null),we=ee(null),yt=ee(null);function Je(n,i){switch(ae(we,i),ae(De,n),ae(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?CE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=CE(i),n=VE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}le(ve),ae(ve,n)}function Sn(){le(ve),le(De),le(we)}function tr(n){n.memoizedState!==null&&ae(yt,n);var i=ve.current,o=VE(i,n.type);i!==o&&(ae(De,n),ae(ve,o))}function kn(n){De.current===n&&(le(ve),le(De)),yt.current===n&&(le(yt),Au._currentValue=Ae)}var nr=Object.prototype.hasOwnProperty,Bn=s.unstable_scheduleCallback,rr=s.unstable_cancelCallback,zn=s.unstable_shouldYield,Pa=s.unstable_requestPaint,At=s.unstable_now,Pt=s.unstable_getCurrentPriorityLevel,wi=s.unstable_ImmediatePriority,Si=s.unstable_UserBlockingPriority,Br=s.unstable_NormalPriority,El=s.unstable_LowPriority,La=s.unstable_IdlePriority,Tl=s.log,Nc=s.unstable_setDisableYieldValue,_t=null,Ke=null;function Rn(n){if(typeof Tl=="function"&&Nc(n),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(_t,n)}catch{}}var rn=Math.clz32?Math.clz32:Is,Oc=Math.log,bd=Math.LN2;function Is(n){return n>>>=0,n===0?32:31-(Oc(n)/bd|0)|0}var Ds=256,xs=4194304;function ir(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ua(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=ir(u):(E&=A,E!==0?f=ir(E):o||(o=A&~n,o!==0&&(f=ir(o))))):(A=u&~g,A!==0?f=ir(A):E!==0?f=ir(E):o||(o=u&~n,o!==0&&(f=ir(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Cs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Al(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bl(){var n=Ds;return Ds<<=1,(Ds&4194048)===0&&(Ds=256),n}function wl(){var n=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),n}function zr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function qr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sl(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(o=E&~o;0<o;){var W=31-rn(o),ne=1<<W;A[W]=0,D[W]=-1;var H=F[W];if(H!==null)for(F[W]=null,W=0;W<H.length;W++){var Q=H[W];Q!==null&&(Q.lane&=-536870913)}o&=~ne}u!==0&&fr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function fr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-rn(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Rl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-rn(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function Ri(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ka(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ii(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:XE(n.type))}function Mc(n,i){var o=he.p;try{return he.p=n,i()}finally{he.p=o}}var lt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+lt,xt="__reactProps$"+lt,qn="__reactContainer$"+lt,Il="__reactEvents$"+lt,wd="__reactListeners$"+lt,Di="__reactHandles$"+lt,Pc="__reactResources$"+lt,Vs="__reactMarker$"+lt;function xi(n){delete n[Lt],delete n[xt],delete n[Il],delete n[wd],delete n[Di]}function jr(n){var i=n[Lt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[qn]||o[Lt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=PE(n);n!==null;){if(o=n[Lt])return o;n=PE(n)}return i}n=o,o=n.parentNode}return null}function dr(n){if(n=n[Lt]||n[qn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function mr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function hn(n){var i=n[Pc];return i||(i=n[Pc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bt(n){n[Vs]=!0}var Dl=new Set,Ba={};function sr(n,i){Fr(n,i),Fr(n+"Capture",i)}function Fr(n,i){for(Ba[n]=i,n=0;n<i.length;n++)Dl.add(i[n])}var Lc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uc={},Ns={};function kc(n){return nr.call(Ns,n)?!0:nr.call(Uc,n)?!1:Lc.test(n)?Ns[n]=!0:(Uc[n]=!0,!1)}function Ci(n,i,o){if(kc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function gr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Yt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var Os,Bc;function Gr(n){if(Os===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Os=i&&i[1]||"",Bc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Os+n+Bc}var za=!1;function qa(n,i){if(!n||za)return"";za=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var H=Q}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(Q){H=Q}n.call(ne.prototype)}}else{try{throw Error()}catch(Q){H=Q}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&H&&typeof Q.stack=="string")return[Q.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var D=E.split(`
`),F=A.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===F.length)for(u=D.length-1,f=F.length-1;1<=u&&0<=f&&D[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==F[f]){var W=`
`+D[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{za=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Gr(o):""}function xl(n){switch(n.tag){case 26:case 27:case 5:return Gr(n.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 15:return qa(n.type,!1);case 11:return qa(n.type.render,!1);case 1:return qa(n.type,!0);case 31:return Gr("Activity");default:return""}}function ja(n){try{var i="";do i+=xl(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sd(n){var i=Cl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Fa(n){n._valueTracker||(n._valueTracker=Sd(n))}function Vl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Cl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Ms(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rd=/[\n"\\]/g;function Ct(n){return n.replace(Rd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function In(n,i,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+fn(i)):n.value!==""+fn(i)&&(n.value=""+fn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Vi(n,E,fn(i)):o!=null?Vi(n,E,fn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+fn(A):n.removeAttribute("name")}function Ps(n,i,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+fn(o):"",i=i!=null?""+fn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Vi(n,i,o){i==="number"&&Ms(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Hr(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+fn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function et(n,i,o){if(i!=null&&(i=""+fn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+fn(o):""}function Ls(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ve(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=fn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function jn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Us.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Nl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&zc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&zc(n,g,i[g])}function Ol(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(n){return Dd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Qr=null;function Fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kr=null,$r=null;function Ml(n){var i=dr(n);if(i&&(n=i.stateNode)){var o=n[xt]||null;e:switch(n=i.stateNode,i.type){case"input":if(In(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ct(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[xt]||null;if(!f)throw Error(r(90));In(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Vl(u)}break e;case"textarea":et(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Hr(n,!!o.multiple,i,!1)}}}var pr=!1;function qc(n,i,o){if(pr)return n(i,o);pr=!0;try{var u=n(i);return u}finally{if(pr=!1,(Kr!==null||$r!==null)&&(Mh(),Kr&&(i=Kr,n=$r,$r=Kr=null,Ml(i),n)))for(i=0;i<n.length;i++)Ml(n[i])}}function ks(n,i){var o=n.stateNode;if(o===null)return null;var u=o[xt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ar)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Gn=!1}var yr=null,Ni=null,Yr=null;function Pl(){if(Yr)return Yr;var n,i=Ni,o=i.length,u,f="value"in yr?yr.value:yr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return Yr=f.slice(n,1<u?1-u:void 0)}function _r(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function vr(){return!0}function Ll(){return!1}function jt(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?vr:Ll,this.isPropagationStopped=Ll,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=jt(Qe),zs=_({},Qe,{view:0,detail:0}),jc=jt(zs),Qa,Ka,Er,qs=_({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Er&&(Er&&n.type==="mousemove"?(Qa=n.screenX-Er.screenX,Ka=n.screenY-Er.screenY):Ka=Qa=0,Er=n),Qa)},movementY:function(n){return"movementY"in n?n.movementY:Ka}}),Hn=jt(qs),Fc=_({},qs,{dataTransfer:0}),xd=jt(Fc),js=_({},zs,{relatedTarget:0}),$a=jt(js),Ul=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Ya=jt(Ul),Gc=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Xa=jt(Gc),Cd=_({},Qe,{data:0}),kl=jt(Cd),Fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Qc[n])?!!i[n]:!1}function Gs(){return Bl}var Kc=_({},zs,{key:function(n){if(n.key){var i=Fs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=_r(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Hc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(n){return n.type==="keypress"?_r(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_r(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Za=jt(Kc),$c=_({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=jt($c),Xr=_({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),Yc=jt(Xr),Xc=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zc=jt(Xc),Wc=_({},qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wa=jt(Wc),dn=_({},Qe,{newState:0,oldState:0}),Jc=jt(dn),eh=[9,13,27,32],Tr=ar&&"CompositionEvent"in window,h=null;ar&&"documentMode"in document&&(h=document.documentMode);var y=ar&&"TextEvent"in window&&!h,v=ar&&(!Tr||h&&8<h&&11>=h),w=" ",z=!1;function Y(n,i){switch(n){case"keyup":return eh.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Be=!1;function Ut(n,i){switch(n){case"compositionend":return ue(i);case"keypress":return i.which!==32?null:(z=!0,w);case"textInput":return n=i.data,n===w&&z?null:n;default:return null}}function ze(n,i){if(Be)return n==="compositionend"||!Tr&&Y(n,i)?(n=Pl(),Yr=Ni=yr=null,Be=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ft[n.type]:i==="textarea"}function Zr(n,i,o,u){Kr?$r?$r.push(u):$r=[u]:Kr=u,i=zh(i,"onChange"),0<i.length&&(o=new Ha("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Xt=null,Ar=null;function ql(n){SE(n,0)}function th(n){var i=mr(n);if(Vl(i))return n}function Qy(n,i){if(n==="change")return i}var Ky=!1;if(ar){var Vd;if(ar){var Nd="oninput"in document;if(!Nd){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),Nd=typeof $y.oninput=="function"}Vd=Nd}else Vd=!1;Ky=Vd&&(!document.documentMode||9<document.documentMode)}function Yy(){Xt&&(Xt.detachEvent("onpropertychange",Xy),Ar=Xt=null)}function Xy(n){if(n.propertyName==="value"&&th(Ar)){var i=[];Zr(i,Ar,n,Fn(n)),qc(ql,i)}}function VS(n,i,o){n==="focusin"?(Yy(),Xt=i,Ar=o,Xt.attachEvent("onpropertychange",Xy)):n==="focusout"&&Yy()}function NS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return th(Ar)}function OS(n,i){if(n==="click")return th(i)}function MS(n,i){if(n==="input"||n==="change")return th(i)}function PS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Dn=typeof Object.is=="function"?Object.is:PS;function jl(n,i){if(Dn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!nr.call(i,f)||!Dn(n[f],i[f]))return!1}return!0}function Zy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wy(n,i){var o=Zy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Zy(o)}}function Jy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Jy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function e_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ms(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ms(n.document)}return i}function Od(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var LS=ar&&"documentMode"in document&&11>=document.documentMode,Ja=null,Md=null,Fl=null,Pd=!1;function t_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pd||Ja==null||Ja!==Ms(u)||(u=Ja,"selectionStart"in u&&Od(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&jl(Fl,u)||(Fl=u,u=zh(Md,"onSelect"),0<u.length&&(i=new Ha("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Ja)))}function Hs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var eo={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Ld={},n_={};ar&&(n_=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function Qs(n){if(Ld[n])return Ld[n];if(!eo[n])return n;var i=eo[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in n_)return Ld[n]=i[o];return n}var r_=Qs("animationend"),i_=Qs("animationiteration"),s_=Qs("animationstart"),US=Qs("transitionrun"),kS=Qs("transitionstart"),BS=Qs("transitioncancel"),a_=Qs("transitionend"),o_=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function or(n,i){o_.set(n,i),sr(i,[n])}var l_=new WeakMap;function Qn(n,i){if(typeof n=="object"&&n!==null){var o=l_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:ja(i)},l_.set(n,i),i)}return{value:n,source:i,stack:ja(i)}}var Kn=[],to=0,kd=0;function nh(){for(var n=to,i=kd=to=0;i<n;){var o=Kn[i];Kn[i++]=null;var u=Kn[i];Kn[i++]=null;var f=Kn[i];Kn[i++]=null;var g=Kn[i];if(Kn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&u_(o,f,g)}}function rh(n,i,o,u){Kn[to++]=n,Kn[to++]=i,Kn[to++]=o,Kn[to++]=u,kd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,o,u){return rh(n,i,o,u),ih(n)}function no(n,i){return rh(n,null,null,i),ih(n)}function u_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-rn(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function ih(n){if(50<mu)throw mu=0,Hm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ro={};function zS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,o,u){return new zS(n,i,o,u)}function zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wr(n,i){var o=n.alternate;return o===null?(o=xn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function c_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function sh(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")zd(n)&&(E=1);else if(typeof n=="string")E=jR(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=xn(31,o,i,f),n.elementType=I,n.lanes=g,n;case O:return Ks(o.children,f,g,i);case B:E=8,f|=24;break;case L:return n=xn(12,o,i,f|2),n.elementType=L,n.lanes=g,n;case oe:return n=xn(13,o,i,f),n.elementType=oe,n.lanes=g,n;case me:return n=xn(19,o,i,f),n.elementType=me,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:case X:E=10;break e;case J:E=9;break e;case fe:E=11;break e;case N:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=xn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function Ks(n,i,o,u){return n=xn(7,n,u,i),n.lanes=o,n}function qd(n,i,o){return n=xn(6,n,null,i),n.lanes=o,n}function jd(n,i,o){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var io=[],so=0,ah=null,oh=0,$n=[],Yn=0,$s=null,Jr=1,ei="";function Ys(n,i){io[so++]=oh,io[so++]=ah,ah=n,oh=i}function h_(n,i,o){$n[Yn++]=Jr,$n[Yn++]=ei,$n[Yn++]=$s,$s=n;var u=Jr;n=ei;var f=32-rn(u)-1;u&=~(1<<f),o+=1;var g=32-rn(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Jr=1<<32-rn(i)+f|o<<f|u,ei=g+n}else Jr=1<<g|o<<f|u,ei=n}function Fd(n){n.return!==null&&(Ys(n,1),h_(n,1,0))}function Gd(n){for(;n===ah;)ah=io[--so],io[so]=null,oh=io[--so],io[so]=null;for(;n===$s;)$s=$n[--Yn],$n[Yn]=null,ei=$n[--Yn],$n[Yn]=null,Jr=$n[--Yn],$n[Yn]=null}var mn=null,vt=null,He=!1,Xs=null,br=!1,Hd=Error(r(519));function Zs(n){var i=Error(r(418,""));throw Ql(Qn(i,n)),Hd}function f_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Lt]=n,i[xt]=u,o){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(o=0;o<pu.length;o++)Pe(pu[o],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),Ps(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Fa(i);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Ls(i,u.value,u.defaultValue,u.children),Fa(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||xE(i.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),u.onScroll!=null&&Pe("scroll",i),u.onScrollEnd!=null&&Pe("scrollend",i),u.onClick!=null&&(i.onclick=qh),i=!0):i=!1,i||Zs(n)}function d_(n){for(mn=n.return;mn;)switch(mn.tag){case 5:case 13:br=!1;return;case 27:case 3:br=!0;return;default:mn=mn.return}}function Gl(n){if(n!==mn)return!1;if(!He)return d_(n),He=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||og(n.type,n.memoizedProps)),o=!o),o&&vt&&Zs(n),d_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){vt=ur(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}vt=null}}else i===27?(i=vt,$i(n.type)?(n=hg,hg=null,vt=n):vt=i):vt=mn?ur(n.stateNode.nextSibling):null;return!0}function Hl(){vt=mn=null,He=!1}function m_(){var n=Xs;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),Xs=null),n}function Ql(n){Xs===null?Xs=[n]:Xs.push(n)}var Qd=ee(null),Ws=null,ti=null;function Oi(n,i,o){ae(Qd,i._currentValue),i._currentValue=o}function ni(n){n._currentValue=Qd.current,le(Qd)}function Kd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function $d(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=f;for(var D=0;D<i.length;D++)if(A.context===i[D]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Kd(g.return,o,n),u||(E=null);break e}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Kd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Kl(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Dn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===yt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Au):n=[Au])}f=f.return}n!==null&&$d(i,n,o,u),i.flags|=262144}function lh(n){for(n=n.firstContext;n!==null;){if(!Dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Js(n){Ws=n,ti=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function sn(n){return g_(Ws,n)}function uh(n,i){return Ws===null&&Js(n),g_(n,i)}function g_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ti===null){if(n===null)throw Error(r(308));ti=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ti=ti.next=i;return o}var qS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},jS=s.unstable_scheduleCallback,FS=s.unstable_NormalPriority,Bt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new qS,data:new Map,refCount:0}}function $l(n){n.refCount--,n.refCount===0&&jS(FS,function(){n.controller.abort()})}var Yl=null,Xd=0,ao=0,oo=null;function GS(n,i){if(Yl===null){var o=Yl=[];Xd=0,ao=Wm(),oo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Xd++,i.then(p_,p_),i}function p_(){if(--Xd===0&&Yl!==null){oo!==null&&(oo.status="fulfilled");var n=Yl;Yl=null,ao=0,oo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function HS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var y_=Z.S;Z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&GS(n,i),y_!==null&&y_(n,i)};var ea=ee(null);function Zd(){var n=ea.current;return n!==null?n:st.pooledCache}function ch(n,i){i===null?ae(ea,ea.current):ae(ea,i.pool)}function __(){var n=Zd();return n===null?null:{parent:Bt._currentValue,pool:n}}var Xl=Error(r(460)),v_=Error(r(474)),hh=Error(r(542)),Wd={then:function(){}};function E_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function fh(){}function T_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(fh,fh),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,b_(n),n;default:if(typeof i.status=="string")i.then(fh,fh);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,b_(n),n}throw Zl=i,Xl}}var Zl=null;function A_(){if(Zl===null)throw Error(r(459));var n=Zl;return Zl=null,n}function b_(n){if(n===Xl||n===hh)throw Error(r(483))}var Mi=!1;function Jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Li(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=ih(n),u_(n,null,o),i}return rh(n,u,i,o),ih(n)}function Wl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Rl(n,o)}}function tm(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var nm=!1;function Jl(){if(nm){var n=oo;if(n!==null)throw n}}function eu(n,i,o,u){nm=!1;var f=n.updateQueue;Mi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,F=D.next;D.next=null,E===null?g=F:E.next=F,E=D;var W=n.alternate;W!==null&&(W=W.updateQueue,A=W.lastBaseUpdate,A!==E&&(A===null?W.firstBaseUpdate=F:A.next=F,W.lastBaseUpdate=D))}if(g!==null){var ne=f.baseState;E=0,W=F=D=null,A=g;do{var H=A.lane&-536870913,Q=H!==A.lane;if(Q?(qe&H)===H:(u&H)===H){H!==0&&H===ao&&(nm=!0),W!==null&&(W=W.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ie=n,be=A;H=i;var rt=o;switch(be.tag){case 1:if(Ie=be.payload,typeof Ie=="function"){ne=Ie.call(rt,ne,H);break e}ne=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=be.payload,H=typeof Ie=="function"?Ie.call(rt,ne,H):Ie,H==null)break e;ne=_({},ne,H);break e;case 2:Mi=!0}}H=A.callback,H!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[H]:Q.push(H))}else Q={lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},W===null?(F=W=Q,D=ne):W=W.next=Q,E|=H;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);W===null&&(D=ne),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=W,g===null&&(f.shared.lanes=0),Gi|=E,n.lanes=E,n.memoizedState=ne}}function w_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function S_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)w_(o[n],i)}var lo=ee(null),dh=ee(0);function R_(n,i){n=ui,ae(dh,n),ae(lo,i),ui=n|i.baseLanes}function rm(){ae(dh,ui),ae(lo,lo.current)}function im(){ui=dh.current,le(lo),le(dh)}var Ui=0,Ne=null,tt=null,Vt=null,mh=!1,uo=!1,ta=!1,gh=0,tu=0,co=null,QS=0;function wt(){throw Error(r(321))}function sm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Dn(n[o],i[o]))return!1;return!0}function am(n,i,o,u,f,g){return Ui=g,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?uv:cv,ta=!1,g=o(u,f),ta=!1,uo&&(g=D_(i,o,u,f)),I_(n),g}function I_(n){Z.H=Th;var i=tt!==null&&tt.next!==null;if(Ui=0,Vt=tt=Ne=null,mh=!1,tu=0,co=null,i)throw Error(r(300));n===null||Gt||(n=n.dependencies,n!==null&&lh(n)&&(Gt=!0))}function D_(n,i,o,u){Ne=n;var f=0;do{if(uo&&(co=null),tu=0,uo=!1,25<=f)throw Error(r(301));if(f+=1,Vt=tt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=JS,g=i(o,u)}while(uo);return g}function KS(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?nu(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Ne.flags|=1024),i}function om(){var n=gh!==0;return gh=0,n}function lm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function um(n){if(mh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mh=!1}Ui=0,Vt=tt=Ne=null,uo=!1,tu=gh=0,co=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ne.memoizedState=Vt=n:Vt=Vt.next=n,Vt}function Nt(){if(tt===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Vt===null?Ne.memoizedState:Vt.next;if(i!==null)Vt=i,tt=n;else{if(n===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Vt===null?Ne.memoizedState=Vt=n:Vt=Vt.next=n}return Vt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(n){var i=tu;return tu+=1,co===null&&(co=[]),n=T_(co,n,i),i=Ne,(Vt===null?i.memoizedState:Vt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?uv:cv),n}function ph(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return nu(n);if(n.$$typeof===X)return sn(n)}throw Error(r(438,String(n)))}function hm(n){var i=null,o=Ne.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=cm(),Ne.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=V;return i.index++,o}function ri(n,i){return typeof i=="function"?i(n):i}function yh(n){var i=Nt();return fm(i,tt,n)}function fm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var A=E=null,D=null,F=i,W=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(qe&ne)===ne:(Ui&ne)===ne){var H=F.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===ao&&(W=!0);else if((Ui&H)===H){F=F.next,H===ao&&(W=!0);continue}else ne={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=ne,E=g):D=D.next=ne,Ne.lanes|=H,Gi|=H;ne=F.action,ta&&o(g,ne),g=F.hasEagerState?F.eagerState:o(g,ne)}else H={lane:ne,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=H,E=g):D=D.next=H,Ne.lanes|=ne,Gi|=ne;F=F.next}while(F!==null&&F!==i);if(D===null?E=g:D.next=A,!Dn(g,n.memoizedState)&&(Gt=!0,W&&(o=oo,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=D,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function dm(n){var i=Nt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Dn(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function x_(n,i,o){var u=Ne,f=Nt(),g=He;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Dn((tt||f).memoizedState,o);E&&(f.memoizedState=o,Gt=!0),f=f.queue;var A=N_.bind(null,u,f,n);if(ru(2048,8,A,[n]),f.getSnapshot!==i||E||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,ho(9,_h(),V_.bind(null,u,f,o,i),null),st===null)throw Error(r(349));g||(Ui&124)!==0||C_(u,i,o)}return o}function C_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Ne.updateQueue,i===null?(i=cm(),Ne.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function V_(n,i,o,u){i.value=o,i.getSnapshot=u,O_(i)&&M_(n)}function N_(n,i,o){return o(function(){O_(i)&&M_(n)})}function O_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Dn(n,o)}catch{return!0}}function M_(n){var i=no(n,2);i!==null&&Mn(i,n,2)}function mm(n){var i=vn();if(typeof n=="function"){var o=n;if(n=o(),ta){Rn(!0);try{o()}finally{Rn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:n},i}function P_(n,i,o,u){return n.baseState=o,fm(n,tt,typeof u=="function"?u:ri)}function $S(n,i,o,u,f){if(Eh(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};Z.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,L_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function L_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=Z.T,E={};Z.T=E;try{var A=o(f,u),D=Z.S;D!==null&&D(E,A),U_(n,i,A)}catch(F){gm(n,i,F)}finally{Z.T=g}}else try{g=o(f,u),U_(n,i,g)}catch(F){gm(n,i,F)}}function U_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){k_(n,i,u)},function(u){return gm(n,i,u)}):k_(n,i,o)}function k_(n,i,o){i.status="fulfilled",i.value=o,B_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,L_(n,o)))}function gm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,B_(i),i=i.next;while(i!==u)}n.action=null}function B_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function z_(n,i){return i}function q_(n,i){if(He){var o=st.formState;if(o!==null){e:{var u=Ne;if(He){if(vt){t:{for(var f=vt,g=br;f.nodeType!==8;){if(!g){f=null;break t}if(f=ur(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){vt=ur(f.nextSibling),u=f.data==="F!";break e}}Zs(u)}u=!1}u&&(i=o[0])}}return o=vn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z_,lastRenderedState:i},o.queue=u,o=av.bind(null,Ne,u),u.dispatch=o,u=mm(!1),g=Em.bind(null,Ne,!1,u.queue),u=vn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=$S.bind(null,Ne,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function j_(n){var i=Nt();return F_(i,tt,n)}function F_(n,i,o){if(i=fm(n,i,z_)[0],n=yh(ri)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=nu(i)}catch(E){throw E===Xl?hh:E}else u=i;i=Nt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Ne.flags|=2048,ho(9,_h(),YS.bind(null,f,o),null)),[u,g,n]}function YS(n,i){n.action=i}function G_(n){var i=Nt(),o=tt;if(o!==null)return F_(i,o,n);Nt(),i=i.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function ho(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=cm(),Ne.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function _h(){return{destroy:void 0,resource:void 0}}function H_(){return Nt().memoizedState}function vh(n,i,o,u){var f=vn();u=u===void 0?null:u,Ne.flags|=n,f.memoizedState=ho(1|i,_h(),o,u)}function ru(n,i,o,u){var f=Nt();u=u===void 0?null:u;var g=f.memoizedState.inst;tt!==null&&u!==null&&sm(u,tt.memoizedState.deps)?f.memoizedState=ho(i,g,o,u):(Ne.flags|=n,f.memoizedState=ho(1|i,g,o,u))}function Q_(n,i){vh(8390656,8,n,i)}function K_(n,i){ru(2048,8,n,i)}function $_(n,i){return ru(4,2,n,i)}function Y_(n,i){return ru(4,4,n,i)}function X_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Z_(n,i,o){o=o!=null?o.concat([n]):null,ru(4,4,X_.bind(null,i,n),o)}function pm(){}function W_(n,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&sm(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function J_(n,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&sm(i,u[1]))return u[0];if(u=n(),ta){Rn(!0);try{n()}finally{Rn(!1)}}return o.memoizedState=[u,i],u}function ym(n,i,o){return o===void 0||(Ui&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=nE(),Ne.lanes|=n,Gi|=n,o)}function ev(n,i,o,u){return Dn(o,i)?o:lo.current!==null?(n=ym(n,o,u),Dn(n,i)||(Gt=!0),n):(Ui&42)===0?(Gt=!0,n.memoizedState=o):(n=nE(),Ne.lanes|=n,Gi|=n,i)}function tv(n,i,o,u,f){var g=he.p;he.p=g!==0&&8>g?g:8;var E=Z.T,A={};Z.T=A,Em(n,!1,i,o);try{var D=f(),F=Z.S;if(F!==null&&F(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=HS(D,u);iu(n,i,W,On(n))}else iu(n,i,u,On(n))}catch(ne){iu(n,i,{then:function(){},status:"rejected",reason:ne},On())}finally{he.p=g,Z.T=E}}function XS(){}function _m(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=nv(n).queue;tv(n,f,i,Ae,o===null?XS:function(){return rv(n),o(u)})}function nv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:Ae},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function rv(n){var i=nv(n).next.queue;iu(n,i,{},On())}function vm(){return sn(Au)}function iv(){return Nt().memoizedState}function sv(){return Nt().memoizedState}function ZS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=On();n=Pi(o);var u=Li(i,n,o);u!==null&&(Mn(u,i,o),Wl(u,i,o)),i={cache:Yd()},n.payload=i;return}i=i.return}}function WS(n,i,o){var u=On();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(n)?ov(i,o):(o=Bd(n,i,o,u),o!==null&&(Mn(o,n,u),lv(o,i,u)))}function av(n,i,o){var u=On();iu(n,i,o,u)}function iu(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(n))ov(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,Dn(A,E))return rh(n,i,f,0),st===null&&nh(),!1}catch{}finally{}if(o=Bd(n,i,f,u),o!==null)return Mn(o,n,u),lv(o,i,u),!0}return!1}function Em(n,i,o,u){if(u={lane:2,revertLane:Wm(),action:u,hasEagerState:!1,eagerState:null,next:null},Eh(n)){if(i)throw Error(r(479))}else i=Bd(n,o,u,2),i!==null&&Mn(i,n,2)}function Eh(n){var i=n.alternate;return n===Ne||i!==null&&i===Ne}function ov(n,i){uo=mh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function lv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Rl(n,o)}}var Th={readContext:sn,use:ph,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt},uv={readContext:sn,use:ph,useCallback:function(n,i){return vn().memoizedState=[n,i===void 0?null:i],n},useContext:sn,useEffect:Q_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,vh(4194308,4,X_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return vh(4194308,4,n,i)},useInsertionEffect:function(n,i){vh(4,2,n,i)},useMemo:function(n,i){var o=vn();i=i===void 0?null:i;var u=n();if(ta){Rn(!0);try{n()}finally{Rn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=vn();if(o!==void 0){var f=o(i);if(ta){Rn(!0);try{o(i)}finally{Rn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=WS.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var i=vn();return n={current:n},i.memoizedState=n},useState:function(n){n=mm(n);var i=n.queue,o=av.bind(null,Ne,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:pm,useDeferredValue:function(n,i){var o=vn();return ym(o,n,i)},useTransition:function(){var n=mm(!1);return n=tv.bind(null,Ne,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Ne,f=vn();if(He){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),st===null)throw Error(r(349));(qe&124)!==0||C_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,Q_(N_.bind(null,u,g,n),[n]),u.flags|=2048,ho(9,_h(),V_.bind(null,u,g,o,i),null),o},useId:function(){var n=vn(),i=st.identifierPrefix;if(He){var o=ei,u=Jr;o=(u&~(1<<32-rn(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=gh++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=QS++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:vm,useFormState:q_,useActionState:q_,useOptimistic:function(n){var i=vn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Em.bind(null,Ne,!0,o),o.dispatch=i,[n,i]},useMemoCache:hm,useCacheRefresh:function(){return vn().memoizedState=ZS.bind(null,Ne)}},cv={readContext:sn,use:ph,useCallback:W_,useContext:sn,useEffect:K_,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:J_,useReducer:yh,useRef:H_,useState:function(){return yh(ri)},useDebugValue:pm,useDeferredValue:function(n,i){var o=Nt();return ev(o,tt.memoizedState,n,i)},useTransition:function(){var n=yh(ri)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:nu(n),i]},useSyncExternalStore:x_,useId:iv,useHostTransitionStatus:vm,useFormState:j_,useActionState:j_,useOptimistic:function(n,i){var o=Nt();return P_(o,tt,n,i)},useMemoCache:hm,useCacheRefresh:sv},JS={readContext:sn,use:ph,useCallback:W_,useContext:sn,useEffect:K_,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:J_,useReducer:dm,useRef:H_,useState:function(){return dm(ri)},useDebugValue:pm,useDeferredValue:function(n,i){var o=Nt();return tt===null?ym(o,n,i):ev(o,tt.memoizedState,n,i)},useTransition:function(){var n=dm(ri)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:nu(n),i]},useSyncExternalStore:x_,useId:iv,useHostTransitionStatus:vm,useFormState:G_,useActionState:G_,useOptimistic:function(n,i){var o=Nt();return tt!==null?P_(o,tt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hm,useCacheRefresh:sv},fo=null,su=0;function Ah(n){var i=su;return su+=1,fo===null&&(fo=[]),T_(fo,n,i)}function au(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function bh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function hv(n){var i=n._init;return i(n._payload)}function fv(n){function i(k,M){if(n){var j=k.deletions;j===null?(k.deletions=[M],k.flags|=16):j.push(M)}}function o(k,M){if(!n)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function u(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function f(k,M){return k=Wr(k,M),k.index=0,k.sibling=null,k}function g(k,M,j){return k.index=j,n?(j=k.alternate,j!==null?(j=j.index,j<M?(k.flags|=67108866,M):j):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function E(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function A(k,M,j,te){return M===null||M.tag!==6?(M=qd(j,k.mode,te),M.return=k,M):(M=f(M,j),M.return=k,M)}function D(k,M,j,te){var pe=j.type;return pe===O?W(k,M,j.props.children,te,j.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&hv(pe)===M.type)?(M=f(M,j.props),au(M,j),M.return=k,M):(M=sh(j.type,j.key,j.props,null,k.mode,te),au(M,j),M.return=k,M)}function F(k,M,j,te){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=jd(j,k.mode,te),M.return=k,M):(M=f(M,j.children||[]),M.return=k,M)}function W(k,M,j,te,pe){return M===null||M.tag!==7?(M=Ks(j,k.mode,te,pe),M.return=k,M):(M=f(M,j),M.return=k,M)}function ne(k,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qd(""+M,k.mode,j),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return j=sh(M.type,M.key,M.props,null,k.mode,j),au(j,M),j.return=k,j;case R:return M=jd(M,k.mode,j),M.return=k,M;case S:var te=M._init;return M=te(M._payload),ne(k,M,j)}if(Ve(M)||U(M))return M=Ks(M,k.mode,j,null),M.return=k,M;if(typeof M.then=="function")return ne(k,Ah(M),j);if(M.$$typeof===X)return ne(k,uh(k,M),j);bh(k,M)}return null}function H(k,M,j,te){var pe=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return pe!==null?null:A(k,M,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return j.key===pe?D(k,M,j,te):null;case R:return j.key===pe?F(k,M,j,te):null;case S:return pe=j._init,j=pe(j._payload),H(k,M,j,te)}if(Ve(j)||U(j))return pe!==null?null:W(k,M,j,te,null);if(typeof j.then=="function")return H(k,M,Ah(j),te);if(j.$$typeof===X)return H(k,M,uh(k,j),te);bh(k,j)}return null}function Q(k,M,j,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return k=k.get(j)||null,A(M,k,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return k=k.get(te.key===null?j:te.key)||null,D(M,k,te,pe);case R:return k=k.get(te.key===null?j:te.key)||null,F(M,k,te,pe);case S:var Oe=te._init;return te=Oe(te._payload),Q(k,M,j,te,pe)}if(Ve(te)||U(te))return k=k.get(j)||null,W(M,k,te,pe,null);if(typeof te.then=="function")return Q(k,M,j,Ah(te),pe);if(te.$$typeof===X)return Q(k,M,j,uh(M,te),pe);bh(M,te)}return null}function Ie(k,M,j,te){for(var pe=null,Oe=null,Te=M,Se=M=0,Qt=null;Te!==null&&Se<j.length;Se++){Te.index>Se?(Qt=Te,Te=null):Qt=Te.sibling;var Fe=H(k,Te,j[Se],te);if(Fe===null){Te===null&&(Te=Qt);break}n&&Te&&Fe.alternate===null&&i(k,Te),M=g(Fe,M,Se),Oe===null?pe=Fe:Oe.sibling=Fe,Oe=Fe,Te=Qt}if(Se===j.length)return o(k,Te),He&&Ys(k,Se),pe;if(Te===null){for(;Se<j.length;Se++)Te=ne(k,j[Se],te),Te!==null&&(M=g(Te,M,Se),Oe===null?pe=Te:Oe.sibling=Te,Oe=Te);return He&&Ys(k,Se),pe}for(Te=u(Te);Se<j.length;Se++)Qt=Q(Te,k,Se,j[Se],te),Qt!==null&&(n&&Qt.alternate!==null&&Te.delete(Qt.key===null?Se:Qt.key),M=g(Qt,M,Se),Oe===null?pe=Qt:Oe.sibling=Qt,Oe=Qt);return n&&Te.forEach(function(Ji){return i(k,Ji)}),He&&Ys(k,Se),pe}function be(k,M,j,te){if(j==null)throw Error(r(151));for(var pe=null,Oe=null,Te=M,Se=M=0,Qt=null,Fe=j.next();Te!==null&&!Fe.done;Se++,Fe=j.next()){Te.index>Se?(Qt=Te,Te=null):Qt=Te.sibling;var Ji=H(k,Te,Fe.value,te);if(Ji===null){Te===null&&(Te=Qt);break}n&&Te&&Ji.alternate===null&&i(k,Te),M=g(Ji,M,Se),Oe===null?pe=Ji:Oe.sibling=Ji,Oe=Ji,Te=Qt}if(Fe.done)return o(k,Te),He&&Ys(k,Se),pe;if(Te===null){for(;!Fe.done;Se++,Fe=j.next())Fe=ne(k,Fe.value,te),Fe!==null&&(M=g(Fe,M,Se),Oe===null?pe=Fe:Oe.sibling=Fe,Oe=Fe);return He&&Ys(k,Se),pe}for(Te=u(Te);!Fe.done;Se++,Fe=j.next())Fe=Q(Te,k,Se,Fe.value,te),Fe!==null&&(n&&Fe.alternate!==null&&Te.delete(Fe.key===null?Se:Fe.key),M=g(Fe,M,Se),Oe===null?pe=Fe:Oe.sibling=Fe,Oe=Fe);return n&&Te.forEach(function(eI){return i(k,eI)}),He&&Ys(k,Se),pe}function rt(k,M,j,te){if(typeof j=="object"&&j!==null&&j.type===O&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case b:e:{for(var pe=j.key;M!==null;){if(M.key===pe){if(pe=j.type,pe===O){if(M.tag===7){o(k,M.sibling),te=f(M,j.props.children),te.return=k,k=te;break e}}else if(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===S&&hv(pe)===M.type){o(k,M.sibling),te=f(M,j.props),au(te,j),te.return=k,k=te;break e}o(k,M);break}else i(k,M);M=M.sibling}j.type===O?(te=Ks(j.props.children,k.mode,te,j.key),te.return=k,k=te):(te=sh(j.type,j.key,j.props,null,k.mode,te),au(te,j),te.return=k,k=te)}return E(k);case R:e:{for(pe=j.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){o(k,M.sibling),te=f(M,j.children||[]),te.return=k,k=te;break e}else{o(k,M);break}else i(k,M);M=M.sibling}te=jd(j,k.mode,te),te.return=k,k=te}return E(k);case S:return pe=j._init,j=pe(j._payload),rt(k,M,j,te)}if(Ve(j))return Ie(k,M,j,te);if(U(j)){if(pe=U(j),typeof pe!="function")throw Error(r(150));return j=pe.call(j),be(k,M,j,te)}if(typeof j.then=="function")return rt(k,M,Ah(j),te);if(j.$$typeof===X)return rt(k,M,uh(k,j),te);bh(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(o(k,M.sibling),te=f(M,j),te.return=k,k=te):(o(k,M),te=qd(j,k.mode,te),te.return=k,k=te),E(k)):o(k,M)}return function(k,M,j,te){try{su=0;var pe=rt(k,M,j,te);return fo=null,pe}catch(Te){if(Te===Xl||Te===hh)throw Te;var Oe=xn(29,Te,null,k.mode);return Oe.lanes=te,Oe.return=k,Oe}finally{}}}var mo=fv(!0),dv=fv(!1),Xn=ee(null),wr=null;function ki(n){var i=n.alternate;ae(zt,zt.current&1),ae(Xn,n),wr===null&&(i===null||lo.current!==null||i.memoizedState!==null)&&(wr=n)}function mv(n){if(n.tag===22){if(ae(zt,zt.current),ae(Xn,n),wr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(wr=n)}}else Bi()}function Bi(){ae(zt,zt.current),ae(Xn,Xn.current)}function ii(n){le(Xn),wr===n&&(wr=null),le(zt)}var zt=ee(0);function wh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||cg(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Tm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Am={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=On(),f=Pi(u);f.payload=i,o!=null&&(f.callback=o),i=Li(n,f,u),i!==null&&(Mn(i,n,u),Wl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=On(),f=Pi(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Li(n,f,u),i!==null&&(Mn(i,n,u),Wl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=On(),u=Pi(o);u.tag=2,i!=null&&(u.callback=i),i=Li(n,u,o),i!==null&&(Mn(i,n,o),Wl(i,n,o))}};function gv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!jl(o,u)||!jl(f,g):!0}function pv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Am.enqueueReplaceState(i,i.state,null)}function na(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Sh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function yv(n){Sh(n)}function _v(n){console.error(n)}function vv(n){Sh(n)}function Rh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Ev(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function bm(n,i,o){return o=Pi(o),o.tag=3,o.payload={element:null},o.callback=function(){Rh(n,i)},o}function Tv(n){return n=Pi(n),n.tag=3,n}function Av(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Ev(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Ev(i,o,u),typeof f!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function eR(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Kl(i,o,f,!0),o=Xn.current,o!==null){switch(o.tag){case 13:return wr===null?Km():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Ym(n,u,f)),!1;case 22:return o.flags|=65536,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Ym(n,u,f)),!1}throw Error(r(435,o.tag))}return Ym(n,u,f),Km(),!1}if(He)return i=Xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Hd&&(n=Error(r(422),{cause:u}),Ql(Qn(n,o)))):(u!==Hd&&(i=Error(r(423),{cause:u}),Ql(Qn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Qn(u,o),f=bm(n.stateNode,u,f),tm(n,f),Et!==4&&(Et=2)),!1;var g=Error(r(520),{cause:u});if(g=Qn(g,o),du===null?du=[g]:du.push(g),Et!==4&&(Et=2),i===null)return!0;u=Qn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=bm(o.stateNode,u,n),tm(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Hi===null||!Hi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Tv(f),Av(f,n,o,u),tm(o,f),!1}o=o.return}while(o!==null);return!1}var bv=Error(r(461)),Gt=!1;function Zt(n,i,o,u){i.child=n===null?dv(i,null,o,u):mo(i,n.child,o,u)}function wv(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return Js(i),u=am(n,i,o,E,g,f),A=om(),n!==null&&!Gt?(lm(n,i,f),si(n,i,f)):(He&&A&&Fd(i),i.flags|=1,Zt(n,i,u,f),i.child)}function Sv(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!zd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Rv(n,i,g,u,f)):(n=sh(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Vm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:jl,o(E,u)&&n.ref===i.ref)return si(n,i,f)}return i.flags|=1,n=Wr(g,u),n.ref=i.ref,n.return=i,i.child=n}function Rv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(jl(g,u)&&n.ref===i.ref)if(Gt=!1,i.pendingProps=u=g,Vm(n,f))(n.flags&131072)!==0&&(Gt=!0);else return i.lanes=n.lanes,si(n,i,f)}return wm(n,i,o,u,f)}function Iv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return Dv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ch(i,g!==null?g.cachePool:null),g!==null?R_(i,g):rm(),mv(i);else return i.lanes=i.childLanes=536870912,Dv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(ch(i,g.cachePool),R_(i,g),Bi(),i.memoizedState=null):(n!==null&&ch(i,null),rm(),Bi());return Zt(n,i,f,o),i.child}function Dv(n,i,o,u){var f=Zd();return f=f===null?null:{parent:Bt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&ch(i,null),rm(),mv(i),n!==null&&Kl(n,i,u,!0),null}function Ih(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function wm(n,i,o,u,f){return Js(i),o=am(n,i,o,u,void 0,f),u=om(),n!==null&&!Gt?(lm(n,i,f),si(n,i,f)):(He&&u&&Fd(i),i.flags|=1,Zt(n,i,o,f),i.child)}function xv(n,i,o,u,f,g){return Js(i),i.updateQueue=null,o=D_(i,u,o,f),I_(n),u=om(),n!==null&&!Gt?(lm(n,i,g),si(n,i,g)):(He&&u&&Fd(i),i.flags|=1,Zt(n,i,o,g),i.child)}function Cv(n,i,o,u,f){if(Js(i),i.stateNode===null){var g=ro,E=o.contextType;typeof E=="object"&&E!==null&&(g=sn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Am,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Jd(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?sn(E):ro,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Tm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Am.enqueueReplaceState(g,g.state,null),eu(i,u,g,f),Jl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var A=i.memoizedProps,D=na(o,A);g.props=D;var F=g.context,W=o.contextType;E=ro,typeof W=="object"&&W!==null&&(E=sn(W));var ne=o.getDerivedStateFromProps;W=typeof ne=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||F!==E)&&pv(i,g,u,E),Mi=!1;var H=i.memoizedState;g.state=H,eu(i,u,g,f),Jl(),F=i.memoizedState,A||H!==F||Mi?(typeof ne=="function"&&(Tm(i,o,ne,u),F=i.memoizedState),(D=Mi||gv(i,o,D,u,H,F,E))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),g.props=u,g.state=F,g.context=E,u=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,em(n,i),E=i.memoizedProps,W=na(o,E),g.props=W,ne=i.pendingProps,H=g.context,F=o.contextType,D=ro,typeof F=="object"&&F!==null&&(D=sn(F)),A=o.getDerivedStateFromProps,(F=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ne||H!==D)&&pv(i,g,u,D),Mi=!1,H=i.memoizedState,g.state=H,eu(i,u,g,f),Jl();var Q=i.memoizedState;E!==ne||H!==Q||Mi||n!==null&&n.dependencies!==null&&lh(n.dependencies)?(typeof A=="function"&&(Tm(i,o,A,u),Q=i.memoizedState),(W=Mi||gv(i,o,W,u,H,Q,D)||n!==null&&n.dependencies!==null&&lh(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Q,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Q,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),g.props=u,g.state=Q,g.context=D,u=W):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Ih(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=mo(i,n.child,null,f),i.child=mo(i,null,o,f)):Zt(n,i,o,f),i.memoizedState=g.state,n=i.child):n=si(n,i,f),n}function Vv(n,i,o,u){return Hl(),i.flags|=256,Zt(n,i,o,u),i.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:__()}}function Im(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Zn),n}function Nv(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(zt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(He){if(f?ki(i):Bi(),He){var A=vt,D;if(D=A){e:{for(D=A,A=br;D.nodeType!==8;){if(!A){A=null;break e}if(D=ur(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(i.memoizedState={dehydrated:A,treeContext:$s!==null?{id:Jr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},D=xn(18,null,null,0),D.stateNode=A,D.return=i,i.child=D,mn=i,vt=null,D=!0):D=!1}D||Zs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return cg(A)?i.lanes=32:i.lanes=536870912,null;ii(i)}return A=u.children,u=u.fallback,f?(Bi(),f=i.mode,A=Dh({mode:"hidden",children:A},f),u=Ks(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=Rm(o),f.childLanes=Im(n,E,o),i.memoizedState=Sm,u):(ki(i),Dm(i,A))}if(D=n.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(g)i.flags&256?(ki(i),i.flags&=-257,i=xm(n,i,o)):i.memoizedState!==null?(Bi(),i.child=n.child,i.flags|=128,i=null):(Bi(),f=u.fallback,A=i.mode,u=Dh({mode:"visible",children:u.children},A),f=Ks(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,mo(i,n.child,null,o),u=i.child,u.memoizedState=Rm(o),u.childLanes=Im(n,E,o),i.memoizedState=Sm,i=f);else if(ki(i),cg(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(r(419)),u.stack="",u.digest=E,Ql({value:u,source:null,stack:null}),i=xm(n,i,o)}else if(Gt||Kl(n,i,o,!1),E=(o&n.childLanes)!==0,Gt||E){if(E=st,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ri(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,no(n,u),Mn(E,n,u),bv;A.data==="$?"||Km(),i=xm(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,vt=ur(A.nextSibling),mn=i,He=!0,Xs=null,br=!1,n!==null&&($n[Yn++]=Jr,$n[Yn++]=ei,$n[Yn++]=$s,Jr=n.id,ei=n.overflow,$s=i),i=Dm(i,u.children),i.flags|=4096);return i}return f?(Bi(),f=u.fallback,A=i.mode,D=n.child,F=D.sibling,u=Wr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,F!==null?f=Wr(F,f):(f=Ks(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=n.child.memoizedState,A===null?A=Rm(o):(D=A.cachePool,D!==null?(F=Bt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=__(),A={baseLanes:A.baseLanes|o,cachePool:D}),f.memoizedState=A,f.childLanes=Im(n,E,o),i.memoizedState=Sm,u):(ki(i),o=n.child,n=o.sibling,o=Wr(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Dm(n,i){return i=Dh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Dh(n,i){return n=xn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function xm(n,i,o){return mo(i,n.child,null,o),n=Dm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ov(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Kd(n.return,i,o)}function Cm(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function Mv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(Zt(n,i,u.children,o),u=zt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ov(n,o,i);else if(n.tag===19)Ov(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ae(zt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&wh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Cm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&wh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Cm(i,!0,o,null,g);break;case"together":Cm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function si(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Gi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Kl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Wr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Wr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Vm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&lh(n)))}function tR(n,i,o){switch(i.tag){case 3:Je(i,i.stateNode.containerInfo),Oi(i,Bt,n.memoizedState.cache),Hl();break;case 27:case 5:tr(i);break;case 4:Je(i,i.stateNode.containerInfo);break;case 10:Oi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ki(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Nv(n,i,o):(ki(i),n=si(n,i,o),n!==null?n.sibling:null);ki(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Kl(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Mv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(zt,zt.current),u)break;return null;case 22:case 23:return i.lanes=0,Iv(n,i,o);case 24:Oi(i,Bt,n.memoizedState.cache)}return si(n,i,o)}function Pv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Gt=!0;else{if(!Vm(n,o)&&(i.flags&128)===0)return Gt=!1,tR(n,i,o);Gt=(n.flags&131072)!==0}else Gt=!1,He&&(i.flags&1048576)!==0&&h_(i,oh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")zd(u)?(n=na(u,n),i.tag=1,i=Cv(null,i,u,n,o)):(i.tag=0,i=wm(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===fe){i.tag=11,i=wv(null,i,u,n,o);break e}else if(f===N){i.tag=14,i=Sv(null,i,u,n,o);break e}}throw i=We(u)||u,Error(r(306,i,""))}}return i;case 0:return wm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=na(u,i.pendingProps),Cv(n,i,u,f,o);case 3:e:{if(Je(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,em(n,i),eu(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Oi(i,Bt,u),u!==g.cache&&$d(i,[Bt],o,!0),Jl(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Vv(n,i,u,o);break e}else if(u!==f){f=Qn(Error(r(424)),i),Ql(f),i=Vv(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(vt=ur(n.firstChild),mn=i,He=!0,Xs=null,br=!0,o=dv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Hl(),u===f){i=si(n,i,o);break e}Zt(n,i,u,o)}i=i.child}return i;case 26:return Ih(n,i),n===null?(o=BE(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,n=i.pendingProps,u=jh(we.current).createElement(o),u[Lt]=i,u[xt]=n,Jt(u,o,n),bt(u),i.stateNode=u):i.memoizedState=BE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return tr(i),n===null&&He&&(u=i.stateNode=LE(i.type,i.pendingProps,we.current),mn=i,br=!0,f=vt,$i(i.type)?(hg=f,vt=ur(u.firstChild)):vt=f),Zt(n,i,i.pendingProps.children,o),Ih(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&He&&((f=u=vt)&&(u=xR(u,i.type,i.pendingProps,br),u!==null?(i.stateNode=u,mn=i,vt=ur(u.firstChild),br=!1,f=!0):f=!1),f||Zs(i)),tr(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,og(f,g)?u=null:E!==null&&og(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=am(n,i,KS,null,null,o),Au._currentValue=f),Ih(n,i),Zt(n,i,u,o),i.child;case 6:return n===null&&He&&((n=o=vt)&&(o=CR(o,i.pendingProps,br),o!==null?(i.stateNode=o,mn=i,vt=null,n=!0):n=!1),n||Zs(i)),null;case 13:return Nv(n,i,o);case 4:return Je(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=mo(i,null,u,o):Zt(n,i,u,o),i.child;case 11:return wv(n,i,i.type,i.pendingProps,o);case 7:return Zt(n,i,i.pendingProps,o),i.child;case 8:return Zt(n,i,i.pendingProps.children,o),i.child;case 12:return Zt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Oi(i,i.type,u.value),Zt(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Js(i),f=sn(f),u=u(f),i.flags|=1,Zt(n,i,u,o),i.child;case 14:return Sv(n,i,i.type,i.pendingProps,o);case 15:return Rv(n,i,i.type,i.pendingProps,o);case 19:return Mv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=Dh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Wr(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Iv(n,i,o);case 24:return Js(i),u=sn(Bt),n===null?(f=Zd(),f===null&&(f=st,g=Yd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},Jd(i),Oi(i,Bt,f)):((n.lanes&o)!==0&&(em(n,i),eu(i,null,null,o),Jl()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oi(i,Bt,u)):(u=g.cache,Oi(i,Bt,u),u!==f.cache&&$d(i,[Bt],o,!0))),Zt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ai(n){n.flags|=4}function Lv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!GE(i)){if(i=Xn.current,i!==null&&((qe&4194048)===qe?wr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==wr))throw Zl=Wd,v_;n.flags|=8192}}function xh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?wl():536870912,n.lanes|=i,_o|=i)}function ou(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function nR(n,i,o){var u=i.pendingProps;switch(Gd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ni(Bt),Sn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Gl(i)?ai(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,m_())),mt(i),null;case 26:return o=i.memoizedState,n===null?(ai(i),o!==null?(mt(i),Lv(i,o)):(mt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(ai(i),mt(i),Lv(i,o)):(mt(i),i.flags&=-16777217):(n.memoizedProps!==u&&ai(i),mt(i),i.flags&=-16777217),null;case 27:kn(i),o=we.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ai(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return mt(i),null}n=ve.current,Gl(i)?f_(i):(n=LE(f,u,o),i.stateNode=n,ai(i))}return mt(i),null;case 5:if(kn(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ai(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return mt(i),null}if(n=ve.current,Gl(i))f_(i);else{switch(f=jh(we.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Lt]=i,n[xt]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Jt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ai(i)}}return mt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&ai(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=we.current,Gl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Lt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||xE(n.nodeValue,o)),n||Zs(i)}else n=jh(n).createTextNode(u),n[Lt]=i,i.stateNode=n}return mt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Gl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Lt]=i}else Hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),f=!1}else f=m_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ii(i),i):(ii(i),null)}if(ii(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),xh(i,i.updateQueue),mt(i),null;case 4:return Sn(),n===null&&ng(i.stateNode.containerInfo),mt(i),null;case 10:return ni(i.type),mt(i),null;case 19:if(le(zt),f=i.memoizedState,f===null)return mt(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)ou(f,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=wh(n),g!==null){for(i.flags|=128,ou(f,!1),n=g.updateQueue,i.updateQueue=n,xh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)c_(o,n),o=o.sibling;return ae(zt,zt.current&1|2),i.child}n=n.sibling}f.tail!==null&&At()>Nh&&(i.flags|=128,u=!0,ou(f,!1),i.lanes=4194304)}else{if(!u)if(n=wh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,xh(i,n),ou(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!He)return mt(i),null}else 2*At()-f.renderingStartTime>Nh&&o!==536870912&&(i.flags|=128,u=!0,ou(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=At(),i.sibling=null,n=zt.current,ae(zt,u?n&1|2:n&1),i):(mt(i),null);case 22:case 23:return ii(i),im(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),o=i.updateQueue,o!==null&&xh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&le(ea),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ni(Bt),mt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function rR(n,i){switch(Gd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ni(Bt),Sn(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return kn(i),null;case 13:if(ii(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Hl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return le(zt),null;case 4:return Sn(),null;case 10:return ni(i.type),null;case 22:case 23:return ii(i),im(),n!==null&&le(ea),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ni(Bt),null;case 25:return null;default:return null}}function Uv(n,i){switch(Gd(i),i.tag){case 3:ni(Bt),Sn();break;case 26:case 27:case 5:kn(i);break;case 4:Sn();break;case 13:ii(i);break;case 19:le(zt);break;case 10:ni(i.type);break;case 22:case 23:ii(i),im(),n!==null&&le(ea);break;case 24:ni(Bt)}}function lu(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){it(i,i.return,A)}}function zi(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var D=o,F=A;try{F()}catch(W){it(f,D,W)}}}u=u.next}while(u!==g)}}catch(W){it(i,i.return,W)}}function kv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{S_(i,o)}catch(u){it(n,n.return,u)}}}function Bv(n,i,o){o.props=na(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){it(n,i,u)}}function uu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){it(n,i,f)}}function Sr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(n,i,f)}else o.current=null}function zv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(n,n.return,f)}}function Nm(n,i,o){try{var u=n.stateNode;wR(u,n.type,o,i),u[xt]=i}catch(f){it(n,n.return,f)}}function qv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&$i(n.type)||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&$i(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=qh));else if(u!==4&&(u===27&&$i(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Mm(n,i,o),n=n.sibling;n!==null;)Mm(n,i,o),n=n.sibling}function Ch(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&$i(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ch(n,i,o),n=n.sibling;n!==null;)Ch(n,i,o),n=n.sibling}function jv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,u,o),i[Lt]=n,i[xt]=o}catch(g){it(n,n.return,g)}}var oi=!1,St=!1,Pm=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function iR(n,i){if(n=n.containerInfo,sg=$h,n=e_(n),Od(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,A=-1,D=-1,F=0,W=0,ne=n,H=null;t:for(;;){for(var Q;ne!==o||f!==0&&ne.nodeType!==3||(A=E+f),ne!==g||u!==0&&ne.nodeType!==3||(D=E+u),ne.nodeType===3&&(E+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)H=ne,ne=Q;for(;;){if(ne===n)break t;if(H===o&&++F===f&&(A=E),H===g&&++W===u&&(D=E),(Q=ne.nextSibling)!==null)break;ne=H,H=ne.parentNode}ne=Q}o=A===-1||D===-1?null:{start:A,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ag={focusedElem:n,selectionRange:o},$h=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ie=na(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Ie,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(be){it(o,o.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)ug(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ug(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function Gv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:qi(n,o),u&4&&lu(5,o);break;case 1:if(qi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){it(o,o.return,E)}else{var f=na(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&kv(o),u&512&&uu(o,o.return);break;case 3:if(qi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{S_(n,i)}catch(E){it(o,o.return,E)}}break;case 27:i===null&&u&4&&jv(o);case 26:case 5:qi(n,o),i===null&&u&4&&zv(o),u&512&&uu(o,o.return);break;case 12:qi(n,o);break;case 13:qi(n,o),u&4&&Kv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=dR.bind(null,o),VR(n,o))));break;case 22:if(u=o.memoizedState!==null||oi,!u){i=i!==null&&i.memoizedState!==null||St,f=oi;var g=St;oi=u,(St=i)&&!g?ji(n,o,(o.subtreeFlags&8772)!==0):qi(n,o),oi=f,St=g}break;case 30:break;default:qi(n,o)}}function Hv(n){var i=n.alternate;i!==null&&(n.alternate=null,Hv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&xi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ut=null,En=!1;function li(n,i,o){for(o=o.child;o!==null;)Qv(n,i,o),o=o.sibling}function Qv(n,i,o){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:St||Sr(o,i),li(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:St||Sr(o,i);var u=ut,f=En;$i(o.type)&&(ut=o.stateNode,En=!1),li(n,i,o),_u(o.stateNode),ut=u,En=f;break;case 5:St||Sr(o,i);case 6:if(u=ut,f=En,ut=null,li(n,i,o),ut=u,En=f,ut!==null)if(En)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(o.stateNode)}catch(g){it(o,i,g)}else try{ut.removeChild(o.stateNode)}catch(g){it(o,i,g)}break;case 18:ut!==null&&(En?(n=ut,ME(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ru(n)):ME(ut,o.stateNode));break;case 4:u=ut,f=En,ut=o.stateNode.containerInfo,En=!0,li(n,i,o),ut=u,En=f;break;case 0:case 11:case 14:case 15:St||zi(2,o,i),St||zi(4,o,i),li(n,i,o);break;case 1:St||(Sr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Bv(o,i,u)),li(n,i,o);break;case 21:li(n,i,o);break;case 22:St=(u=St)||o.memoizedState!==null,li(n,i,o),St=u;break;default:li(n,i,o)}}function Kv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ru(n)}catch(o){it(i,i.return,o)}}function sR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Fv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Fv),i;default:throw Error(r(435,n.tag))}}function Lm(n,i){var o=sR(n);i.forEach(function(u){var f=mR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Cn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if($i(A.type)){ut=A.stateNode,En=!1;break e}break;case 5:ut=A.stateNode,En=!1;break e;case 3:case 4:ut=A.stateNode.containerInfo,En=!0;break e}A=A.return}if(ut===null)throw Error(r(160));Qv(g,E,f),ut=null,En=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)$v(i,n),i=i.sibling}var lr=null;function $v(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Cn(i,n),Vn(n),u&4&&(zi(3,n,n.return),lu(3,n),zi(5,n,n.return));break;case 1:Cn(i,n),Vn(n),u&512&&(St||o===null||Sr(o,o.return)),u&64&&oi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=lr;if(Cn(i,n),Vn(n),u&512&&(St||o===null||Sr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Vs]||g[Lt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Jt(g,u,o),g[Lt]=n,bt(g),u=g;break e;case"link":var E=jE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;case"meta":if(E=jE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Lt]=n,bt(g),u=g}n.stateNode=u}else FE(f,n.type,n.stateNode);else n.stateNode=qE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?FE(f,n.type,n.stateNode):qE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Cn(i,n),Vn(n),u&512&&(St||o===null||Sr(o,o.return)),o!==null&&u&4&&Nm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Cn(i,n),Vn(n),u&512&&(St||o===null||Sr(o,o.return)),n.flags&32){f=n.stateNode;try{jn(f,"")}catch(Q){it(n,n.return,Q)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Nm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Pm=!0);break;case 6:if(Cn(i,n),Vn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Q){it(n,n.return,Q)}}break;case 3:if(Hh=null,f=lr,lr=Fh(i.containerInfo),Cn(i,n),lr=f,Vn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ru(i.containerInfo)}catch(Q){it(n,n.return,Q)}Pm&&(Pm=!1,Yv(n));break;case 4:u=lr,lr=Fh(n.stateNode.containerInfo),Cn(i,n),Vn(n),lr=u;break;case 12:Cn(i,n),Vn(n);break;case 13:Cn(i,n),Vn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=At()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,F=oi,W=St;if(oi=F||f,St=W||D,Cn(i,n),St=W,oi=F,Vn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||oi||St||ra(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=D.stateNode;var ne=D.memoizedProps.style,H=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;A.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Q){it(D,D.return,Q)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Q){it(D,D.return,Q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Lm(n,o))));break;case 19:Cn(i,n),Vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 30:break;case 21:break;default:Cn(i,n),Vn(n)}}function Vn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(qv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Om(n);Ch(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(jn(E,""),o.flags&=-33);var A=Om(n);Ch(n,A,E);break;case 3:case 4:var D=o.stateNode.containerInfo,F=Om(n);Mm(n,F,D);break;default:throw Error(r(161))}}catch(W){it(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Yv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function qi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Gv(n,i.alternate,i),i=i.sibling}function ra(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:zi(4,i,i.return),ra(i);break;case 1:Sr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Bv(i,i.return,o),ra(i);break;case 27:_u(i.stateNode);case 26:case 5:Sr(i,i.return),ra(i);break;case 22:i.memoizedState===null&&ra(i);break;case 30:ra(i);break;default:ra(i)}n=n.sibling}}function ji(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:ji(f,g,o),lu(4,g);break;case 1:if(ji(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){it(u,u.return,F)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)w_(D[f],A)}catch(F){it(u,u.return,F)}}o&&E&64&&kv(g),uu(g,g.return);break;case 27:jv(g);case 26:case 5:ji(f,g,o),o&&u===null&&E&4&&zv(g),uu(g,g.return);break;case 12:ji(f,g,o);break;case 13:ji(f,g,o),o&&E&4&&Kv(f,g);break;case 22:g.memoizedState===null&&ji(f,g,o),uu(g,g.return);break;case 30:break;default:ji(f,g,o)}i=i.sibling}}function Um(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$l(o))}function km(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&$l(n))}function Rr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xv(n,i,o,u),i=i.sibling}function Xv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Rr(n,i,o,u),f&2048&&lu(9,i);break;case 1:Rr(n,i,o,u);break;case 3:Rr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&$l(n)));break;case 12:if(f&2048){Rr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){it(i,i.return,D)}}else Rr(n,i,o,u);break;case 13:Rr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?Rr(n,i,o,u):cu(n,i):g._visibility&2?Rr(n,i,o,u):(g._visibility|=2,go(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Um(E,i);break;case 24:Rr(n,i,o,u),f&2048&&km(i.alternate,i);break;default:Rr(n,i,o,u)}}function go(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,A=o,D=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:go(g,E,A,D,f),lu(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?go(g,E,A,D,f):cu(g,E):(W._visibility|=2,go(g,E,A,D,f)),f&&F&2048&&Um(E.alternate,E);break;case 24:go(g,E,A,D,f),f&&F&2048&&km(E.alternate,E);break;default:go(g,E,A,D,f)}i=i.sibling}}function cu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:cu(o,u),f&2048&&Um(u.alternate,u);break;case 24:cu(o,u),f&2048&&km(u.alternate,u);break;default:cu(o,u)}i=i.sibling}}var hu=8192;function po(n){if(n.subtreeFlags&hu)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 26:po(n),n.flags&hu&&n.memoizedState!==null&&GR(lr,n.memoizedState,n.memoizedProps);break;case 5:po(n);break;case 3:case 4:var i=lr;lr=Fh(n.stateNode.containerInfo),po(n),lr=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=hu,hu=16777216,po(n),hu=i):po(n));break;default:po(n)}}function Wv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function fu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ht=u,eE(u,n)}Wv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jv(n),n=n.sibling}function Jv(n){switch(n.tag){case 0:case 11:case 15:fu(n),n.flags&2048&&zi(9,n,n.return);break;case 3:fu(n);break;case 12:fu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vh(n)):fu(n);break;default:fu(n)}}function Vh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ht=u,eE(u,n)}Wv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:zi(8,i,i.return),Vh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Vh(i));break;default:Vh(i)}n=n.sibling}}function eE(n,i){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:zi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:$l(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=n;Ht!==null;){u=Ht;var f=u.sibling,g=u.return;if(Hv(u),u===o){Ht=null;break e}if(f!==null){f.return=g,Ht=f;break e}Ht=g}}}var aR={getCacheForType:function(n){var i=sn(Bt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},oR=typeof WeakMap=="function"?WeakMap:Map,$e=0,st=null,Me=null,qe=0,Ye=0,Nn=null,Fi=!1,yo=!1,Bm=!1,ui=0,Et=0,Gi=0,ia=0,zm=0,Zn=0,_o=0,du=null,Tn=null,qm=!1,jm=0,Nh=1/0,Oh=null,Hi=null,Wt=0,Qi=null,vo=null,Eo=0,Fm=0,Gm=null,tE=null,mu=0,Hm=null;function On(){if(($e&2)!==0&&qe!==0)return qe&-qe;if(Z.T!==null){var n=ao;return n!==0?n:Wm()}return Ii()}function nE(){Zn===0&&(Zn=(qe&536870912)===0||He?bl():536870912);var n=Xn.current;return n!==null&&(n.flags|=32),Zn}function Mn(n,i,o){(n===st&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(To(n,0),Ki(n,qe,Zn,!1)),qr(n,o),(($e&2)===0||n!==st)&&(n===st&&(($e&2)===0&&(ia|=o),Et===4&&Ki(n,qe,Zn,!1)),Ir(n))}function rE(n,i,o){if(($e&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Cs(n,i),f=u?cR(n,i):$m(n,i,!0),g=u;do{if(f===0){yo&&!u&&Ki(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!lR(o)){f=$m(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=n;f=du;var D=A.current.memoizedState.isDehydrated;if(D&&(To(A,E).flags|=256),E=$m(A,E,!1),E!==2){if(Bm&&!D){A.errorRecoveryDisabledLanes|=g,ia|=g,f=4;break e}g=Tn,Tn=f,g!==null&&(Tn===null?Tn=g:Tn.push.apply(Tn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){To(n,0),Ki(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ki(u,i,Zn,!Fi);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=jm+300-At(),10<f)){if(Ki(u,i,Zn,!Fi),Ua(u,0,!0)!==0)break e;u.timeoutHandle=NE(iE.bind(null,u,o,Tn,Oh,qm,i,Zn,ia,_o,Fi,g,2,-0,0),f);break e}iE(u,o,Tn,Oh,qm,i,Zn,ia,_o,Fi,g,0,-0,0)}}break}while(!0);Ir(n)}function iE(n,i,o,u,f,g,E,A,D,F,W,ne,H,Q){if(n.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Tu={stylesheets:null,count:0,unsuspend:FR},Zv(i),ne=HR(),ne!==null)){n.cancelPendingCommit=ne(hE.bind(null,n,i,g,o,u,f,E,A,D,W,1,H,Q)),Ki(n,g,E,!F);return}hE(n,i,g,o,u,f,E,A,D)}function lR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Dn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ki(n,i,o,u){i&=~zm,i&=~ia,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-rn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&fr(n,o,i)}function Mh(){return($e&6)===0?(gu(0),!1):!0}function Qm(){if(Me!==null){if(Ye===0)var n=Me.return;else n=Me,ti=Ws=null,um(n),fo=null,su=0,n=Me;for(;n!==null;)Uv(n.alternate,n),n=n.return;Me=null}}function To(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,RR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Qm(),st=n,Me=o=Wr(n.current,null),qe=i,Ye=0,Nn=null,Fi=!1,yo=Cs(n,i),Bm=!1,_o=Zn=zm=ia=Gi=Et=0,Tn=du=null,qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-rn(u),g=1<<f;i|=n[f],u&=~g}return ui=i,nh(),o}function sE(n,i){Ne=null,Z.H=Th,i===Xl||i===hh?(i=A_(),Ye=3):i===v_?(i=A_(),Ye=4):Ye=i===bv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Me===null&&(Et=1,Rh(n,Qn(i,n.current)))}function aE(){var n=Z.H;return Z.H=Th,n===null?Th:n}function oE(){var n=Z.A;return Z.A=aR,n}function Km(){Et=4,Fi||(qe&4194048)!==qe&&Xn.current!==null||(yo=!0),(Gi&134217727)===0&&(ia&134217727)===0||st===null||Ki(st,qe,Zn,!1)}function $m(n,i,o){var u=$e;$e|=2;var f=aE(),g=oE();(st!==n||qe!==i)&&(Oh=null,To(n,i)),i=!1;var E=Et;e:do try{if(Ye!==0&&Me!==null){var A=Me,D=Nn;switch(Ye){case 8:Qm(),E=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(i=!0);var F=Ye;if(Ye=0,Nn=null,Ao(n,A,D,F),o&&yo){E=0;break e}break;default:F=Ye,Ye=0,Nn=null,Ao(n,A,D,F)}}uR(),E=Et;break}catch(W){sE(n,W)}while(!0);return i&&n.shellSuspendCounter++,ti=Ws=null,$e=u,Z.H=f,Z.A=g,Me===null&&(st=null,qe=0,nh()),E}function uR(){for(;Me!==null;)lE(Me)}function cR(n,i){var o=$e;$e|=2;var u=aE(),f=oE();st!==n||qe!==i?(Oh=null,Nh=At()+500,To(n,i)):yo=Cs(n,i);e:do try{if(Ye!==0&&Me!==null){i=Me;var g=Nn;t:switch(Ye){case 1:Ye=0,Nn=null,Ao(n,i,g,1);break;case 2:case 9:if(E_(g)){Ye=0,Nn=null,uE(i);break}i=function(){Ye!==2&&Ye!==9||st!==n||(Ye=7),Ir(n)},g.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:E_(g)?(Ye=0,Nn=null,uE(i)):(Ye=0,Nn=null,Ao(n,i,g,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var A=Me;if(!E||GE(E)){Ye=0,Nn=null;var D=A.sibling;if(D!==null)Me=D;else{var F=A.return;F!==null?(Me=F,Ph(F)):Me=null}break t}}Ye=0,Nn=null,Ao(n,i,g,5);break;case 6:Ye=0,Nn=null,Ao(n,i,g,6);break;case 8:Qm(),Et=6;break e;default:throw Error(r(462))}}hR();break}catch(W){sE(n,W)}while(!0);return ti=Ws=null,Z.H=u,Z.A=f,$e=o,Me!==null?0:(st=null,qe=0,nh(),Et)}function hR(){for(;Me!==null&&!zn();)lE(Me)}function lE(n){var i=Pv(n.alternate,n,ui);n.memoizedProps=n.pendingProps,i===null?Ph(n):Me=i}function uE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=xv(o,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=xv(o,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:um(i);default:Uv(o,i),i=Me=c_(i,ui),i=Pv(o,i,ui)}n.memoizedProps=n.pendingProps,i===null?Ph(n):Me=i}function Ao(n,i,o,u){ti=Ws=null,um(i),fo=null,su=0;var f=i.return;try{if(eR(n,f,i,o,qe)){Et=1,Rh(n,Qn(o,n.current)),Me=null;return}}catch(g){if(f!==null)throw Me=f,g;Et=1,Rh(n,Qn(o,n.current)),Me=null;return}i.flags&32768?(He||u===1?n=!0:yo||(qe&536870912)!==0?n=!1:(Fi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),cE(i,n)):Ph(i)}function Ph(n){var i=n;do{if((i.flags&32768)!==0){cE(i,Fi);return}n=i.return;var o=nR(i.alternate,i,ui);if(o!==null){Me=o;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=n}while(i!==null);Et===0&&(Et=5)}function cE(n,i){do{var o=rR(n.alternate,n);if(o!==null){o.flags&=32767,Me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Me=n;return}Me=n=o}while(n!==null);Et=6,Me=null}function hE(n,i,o,u,f,g,E,A,D){n.cancelPendingCommit=null;do Lh();while(Wt!==0);if(($e&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=kd,Sl(n,o,g,E,A,D),n===st&&(Me=st=null,qe=0),vo=i,Qi=n,Eo=o,Fm=g,Gm=f,tE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,gR(Br,function(){return pE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=he.p,he.p=2,E=$e,$e|=4;try{iR(n,i,o)}finally{$e=E,he.p=f,Z.T=u}}Wt=1,fE(),dE(),mE()}}function fE(){if(Wt===1){Wt=0;var n=Qi,i=vo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=he.p;he.p=2;var f=$e;$e|=4;try{$v(i,n);var g=ag,E=e_(n.containerInfo),A=g.focusedElem,D=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Jy(A.ownerDocument.documentElement,A)){if(D!==null&&Od(A)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(W,A.value.length);else{var ne=A.ownerDocument||document,H=ne&&ne.defaultView||window;if(H.getSelection){var Q=H.getSelection(),Ie=A.textContent.length,be=Math.min(D.start,Ie),rt=D.end===void 0?be:Math.min(D.end,Ie);!Q.extend&&be>rt&&(E=rt,rt=be,be=E);var k=Wy(A,be),M=Wy(A,rt);if(k&&M&&(Q.rangeCount!==1||Q.anchorNode!==k.node||Q.anchorOffset!==k.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var j=ne.createRange();j.setStart(k.node,k.offset),Q.removeAllRanges(),be>rt?(Q.addRange(j),Q.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),Q.addRange(j))}}}}for(ne=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ne.length;A++){var te=ne[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}$h=!!sg,ag=sg=null}finally{$e=f,he.p=u,Z.T=o}}n.current=i,Wt=2}}function dE(){if(Wt===2){Wt=0;var n=Qi,i=vo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=he.p;he.p=2;var f=$e;$e|=4;try{Gv(n,i.alternate,i)}finally{$e=f,he.p=u,Z.T=o}}Wt=3}}function mE(){if(Wt===4||Wt===3){Wt=0,Pa();var n=Qi,i=vo,o=Eo,u=tE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Wt=5:(Wt=0,vo=Qi=null,gE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Hi=null),ka(o),i=i.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(_t,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Z.T,f=he.p,he.p=2,Z.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{Z.T=i,he.p=f}}(Eo&3)!==0&&Lh(),Ir(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Hm?mu++:(mu=0,Hm=n):mu=0,gu(0)}}function gE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,$l(i)))}function Lh(n){return fE(),dE(),mE(),pE()}function pE(){if(Wt!==5)return!1;var n=Qi,i=Fm;Fm=0;var o=ka(Eo),u=Z.T,f=he.p;try{he.p=32>o?32:o,Z.T=null,o=Gm,Gm=null;var g=Qi,E=Eo;if(Wt=0,vo=Qi=null,Eo=0,($e&6)!==0)throw Error(r(331));var A=$e;if($e|=4,Jv(g.current),Xv(g,g.current,E,o),$e=A,gu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(_t,g)}catch{}return!0}finally{he.p=f,Z.T=u,gE(n,i)}}function yE(n,i,o){i=Qn(o,i),i=bm(n.stateNode,i,2),n=Li(n,i,2),n!==null&&(qr(n,2),Ir(n))}function it(n,i,o){if(n.tag===3)yE(n,n,o);else for(;i!==null;){if(i.tag===3){yE(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hi===null||!Hi.has(u))){n=Qn(o,n),o=Tv(2),u=Li(i,o,2),u!==null&&(Av(o,u,i,n),qr(u,2),Ir(u));break}}i=i.return}}function Ym(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new oR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Bm=!0,f.add(o),n=fR.bind(null,n,i,o),i.then(n,n))}function fR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,st===n&&(qe&o)===o&&(Et===4||Et===3&&(qe&62914560)===qe&&300>At()-jm?($e&2)===0&&To(n,0):zm|=o,_o===qe&&(_o=0)),Ir(n)}function _E(n,i){i===0&&(i=wl()),n=no(n,i),n!==null&&(qr(n,i),Ir(n))}function dR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),_E(n,o)}function mR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),_E(n,o)}function gR(n,i){return Bn(n,i)}var Uh=null,bo=null,Xm=!1,kh=!1,Zm=!1,sa=0;function Ir(n){n!==bo&&n.next===null&&(bo===null?Uh=bo=n:bo=bo.next=n),kh=!0,Xm||(Xm=!0,yR())}function gu(n,i){if(!Zm&&kh){Zm=!0;do for(var o=!1,u=Uh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-rn(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,AE(u,g))}else g=qe,g=Ua(u,u===st?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Cs(u,g)||(o=!0,AE(u,g));u=u.next}while(o);Zm=!1}}function pR(){vE()}function vE(){kh=Xm=!1;var n=0;sa!==0&&(SR()&&(n=sa),sa=0);for(var i=At(),o=null,u=Uh;u!==null;){var f=u.next,g=EE(u,i);g===0?(u.next=null,o===null?Uh=f:o.next=f,f===null&&(bo=o)):(o=u,(n!==0||(g&3)!==0)&&(kh=!0)),u=f}gu(n)}function EE(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-rn(g),A=1<<E,D=f[E];D===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Al(A,i)):D<=i&&(n.expiredLanes|=A),g&=~A}if(i=st,o=qe,o=Ua(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&rr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Cs(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&rr(u),ka(o)){case 2:case 8:o=Si;break;case 32:o=Br;break;case 268435456:o=La;break;default:o=Br}return u=TE.bind(null,n),o=Bn(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&rr(u),n.callbackPriority=2,n.callbackNode=null,2}function TE(n,i){if(Wt!==0&&Wt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Lh()&&n.callbackNode!==o)return null;var u=qe;return u=Ua(n,n===st?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(rE(n,u,i),EE(n,At()),n.callbackNode!=null&&n.callbackNode===o?TE.bind(null,n):null)}function AE(n,i){if(Lh())return null;rE(n,i,!0)}function yR(){IR(function(){($e&6)!==0?Bn(wi,pR):vE()})}function Wm(){return sa===0&&(sa=bl()),sa}function bE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ga(""+n)}function wE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function _R(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=bE((f[xt]||null).action),E=u.submitter;E&&(i=(i=E[xt]||null)?bE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new Ha("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(sa!==0){var D=E?wE(f,E):new FormData(f);_m(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=E?wE(f,E):new FormData(f),_m(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Jm=0;Jm<Ud.length;Jm++){var eg=Ud[Jm],vR=eg.toLowerCase(),ER=eg[0].toUpperCase()+eg.slice(1);or(vR,"on"+ER)}or(r_,"onAnimationEnd"),or(i_,"onAnimationIteration"),or(s_,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(US,"onTransitionRun"),or(kS,"onTransitionStart"),or(BS,"onTransitionCancel"),or(a_,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function SE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],D=A.instance,F=A.currentTarget;if(A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=F;try{g(f)}catch(W){Sh(W)}f.currentTarget=null,g=D}else for(E=0;E<u.length;E++){if(A=u[E],D=A.instance,F=A.currentTarget,A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=F;try{g(f)}catch(W){Sh(W)}f.currentTarget=null,g=D}}}}function Pe(n,i){var o=i[Il];o===void 0&&(o=i[Il]=new Set);var u=n+"__bubble";o.has(u)||(RE(i,n,2,!1),o.add(u))}function tg(n,i,o){var u=0;i&&(u|=4),RE(o,n,u,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function ng(n){if(!n[Bh]){n[Bh]=!0,Dl.forEach(function(o){o!=="selectionchange"&&(TR.has(o)||tg(o,!1,n),tg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,tg("selectionchange",!1,i))}}function RE(n,i,o,u){switch(XE(i)){case 2:var f=$R;break;case 8:f=YR;break;default:f=pg}o=f.bind(null,i,o,n),f=void 0,!Gn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function rg(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=jr(A),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=g=E;continue e}A=A.parentNode}}u=u.return}qc(function(){var F=g,W=Fn(o),ne=[];e:{var H=o_.get(n);if(H!==void 0){var Q=Ha,Ie=n;switch(n){case"keypress":if(_r(o)===0)break e;case"keydown":case"keyup":Q=Za;break;case"focusin":Ie="focus",Q=$a;break;case"focusout":Ie="blur",Q=$a;break;case"beforeblur":case"afterblur":Q=$a;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Yc;break;case r_:case i_:case s_:Q=Ya;break;case a_:Q=Zc;break;case"scroll":case"scrollend":Q=jc;break;case"wheel":Q=Wa;break;case"copy":case"cut":case"paste":Q=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=zl;break;case"toggle":case"beforetoggle":Q=Jc}var be=(i&4)!==0,rt=!be&&(n==="scroll"||n==="scrollend"),k=be?H!==null?H+"Capture":null:H;be=[];for(var M=F,j;M!==null;){var te=M;if(j=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||j===null||k===null||(te=ks(M,k),te!=null&&be.push(yu(M,te,j))),rt)break;M=M.return}0<be.length&&(H=new Q(H,Ie,null,o,W),ne.push({event:H,listeners:be}))}}if((i&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",H&&o!==Qr&&(Ie=o.relatedTarget||o.fromElement)&&(jr(Ie)||Ie[qn]))break e;if((Q||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,Q?(Ie=o.relatedTarget||o.toElement,Q=F,Ie=Ie?jr(Ie):null,Ie!==null&&(rt=l(Ie),be=Ie.tag,Ie!==rt||be!==5&&be!==27&&be!==6)&&(Ie=null)):(Q=null,Ie=F),Q!==Ie)){if(be=Hn,te="onMouseLeave",k="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(be=zl,te="onPointerLeave",k="onPointerEnter",M="pointer"),rt=Q==null?H:mr(Q),j=Ie==null?H:mr(Ie),H=new be(te,M+"leave",Q,o,W),H.target=rt,H.relatedTarget=j,te=null,jr(W)===F&&(be=new be(k,M+"enter",Ie,o,W),be.target=j,be.relatedTarget=rt,te=be),rt=te,Q&&Ie)t:{for(be=Q,k=Ie,M=0,j=be;j;j=wo(j))M++;for(j=0,te=k;te;te=wo(te))j++;for(;0<M-j;)be=wo(be),M--;for(;0<j-M;)k=wo(k),j--;for(;M--;){if(be===k||k!==null&&be===k.alternate)break t;be=wo(be),k=wo(k)}be=null}else be=null;Q!==null&&IE(ne,H,Q,be,!1),Ie!==null&&rt!==null&&IE(ne,rt,Ie,be,!0)}}e:{if(H=F?mr(F):window,Q=H.nodeName&&H.nodeName.toLowerCase(),Q==="select"||Q==="input"&&H.type==="file")var pe=Qy;else if(kt(H))if(Ky)pe=MS;else{pe=NS;var Oe=VS}else Q=H.nodeName,!Q||Q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&Ol(F.elementType)&&(pe=Qy):pe=OS;if(pe&&(pe=pe(n,F))){Zr(ne,pe,o,W);break e}Oe&&Oe(n,H,F),n==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&Vi(H,"number",H.value)}switch(Oe=F?mr(F):window,n){case"focusin":(kt(Oe)||Oe.contentEditable==="true")&&(Ja=Oe,Md=F,Fl=null);break;case"focusout":Fl=Md=Ja=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,t_(ne,o,W);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":t_(ne,o,W)}var Te;if(Tr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Be?Y(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(v&&o.locale!=="ko"&&(Be||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Be&&(Te=Pl()):(yr=W,Ni="value"in yr?yr.value:yr.textContent,Be=!0)),Oe=zh(F,Se),0<Oe.length&&(Se=new kl(Se,n,null,o,W),ne.push({event:Se,listeners:Oe}),Te?Se.data=Te:(Te=ue(o),Te!==null&&(Se.data=Te)))),(Te=y?Ut(n,o):ze(n,o))&&(Se=zh(F,"onBeforeInput"),0<Se.length&&(Oe=new kl("onBeforeInput","beforeinput",null,o,W),ne.push({event:Oe,listeners:Se}),Oe.data=Te)),_R(ne,n,F,o,W)}SE(ne,i)})}function yu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function zh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ks(n,o),f!=null&&u.unshift(yu(n,f,g)),f=ks(n,i),f!=null&&u.push(yu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function wo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function IE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var A=o,D=A.alternate,F=A.stateNode;if(A=A.tag,D!==null&&D===u)break;A!==5&&A!==26&&A!==27||F===null||(D=F,f?(F=ks(o,g),F!=null&&E.unshift(yu(o,F,D))):f||(F=ks(o,g),F!=null&&E.push(yu(o,F,D)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var AR=/\r\n?/g,bR=/\u0000|\uFFFD/g;function DE(n){return(typeof n=="string"?n:""+n).replace(AR,`
`).replace(bR,"")}function xE(n,i){return i=DE(i),DE(n)===i}function qh(){}function nt(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||jn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&jn(n,""+u);break;case"className":gr(n,"class",u);break;case"tabIndex":gr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":gr(n,o,u);break;case"style":Nl(n,u,g);break;case"data":if(i!=="object"){gr(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ga(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&nt(n,i,"name",f.name,f,null),nt(n,i,"formEncType",f.formEncType,f,null),nt(n,i,"formMethod",f.formMethod,f,null),nt(n,i,"formTarget",f.formTarget,f,null)):(nt(n,i,"encType",f.encType,f,null),nt(n,i,"method",f.method,f,null),nt(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ga(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=qh);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ga(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Ci(n,"popover",u);break;case"xlinkActuate":Yt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ci(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Id.get(o)||o,Ci(n,o,u))}}function ig(n,i,o,u,f,g){switch(o){case"style":Nl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?jn(n,u):(typeof u=="number"||typeof u=="bigint")&&jn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=qh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ba.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[xt]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ci(n,o,u)}}}function Jt(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:nt(n,i,g,E,o,null)}}f&&nt(n,i,"srcSet",o.srcSet,o,null),u&&nt(n,i,"src",o.src,o,null);return;case"input":Pe("invalid",n);var A=g=E=f=null,D=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":g=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:nt(n,i,u,W,o,null)}}Ps(n,g,A,D,F,E,f,!1),Fa(n);return;case"select":Pe("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:nt(n,i,f,A,o,null)}i=g,o=E,n.multiple=!!u,i!=null?Hr(n,!!u,i,!1):o!=null&&Hr(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:nt(n,i,E,A,o,null)}Ls(n,u,f,g),Fa(n);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(n,i,D,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<pu.length;u++)Pe(pu[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:nt(n,i,F,u,o,null)}return;default:if(Ol(i)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&ig(n,i,W,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&nt(n,i,A,u,o,null))}function wR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,D=null,F=null,W=null;for(Q in o){var ne=o[Q];if(o.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=ne;default:u.hasOwnProperty(Q)||nt(n,i,Q,null,u,ne)}}for(var H in u){var Q=u[H];if(ne=o[H],u.hasOwnProperty(H)&&(Q!=null||ne!=null))switch(H){case"type":g=Q;break;case"name":f=Q;break;case"checked":F=Q;break;case"defaultChecked":W=Q;break;case"value":E=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Q!==ne&&nt(n,i,H,Q,u,ne)}}In(n,E,A,D,F,W,g,f);return;case"select":Q=E=A=H=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Q=D;default:u.hasOwnProperty(g)||nt(n,i,g,null,u,D)}for(f in u)if(g=u[f],D=o[f],u.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":H=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==D&&nt(n,i,f,g,u,D)}i=A,o=E,u=Q,H!=null?Hr(n,!!o,H,!1):!!u!=!!o&&(i!=null?Hr(n,!!o,i,!0):Hr(n,!!o,o?[]:"",!1));return;case"textarea":Q=H=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:nt(n,i,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":H=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&nt(n,i,E,f,u,g)}et(n,H,Q);return;case"option":for(var Ie in o)if(H=o[Ie],o.hasOwnProperty(Ie)&&H!=null&&!u.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:nt(n,i,Ie,null,u,H)}for(D in u)if(H=u[D],Q=o[D],u.hasOwnProperty(D)&&H!==Q&&(H!=null||Q!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:nt(n,i,D,H,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in o)H=o[be],o.hasOwnProperty(be)&&H!=null&&!u.hasOwnProperty(be)&&nt(n,i,be,null,u,H);for(F in u)if(H=u[F],Q=o[F],u.hasOwnProperty(F)&&H!==Q&&(H!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:nt(n,i,F,H,u,Q)}return;default:if(Ol(i)){for(var rt in o)H=o[rt],o.hasOwnProperty(rt)&&H!==void 0&&!u.hasOwnProperty(rt)&&ig(n,i,rt,void 0,u,H);for(W in u)H=u[W],Q=o[W],!u.hasOwnProperty(W)||H===Q||H===void 0&&Q===void 0||ig(n,i,W,H,u,Q);return}}for(var k in o)H=o[k],o.hasOwnProperty(k)&&H!=null&&!u.hasOwnProperty(k)&&nt(n,i,k,null,u,H);for(ne in u)H=u[ne],Q=o[ne],!u.hasOwnProperty(ne)||H===Q||H==null&&Q==null||nt(n,i,ne,H,u,Q)}var sg=null,ag=null;function jh(n){return n.nodeType===9?n:n.ownerDocument}function CE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function og(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lg=null;function SR(){var n=window.event;return n&&n.type==="popstate"?n===lg?!1:(lg=n,!0):(lg=null,!1)}var NE=typeof setTimeout=="function"?setTimeout:void 0,RR=typeof clearTimeout=="function"?clearTimeout:void 0,OE=typeof Promise=="function"?Promise:void 0,IR=typeof queueMicrotask=="function"?queueMicrotask:typeof OE<"u"?function(n){return OE.resolve(null).then(n).catch(DR)}:NE;function DR(n){setTimeout(function(){throw n})}function $i(n){return n==="head"}function ME(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&_u(E.documentElement),o&2&&_u(E.body),o&4)for(o=E.head,_u(o),E=o.firstChild;E;){var A=E.nextSibling,D=E.nodeName;E[Vs]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),Ru(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Ru(i)}function ug(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ug(o),xi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function xR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Vs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=ur(n.nextSibling),n===null)break}return null}function CR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ur(n.nextSibling),n===null))return null;return n}function cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function VR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ur(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var hg=null;function PE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function LE(n,i,o){switch(i=jh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function _u(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);xi(n)}var Wn=new Map,UE=new Set;function Fh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ci=he.d;he.d={f:NR,r:OR,D:MR,C:PR,L:LR,m:UR,X:BR,S:kR,M:zR};function NR(){var n=ci.f(),i=Mh();return n||i}function OR(n){var i=dr(n);i!==null&&i.tag===5&&i.type==="form"?rv(i):ci.r(n)}var So=typeof document>"u"?null:document;function kE(n,i,o){var u=So;if(u&&typeof i=="string"&&i){var f=Ct(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),UE.has(f)||(UE.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Jt(i,"link",n),bt(i),u.head.appendChild(i)))}}function MR(n){ci.D(n),kE("dns-prefetch",n,null)}function PR(n,i){ci.C(n,i),kE("preconnect",n,i)}function LR(n,i,o){ci.L(n,i,o);var u=So;if(u&&n&&i){var f='link[rel="preload"][as="'+Ct(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ct(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ct(o.imageSizes)+'"]')):f+='[href="'+Ct(n)+'"]';var g=f;switch(i){case"style":g=Ro(n);break;case"script":g=Io(n)}Wn.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Wn.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(vu(g))||i==="script"&&u.querySelector(Eu(g))||(i=u.createElement("link"),Jt(i,"link",n),bt(i),u.head.appendChild(i)))}}function UR(n,i){ci.m(n,i);var o=So;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ct(u)+'"][href="'+Ct(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Io(n)}if(!Wn.has(g)&&(n=_({rel:"modulepreload",href:n},i),Wn.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Eu(g)))return}u=o.createElement("link"),Jt(u,"link",n),bt(u),o.head.appendChild(u)}}}function kR(n,i,o){ci.S(n,i,o);var u=So;if(u&&n){var f=hn(u).hoistableStyles,g=Ro(n);i=i||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(vu(g)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Wn.get(g))&&fg(n,o);var D=E=u.createElement("link");bt(D),Jt(D,"link",n),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Gh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function BR(n,i){ci.X(n,i);var o=So;if(o&&n){var u=hn(o).hoistableScripts,f=Io(n),g=u.get(f);g||(g=o.querySelector(Eu(f)),g||(n=_({src:n,async:!0},i),(i=Wn.get(f))&&dg(n,i),g=o.createElement("script"),bt(g),Jt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function zR(n,i){ci.M(n,i);var o=So;if(o&&n){var u=hn(o).hoistableScripts,f=Io(n),g=u.get(f);g||(g=o.querySelector(Eu(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=Wn.get(f))&&dg(n,i),g=o.createElement("script"),bt(g),Jt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function BE(n,i,o,u){var f=(f=we.current)?Fh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ro(o.href),o=hn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ro(o.href);var g=hn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(vu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),Wn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wn.set(n,o),g||qR(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Io(o),o=hn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ro(n){return'href="'+Ct(n)+'"'}function vu(n){return'link[rel="stylesheet"]['+n+"]"}function zE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function qR(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Jt(i,"link",o),bt(i),n.head.appendChild(i))}function Io(n){return'[src="'+Ct(n)+'"]'}function Eu(n){return"script[async]"+n}function qE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Ct(o.href)+'"]');if(u)return i.instance=u,bt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),bt(u),Jt(u,"style",f),Gh(u,o.precedence,n),i.instance=u;case"stylesheet":f=Ro(o.href);var g=n.querySelector(vu(f));if(g)return i.state.loading|=4,i.instance=g,bt(g),g;u=zE(o),(f=Wn.get(f))&&fg(u,f),g=(n.ownerDocument||n).createElement("link"),bt(g);var E=g;return E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Jt(g,"link",u),i.state.loading|=4,Gh(g,o.precedence,n),i.instance=g;case"script":return g=Io(o.src),(f=n.querySelector(Eu(g)))?(i.instance=f,bt(f),f):(u=o,(f=Wn.get(g))&&(u=_({},o),dg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),bt(f),Jt(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Gh(u,o.precedence,n));return i.instance}function Gh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function fg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Hh=null;function jE(n,i,o){if(Hh===null){var u=new Map,f=Hh=new Map;f.set(o,u)}else f=Hh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Vs]||g[Lt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function FE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function jR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function GE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Tu=null;function FR(){}function GR(n,i,o){if(Tu===null)throw Error(r(475));var u=Tu;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ro(o.href),g=n.querySelector(vu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Qh.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,bt(g);return}g=n.ownerDocument||n,o=zE(o),(f=Wn.get(f))&&fg(o,f),g=g.createElement("link"),bt(g);var E=g;E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Jt(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Qh.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function HR(){if(Tu===null)throw Error(r(475));var n=Tu;return n.stylesheets&&n.count===0&&mg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&mg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Qh(){if(this.count--,this.count===0){if(this.stylesheets)mg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kh=null;function mg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kh=new Map,i.forEach(QR,n),Kh=null,Qh.call(n))}function QR(n,i){if(!(i.state.loading&4)){var o=Kh.get(n);if(o)var u=o.get(null);else{o=new Map,Kh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Qh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Au={$$typeof:X,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function KR(n,i,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.hiddenUpdates=zr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function HE(n,i,o,u,f,g,E,A,D,F,W,ne){return n=new KR(n,i,o,E,A,D,F,ne),i=1,g===!0&&(i|=24),g=xn(3,null,null,i),n.current=g,g.stateNode=n,i=Yd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},Jd(g),n}function QE(n){return n?(n=ro,n):ro}function KE(n,i,o,u,f,g){f=QE(f),u.context===null?u.context=f:u.pendingContext=f,u=Pi(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Li(n,u,i),o!==null&&(Mn(o,n,i),Wl(o,n,i))}function $E(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function gg(n,i){$E(n,i),(n=n.alternate)&&$E(n,i)}function YE(n){if(n.tag===13){var i=no(n,67108864);i!==null&&Mn(i,n,67108864),gg(n,67108864)}}var $h=!0;function $R(n,i,o,u){var f=Z.T;Z.T=null;var g=he.p;try{he.p=2,pg(n,i,o,u)}finally{he.p=g,Z.T=f}}function YR(n,i,o,u){var f=Z.T;Z.T=null;var g=he.p;try{he.p=8,pg(n,i,o,u)}finally{he.p=g,Z.T=f}}function pg(n,i,o,u){if($h){var f=yg(u);if(f===null)rg(n,i,u,Yh,o),ZE(n,u);else if(ZR(f,n,i,o,u))u.stopPropagation();else if(ZE(n,u),i&4&&-1<XR.indexOf(n)){for(;f!==null;){var g=dr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=ir(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var D=1<<31-rn(E);A.entanglements[1]|=D,E&=~D}Ir(g),($e&6)===0&&(Nh=At()+500,gu(0))}}break;case 13:A=no(g,2),A!==null&&Mn(A,g,2),Mh(),gg(g,2)}if(g=yg(u),g===null&&rg(n,i,u,Yh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else rg(n,i,u,null,o)}}function yg(n){return n=Fn(n),_g(n)}var Yh=null;function _g(n){if(Yh=null,n=jr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Yh=n,null}function XE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case wi:return 2;case Si:return 8;case Br:case El:return 32;case La:return 268435456;default:return 32}default:return 32}}var vg=!1,Yi=null,Xi=null,Zi=null,bu=new Map,wu=new Map,Wi=[],XR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZE(n,i){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":bu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(i.pointerId)}}function Su(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=dr(i),i!==null&&YE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function ZR(n,i,o,u,f){switch(i){case"focusin":return Yi=Su(Yi,n,i,o,u,f),!0;case"dragenter":return Xi=Su(Xi,n,i,o,u,f),!0;case"mouseover":return Zi=Su(Zi,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return bu.set(g,Su(bu.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,wu.set(g,Su(wu.get(g)||null,n,i,o,u,f)),!0}return!1}function WE(n){var i=jr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Mc(n.priority,function(){if(o.tag===13){var u=On();u=Ri(u);var f=no(o,u);f!==null&&Mn(f,o,u),gg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=yg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Qr=u,o.target.dispatchEvent(u),Qr=null}else return i=dr(o),i!==null&&YE(i),n.blockedOn=o,!1;i.shift()}return!0}function JE(n,i,o){Xh(n)&&o.delete(i)}function WR(){vg=!1,Yi!==null&&Xh(Yi)&&(Yi=null),Xi!==null&&Xh(Xi)&&(Xi=null),Zi!==null&&Xh(Zi)&&(Zi=null),bu.forEach(JE),wu.forEach(JE)}function Zh(n,i){n.blockedOn===i&&(n.blockedOn=null,vg||(vg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,WR)))}var Wh=null;function eT(n){Wh!==n&&(Wh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Wh===n&&(Wh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(_g(u||o)===null)continue;break}var g=dr(o);g!==null&&(n.splice(i,3),i-=3,_m(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Ru(n){function i(D){return Zh(D,n)}Yi!==null&&Zh(Yi,n),Xi!==null&&Zh(Xi,n),Zi!==null&&Zh(Zi,n),bu.forEach(i),wu.forEach(i);for(var o=0;o<Wi.length;o++){var u=Wi[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Wi.length&&(o=Wi[0],o.blockedOn===null);)WE(o),o.blockedOn===null&&Wi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[xt]||null;if(typeof g=="function")E||eT(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[xt]||null)A=E.formAction;else if(_g(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),eT(o)}}}function Eg(n){this._internalRoot=n}Jh.prototype.render=Eg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=On();KE(o,u,n,i,null,null)},Jh.prototype.unmount=Eg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;KE(n.current,2,null,n,null,null),Mh(),i[qn]=null}};function Jh(n){this._internalRoot=n}Jh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ii();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Wi.length&&i!==0&&i<Wi[o].priority;o++);Wi.splice(o,0,n),o===0&&WE(n)}};var tT=e.version;if(tT!=="19.1.0")throw Error(r(527,tT,"19.1.0"));he.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var JR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{_t=ef.inject(JR),Ke=ef}catch{}}return Du.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=yv,g=_v,E=vv,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=HE(n,1,!1,null,null,o,u,f,g,E,A,null),n[qn]=i.current,ng(n),new Eg(i)},Du.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=yv,E=_v,A=vv,D=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),i=HE(n,1,!0,i,o??null,u,f,g,E,A,D,F),i.context=QE(null),o=i.current,u=On(),u=Ri(u),f=Pi(u),f.callback=null,Li(o,f,u),o=u,i.current.lanes=o,qr(i,o),Ir(i),n[qn]=i.current,ng(n),new Jh(i)},Du.version="19.1.0",Du}var hT;function cI(){if(hT)return bg.exports;hT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bg.exports=uI(),bg.exports}var hI=cI();const fI=aA(hI);var xu={},fT;function dI(){if(fT)return xu;fT=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.parse=c,xu.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,R){const O=new l,B=b.length;if(B<2)return O;const L=(R==null?void 0:R.decode)||_;let G=0;do{const J=b.indexOf("=",G);if(J===-1)break;const X=b.indexOf(";",G),fe=X===-1?B:X;if(J>fe){G=b.lastIndexOf(";",J-1)+1;continue}const oe=d(b,G,J),me=m(b,J,oe),N=b.slice(oe,me);if(O[N]===void 0){let S=d(b,J+1,fe),I=m(b,fe,S);const V=L(b.slice(S,I));O[N]=V}G=fe+1}while(G<B);return O}function d(b,R,O){do{const B=b.charCodeAt(R);if(B!==32&&B!==9)return R}while(++R<O);return O}function m(b,R,O){for(;R>O;){const B=b.charCodeAt(--R);if(B!==32&&B!==9)return R+1}return O}function p(b,R,O){const B=(O==null?void 0:O.encode)||encodeURIComponent;if(!s.test(b))throw new TypeError(`argument name is invalid: ${b}`);const L=B(R);if(!e.test(L))throw new TypeError(`argument val is invalid: ${R}`);let G=b+"="+L;if(!O)return G;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);G+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);G+="; Domain="+O.domain}if(O.path){if(!r.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);G+="; Path="+O.path}if(O.expires){if(!T(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);G+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(G+="; HttpOnly"),O.secure&&(G+="; Secure"),O.partitioned&&(G+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return G}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function T(b){return a.call(b)==="[object Date]"}return xu}dI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dT="popstate";function mI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Fg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Yu(a)}return pI(e,t,null,s)}function gt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Mr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gI(){return Math.random().toString(36).substring(2,10)}function mT(s,e){return{usr:s.state,key:s.key,idx:e}}function Fg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?cl(e):e,state:t,key:e&&e.key||r||gI()}}function Yu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function cl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function pI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let L=_(),G=L==null?null:L-p;p=L,m&&m({action:d,location:B.location,delta:G})}function b(L,G){d="PUSH";let J=Fg(B.location,L,G);p=_()+1;let X=mT(J,p),fe=B.createHref(J);try{c.pushState(X,"",fe)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;a.location.assign(fe)}l&&m&&m({action:d,location:B.location,delta:1})}function R(L,G){d="REPLACE";let J=Fg(B.location,L,G);p=_();let X=mT(J,p),fe=B.createHref(J);c.replaceState(X,"",fe),l&&m&&m({action:d,location:B.location,delta:0})}function O(L){let G=a.location.origin!=="null"?a.location.origin:a.location.href,J=typeof L=="string"?L:Yu(L);return J=J.replace(/ $/,"%20"),gt(G,`No window.location.(origin|href) available to create URL for href: ${J}`),new URL(J,G)}let B={get action(){return d},get location(){return s(a,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(dT,T),m=L,()=>{a.removeEventListener(dT,T),m=null}},createHref(L){return e(a,L)},createURL:O,encodeLocation(L){let G=O(L);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:b,replace:R,go(L){return c.go(L)}};return B}function oA(s,e,t="/"){return yI(s,e,t,!1)}function yI(s,e,t,r){let a=typeof e=="string"?cl(e):e,l=mi(a.pathname||"/",t);if(l==null)return null;let c=lA(s);_I(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=xI(l);d=II(c[m],p,r)}return d}function lA(s,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(gt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=fi([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(gt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),lA(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:SI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of uA(l.path))a(l,c,m)}),e}function uA(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=uA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function _I(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:RI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vI=/^:[\w-]+$/,EI=3,TI=2,AI=1,bI=10,wI=-2,gT=s=>s==="*";function SI(s,e){let t=s.split("/"),r=t.length;return t.some(gT)&&(r+=wI),e&&(r+=TI),t.filter(a=>!gT(a)).reduce((a,l)=>a+(vI.test(l)?EI:l===""?AI:bI),r)}function RI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function II(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Af({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),b=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=Af({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:fi([l,T.pathname]),pathnameBase:OI(fi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=fi([l,T.pathnameBase]))}return c}function Af(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=DI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},b)=>{if(_==="*"){let O=d[b]||"";c=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const R=d[b];return T&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function DI(s,e=!1,t=!0){Mr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function xI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function mi(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function CI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?cl(s):s;return{pathname:t?t.startsWith("/")?t:VI(t,e):e,search:MI(r),hash:PI(a)}}function VI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ig(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cA(s){let e=NI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hA(s,e,t,r=!1){let a;typeof s=="string"?a=cl(s):(a={...s},gt(!a.pathname||!a.pathname.includes("?"),Ig("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),Ig("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),Ig("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=CI(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var fi=s=>s.join("/").replace(/\/\/+/g,"/"),OI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),MI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,PI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function LI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var fA=["POST","PUT","PATCH","DELETE"];new Set(fA);var UI=["GET",...fA];new Set(UI);var hl=K.createContext(null);hl.displayName="DataRouter";var Qf=K.createContext(null);Qf.displayName="DataRouterState";var dA=K.createContext({isTransitioning:!1});dA.displayName="ViewTransition";var kI=K.createContext(new Map);kI.displayName="Fetchers";var BI=K.createContext(null);BI.displayName="Await";var kr=K.createContext(null);kr.displayName="Navigation";var gc=K.createContext(null);gc.displayName="Location";var vi=K.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var Sp=K.createContext(null);Sp.displayName="RouteError";function zI(s,{relative:e}={}){gt(pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(kr),{hash:a,pathname:l,search:c}=yc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:fi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function pc(){return K.useContext(gc)!=null}function xa(){return gt(pc(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(gc).location}var mA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gA(s){K.useContext(kr).static||K.useLayoutEffect(s)}function qI(){let{isDataRoute:s}=K.useContext(vi);return s?e1():jI()}function jI(){gt(pc(),"useNavigate() may be used only in the context of a <Router> component.");let s=K.useContext(hl),{basename:e,navigator:t}=K.useContext(kr),{matches:r}=K.useContext(vi),{pathname:a}=xa(),l=JSON.stringify(cA(r)),c=K.useRef(!1);return gA(()=>{c.current=!0}),K.useCallback((m,p={})=>{if(Mr(c.current,mA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=hA(m,JSON.parse(l),a,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:fi([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,s])}K.createContext(null);function yc(s,{relative:e}={}){let{matches:t}=K.useContext(vi),{pathname:r}=xa(),a=JSON.stringify(cA(t));return K.useMemo(()=>hA(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function FI(s,e){return pA(s,e)}function pA(s,e,t,r){var J;gt(pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=K.useContext(kr),{matches:c}=K.useContext(vi),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let X=T&&T.path||"";yA(p,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let b=xa(),R;if(e){let X=typeof e=="string"?cl(e):e;gt(_==="/"||((J=X.pathname)==null?void 0:J.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),R=X}else R=b;let O=R.pathname||"/",B=O;if(_!=="/"){let X=_.replace(/^\//,"").split("/");B="/"+O.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=!l&&t&&t.matches&&t.matches.length>0?t.matches:oA(s,{pathname:B});Mr(T||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Mr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=$I(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},m,X.params),pathname:fi([_,a.encodeLocation?a.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:fi([_,a.encodeLocation?a.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),c,t,r);return e&&G?K.createElement(gc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},G):G}function GI(){let s=JI(),e=LI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,c)}var HI=K.createElement(GI,null),QI=class extends K.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?K.createElement(vi.Provider,{value:this.props.routeContext},K.createElement(Sp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KI({routeContext:s,match:e,children:t}){let r=K.useContext(hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(vi.Provider,{value:s},t)}function $I(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,b=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,b=!1,R=null,O=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||HI,c&&(d<0&&_===0?(yA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,O=null):d===_&&(b=!0,O=p.route.hydrateFallbackElement||null)));let B=e.concat(a.slice(0,_+1)),L=()=>{let G;return T?G=R:b?G=O:p.route.Component?G=K.createElement(p.route.Component,null):p.route.element?G=p.route.element:G=m,K.createElement(KI,{match:p,routeContext:{outlet:m,matches:B,isDataRoute:t!=null},children:G})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?K.createElement(QI,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:L(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):L()},null)}function Rp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YI(s){let e=K.useContext(hl);return gt(e,Rp(s)),e}function XI(s){let e=K.useContext(Qf);return gt(e,Rp(s)),e}function ZI(s){let e=K.useContext(vi);return gt(e,Rp(s)),e}function Ip(s){let e=ZI(s),t=e.matches[e.matches.length-1];return gt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function WI(){return Ip("useRouteId")}function JI(){var r;let s=K.useContext(Sp),e=XI("useRouteError"),t=Ip("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function e1(){let{router:s}=YI("useNavigate"),e=Ip("useNavigate"),t=K.useRef(!1);return gA(()=>{t.current=!0}),K.useCallback(async(a,l={})=>{Mr(t.current,mA),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var pT={};function yA(s,e,t){!e&&!pT[s]&&(pT[s]=!0,Mr(!1,t))}K.memo(t1);function t1({routes:s,future:e,state:t}){return pA(s,void 0,t,e)}function Uu(s){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n1({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){gt(!pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=cl(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:b="default"}=t,R=K.useMemo(()=>{let O=mi(m,c);return O==null?null:{location:{pathname:O,search:p,hash:_,state:T,key:b},navigationType:r}},[c,m,p,_,T,b,r]);return Mr(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:K.createElement(kr.Provider,{value:d},K.createElement(gc.Provider,{children:e,value:R}))}function r1({children:s,location:e}){return FI(Gg(s),e)}function Gg(s,e=[]){let t=[];return K.Children.forEach(s,(r,a)=>{if(!K.isValidElement(r))return;let l=[...e,a];if(r.type===K.Fragment){t.push.apply(t,Gg(r.props.children,l));return}gt(r.type===Uu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Gg(r.props.children,l)),t.push(c)}),t}var cf="get",hf="application/x-www-form-urlencoded";function Kf(s){return s!=null&&typeof s.tagName=="string"}function i1(s){return Kf(s)&&s.tagName.toLowerCase()==="button"}function s1(s){return Kf(s)&&s.tagName.toLowerCase()==="form"}function a1(s){return Kf(s)&&s.tagName.toLowerCase()==="input"}function o1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function l1(s,e){return s.button===0&&(!e||e==="_self")&&!o1(s)}var tf=null;function u1(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var c1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dg(s){return s!=null&&!c1.has(s)?(Mr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hf}"`),null):s}function h1(s,e){let t,r,a,l,c;if(s1(s)){let d=s.getAttribute("action");r=d?mi(d,e):null,t=s.getAttribute("method")||cf,a=Dg(s.getAttribute("enctype"))||hf,l=new FormData(s)}else if(i1(s)||a1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?mi(m,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||cf,a=Dg(s.getAttribute("formenctype"))||Dg(d.getAttribute("enctype"))||hf,l=new FormData(d,s),!u1()){let{name:p,type:_,value:T}=s;if(_==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(Kf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cf,r=null,a=hf,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Dp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function f1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function d1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function m1(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await f1(l,t);return c.links?c.links():[]}return[]}));return _1(r.flat(1).filter(d1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function yT(s,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function g1(s,e,{includeHydrateFallback:t}={}){return p1(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function p1(s){return[...new Set(s)]}function y1(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function _1(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(y1(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}var v1=new Set([100,101,204,205]);function E1(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&mi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function _A(){let s=K.useContext(hl);return Dp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function T1(){let s=K.useContext(Qf);return Dp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var xp=K.createContext(void 0);xp.displayName="FrameworkContext";function vA(){let s=K.useContext(xp);return Dp(s,"You must render this element inside a <HydratedRouter> element"),s}function A1(s,e){let t=K.useContext(xp),[r,a]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,b=K.useRef(null);K.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let B=G=>{G.forEach(J=>{c(J.isIntersecting)})},L=new IntersectionObserver(B,{threshold:.5});return b.current&&L.observe(b.current),()=>{L.disconnect()}}},[s]),K.useEffect(()=>{if(r){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[r]);let R=()=>{a(!0)},O=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Cu(d,R),onBlur:Cu(m,O),onMouseEnter:Cu(p,R),onMouseLeave:Cu(_,O),onTouchStart:Cu(T,R)}]:[!1,b,{}]}function Cu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function b1({page:s,...e}){let{router:t}=_A(),r=K.useMemo(()=>oA(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?K.createElement(S1,{page:s,matches:r,...e}):null}function w1(s){let{manifest:e,routeModules:t}=vA(),[r,a]=K.useState([]);return K.useEffect(()=>{let l=!1;return m1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function S1({page:s,matches:e,...t}){let r=xa(),{manifest:a,routeModules:l}=vA(),{basename:c}=_A(),{loaderData:d,matches:m}=T1(),p=K.useMemo(()=>yT(s,e,m,a,r,"data"),[s,e,m,a,r]),_=K.useMemo(()=>yT(s,e,m,a,r,"assets"),[s,e,m,a,r]),T=K.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let O=new Set,B=!1;if(e.forEach(G=>{var X;let J=a.routes[G.route.id];!J||!J.hasLoader||(!p.some(fe=>fe.route.id===G.route.id)&&G.route.id in d&&((X=l[G.route.id])!=null&&X.shouldRevalidate)||J.hasClientLoader?B=!0:O.add(G.route.id))}),O.size===0)return[];let L=E1(s,c);return B&&O.size>0&&L.searchParams.set("_routes",e.filter(G=>O.has(G.route.id)).map(G=>G.route.id).join(",")),[L.pathname+L.search]},[c,d,r,a,p,e,s,l]),b=K.useMemo(()=>g1(_,a),[_,a]),R=w1(_);return K.createElement(K.Fragment,null,T.map(O=>K.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),b.map(O=>K.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),R.map(({key:O,link:B})=>K.createElement("link",{key:O,...B})))}function R1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EA&&(window.__reactRouterVersion="7.5.1")}catch{}function I1({basename:s,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=mI({window:t,v5Compat:!0}));let a=r.current,[l,c]=K.useState({action:a.action,location:a.location}),d=K.useCallback(m=>{K.startTransition(()=>c(m))},[c]);return K.useLayoutEffect(()=>a.listen(d),[a,d]),K.createElement(n1,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...b},R){let{basename:O}=K.useContext(kr),B=typeof p=="string"&&TA.test(p),L,G=!1;if(typeof p=="string"&&B&&(L=p,EA))try{let I=new URL(window.location.href),V=p.startsWith("//")?new URL(I.protocol+p):new URL(p),P=mi(V.pathname,O);V.origin===I.origin&&P!=null?p=P+V.search+V.hash:G=!0}catch{Mr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=zI(p,{relative:a}),[X,fe,oe]=A1(r,b),me=V1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function N(I){e&&e(I),I.defaultPrevented||me(I)}let S=K.createElement("a",{...b,...oe,href:L||J,onClick:G||l?e:N,ref:R1(R,fe),target:m,"data-discover":!B&&t==="render"?"true":void 0});return X&&!B?K.createElement(K.Fragment,null,S,K.createElement(b1,{page:J})):S});hr.displayName="Link";var D1=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=yc(c,{relative:p.relative}),b=xa(),R=K.useContext(Qf),{navigator:O,basename:B}=K.useContext(kr),L=R!=null&&L1(T)&&d===!0,G=O.encodeLocation?O.encodeLocation(T).pathname:T.pathname,J=b.pathname,X=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(J=J.toLowerCase(),X=X?X.toLowerCase():null,G=G.toLowerCase()),X&&B&&(X=mi(X,B)||X);const fe=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let oe=J===G||!a&&J.startsWith(G)&&J.charAt(fe)==="/",me=X!=null&&(X===G||!a&&X.startsWith(G)&&X.charAt(G.length)==="/"),N={isActive:oe,isPending:me,isTransitioning:L},S=oe?e:void 0,I;typeof r=="function"?I=r(N):I=[r,oe?"active":null,me?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(N):l;return K.createElement(hr,{...p,"aria-current":S,className:I,ref:_,style:V,to:c,viewTransition:d},typeof m=="function"?m(N):m)});D1.displayName="NavLink";var x1=K.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=cf,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...b},R)=>{let O=M1(),B=P1(d,{relative:p}),L=c.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&TA.test(d),J=X=>{if(m&&m(X),X.defaultPrevented)return;X.preventDefault();let fe=X.nativeEvent.submitter,oe=(fe==null?void 0:fe.getAttribute("formmethod"))||c;O(fe||X.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return K.createElement("form",{ref:R,method:L,action:B,onSubmit:r?m:J,...b,"data-discover":!G&&s==="render"?"true":void 0})});x1.displayName="Form";function C1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AA(s){let e=K.useContext(hl);return gt(e,C1(s)),e}function V1(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=qI(),m=xa(),p=yc(s,{relative:l});return K.useCallback(_=>{if(l1(_,e)){_.preventDefault();let T=t!==void 0?t:Yu(m)===Yu(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,s,a,l,c])}var N1=0,O1=()=>`__${String(++N1)}__`;function M1(){let{router:s}=AA("useSubmit"),{basename:e}=K.useContext(kr),t=WI();return K.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=h1(r,e);if(a.navigate===!1){let _=a.fetcherKey||O1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function P1(s,{relative:e}={}){let{basename:t}=K.useContext(kr),r=K.useContext(vi);gt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...yc(s||".",{relative:e})},c=xa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:fi([t,l.pathname])),Yu(l)}function L1(s,e={}){let t=K.useContext(dA);gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AA("useViewTransitionState"),a=yc(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=mi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=mi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Af(a.pathname,c)!=null||Af(a.pathname,l)!=null}new TextEncoder;[...v1];const U1=()=>{};var _T={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},k1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},wA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,R=p&63;m||(R=64,c||(b=64)),r.push(t[_],t[T],t[b],t[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(bA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):k1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new B1;const b=l<<2|d>>4;if(r.push(b),p!==64){const R=d<<4&240|p>>2;if(r.push(R),T!==64){const O=p<<6&192|T;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class B1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z1=function(s){const e=bA(s);return wA.encodeByteArray(e,!0)},bf=function(s){return z1(s).replace(/\./g,"")},SA=function(s){try{return wA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!q1(t)||(s[t]=wf(s[t],e[t]));return s}function q1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=()=>RA().__FIREBASE_DEFAULTS__,F1=()=>{if(typeof process>"u"||typeof _T>"u")return;const s=_T.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},G1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&SA(s[1]);return e&&JSON.parse(e)},IA=()=>{try{return U1()||j1()||F1()||G1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},DA=()=>{var s;return(s=IA())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[bf(JSON.stringify(t)),bf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K1(){var s;const e=(s=IA())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $1(){return typeof window<"u"||xA()}function xA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function CA(){return!K1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VA(){try{return typeof indexedDB=="object"}catch{return!1}}function Y1(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="FirebaseError";class Ca extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=X1,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$f.prototype.create)}}class $f{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?Z1(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ca(a,d,r)}}function Z1(s,e){return s.replace(W1,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const W1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function qo(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(ET(l)&&ET(c)){if(!qo(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function ET(s){return s!==null&&typeof s=="object"}function J1(s,e){const t=new eD(s,e);return t.subscribe.bind(t)}class eD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=xg),a.error===void 0&&(a.error=xg),a.complete===void 0&&(a.complete=xg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tD(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(s){return s&&s._delegate?s._delegate:s}class va{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new H1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iD(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rD(s){return s===oa?void 0:s}function iD(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=[];var ke;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ke||(ke={}));const OA={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},sD=ke.INFO,aD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},oD=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=aD[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=sD,this._logHandler=oD,this._userLogHandler=null,Cp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}function lD(s){Cp.forEach(e=>{e.setLogLevel(s)})}function uD(s,e){for(const t of Cp){let r=null;e&&e.level&&(r=OA[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:ke[l].toLowerCase(),message:d,args:c,type:a.name})}}}const cD=(s,e)=>e.some(t=>s instanceof t);let TT,AT;function hD(){return TT||(TT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MA=new WeakMap,Hg=new WeakMap,PA=new WeakMap,Cg=new WeakMap,Np=new WeakMap;function dD(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(os(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&MA.set(t,s)}).catch(()=>{}),Np.set(e,s),e}function mD(s){if(Hg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Hg.set(s,e)}let Qg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Hg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||PA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function gD(s){Qg=s(Qg)}function pD(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Vg(this),e,...t);return PA.set(r,e.sort?e.sort():[e]),os(r)}:fD().includes(s)?function(...e){return s.apply(Vg(this),e),os(MA.get(this))}:function(...e){return os(s.apply(Vg(this),e))}}function yD(s){return typeof s=="function"?pD(s):(s instanceof IDBTransaction&&mD(s),cD(s,hD())?new Proxy(s,Qg):s)}function os(s){if(s instanceof IDBRequest)return dD(s);if(Cg.has(s))return Cg.get(s);const e=yD(s);return e!==s&&(Cg.set(s,e),Np.set(e,s)),e}const Vg=s=>Np.get(s);function _D(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=os(c);return r&&c.addEventListener("upgradeneeded",m=>{r(os(c.result),m.oldVersion,m.newVersion,os(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const vD=["get","getKey","getAll","getAllKeys","count"],ED=["put","add","delete","clear"],Ng=new Map;function bT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=ED.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||vD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Ng.set(e,l),l}gD(s=>({...s,get:(e,t,r)=>bT(e,t)||s.get(e,t,r),has:(e,t)=>!!bT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function AD(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rf="@firebase/app",Kg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Vp("@firebase/app"),bD="@firebase/app-compat",wD="@firebase/analytics-compat",SD="@firebase/analytics",RD="@firebase/app-check-compat",ID="@firebase/app-check",DD="@firebase/auth",xD="@firebase/auth-compat",CD="@firebase/database",VD="@firebase/data-connect",ND="@firebase/database-compat",OD="@firebase/functions",MD="@firebase/functions-compat",PD="@firebase/installations",LD="@firebase/installations-compat",UD="@firebase/messaging",kD="@firebase/messaging-compat",BD="@firebase/performance",zD="@firebase/performance-compat",qD="@firebase/remote-config",jD="@firebase/remote-config-compat",FD="@firebase/storage",GD="@firebase/storage-compat",HD="@firebase/firestore",QD="@firebase/vertexai",KD="@firebase/firestore-compat",$D="firebase",YD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]",XD={[Rf]:"fire-core",[bD]:"fire-core-compat",[SD]:"fire-analytics",[wD]:"fire-analytics-compat",[ID]:"fire-app-check",[RD]:"fire-app-check-compat",[DD]:"fire-auth",[xD]:"fire-auth-compat",[CD]:"fire-rtdb",[VD]:"fire-data-connect",[ND]:"fire-rtdb-compat",[OD]:"fire-fn",[MD]:"fire-fn-compat",[PD]:"fire-iid",[LD]:"fire-iid-compat",[UD]:"fire-fcm",[kD]:"fire-fcm-compat",[BD]:"fire-perf",[zD]:"fire-perf-compat",[qD]:"fire-rc",[jD]:"fire-rc-compat",[FD]:"fire-gcs",[GD]:"fire-gcs-compat",[HD]:"fire-fst",[KD]:"fire-fst-compat",[QD]:"fire-vertex","fire-js":"fire-js",[$D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Map,jo=new Map,Fo=new Map;function Xu(s,e){try{s.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function LA(s,e){s.container.addOrOverwriteComponent(e)}function Go(s){const e=s.name;if(Fo.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Fo.set(e,s);for(const t of fs.values())Xu(t,s);for(const t of jo.values())Xu(t,s);return!0}function UA(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ZD(s,e,t=hs){UA(s,e).clearInstance(t)}function kA(s){return s.options!==void 0}function BA(s){return s==null?!1:s.settings!==void 0}function WD(){Fo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new $f("app","Firebase",JD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(s,e){const t=SA(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class ex extends zA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&wT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&wT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,di(Rf,Kg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw er.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=YD;function Mp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hs,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw er.create("bad-app-name",{appName:String(a)});if(t||(t=DA()),!t)throw er.create("no-options");const l=fs.get(a);if(l){if(qo(t,l.options)&&qo(r,l.config))return l;throw er.create("duplicate-app",{appName:a})}const c=new NA(a);for(const m of Fo.values())c.addComponent(m);const d=new zA(t,r,c);return fs.set(a,d),d}function tx(s,e){if($1()&&!xA())throw er.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;kA(s)?t=s.options:t=s;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw er.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=jo.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new NA(l);for(const p of Fo.values())d.addComponent(p);const m=new ex(t,e,l,d);return jo.set(l,m),m}function nx(s=hs){const e=fs.get(s);if(!e&&s===hs&&DA())return Mp();if(!e)throw er.create("no-app",{appName:s});return e}function rx(){return Array.from(fs.values())}async function Pp(s){let e=!1;const t=s.name;fs.has(t)?(e=!0,fs.delete(t)):jo.has(t)&&s.decRefCount()<=0&&(jo.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function di(s,e,t){var r;let a=(r=XD[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(d.join(" "));return}Go(new va(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function qA(s,e){if(s!==null&&typeof s!="function")throw er.create("invalid-log-argument");uD(s,e)}function jA(s){lD(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebase-heartbeat-database",sx=1,Zu="firebase-heartbeat-store";let Og=null;function FA(){return Og||(Og=_D(ix,sx,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Zu)}catch(t){console.warn(t)}}}}).catch(s=>{throw er.create("idb-open",{originalErrorMessage:s.message})})),Og}async function ax(s){try{const t=(await FA()).transaction(Zu),r=await t.objectStore(Zu).get(GA(s));return await t.done,r}catch(e){if(e instanceof Ca)gi.warn(e.message);else{const t=er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function ST(s,e){try{const r=(await FA()).transaction(Zu,"readwrite");await r.objectStore(Zu).put(e,GA(s)),await r.done}catch(t){if(t instanceof Ca)gi.warn(t.message);else{const r=er.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(r.message)}}}function GA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=1024,lx=30;class ux{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=RT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>lx){const c=fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=RT(),{heartbeatsToSend:r,unsentEntries:a}=cx(this._heartbeatsCache.heartbeats),l=bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gi.warn(t),""}}}function RT(){return new Date().toISOString().substring(0,10)}function cx(s,e=ox){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),IT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),IT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VA()?Y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ax(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return ST(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function IT(s){return bf(JSON.stringify({version:2,heartbeats:s})).length}function fx(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(s){Go(new va("platform-logger",e=>new TD(e),"PRIVATE")),Go(new va("heartbeat",e=>new ux(e),"PRIVATE")),di(Rf,Kg,s),di(Rf,Kg,"esm2017"),di("fire-js","")}dx("");const mx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ca,SDK_VERSION:Op,_DEFAULT_ENTRY_NAME:hs,_addComponent:Xu,_addOrOverwriteComponent:LA,_apps:fs,_clearComponents:WD,_components:Fo,_getProvider:UA,_isFirebaseApp:kA,_isFirebaseServerApp:BA,_registerComponent:Go,_removeServiceInstance:ZD,_serverApps:jo,deleteApp:Pp,getApp:nx,getApps:rx,initializeApp:Mp,initializeServerApp:tx,onLog:qA,registerVersion:di,setLogLevel:jA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this._delegate=e,this.firebase=t,Xu(e,new va("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Pp(this._delegate)))}_getService(e,t=hs){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=hs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Xu(this._delegate,e)}_addOrOverwriteComponent(e){LA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},DT=new $f("app-compat","Firebase",px);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:di,setLogLevel:jA,onLog:qA,apps:null,SDK_VERSION:Op,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:mx}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function a(p){if(p=p||hs,!vT(e,p))throw DT.create("no-app",{appName:p});return e[p]}a.App=s;function l(p,_={}){const T=Mp(p,_);if(vT(e,T.name))return e[T.name];const b=new s(T,t);return e[T.name]=b,b}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const _=p.name,T=_.replace("-compat","");if(Go(p)&&p.type==="PUBLIC"){const b=(R=a())=>{if(typeof R[T]!="function")throw DT.create("invalid-app-argument",{appName:_});return R[T]()};p.serviceProps!==void 0&&wf(b,p.serviceProps),t[T]=b,s.prototype[T]=function(...R){return this._getService.bind(this,_).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){const s=yx(gx);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:HA,extendNamespace:e,createSubscribe:J1,ErrorFactory:$f,deepExtend:wf});function e(t){wf(s,t)}return s}const _x=HA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Vp("@firebase/app-compat"),vx="@firebase/app-compat",Ex="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(s){di(vx,Ex,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=RA();if(s.firebase!==void 0){xT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&xT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Pn=_x;Tx();var Ax="firebase",bx="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.registerVersion(Ax,bx,"app-compat");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,QA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function I(){}I.prototype=S.prototype,N.D=S.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(V,P,U){for(var x=Array(arguments.length-2),We=2;We<arguments.length;We++)x[We-2]=arguments[We];return S.prototype[P].apply(V,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,S,I){I||(I=0);var V=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)V[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)V[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=N.g[0],I=N.g[1],P=N.g[2];var U=N.g[3],x=S+(U^I&(P^U))+V[0]+3614090360&4294967295;S=I+(x<<7&4294967295|x>>>25),x=U+(P^S&(I^P))+V[1]+3905402710&4294967295,U=S+(x<<12&4294967295|x>>>20),x=P+(I^U&(S^I))+V[2]+606105819&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(S^P&(U^S))+V[3]+3250441966&4294967295,I=P+(x<<22&4294967295|x>>>10),x=S+(U^I&(P^U))+V[4]+4118548399&4294967295,S=I+(x<<7&4294967295|x>>>25),x=U+(P^S&(I^P))+V[5]+1200080426&4294967295,U=S+(x<<12&4294967295|x>>>20),x=P+(I^U&(S^I))+V[6]+2821735955&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(S^P&(U^S))+V[7]+4249261313&4294967295,I=P+(x<<22&4294967295|x>>>10),x=S+(U^I&(P^U))+V[8]+1770035416&4294967295,S=I+(x<<7&4294967295|x>>>25),x=U+(P^S&(I^P))+V[9]+2336552879&4294967295,U=S+(x<<12&4294967295|x>>>20),x=P+(I^U&(S^I))+V[10]+4294925233&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(S^P&(U^S))+V[11]+2304563134&4294967295,I=P+(x<<22&4294967295|x>>>10),x=S+(U^I&(P^U))+V[12]+1804603682&4294967295,S=I+(x<<7&4294967295|x>>>25),x=U+(P^S&(I^P))+V[13]+4254626195&4294967295,U=S+(x<<12&4294967295|x>>>20),x=P+(I^U&(S^I))+V[14]+2792965006&4294967295,P=U+(x<<17&4294967295|x>>>15),x=I+(S^P&(U^S))+V[15]+1236535329&4294967295,I=P+(x<<22&4294967295|x>>>10),x=S+(P^U&(I^P))+V[1]+4129170786&4294967295,S=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(S^I))+V[6]+3225465664&4294967295,U=S+(x<<9&4294967295|x>>>23),x=P+(S^I&(U^S))+V[11]+643717713&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^S&(P^U))+V[0]+3921069994&4294967295,I=P+(x<<20&4294967295|x>>>12),x=S+(P^U&(I^P))+V[5]+3593408605&4294967295,S=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(S^I))+V[10]+38016083&4294967295,U=S+(x<<9&4294967295|x>>>23),x=P+(S^I&(U^S))+V[15]+3634488961&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^S&(P^U))+V[4]+3889429448&4294967295,I=P+(x<<20&4294967295|x>>>12),x=S+(P^U&(I^P))+V[9]+568446438&4294967295,S=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(S^I))+V[14]+3275163606&4294967295,U=S+(x<<9&4294967295|x>>>23),x=P+(S^I&(U^S))+V[3]+4107603335&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^S&(P^U))+V[8]+1163531501&4294967295,I=P+(x<<20&4294967295|x>>>12),x=S+(P^U&(I^P))+V[13]+2850285829&4294967295,S=I+(x<<5&4294967295|x>>>27),x=U+(I^P&(S^I))+V[2]+4243563512&4294967295,U=S+(x<<9&4294967295|x>>>23),x=P+(S^I&(U^S))+V[7]+1735328473&4294967295,P=U+(x<<14&4294967295|x>>>18),x=I+(U^S&(P^U))+V[12]+2368359562&4294967295,I=P+(x<<20&4294967295|x>>>12),x=S+(I^P^U)+V[5]+4294588738&4294967295,S=I+(x<<4&4294967295|x>>>28),x=U+(S^I^P)+V[8]+2272392833&4294967295,U=S+(x<<11&4294967295|x>>>21),x=P+(U^S^I)+V[11]+1839030562&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^S)+V[14]+4259657740&4294967295,I=P+(x<<23&4294967295|x>>>9),x=S+(I^P^U)+V[1]+2763975236&4294967295,S=I+(x<<4&4294967295|x>>>28),x=U+(S^I^P)+V[4]+1272893353&4294967295,U=S+(x<<11&4294967295|x>>>21),x=P+(U^S^I)+V[7]+4139469664&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^S)+V[10]+3200236656&4294967295,I=P+(x<<23&4294967295|x>>>9),x=S+(I^P^U)+V[13]+681279174&4294967295,S=I+(x<<4&4294967295|x>>>28),x=U+(S^I^P)+V[0]+3936430074&4294967295,U=S+(x<<11&4294967295|x>>>21),x=P+(U^S^I)+V[3]+3572445317&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^S)+V[6]+76029189&4294967295,I=P+(x<<23&4294967295|x>>>9),x=S+(I^P^U)+V[9]+3654602809&4294967295,S=I+(x<<4&4294967295|x>>>28),x=U+(S^I^P)+V[12]+3873151461&4294967295,U=S+(x<<11&4294967295|x>>>21),x=P+(U^S^I)+V[15]+530742520&4294967295,P=U+(x<<16&4294967295|x>>>16),x=I+(P^U^S)+V[2]+3299628645&4294967295,I=P+(x<<23&4294967295|x>>>9),x=S+(P^(I|~U))+V[0]+4096336452&4294967295,S=I+(x<<6&4294967295|x>>>26),x=U+(I^(S|~P))+V[7]+1126891415&4294967295,U=S+(x<<10&4294967295|x>>>22),x=P+(S^(U|~I))+V[14]+2878612391&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~S))+V[5]+4237533241&4294967295,I=P+(x<<21&4294967295|x>>>11),x=S+(P^(I|~U))+V[12]+1700485571&4294967295,S=I+(x<<6&4294967295|x>>>26),x=U+(I^(S|~P))+V[3]+2399980690&4294967295,U=S+(x<<10&4294967295|x>>>22),x=P+(S^(U|~I))+V[10]+4293915773&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~S))+V[1]+2240044497&4294967295,I=P+(x<<21&4294967295|x>>>11),x=S+(P^(I|~U))+V[8]+1873313359&4294967295,S=I+(x<<6&4294967295|x>>>26),x=U+(I^(S|~P))+V[15]+4264355552&4294967295,U=S+(x<<10&4294967295|x>>>22),x=P+(S^(U|~I))+V[6]+2734768916&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~S))+V[13]+1309151649&4294967295,I=P+(x<<21&4294967295|x>>>11),x=S+(P^(I|~U))+V[4]+4149444226&4294967295,S=I+(x<<6&4294967295|x>>>26),x=U+(I^(S|~P))+V[11]+3174756917&4294967295,U=S+(x<<10&4294967295|x>>>22),x=P+(S^(U|~I))+V[2]+718787259&4294967295,P=U+(x<<15&4294967295|x>>>17),x=I+(U^(P|~S))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+U&4294967295}r.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var I=S-this.blockSize,V=this.B,P=this.h,U=0;U<S;){if(P==0)for(;U<=I;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<S;)if(V[P++]=N.charCodeAt(U++),P==this.blockSize){a(this,V),P=0;break}}else for(;U<S;)if(V[P++]=N[U++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var I=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=I&255,I/=256;for(this.u(N),N=Array(16),S=I=0;4>S;++S)for(var V=0;32>V;V+=8)N[I++]=this.g[S]>>>V&255;return N};function l(N,S){var I=d;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=S(N)}function c(N,S){this.h=S;for(var I=[],V=!0,P=N.length-1;0<=P;P--){var U=N[P]|0;V&&U==S||(I[P]=U,V=!1)}this.g=I}var d={};function m(N){return-128<=N&&128>N?l(N,function(S){return new c([S|0],0>S?-1:0)}):new c([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return L(p(-N));for(var S=[],I=1,V=0;N>=I;V++)S[V]=N/I|0,I*=4294967296;return new c(S,0)}function _(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return L(_(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(S,8)),V=T,P=0;P<N.length;P+=8){var U=Math.min(8,N.length-P),x=parseInt(N.substring(P,P+U),S);8>U?(U=p(Math.pow(S,U)),V=V.j(U).add(p(x))):(V=V.j(I),V=V.add(p(x)))}return V}var T=m(0),b=m(1),R=m(16777216);s=c.prototype,s.m=function(){if(B(this))return-L(this).m();for(var N=0,S=1,I=0;I<this.g.length;I++){var V=this.i(I);N+=(0<=V?V:4294967296+V)*S,S*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(B(this))return"-"+L(this).toString(N);for(var S=p(Math.pow(N,6)),I=this,V="";;){var P=fe(I,S).g;I=G(I,P.j(S));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=P,O(I))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function B(N){return N.h==-1}s.l=function(N){return N=G(this,N),B(N)?-1:O(N)?0:1};function L(N){for(var S=N.g.length,I=[],V=0;V<S;V++)I[V]=~N.g[V];return new c(I,~N.h).add(b)}s.abs=function(){return B(this)?L(this):this},s.add=function(N){for(var S=Math.max(this.g.length,N.g.length),I=[],V=0,P=0;P<=S;P++){var U=V+(this.i(P)&65535)+(N.i(P)&65535),x=(U>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);V=x>>>16,U&=65535,x&=65535,I[P]=x<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function G(N,S){return N.add(L(S))}s.j=function(N){if(O(this)||O(N))return T;if(B(this))return B(N)?L(this).j(L(N)):L(L(this).j(N));if(B(N))return L(this.j(L(N)));if(0>this.l(R)&&0>N.l(R))return p(this.m()*N.m());for(var S=this.g.length+N.g.length,I=[],V=0;V<2*S;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<N.g.length;P++){var U=this.i(V)>>>16,x=this.i(V)&65535,We=N.i(P)>>>16,Ve=N.i(P)&65535;I[2*V+2*P]+=x*Ve,J(I,2*V+2*P),I[2*V+2*P+1]+=U*Ve,J(I,2*V+2*P+1),I[2*V+2*P+1]+=x*We,J(I,2*V+2*P+1),I[2*V+2*P+2]+=U*We,J(I,2*V+2*P+2)}for(V=0;V<S;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=S;V<2*S;V++)I[V]=0;return new c(I,0)};function J(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function X(N,S){this.g=N,this.h=S}function fe(N,S){if(O(S))throw Error("division by zero");if(O(N))return new X(T,T);if(B(N))return S=fe(L(N),S),new X(L(S.g),L(S.h));if(B(S))return S=fe(N,L(S)),new X(L(S.g),S.h);if(30<N.g.length){if(B(N)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,V=S;0>=V.l(N);)I=oe(I),V=oe(V);var P=me(I,1),U=me(V,1);for(V=me(V,2),I=me(I,2);!O(V);){var x=U.add(V);0>=x.l(N)&&(P=P.add(I),U=x),V=me(V,1),I=me(I,1)}return S=G(N,P.j(S)),new X(P,S)}for(P=T;0<=N.l(S);){for(I=Math.max(1,Math.floor(N.m()/S.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=p(I),x=U.j(S);B(x)||0<x.l(N);)I-=V,U=p(I),x=U.j(S);O(U)&&(U=b),P=P.add(U),N=G(N,x)}return new X(P,N)}s.A=function(N){return fe(this,N).h},s.and=function(N){for(var S=Math.max(this.g.length,N.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)&N.i(V);return new c(I,this.h&N.h)},s.or=function(N){for(var S=Math.max(this.g.length,N.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)|N.i(V);return new c(I,this.h|N.h)},s.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)^N.i(V);return new c(I,this.h^N.h)};function oe(N){for(var S=N.g.length+1,I=[],V=0;V<S;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new c(I,N.h)}function me(N,S){var I=S>>5;S%=32;for(var V=N.g.length-I,P=[],U=0;U<V;U++)P[U]=0<S?N.i(U+I)>>>S|N.i(U+I+1)<<32-S:N.i(U+I);return new c(P,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,ls=c}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KA,ku,$A,ff,$g,YA,XA,ZA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var z=h[w];if(!(z in v))break e;v=v[z]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,z={next:function(){if(!w&&v<h.length){var Y=v++;return{value:y(Y,h[Y]),done:!1}}return w=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,w),h.apply(y,z)}}return function(){return h.apply(y,arguments)}}function b(h,y,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,b.apply(null,arguments)}function R(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function O(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,z,Y){for(var ue=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ue[Be-2]=arguments[Be];return y.prototype[z].apply(w,ue)}}function B(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function L(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const z=h.length||0,Y=w.length||0;h.length=z+Y;for(let ue=0;ue<Y;ue++)h[z+ue]=w[ue]}else h.push(w)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function J(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function fe(h){return fe[" "](h),h}fe[" "]=function(){};var oe=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function me(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function N(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,y){let v,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(v in w)h[v]=w[v];for(let Y=0;Y<I.length;Y++)v=I[Y],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function U(h){d.setTimeout(()=>{throw h},0)}function x(){var h=_e;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class We{constructor(){this.h=this.g=null}add(y,v){const w=Ve.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Ve=new G(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let he,Ae=!1,_e=new We,C=()=>{const h=d.Promise.resolve(void 0);he=()=>{h.then(ee)}};var ee=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(v){U(v)}var y=Ve;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Ae=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function De(h,y){if(ae.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(oe){e:{try{fe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&De.aa.h.call(this)}}O(De,ae);var we={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Sn(h,y,v,w,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=z,this.key=++Je,this.da=this.fa=!1}function tr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function kn(h){this.src=h,this.g={},this.h=0}kn.prototype.add=function(h,y,v,w,z){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var ue=Bn(h,y,w,z);return-1<ue?(y=h[ue],v||(y.fa=!1)):(y=new Sn(y,this.src,Y,!!w,z),y.fa=v,h.push(y)),y};function nr(h,y){var v=y.type;if(v in h.g){var w=h.g[v],z=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=0<=z)&&Array.prototype.splice.call(w,z,1),Y&&(tr(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Bn(h,y,v,w){for(var z=0;z<h.length;++z){var Y=h[z];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==w)return z}return-1}var rr="closure_lm_"+(1e6*Math.random()|0),zn={};function Pa(h,y,v,w,z){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Pa(h,y[Y],v,w,z);return null}return v=Nc(v),h&&h[yt]?h.K(y,v,p(w)?!!w.capture:!1,z):At(h,y,v,!1,w,z)}function At(h,y,v,w,z,Y){if(!y)throw Error("Invalid event type");var ue=p(z)?!!z.capture:!!z,Be=La(h);if(Be||(h[rr]=Be=new kn(h)),v=Be.add(y,v,w,ue,Y),v.proxy)return v;if(w=Pt(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)ve||(z=ue),z===void 0&&(z=!1),h.addEventListener(y.toString(),w,z);else if(h.attachEvent)h.attachEvent(Br(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Pt(){function h(v){return y.call(h.src,h.listener,v)}const y=El;return h}function wi(h,y,v,w,z){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)wi(h,y[Y],v,w,z);else w=p(w)?!!w.capture:!!w,v=Nc(v),h&&h[yt]?(h=h.i,y=String(y).toString(),y in h.g&&(Y=h.g[y],v=Bn(Y,v,w,z),-1<v&&(tr(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete h.g[y],h.h--)))):h&&(h=La(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Bn(y,v,w,z)),(v=-1<h?y[h]:null)&&Si(v))}function Si(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[yt])nr(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Br(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=La(y))?(nr(v,h),v.h==0&&(v.src=null,y[rr]=null)):tr(h)}}}function Br(h){return h in zn?zn[h]:zn[h]="on"+h}function El(h,y){if(h.da)h=!0;else{y=new De(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&Si(h),h=v.call(w,y)}return h}function La(h){return h=h[rr],h instanceof kn?h:null}var Tl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nc(h){return typeof h=="function"?h:(h[Tl]||(h[Tl]=function(y){return h.handleEvent(y)}),h[Tl])}function _t(){le.call(this),this.i=new kn(this),this.M=this,this.F=null}O(_t,le),_t.prototype[yt]=!0,_t.prototype.removeEventListener=function(h,y,v,w){wi(this,h,y,v,w)};function Ke(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new ae(y,h);else if(y instanceof ae)y.target=y.target||h;else{var z=y;y=new ae(w,h),V(y,z)}if(z=!0,v)for(var Y=v.length-1;0<=Y;Y--){var ue=y.g=v[Y];z=Rn(ue,w,!0,y)&&z}if(ue=y.g=h,z=Rn(ue,w,!0,y)&&z,z=Rn(ue,w,!1,y)&&z,v)for(Y=0;Y<v.length;Y++)ue=y.g=v[Y],z=Rn(ue,w,!1,y)&&z}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)tr(v[w]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},_t.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Rn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Y=0;Y<y.length;++Y){var ue=y[Y];if(ue&&!ue.da&&ue.capture==v){var Be=ue.listener,Ut=ue.ha||ue.src;ue.fa&&nr(h.i,ue),z=Be.call(Ut,w)!==!1&&z}}return z&&!w.defaultPrevented}function rn(h,y,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Oc(h){h.g=rn(()=>{h.g=null,h.i&&(h.i=!1,Oc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class bd extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Oc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(h){le.call(this),this.h=h,this.g={}}O(Is,le);var Ds=[];function xs(h){me(h.g,function(y,v){this.g.hasOwnProperty(v)&&Si(y)},h),h.g={}}Is.prototype.N=function(){Is.aa.N.call(this),xs(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ir=d.JSON.stringify,Ua=d.JSON.parse,Cs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Al(){}Al.prototype.h=null;function bl(h){return h.h||(h.h=h.i())}function wl(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qr(){ae.call(this,"d")}O(qr,ae);function Sl(){ae.call(this,"c")}O(Sl,ae);var fr={},Rl=null;function Ri(){return Rl=Rl||new _t}fr.La="serverreachability";function ka(h){ae.call(this,fr.La,h)}O(ka,ae);function Ii(h){const y=Ri();Ke(y,new ka(y))}fr.STAT_EVENT="statevent";function Mc(h,y){ae.call(this,fr.STAT_EVENT,h),this.stat=y}O(Mc,ae);function lt(h){const y=Ri();Ke(y,new Mc(y,h))}fr.Ma="timingevent";function Lt(h,y){ae.call(this,fr.Ma,h),this.size=y}O(Lt,ae);function xt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Il(h,y,v,w,z,Y){h.info(function(){if(h.g)if(Y)for(var ue="",Be=Y.split("&"),Ut=0;Ut<Be.length;Ut++){var ze=Be[Ut].split("=");if(1<ze.length){var Ft=ze[0];ze=ze[1];var kt=Ft.split("_");ue=2<=kt.length&&kt[1]=="type"?ue+(Ft+"="+ze+"&"):ue+(Ft+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+v+`
`+ue})}function wd(h,y,v,w,z,Y,ue){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+v+`
`+Y+" "+ue})}function Di(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Vs(h,v)+(w?" "+w:"")})}function Pc(h,y){h.info(function(){return"TIMEOUT: "+y})}qn.prototype.info=function(){};function Vs(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var z=w[1];if(Array.isArray(z)&&!(1>z.length)){var Y=z[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<z.length;ue++)z[ue]=""}}}}return ir(v)}catch{return y}}var xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function mr(){}O(mr,Al),mr.prototype.g=function(){return new XMLHttpRequest},mr.prototype.i=function(){return{}},dr=new mr;function hn(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new Is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var Dl={},Ba={};function sr(h,y,v){h.L=1,h.v=Ls(In(y)),h.m=v,h.P=!0,Fr(h,null)}function Fr(h,y){h.F=Date.now(),Ns(h),h.A=In(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ml(v.i,"t",w),h.C=0,v=h.j.J,h.h=new bt,h.g=Zc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new bd(b(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ds[0]=z.toString()),z=Ds);for(var Y=0;Y<z.length;Y++){var ue=Pa(v,z[Y],w||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ii(),Il(h.i,h.u,h.A,h.l,h.R,h.m)}hn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Hn(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const kt=Hn(this.g);var y=this.g.Ba();const Zr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Fc(this.g)))){this.J||kt!=4||y==7||(y==8||0>=Zr?Ii(3):Ii(2)),Ci(this);var v=this.g.Z();this.X=v;t:if(Lc(this)){var w=Fc(this.g);h="";var z=w.length,Y=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),gr(this);var ue="";break t}this.h.i=new d.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!(Y&&y==z-1)});w.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,wd(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Ut=this.g;if((Be=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Be)){var ze=Be;break t}}ze=null}if(v=ze)Di(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,v);else{this.o=!1,this.s=3,lt(12),Yt(this),gr(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<ue.length;)if(Xt=Uc(this,ue),Xt==Ba){kt==4&&(this.s=4,lt(14),v=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Dl){this.s=4,lt(15),Di(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Di(this.i,this.l,Xt,null),Os(this,Xt);if(Lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ue.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)Di(this.i,this.l,ue,"[Invalid Chunked Response]"),Yt(this),gr(this);else if(0<ue.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Gs(Ft),Ft.M=!0,lt(11))}}else Di(this.i,this.l,ue,null),Os(this,ue);kt==4&&Yt(this),this.o&&!this.J&&(kt==4?$c(this.j,this):(this.o=!1,Ns(this)))}else xd(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Yt(this),gr(this)}}}catch{}finally{}};function Lc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Uc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Ba:(v=Number(y.substring(v,w)),isNaN(v)?Dl:(w+=1,w+v>y.length?Ba:(y=y.slice(w,w+v),h.C=w+v,y)))}hn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ns(h){h.S=Date.now()+h.I,kc(h,h.I)}function kc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=xt(b(h.ba,h),y)}function Ci(h){h.B&&(d.clearTimeout(h.B),h.B=null)}hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Pc(this.i,this.A),this.L!=2&&(Ii(),lt(17)),Yt(this),this.s=2,gr(this)):kc(this,this.S-h)};function gr(h){h.j.G==0||h.J||$c(h.j,h)}function Yt(h){Ci(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,xs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Os(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||xl(v.h,h))){if(!h.K&&xl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Za(v),Ya(v);else break e;Bl(v),lt(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=xt(b(v.Za,v),6e3));if(1>=qa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Xr(v,11)}else if((h.K||v.g==h)&&Za(v),!J(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let ze=z[y];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const Ft=ze[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const kt=ze[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const Zr=ze[5];Zr!=null&&typeof Zr=="number"&&0<Zr&&(w=1.5*Zr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Xt=h.g;if(Xt){const Ar=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ar){var Y=w.h;Y.g||Ar.indexOf("spdy")==-1&&Ar.indexOf("quic")==-1&&Ar.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ja(Y,Y.h),Y.h=null))}if(w.D){const ql=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;ql&&(w.ya=ql,et(w.I,w.D,ql))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ue=h;if(w.qa=Xc(w,w.J?w.ia:null,w.W),ue.K){fn(w.h,ue);var Be=ue,Ut=w.L;Ut&&(Be.I=Ut),Be.B&&(Ci(Be),Ns(Be)),w.g=ue}else Qc(w);0<v.i.length&&Xa(v)}else ze[0]!="stop"&&ze[0]!="close"||Xr(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Xr(v,7):Ul(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}Ii(4)}catch{}}var Bc=class{constructor(h,y){this.g=h,this.map=y}};function Gr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function za(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qa(h){return h.h?1:h.g?h.g.size:0}function xl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ja(h,y){h.g?h.g.add(y):h.h=y}function fn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Gr.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return B(h.i)}function Sd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function Fa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function Vl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Fa(h),w=Sd(h),z=w.length,Y=0;Y<z;Y++)y.call(void 0,w[Y],v&&v[Y],h)}var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),z=null;if(0<=w){var Y=h[v].substring(0,w);z=h[v].substring(w+1)}else Y=h[v];y(Y,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ct(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ct){this.h=h.h,Ps(this,h.j),this.o=h.o,this.g=h.g,Vi(this,h.s),this.l=h.l;var y=h.i,v=new Qr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Hr(this,v),this.m=h.m}else h&&(y=String(h).match(Ms))?(this.h=!1,Ps(this,y[1]||"",!0),this.o=jn(y[2]||""),this.g=jn(y[3]||"",!0),Vi(this,y[4]),this.l=jn(y[5]||"",!0),Hr(this,y[6]||"",!0),this.m=jn(y[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}Ct.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Us(y,Nl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Us(y,Nl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Us(v,v.charAt(0)=="/"?Id:Ol,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Us(v,Ga)),h.join("")};function In(h){return new Ct(h)}function Ps(h,y,v){h.j=v?jn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Vi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Hr(h,y,v){y instanceof Qr?(h.i=y,qc(h.i,h.h)):(v||(y=Us(y,Dd)),h.i=new Qr(y,h.h))}function et(h,y,v){h.i.set(y,v)}function Ls(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function jn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Us(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,zc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function zc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Nl=/[#\/\?@]/g,Ol=/[#\?:]/g,Id=/[#\?]/g,Dd=/[#\?@]/g,Ga=/#/g;function Qr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Rd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Qr.prototype,s.add=function(h,y){Fn(this),this.i=null,h=pr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Kr(h,y){Fn(h),y=pr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function $r(h,y){return Fn(h),y=pr(h,y),h.g.has(y)}s.forEach=function(h,y){Fn(this),this.g.forEach(function(v,w){v.forEach(function(z){h.call(y,z,w,this)},this)},this)},s.na=function(){Fn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const z=h[w];for(let Y=0;Y<z.length;Y++)v.push(y[w])}return v},s.V=function(h){Fn(this);let y=[];if(typeof h=="string")$r(this,h)&&(y=y.concat(this.g.get(pr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return Fn(this),this.i=null,h=pr(this,h),$r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Ml(h,y,v){Kr(h,y),0<v.length&&(h.i=null,h.g.set(pr(h,y),B(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const Y=encodeURIComponent(String(w)),ue=this.V(w);for(w=0;w<ue.length;w++){var z=Y;ue[w]!==""&&(z+="="+encodeURIComponent(String(ue[w]))),h.push(z)}}return this.i=h.join("&")};function pr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function qc(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(v,w){var z=w.toLowerCase();w!=z&&(Kr(this,w),Ml(this,z,v))},h)),h.j=y}function ks(h,y){const v=new qn;if(d.Image){const w=new Image;w.onload=R(Gn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=R(Gn,v,"TestLoadImage: error",!1,y,w),w.onabort=R(Gn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=R(Gn,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function ar(h,y){const v=new qn,w=new AbortController,z=setTimeout(()=>{w.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(z),Y.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(v)}catch{}}function Bs(){this.g=new Cs}function yr(h,y,v){const w=v||"";try{Vl(h,function(z,Y){let ue=z;p(z)&&(ue=ir(z)),y.push(w+Y+"="+encodeURIComponent(ue))})}catch(z){throw y.push(w+"type="+encodeURIComponent("_badmap")),z}}function Ni(h){this.l=h.Ub||null,this.j=h.eb||!1}O(Ni,Al),Ni.prototype.g=function(){return new Yr(this.l,this.j)},Ni.prototype.i=function(h){return function(){return h}}({});function Yr(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Yr,_t),s=Yr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,vr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_r(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?_r(this):vr(this),this.readyState==3&&Pl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,_r(this))},s.Qa=function(h){this.g&&(this.response=h,_r(this))},s.ga=function(){this.g&&_r(this)};function _r(h){h.readyState=4,h.l=null,h.j=null,h.v=null,vr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function vr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ll(h){let y="";return me(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function jt(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Ll(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):et(h,y,v))}function Qe(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Qe,_t);var Ha=/^https?$/i,zs=["POST","PUT"];s=Qe.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?bl(this.o):bl(dr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){jc(this,Y);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)v.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())v.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(zs,y,void 0))||w||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of v)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){jc(this,Y)}};function jc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Qa(h),Er(h)}function Qa(h){h.A||(h.A=!0,Ke(h,"complete"),Ke(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ke(this,"complete"),Ke(this,"abort"),Er(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Qe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ka(this):this.bb())},s.bb=function(){Ka(this)};function Ka(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Hn(h)!=4||h.Z()!=2)){if(h.u&&Hn(h)==4)rn(h.Ea,0,h);else if(Ke(h,"readystatechange"),Hn(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=ue===0){var z=String(h.D).match(Ms)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),w=!Ha.test(z?z.toLowerCase():"")}v=w}if(v)Ke(h,"complete"),Ke(h,"success");else{h.m=6;try{var Y=2<Hn(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",Qa(h)}}finally{Er(h)}}}}function Er(h,y){if(h.g){qs(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ke(h,"ready");try{v.onreadystatechange=w}catch{}}}function qs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Hn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ua(y)}};function Fc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(h){const y={};h=(h.g&&2<=Hn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(J(h[w]))continue;var v=P(h[w]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[z]||[];y[z]=Y,Y.push(v)}N(y,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function $a(h){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=js("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=js("baseRetryDelayMs",5e3,h),this.cb=js("retryDelaySeedMs",1e4,h),this.Wa=js("forwardChannelMaxRetries",2,h),this.wa=js("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Gr(h&&h.concurrentRequestLimit),this.Da=new Bs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=$a.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,w){lt(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Xc(this,null,this.W),Xa(this)};function Ul(h){if(Gc(h),h.G==3){var y=h.U++,v=In(h.I);if(et(v,"SID",h.K),et(v,"RID",y),et(v,"TYPE","terminate"),Fs(h,v),y=new hn(h,h.j,y),y.L=2,y.v=Ls(In(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Zc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ns(y)}Yc(h)}function Ya(h){h.g&&(Gs(h),h.g.cancel(),h.g=null)}function Gc(h){Ya(h),h.u&&(d.clearTimeout(h.u),h.u=null),Za(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Xa(h){if(!za(h.h)&&!h.s){h.s=!0;var y=h.Ga;he||C(),Ae||(he(),Ae=!0),_e.add(y,h),h.B=0}}function Cd(h,y){return qa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=xt(b(h.Ga,h,y),zl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new hn(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=S(Y),V(Y,this.S)):Y=this.S),this.m!==null||this.O||(z.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Hc(this,z,y),v=In(this.I),et(v,"RID",h),et(v,"CVER",22),this.D&&et(v,"X-HTTP-Session-Id",this.D),Fs(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(Ll(Y)))+"&"+y:this.m&&jt(v,this.m,Y)),ja(this.h,z),this.Ua&&et(v,"TYPE","init"),this.P?(et(v,"$req",y),et(v,"SID","null"),z.T=!0,sr(z,v,null)):sr(z,v,y),this.G=2}}else this.G==3&&(h?kl(this,h):this.i.length==0||za(this.h)||kl(this))};function kl(h,y){var v;y?v=y.l:v=h.U++;const w=In(h.I);et(w,"SID",h.K),et(w,"RID",v),et(w,"AID",h.T),Fs(h,w),h.m&&h.o&&jt(w,h.m,h.o),v=new hn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Hc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ja(h.h,v),sr(v,w,y)}function Fs(h,y){h.H&&me(h.H,function(v,w){et(y,w,v)}),h.l&&Vl({},function(v,w){et(y,w,v)})}function Hc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?b(h.l.Na,h.l,h):null;e:{var z=h.i;let Y=-1;for(;;){const ue=["count="+v];Y==-1?0<v?(Y=z[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let Be=!0;for(let Ut=0;Ut<v;Ut++){let ze=z[Ut].g;const Ft=z[Ut].map;if(ze-=Y,0>ze)Y=Math.max(0,z[Ut].g-100),Be=!1;else try{yr(Ft,ue,"req"+ze+"_")}catch{w&&w(Ft)}}if(Be){w=ue.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function Qc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;he||C(),Ae||(he(),Ae=!0),_e.add(y,h),h.v=0}}function Bl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=xt(b(h.Fa,h),zl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=xt(b(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Ya(this),Kc(this))};function Gs(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Kc(h){h.g=new hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=In(h.qa);et(y,"RID","rpc"),et(y,"SID",h.K),et(y,"AID",h.T),et(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(y,"TO",h.ja),et(y,"TYPE","xmlhttp"),Fs(h,y),h.m&&h.o&&jt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ls(In(y)),v.m=null,v.P=!0,Fr(v,h)}s.Za=function(){this.C!=null&&(this.C=null,Ya(this),Bl(this),lt(19))};function Za(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $c(h,y){var v=null;if(h.g==y){Za(h),Gs(h),h.g=null;var w=2}else if(xl(h.h,y))v=y.D,fn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=h.B;w=Ri(),Ke(w,new Lt(w,v)),Xa(h)}else Qc(h);else if(z=y.s,z==3||z==0&&0<y.X||!(w==1&&Cd(h,y)||w==2&&Bl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Xr(h,5);break;case 4:Xr(h,10);break;case 3:Xr(h,6);break;default:Xr(h,2)}}}function zl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Xr(h,y){if(h.j.info("Error code "+y),y==2){var v=b(h.fb,h),w=h.Xa;const z=!w;w=new Ct(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ps(w,"https"),Ls(w),z?ks(w.toString(),v):ar(w.toString(),v)}else lt(2);h.G=0,h.l&&h.l.sa(y),Yc(h),Gc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Yc(h){if(h.G=0,h.ka=[],h.l){const y=Cl(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ka,y),L(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function Xc(h,y,v){var w=v instanceof Ct?In(v):new Ct(v);if(w.g!="")y&&(w.g=y+"."+w.g),Vi(w,w.s);else{var z=d.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Y=new Ct(null);w&&Ps(Y,w),y&&(Y.g=y),z&&Vi(Y,z),v&&(Y.l=v),w=Y}return v=h.D,y=h.ya,v&&y&&et(w,v,y),et(w,"VER",h.la),Fs(h,w),w}function Zc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Ni({eb:v})):new Qe(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}s=Wc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Wa(){}Wa.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){_t.call(this),this.g=new $a(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!J(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!J(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Tr(this)}O(dn,_t),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ul(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=ir(h),h=v);y.i.push(new Bc(y.Ya++,h)),y.G==3&&Xa(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,dn.aa.N.call(this)};function Jc(h){qr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}O(Jc,qr);function eh(){Sl.call(this),this.status=1}O(eh,Sl);function Tr(h){this.g=h}O(Tr,Wc),Tr.prototype.ua=function(){Ke(this.g,"a")},Tr.prototype.ta=function(h){Ke(this.g,new Jc(h))},Tr.prototype.sa=function(h){Ke(this.g,new eh)},Tr.prototype.ra=function(){Ke(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,ZA=function(){return new Wa},XA=function(){return Ri()},YA=fr,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,ff=xi,jr.COMPLETE="complete",$A=jr,wl.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ku=wl,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,KA=Qe}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});const VT="@firebase/firestore",NT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Vp("@firebase/firestore");function Mo(){return ds.logLevel}function wx(s){ds.setLogLevel(s)}function se(s,...e){if(ds.logLevel<=ke.DEBUG){const t=e.map(Lp);ds.debug(`Firestore (${fl}): ${s}`,...t)}}function Rt(s,...e){if(ds.logLevel<=ke.ERROR){const t=e.map(Lp);ds.error(`Firestore (${fl}): ${s}`,...t)}}function Pr(s,...e){if(ds.logLevel<=ke.WARN){const t=e.map(Lp);ds.warn(`Firestore (${fl}): ${s}`,...t)}}function Lp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(s="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+s;throw Rt(e),new Error(e)}function ye(s,e){s||ge()}function Sx(s,e){s||ge()}function de(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($t.UNAUTHENTICATED))}shutdown(){}}class Ix{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dx{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new nn,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new nn)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new WA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new $t(e)}}class xx{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Cx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new xx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vx{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,BA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new OT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string"),this.R=t.token,new OT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Nx(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Re(s,e){return s<e?-1:s>e?1:0}function Yg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Re(r,a);{const l=Up(),c=Ox(l.encode(MT(s,t)),l.encode(MT(e,t)));return c!==0?c:Re(r,a)}}t+=r>65535?2:1}return Re(s.length,e.length)}function MT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function Ox(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Re(s[t],e[t]);return Re(s.length,e.length)}function Ho(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function eb(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=-62135596800,LT=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LT);return new dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PT)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LT}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-PT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new dt(0,0))}static max(){return new Ee(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__name__";class Dr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Dr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const r=Dr.isNumericId(e),a=Dr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):Yg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class Le extends Dr{construct(e,t,r){return new Le(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Le(t)}static emptyPath(){return new Le([])}}const Mx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Dr{construct(e,t,r){return new ht(e,t,r)}static isValidIdentifier(e){return Mx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UT}static keyField(){return new ht([UT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ie($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ie($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Le.fromString(e))}static fromName(e){return new ce(Le.fromString(e).popFirst(5))}static empty(){return new ce(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Le(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=-1;class If{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Xg(s){return s.fields.find(e=>e.kind===2)}function la(s){return s.fields.filter(e=>e.kind!==2)}If.UNKNOWN_ID=-1;class df{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wu(0,Un.min())}}function tb(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new Un(a,ce.empty(),e)}function nb(s){return new Un(s.readTime,s.key,Qo)}class Un{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Un(Ee.min(),ce.empty(),Qo)}static max(){return new Un(Ee.max(),ce.empty(),Qo)}}function kp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(s.documentKey,e.documentKey),t!==0?t:Re(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ib{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==rb)throw s;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(a=>a?q.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new q((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new q((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="SimpleDb";class Yf{static open(e,t,r,a){try{return new Yf(t,e.transaction(a,r))}catch(l){throw new ju(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new nn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new ju(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=Bp(r.target.error);this.m.reject(new ju(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(Ln,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lx(t)}}class Nr{static delete(e){return se(Ln,"Removing database:",e),ca(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!VA())return!1;if(Nr.v())return!0;const e=Sf(),t=Nr.C(e),r=0<t&&t<10,a=sb(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Nr.C(Sf())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(Ln,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ie($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ju(e,c))},a.onupgradeneeded=l=>{se(Ln,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{se(Ln,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=Yf.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),q.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(se(Ln,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sb(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Px{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return ca(this.q.delete())}}class ju extends ie{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bs(s){return s.name==="IndexedDbTransactionError"}class Lx{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(Ln,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(Ln,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ca(r)}add(e){return se(Ln,"ADD",this.store.name,e,e),ca(this.store.add(e))}get(e){return ca(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(Ln,"GET",this.store.name,e,t),t))}delete(e){return se(Ln,"DELETE",this.store.name,e),ca(this.store.delete(e))}count(){return se(Ln,"COUNT",this.store.name),ca(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new q((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(e,t){se(Ln,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new q((r,a)=>{t.onerror=l=>{const c=Bp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new q((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new Px(d),p=t(d.primaryKey,d.value,m);if(p instanceof q){const _=p.catch(T=>(m.done(),q.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ca(s){return new q((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=Bp(r.target.error);t(a)}})}let kT=!1;function Bp(s){const e=Nr.C(Sf());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kT||(kT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Fu="IndexBackfiller";class Ux{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(Fu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(Fu,`Documents written: ${t}`)}catch(t){bs(t)?se(Fu,"Ignoring IndexedDB error during index backfill: ",t):await As(t)}await this.te(6e4)})}}class kx{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return q.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return se(Fu,`Processing collection: ${c}`),this.ie(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(a,l)).next(d=>(se(Fu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=nb(l);kp(c,r)>0&&(r=c)}),new Un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}An.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=-1;function _c(s){return s==null}function Ju(s){return s===0&&1/s==-1/0}function ab(s){return typeof s=="number"&&Number.isInteger(s)&&!Ju(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="";function un(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=BT(e)),e=Bx(s.get(t),e);return BT(e)}function Bx(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Df:t+="";break;default:t+=l}}return t}function BT(s){return s+Df+""}function Cr(s){const e=s.length;if(ye(e>=2),e===2)return ye(s.charAt(0)===Df&&s.charAt(1)===""),Le.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Df,l);switch((c<0||c>t)&&ge(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ge()}l=c+2}return new Le(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="remoteDocuments",vc="owner",Do="owner",ec="mutationQueues",zx="userId",cr="mutations",zT="batchId",ga="userMutationsIndex",qT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(s,e){return[s,un(e)]}function ob(s,e,t){return[s,un(e),t]}const qx={},Ko="documentMutations",xf="remoteDocumentsV14",jx=["prefixPath","collectionGroup","readTime","documentId"],gf="documentKeyIndex",Fx=["prefixPath","collectionGroup","documentId"],lb="collectionGroupIndex",Gx=["collectionGroup","readTime","prefixPath","documentId"],tc="remoteDocumentGlobal",Zg="remoteDocumentGlobalKey",$o="targets",ub="queryTargetsIndex",Hx=["canonicalId","targetId"],Yo="targetDocuments",Qx=["targetId","path"],zp="documentTargetsIndex",Kx=["path","targetId"],Cf="targetGlobalKey",_a="targetGlobal",nc="collectionParents",$x=["collectionId","parent"],Xo="clientMetadata",Yx="clientId",Xf="bundles",Xx="bundleId",Zf="namedQueries",Zx="name",qp="indexConfiguration",Wx="indexId",Wg="collectionGroupIndex",Jx="collectionGroup",Vf="indexState",eC=["indexId","uid"],cb="sequenceNumberIndex",tC=["uid","sequenceNumber"],Nf="indexEntries",nC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hb="documentKeyIndex",rC=["indexId","uid","orderedDocumentKey"],Wf="documentOverlays",iC=["userId","collectionPath","documentId"],Jg="collectionPathOverlayIndex",sC=["userId","collectionPath","largestBatchId"],fb="collectionGroupOverlayIndex",aC=["userId","collectionGroup","largestBatchId"],jp="globals",oC="name",db=[ec,cr,Ko,ua,$o,vc,_a,Yo,Xo,tc,nc,Xf,Zf],lC=[...db,Wf],mb=[ec,cr,Ko,xf,$o,vc,_a,Yo,Xo,tc,nc,Xf,Zf,Wf],gb=mb,Fp=[...gb,qp,Vf,Nf],uC=Fp,cC=[...Fp,jp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends ib{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function qt(s,e){const t=de(s);return Nr.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ws(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function pb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new en(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,a,l){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ze(this.comparator);return t.data=e,t}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new bn([])}unionWith(e){let t=new Ze(ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new yb("Invalid base64 string: "+l):l}}(e);return new Tt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const fC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(s){if(ye(!!s),typeof s=="string"){let e=0;const t=fC.exec(s);if(ye(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(s.seconds),nanos:ct(s.nanos)}}function ct(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yi(s){return typeof s=="string"?Tt.fromBase64String(s):Tt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="server_timestamp",vb="__type__",Eb="__previous_value__",Tb="__local_write_time__";function Jf(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[vb])===null||t===void 0?void 0:t.stringValue)===_b}function ed(s){const e=s.mapValue.fields[Eb];return Jf(e)?ed(e):e}function rc(s){const e=pi(s.mapValue.fields[Tb].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const tp="(default)";class ms{constructor(e,t){this.projectId=e,this.database=t||tp}static empty(){return new ms("","")}get isDefaultDatabase(){return this.database===tp}isEqual(e){return e instanceof ms&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="__type__",Ab="__max__",ss={mapValue:{fields:{__type__:{stringValue:Ab}}}},Hp="__vector__",Zo="value",pf={nullValue:"NULL_VALUE"};function gs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Jf(s)?4:bb(s)?9007199254740991:td(s)?10:11:ge()}function Lr(s,e){if(s===e)return!0;const t=gs(s);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return rc(s).isEqual(rc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=pi(a.timestampValue),d=pi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return yi(a.bytesValue).isEqual(yi(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return ct(a.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(a.geoPointValue.longitude)===ct(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ct(a.integerValue)===ct(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ct(a.doubleValue),d=ct(l.doubleValue);return c===d?Ju(c)===Ju(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return Ho(s.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(jT(c)!==jT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Lr(c[m],d[m])))return!1;return!0}(s,e);default:return ge()}}function ic(s,e){return(s.values||[]).find(t=>Lr(t,e))!==void 0}function ps(s,e){if(s===e)return 0;const t=gs(s),r=gs(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=ct(l.integerValue||l.doubleValue),m=ct(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,e);case 3:return GT(s.timestampValue,e.timestampValue);case 4:return GT(rc(s),rc(e));case 5:return Yg(s.stringValue,e.stringValue);case 6:return function(l,c){const d=yi(l),m=yi(c);return d.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Re(d[p],m[p]);if(_!==0)return _}return Re(d.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Re(ct(l.latitude),ct(c.latitude));return d!==0?d:Re(ct(l.longitude),ct(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return HT(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},b=c.fields||{},R=(d=T[Zo])===null||d===void 0?void 0:d.arrayValue,O=(m=b[Zo])===null||m===void 0?void 0:m.arrayValue,B=Re(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=O==null?void 0:O.values)===null||_===void 0?void 0:_.length)||0);return B!==0?B:HT(R,O)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===ss.mapValue&&c===ss.mapValue)return 0;if(l===ss.mapValue)return 1;if(c===ss.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Yg(m[T],_[T]);if(b!==0)return b;const R=ps(d[m[T]],p[_[T]]);if(R!==0)return R}return Re(m.length,_.length)}(s.mapValue,e.mapValue);default:throw ge()}}function GT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Re(s,e);const t=pi(s),r=pi(e),a=Re(t.seconds,r.seconds);return a!==0?a:Re(t.nanos,r.nanos)}function HT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ps(t[a],r[a]);if(l)return l}return Re(t.length,r.length)}function Wo(s){return np(s)}function np(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=pi(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return yi(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ce.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=np(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${np(t.fields[c])}`;return a+"}"}(s.mapValue):ge()}function yf(s){switch(gs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(s);return e?16+yf(e):16;case 5:return 2*s.stringValue.length;case 6:return yi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+yf(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return ws(r.fields,(l,c)=>{a+=l.length+yf(c)}),a}(s.mapValue);default:throw ge()}}function Ea(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function rp(s){return!!s&&"integerValue"in s}function sc(s){return!!s&&"arrayValue"in s}function QT(s){return!!s&&"nullValue"in s}function KT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function _f(s){return!!s&&"mapValue"in s}function td(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gp])===null||t===void 0?void 0:t.stringValue)===Hp}function Gu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ws(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gu(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(s.arrayValue.values[t]);return e}return Object.assign({},s)}function bb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Ab}const wb={mapValue:{fields:{[Gp]:{stringValue:Hp},[Zo]:{arrayValue:{}}}}};function mC(s){return"nullValue"in s?pf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Ea(ms.empty(),ce.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?td(s)?wb:{mapValue:{}}:ge()}function gC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Ea(ms.empty(),ce.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?wb:"mapValue"in s?td(s)?{mapValue:{}}:ss:ge()}function $T(s,e){const t=ps(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function YT(s,e){const t=ps(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=ht.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Gu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());_f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];_f(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ws(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new tn(Gu(this.value))}}function Sb(s){const e=[];return ws(s.fields,(t,r)=>{const a=new ht([t]);if(_f(r)){const l=Sb(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ot(e,0,Ee.min(),Ee.min(),Ee.min(),tn.empty(),0)}static newFoundDocument(e,t,r,a){return new ot(e,1,t,Ee.min(),r,a,0)}static newNoDocument(e,t){return new ot(e,2,t,Ee.min(),Ee.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new ot(e,3,t,Ee.min(),Ee.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){this.position=e,this.inclusive=t}}function XT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(c.referenceValue),t.key):r=ps(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Lr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function pC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{}class Ue extends Rb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yC(e,t,r):t==="array-contains"?new EC(e,r):t==="in"?new Nb(e,r):t==="not-in"?new TC(e,r):t==="array-contains-any"?new AC(e,r):new Ue(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _C(e,r):new vC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ps(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(ps(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends Rb{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Xe(e,t)}matches(e){return Jo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Jo(s){return s.op==="and"}function ip(s){return s.op==="or"}function Qp(s){return Ib(s)&&Jo(s)}function Ib(s){for(const e of s.filters)if(e instanceof Xe)return!1;return!0}function sp(s){if(s instanceof Ue)return s.field.canonicalString()+s.op.toString()+Wo(s.value);if(Qp(s))return s.filters.map(e=>sp(e)).join(",");{const e=s.filters.map(t=>sp(t)).join(",");return`${s.op}(${e})`}}function Db(s,e){return s instanceof Ue?function(r,a){return a instanceof Ue&&r.op===a.op&&r.field.isEqual(a.field)&&Lr(r.value,a.value)}(s,e):s instanceof Xe?function(r,a){return a instanceof Xe&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Db(c,a.filters[d]),!0):!1}(s,e):void ge()}function xb(s,e){const t=s.filters.concat(e);return Xe.create(t,s.op)}function Cb(s){return s instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${Wo(t.value)}`}(s):s instanceof Xe?function(t){return t.op.toString()+" {"+t.getFilters().map(Cb).join(" ,")+"}"}(s):"Filter"}class yC extends Ue{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class _C extends Ue{constructor(e,t){super(e,"in",t),this.keys=Vb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vC extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=Vb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vb(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ce.fromName(r.referenceValue))}class EC extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sc(t)&&ic(t.arrayValue,this.value)}}class Nb extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ic(this.value.arrayValue,t)}}class TC extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ic(this.value.arrayValue,t)}}class AC extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ic(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function ap(s,e=null,t=[],r=[],a=null,l=null,c=null){return new bC(s,e,t,r,a,l,c)}function Ta(s){const e=de(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),_c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wo(r)).join(",")),e.le=t}return e.le}function Ec(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!pC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Db(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ZT(s.startAt,e.startAt)&&ZT(s.endAt,e.endAt)}function Of(s){return ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Mf(s,e){return s.filters.filter(t=>t instanceof Ue&&t.field.isEqual(e))}function WT(s,e,t){let r=pf,a=!0;for(const l of Mf(s,e)){let c=pf,d=!0;switch(l.op){case"<":case"<=":c=mC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=pf}$T({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];$T({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function JT(s,e,t){let r=ss,a=!0;for(const l of Mf(s,e)){let c=ss,d=!0;switch(l.op){case">=":case">":c=gC(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ss}YT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];YT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Ob(s,e,t,r,a,l,c,d){return new Ei(s,e,t,r,a,l,c,d)}function dl(s){return new Ei(s)}function e0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Kp(s){return s.collectionGroup!==null}function Bo(s){const e=de(s);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ze(ht.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new ac(l,r))}),t.has(ht.keyField().canonicalString())||e.he.push(new ac(ht.keyField(),r))}return e.he}function yn(s){const e=de(s);return e.Pe||(e.Pe=wC(e,Bo(s))),e.Pe}function wC(s,e){if(s.limitType==="F")return ap(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ac(a.field,l)});const t=s.endAt?new ys(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ys(s.startAt.position,s.startAt.inclusive):null;return ap(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function op(s,e){const t=s.filters.concat([e]);return new Ei(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Pf(s,e,t){return new Ei(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Tc(s,e){return Ec(yn(s),yn(e))&&s.limitType===e.limitType}function Mb(s){return`${Ta(yn(s))}|lt:${s.limitType}`}function Po(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>Cb(a)).join(", ")}]`),_c(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Wo(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Wo(a)).join(",")),`Target(${r})`}(yn(s))}; limitType=${s.limitType})`}function Ac(s,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,a){for(const l of Bo(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=XT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Bo(r),a)||r.endAt&&!function(c,d,m){const p=XT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Bo(r),a))}(s,e)}function Pb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Lb(s){return(e,t)=>{let r=!1;for(const a of Bo(s)){const l=SC(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function SC(s,e,t){const r=s.field.isKeyField()?ce.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?ps(m,p):ge()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new at(ce.comparator);function wn(){return RC}const Ub=new at(ce.comparator);function Bu(...s){let e=Ub;for(const t of s)e=e.insert(t.key,t);return e}function kb(s){let e=Ub;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vr(){return Hu()}function Bb(){return Hu()}function Hu(){return new Ti(s=>s.toString(),(s,e)=>s.isEqual(e))}const IC=new at(ce.comparator),DC=new Ze(ce.comparator);function xe(...s){let e=DC;for(const t of s)e=e.add(t);return e}const xC=new Ze(Re);function $p(){return xC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function zb(s){return{integerValue:""+s}}function qb(s,e){return ab(e)?zb(e):Yp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function CC(s,e,t){return s instanceof el?function(a,l){const c={fields:{[vb]:{stringValue:_b},[Tb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Jf(l)&&(l=ed(l)),l&&(c.fields[Eb]=l),{mapValue:c}}(t,e):s instanceof Aa?Fb(s,e):s instanceof ba?Gb(s,e):function(a,l){const c=jb(a,l),d=t0(c)+t0(a.Ie);return rp(c)&&rp(a.Ie)?zb(d):Yp(a.serializer,d)}(s,e)}function VC(s,e,t){return s instanceof Aa?Fb(s,e):s instanceof ba?Gb(s,e):t}function jb(s,e){return s instanceof tl?function(r){return rp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class el extends nd{}class Aa extends nd{constructor(e){super(),this.elements=e}}function Fb(s,e){const t=Hb(e);for(const r of s.elements)t.some(a=>Lr(a,r))||t.push(r);return{arrayValue:{values:t}}}class ba extends nd{constructor(e){super(),this.elements=e}}function Gb(s,e){let t=Hb(e);for(const r of s.elements)t=t.filter(a=>!Lr(a,r));return{arrayValue:{values:t}}}class tl extends nd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function t0(s){return ct(s.integerValue||s.doubleValue)}function Hb(s){return sc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.field=e,this.transform=t}}function NC(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof Aa&&a instanceof Aa||r instanceof ba&&a instanceof ba?Ho(r.elements,a.elements,Lr):r instanceof tl&&a instanceof tl?Lr(r.Ie,a.Ie):r instanceof el&&a instanceof el}(s.transform,e.transform)}class OC{constructor(e,t){this.version=e,this.transformResults=t}}class ft{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rd{}function Qb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new gl(s.key,ft.none()):new ml(s.key,s.data,ft.none());{const t=s.data,r=tn.empty();let a=new Ze(ht.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ai(s.key,r,new bn(a.toArray()),ft.none())}}function MC(s,e,t){s instanceof ml?function(a,l,c){const d=a.value.clone(),m=r0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof Ai?function(a,l,c){if(!vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=r0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Kb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Qu(s,e,t,r){return s instanceof ml?function(l,c,d,m){if(!vf(l.precondition,c))return d;const p=l.value.clone(),_=i0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,e,t,r):s instanceof Ai?function(l,c,d,m){if(!vf(l.precondition,c))return d;const p=i0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Kb(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(l,c,d){return vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function PC(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=jb(r.transform,a||null);l!=null&&(t===null&&(t=tn.empty()),t.set(r.field,l))}return t||null}function n0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ho(r,a,(l,c)=>NC(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ml extends rd{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ai extends rd{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kb(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function r0(s,e,t){const r=new Map;ye(s.length===t.length);for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,VC(c,d,t[a]))}return r}function i0(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,CC(l,c,e))}return r}class gl extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xp extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&MC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Bb();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Qb(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(t,r)=>n0(t,r))&&Ho(this.baseMutations,e.baseMutations,(t,r)=>n0(t,r))}}class Wp{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ye(e.mutations.length===r.length);let a=function(){return IC}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Wp(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,je;function $b(s){switch(s){case $.OK:return ge();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ge()}}function Yb(s){if(s===void 0)return Rt("GRPC error has no .code"),$.UNKNOWN;switch(s){case Ot.OK:return $.OK;case Ot.CANCELLED:return $.CANCELLED;case Ot.UNKNOWN:return $.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return $.INTERNAL;case Ot.UNAVAILABLE:return $.UNAVAILABLE;case Ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ot.NOT_FOUND:return $.NOT_FOUND;case Ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ot.ABORTED:return $.ABORTED;case Ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ot.DATA_LOSS:return $.DATA_LOSS;default:return ge()}}(je=Ot||(Ot={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new ls([4294967295,4294967295],0);function s0(s){const e=Up().encode(s),t=new QA;return t.update(e),new Uint8Array(t.digest())}function a0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ls([t,r],0),new ls([a,l],0)]}class ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(r<0)throw new zu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ls.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(ls.fromNumber(r)));return a.compare(UC)===1&&(a=new ls([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=s0(e),[r,a]=a0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ey(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=s0(e),[r,a]=a0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wc(Ee.min(),a,new at(Re),wn(),xe())}}class Sc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sc(r,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class Xb{constructor(e,t){this.targetId=e,this.ge=t}}class Zb{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class o0{constructor(){this.pe=0,this.ye=l0(),this.we=Tt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=xe(),t=xe(),r=xe();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ge()}}),new Sc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=l0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ye(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class kC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=wn(),this.$e=sf(),this.Ue=sf(),this.Ke=new at(Re)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(Of(l))if(r===0){const c=new ce(l.path);this.ze(t,c,ot.newNoDocument(c,Ee.min()))}else ye(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=yi(r).toUint8Array()}catch(m){if(m instanceof yb)return Pr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new ey(c,a,l)}catch(m){return Pr(m instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Of(d.target)){const m=new ce(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,ot.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=xe();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new wc(e,t,this.Ke,this.Qe,r);return this.Qe=wn(),this.$e=sf(),this.Ue=sf(),this.Ke=new at(Re),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new o0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Ze(Re),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ze(Re),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new o0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function sf(){return new at(ce.comparator)}function l0(){return new at(ce.comparator)}const BC={asc:"ASCENDING",desc:"DESCENDING"},zC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qC={and:"AND",or:"OR"};class jC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lp(s,e){return s.useProto3Json||_c(e)?e:{value:e}}function nl(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function FC(s,e){return nl(s,e.toTimestamp())}function It(s){return ye(!!s),Ee.fromTimestamp(function(t){const r=pi(t);return new dt(r.seconds,r.nanos)}(s))}function ty(s,e){return up(s,e).canonicalString()}function up(s,e){const t=function(a){return new Le(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Jb(s){const e=Le.fromString(s);return ye(uw(e)),e}function oc(s,e){return ty(s.databaseId,e.path)}function Or(s,e){const t=Jb(e);if(t.get(1)!==s.databaseId.projectId)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ce(nw(t))}function ew(s,e){return ty(s.databaseId,e)}function tw(s){const e=Jb(s);return e.length===4?Le.emptyPath():nw(e)}function cp(s){return new Le(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function nw(s){return ye(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function u0(s,e,t){return{name:oc(s,e),fields:t.value.mapValue.fields}}function rw(s,e,t){const r=Or(s,e.name),a=It(e.updateTime),l=e.createTime?It(e.createTime):Ee.min(),c=new tn({mapValue:{fields:e.fields}}),d=ot.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function GC(s,e){return"found"in e?function(r,a){ye(!!a.found),a.found.name,a.found.updateTime;const l=Or(r,a.found.name),c=It(a.found.updateTime),d=a.found.createTime?It(a.found.createTime):Ee.min(),m=new tn({mapValue:{fields:a.found.fields}});return ot.newFoundDocument(l,c,d,m)}(s,e):"missing"in e?function(r,a){ye(!!a.missing),ye(!!a.readTime);const l=Or(r,a.missing),c=It(a.readTime);return ot.newNoDocument(l,c)}(s,e):ge()}function HC(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(ye(_===void 0||typeof _=="string"),Tt.fromBase64String(_||"")):(ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Tt.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?$.UNKNOWN:Yb(p.code);return new ie(_,p.message||"")}(c);t=new Zb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Or(s,r.document.name),l=It(r.document.updateTime),c=r.document.createTime?It(r.document.createTime):Ee.min(),d=new tn({mapValue:{fields:r.document.fields}}),m=ot.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Ef(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Or(s,r.document),l=r.readTime?It(r.readTime):Ee.min(),c=ot.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Ef([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Or(s,r.document),l=r.removedTargetIds||[];t=new Ef([],l,a,null)}else{if(!("filter"in e))return ge();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new LC(a,l),d=r.targetId;t=new Xb(d,c)}}return t}function lc(s,e){let t;if(e instanceof ml)t={update:u0(s,e.key,e.value)};else if(e instanceof gl)t={delete:oc(s,e.key)};else if(e instanceof Ai)t={update:u0(s,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof Xp))return ge();t={verify:oc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof el)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Aa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof tl)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:FC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge()}(s,e.precondition)),t}function hp(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?ft.updateTime(It(l.updateTime)):l.exists!==void 0?ft.exists(l.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ye(d.setToServerValue==="REQUEST_TIME"),m=new el;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new Aa(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new ba(_)}else"increment"in d?m=new tl(c,d.increment):ge();const p=ht.fromServerFormat(d.fieldPath);return new bc(p,m)}(s,a)):[];if(e.update){e.update.name;const a=Or(s,e.update.name),l=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new bn(p.map(_=>ht.fromServerFormat(_)))}(e.updateMask);return new Ai(a,l,c,t,r)}return new ml(a,l,t,r)}if(e.delete){const a=Or(s,e.delete);return new gl(a,t)}if(e.verify){const a=Or(s,e.verify);return new Xp(a,t)}return ge()}function QC(s,e){return s&&s.length>0?(ye(e!==void 0),s.map(t=>function(a,l){let c=a.updateTime?It(a.updateTime):It(l);return c.isEqual(Ee.min())&&(c=It(l)),new OC(c,a.transformResults||[])}(t,e))):[]}function iw(s,e){return{documents:[ew(s,e.path)]}}function sw(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ew(s,a);const l=function(p){if(p.length!==0)return lw(Xe.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(b){return{field:Lo(b.field),direction:$C(b.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=lp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function aw(s){let e=tw(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ye(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const b=ow(T);return b instanceof Xe&&Qp(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(b=>function(O){return new ac(Uo(O.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(t.orderBy));let d=null;t.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,_c(b)?null:b}(t.limit));let m=null;t.startAt&&(m=function(T){const b=!!T.before,R=T.values||[];return new ys(R,b)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const b=!T.before,R=T.values||[];return new ys(R,b)}(t.endAt)),Ob(e,a,c,l,d,"F",m,p)}function KC(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ow(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Uo(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(s):s.fieldFilter!==void 0?function(t){return Ue.create(Uo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Xe.create(t.compositeFilter.filters.map(r=>ow(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(s):ge()}function $C(s){return BC[s]}function YC(s){return zC[s]}function XC(s){return qC[s]}function Lo(s){return{fieldPath:s.canonicalString()}}function Uo(s){return ht.fromServerFormat(s.fieldPath)}function lw(s){return s instanceof Ue?function(t){if(t.op==="=="){if(KT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(QT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(QT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:YC(t.op),value:t.value}}}(s):s instanceof Xe?function(t){const r=t.getFilters().map(a=>lw(a));return r.length===1?r[0]:{compositeFilter:{op:XC(t.op),filters:r}}}(s):ge()}function ZC(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,r,a,l=Ee.min(),c=Ee.min(),d=Tt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.Tt=e}}function WC(s,e){let t;if(e.document)t=rw(s.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=Sa(e.noDocument.readTime);t=ot.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const r=ce.fromSegments(e.unknownDocument.path),a=Sa(e.unknownDocument.version);t=ot.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new dt(a[0],a[1]);return Ee.fromTimestamp(l)}(e.readTime)),t}function c0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:oc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:nl(l,c.version.toTimestamp()),createTime:nl(l,c.createTime.toTimestamp())}}(s.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wa(e.version)};else{if(!e.isUnknownDocument())return ge();r.unknownDocument={path:t.path.toArray(),version:wa(e.version)}}return r}function Lf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function wa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Sa(s){const e=new dt(s.seconds,s.nanoseconds);return Ee.fromTimestamp(e)}function ha(s,e){const t=(e.baseMutations||[]).map(l=>hp(s.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>hp(s.Tt,l)),a=dt.fromMillis(e.localWriteTimeMs);return new Zp(e.batchId,a,t,r)}function qu(s){const e=Sa(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Sa(s.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return ye(l.documents.length===1),yn(dl(tw(l.documents[0])))}(s.query):function(l){return yn(aw(l))}(s.query),new hi(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Tt.fromBase64String(s.resumeToken))}function hw(s,e){const t=wa(e.snapshotVersion),r=wa(e.lastLimboFreeSnapshotVersion);let a;a=Of(e.target)?iw(s.Tt,e.target):sw(s.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ta(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function ny(s){const e=aw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Pf(e,e.limit,"L"):e}function Mg(s,e){return new Jp(e.largestBatchId,hp(s.Tt,e.overlayMutation))}function h0(s,e){const t=e.path.lastSegment();return[s,un(e.path.popLast()),t]}function f0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:wa(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{getBundleMetadata(e,t){return d0(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Sa(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return d0(e).put(function(a){return{bundleId:a.id,createTime:wa(It(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return m0(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:ny(l.bundledQuery),readTime:Sa(l.readTime)}}(r)})}saveNamedQuery(e,t){return m0(e).put(function(a){return{name:a.name,readTime:wa(It(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function d0(s){return qt(s,Xf)}function m0(s){return qt(s,Zf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new id(e,r)}getOverlay(e,t){return Vu(e).get(h0(this.userId,t)).next(r=>r?Mg(this.serializer,r):null)}getOverlays(e,t){const r=Vr();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new Jp(t,c);a.push(this.Et(e,d))}),q.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(un(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Vu(e).J(Jg,d))}),q.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Vr(),l=un(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Vu(e).G(Jg,c).next(d=>{for(const m of d){const p=Mg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Vr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vu(e).Z({index:fb,range:d},(m,p,_)=>{const T=Mg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return Vu(e).put(function(a,l,c){const[d,m,p]=h0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:lc(a.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function Vu(s){return qt(s,Wf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{dt(e){return qt(e,jp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ct(e.integerValue));else if("doubleValue"in e){const r=ct(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Ju(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=pi(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(yi(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?bb(e)?this.ft(t,Number.MAX_SAFE_INTEGER):td(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ge()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const c=Zo,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(ct(d)),this.wt(c,t),this.Rt(l[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),ce.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}fa.xt=new fa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=255;function tV(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function g0(s){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=tV(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class nV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=g0(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=g0(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Co),this.jt(255)}Ht(){this.Jt(Co),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Co?(this.jt(Co),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Co?(this.Jt(Co),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class rV{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class iV{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Nu{constructor(){this.Zt=new nV,this.Xt=new rV(this.Zt),this.en=new iV(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new da(this.indexId,this.documentKey,this.arrayValue,r)}}function es(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=p0(s.arrayValue,e.arrayValue),t!==0?t:(t=p0(s.directionalValue,e.directionalValue),t!==0?t:ce.comparator(s.documentKey,e.documentKey)))}function p0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.rn=new Ze((t,r)=>ht.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(ye(e.collectionGroup===this.collectionId),this.an)return!1;const t=Xg(e);if(t!==void 0&&!this.cn(t))return!1;const r=la(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new Ze(ht.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new df(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new df(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new df(r.field,r.dir==="asc"?0:1)));return new If(If.UNKNOWN_ID,this.collectionId,t,Wu.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(s){var e,t;if(ye(s instanceof Ue||s instanceof Xe),s instanceof Ue){if(s instanceof Nb){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Ue.create(s.field,"==",l)))||[];return Xe.create(a,"or")}return s}const r=s.filters.map(a=>fw(a));return Xe.create(r,s.op)}function sV(s){if(s.getFilters().length===0)return[];const e=mp(fw(s));return ye(dw(e)),fp(e)||dp(e)?[e]:e.getFilters()}function fp(s){return s instanceof Ue}function dp(s){return s instanceof Xe&&Qp(s)}function dw(s){return fp(s)||dp(s)||function(t){if(t instanceof Xe&&ip(t)){for(const r of t.getFilters())if(!fp(r)&&!dp(r))return!1;return!0}return!1}(s)}function mp(s){if(ye(s instanceof Ue||s instanceof Xe),s instanceof Ue)return s;if(s.filters.length===1)return mp(s.filters[0]);const e=s.filters.map(r=>mp(r));let t=Xe.create(e,s.op);return t=Uf(t),dw(t)?t:(ye(t instanceof Xe),ye(Jo(t)),ye(t.filters.length>1),t.filters.reduce((r,a)=>ry(r,a)))}function ry(s,e){let t;return ye(s instanceof Ue||s instanceof Xe),ye(e instanceof Ue||e instanceof Xe),t=s instanceof Ue?e instanceof Ue?function(a,l){return Xe.create([a,l],"and")}(s,e):_0(s,e):e instanceof Ue?_0(e,s):function(a,l){if(ye(a.filters.length>0&&l.filters.length>0),Jo(a)&&Jo(l))return xb(a,l.getFilters());const c=ip(a)?a:l,d=ip(a)?l:a,m=c.filters.map(p=>ry(p,d));return Xe.create(m,"or")}(s,e),Uf(t)}function _0(s,e){if(Jo(e))return xb(e,s.getFilters());{const t=e.filters.map(r=>ry(s,r));return Xe.create(t,"or")}}function Uf(s){if(ye(s instanceof Ue||s instanceof Xe),s instanceof Ue)return s;const e=s.getFilters();if(e.length===1)return Uf(e[0]);if(Ib(s))return s;const t=e.map(a=>Uf(a)),r=[];return t.forEach(a=>{a instanceof Ue?r.push(a):a instanceof Xe&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Xe.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.Tn=new iy}addToCollectionParentIndex(e,t){return this.Tn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Un.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ze(Le.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ze(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="IndexedDbIndexManager",af=new Uint8Array(0);class oV{constructor(e,t){this.databaseId=t,this.In=new iy,this.En=new Ti(r=>Ta(r),(r,a)=>Ec(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:un(a)};return E0(e).put(l)}return q.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[eb(t),""],!1,!0);return E0(e).G(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Cr(c.parent))}return r})}addFieldIndex(e,t){const r=Ou(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=No(e);return l.next(d=>{c.put(f0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Ou(e),a=No(e),l=Vo(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ou(e),r=Vo(e),a=No(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return q.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new y0(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Vo(e);let a=!0;const l=new Map;return q.forEach(this.dn(t),c=>this.An(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=xe();const d=[];return q.forEach(l,(m,p)=>{se(v0,`Using index ${function(X){return`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`}(m)} to execute ${Ta(t)}`);const _=function(X,fe){const oe=Xg(fe);if(oe===void 0)return null;for(const me of Mf(X,oe.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null}(p,m),T=function(X,fe){const oe=new Map;for(const me of la(fe))for(const N of Mf(X,me.fieldPath))switch(N.op){case"==":case"in":oe.set(me.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return oe.set(me.fieldPath.canonicalString(),N.value),Array.from(oe.values())}return null}(p,m),b=function(X,fe){const oe=[];let me=!0;for(const N of la(fe)){const S=N.kind===0?WT(X,N.fieldPath,X.startAt):JT(X,N.fieldPath,X.startAt);oe.push(S.value),me&&(me=S.inclusive)}return new ys(oe,me)}(p,m),R=function(X,fe){const oe=[];let me=!0;for(const N of la(fe)){const S=N.kind===0?JT(X,N.fieldPath,X.endAt):WT(X,N.fieldPath,X.endAt);oe.push(S.value),me&&(me=S.inclusive)}return new ys(oe,me)}(p,m),O=this.Rn(m,p,b),B=this.Rn(m,p,R),L=this.Vn(m,p,T),G=this.mn(m.indexId,_,O,b.inclusive,B,R.inclusive,L);return q.forEach(G,J=>r.H(J,t.limit).next(X=>{X.forEach(fe=>{const oe=ce.fromSegments(fe.documentKey);c.has(oe)||(c=c.add(oe),d.push(oe))})}))}).next(()=>d)}return q.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=sV(Xe.create(e.filters,"and")).map(r=>ap(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const b=t?this.fn(t[T/p]):af,R=this.gn(e,b,r[T%p],a),O=this.pn(e,b,l[T%p],c),B=d.map(L=>this.gn(e,b,L,!0));_.push(...this.createRange(R,O,B))}return _}gn(e,t,r,a){const l=new da(e,ce.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new da(e,ce.empty(),t,r);return a?l.nn():l}An(e,t){const r=new y0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.dn(t);return q.forEach(a,l=>this.An(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new Ze(ht.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Nu;for(const a of la(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);fa.xt.At(l,c)}return r.Yt()}fn(e){const t=new Nu;return fa.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Nu;return fa.xt.At(Ea(this.databaseId,t),r.tn(function(l){const c=la(l);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Nu);let l=0;for(const c of la(e)){const d=r[l++];for(const m of a)if(this.Sn(t,c.fieldPath)&&sc(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);fa.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Nu;m.seed(d.Yt()),fa.xt.At(c,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof Ue&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ou(e),a=No(e);return(t?r.G(Wg,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const c=[];return q.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const b=T?new Wu(T.sequenceNumber,new Un(Sa(T.readTime),new ce(Cr(T.documentKey)),T.largestBatchId)):Wu.empty(),R=_.fields.map(([O,B])=>new df(ht.fromServerFormat(O),B));return new If(_.indexId,_.collectionGroup,R,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Ou(e),l=No(e);return this.vn(e).next(c=>a.G(Wg,IDBKeyRange.bound(t,t)).next(d=>q.forEach(d,m=>l.put(f0(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?q.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),q.forEach(d,m=>this.Cn(e,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?q.resolve():this.Mn(e,l,m,p,_)}))))})}xn(e,t,r,a){return Vo(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Vo(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Vo(e);let l=new Ze(es);return a.Z({index:hb,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{l=l.add(new da(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new Ze(es);const a=this.yn(t,e);if(a==null)return r;const l=Xg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(sc(c))for(const d of c.arrayValue.values||[])r=r.add(new da(t.indexId,e.key,this.fn(d),a))}else r=r.add(new da(t.indexId,e.key,af,a));return r}Mn(e,t,r,a,l){se(v0,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,_,T,b){const R=m.getIterator(),O=p.getIterator();let B=xo(R),L=xo(O);for(;B||L;){let G=!1,J=!1;if(B&&L){const X=_(B,L);X<0?J=!0:X>0&&(G=!0)}else B!=null?J=!0:G=!0;G?(T(L),L=xo(O)):J?(b(B),B=xo(R)):(B=xo(R),L=xo(O))}}(a,l,es,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),q.waitFor(c)}vn(e){let t=1;return No(e).Z({index:cb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>es(c,d)).filter((c,d,m)=>!d||es(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=es(c,e),m=es(c,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,af,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,af,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return es(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(T0)}getMinOffset(e,t){return q.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ge())).next(T0)}}function E0(s){return qt(s,nc)}function Vo(s){return qt(s,Nf)}function Ou(s){return qt(s,qp)}function No(s){return qt(s,Vf)}function T0(s){ye(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;kp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Un(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mw=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(s,e,t){const r=s.store(cr),a=s.store(Ko),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:c},(_,T,b)=>(d++,b.delete()));l.push(m.next(()=>{ye(d===1)}));const p=[];for(const _ of t.mutations){const T=ob(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return q.waitFor(l).next(()=>p)}function kf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ge();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(mw,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class sd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){ye(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new sd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).Z({index:ga,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=ko(e),c=ts(e);return c.add({}).next(d=>{ye(typeof d=="number");const m=new Zp(d,t,r,a),p=function(R,O,B){const L=B.baseMutations.map(J=>lc(R.Tt,J)),G=B.mutations.map(J=>lc(R.Tt,J));return{userId:O,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:L,mutations:G}}(this.serializer,this.userId,m),_=[];let T=new Ze((b,R)=>Re(b.canonicalString(),R.canonicalString()));for(const b of a){const R=ob(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(p)),_.push(l.put(R,qx))}return T.forEach(b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),q.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return ts(e).get(t).next(r=>r?(ye(r.userId===this.userId),ha(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?q.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ts(e).Z({index:ga,range:a},(c,d,m)=>{d.userId===this.userId&&(ye(d.batchId>=r),l=ha(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=us;return ts(e).Z({index:ga,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,us],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).G(ga,t).next(r=>r.map(a=>ha(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return ko(e).Z({range:a},(c,d,m)=>{const[p,_,T]=c,b=Cr(_);if(p===this.userId&&t.path.isEqual(b))return ts(e).get(T).next(R=>{if(!R)throw ge();ye(R.userId===this.userId),l.push(ha(this.serializer,R))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(Re);const a=[];return t.forEach(l=>{const c=mf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=ko(e).Z({range:d},(p,_,T)=>{const[b,R,O]=p,B=Cr(R);b===this.userId&&l.path.isEqual(B)?r=r.add(O):T.done()});a.push(m)}),q.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=mf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Ze(Re);return ko(e).Z({range:c},(m,p,_)=>{const[T,b,R]=m,O=Cr(b);T===this.userId&&r.isPrefixOf(O)?O.length===a&&(d=d.add(R)):_.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(ts(e).get(l).next(c=>{if(c===null)throw ge();ye(c.userId===this.userId),r.push(ha(this.serializer,c))}))}),q.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return gw(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),q.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return ko(e).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Cr(l[1]);a.push(m)}else d.done()}).next(()=>{ye(a.length===0)})})}containsKey(e,t){return pw(e,this.userId,t)}Qn(e){return yw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:us,lastStreamToken:""})}}function pw(s,e,t){const r=mf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return ko(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function ts(s){return qt(s,cr)}function ko(s){return qt(s,Ko)}function yw(s){return qt(s,ec)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ra(0)}static Kn(){return new Ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Ra(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Ee.fromTimestamp(new dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oo(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Oo(e).Z((c,d)=>{const m=qu(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>q.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Oo(e).Z((r,a)=>{const l=qu(a);t(l)})}Wn(e){return b0(e).get(Cf).next(t=>(ye(t!==null),t))}Gn(e,t){return b0(e).put(Cf,t)}zn(e,t){return Oo(e).put(hw(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ta(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Oo(e).Z({range:a,index:ub},(c,d,m)=>{const p=qu(d);Ec(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=is(e);return t.forEach(c=>{const d=un(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),q.waitFor(a)}removeMatchingKeys(e,t,r){const a=is(e);return q.forEach(t,l=>{const c=un(l.path);return q.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=is(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=is(e);let l=xe();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Cr(c[1]),_=new ce(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=un(t.path),a=IDBKeyRange.bound([r],[eb(r)],!1,!0);let l=0;return is(e).Z({index:zp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Oo(e).get(t).next(r=>r?qu(r):null)}}function Oo(s){return qt(s,$o)}function b0(s){return qt(s,_a)}function is(s){return qt(s,Yo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="LruGarbageCollector",uV=1048576;function S0([s,e],[t,r]){const a=Re(s,t);return a===0?Re(e,r):a}class cV{constructor(e){this.Hn=e,this.buffer=new Ze(S0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();S0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _w{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(w0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bs(t)?se(w0,"Ignoring IndexedDB error during garbage collection: ",t):await As(t)}await this.er(3e5)})}}class hV{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(An.ae);const r=new cV(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(A0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),Mo()<=ke.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function vw(s,e){return new hV(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.db=e,this.garbageCollector=vw(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return of(e,r)}removeReference(e,t,r){return of(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return of(e,t)}ar(e,t){return function(a,l){let c=!1;return yw(a).X(d=>pw(a,d,l).next(m=>(m&&(c=!0),q.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(c,d)=>{if(d<=t){const m=this.ar(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ee.min()),is(e).delete(function(T){return[0,un(T.path)]}(c))))});a.push(m)}}).next(()=>q.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return of(e,t)}_r(e,t){const r=is(e);let a,l=An.ae;return r.Z({index:zp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==An.ae&&t(new ce(Cr(a)),l),l=p,a=m):l=An.ae}).next(()=>{l!==An.ae&&t(new ce(Cr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function of(s,e){return is(s).put(function(r,a){return{targetId:0,path:un(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.changes=new Ti(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return aa(e).put(r)}removeEntry(e,t,r){return aa(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Lf(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=ot.newInvalidDocument(t);return aa(e).Z({index:gf,range:IDBKeyRange.only(Mu(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:ot.newInvalidDocument(t)};return aa(e).Z({index:gf,range:IDBKeyRange.only(Mu(t))},(a,l)=>{r={document:this.cr(t,l),size:kf(l)}}).next(()=>r)}getEntries(e,t){let r=wn();return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(e,t){let r=wn(),a=new at(ce.comparator);return this.hr(e,t,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,kf(c))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return q.resolve();let a=new Ze(D0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Mu(a.first()),Mu(a.last())),c=a.getIterator();let d=c.getNext();return aa(e).Z({index:gf,range:l},(m,p,_)=>{const T=ce.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&D0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(Mu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=wn();for(const T of p){const b=this.cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(Ac(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=wn();const c=I0(t,r),d=I0(t,Un.max());return aa(e).Z({index:lb,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new mV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return R0(e).get(Zg).next(t=>(ye(!!t),t))}ur(e,t){return R0(e).put(Zg,t)}cr(e,t){if(t){const r=WC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return ot.newInvalidDocument(e)}}function Tw(s){return new dV(s)}class mV extends Ew{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new Ti(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Ze((l,c)=>Re(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=c0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=kf(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=c0(this.Ir.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function R0(s){return qt(s,tc)}function aa(s){return qt(s,xf)}function Mu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function I0(s,e){const t=e.documentKey.path.toArray();return[s,Lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function D0(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Re(t[l],r[l]),a)return a;return a=Re(t.length,r.length),a||(a=Re(t[t.length-2],r[r.length-2]),a||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Qu(r.mutation,a,bn.empty(),dt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){const a=Vr();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=Bu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Vr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=wn();const c=Hu(),d=function(){return Hu()}();return t.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Ai)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Qu(_.mutation,p,_.mutation.getFieldMask(),dt.now())):c.set(p.key,bn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new gV(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Hu();let a=new at((c,d)=>c-d),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||bn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||xe()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Bb();_.forEach(b=>{if(!l.has(b)){const R=Qb(t.get(b),r.get(b));R!==null&&T.set(b,R),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return q.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):q.resolve(Vr());let d=Qo,m=l;return c.next(p=>q.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{m=m.insert(_,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,xe())).next(_=>({batchId:d,changes:kb(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let a=Bu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Bu();return this.indexManager.getCollectionParents(e,l).next(d=>q.forEach(d,m=>{const p=function(T,b){return new Ei(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,ot.newInvalidDocument(_)))});let d=Bu();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&Qu(_.mutation,p,bn.empty(),dt.now()),Ac(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return q.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:It(a.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:ny(a.bundledQuery),readTime:It(a.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.overlays=new at(ce.comparator),this.Rr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vr();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const a=Vr(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return q.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new at((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Vr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Vr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return q.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Jp(t,r));let l=this.Rr.get(t);l===void 0&&(l=xe(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Vr=new Ze(Kt.mr),this.gr=new Ze(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Kt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new ce(new Le([])),r=new Kt(t,e),a=new Kt(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ce(new Le([])),r=new Kt(t,e),a=new Kt(t,e+1);let l=xe();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Kt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ce.comparator(e.key,t.key)||Re(e.Cr,t.Cr)}static pr(e,t){return Re(e.Cr,t.Cr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ze(Kt.mr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Zp(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new Kt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return q.resolve(c)}lookupMutationBatch(e,t){return q.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?us:this.Fr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),a=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(Re);return t.forEach(a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),q.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new ce(l),0);let d=new Ze(Re);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),q.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ye(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return q.forEach(t.mutations,a=>{const l=new Kt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Kt(t,0),a=this.Mr.firstAfterOrEqual(r);return q.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.kr=e,this.docs=function(){return new at(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(t))}getEntries(e,t){let r=wn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ot.newInvalidDocument(a))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=wn();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||kp(nb(_),r)<=0||(a.has(_.key)||Ac(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ge()}qr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TV(this)}getSize(e){return q.resolve(this.size)}}class TV extends Ew{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.persistence=e,this.Qr=new Ti(t=>Ta(t),Ec),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.$r=0,this.Ur=new sy,this.targetCount=0,this.Kr=Ra.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),q.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Ra(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.zn(t),q.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),q.waitFor(l).next(()=>a)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new An(0),this.zr=!1,this.zr=!0,this.jr=new _V,this.referenceDelegate=e(this),this.Hr=new AV(this),this.indexManager=new aV,this.remoteDocumentCache=function(a){return new EV(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new cw(t),this.Yr=new pV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new vV(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new bV(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return q.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class bV extends ib{constructor(e){super(),this.currentSequenceNumber=e}}class ad{constructor(e){this.persistence=e,this.ti=new sy,this.ni=null}static ri(e){return new ad(e)}get ii(){if(this.ni)return this.ni;throw ge()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),q.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ii,r=>{const a=ce.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,Ee.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return q.or([()=>q.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Bf{constructor(e,t){this.persistence=e,this.oi=new Ti(r=>un(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=vw(this,t)}static ri(e,t){return new Bf(e,t)}Zr(){}Xr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return q.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?q.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,Ee.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yf(e.data.value)),t}ar(e,t,r){return q.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return q.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Yf("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(vc)}(e),function(m){m.createObjectStore(ec,{keyPath:zx}),m.createObjectStore(cr,{keyPath:zT,autoIncrement:!0}).createIndex(ga,qT,{unique:!0}),m.createObjectStore(Ko)}(e),x0(e),function(m){m.createObjectStore(ua)}(e));let c=q.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(Yo),m.deleteObjectStore($o),m.deleteObjectStore(_a)}(e),x0(e)),c=c.next(()=>function(m){const p=m.store(_a),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(Cf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(cr).G().next(T=>{m.deleteObjectStore(cr),m.createObjectStore(cr,{keyPath:zT,autoIncrement:!0}).createIndex(ga,qT,{unique:!0});const b=p.store(cr),R=T.map(O=>b.put(O));return q.waitFor(R)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(Xo,{keyPath:Yx})})(e)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(tc)}(e),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Xf,{keyPath:Xx})})(e),function(m){m.createObjectStore(Zf,{keyPath:Zx})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(Wf,{keyPath:iC});p.createIndex(Jg,sC,{unique:!1}),p.createIndex(fb,aC,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(xf,{keyPath:jx});p.createIndex(gf,Fx),p.createIndex(lb,Gx)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(ua))),r<14&&a>=14&&(c=c.next(()=>this.Pi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(qp,{keyPath:Wx,autoIncrement:!0}).createIndex(Wg,Jx,{unique:!1}),m.createObjectStore(Vf,{keyPath:eC}).createIndex(cb,tC,{unique:!1}),m.createObjectStore(Nf,{keyPath:nC}).createIndex(hb,rC,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Vf).clear()}).next(()=>{t.objectStore(Nf).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(jp,{keyPath:oC})})(e)})),c}ai(e){let t=0;return e.store(ua).Z((r,a)=>{t+=kf(a)}).next(()=>{const r={byteSize:t};return e.store(tc).put(Zg,r)})}_i(e){const t=e.store(ec),r=e.store(cr);return t.G().next(a=>q.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,us],[l.userId,l.lastAcknowledgedBatchId]);return r.G(ga,c).next(d=>q.forEach(d,m=>{ye(m.userId===l.userId);const p=ha(this.serializer,m);return gw(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Yo),r=e.store(ua);return e.store(_a).get(Cf).next(a=>{const l=[];return r.Z((c,d)=>{const m=new Le(c),p=function(T){return[0,un(T)]}(m);l.push(t.get(p).next(_=>_?q.resolve():(T=>t.put({targetId:0,path:un(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>q.waitFor(l))})}ci(e,t){e.createObjectStore(nc,{keyPath:$x});const r=t.store(nc),a=new iy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:un(m)})}};return t.store(ua).Z({Y:!0},(c,d)=>{const m=new Le(c);return l(m.popLast())}).next(()=>t.store(Ko).Z({Y:!0},([c,d,m],p)=>{const _=Cr(d);return l(_.popLast())}))}li(e){const t=e.store($o);return t.Z((r,a)=>{const l=qu(a),c=hw(this.serializer,l);return t.put(c)})}hi(e,t){const r=t.store(ua),a=[];return r.Z((l,c)=>{const d=t.store(xf),m=function(T){return T.document?new ce(Le.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):ge()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>q.waitFor(a))}Pi(e,t){const r=t.store(cr),a=Tw(this.serializer),l=new ay(ad.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:xe();ha(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),q.forEach(d,(m,p)=>{const _=new $t(p),T=id.It(this.serializer,_),b=l.getIndexManager(_),R=sd.It(_,this.serializer,b,l.referenceDelegate);return new Aw(a,R,T,b).recalculateAndSaveOverlaysForDocumentKeys(new ep(t,An.ae),m).next()})})}}function x0(s){s.createObjectStore(Yo,{keyPath:Qx}).createIndex(zp,Kx,{unique:!0}),s.createObjectStore($o,{keyPath:"targetId"}).createIndex(ub,Hx,{unique:!0}),s.createObjectStore(_a)}const ns="IndexedDbPersistence",Pg=18e5,Lg=5e3,Ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bw="main";class oy{constructor(e,t,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!oy.D())throw new ie($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fV(this,a),this.gi=t+bw,this.serializer=new cw(m),this.pi=new Nr(this.gi,this.di,new wV(this.serializer)),this.jr=new eV,this.Hr=new lV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tw(this.serializer),this.Yr=new JC,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&Rt(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie($.FAILED_PRECONDITION,Ug);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new An(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(bs(e))return se(ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Pu(e).get(Do).next(t=>q.resolve(this.Ni(t)))}Bi(e){return lf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Pg)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=qt(t,Xo);return r.G().next(a=>{const l=this.qi(a,Pg),c=a.filter(d=>l.indexOf(d)===-1);return q.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?q.resolve(!0):Pu(e).get(Do).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ie($.FAILED_PRECONDITION,Ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||lf(e).G().next(r=>this.qi(r,Lg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(ns,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[vc,Xo],e=>{const t=new ep(e,An.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>lf(e).G().next(t=>this.qi(t,Pg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return sd.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oV(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return id.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){se(ns,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?cC:m===16?uC:m===15?Fp:m===14?gb:m===13?mb:m===12?lC:m===11?db:void ge()}(this.di);let c;return this.pi.runTransaction(e,a,l,d=>(c=new ep(d,this.Gr?this.Gr.next():An.ae),t==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ie($.FAILED_PRECONDITION,rb);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return Pu(e).get(Do).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie($.FAILED_PRECONDITION,Ug)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(Do,t)}static D(){return Nr.D()}xi(e){const t=Pu(e);return t.get(Do).next(r=>this.Ni(r)?(se(ns,"Releasing primary lease."),t.delete(Do)):q.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;CA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt(ns,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(s){return qt(s,vc)}function lf(s){return qt(s,Xo)}function ly(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=xe(),a=xe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new uy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return CA()?8:sb(Sf())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new SV;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(Mo()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),q.resolve()):(Mo()<=ke.DEBUG&&se("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Mo()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(t))):q.resolve())}rs(e,t){if(e0(t))return q.resolve(null);let r=yn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Pf(t,null,"F"),r=yn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=xe(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Pf(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return e0(t)||a.isEqual(Ee.min())?q.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?q.resolve(null):(Mo()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Po(t)),this.hs(e,c,t,tb(a,Qo)).next(d=>d))})}cs(e,t){let r=new Ze(Lb(e));return t.forEach((a,l)=>{Ac(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return Mo()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Po(t)),this.ns.getDocumentsMatchingQuery(e,t,Un.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",RV=3e8;class IV{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new at(Re),this.Is=new Ti(l=>Ta(l),Ec),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Aw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Sw(s,e,t,r){return new IV(s,e,t,r)}async function Rw(s,e){const t=de(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=xe();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function DV(s,e){const t=de(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,b=T.keys();let R=q.resolve();return b.forEach(O=>{R=R.next(()=>_.getEntry(m,O)).next(B=>{const L=p.docVersions.get(O);ye(L!==null),B.version.compareTo(L)<0&&(T.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=xe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Iw(s){const e=de(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function xV(s,e){const t=de(s),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,T)));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Tt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(T,R),function(B,L,G){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=RV?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(b,R,_)&&d.push(t.Hr.updateTargetData(l,R))});let m=wn(),p=xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(Dw(l,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(Ee.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return q.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function Dw(s,e,t){let r=xe(),a=xe();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=wn();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(cy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function CV(s,e){const t=de(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=us),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rl(s,e){const t=de(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,q.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new hi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function il(s,e,t){const r=de(s),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!bs(c))throw c;se(cy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function zf(s,e,t){const r=de(s);let a=Ee.min(),l=xe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=de(m),b=T.Is.get(_);return b!==void 0?q.resolve(T.Ts.get(b)):T.Hr.getTargetData(p,_)}(r,c,yn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:xe())).next(d=>(Vw(r,Pb(e),d),{documents:d,gs:l})))}function xw(s,e){const t=de(s),r=de(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(c=>c?c.target:null))}function Cw(s,e){const t=de(s),r=t.Es.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,tb(r,Qo),Number.MAX_SAFE_INTEGER)).then(a=>(Vw(t,e,a),a))}function Vw(s,e,t){let r=s.Es.get(e)||Ee.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(e,r)}async function VV(s,e,t,r){const a=de(s);let l=xe(),c=wn();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const T=e.ys(p);T.setReadTime(e.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await rl(a,function(_){return yn(dl(Le.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>Dw(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function NV(s,e,t=xe()){const r=await rl(s,yn(ny(e.bundledQuery))),a=de(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=It(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(Tt.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="firestore_clients";function C0(s,e){return`${Nw}_${s}_${e}`}const Ow="firestore_mutations";function V0(s,e,t){let r=`${Ow}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Mw="firestore_targets";function kg(s,e){return`${Mw}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="SharedClientState";class qf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ie(a.error.code,a.error.message))),c?new qf(e,t,a.state,l):(Rt(xr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ie(r.error.code,r.error.message))),l?new Ku(e,r.state,a):(Rt(xr,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=$p();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=ab(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new jf(e,l):(Rt(xr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class hy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new hy(t.clientId,t.onlineState):(Rt(xr,`Failed to parse online state: ${e}`),null)}}class gp{constructor(){this.activeTargetIds=$p()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new at(Re),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=C0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new gp),this.Ls=new RegExp(`^${Nw}_${c}_([^_]*)$`),this.ks=new RegExp(`^${Ow}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Mw}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(C0(this.persistenceKey,r));if(a){const l=jf.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(kg(this.persistenceKey,e));if(a){const l=Ku.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(xr,"READ",e,t),t}setItem(e,t){se(xr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(xr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(xr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let c=An.ae;if(l!=null)try{const d=JSON.parse(l);ye(typeof d=="number"),c=d}catch(d){Rt(xr,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==An.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new qf(this.currentUser,e,t,r),l=V0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=V0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=kg(this.persistenceKey,e),l=new Ku(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return jf.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return qf.Ss(new $t(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return Ku.Ss(a,t)}Ks(e){return hy.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(xr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=$p();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Pw{constructor(){this.ho=new gp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new gp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="ConnectivityMonitor";class O0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(N0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(N0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf=null;function pp(){return uf===null?uf=function(){return 268435456+Math.round(2147483648*Math.random())}():uf++,"0x"+uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="RestConnection",MV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===tp?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=pp(),d=this.bo(e,t.toUriEncodedString());se(zg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(se(zg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Pr(zg,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=MV[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class UV extends PV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=pp();return new Promise((c,d)=>{const m=new KA;m.setWithCredentials(!0),m.listenOnce($A.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ff.NO_ERROR:const _=m.getResponseJson();se(on,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case ff.TIMEOUT:se(on,`RPC '${e}' ${l} timed out`),d(new ie($.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const T=m.getStatus();if(se(on,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b==null?void 0:b.error;if(R&&R.status&&R.message){const O=function(L){const G=L.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(G)>=0?G:$.UNKNOWN}(R.status);d(new ie(O,R.message))}else d(new ie($.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ie($.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{se(on,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);se(on,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=pp(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZA(),d=XA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");se(on,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let b=!1,R=!1;const O=new LV({Fo:L=>{R?se(on,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(b||(se(on,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),se(on,`RPC '${e}' stream ${a} sending:`,L),T.send(L))},Mo:()=>T.close()}),B=(L,G,J)=>{L.listen(G,X=>{try{J(X)}catch(fe){setTimeout(()=>{throw fe},0)}})};return B(T,ku.EventType.OPEN,()=>{R||(se(on,`RPC '${e}' stream ${a} transport opened.`),O.Qo())}),B(T,ku.EventType.CLOSE,()=>{R||(R=!0,se(on,`RPC '${e}' stream ${a} transport closed`),O.Uo())}),B(T,ku.EventType.ERROR,L=>{R||(R=!0,Pr(on,`RPC '${e}' stream ${a} transport errored:`,L),O.Uo(new ie($.UNAVAILABLE,"The operation could not be completed")))}),B(T,ku.EventType.MESSAGE,L=>{var G;if(!R){const J=L.data[0];ye(!!J);const X=J,fe=(X==null?void 0:X.error)||((G=X[0])===null||G===void 0?void 0:G.error);if(fe){se(on,`RPC '${e}' stream ${a} received error:`,fe);const oe=fe.status;let me=function(I){const V=Ot[I];if(V!==void 0)return Yb(V)}(oe),N=fe.message;me===void 0&&(me=$.INTERNAL,N="Unknown error status: "+oe+" with message "+fe.message),R=!0,O.Uo(new ie(me,N)),T.close()}else se(on,`RPC '${e}' stream ${a} received:`,J),O.Ko(J)}}),B(d,YA.STAT_EVENT,L=>{L.stat===$g.PROXY?se(on,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===$g.NOPROXY&&se(on,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){return typeof window<"u"?window:null}function Tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(s){return new jC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="PersistentStream";class Uw{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fy(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Rt(t.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ie($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(M0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(M0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kV extends Uw{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=HC(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?It(c.readTime):Ee.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=cp(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Of(m)?{documents:iw(l,m)}:{query:sw(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Wb(l,c.resumeToken);const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=nl(l,c.snapshotVersion.toTimestamp());const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=KC(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=cp(this.serializer),t.removeTarget=e,this.I_(t)}}class BV extends Uw{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=QC(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=cp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lc(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{}class qV extends zV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,up(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie($.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,up(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie($.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rt(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class FV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{Ss(this)&&(se(Ia,"Restarting streams for network reachability change."),await async function(m){const p=de(m);p.W_.add(4),await pl(p),p.j_.set("Unknown"),p.W_.delete(4),await Ic(p)}(this))})}),this.j_=new jV(r,a)}}async function Ic(s){if(Ss(s))for(const e of s.G_)await e(!0)}async function pl(s){for(const e of s.G_)await e(!1)}function od(s,e){const t=de(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),gy(t)?my(t):_l(t).c_()&&dy(t,e))}function sl(s,e){const t=de(s),r=_l(t);t.K_.delete(e),r.c_()&&kw(t,e),t.K_.size===0&&(r.c_()?r.P_():Ss(t)&&t.j_.set("Unknown"))}function dy(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(s).y_(e)}function kw(s,e){s.H_.Ne(e),_l(s).w_(e)}function my(s){s.H_=new kC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),_l(s).start(),s.j_.B_()}function gy(s){return Ss(s)&&!_l(s).u_()&&s.K_.size>0}function Ss(s){return de(s).W_.size===0}function Bw(s){s.H_=void 0}async function GV(s){s.j_.set("Online")}async function HV(s){s.K_.forEach((e,t)=>{dy(s,e)})}async function QV(s,e){Bw(s),gy(s)?(s.j_.q_(e),my(s)):s.j_.set("Unknown")}async function KV(s,e,t){if(s.j_.set("Online"),e instanceof Zb&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,e)}catch(r){se(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ff(s,r)}else if(e instanceof Ef?s.H_.We(e):e instanceof Xb?s.H_.Ze(e):s.H_.je(e),!t.isEqual(Ee.min()))try{const r=await Iw(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(Tt.EMPTY_BYTE_STRING,_.snapshotVersion)),kw(l,m);const T=new hi(_.target,m,p,_.sequenceNumber);dy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){se(Ia,"Failed to raise snapshot:",r),await Ff(s,r)}}async function Ff(s,e,t){if(!bs(e))throw e;s.W_.add(1),await pl(s),s.j_.set("Offline"),t||(t=()=>Iw(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{se(Ia,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await Ic(s)})}function zw(s,e){return e().catch(t=>Ff(s,t,e))}async function yl(s){const e=de(s),t=_s(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:us;for(;$V(e);)try{const a=await CV(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,YV(e,a)}catch(a){await Ff(e,a)}qw(e)&&jw(e)}function $V(s){return Ss(s)&&s.U_.length<10}function YV(s,e){s.U_.push(e);const t=_s(s);t.c_()&&t.S_&&t.b_(e.mutations)}function qw(s){return Ss(s)&&!_s(s).u_()&&s.U_.length>0}function jw(s){_s(s).start()}async function XV(s){_s(s).C_()}async function ZV(s){const e=_s(s);for(const t of s.U_)e.b_(t.mutations)}async function WV(s,e,t){const r=s.U_.shift(),a=Wp.from(r,e,t);await zw(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await yl(s)}async function JV(s,e){e&&_s(s).S_&&await async function(r,a){if(function(c){return $b(c)&&c!==$.ABORTED}(a.code)){const l=r.U_.shift();_s(r).h_(),await zw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await yl(r)}}(s,e),qw(s)&&jw(s)}async function P0(s,e){const t=de(s);t.asyncQueue.verifyOperationInProgress(),se(Ia,"RemoteStore received new credentials");const r=Ss(t);t.W_.add(3),await pl(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ic(t)}async function yp(s,e){const t=de(s);e?(t.W_.delete(2),await Ic(t)):e||(t.W_.add(2),await pl(t),t.j_.set("Unknown"))}function _l(s){return s.J_||(s.J_=function(t,r,a){const l=de(t);return l.M_(),new kV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:GV.bind(null,s),No:HV.bind(null,s),Lo:QV.bind(null,s),p_:KV.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),gy(s)?my(s):s.j_.set("Unknown")):(await s.J_.stop(),Bw(s))})),s.J_}function _s(s){return s.Y_||(s.Y_=function(t,r,a){const l=de(t);return l.M_(),new BV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:XV.bind(null,s),Lo:JV.bind(null,s),D_:ZV.bind(null,s),v_:WV.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await yl(s)):(await s.Y_.stop(),s.U_.length>0&&(se(Ia,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new py(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vl(s,e){if(Rt("AsyncQueue",`${e}: ${s}`),bs(s))return new ie($.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=Bu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.Z_=new at(ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ge():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class al{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new al(e,t,zo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class t2{constructor(){this.queries=U0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=de(t),l=a.queries;a.queries=U0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new ie($.ABORTED,"Firestore shutting down"))}}function U0(){return new Ti(s=>Mb(s),Tc)}async function yy(s,e){const t=de(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new e2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=vl(c,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&vy(t)}async function _y(s,e){const t=de(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function n2(s,e){const t=de(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&vy(t)}function r2(s,e,t){const r=de(s),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function vy(s){s.ia.forEach(e=>{e.next()})}var _p,k0;(k0=_p||(_p={}))._a="default",k0.Cache="cache";class Ey{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.serializer=e}ps(e){return Or(this.serializer,e)}ys(e){return e.metadata.exists?rw(this.serializer,e.document,!1):ot.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return It(e)}}class s2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Fw(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Le.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new B0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||xe()).add(l);t.set(c,d)}}return t}async complete(){const e=await VV(this.localStore,new B0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await NV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function Fw(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.key=e}}class Hw{constructor(e){this.key=e}}class Qw{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=xe(),this.mutatedKeys=xe(),this.ya=Lb(e),this.wa=new zo(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new L0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const b=a.get(_),R=Ac(this.query,T)?T:null,O=!!b&&this.mutatedKeys.has(b.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;b&&R?b.data.isEqual(R.data)?O!==B&&(r.track({type:3,doc:R}),L=!0):this.va(b,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.ya(R,m)>0||p&&this.ya(R,p)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),L=!0):b&&!R&&(r.track({type:1,doc:b}),L=!0,(m||p)&&(d=!0)),L&&(R?(c=c.add(R),l=B?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(R,O){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return B(R)-B(O)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new al(this.query,e.wa,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new L0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=xe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Hw(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Gw(r))}),t}Oa(e){this.fa=e.gs,this.pa=xe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return al.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Rs="SyncEngine";class a2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o2{constructor(e){this.key=e,this.Ba=!1}}class l2{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new Ti(d=>Mb(d),Tc),this.qa=new Map,this.Qa=new Set,this.$a=new at(ce.comparator),this.Ua=new Map,this.Ka=new sy,this.Wa={},this.Ga=new Map,this.za=Ra.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function u2(s,e,t=!0){const r=ld(s);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await Kw(r,e,t,!0),a}async function c2(s,e){const t=ld(s);await Kw(t,e,!0,!1)}async function Kw(s,e,t,r){const a=await rl(s.localStore,yn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Ty(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&od(s.remoteStore,a),d}async function Ty(s,e,t,r,a){s.Ha=(T,b,R)=>async function(B,L,G,J){let X=L.view.ba(G);X.ls&&(X=await zf(B.localStore,L.query,!1).then(({documents:N})=>L.view.ba(N,X)));const fe=J&&J.targetChanges.get(L.targetId),oe=J&&J.targetMismatches.get(L.targetId)!=null,me=L.view.applyChanges(X,B.isPrimaryClient,fe,oe);return vp(B,L.targetId,me.Ma),me.snapshot}(s,T,b,R);const l=await zf(s.localStore,e,!0),c=new Qw(e,l.gs),d=c.ba(l.documents),m=Sc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);vp(s,t,p.Ma);const _=new a2(e,t,c);return s.ka.set(e,_),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function h2(s,e,t){const r=de(s),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!Tc(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await il(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&sl(r.remoteStore,a.targetId),ol(r,a.targetId)}).catch(As)):(ol(r,a.targetId),await il(r.localStore,a.targetId,!0))}async function f2(s,e){const t=de(s),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sl(t.remoteStore,r.targetId))}async function d2(s,e,t){const r=Sy(s);try{const a=await function(c,d){const m=de(c),p=dt.now(),_=d.reduce((R,O)=>R.add(O.key),xe());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let O=wn(),B=xe();return m.ds.getEntries(R,_).next(L=>{O=L,O.forEach((G,J)=>{J.isValidDocument()||(B=B.add(G))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,O)).next(L=>{T=L;const G=[];for(const J of d){const X=PC(J,T.get(J.key).overlayedDocument);X!=null&&G.push(new Ai(J.key,X,Sb(X.value.mapValue),ft.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,G,d)}).next(L=>{b=L;const G=L.applyToLocalDocumentSet(T,B);return m.documentOverlayCache.saveOverlays(R,L.batchId,G)})}).then(()=>({batchId:b.batchId,changes:kb(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new at(Re)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,t),await bi(r,a.changes),await yl(r.remoteStore)}catch(a){const l=vl(a,"Failed to persist write");t.reject(l)}}async function $w(s,e){const t=de(s);try{const r=await xV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(ye(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?ye(c.Ba):a.removedDocuments.size>0&&(ye(c.Ba),c.Ba=!1))}),await bi(t,r,e)}catch(r){await As(r)}}function z0(s,e,t){const r=de(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=de(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const b of T.ta)b.sa(d)&&(p=!0)}),p&&vy(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m2(s,e,t){const r=de(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new at(ce.comparator);c=c.insert(l,ot.newNoDocument(l,Ee.min()));const d=xe().add(l),m=new wc(Ee.min(),new Map,new at(Re),c,d);await $w(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),wy(r)}else await il(r.localStore,e,!1).then(()=>ol(r,e,t)).catch(As)}async function g2(s,e){const t=de(s),r=e.batch.batchId;try{const a=await DV(t.localStore,e);by(t,r,null),Ay(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bi(t,a)}catch(a){await As(a)}}async function p2(s,e,t){const r=de(s);try{const a=await function(c,d){const m=de(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(ye(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);by(r,e,t),Ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bi(r,a)}catch(a){await As(a)}}async function y2(s,e){const t=de(s);Ss(t.remoteStore)||se(Rs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=de(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===us)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=vl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Ay(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function by(s,e,t){const r=de(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function ol(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.qa.get(e))s.ka.delete(r),t&&s.La.Ja(r,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(r=>{s.Ka.containsKey(r)||Yw(s,r)})}function Yw(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(sl(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),wy(s))}function vp(s,e,t){for(const r of t)r instanceof Gw?(s.Ka.addReference(r.key,e),_2(s,r)):r instanceof Hw?(se(Rs,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,e),s.Ka.containsKey(r.key)||Yw(s,r.key)):ge()}function _2(s,e){const t=e.key,r=t.path.canonicalString();s.$a.get(t)||s.Qa.has(r)||(se(Rs,"New document in limbo: "+t),s.Qa.add(r),wy(s))}function wy(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new ce(Le.fromString(e)),r=s.za.next();s.Ua.set(r,new o2(t)),s.$a=s.$a.insert(t,r),od(s.remoteStore,new hi(yn(dl(t.path)),r,"TargetPurposeLimboResolution",An.ae))}}async function bi(s,e,t){const r=de(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=uy.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=de(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>q.forEach(p,b=>q.forEach(b.Hi,R=>_.persistence.referenceDelegate.addReference(T,b.targetId,R)).next(()=>q.forEach(b.Ji,R=>_.persistence.referenceDelegate.removeReference(T,b.targetId,R)))))}catch(T){if(!bs(T))throw T;se(cy,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const R=_.Ts.get(b),O=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(O);_.Ts=_.Ts.insert(b,B)}}}(r.localStore,l))}async function v2(s,e){const t=de(s);if(!t.currentUser.isEqual(e)){se(Rs,"User change. New user:",e.toKey());const r=await Rw(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ie($.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bi(t,r.Rs)}}function E2(s,e){const t=de(s),r=t.Ua.get(e);if(r&&r.Ba)return xe().add(r.key);{let a=xe();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function T2(s,e){const t=de(s),r=await zf(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&vp(t,e.targetId,a.Ma),a}async function A2(s,e){const t=de(s);return Cw(t.localStore,e).then(r=>bi(t,r))}async function b2(s,e,t,r){const a=de(s),l=await function(d,m){const p=de(d),_=de(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):q.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await yl(a.remoteStore):t==="acknowledged"||t==="rejected"?(by(a,e,r||null),Ay(a,e),function(d,m){de(de(d).mutationQueue).qn(m)}(a.localStore,e)):ge(),await bi(a,l)):se(Rs,"Cannot apply mutation batch with id: "+e)}async function w2(s,e){const t=de(s);if(ld(t),Sy(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await q0(t,r.toArray());t.ja=!0,await yp(t.remoteStore,!0);for(const l of a)od(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(ol(t,c),il(t.localStore,c,!0))),sl(t.remoteStore,c)}),await a,await q0(t,r),function(c){const d=de(c);d.Ua.forEach((m,p)=>{sl(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new at(ce.comparator)}(t),t.ja=!1,await yp(t.remoteStore,!1)}}async function q0(s,e,t){const r=de(s),a=[],l=[];for(const c of e){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await rl(r.localStore,yn(m[0]));for(const p of m){const _=r.ka.get(p),T=await T2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await xw(r.localStore,c);d=await rl(r.localStore,p),await Ty(r,Xw(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function Xw(s){return Ob(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function S2(s){return function(t){return de(de(t).persistence).zi()}(de(s).localStore)}async function R2(s,e,t,r){const a=de(s);if(a.ja)return void se(Rs,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Cw(a.localStore,Pb(l[0])),d=wc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);await bi(a,c,d);break}case"rejected":await il(a.localStore,e,!0),ol(a,e,r);break;default:ge()}}async function I2(s,e,t){const r=ld(s);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(Rs,"Adding an already active target "+a);continue}const l=await xw(r.localStore,a),c=await rl(r.localStore,l);await Ty(r,Xw(l),c.targetId,!1,c.resumeToken),od(r.remoteStore,c)}for(const a of t)r.qa.has(a)&&await il(r.localStore,a,!1).then(()=>{sl(r.remoteStore,a),ol(r,a)}).catch(As)}}function ld(s){const e=de(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m2.bind(null,e),e.La.p_=n2.bind(null,e.eventManager),e.La.Ja=r2.bind(null,e.eventManager),e}function Sy(s){const e=de(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p2.bind(null,e),e}function D2(s,e,t){const r=de(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(R,O){const B=de(R),L=It(O.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",G=>B.Yr.getBundleMetadata(G,O.id)).then(G=>!!G&&G.createTime.compareTo(L)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(Fw(m));const p=new s2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const b=await p.Aa(_);b&&d._updateProgress(b),_=await c.Ya()}const T=await p.complete();return await bi(l,T.ma,void 0),await function(R,O){const B=de(R);return B.persistence.runTransaction("Save bundle","readwrite",L=>B.Yr.saveBundleMetadata(L,O))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return Pr(Rs,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Sw(this.persistence,new ww,e.initialUser,this.serializer)}Xa(e){return new ay(ad.ri,this.serializer)}Za(e){return new Pw}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class x2 extends uc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ye(this.persistence.referenceDelegate instanceof Bf);const r=this.persistence.referenceDelegate.garbageCollector;return new _w(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new ay(r=>Bf.ri(r,t),this.serializer)}}class Zw extends uc{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Sy(this.ru.syncEngine),await yl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return Sw(this.persistence,new ww,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new _w(r,e.asyncQueue,t)}nu(e,t){const r=new kx(t,this.persistence);return new Ux(e.asyncQueue,r)}Xa(e){const t=ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new oy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lw(),Tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Pw}}class C2 extends Zw{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={uo:b2.bind(null,t),co:R2.bind(null,t),lo:I2.bind(null,t),zi:S2.bind(null,t),ao:A2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await w2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=Lw();if(!Bg.D(t))throw new ie($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ly(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v2.bind(null,this.syncEngine),await yp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t2}()}createDatastore(e){const t=Rc(e.databaseInfo.databaseId),r=function(l){return new UV(l)}(e.databaseInfo);return function(l,c,d,m){return new qV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new FV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>z0(this.syncEngine,t,0),function(){return O0.D()?new O0:new OV}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new l2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=de(a);se(Ia,"RemoteStore shutting down."),l.W_.add(5),await pl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cc.provider={build:()=>new cc};function j0(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new nn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new i2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=de(a),d={documents:l.map(T=>oc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,Le.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=GC(c.serializer,T);p.set(b.key.toString(),b)});const _=[];return l.forEach(T=>{const b=p.get(T.toString());ye(!!b),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=ce.fromPath(r);this.mutations.push(new Xp(a,this.precondition(a)))}),await async function(r,a){const l=de(r),c={writes:a.map(d=>lc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Le.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge();t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ie($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?ft.exists(!1):ft.updateTime(t):ft.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new ie($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(t)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new fy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new N2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!_c(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$b(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class M2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=$t.UNAUTHENTICATED,this.clientId=JA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{se(vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(se(vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qg(s,e){s.asyncQueue.verifyOperationInProgress(),se(vs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Rw(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function F0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Ry(s);se(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>P0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>P0(e.remoteStore,a)),s._onlineComponents=e}async function Ry(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){se(vs,"Using user provided OfflineComponentProvider");try{await qg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Pr("Error using user provided cache. Falling back to memory cache: "+t),await qg(s,new uc)}}else se(vs,"Using default OfflineComponentProvider"),await qg(s,new x2(void 0));return s._offlineComponents}async function cd(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(se(vs,"Using user provided OnlineComponentProvider"),await F0(s,s._uninitializedComponentsProvider._online)):(se(vs,"Using default OnlineComponentProvider"),await F0(s,new cc))),s._onlineComponents}function Ww(s){return Ry(s).then(e=>e.persistence)}function Iy(s){return Ry(s).then(e=>e.localStore)}function Jw(s){return cd(s).then(e=>e.remoteStore)}function Dy(s){return cd(s).then(e=>e.syncEngine)}function P2(s){return cd(s).then(e=>e.datastore)}async function ll(s){const e=await cd(s),t=e.eventManager;return t.onListen=u2.bind(null,e.syncEngine),t.onUnlisten=h2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=f2.bind(null,e.syncEngine),t}function L2(s){return s.asyncQueue.enqueue(async()=>{const e=await Ww(s),t=await Jw(s);return e.setNetworkEnabled(!0),function(a){const l=de(a);return l.W_.delete(0),Ic(l)}(t)})}function U2(s){return s.asyncQueue.enqueue(async()=>{const e=await Ww(s),t=await Jw(s);return e.setNetworkEnabled(!1),async function(a){const l=de(a);l.W_.add(0),await pl(l),l.j_.set("Offline")}(t)})}function k2(s,e){const t=new nn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=de(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ie($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=vl(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await Iy(s),e,t)),t.promise}function eS(s,e,t={}){const r=new nn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new ud({next:b=>{_.su(),c.enqueueAndForget(()=>_y(l,T));const R=b.docs.has(d);!R&&b.fromCache?p.reject(new ie($.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&m&&m.source==="server"?p.reject(new ie($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Ey(dl(d.path),_,{includeMetadataChanges:!0,Ta:!0});return yy(l,T)}(await ll(s),s.asyncQueue,e,t,r)),r.promise}function B2(s,e){const t=new nn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await zf(a,l,!0),m=new Qw(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=vl(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await Iy(s),e,t)),t.promise}function tS(s,e,t={}){const r=new nn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new ud({next:b=>{_.su(),c.enqueueAndForget(()=>_y(l,T)),b.fromCache&&m.source==="server"?p.reject(new ie($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Ey(d,_,{includeMetadataChanges:!0,Ta:!0});return yy(l,T)}(await ll(s),s.asyncQueue,e,t,r)),r.promise}function z2(s,e){const t=new ud(e);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){de(a).ia.add(l),l.next()}(await ll(s),t)),()=>{t.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){de(a).ia.delete(l)}(await ll(s),t))}}function q2(s,e,t,r){const a=function(c,d){let m;return m=typeof c=="string"?Up().encode(c):c,function(_,T){return new V2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return j0(_,T);if(_ instanceof ArrayBuffer)return j0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Rc(e));s.asyncQueue.enqueueAndForget(async()=>{D2(await Dy(s),a,r)})}function j2(s,e){return s.asyncQueue.enqueue(async()=>function(r,a){const l=de(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await Iy(s),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(s,e,t){if(!t)throw new ie($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function rS(s,e,t,r){if(e===!0&&r===!0)throw new ie($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function H0(s){if(!ce.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Q0(s){if(ce.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function hd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ge()}function Ge(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hd(s);throw new ie($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function iS(s,e){if(e<=0)throw new ie($.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="firestore.googleapis.com",K0=!0;class $0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sS,this.ssl=K0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:K0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uV)throw new ie($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rx;switch(r.type){case"firstParty":return new Cx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=G0.get(t);r&&(se("ComponentProvider","Removing Datastore"),G0.delete(t),r.terminate())}(this),Promise.resolve()}}function F2(s,e,t,r={}){var a;const l=(s=Ge(s,Dc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==sS&&l.host!==d&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!qo(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=$t.MOCK_USER;else{p=Q1(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new $t(T)}s._authCredentials=new Ix(new WA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class aS{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aS(this.firestore,e,this._query)}},pt=class oS{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oS(this.firestore,e,this._key)}},cs=class lS extends _n{constructor(e,t,r){super(e,t,dl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ce(e))}withConverter(e){return new lS(this.firestore,e,this._path)}};function uS(s,e,...t){if(s=Mt(s),xy("collection","path",e),s instanceof Dc){const r=Le.fromString(e,...t);return Q0(r),new cs(s,null,r)}{if(!(s instanceof pt||s instanceof cs))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Le.fromString(e,...t));return Q0(r),new cs(s.firestore,null,r)}}function G2(s,e){if(s=Ge(s,Dc),xy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _n(s,null,function(r){return new Ei(Le.emptyPath(),r)}(e))}function Gf(s,e,...t){if(s=Mt(s),arguments.length===1&&(e=JA.newId()),xy("doc","path",e),s instanceof Dc){const r=Le.fromString(e,...t);return H0(r),new pt(s,null,new ce(r))}{if(!(s instanceof pt||s instanceof cs))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Le.fromString(e,...t));return H0(r),new pt(s.firestore,s instanceof cs?s.converter:null,new ce(r))}}function cS(s,e){return s=Mt(s),e=Mt(e),(s instanceof pt||s instanceof cs)&&(e instanceof pt||e instanceof cs)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function hS(s,e){return s=Mt(s),e=Mt(e),s instanceof _n&&e instanceof _n&&s.firestore===e.firestore&&Tc(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="AsyncQueue";class X0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fy(this,"async_queue_retry"),this.Su=()=>{const r=Tf();r&&se(Y0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Tf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Tf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new nn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!bs(e))throw e;se(Y0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=py.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ge()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ep(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class H2{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=-1;let Dt=class extends Dc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new X0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X0(e),this._firestoreClient=void 0,await e}}};function cn(s){if(s._terminated)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fS(s),s._firestoreClient}function fS(s){var e,t,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new dC(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,nS(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new M2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function K2(s,e){Pr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return dS(s,cc.provider,{build:r=>new Zw(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function $2(s){Pr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();dS(s,cc.provider,{build:t=>new C2(t,e.cacheSizeBytes)})}function dS(s,e,t){if((s=Ge(s,Dt))._firestoreClient||s._terminated)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ie($.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},fS(s)}function Y2(s){if(s._initialized&&!s._terminated)throw new ie($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nn;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Nr.D())return Promise.resolve();const a=r+bw;await Nr.delete(a)}(ly(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function X2(s){return function(t){const r=new nn;return t.asyncQueue.enqueueAndForget(async()=>y2(await Dy(t),r)),r.promise}(cn(s=Ge(s,Dt)))}function Z2(s){return L2(cn(s=Ge(s,Dt)))}function W2(s){return U2(cn(s=Ge(s,Dt)))}function J2(s,e){const t=cn(s=Ge(s,Dt)),r=new H2;return q2(t,s._databaseId,e,r),r}function eN(s,e){return j2(cn(s=Ge(s,Dt)),e).then(t=>t?new _n(s,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(Tt.fromBase64String(e))}catch(t){throw new ie($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ur(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=/^__.*__$/;class nN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new ml(e,this.data,t,this.fieldTransforms)}}class mS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class dd{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(gS(this.Lu)&&tN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class rN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Rc(e)}ju(e,t,r,a=!1){return new dd({Lu:e,methodName:t,zu:r,path:ht.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Na(s){const e=s._freezeSettings(),t=Rc(s._databaseId);return new rN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function md(s,e,t,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,e,t,a);Uy("Data must be an object, but it was:",c,r);const d=_S(r,c);let m,p;if(l.merge)m=new bn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=Tp(e,T,t);if(!c.contains(b))throw new ie($.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ES(_,b)||_.push(b)}m=new bn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new nN(new tn(d),m,p)}class xc extends Va{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xc}}function pS(s,e,t){return new dd({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vy extends Va{_toFieldTransform(e){return new bc(e.path,new el)}isEqual(e){return e instanceof Vy}}class Ny extends Va{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=pS(this,e,!0),r=this.Hu.map(l=>Oa(l,t)),a=new Aa(r);return new bc(e.path,a)}isEqual(e){return e instanceof Ny&&qo(this.Hu,e.Hu)}}class Oy extends Va{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=pS(this,e,!0),r=this.Hu.map(l=>Oa(l,t)),a=new ba(r);return new bc(e.path,a)}isEqual(e){return e instanceof Oy&&qo(this.Hu,e.Hu)}}class My extends Va{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new tl(e.serializer,qb(e.serializer,this.Ju));return new bc(e.path,t)}isEqual(e){return e instanceof My&&this.Ju===e.Ju}}function Py(s,e,t,r){const a=s.ju(1,e,t);Uy("Data must be an object, but it was:",a,r);const l=[],c=tn.empty();ws(r,(m,p)=>{const _=ky(e,m,t);p=Mt(p);const T=a.Uu(_);if(p instanceof xc)l.push(_);else{const b=Oa(p,T);b!=null&&(l.push(_),c.set(_,b))}});const d=new bn(l);return new mS(c,d,a.fieldTransforms)}function Ly(s,e,t,r,a,l){const c=s.ju(1,e,t),d=[Tp(e,r,t)],m=[a];if(l.length%2!=0)throw new ie($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Tp(e,l[b])),m.push(l[b+1]);const p=[],_=tn.empty();for(let b=d.length-1;b>=0;--b)if(!ES(p,d[b])){const R=d[b];let O=m[b];O=Mt(O);const B=c.Uu(R);if(O instanceof xc)p.push(R);else{const L=Oa(O,B);L!=null&&(p.push(R),_.set(R,L))}}const T=new bn(p);return new mS(_,T,c.fieldTransforms)}function yS(s,e,t,r=!1){return Oa(t,s.ju(r?4:3,e))}function Oa(s,e){if(vS(s=Mt(s)))return Uy("Unsupported field value:",e,s),_S(s,e);if(s instanceof Va)return function(r,a){if(!gS(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Oa(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,a){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qb(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=dt.fromDate(r);return{timestampValue:nl(a.serializer,l)}}if(r instanceof dt){const l=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nl(a.serializer,l)}}if(r instanceof fd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:Wb(a.serializer,r._byteString)};if(r instanceof pt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ty(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Cy)return function(c,d){return{mapValue:{fields:{[Gp]:{stringValue:Hp},[Zo]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Yp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${hd(r)}`)}(s,e)}function _S(s,e){const t={};return pb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(s,(r,a)=>{const l=Oa(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function vS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof fd||s instanceof Ur||s instanceof pt||s instanceof Va||s instanceof Cy)}function Uy(s,e,t){if(!vS(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=hd(t);throw r==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+r)}}function Tp(s,e,t){if((e=Mt(e))instanceof Es)return e._internalPath;if(typeof e=="string")return ky(s,e);throw Hf("Field path arguments must be of type string or ",s,!1,void 0,t)}const iN=new RegExp("[~\\*/\\[\\]]");function ky(s,e,t){if(e.search(iN)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Es(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Hf(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ie($.INVALID_ARGUMENT,d+s+m)}function ES(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sN extends hc{data(){return super.data()}}function gd(s,e){return typeof e=="string"?ky(s,e):e instanceof Es?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class By{}class Cc extends By{}function rs(s,e,...t){let r=[];e instanceof By&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof zy).length,d=l.filter(m=>m instanceof pd).length;if(c>1||c>0&&d>0)throw new ie($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class pd extends Cc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pd(e,t,r)}_apply(e){const t=this._parse(e);return bS(e._query,t),new _n(e.firestore,e.converter,op(e._query,t))}_parse(e){const t=Na(e.firestore);return function(l,c,d,m,p,_,T){let b;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){W0(T,_);const O=[];for(const B of T)O.push(Z0(m,l,B));b={arrayValue:{values:O}}}else b=Z0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||W0(T,_),b=yS(d,c,T,_==="in"||_==="not-in");return Ue.create(p,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function aN(s,e,t){const r=e,a=gd("where",s);return pd._create(a,r,t)}class zy extends By{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)bS(c,m),c=op(c,m)}(e._query,t),new _n(e.firestore,e.converter,op(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qy extends Cc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(l,c)}(e._query,this._field,this._direction);return new _n(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Ei(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function oN(s,e="asc"){const t=e,r=gd("orderBy",s);return qy._create(r,t)}class yd extends Cc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yd(e,t,r)}_apply(e){return new _n(e.firestore,e.converter,Pf(e._query,this._limit,this._limitType))}}function lN(s){return iS("limit",s),yd._create("limit",s,"F")}function uN(s){return iS("limitToLast",s),yd._create("limitToLast",s,"L")}class _d extends Cc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _d(e,t,r)}_apply(e){const t=AS(e,this.type,this._docOrFields,this._inclusive);return new _n(e.firestore,e.converter,function(a,l){return new Ei(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function cN(...s){return _d._create("startAt",s,!0)}function hN(...s){return _d._create("startAfter",s,!1)}class vd extends Cc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vd(e,t,r)}_apply(e){const t=AS(e,this.type,this._docOrFields,this._inclusive);return new _n(e.firestore,e.converter,function(a,l){return new Ei(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function fN(...s){return vd._create("endBefore",s,!1)}function dN(...s){return vd._create("endAt",s,!0)}function AS(s,e,t,r){if(t[0]=Mt(t[0]),t[0]instanceof hc)return function(l,c,d,m,p){if(!m)throw new ie($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Bo(l))if(T.field.isKeyField())_.push(Ea(c,m.key));else{const b=m.data.field(T.field);if(Jf(b))throw new ie($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const R=T.field.canonicalString();throw new ie($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(b)}return new ys(_,p)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=Na(s.firestore);return function(c,d,m,p,_,T){const b=c.explicitOrderBy;if(_.length>b.length)throw new ie($.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let O=0;O<_.length;O++){const B=_[O];if(b[O].field.isKeyField()){if(typeof B!="string")throw new ie($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!Kp(c)&&B.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const L=c.path.child(Le.fromString(B));if(!ce.isDocumentKey(L))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const G=new ce(L);R.push(Ea(d,G))}else{const L=yS(m,p,B);R.push(L)}}return new ys(R,T)}(s._query,s.firestore._databaseId,a,e,t,r)}}function Z0(s,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new ie($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kp(e)&&t.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Le.fromString(t));if(!ce.isDocumentKey(r))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ea(s,new ce(r))}if(t instanceof pt)return Ea(s,t._key);throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(t)}.`)}function W0(s,e){if(!Array.isArray(s)||s.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bS(s,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jy{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ws(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Zo].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>ct(c.doubleValue));return new Cy(l)}convertGeoPoint(e){return new fd(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ed(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const t=pi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Le.fromString(e);ye(uw(r));const a=new ms(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||Rt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class mN extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _i=class extends hc{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$u=class extends _i{data(e={}){return super.data(e)}},Ts=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new pa(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $u(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new $u(a._firestore,a._userDataWriter,d.doc.key,d.doc,new pa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new $u(a._firestore,a._userDataWriter,d.doc.key,d.doc,new pa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:gN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function gN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function wS(s,e){return s instanceof _i&&e instanceof _i?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof Ts&&e instanceof Ts&&s._firestore===e._firestore&&hS(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(s){s=Ge(s,pt);const e=Ge(s.firestore,Dt);return eS(cn(e),s._key).then(t=>Fy(e,s,t))}class Ma extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function yN(s){s=Ge(s,pt);const e=Ge(s.firestore,Dt),t=cn(e),r=new Ma(e);return k2(t,s._key).then(a=>new _i(e,r,s._key,a,new pa(a!==null&&a.hasLocalMutations,!0),s.converter))}function _N(s){s=Ge(s,pt);const e=Ge(s.firestore,Dt);return eS(cn(e),s._key,{source:"server"}).then(t=>Fy(e,s,t))}function vN(s){s=Ge(s,_n);const e=Ge(s.firestore,Dt),t=cn(e),r=new Ma(e);return TS(s._query),tS(t,s._query).then(a=>new Ts(e,r,s,a))}function EN(s){s=Ge(s,_n);const e=Ge(s.firestore,Dt),t=cn(e),r=new Ma(e);return B2(t,s._query).then(a=>new Ts(e,r,s,a))}function TN(s){s=Ge(s,_n);const e=Ge(s.firestore,Dt),t=cn(e),r=new Ma(e);return tS(t,s._query,{source:"server"}).then(a=>new Ts(e,r,s,a))}function J0(s,e,t){s=Ge(s,pt);const r=Ge(s.firestore,Dt),a=Ed(s.converter,e,t);return Vc(r,[md(Na(r),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,ft.none())])}function eA(s,e,t,...r){s=Ge(s,pt);const a=Ge(s.firestore,Dt),l=Na(a);let c;return c=typeof(e=Mt(e))=="string"||e instanceof Es?Ly(l,"updateDoc",s._key,e,t,r):Py(l,"updateDoc",s._key,e),Vc(a,[c.toMutation(s._key,ft.exists(!0))])}function AN(s){return Vc(Ge(s.firestore,Dt),[new gl(s._key,ft.none())])}function bN(s,e){const t=Ge(s.firestore,Dt),r=Gf(s),a=Ed(s.converter,e);return Vc(t,[md(Na(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function SS(s,...e){var t,r,a;s=Mt(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ep(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ep(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof pt)p=Ge(s.firestore,Dt),_=dl(s._key.path),m={next:T=>{e[c]&&e[c](Fy(p,s,T))},error:e[c+1],complete:e[c+2]};else{const T=Ge(s,_n);p=Ge(T.firestore,Dt),_=T._query;const b=new Ma(p);m={next:R=>{e[c]&&e[c](new Ts(p,b,T,R))},error:e[c+1],complete:e[c+2]},TS(s._query)}return function(b,R,O,B){const L=new ud(B),G=new Ey(R,L,O);return b.asyncQueue.enqueueAndForget(async()=>yy(await ll(b),G)),()=>{L.su(),b.asyncQueue.enqueueAndForget(async()=>_y(await ll(b),G))}}(cn(p),_,d,m)}function wN(s,e){return z2(cn(s=Ge(s,Dt)),Ep(e)?e:{next:e})}function Vc(s,e){return function(r,a){const l=new nn;return r.asyncQueue.enqueueAndForget(async()=>d2(await Dy(r),a,l)),l.promise}(cn(s),e)}function Fy(s,e,t){const r=t.docs.get(e._key),a=new Ma(s);return new _i(s,a,e._key,r,new pa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RN=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Na(e)}set(e,t,r){this._verifyNotCommitted();const a=as(e,this._firestore),l=Ed(a.converter,t,r),c=md(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,ft.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=as(e,this._firestore);let c;return c=typeof(t=Mt(t))=="string"||t instanceof Es?Ly(this._dataReader,"WriteBatch.update",l._key,t,r,a):Py(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=as(e,this._firestore);return this._mutations=this._mutations.concat(new gl(t._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function as(s,e){if((s=Mt(s)).firestore!==e)throw new ie($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Na(e)}get(e){const t=as(e,this._firestore),r=new mN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ge();const l=a[0];if(l.isFoundDocument())return new hc(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new hc(this._firestore,r,t._key,null,t.converter);throw ge()})}set(e,t,r){const a=as(e,this._firestore),l=Ed(a.converter,t,r),c=md(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=as(e,this._firestore);let c;return c=typeof(t=Mt(t))=="string"||t instanceof Es?Ly(this._dataReader,"Transaction.update",l._key,t,r,a):Py(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=as(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DN=class extends IN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=as(e,this._firestore),r=new Ma(this._firestore);return super.get(e).then(a=>new _i(this._firestore,r,t._key,a._document,new pa(!1,!1),t.converter))}};function xN(s,e,t){s=Ge(s,Dt);const r=Object.assign(Object.assign({},SN),t);return function(l){if(l.maxAttempts<1)throw new ie($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new nn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await P2(l);new O2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(cn(s),a=>e(new DN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new xc("deleteField")}function VN(){return new Vy("serverTimestamp")}function NN(...s){return new Ny("arrayUnion",s)}function ON(...s){return new Oy("arrayRemove",s)}function MN(s){return new My("increment",s)}(function(e,t=!0){(function(a){fl=a})(Op),Go(new va("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Dt(new Dx(r.getProvider("auth-internal")),new Vx(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ms(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),di(VT,NT,e),di(VT,NT,"esm2017")})();const PN="@firebase/firestore-compat",LN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function nA(){if(!hC())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class fc{constructor(e){this._delegate=e}static fromBase64String(e){return nA(),new fc(Ur.fromBase64String(e))}static fromUint8Array(e){return tA(),new fc(Ur.fromUint8Array(e))}toBase64(){return nA(),this._delegate.toBase64()}toUint8Array(){return tA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){return UN(s,["next","error","complete"])}function UN(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{enableIndexedDbPersistence(e,t){return K2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return $2(e._delegate)}clearIndexedDbPersistence(e){return Y2(e._delegate)}}class RS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ms||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){F2(this._delegate,e,t,r)}enableNetwork(){return Z2(this._delegate)}disableNetwork(){return W2(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return X2(this._delegate)}onSnapshotsInSync(e){return wN(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ul(this,uS(this._delegate,e))}catch(t){throw pn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jn(this,Gf(this._delegate,e))}catch(t){throw pn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gn(this,G2(this._delegate,e))}catch(t){throw pn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xN(this._delegate,t=>e(new IS(this,t)))}batch(){return cn(this._delegate),new DS(new RN(this._delegate,e=>Vc(this._delegate,e)))}loadBundle(e){return J2(this._delegate,e)}namedQuery(e){return eN(this._delegate,e).then(t=>t?new gn(this,t):null)}}class Td extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(new Ur(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jn.forKey(t,this.firestore,null)}}function BN(s){wx(s)}class IS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Td(e)}get(e){const t=ya(e);return this._delegate.get(t).then(r=>new dc(this._firestore,new _i(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=ya(e);return r?(Gy("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=ya(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=ya(e);return this._delegate.delete(t),this}}class DS{constructor(e){this._delegate=e}set(e,t,r){const a=ya(e);return r?(Gy("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=ya(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=ya(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Da{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $u(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Da.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Da(e,new Td(e),t),a.set(t,l)),l}}Da.INSTANCES=new WeakMap;class Jn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Td(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jn(t,new pt(t._delegate,r,new ce(e)))}static forKey(e,t,r){return new Jn(t,new pt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ul(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ul(this.firestore,uS(this._delegate,e))}catch(t){throw pn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Mt(e),e instanceof pt?cS(this._delegate,e):!1}set(e,t){t=Gy("DocumentReference.set",t);try{return t?J0(this._delegate,e,t):J0(this._delegate,e)}catch(r){throw pn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?eA(this._delegate,e):eA(this._delegate,e,t,...r)}catch(a){throw pn(a,"updateDoc()","DocumentReference.update()")}}delete(){return AN(this._delegate)}onSnapshot(...e){const t=xS(e),r=CS(e,a=>new dc(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return SS(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=yN(this._delegate):(e==null?void 0:e.source)==="server"?t=_N(this._delegate):t=pN(this._delegate),t.then(r=>new dc(this.firestore,new _i(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jn(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pn(s,e,t){return s.message=s.message.replace(e,t),s}function xS(s){for(const e of s)if(typeof e=="object"&&!Ap(e))return e;return{}}function CS(s,e){var t,r;let a;return Ap(s[0])?a=s[0]:Ap(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class dc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wS(this._delegate,e._delegate)}}class mc extends dc{data(e){const t=this._delegate.data(e);return this._delegate._converter||Sx(t!==void 0),t}}class gn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Td(e)}where(e,t,r){try{return new gn(this.firestore,rs(this._delegate,aN(e,t,r)))}catch(a){throw pn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gn(this.firestore,rs(this._delegate,oN(e,t)))}catch(r){throw pn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gn(this.firestore,rs(this._delegate,lN(e)))}catch(t){throw pn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gn(this.firestore,rs(this._delegate,uN(e)))}catch(t){throw pn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gn(this.firestore,rs(this._delegate,cN(...e)))}catch(t){throw pn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gn(this.firestore,rs(this._delegate,hN(...e)))}catch(t){throw pn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gn(this.firestore,rs(this._delegate,fN(...e)))}catch(t){throw pn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gn(this.firestore,rs(this._delegate,dN(...e)))}catch(t){throw pn(t,"endAt()","Query.endAt()")}}isEqual(e){return hS(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=EN(this._delegate):(e==null?void 0:e.source)==="server"?t=TN(this._delegate):t=vN(this._delegate),t.then(r=>new bp(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xS(e),r=CS(e,a=>new bp(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return SS(this._delegate,t,r)}withConverter(e){return new gn(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mc(this._firestore,r))})}isEqual(e){return wS(this._delegate,e._delegate)}}class ul extends gn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jn(this.firestore,e):null}doc(e){try{return e===void 0?new Jn(this.firestore,Gf(this._delegate)):new Jn(this.firestore,Gf(this._delegate,e))}catch(t){throw pn(t,"doc()","CollectionReference.doc()")}}add(e){return bN(this._delegate,e).then(t=>new Jn(this.firestore,t))}isEqual(e){return cS(this._delegate,e._delegate)}withConverter(e){return new ul(this.firestore,e?this._delegate.withConverter(Da.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ya(s){return Ge(s,pt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(...e){this._delegate=new Es(...e)}static documentId(){return new Hy(ht.keyField().canonicalString())}isEqual(e){return e=Mt(e),e instanceof Es?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static serverTimestamp(){const e=VN();return e._methodName="FieldValue.serverTimestamp",new ma(e)}static delete(){const e=CN();return e._methodName="FieldValue.delete",new ma(e)}static arrayUnion(...e){const t=NN(...e);return t._methodName="FieldValue.arrayUnion",new ma(t)}static arrayRemove(...e){const t=ON(...e);return t._methodName="FieldValue.arrayRemove",new ma(t)}static increment(e){const t=MN(e);return t._methodName="FieldValue.increment",new ma(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={Firestore:RS,GeoPoint:fd,Timestamp:dt,Blob:fc,Transaction:IS,WriteBatch:DS,DocumentReference:Jn,DocumentSnapshot:dc,Query:gn,QueryDocumentSnapshot:mc,QuerySnapshot:bp,CollectionReference:ul,FieldPath:Hy,FieldValue:ma,setLogLevel:BN,CACHE_SIZE_UNLIMITED:Q2};function jN(s,e){s.INTERNAL.registerComponent(new va("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},qN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(s){jN(s,(e,t)=>new RS(e,t,new kN)),s.registerVersion(PN,LN)}FN(Pn);const Lu=1e3,rA=1,GN=1e3,HN=1e4;function Ad({db:s,userId:e,initialized:t}){const[r,a]=K.useState(!0),[l,c]=K.useState(0),[d,m]=K.useState(0),[p,_]=K.useState(1),[T,b]=K.useState(""),[R,O]=K.useState(Lu),[B,L]=K.useState(1),[G,J]=K.useState(1),[X,fe]=K.useState(!1),[oe,me]=K.useState(!1),N=`mainStats_${e}`,S=e&&s&&t,I=K.useRef(Date.now()),V=_e=>s.collection("users").doc(String(e)).collection("stats").doc(_e),P=()=>s.collection("users").doc(String(e)),U=_e=>Lu*_e,x=_e=>rA*_e,We=_e=>1e3*Math.pow(2,_e);K.useEffect(()=>{if(!S)return;(async()=>{try{const C=localStorage.getItem(N);if(C){const Pt=JSON.parse(C);c(Pt.count??0),m(Pt.totalCount??0),_(Pt.multiplier??1),b(Pt.username??""),O(Pt.energy??Lu),L(Pt.maxEnergyLevel??1),J(Pt.regenSpeedLevel??1)}const[ee,le,ae,ve,De,we,yt,Je]=await Promise.all([V("count").get(),V("multiplier").get(),V("totalCount").get(),V("username").get(),V("energy").get(),V("maxEnergyLevel").get(),V("regenSpeedLevel").get(),P().get()]),Sn=ee.exists?ee.data().value:0,tr=le.exists?le.data().value:1,kn=ae.exists?ae.data().value:0,nr=ve.exists?ve.data().value:"",Bn=we.exists?we.data().value:1,rr=yt.exists?yt.data().value:1;let zn=Lu*Bn;const Pa=rA*rr;if(De.exists){const Pt=De.data(),wi=(Pt==null?void 0:Pt.value)??zn;if((Pt==null?void 0:Pt.lastUpdated)instanceof Pn.firestore.Timestamp){const Si=Pt.lastUpdated.toMillis(),Br=Date.now(),El=Math.floor((Br-Si)/1e3);zn=Math.min(Lu*Bn,wi+El*Pa)}else zn=wi}c(Sn),m(kn),_(tr),O(zn),L(Bn),J(rr),nr?b(nr):fe(!0);const At=Pn.firestore.FieldValue.serverTimestamp();Je.exists||await P().set({createdAt:At},{merge:!0}),ee.exists||await V("count").set({value:0,createdAt:At}),le.exists||await V("multiplier").set({value:1,createdAt:At}),ae.exists||await V("totalCount").set({value:0,createdAt:At}),De.exists||await V("energy").set({value:zn,lastUpdated:At,createdAt:At}),we.exists||await V("maxEnergyLevel").set({value:1,createdAt:At}),yt.exists||await V("regenSpeedLevel").set({value:1,createdAt:At}),localStorage.setItem(N,JSON.stringify({count:Sn,totalCount:kn,multiplier:tr,username:nr,energy:zn,maxEnergyLevel:Bn,regenSpeedLevel:rr}))}catch(C){console.error("[STATS] Завантаження помилка:",C)}finally{a(!1)}})()},[S]),K.useEffect(()=>{if(!S)return;const _e=setInterval(()=>{O(C=>{const ee=U(B),le=x(G);if(C>=ee)return C;const ae=Math.min(ee,C+le),ve=Date.now();if(ve-I.current>=HN){const De=Pn.firestore.FieldValue.serverTimestamp();V("energy").set({value:ae,updatedAt:De,lastUpdated:De},{merge:!0}),I.current=ve,localStorage.setItem(N,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:ae,maxEnergyLevel:B,regenSpeedLevel:G}))}return ae})},GN);return()=>clearInterval(_e)},[S,l,d,p,T,B,G]);const Ve=()=>{R<=0||(O(_e=>Math.max(0,_e-1)),c(_e=>_e+p),m(_e=>_e+p),me(!0))};return K.useEffect(()=>{if(!oe||!S)return;const _e=setTimeout(()=>{const C=Pn.firestore.FieldValue.serverTimestamp(),ee=Pn.firestore.Timestamp.now();Promise.all([V("count").set({value:l,updatedAt:C},{merge:!0}),V("totalCount").set({value:d,updatedAt:C},{merge:!0}),V("energy").set({value:R,updatedAt:C,lastUpdated:ee},{merge:!0})]).then(()=>me(!1)),localStorage.setItem(N,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:R,maxEnergyLevel:B,regenSpeedLevel:G}))},200);return()=>clearTimeout(_e)},[oe,l,d,R,S]),{loading:r,count:l,totalCount:d,multiplier:p,username:T,showUsernameForm:X,setShowUsernameForm:fe,increment:Ve,saveUsername:async _e=>{if(!_e.trim())return;const C=Pn.firestore.FieldValue.serverTimestamp();await V("username").set({value:_e,updatedAt:C,createdAt:C}),b(_e),fe(!1)},energy:R,setEnergy:O,maxEnergyLevel:B,regenSpeedLevel:G,upgradeMaxEnergy:async()=>{const _e=We(B);if(l<_e)return;const C=B+1,ee=Pn.firestore.FieldValue.serverTimestamp();await V("maxEnergyLevel").set({value:C,updatedAt:ee},{merge:!0}),c(le=>le-_e),L(C)},upgradeRegenSpeed:async()=>{const _e=We(G);if(l<_e)return;const C=G+1,ee=Pn.firestore.FieldValue.serverTimestamp();await V("regenSpeedLevel").set({value:C,updatedAt:ee},{merge:!0}),c(le=>le-_e),J(C)},getUpgradeCost:We,setMultiplier:_,setMaxEnergyLevel:L,setRegenSpeedLevel:J,setCount:c}}function QN({db:s,userId:e,initialized:t}){const{username:r,showUsernameForm:a,setShowUsernameForm:l,saveUsername:c}=Ad({db:s,userId:e,initialized:t}),[d,m]=K.useState(r),p=()=>{m(r),l(!0)};return re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"header",children:re.jsx("div",{className:"header-left",children:re.jsx(hr,{to:"/",className:"header-button",children:"←"})})}),re.jsxs("div",{className:"wrapper",children:[re.jsx("h2",{className:"clicker-text",children:"⚙️ Налаштування"}),re.jsx("div",{className:"settings-section",children:re.jsxs("p",{className:"clicker-text",children:["ID: ",re.jsx("strong",{children:e})]})}),re.jsx("div",{className:"settings-section",children:re.jsx("button",{className:"menu-button",onClick:p,children:"Змінити нікнейм"})}),a&&re.jsx("div",{className:"modal-backdrop",children:re.jsxs("div",{className:"modal",children:[re.jsx("h2",{children:"Введіть свій нікнейм"}),re.jsx("input",{type:"text",value:d,onChange:_=>m(_.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),re.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[re.jsx("button",{className:"menu-button",onClick:()=>c(d),children:"Зберегти"}),re.jsx("button",{className:"menu-button cancel",onClick:()=>l(!1),style:{marginLeft:10},children:"Скасувати"})]})]})})]})]})}function KN(){const[s,e]=K.useState(null);return K.useEffect(()=>{var a,l;const t=(a=window.Telegram)==null?void 0:a.WebApp;if(!t)return;t.ready(),t.expand();const r=t.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&e(r.user.id)},[]),s}const $N={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let iA;function YN(){const[s,e]=K.useState(!1);return K.useEffect(()=>{Pn.apps.length||(Pn.initializeApp($N),iA=Pn.firestore()),e(!0)},[]),{db:iA,initialized:s}}const sA="/clicker/assets/click-pWWDwmzr.png",XN="/clicker/assets/logo-BS-hctJj.png";function ZN({userId:s,db:e,initialized:t}){const[r,a]=K.useState(""),[l,c]=K.useState(!1),{count:d,multiplier:m,username:p,showUsernameForm:_,increment:T,saveUsername:b,energy:R,setEnergy:O,maxEnergyLevel:B}=Ad({db:e,userId:s,initialized:t}),L=J=>{const X=m??1;if(R>=X){T(),O(N=>Math.max(0,N-X));const fe=J.currentTarget.getBoundingClientRect(),oe=J.clientX-fe.left,me=J.clientY-fe.top;G(`+${X}`,oe,me)}},G=(J,X,fe)=>{const oe=document.getElementById("floating-numbers-container");if(!oe)return;const me=document.createElement("div");me.className="floating-number",me.textContent=J;const N=Math.random()*30-15,S=Math.random()*30-15;me.style.left=`${X+N}px`,me.style.top=`${fe+S}px`,oe.appendChild(me),setTimeout(()=>{me.remove()},1e3)};return K.useEffect(()=>{const J=new Image;J.src=sA,J.onload=()=>c(!0)},[]),re.jsxs(re.Fragment,{children:[re.jsxs("div",{className:"header",children:[re.jsx("div",{className:"header-left"}),re.jsx("div",{className:"header-center",children:p&&l?p:""}),re.jsx("div",{className:"header-right",children:re.jsx(hr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),re.jsxs("div",{className:"wrapper",children:[_&&re.jsx("div",{className:"modal-backdrop",children:re.jsxs("div",{className:"modal",children:[re.jsx("h2",{children:"Введіть свій нікнейм"}),re.jsx("input",{type:"text",value:r,onChange:J=>a(J.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),re.jsx("button",{className:"menu-button",onClick:()=>b(r),children:"Зберегти"})]})}),re.jsx("div",{className:"logo-image-wrapper",children:re.jsx("img",{src:XN,alt:"TapStorm",className:"main-title-img"})}),re.jsxs("div",{className:"clicker-container",children:[re.jsxs("p",{className:"clicker-text",children:["Монети: ",re.jsx("strong",{children:d??0})]}),l&&re.jsxs("div",{className:"clicker-wrapper",children:[re.jsx("div",{className:`clicker-img ${R===0?"disabled":""}`,onClick:R>0?J=>L(J):void 0,onContextMenu:J=>J.preventDefault(),onTouchStart:J=>J.preventDefault(),onMouseDown:J=>J.preventDefault(),style:{backgroundImage:`url(${sA})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"160px",height:"160px",opacity:R===0?.5:1,cursor:R===0?"not-allowed":"pointer",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",transition:"transform 0.1s ease"},role:"button","aria-disabled":R===0}),re.jsx("div",{id:"floating-numbers-container",className:"floating-container"})]}),re.jsxs("p",{className:"clicker-text",children:[" ",re.jsxs("strong",{children:[R??0,"/",B*1e3,"⚡️"]})]})]}),re.jsxs("div",{className:"button-group fade-in",children:[re.jsx(hr,{to:"/upgrade",children:re.jsx("button",{className:"menu-button",children:"🛠 Покращення"})}),re.jsx(hr,{to:"/",children:re.jsx("button",{className:"menu-button",children:"🛒 Магазин"})}),re.jsx(hr,{to:"/leaderboard",children:re.jsx("button",{className:"menu-button",children:"🏆 Топ"})})]})]})]})}const WN="/clicker/assets/upgrade-CJRUvsqd.png",jg="/clicker/assets/up1-DIChvCd6.png";function JN({userId:s,db:e,initialized:t}){const{count:r,multiplier:a,setCount:l,setMultiplier:c,maxEnergyLevel:d,regenSpeedLevel:m,setMaxEnergyLevel:p,setRegenSpeedLevel:_}=Ad({db:e,userId:s,initialized:t}),[T,b]=K.useState(!1),[R,O]=K.useState(r),[B,L]=K.useState(a),[G,J]=K.useState(d),[X,fe]=K.useState(m);K.useEffect(()=>O(r),[r]),K.useEffect(()=>L(a),[a]),K.useEffect(()=>J(d),[d]),K.useEffect(()=>fe(m),[m]);const oe=(P,U)=>Math.floor(U*Math.pow(P,2)),me=oe(B||1,100),N=oe(G||1,100),S=oe(X||2,100),I=async P=>{const x={multiplier:{level:B,cost:me,onUpgrade:async Ve=>{await e.collection("users").doc(String(s)).collection("stats").doc("multiplier").set({value:Ve,updatedAt:new Date},{merge:!0}),c(Ve),L(Ve)}},maxEnergy:{level:G,cost:N,onUpgrade:async Ve=>{await e.collection("users").doc(String(s)).collection("stats").doc("maxEnergyLevel").set({value:Ve,updatedAt:new Date},{merge:!0}),p(Ve),J(Ve)}},regenSpeed:{level:X,cost:S,onUpgrade:async Ve=>{await e.collection("users").doc(String(s)).collection("stats").doc("regenSpeedLevel").set({value:Ve,updatedAt:new Date},{merge:!0}),_(Ve),fe(Ve)}}}[P],We=x.cost;if(R>=We){const Ve=x.level+1;await Promise.all([e.collection("users").doc(String(s)).collection("stats").doc("count").set({value:R-We,updatedAt:new Date},{merge:!0}),x.onUpgrade(Ve)]),l(R-We),O(R-We)}else b(!0)},V=[{type:"multiplier",title:"Множник кліку",level:B,cost:me,bg:jg,desc:`Поточний: x${B}
Купити x${B+1} за ${me} монет`},{type:"maxEnergy",title:"Макс. енергія",level:G,cost:N,bg:jg,desc:`Рівень: ${G}
Збільшити до ${G+1} за ${N} монет`},{type:"regenSpeed",title:"Регенерація",level:X,cost:S,bg:jg,desc:`Рівень: ${X}
Покращити до ${X+1} за ${S} монет`}];return re.jsxs(re.Fragment,{children:[re.jsxs("div",{className:"header",children:[re.jsx("div",{className:"header-left",children:re.jsx(hr,{to:"/",className:"header-button",children:"←"})}),re.jsx("div",{className:"header-center"}),re.jsx("div",{className:"header-right",children:re.jsx(hr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),re.jsxs("div",{className:"wrapper",children:[re.jsx("div",{className:"logo-image-wrapper",children:re.jsx("img",{src:WN,alt:"TapStorm",className:"main-title-img"})}),re.jsxs("p",{className:"clicker-text",children:["Монети: ",re.jsx("strong",{children:R??"..."})]}),re.jsx("div",{className:"upgrade-grid",children:V.map(({type:P,title:U,desc:x,bg:We})=>re.jsxs("div",{className:"upgrade-card",onClick:()=>I(P),children:[re.jsx("img",{src:We,alt:U,className:"upgrade-card-img"}),re.jsx("p",{className:"upgrade-title",children:U}),x.split(`
`).map((Ve,Z)=>re.jsx("p",{children:Ve},Z))]},P))})]}),T&&re.jsx("div",{className:"modal-backdrop",children:re.jsxs("div",{className:"modal",children:[re.jsx("h3",{children:"Недостатньо монет!"}),re.jsx("button",{className:"menu-button",onClick:()=>b(!1),children:"Ок"})]})})]})}const eO="/clicker/assets/leaderboard-eL_LwdNf.png";function tO({userId:s,db:e,initialized:t}){const[r,a]=K.useState([]),[l,c]=K.useState(!0),d=e&&t;Ad({db:e,userId:s,initialized:t}),K.useEffect(()=>{if(!d)return;(async()=>{try{const _=await e.collection("users").get(),T=[];for(const b of _.docs){const R=e.collection("users").doc(b.id).collection("stats"),O=await R.get(),B={};O.forEach(G=>{B[G.id]=G.data().value});const L=[];if(B.username===void 0){const G=`Гравець-${b.id.slice(0,4)}`;L.push(R.doc("username").set({value:G})),B.username=G}B.totalCount===void 0&&(L.push(R.doc("totalCount").set({value:0})),B.totalCount=0),B.multiplier===void 0&&(L.push(R.doc("multiplier").set({value:1})),B.multiplier=1),L.length>0&&await Promise.all(L),T.push({userId:b.id,username:B.username,totalCount:B.totalCount,multiplier:B.multiplier})}T.sort((b,R)=>R.totalCount-b.totalCount),a(T)}catch(_){console.error("[ЛІДЕРБОРД] Помилка завантаження:",_)}finally{c(!1)}})()},[d]);let m={};if(l)m={top10:Array.from({length:10},(p,_)=>({userId:`loading-${_}`,username:"...",totalCount:"...",multiplier:"...",place:_+1,isCurrentUser:!1})),currentUser:null};else{const p=r.map((R,O)=>({...R,place:O+1,isCurrentUser:R.userId==s})),_=p.slice(0,10),b=_.some(R=>R.userId==s)?null:p.find(R=>R.userId==s);m={top10:_,currentUser:b}}return re.jsxs(re.Fragment,{children:[re.jsxs("div",{className:"header",children:[re.jsx("div",{className:"header-left",children:re.jsx(hr,{to:"/",className:"header-button",children:"←"})}),re.jsx("div",{className:"header-right",children:re.jsx(hr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),re.jsx("div",{className:"wrapper",children:re.jsxs("div",{className:"leaderboard",children:[re.jsx("div",{className:"leaderboard-image-wrapper",children:re.jsx("img",{src:eO,alt:"Топ гравців",className:"leaderboard-title-img"})}),re.jsxs("div",{className:"leaderboard-header",children:[re.jsx("span",{children:"🏅"}),re.jsx("span",{children:"Ім’я"}),re.jsx("span",{children:"Зароблено"})]}),re.jsxs("div",{className:"leaderboard-container",children:[m.top10.map((p,_)=>re.jsxs("div",{className:`leaderboard-row ${p.place===1?"gold":p.place===2?"silver":p.place===3?"bronze":""} ${p.isCurrentUser?"highlight-row":""}`,children:[re.jsx("span",{children:p.place}),re.jsx("span",{children:p.username}),re.jsx("span",{children:p.totalCount})]},`${p.userId}-${_}`)),m.currentUser&&re.jsxs(re.Fragment,{children:[re.jsx("div",{className:"leaderboard-divider"}),re.jsxs("div",{className:"leaderboard-row highlight-row",children:[re.jsx("span",{children:m.currentUser.place}),re.jsx("span",{children:m.currentUser.username}),re.jsx("span",{children:m.currentUser.totalCount})]},`${m.currentUser.userId}-current`)]})]})]})})]})}function nO(){const s=KN(),{initialized:e,db:t}=YN();return s&&e&&t?re.jsx(I1,{basename:"/clicker",children:re.jsxs(r1,{children:[re.jsx(Uu,{path:"/",element:re.jsx(ZN,{userId:s,db:t,initialized:e})}),re.jsx(Uu,{path:"/upgrade",element:re.jsx(JN,{userId:s,db:t,initialized:e})}),re.jsx(Uu,{path:"/leaderboard",element:re.jsx(tO,{userId:s,db:t,initialized:e})}),re.jsx(Uu,{path:"/settings",element:re.jsx(QN,{db:t,userId:s,initialized:e})})]})}):re.jsx("div",{className:"wrapper",children:re.jsx("p",{children:"Завантаження…"})})}fI.createRoot(document.getElementById("root")).render(re.jsx(iI.StrictMode,{children:re.jsx(nO,{})}));
