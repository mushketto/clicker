(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function rA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vg={exports:{}},wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function WR(){if(eT)return wu;eT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var tT;function JR(){return tT||(tT=1,vg.exports=WR()),vg.exports}var ae=JR(),Eg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function eI(){if(nT)return De;nT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,F={};function U(N,te,ce){this.props=N,this.context=te,this.refs=F,this.updater=ce||R}U.prototype.isReactComponent={},U.prototype.setState=function(N,te){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,te,"setState")},U.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Q(){}Q.prototype=U.prototype;function ie(N,te,ce){this.props=N,this.context=te,this.refs=F,this.updater=ce||R}var K=ie.prototype=new Q;K.constructor=ie,V(K,U.prototype),K.isPureReactComponent=!0;var de=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},Ee=Object.prototype.hasOwnProperty;function x(N,te,ce,se,Te,xe){return ce=xe.ref,{$$typeof:s,type:N,key:te,ref:ce!==void 0?ce:null,props:xe}}function S(N,te){return x(N.type,te,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function O(N){var te={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ce){return te[ce]})}var P=/\/+/g;function k(N,te){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):te.toString(36)}function C(){}function Rt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(te){N.status==="pending"&&(N.status="fulfilled",N.value=te)},function(te){N.status==="pending"&&(N.status="rejected",N.reason=te)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function st(N,te,ce,se,Te){var xe=typeof N;(xe==="undefined"||xe==="boolean")&&(N=null);var Re=!1;if(N===null)Re=!0;else switch(xe){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(N.$$typeof){case s:case e:Re=!0;break;case _:return Re=N._init,st(Re(N._payload),te,ce,se,Te)}}if(Re)return Te=Te(N),Re=se===""?"."+k(N,0):se,de(Te)?(ce="",Re!=null&&(ce=Re.replace(P,"$&/")+"/"),st(Te,te,ce,"",function(nr){return nr})):Te!=null&&(I(Te)&&(Te=S(Te,ce+(Te.key==null||N&&N.key===Te.key?"":(""+Te.key).replace(P,"$&/")+"/")+Re)),te.push(Te)),1;Re=0;var Bt=se===""?".":se+":";if(de(N))for(var nt=0;nt<N.length;nt++)se=N[nt],xe=Bt+k(se,nt),Re+=st(se,te,ce,xe,Te);else if(nt=b(N),typeof nt=="function")for(N=nt.call(N),nt=0;!(se=N.next()).done;)se=se.value,xe=Bt+k(se,nt++),Re+=st(se,te,ce,xe,Te);else if(xe==="object"){if(typeof N.then=="function")return st(Rt(N),te,ce,se,Te);throw te=String(N),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Re}function Z(N,te,ce){if(N==null)return N;var se=[],Te=0;return st(N,se,"","",function(xe){return te.call(ce,xe,Te++)}),se}function ue(N){if(N._status===-1){var te=N._result;te=te(),te.then(function(ce){(N._status===0||N._status===-1)&&(N._status=1,N._result=ce)},function(ce){(N._status===0||N._status===-1)&&(N._status=2,N._result=ce)}),N._status===-1&&(N._status=0,N._result=te)}if(N._status===1)return N._result.default;throw N._result}var pe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function ke(){}return De.Children={map:Z,forEach:function(N,te,ce){Z(N,function(){te.apply(this,arguments)},ce)},count:function(N){var te=0;return Z(N,function(){te++}),te},toArray:function(N){return Z(N,function(te){return te})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},De.Component=U,De.Fragment=t,De.Profiler=a,De.PureComponent=ie,De.StrictMode=r,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,De.__COMPILER_RUNTIME={__proto__:null,c:function(N){return le.H.useMemoCache(N)}},De.cache=function(N){return function(){return N.apply(null,arguments)}},De.cloneElement=function(N,te,ce){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=V({},N.props),Te=N.key,xe=void 0;if(te!=null)for(Re in te.ref!==void 0&&(xe=void 0),te.key!==void 0&&(Te=""+te.key),te)!Ee.call(te,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&te.ref===void 0||(se[Re]=te[Re]);var Re=arguments.length-2;if(Re===1)se.children=ce;else if(1<Re){for(var Bt=Array(Re),nt=0;nt<Re;nt++)Bt[nt]=arguments[nt+2];se.children=Bt}return x(N.type,Te,void 0,void 0,xe,se)},De.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},De.createElement=function(N,te,ce){var se,Te={},xe=null;if(te!=null)for(se in te.key!==void 0&&(xe=""+te.key),te)Ee.call(te,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Te[se]=te[se]);var Re=arguments.length-2;if(Re===1)Te.children=ce;else if(1<Re){for(var Bt=Array(Re),nt=0;nt<Re;nt++)Bt[nt]=arguments[nt+2];Te.children=Bt}if(N&&N.defaultProps)for(se in Re=N.defaultProps,Re)Te[se]===void 0&&(Te[se]=Re[se]);return x(N,xe,void 0,void 0,null,Te)},De.createRef=function(){return{current:null}},De.forwardRef=function(N){return{$$typeof:d,render:N}},De.isValidElement=I,De.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ue}},De.memo=function(N,te){return{$$typeof:p,type:N,compare:te===void 0?null:te}},De.startTransition=function(N){var te=le.T,ce={};le.T=ce;try{var se=N(),Te=le.S;Te!==null&&Te(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ke,pe)}catch(xe){pe(xe)}finally{le.T=te}},De.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},De.use=function(N){return le.H.use(N)},De.useActionState=function(N,te,ce){return le.H.useActionState(N,te,ce)},De.useCallback=function(N,te){return le.H.useCallback(N,te)},De.useContext=function(N){return le.H.useContext(N)},De.useDebugValue=function(){},De.useDeferredValue=function(N,te){return le.H.useDeferredValue(N,te)},De.useEffect=function(N,te,ce){var se=le.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(N,te)},De.useId=function(){return le.H.useId()},De.useImperativeHandle=function(N,te,ce){return le.H.useImperativeHandle(N,te,ce)},De.useInsertionEffect=function(N,te){return le.H.useInsertionEffect(N,te)},De.useLayoutEffect=function(N,te){return le.H.useLayoutEffect(N,te)},De.useMemo=function(N,te){return le.H.useMemo(N,te)},De.useOptimistic=function(N,te){return le.H.useOptimistic(N,te)},De.useReducer=function(N,te,ce){return le.H.useReducer(N,te,ce)},De.useRef=function(N){return le.H.useRef(N)},De.useState=function(N){return le.H.useState(N)},De.useSyncExternalStore=function(N,te,ce){return le.H.useSyncExternalStore(N,te,ce)},De.useTransition=function(){return le.H.useTransition()},De.version="19.1.0",De}var rT;function Tp(){return rT||(rT=1,Eg.exports=eI()),Eg.exports}var X=Tp();const tI=rA(X);var Tg={exports:{}},Su={},Ag={exports:{}},bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function nI(){return iT||(iT=1,function(s){function e(Z,ue){var pe=Z.length;Z.push(ue);e:for(;0<pe;){var ke=pe-1>>>1,N=Z[ke];if(0<a(N,ue))Z[ke]=ue,Z[pe]=N,pe=ke;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ue=Z[0],pe=Z.pop();if(pe!==ue){Z[0]=pe;e:for(var ke=0,N=Z.length,te=N>>>1;ke<te;){var ce=2*(ke+1)-1,se=Z[ce],Te=ce+1,xe=Z[Te];if(0>a(se,pe))Te<N&&0>a(xe,se)?(Z[ke]=xe,Z[Te]=pe,ke=Te):(Z[ke]=se,Z[ce]=pe,ke=ce);else if(Te<N&&0>a(xe,pe))Z[ke]=xe,Z[Te]=pe,ke=Te;else break e}}return ue}function a(Z,ue){var pe=Z.sortIndex-ue.sortIndex;return pe!==0?pe:Z.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,b=3,R=!1,V=!1,F=!1,U=!1,Q=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function de(Z){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=Z)r(p),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(p)}}function le(Z){if(F=!1,de(Z),!V)if(t(m)!==null)V=!0,Ee||(Ee=!0,k());else{var ue=t(p);ue!==null&&st(le,ue.startTime-Z)}}var Ee=!1,x=-1,S=5,I=-1;function O(){return U?!0:!(s.unstable_now()-I<S)}function P(){if(U=!1,Ee){var Z=s.unstable_now();I=Z;var ue=!0;try{e:{V=!1,F&&(F=!1,ie(x),x=-1),R=!0;var pe=b;try{t:{for(de(Z),T=t(m);T!==null&&!(T.expirationTime>Z&&O());){var ke=T.callback;if(typeof ke=="function"){T.callback=null,b=T.priorityLevel;var N=ke(T.expirationTime<=Z);if(Z=s.unstable_now(),typeof N=="function"){T.callback=N,de(Z),ue=!0;break t}T===t(m)&&r(m),de(Z)}else r(m);T=t(m)}if(T!==null)ue=!0;else{var te=t(p);te!==null&&st(le,te.startTime-Z),ue=!1}}break e}finally{T=null,b=pe,R=!1}ue=void 0}}finally{ue?k():Ee=!1}}}var k;if(typeof K=="function")k=function(){K(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Rt=C.port2;C.port1.onmessage=P,k=function(){Rt.postMessage(null)}}else k=function(){Q(P,0)};function st(Z,ue){x=Q(function(){Z(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var pe=b;b=ue;try{return Z()}finally{b=pe}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var pe=b;b=Z;try{return ue()}finally{b=pe}},s.unstable_scheduleCallback=function(Z,ue,pe){var ke=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ke+pe:ke):pe=ke,Z){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=pe+N,Z={id:_++,callback:ue,priorityLevel:Z,startTime:pe,expirationTime:N,sortIndex:-1},pe>ke?(Z.sortIndex=pe,e(p,Z),t(m)===null&&Z===t(p)&&(F?(ie(x),x=-1):F=!0,st(le,pe-ke))):(Z.sortIndex=N,e(m,Z),V||R||(V=!0,Ee||(Ee=!0,k()))),Z},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(Z){var ue=b;return function(){var pe=b;b=ue;try{return Z.apply(this,arguments)}finally{b=pe}}}}(bg)),bg}var sT;function rI(){return sT||(sT=1,Ag.exports=nI()),Ag.exports}var wg={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function iI(){if(aT)return rn;aT=1;var s=Tp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},rn.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},rn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},rn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},rn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:R}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},rn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},rn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},rn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},rn.requestFormReset=function(m){r.d.r(m)},rn.unstable_batchedUpdates=function(m,p){return m(p)},rn.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var oT;function sI(){if(oT)return wg.exports;oT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wg.exports=iI(),wg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function aI(){if(lT)return Su;lT=1;var s=rI(),e=Tp(),t=sI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),K=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case le:return"Suspense";case Ee:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case K:return(n.displayName||"Context")+".Provider";case ie:return(n._context.displayName||"Context")+".Consumer";case de:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return i=n.displayName||null,i!==null?i:Rt(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return Rt(n(i))}catch{}}return null}var st=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ke=[],N=-1;function te(n){return{current:n}}function ce(n){0>N||(n.current=ke[N],ke[N]=null,N--)}function se(n,i){N++,ke[N]=n.current,n.current=i}var Te=te(null),xe=te(null),Re=te(null),Bt=te(null);function nt(n,i){switch(se(Re,i),se(xe,n),se(Te,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?DE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=DE(i),n=CE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ce(Te),se(Te,n)}function nr(){ce(Te),ce(xe),ce(Re)}function yi(n){n.memoizedState!==null&&se(Bt,n);var i=Te.current,o=CE(i,n.type);i!==o&&(se(xe,n),se(Te,o))}function Vr(n){xe.current===n&&(ce(Te),ce(xe)),Bt.current===n&&(ce(Bt),vu._currentValue=pe)}var vs=Object.prototype.hasOwnProperty,Es=s.unstable_scheduleCallback,Ts=s.unstable_cancelCallback,pl=s.unstable_shouldYield,Ic=s.unstable_requestPaint,Mn=s.unstable_now,vd=s.unstable_getCurrentPriorityLevel,yl=s.unstable_ImmediatePriority,Va=s.unstable_UserBlockingPriority,As=s.unstable_NormalPriority,Ed=s.unstable_LowPriority,Na=s.unstable_IdlePriority,_l=s.log,Dc=s.unstable_setDisableYieldValue,pt=null,Qe=null;function bn(n){if(typeof _l=="function"&&Dc(n),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(pt,n)}catch{}}var tn=Math.clz32?Math.clz32:bs,Cc=Math.log,Td=Math.LN2;function bs(n){return n>>>=0,n===0?32:31-(Cc(n)/Td|0)|0}var ws=256,Ss=4194304;function $n(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Oa(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=$n(u):(E&=A,E!==0?f=$n(E):o||(o=A&~n,o!==0&&(f=$n(o))))):(A=u&~g,A!==0?f=$n(A):E!==0?f=$n(E):o||(o=u&~n,o!==0&&(f=$n(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Rs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function vl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(){var n=ws;return ws<<=1,(ws&4194048)===0&&(ws=256),n}function Tl(){var n=Ss;return Ss<<=1,(Ss&62914560)===0&&(Ss=4194304),n}function Nr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Or(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Al(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,D=n.expirationTimes,j=n.hiddenUpdates;for(o=E&~o;0<o;){var W=31-tn(o),ee=1<<W;A[W]=0,D[W]=-1;var G=j[W];if(G!==null)for(j[W]=null,W=0;W<G.length;W++){var H=G[W];H!==null&&(H.lane&=-536870913)}o&=~ee}u!==0&&rr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function rr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-tn(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function bl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-tn(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function _i(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ma(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function vi(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:YE(n.type))}function xc(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var ot=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ot,It="__reactProps$"+ot,Pn="__reactContainer$"+ot,wl="__reactEvents$"+ot,Ad="__reactListeners$"+ot,Ei="__reactHandles$"+ot,Vc="__reactResources$"+ot,Is="__reactMarker$"+ot;function Ti(n){delete n[Ot],delete n[It],delete n[wl],delete n[Ad],delete n[Ei]}function Mr(n){var i=n[Ot];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Pn]||o[Ot]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=OE(n);n!==null;){if(o=n[Ot])return o;n=OE(n)}return i}n=o,o=n.parentNode}return null}function ir(n){if(n=n[Ot]||n[Pn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function sr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function un(n){var i=n[Vc];return i||(i=n[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(n){n[Is]=!0}var Sl=new Set,Pa={};function Xn(n,i){Pr(n,i),Pr(n+"Capture",i)}function Pr(n,i){for(Pa[n]=i,n=0;n<i.length;n++)Sl.add(i[n])}var Nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oc={},Ds={};function Mc(n){return vs.call(Ds,n)?!0:vs.call(Oc,n)?!1:Nc.test(n)?Ds[n]=!0:(Oc[n]=!0,!1)}function Ai(n,i,o){if(Mc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function ar(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Kt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var Cs,Pc;function Lr(n){if(Cs===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Cs=i&&i[1]||"",Pc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+n+Pc}var La=!1;function ka(n,i){if(!n||La)return"";La=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(H){var G=H}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(H){G=H}n.call(ee.prototype)}}else{try{throw Error()}catch(H){G=H}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(H){if(H&&G&&typeof H.stack=="string")return[H.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var D=E.split(`
`),j=A.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===j.length)for(u=D.length-1,f=j.length-1;1<=u&&0<=f&&D[u]!==j[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==j[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==j[f]){var W=`
`+D[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{La=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Lr(o):""}function Rl(n){switch(n.tag){case 26:case 27:case 5:return Lr(n.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 15:return ka(n.type,!1);case 11:return ka(n.type.render,!1);case 1:return ka(n.type,!0);case 31:return Lr("Activity");default:return""}}function Ua(n){try{var i="";do i+=Rl(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Il(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function bd(n){var i=Il(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ba(n){n._valueTracker||(n._valueTracker=bd(n))}function Dl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Il(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function xs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var wd=/[\n"\\]/g;function Dt(n){return n.replace(wd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wn(n,i,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+cn(i)):n.value!==""+cn(i)&&(n.value=""+cn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?bi(n,E,cn(i)):o!=null?bi(n,E,cn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+cn(A):n.removeAttribute("name")}function Vs(n,i,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+cn(o):"",i=i!=null?""+cn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function bi(n,i,o){i==="number"&&xs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function kr(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+cn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Ze(n,i,o){if(i!=null&&(i=""+cn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+cn(o):""}function Ns(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(st(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=cn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Ln(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Os=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Os.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Cl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Lc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&Lc(n,g,i[g])}function xl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(n){return Rd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ur=null;function kn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Br=null,zr=null;function Vl(n){var i=ir(n);if(i&&(n=i.stateNode)){var o=n[It]||null;e:switch(n=i.stateNode,i.type){case"input":if(wn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Dt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[It]||null;if(!f)throw Error(r(90));wn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Dl(u)}break e;case"textarea":Ze(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&kr(n,!!o.multiple,i,!1)}}}var or=!1;function kc(n,i,o){if(or)return n(i,o);or=!0;try{var u=n(i);return u}finally{if(or=!1,(Br!==null||zr!==null)&&(xh(),Br&&(i=Br,n=zr,zr=Br=null,Vl(i),n)))for(i=0;i<n.length;i++)Vl(n[i])}}function Ms(n,i){var o=n.stateNode;if(o===null)return null;var u=o[It]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(Zn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Un=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Un=!1}var lr=null,wi=null,qr=null;function Nl(){if(qr)return qr;var n,i=wi,o=i.length,u,f="value"in lr?lr.value:lr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return qr=f.slice(n,1<u?1-u:void 0)}function ur(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function cr(){return!0}function Ol(){return!1}function zt(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?cr:Ol,this.isPropagationStopped=Ol,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=zt(He),Ls=_({},He,{view:0,detail:0}),Uc=zt(Ls),ja,Fa,hr,ks=_({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hr&&(hr&&n.type==="mousemove"?(ja=n.screenX-hr.screenX,Fa=n.screenY-hr.screenY):Fa=ja=0,hr=n),ja)},movementY:function(n){return"movementY"in n?n.movementY:Fa}}),Bn=zt(ks),Bc=_({},ks,{dataTransfer:0}),Id=zt(Bc),Us=_({},Ls,{relatedTarget:0}),Ga=zt(Us),Ml=_({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=zt(Ml),zc=_({},He,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qa=zt(zc),Dd=_({},He,{data:0}),Pl=zt(Dd),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ll(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=jc[n])?!!i[n]:!1}function zs(){return Ll}var Fc=_({},Ls,{key:function(n){if(n.key){var i=Bs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ur(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(n){return n.type==="keypress"?ur(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ur(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ka=zt(Fc),Gc=_({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=zt(Gc),jr=_({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),Hc=zt(jr),Qc=_({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kc=zt(Qc),Yc=_({},ks,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ya=zt(Yc),hn=_({},He,{newState:0,oldState:0}),$c=zt(hn),Xc=[9,13,27,32],fr=Zn&&"CompositionEvent"in window,h=null;Zn&&"documentMode"in document&&(h=document.documentMode);var y=Zn&&"TextEvent"in window&&!h,v=Zn&&(!fr||h&&8<h&&11>=h),w=" ",B=!1;function $(n,i){switch(n){case"keyup":return Xc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ue=!1;function Mt(n,i){switch(n){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(B=!0,w);case"textInput":return n=i.data,n===w&&B?null:n;default:return null}}function Be(n,i){if(Ue)return n==="compositionend"||!fr&&$(n,i)?(n=Nl(),qr=wi=lr=null,Ue=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!qt[n.type]:i==="textarea"}function Fr(n,i,o,u){Br?zr?zr.push(u):zr=[u]:Br=u,i=Lh(i,"onChange"),0<i.length&&(o=new qa("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Yt=null,dr=null;function Ul(n){bE(n,0)}function Zc(n){var i=sr(n);if(Dl(i))return n}function Gy(n,i){if(n==="change")return i}var Hy=!1;if(Zn){var Cd;if(Zn){var xd="oninput"in document;if(!xd){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),xd=typeof Qy.oninput=="function"}Cd=xd}else Cd=!1;Hy=Cd&&(!document.documentMode||9<document.documentMode)}function Ky(){Yt&&(Yt.detachEvent("onpropertychange",Yy),dr=Yt=null)}function Yy(n){if(n.propertyName==="value"&&Zc(dr)){var i=[];Fr(i,dr,n,kn(n)),kc(Ul,i)}}function DS(n,i,o){n==="focusin"?(Ky(),Yt=i,dr=o,Yt.attachEvent("onpropertychange",Yy)):n==="focusout"&&Ky()}function CS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zc(dr)}function xS(n,i){if(n==="click")return Zc(i)}function VS(n,i){if(n==="input"||n==="change")return Zc(i)}function NS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:NS;function Bl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!vs.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function $y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Xy(n,i){var o=$y(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=$y(o)}}function Zy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Zy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Wy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=xs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=xs(n.document)}return i}function Vd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var OS=Zn&&"documentMode"in document&&11>=document.documentMode,$a=null,Nd=null,zl=null,Od=!1;function Jy(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Od||$a==null||$a!==xs(u)||(u=$a,"selectionStart"in u&&Vd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zl&&Bl(zl,u)||(zl=u,u=Lh(Nd,"onSelect"),0<u.length&&(i=new qa("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=$a)))}function qs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Xa={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Md={},e_={};Zn&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function js(n){if(Md[n])return Md[n];if(!Xa[n])return n;var i=Xa[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in e_)return Md[n]=i[o];return n}var t_=js("animationend"),n_=js("animationiteration"),r_=js("animationstart"),MS=js("transitionrun"),PS=js("transitionstart"),LS=js("transitioncancel"),i_=js("transitionend"),s_=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function Wn(n,i){s_.set(n,i),Xn(i,[n])}var a_=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var o=a_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ua(i)},a_.set(n,i),i)}return{value:n,source:i,stack:Ua(i)}}var qn=[],Za=0,Ld=0;function Wc(){for(var n=Za,i=Ld=Za=0;i<n;){var o=qn[i];qn[i++]=null;var u=qn[i];qn[i++]=null;var f=qn[i];qn[i++]=null;var g=qn[i];if(qn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&o_(o,f,g)}}function Jc(n,i,o,u){qn[Za++]=n,qn[Za++]=i,qn[Za++]=o,qn[Za++]=u,Ld|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function kd(n,i,o,u){return Jc(n,i,o,u),eh(n)}function Wa(n,i){return Jc(n,null,null,i),eh(n)}function o_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-tn(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function eh(n){if(50<hu)throw hu=0,Fm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ja={};function kS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,i,o,u){return new kS(n,i,o,u)}function Ud(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gr(n,i){var o=n.alternate;return o===null?(o=Rn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function l_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function th(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")Ud(n)&&(E=1);else if(typeof n=="string")E=BR(n,o,Te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Rn(31,o,i,f),n.elementType=I,n.lanes=g,n;case V:return Fs(o.children,f,g,i);case F:E=8,f|=24;break;case U:return n=Rn(12,o,i,f|2),n.elementType=U,n.lanes=g,n;case le:return n=Rn(13,o,i,f),n.elementType=le,n.lanes=g,n;case Ee:return n=Rn(19,o,i,f),n.elementType=Ee,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case K:E=10;break e;case ie:E=9;break e;case de:E=11;break e;case x:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=Rn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function Fs(n,i,o,u){return n=Rn(7,n,u,i),n.lanes=o,n}function Bd(n,i,o){return n=Rn(6,n,null,i),n.lanes=o,n}function zd(n,i,o){return i=Rn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var eo=[],to=0,nh=null,rh=0,jn=[],Fn=0,Gs=null,Hr=1,Qr="";function Hs(n,i){eo[to++]=rh,eo[to++]=nh,nh=n,rh=i}function u_(n,i,o){jn[Fn++]=Hr,jn[Fn++]=Qr,jn[Fn++]=Gs,Gs=n;var u=Hr;n=Qr;var f=32-tn(u)-1;u&=~(1<<f),o+=1;var g=32-tn(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Hr=1<<32-tn(i)+f|o<<f|u,Qr=g+n}else Hr=1<<g|o<<f|u,Qr=n}function qd(n){n.return!==null&&(Hs(n,1),u_(n,1,0))}function jd(n){for(;n===nh;)nh=eo[--to],eo[to]=null,rh=eo[--to],eo[to]=null;for(;n===Gs;)Gs=jn[--Fn],jn[Fn]=null,Qr=jn[--Fn],jn[Fn]=null,Hr=jn[--Fn],jn[Fn]=null}var fn=null,yt=null,Ge=!1,Qs=null,mr=!1,Fd=Error(r(519));function Ks(n){var i=Error(r(418,""));throw Fl(zn(i,n)),Fd}function c_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Ot]=n,i[It]=u,o){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(o=0;o<du.length;o++)Oe(du[o],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),Vs(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ba(i);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),Ns(i,u.value,u.defaultValue,u.children),Ba(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||IE(i.textContent,o)?(u.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),u.onScroll!=null&&Oe("scroll",i),u.onScrollEnd!=null&&Oe("scrollend",i),u.onClick!=null&&(i.onclick=kh),i=!0):i=!1,i||Ks(n)}function h_(n){for(fn=n.return;fn;)switch(fn.tag){case 5:case 13:mr=!1;return;case 27:case 3:mr=!0;return;default:fn=fn.return}}function ql(n){if(n!==fn)return!1;if(!Ge)return h_(n),Ge=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||sg(n.type,n.memoizedProps)),o=!o),o&&yt&&Ks(n),h_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){yt=er(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}yt=null}}else i===27?(i=yt,zi(n.type)?(n=ug,ug=null,yt=n):yt=i):yt=fn?er(n.stateNode.nextSibling):null;return!0}function jl(){yt=fn=null,Ge=!1}function f_(){var n=Qs;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Qs=null),n}function Fl(n){Qs===null?Qs=[n]:Qs.push(n)}var Gd=te(null),Ys=null,Kr=null;function Si(n,i,o){se(Gd,i._currentValue),i._currentValue=o}function Yr(n){n._currentValue=Gd.current,ce(Gd)}function Hd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Qd(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=f;for(var D=0;D<i.length;D++)if(A.context===i[D]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Hd(g.return,o,n),u||(E=null);break e}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Hd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Gl(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Sn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Bt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(vu):n=[vu])}f=f.return}n!==null&&Qd(i,n,o,u),i.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Ys=n,Kr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return d_(Ys,n)}function sh(n,i){return Ys===null&&$s(n),d_(n,i)}function d_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Kr===null){if(n===null)throw Error(r(308));Kr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Kr=Kr.next=i;return o}var US=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},BS=s.unstable_scheduleCallback,zS=s.unstable_NormalPriority,Lt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new US,data:new Map,refCount:0}}function Hl(n){n.refCount--,n.refCount===0&&BS(zS,function(){n.controller.abort()})}var Ql=null,Yd=0,no=0,ro=null;function qS(n,i){if(Ql===null){var o=Ql=[];Yd=0,no=Xm(),ro={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Yd++,i.then(m_,m_),i}function m_(){if(--Yd===0&&Ql!==null){ro!==null&&(ro.status="fulfilled");var n=Ql;Ql=null,no=0,ro=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function jS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var g_=Z.S;Z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&qS(n,i),g_!==null&&g_(n,i)};var Xs=te(null);function $d(){var n=Xs.current;return n!==null?n:rt.pooledCache}function ah(n,i){i===null?se(Xs,Xs.current):se(Xs,i.pool)}function p_(){var n=$d();return n===null?null:{parent:Lt._currentValue,pool:n}}var Kl=Error(r(460)),y_=Error(r(474)),oh=Error(r(542)),Xd={then:function(){}};function __(n){return n=n.status,n==="fulfilled"||n==="rejected"}function lh(){}function v_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(lh,lh),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,T_(n),n;default:if(typeof i.status=="string")i.then(lh,lh);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,T_(n),n}throw Yl=i,Kl}}var Yl=null;function E_(){if(Yl===null)throw Error(r(459));var n=Yl;return Yl=null,n}function T_(n){if(n===Kl||n===oh)throw Error(r(483))}var Ri=!1;function Zd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ii(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Di(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=eh(n),o_(n,null,o),i}return Jc(n,u,i,o),eh(n)}function $l(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,bl(n,o)}}function Jd(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var em=!1;function Xl(){if(em){var n=ro;if(n!==null)throw n}}function Zl(n,i,o,u){em=!1;var f=n.updateQueue;Ri=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,j=D.next;D.next=null,E===null?g=j:E.next=j,E=D;var W=n.alternate;W!==null&&(W=W.updateQueue,A=W.lastBaseUpdate,A!==E&&(A===null?W.firstBaseUpdate=j:A.next=j,W.lastBaseUpdate=D))}if(g!==null){var ee=f.baseState;E=0,W=j=D=null,A=g;do{var G=A.lane&-536870913,H=G!==A.lane;if(H?(ze&G)===G:(u&G)===G){G!==0&&G===no&&(em=!0),W!==null&&(W=W.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=n,Ae=A;G=i;var et=o;switch(Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){ee=Se.call(et,ee,G);break e}ee=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,G=typeof Se=="function"?Se.call(et,ee,G):Se,G==null)break e;ee=_({},ee,G);break e;case 2:Ri=!0}}G=A.callback,G!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[G]:H.push(G))}else H={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},W===null?(j=W=H,D=ee):W=W.next=H,E|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);W===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=j,f.lastBaseUpdate=W,g===null&&(f.shared.lanes=0),Li|=E,n.lanes=E,n.memoizedState=ee}}function A_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function b_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)A_(o[n],i)}var io=te(null),uh=te(0);function w_(n,i){n=ti,se(uh,n),se(io,i),ti=n|i.baseLanes}function tm(){se(uh,ti),se(io,io.current)}function nm(){ti=uh.current,ce(io),ce(uh)}var Ci=0,Ce=null,We=null,Ct=null,ch=!1,so=!1,Zs=!1,hh=0,Wl=0,ao=null,FS=0;function Tt(){throw Error(r(321))}function rm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Sn(n[o],i[o]))return!1;return!0}function im(n,i,o,u,f,g){return Ci=g,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?ov:lv,Zs=!1,g=o(u,f),Zs=!1,so&&(g=R_(i,o,u,f)),S_(n),g}function S_(n){Z.H=yh;var i=We!==null&&We.next!==null;if(Ci=0,Ct=We=Ce=null,ch=!1,Wl=0,ao=null,i)throw Error(r(300));n===null||jt||(n=n.dependencies,n!==null&&ih(n)&&(jt=!0))}function R_(n,i,o,u){Ce=n;var f=0;do{if(so&&(ao=null),Wl=0,so=!1,25<=f)throw Error(r(301));if(f+=1,Ct=We=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=XS,g=i(o,u)}while(so);return g}function GS(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?Jl(i):i,n=n.useState()[0],(We!==null?We.memoizedState:null)!==n&&(Ce.flags|=1024),i}function sm(){var n=hh!==0;return hh=0,n}function am(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function om(n){if(ch){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ch=!1}Ci=0,Ct=We=Ce=null,so=!1,Wl=hh=0,ao=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ce.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function xt(){if(We===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var i=Ct===null?Ce.memoizedState:Ct.next;if(i!==null)Ct=i,We=n;else{if(n===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ct===null?Ce.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(n){var i=Wl;return Wl+=1,ao===null&&(ao=[]),n=v_(ao,n,i),i=Ce,(Ct===null?i.memoizedState:Ct.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?ov:lv),n}function fh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Jl(n);if(n.$$typeof===K)return nn(n)}throw Error(r(438,String(n)))}function um(n){var i=null,o=Ce.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=lm(),Ce.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=O;return i.index++,o}function $r(n,i){return typeof i=="function"?i(n):i}function dh(n){var i=xt();return cm(i,We,n)}function cm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var A=E=null,D=null,j=i,W=!1;do{var ee=j.lane&-536870913;if(ee!==j.lane?(ze&ee)===ee:(Ci&ee)===ee){var G=j.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),ee===no&&(W=!0);else if((Ci&G)===G){j=j.next,G===no&&(W=!0);continue}else ee={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(A=D=ee,E=g):D=D.next=ee,Ce.lanes|=G,Li|=G;ee=j.action,Zs&&o(g,ee),g=j.hasEagerState?j.eagerState:o(g,ee)}else G={lane:ee,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},D===null?(A=D=G,E=g):D=D.next=G,Ce.lanes|=ee,Li|=ee;j=j.next}while(j!==null&&j!==i);if(D===null?E=g:D.next=A,!Sn(g,n.memoizedState)&&(jt=!0,W&&(o=ro,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=D,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function hm(n){var i=xt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Sn(g,i.memoizedState)||(jt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function I_(n,i,o){var u=Ce,f=xt(),g=Ge;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Sn((We||f).memoizedState,o);E&&(f.memoizedState=o,jt=!0),f=f.queue;var A=x_.bind(null,u,f,n);if(eu(2048,8,A,[n]),f.getSnapshot!==i||E||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,oo(9,mh(),C_.bind(null,u,f,o,i),null),rt===null)throw Error(r(349));g||(Ci&124)!==0||D_(u,i,o)}return o}function D_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Ce.updateQueue,i===null?(i=lm(),Ce.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function C_(n,i,o,u){i.value=o,i.getSnapshot=u,V_(i)&&N_(n)}function x_(n,i,o){return o(function(){V_(i)&&N_(n)})}function V_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Sn(n,o)}catch{return!0}}function N_(n){var i=Wa(n,2);i!==null&&Vn(i,n,2)}function fm(n){var i=yn();if(typeof n=="function"){var o=n;if(n=o(),Zs){bn(!0);try{o()}finally{bn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:n},i}function O_(n,i,o,u){return n.baseState=o,cm(n,We,typeof u=="function"?u:$r)}function HS(n,i,o,u,f){if(ph(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};Z.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,M_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function M_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=Z.T,E={};Z.T=E;try{var A=o(f,u),D=Z.S;D!==null&&D(E,A),P_(n,i,A)}catch(j){dm(n,i,j)}finally{Z.T=g}}else try{g=o(f,u),P_(n,i,g)}catch(j){dm(n,i,j)}}function P_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){L_(n,i,u)},function(u){return dm(n,i,u)}):L_(n,i,o)}function L_(n,i,o){i.status="fulfilled",i.value=o,k_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,M_(n,o)))}function dm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,k_(i),i=i.next;while(i!==u)}n.action=null}function k_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function U_(n,i){return i}function B_(n,i){if(Ge){var o=rt.formState;if(o!==null){e:{var u=Ce;if(Ge){if(yt){t:{for(var f=yt,g=mr;f.nodeType!==8;){if(!g){f=null;break t}if(f=er(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){yt=er(f.nextSibling),u=f.data==="F!";break e}}Ks(u)}u=!1}u&&(i=o[0])}}return o=yn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U_,lastRenderedState:i},o.queue=u,o=iv.bind(null,Ce,u),u.dispatch=o,u=fm(!1),g=_m.bind(null,Ce,!1,u.queue),u=yn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=HS.bind(null,Ce,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function z_(n){var i=xt();return q_(i,We,n)}function q_(n,i,o){if(i=cm(n,i,U_)[0],n=dh($r)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Jl(i)}catch(E){throw E===Kl?oh:E}else u=i;i=xt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Ce.flags|=2048,oo(9,mh(),QS.bind(null,f,o),null)),[u,g,n]}function QS(n,i){n.action=i}function j_(n){var i=xt(),o=We;if(o!==null)return q_(i,o,n);xt(),i=i.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function oo(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=lm(),Ce.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function mh(){return{destroy:void 0,resource:void 0}}function F_(){return xt().memoizedState}function gh(n,i,o,u){var f=yn();u=u===void 0?null:u,Ce.flags|=n,f.memoizedState=oo(1|i,mh(),o,u)}function eu(n,i,o,u){var f=xt();u=u===void 0?null:u;var g=f.memoizedState.inst;We!==null&&u!==null&&rm(u,We.memoizedState.deps)?f.memoizedState=oo(i,g,o,u):(Ce.flags|=n,f.memoizedState=oo(1|i,g,o,u))}function G_(n,i){gh(8390656,8,n,i)}function H_(n,i){eu(2048,8,n,i)}function Q_(n,i){return eu(4,2,n,i)}function K_(n,i){return eu(4,4,n,i)}function Y_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function $_(n,i,o){o=o!=null?o.concat([n]):null,eu(4,4,Y_.bind(null,i,n),o)}function mm(){}function X_(n,i){var o=xt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&rm(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function Z_(n,i){var o=xt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&rm(i,u[1]))return u[0];if(u=n(),Zs){bn(!0);try{n()}finally{bn(!1)}}return o.memoizedState=[u,i],u}function gm(n,i,o){return o===void 0||(Ci&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=eE(),Ce.lanes|=n,Li|=n,o)}function W_(n,i,o,u){return Sn(o,i)?o:io.current!==null?(n=gm(n,o,u),Sn(n,i)||(jt=!0),n):(Ci&42)===0?(jt=!0,n.memoizedState=o):(n=eE(),Ce.lanes|=n,Li|=n,i)}function J_(n,i,o,u,f){var g=ue.p;ue.p=g!==0&&8>g?g:8;var E=Z.T,A={};Z.T=A,_m(n,!1,i,o);try{var D=f(),j=Z.S;if(j!==null&&j(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=jS(D,u);tu(n,i,W,xn(n))}else tu(n,i,u,xn(n))}catch(ee){tu(n,i,{then:function(){},status:"rejected",reason:ee},xn())}finally{ue.p=g,Z.T=E}}function KS(){}function pm(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=ev(n).queue;J_(n,f,i,pe,o===null?KS:function(){return tv(n),o(u)})}function ev(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:pe},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function tv(n){var i=ev(n).next.queue;tu(n,i,{},xn())}function ym(){return nn(vu)}function nv(){return xt().memoizedState}function rv(){return xt().memoizedState}function YS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=xn();n=Ii(o);var u=Di(i,n,o);u!==null&&(Vn(u,i,o),$l(u,i,o)),i={cache:Kd()},n.payload=i;return}i=i.return}}function $S(n,i,o){var u=xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},ph(n)?sv(i,o):(o=kd(n,i,o,u),o!==null&&(Vn(o,n,u),av(o,i,u)))}function iv(n,i,o){var u=xn();tu(n,i,o,u)}function tu(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(ph(n))sv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,Sn(A,E))return Jc(n,i,f,0),rt===null&&Wc(),!1}catch{}finally{}if(o=kd(n,i,f,u),o!==null)return Vn(o,n,u),av(o,i,u),!0}return!1}function _m(n,i,o,u){if(u={lane:2,revertLane:Xm(),action:u,hasEagerState:!1,eagerState:null,next:null},ph(n)){if(i)throw Error(r(479))}else i=kd(n,o,u,2),i!==null&&Vn(i,n,2)}function ph(n){var i=n.alternate;return n===Ce||i!==null&&i===Ce}function sv(n,i){so=ch=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function av(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,bl(n,o)}}var yh={readContext:nn,use:fh,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},ov={readContext:nn,use:fh,useCallback:function(n,i){return yn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:G_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,gh(4194308,4,Y_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return gh(4194308,4,n,i)},useInsertionEffect:function(n,i){gh(4,2,n,i)},useMemo:function(n,i){var o=yn();i=i===void 0?null:i;var u=n();if(Zs){bn(!0);try{n()}finally{bn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=yn();if(o!==void 0){var f=o(i);if(Zs){bn(!0);try{o(i)}finally{bn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=$S.bind(null,Ce,n),[u.memoizedState,n]},useRef:function(n){var i=yn();return n={current:n},i.memoizedState=n},useState:function(n){n=fm(n);var i=n.queue,o=iv.bind(null,Ce,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:mm,useDeferredValue:function(n,i){var o=yn();return gm(o,n,i)},useTransition:function(){var n=fm(!1);return n=J_.bind(null,Ce,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Ce,f=yn();if(Ge){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),rt===null)throw Error(r(349));(ze&124)!==0||D_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,G_(x_.bind(null,u,g,n),[n]),u.flags|=2048,oo(9,mh(),C_.bind(null,u,g,o,i),null),o},useId:function(){var n=yn(),i=rt.identifierPrefix;if(Ge){var o=Qr,u=Hr;o=(u&~(1<<32-tn(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=hh++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=FS++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:ym,useFormState:B_,useActionState:B_,useOptimistic:function(n){var i=yn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=_m.bind(null,Ce,!0,o),o.dispatch=i,[n,i]},useMemoCache:um,useCacheRefresh:function(){return yn().memoizedState=YS.bind(null,Ce)}},lv={readContext:nn,use:fh,useCallback:X_,useContext:nn,useEffect:H_,useImperativeHandle:$_,useInsertionEffect:Q_,useLayoutEffect:K_,useMemo:Z_,useReducer:dh,useRef:F_,useState:function(){return dh($r)},useDebugValue:mm,useDeferredValue:function(n,i){var o=xt();return W_(o,We.memoizedState,n,i)},useTransition:function(){var n=dh($r)[0],i=xt().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ym,useFormState:z_,useActionState:z_,useOptimistic:function(n,i){var o=xt();return O_(o,We,n,i)},useMemoCache:um,useCacheRefresh:rv},XS={readContext:nn,use:fh,useCallback:X_,useContext:nn,useEffect:H_,useImperativeHandle:$_,useInsertionEffect:Q_,useLayoutEffect:K_,useMemo:Z_,useReducer:hm,useRef:F_,useState:function(){return hm($r)},useDebugValue:mm,useDeferredValue:function(n,i){var o=xt();return We===null?gm(o,n,i):W_(o,We.memoizedState,n,i)},useTransition:function(){var n=hm($r)[0],i=xt().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ym,useFormState:j_,useActionState:j_,useOptimistic:function(n,i){var o=xt();return We!==null?O_(o,We,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:um,useCacheRefresh:rv},lo=null,nu=0;function _h(n){var i=nu;return nu+=1,lo===null&&(lo=[]),v_(lo,n,i)}function ru(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function uv(n){var i=n._init;return i(n._payload)}function cv(n){function i(L,M){if(n){var q=L.deletions;q===null?(L.deletions=[M],L.flags|=16):q.push(M)}}function o(L,M){if(!n)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function u(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function f(L,M){return L=Gr(L,M),L.index=0,L.sibling=null,L}function g(L,M,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<M?(L.flags|=67108866,M):q):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,M,q,J){return M===null||M.tag!==6?(M=Bd(q,L.mode,J),M.return=L,M):(M=f(M,q),M.return=L,M)}function D(L,M,q,J){var ge=q.type;return ge===V?W(L,M,q.props.children,J,q.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&uv(ge)===M.type)?(M=f(M,q.props),ru(M,q),M.return=L,M):(M=th(q.type,q.key,q.props,null,L.mode,J),ru(M,q),M.return=L,M)}function j(L,M,q,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=zd(q,L.mode,J),M.return=L,M):(M=f(M,q.children||[]),M.return=L,M)}function W(L,M,q,J,ge){return M===null||M.tag!==7?(M=Fs(q,L.mode,J,ge),M.return=L,M):(M=f(M,q),M.return=L,M)}function ee(L,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Bd(""+M,L.mode,q),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return q=th(M.type,M.key,M.props,null,L.mode,q),ru(q,M),q.return=L,q;case R:return M=zd(M,L.mode,q),M.return=L,M;case S:var J=M._init;return M=J(M._payload),ee(L,M,q)}if(st(M)||k(M))return M=Fs(M,L.mode,q,null),M.return=L,M;if(typeof M.then=="function")return ee(L,_h(M),q);if(M.$$typeof===K)return ee(L,sh(L,M),q);vh(L,M)}return null}function G(L,M,q,J){var ge=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:A(L,M,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===ge?D(L,M,q,J):null;case R:return q.key===ge?j(L,M,q,J):null;case S:return ge=q._init,q=ge(q._payload),G(L,M,q,J)}if(st(q)||k(q))return ge!==null?null:W(L,M,q,J,null);if(typeof q.then=="function")return G(L,M,_h(q),J);if(q.$$typeof===K)return G(L,M,sh(L,q),J);vh(L,q)}return null}function H(L,M,q,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(q)||null,A(M,L,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return L=L.get(J.key===null?q:J.key)||null,D(M,L,J,ge);case R:return L=L.get(J.key===null?q:J.key)||null,j(M,L,J,ge);case S:var Ve=J._init;return J=Ve(J._payload),H(L,M,q,J,ge)}if(st(J)||k(J))return L=L.get(q)||null,W(M,L,J,ge,null);if(typeof J.then=="function")return H(L,M,q,_h(J),ge);if(J.$$typeof===K)return H(L,M,q,sh(M,J),ge);vh(M,J)}return null}function Se(L,M,q,J){for(var ge=null,Ve=null,ve=M,be=M=0,Gt=null;ve!==null&&be<q.length;be++){ve.index>be?(Gt=ve,ve=null):Gt=ve.sibling;var je=G(L,ve,q[be],J);if(je===null){ve===null&&(ve=Gt);break}n&&ve&&je.alternate===null&&i(L,ve),M=g(je,M,be),Ve===null?ge=je:Ve.sibling=je,Ve=je,ve=Gt}if(be===q.length)return o(L,ve),Ge&&Hs(L,be),ge;if(ve===null){for(;be<q.length;be++)ve=ee(L,q[be],J),ve!==null&&(M=g(ve,M,be),Ve===null?ge=ve:Ve.sibling=ve,Ve=ve);return Ge&&Hs(L,be),ge}for(ve=u(ve);be<q.length;be++)Gt=H(ve,L,be,q[be],J),Gt!==null&&(n&&Gt.alternate!==null&&ve.delete(Gt.key===null?be:Gt.key),M=g(Gt,M,be),Ve===null?ge=Gt:Ve.sibling=Gt,Ve=Gt);return n&&ve.forEach(function(Hi){return i(L,Hi)}),Ge&&Hs(L,be),ge}function Ae(L,M,q,J){if(q==null)throw Error(r(151));for(var ge=null,Ve=null,ve=M,be=M=0,Gt=null,je=q.next();ve!==null&&!je.done;be++,je=q.next()){ve.index>be?(Gt=ve,ve=null):Gt=ve.sibling;var Hi=G(L,ve,je.value,J);if(Hi===null){ve===null&&(ve=Gt);break}n&&ve&&Hi.alternate===null&&i(L,ve),M=g(Hi,M,be),Ve===null?ge=Hi:Ve.sibling=Hi,Ve=Hi,ve=Gt}if(je.done)return o(L,ve),Ge&&Hs(L,be),ge;if(ve===null){for(;!je.done;be++,je=q.next())je=ee(L,je.value,J),je!==null&&(M=g(je,M,be),Ve===null?ge=je:Ve.sibling=je,Ve=je);return Ge&&Hs(L,be),ge}for(ve=u(ve);!je.done;be++,je=q.next())je=H(ve,L,be,je.value,J),je!==null&&(n&&je.alternate!==null&&ve.delete(je.key===null?be:je.key),M=g(je,M,be),Ve===null?ge=je:Ve.sibling=je,Ve=je);return n&&ve.forEach(function(ZR){return i(L,ZR)}),Ge&&Hs(L,be),ge}function et(L,M,q,J){if(typeof q=="object"&&q!==null&&q.type===V&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:e:{for(var ge=q.key;M!==null;){if(M.key===ge){if(ge=q.type,ge===V){if(M.tag===7){o(L,M.sibling),J=f(M,q.props.children),J.return=L,L=J;break e}}else if(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&uv(ge)===M.type){o(L,M.sibling),J=f(M,q.props),ru(J,q),J.return=L,L=J;break e}o(L,M);break}else i(L,M);M=M.sibling}q.type===V?(J=Fs(q.props.children,L.mode,J,q.key),J.return=L,L=J):(J=th(q.type,q.key,q.props,null,L.mode,J),ru(J,q),J.return=L,L=J)}return E(L);case R:e:{for(ge=q.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){o(L,M.sibling),J=f(M,q.children||[]),J.return=L,L=J;break e}else{o(L,M);break}else i(L,M);M=M.sibling}J=zd(q,L.mode,J),J.return=L,L=J}return E(L);case S:return ge=q._init,q=ge(q._payload),et(L,M,q,J)}if(st(q))return Se(L,M,q,J);if(k(q)){if(ge=k(q),typeof ge!="function")throw Error(r(150));return q=ge.call(q),Ae(L,M,q,J)}if(typeof q.then=="function")return et(L,M,_h(q),J);if(q.$$typeof===K)return et(L,M,sh(L,q),J);vh(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(o(L,M.sibling),J=f(M,q),J.return=L,L=J):(o(L,M),J=Bd(q,L.mode,J),J.return=L,L=J),E(L)):o(L,M)}return function(L,M,q,J){try{nu=0;var ge=et(L,M,q,J);return lo=null,ge}catch(ve){if(ve===Kl||ve===oh)throw ve;var Ve=Rn(29,ve,null,L.mode);return Ve.lanes=J,Ve.return=L,Ve}finally{}}}var uo=cv(!0),hv=cv(!1),Gn=te(null),gr=null;function xi(n){var i=n.alternate;se(kt,kt.current&1),se(Gn,n),gr===null&&(i===null||io.current!==null||i.memoizedState!==null)&&(gr=n)}function fv(n){if(n.tag===22){if(se(kt,kt.current),se(Gn,n),gr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(gr=n)}}else Vi()}function Vi(){se(kt,kt.current),se(Gn,Gn.current)}function Xr(n){ce(Gn),gr===n&&(gr=null),ce(kt)}var kt=te(0);function Eh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||lg(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function vm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Em={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=xn(),f=Ii(u);f.payload=i,o!=null&&(f.callback=o),i=Di(n,f,u),i!==null&&(Vn(i,n,u),$l(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=xn(),f=Ii(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Di(n,f,u),i!==null&&(Vn(i,n,u),$l(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=xn(),u=Ii(o);u.tag=2,i!=null&&(u.callback=i),i=Di(n,u,o),i!==null&&(Vn(i,n,o),$l(i,n,o))}};function dv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Bl(o,u)||!Bl(f,g):!0}function mv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Em.enqueueReplaceState(i,i.state,null)}function Ws(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Th=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function gv(n){Th(n)}function pv(n){console.error(n)}function yv(n){Th(n)}function Ah(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function _v(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Tm(n,i,o){return o=Ii(o),o.tag=3,o.payload={element:null},o.callback=function(){Ah(n,i)},o}function vv(n){return n=Ii(n),n.tag=3,n}function Ev(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){_v(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){_v(i,o,u),typeof f!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function ZS(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Gl(i,o,f,!0),o=Gn.current,o!==null){switch(o.tag){case 13:return gr===null?Hm():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Xd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Km(n,u,f)),!1;case 22:return o.flags|=65536,u===Xd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Km(n,u,f)),!1}throw Error(r(435,o.tag))}return Km(n,u,f),Hm(),!1}if(Ge)return i=Gn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Fd&&(n=Error(r(422),{cause:u}),Fl(zn(n,o)))):(u!==Fd&&(i=Error(r(423),{cause:u}),Fl(zn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=zn(u,o),f=Tm(n.stateNode,u,f),Jd(n,f),_t!==4&&(_t=2)),!1;var g=Error(r(520),{cause:u});if(g=zn(g,o),cu===null?cu=[g]:cu.push(g),_t!==4&&(_t=2),i===null)return!0;u=zn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Tm(o.stateNode,u,n),Jd(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ki===null||!ki.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=vv(f),Ev(f,n,o,u),Jd(o,f),!1}o=o.return}while(o!==null);return!1}var Tv=Error(r(461)),jt=!1;function $t(n,i,o,u){i.child=n===null?hv(i,null,o,u):uo(i,n.child,o,u)}function Av(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return $s(i),u=im(n,i,o,E,g,f),A=sm(),n!==null&&!jt?(am(n,i,f),Zr(n,i,f)):(Ge&&A&&qd(i),i.flags|=1,$t(n,i,u,f),i.child)}function bv(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!Ud(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,wv(n,i,g,u,f)):(n=th(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Cm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Bl,o(E,u)&&n.ref===i.ref)return Zr(n,i,f)}return i.flags|=1,n=Gr(g,u),n.ref=i.ref,n.return=i,i.child=n}function wv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(Bl(g,u)&&n.ref===i.ref)if(jt=!1,i.pendingProps=u=g,Cm(n,f))(n.flags&131072)!==0&&(jt=!0);else return i.lanes=n.lanes,Zr(n,i,f)}return Am(n,i,o,u,f)}function Sv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return Rv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ah(i,g!==null?g.cachePool:null),g!==null?w_(i,g):tm(),fv(i);else return i.lanes=i.childLanes=536870912,Rv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(ah(i,g.cachePool),w_(i,g),Vi(),i.memoizedState=null):(n!==null&&ah(i,null),tm(),Vi());return $t(n,i,f,o),i.child}function Rv(n,i,o,u){var f=$d();return f=f===null?null:{parent:Lt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&ah(i,null),tm(),fv(i),n!==null&&Gl(n,i,u,!0),null}function bh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Am(n,i,o,u,f){return $s(i),o=im(n,i,o,u,void 0,f),u=sm(),n!==null&&!jt?(am(n,i,f),Zr(n,i,f)):(Ge&&u&&qd(i),i.flags|=1,$t(n,i,o,f),i.child)}function Iv(n,i,o,u,f,g){return $s(i),i.updateQueue=null,o=R_(i,u,o,f),S_(n),u=sm(),n!==null&&!jt?(am(n,i,g),Zr(n,i,g)):(Ge&&u&&qd(i),i.flags|=1,$t(n,i,o,g),i.child)}function Dv(n,i,o,u,f){if($s(i),i.stateNode===null){var g=Ja,E=o.contextType;typeof E=="object"&&E!==null&&(g=nn(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Em,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Zd(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?nn(E):Ja,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(vm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Em.enqueueReplaceState(g,g.state,null),Zl(i,u,g,f),Xl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var A=i.memoizedProps,D=Ws(o,A);g.props=D;var j=g.context,W=o.contextType;E=Ja,typeof W=="object"&&W!==null&&(E=nn(W));var ee=o.getDerivedStateFromProps;W=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||j!==E)&&mv(i,g,u,E),Ri=!1;var G=i.memoizedState;g.state=G,Zl(i,u,g,f),Xl(),j=i.memoizedState,A||G!==j||Ri?(typeof ee=="function"&&(vm(i,o,ee,u),j=i.memoizedState),(D=Ri||dv(i,o,D,u,G,j,E))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=j),g.props=u,g.state=j,g.context=E,u=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Wd(n,i),E=i.memoizedProps,W=Ws(o,E),g.props=W,ee=i.pendingProps,G=g.context,j=o.contextType,D=Ja,typeof j=="object"&&j!==null&&(D=nn(j)),A=o.getDerivedStateFromProps,(j=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ee||G!==D)&&mv(i,g,u,D),Ri=!1,G=i.memoizedState,g.state=G,Zl(i,u,g,f),Xl();var H=i.memoizedState;E!==ee||G!==H||Ri||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof A=="function"&&(vm(i,o,A,u),H=i.memoizedState),(W=Ri||dv(i,o,W,u,G,H,D)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=D,u=W):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,bh(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=uo(i,n.child,null,f),i.child=uo(i,null,o,f)):$t(n,i,o,f),i.memoizedState=g.state,n=i.child):n=Zr(n,i,f),n}function Cv(n,i,o,u){return jl(),i.flags|=256,$t(n,i,o,u),i.child}var bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wm(n){return{baseLanes:n,cachePool:p_()}}function Sm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Hn),n}function xv(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(kt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ge){if(f?xi(i):Vi(),Ge){var A=yt,D;if(D=A){e:{for(D=A,A=mr;D.nodeType!==8;){if(!A){A=null;break e}if(D=er(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(i.memoizedState={dehydrated:A,treeContext:Gs!==null?{id:Hr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},D=Rn(18,null,null,0),D.stateNode=A,D.return=i,i.child=D,fn=i,yt=null,D=!0):D=!1}D||Ks(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return lg(A)?i.lanes=32:i.lanes=536870912,null;Xr(i)}return A=u.children,u=u.fallback,f?(Vi(),f=i.mode,A=wh({mode:"hidden",children:A},f),u=Fs(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=wm(o),f.childLanes=Sm(n,E,o),i.memoizedState=bm,u):(xi(i),Rm(i,A))}if(D=n.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(g)i.flags&256?(xi(i),i.flags&=-257,i=Im(n,i,o)):i.memoizedState!==null?(Vi(),i.child=n.child,i.flags|=128,i=null):(Vi(),f=u.fallback,A=i.mode,u=wh({mode:"visible",children:u.children},A),f=Fs(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,uo(i,n.child,null,o),u=i.child,u.memoizedState=wm(o),u.childLanes=Sm(n,E,o),i.memoizedState=bm,i=f);else if(xi(i),lg(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var j=E.dgst;E=j,u=Error(r(419)),u.stack="",u.digest=E,Fl({value:u,source:null,stack:null}),i=Im(n,i,o)}else if(jt||Gl(n,i,o,!1),E=(o&n.childLanes)!==0,jt||E){if(E=rt,E!==null&&(u=o&-o,u=(u&42)!==0?1:_i(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,Wa(n,u),Vn(E,n,u),Tv;A.data==="$?"||Hm(),i=Im(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,yt=er(A.nextSibling),fn=i,Ge=!0,Qs=null,mr=!1,n!==null&&(jn[Fn++]=Hr,jn[Fn++]=Qr,jn[Fn++]=Gs,Hr=n.id,Qr=n.overflow,Gs=i),i=Rm(i,u.children),i.flags|=4096);return i}return f?(Vi(),f=u.fallback,A=i.mode,D=n.child,j=D.sibling,u=Gr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,j!==null?f=Gr(j,f):(f=Fs(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=n.child.memoizedState,A===null?A=wm(o):(D=A.cachePool,D!==null?(j=Lt._currentValue,D=D.parent!==j?{parent:j,pool:j}:D):D=p_(),A={baseLanes:A.baseLanes|o,cachePool:D}),f.memoizedState=A,f.childLanes=Sm(n,E,o),i.memoizedState=bm,u):(xi(i),o=n.child,n=o.sibling,o=Gr(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Rm(n,i){return i=wh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function wh(n,i){return n=Rn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Im(n,i,o){return uo(i,n.child,null,o),n=Rm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Vv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Hd(n.return,i,o)}function Dm(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function Nv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if($t(n,i,u.children,o),u=kt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vv(n,o,i);else if(n.tag===19)Vv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(se(kt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Eh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Dm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Eh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Dm(i,!0,o,null,g);break;case"together":Dm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Zr(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Li|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Gl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Gr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Gr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Cm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function WS(n,i,o){switch(i.tag){case 3:nt(i,i.stateNode.containerInfo),Si(i,Lt,n.memoizedState.cache),jl();break;case 27:case 5:yi(i);break;case 4:nt(i,i.stateNode.containerInfo);break;case 10:Si(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(xi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?xv(n,i,o):(xi(i),n=Zr(n,i,o),n!==null?n.sibling:null);xi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Gl(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Nv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(kt,kt.current),u)break;return null;case 22:case 23:return i.lanes=0,Sv(n,i,o);case 24:Si(i,Lt,n.memoizedState.cache)}return Zr(n,i,o)}function Ov(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)jt=!0;else{if(!Cm(n,o)&&(i.flags&128)===0)return jt=!1,WS(n,i,o);jt=(n.flags&131072)!==0}else jt=!1,Ge&&(i.flags&1048576)!==0&&u_(i,rh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Ud(u)?(n=Ws(u,n),i.tag=1,i=Dv(null,i,u,n,o)):(i.tag=0,i=Am(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===de){i.tag=11,i=Av(null,i,u,n,o);break e}else if(f===x){i.tag=14,i=bv(null,i,u,n,o);break e}}throw i=Rt(u)||u,Error(r(306,i,""))}}return i;case 0:return Am(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Ws(u,i.pendingProps),Dv(n,i,u,f,o);case 3:e:{if(nt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,Wd(n,i),Zl(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Si(i,Lt,u),u!==g.cache&&Qd(i,[Lt],o,!0),Xl(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Cv(n,i,u,o);break e}else if(u!==f){f=zn(Error(r(424)),i),Fl(f),i=Cv(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(yt=er(n.firstChild),fn=i,Ge=!0,Qs=null,mr=!0,o=hv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(jl(),u===f){i=Zr(n,i,o);break e}$t(n,i,u,o)}i=i.child}return i;case 26:return bh(n,i),n===null?(o=kE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ge||(o=i.type,n=i.pendingProps,u=Uh(Re.current).createElement(o),u[Ot]=i,u[It]=n,Zt(u,o,n),Et(u),i.stateNode=u):i.memoizedState=kE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return yi(i),n===null&&Ge&&(u=i.stateNode=ME(i.type,i.pendingProps,Re.current),fn=i,mr=!0,f=yt,zi(i.type)?(ug=f,yt=er(u.firstChild)):yt=f),$t(n,i,i.pendingProps.children,o),bh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ge&&((f=u=yt)&&(u=RR(u,i.type,i.pendingProps,mr),u!==null?(i.stateNode=u,fn=i,yt=er(u.firstChild),mr=!1,f=!0):f=!1),f||Ks(i)),yi(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,sg(f,g)?u=null:E!==null&&sg(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=im(n,i,GS,null,null,o),vu._currentValue=f),bh(n,i),$t(n,i,u,o),i.child;case 6:return n===null&&Ge&&((n=o=yt)&&(o=IR(o,i.pendingProps,mr),o!==null?(i.stateNode=o,fn=i,yt=null,n=!0):n=!1),n||Ks(i)),null;case 13:return xv(n,i,o);case 4:return nt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=uo(i,null,u,o):$t(n,i,u,o),i.child;case 11:return Av(n,i,i.type,i.pendingProps,o);case 7:return $t(n,i,i.pendingProps,o),i.child;case 8:return $t(n,i,i.pendingProps.children,o),i.child;case 12:return $t(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Si(i,i.type,u.value),$t(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,$s(i),f=nn(f),u=u(f),i.flags|=1,$t(n,i,u,o),i.child;case 14:return bv(n,i,i.type,i.pendingProps,o);case 15:return wv(n,i,i.type,i.pendingProps,o);case 19:return Nv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=wh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Gr(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Sv(n,i,o);case 24:return $s(i),u=nn(Lt),n===null?(f=$d(),f===null&&(f=rt,g=Kd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},Zd(i),Si(i,Lt,f)):((n.lanes&o)!==0&&(Wd(n,i),Zl(i,null,null,o),Xl()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Si(i,Lt,u)):(u=g.cache,Si(i,Lt,u),u!==f.cache&&Qd(i,[Lt],o,!0))),$t(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Wr(n){n.flags|=4}function Mv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!jE(i)){if(i=Gn.current,i!==null&&((ze&4194048)===ze?gr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||i!==gr))throw Yl=Xd,y_;n.flags|=8192}}function Sh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tl():536870912,n.lanes|=i,mo|=i)}function iu(n,i){if(!Ge)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function dt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function JS(n,i,o){var u=i.pendingProps;switch(jd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return dt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Yr(Lt),nr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ql(i)?Wr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,f_())),dt(i),null;case 26:return o=i.memoizedState,n===null?(Wr(i),o!==null?(dt(i),Mv(i,o)):(dt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Wr(i),dt(i),Mv(i,o)):(dt(i),i.flags&=-16777217):(n.memoizedProps!==u&&Wr(i),dt(i),i.flags&=-16777217),null;case 27:Vr(i),o=Re.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Wr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return dt(i),null}n=Te.current,ql(i)?c_(i):(n=ME(f,u,o),i.stateNode=n,Wr(i))}return dt(i),null;case 5:if(Vr(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Wr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return dt(i),null}if(n=Te.current,ql(i))c_(i);else{switch(f=Uh(Re.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Ot]=i,n[It]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Zt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Wr(i)}}return dt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Wr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=Re.current,ql(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=fn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ot]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||IE(n.nodeValue,o)),n||Ks(i)}else n=Uh(n).createTextNode(u),n[Ot]=i,i.stateNode=n}return dt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ql(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ot]=i}else jl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),f=!1}else f=f_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Xr(i),i):(Xr(i),null)}if(Xr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Sh(i,i.updateQueue),dt(i),null;case 4:return nr(),n===null&&eg(i.stateNode.containerInfo),dt(i),null;case 10:return Yr(i.type),dt(i),null;case 19:if(ce(kt),f=i.memoizedState,f===null)return dt(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)iu(f,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Eh(n),g!==null){for(i.flags|=128,iu(f,!1),n=g.updateQueue,i.updateQueue=n,Sh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)l_(o,n),o=o.sibling;return se(kt,kt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Mn()>Dh&&(i.flags|=128,u=!0,iu(f,!1),i.lanes=4194304)}else{if(!u)if(n=Eh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Sh(i,n),iu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ge)return dt(i),null}else 2*Mn()-f.renderingStartTime>Dh&&o!==536870912&&(i.flags|=128,u=!0,iu(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Mn(),i.sibling=null,n=kt.current,se(kt,u?n&1|2:n&1),i):(dt(i),null);case 22:case 23:return Xr(i),nm(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),o=i.updateQueue,o!==null&&Sh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&ce(Xs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Yr(Lt),dt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function eR(n,i){switch(jd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Yr(Lt),nr(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Vr(i),null;case 13:if(Xr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));jl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ce(kt),null;case 4:return nr(),null;case 10:return Yr(i.type),null;case 22:case 23:return Xr(i),nm(),n!==null&&ce(Xs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Yr(Lt),null;case 25:return null;default:return null}}function Pv(n,i){switch(jd(i),i.tag){case 3:Yr(Lt),nr();break;case 26:case 27:case 5:Vr(i);break;case 4:nr();break;case 13:Xr(i);break;case 19:ce(kt);break;case 10:Yr(i.type);break;case 22:case 23:Xr(i),nm(),n!==null&&ce(Xs);break;case 24:Yr(Lt)}}function su(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){tt(i,i.return,A)}}function Ni(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var D=o,j=A;try{j()}catch(W){tt(f,D,W)}}}u=u.next}while(u!==g)}}catch(W){tt(i,i.return,W)}}function Lv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{b_(i,o)}catch(u){tt(n,n.return,u)}}}function kv(n,i,o){o.props=Ws(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,i,u)}}function au(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){tt(n,i,f)}}function pr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){tt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){tt(n,i,f)}else o.current=null}function Uv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){tt(n,n.return,f)}}function xm(n,i,o){try{var u=n.stateNode;TR(u,n.type,o,i),u[It]=i}catch(f){tt(n,n.return,f)}}function Bv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&zi(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=kh));else if(u!==4&&(u===27&&zi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Nm(n,i,o),n=n.sibling;n!==null;)Nm(n,i,o),n=n.sibling}function Rh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&zi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Rh(n,i,o),n=n.sibling;n!==null;)Rh(n,i,o),n=n.sibling}function zv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Zt(i,u,o),i[Ot]=n,i[It]=o}catch(g){tt(n,n.return,g)}}var Jr=!1,At=!1,Om=!1,qv=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function tR(n,i){if(n=n.containerInfo,rg=Gh,n=Wy(n),Vd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,A=-1,D=-1,j=0,W=0,ee=n,G=null;t:for(;;){for(var H;ee!==o||f!==0&&ee.nodeType!==3||(A=E+f),ee!==g||u!==0&&ee.nodeType!==3||(D=E+u),ee.nodeType===3&&(E+=ee.nodeValue.length),(H=ee.firstChild)!==null;)G=ee,ee=H;for(;;){if(ee===n)break t;if(G===o&&++j===f&&(A=E),G===g&&++W===u&&(D=E),(H=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=H}o=A===-1||D===-1?null:{start:A,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ig={focusedElem:n,selectionRange:o},Gh=!1,Ft=i;Ft!==null;)if(i=Ft,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ft=n;else for(;Ft!==null;){switch(i=Ft,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Se=Ws(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Se,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){tt(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)og(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":og(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ft=n;break}Ft=i.return}}function jv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Oi(n,o),u&4&&su(5,o);break;case 1:if(Oi(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){tt(o,o.return,E)}else{var f=Ws(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(o,o.return,E)}}u&64&&Lv(o),u&512&&au(o,o.return);break;case 3:if(Oi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{b_(n,i)}catch(E){tt(o,o.return,E)}}break;case 27:i===null&&u&4&&zv(o);case 26:case 5:Oi(n,o),i===null&&u&4&&Uv(o),u&512&&au(o,o.return);break;case 12:Oi(n,o);break;case 13:Oi(n,o),u&4&&Hv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=cR.bind(null,o),DR(n,o))));break;case 22:if(u=o.memoizedState!==null||Jr,!u){i=i!==null&&i.memoizedState!==null||At,f=Jr;var g=At;Jr=u,(At=i)&&!g?Mi(n,o,(o.subtreeFlags&8772)!==0):Oi(n,o),Jr=f,At=g}break;case 30:break;default:Oi(n,o)}}function Fv(n){var i=n.alternate;i!==null&&(n.alternate=null,Fv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ti(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,_n=!1;function ei(n,i,o){for(o=o.child;o!==null;)Gv(n,i,o),o=o.sibling}function Gv(n,i,o){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(pt,o)}catch{}switch(o.tag){case 26:At||pr(o,i),ei(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||pr(o,i);var u=lt,f=_n;zi(o.type)&&(lt=o.stateNode,_n=!1),ei(n,i,o),gu(o.stateNode),lt=u,_n=f;break;case 5:At||pr(o,i);case 6:if(u=lt,f=_n,lt=null,ei(n,i,o),lt=u,_n=f,lt!==null)if(_n)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(o.stateNode)}catch(g){tt(o,i,g)}else try{lt.removeChild(o.stateNode)}catch(g){tt(o,i,g)}break;case 18:lt!==null&&(_n?(n=lt,NE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),bu(n)):NE(lt,o.stateNode));break;case 4:u=lt,f=_n,lt=o.stateNode.containerInfo,_n=!0,ei(n,i,o),lt=u,_n=f;break;case 0:case 11:case 14:case 15:At||Ni(2,o,i),At||Ni(4,o,i),ei(n,i,o);break;case 1:At||(pr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&kv(o,i,u)),ei(n,i,o);break;case 21:ei(n,i,o);break;case 22:At=(u=At)||o.memoizedState!==null,ei(n,i,o),At=u;break;default:ei(n,i,o)}}function Hv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bu(n)}catch(o){tt(i,i.return,o)}}function nR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new qv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new qv),i;default:throw Error(r(435,n.tag))}}function Mm(n,i){var o=nR(n);i.forEach(function(u){var f=hR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function In(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(zi(A.type)){lt=A.stateNode,_n=!1;break e}break;case 5:lt=A.stateNode,_n=!1;break e;case 3:case 4:lt=A.stateNode.containerInfo,_n=!0;break e}A=A.return}if(lt===null)throw Error(r(160));Gv(g,E,f),lt=null,_n=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Qv(i,n),i=i.sibling}var Jn=null;function Qv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:In(i,n),Dn(n),u&4&&(Ni(3,n,n.return),su(3,n),Ni(5,n,n.return));break;case 1:In(i,n),Dn(n),u&512&&(At||o===null||pr(o,o.return)),u&64&&Jr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Jn;if(In(i,n),Dn(n),u&512&&(At||o===null||pr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Is]||g[Ot]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Zt(g,u,o),g[Ot]=n,Et(g),u=g;break e;case"link":var E=zE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}g=f.createElement(u),Zt(g,u,o),f.head.appendChild(g);break;case"meta":if(E=zE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}g=f.createElement(u),Zt(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Ot]=n,Et(g),u=g}n.stateNode=u}else qE(f,n.type,n.stateNode);else n.stateNode=BE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?qE(f,n.type,n.stateNode):BE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&xm(n,n.memoizedProps,o.memoizedProps)}break;case 27:In(i,n),Dn(n),u&512&&(At||o===null||pr(o,o.return)),o!==null&&u&4&&xm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(In(i,n),Dn(n),u&512&&(At||o===null||pr(o,o.return)),n.flags&32){f=n.stateNode;try{Ln(f,"")}catch(H){tt(n,n.return,H)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,xm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Om=!0);break;case 6:if(In(i,n),Dn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(H){tt(n,n.return,H)}}break;case 3:if(qh=null,f=Jn,Jn=Bh(i.containerInfo),In(i,n),Jn=f,Dn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{bu(i.containerInfo)}catch(H){tt(n,n.return,H)}Om&&(Om=!1,Kv(n));break;case 4:u=Jn,Jn=Bh(n.stateNode.containerInfo),In(i,n),Dn(n),Jn=u;break;case 12:In(i,n),Dn(n);break;case 13:In(i,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(zm=Mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mm(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,j=Jr,W=At;if(Jr=j||f,At=W||D,In(i,n),At=W,Jr=j,Dn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||Jr||At||Js(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(H){tt(D,D.return,H)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(H){tt(D,D.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Mm(n,o))));break;case 19:In(i,n),Dn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Mm(n,u)));break;case 30:break;case 21:break;default:In(i,n),Dn(n)}}function Dn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Bv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Vm(n);Rh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Ln(E,""),o.flags&=-33);var A=Vm(n);Rh(n,A,E);break;case 3:case 4:var D=o.stateNode.containerInfo,j=Vm(n);Nm(n,j,D);break;default:throw Error(r(161))}}catch(W){tt(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Kv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Kv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Oi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)jv(n,i.alternate,i),i=i.sibling}function Js(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ni(4,i,i.return),Js(i);break;case 1:pr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&kv(i,i.return,o),Js(i);break;case 27:gu(i.stateNode);case 26:case 5:pr(i,i.return),Js(i);break;case 22:i.memoizedState===null&&Js(i);break;case 30:Js(i);break;default:Js(i)}n=n.sibling}}function Mi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Mi(f,g,o),su(4,g);break;case 1:if(Mi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){tt(u,u.return,j)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)A_(D[f],A)}catch(j){tt(u,u.return,j)}}o&&E&64&&Lv(g),au(g,g.return);break;case 27:zv(g);case 26:case 5:Mi(f,g,o),o&&u===null&&E&4&&Uv(g),au(g,g.return);break;case 12:Mi(f,g,o);break;case 13:Mi(f,g,o),o&&E&4&&Hv(f,g);break;case 22:g.memoizedState===null&&Mi(f,g,o),au(g,g.return);break;case 30:break;default:Mi(f,g,o)}i=i.sibling}}function Pm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Hl(o))}function Lm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Hl(n))}function yr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yv(n,i,o,u),i=i.sibling}function Yv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:yr(n,i,o,u),f&2048&&su(9,i);break;case 1:yr(n,i,o,u);break;case 3:yr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Hl(n)));break;case 12:if(f&2048){yr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){tt(i,i.return,D)}}else yr(n,i,o,u);break;case 13:yr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?yr(n,i,o,u):ou(n,i):g._visibility&2?yr(n,i,o,u):(g._visibility|=2,co(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Pm(E,i);break;case 24:yr(n,i,o,u),f&2048&&Lm(i.alternate,i);break;default:yr(n,i,o,u)}}function co(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,A=o,D=u,j=E.flags;switch(E.tag){case 0:case 11:case 15:co(g,E,A,D,f),su(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?co(g,E,A,D,f):ou(g,E):(W._visibility|=2,co(g,E,A,D,f)),f&&j&2048&&Pm(E.alternate,E);break;case 24:co(g,E,A,D,f),f&&j&2048&&Lm(E.alternate,E);break;default:co(g,E,A,D,f)}i=i.sibling}}function ou(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:ou(o,u),f&2048&&Pm(u.alternate,u);break;case 24:ou(o,u),f&2048&&Lm(u.alternate,u);break;default:ou(o,u)}i=i.sibling}}var lu=8192;function ho(n){if(n.subtreeFlags&lu)for(n=n.child;n!==null;)$v(n),n=n.sibling}function $v(n){switch(n.tag){case 26:ho(n),n.flags&lu&&n.memoizedState!==null&&qR(Jn,n.memoizedState,n.memoizedProps);break;case 5:ho(n);break;case 3:case 4:var i=Jn;Jn=Bh(n.stateNode.containerInfo),ho(n),Jn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=lu,lu=16777216,ho(n),lu=i):ho(n));break;default:ho(n)}}function Xv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function uu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ft=u,Wv(u,n)}Xv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 0:case 11:case 15:uu(n),n.flags&2048&&Ni(9,n,n.return);break;case 3:uu(n);break;case 12:uu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ih(n)):uu(n);break;default:uu(n)}}function Ih(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ft=u,Wv(u,n)}Xv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ni(8,i,i.return),Ih(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ih(i));break;default:Ih(i)}n=n.sibling}}function Wv(n,i){for(;Ft!==null;){var o=Ft;switch(o.tag){case 0:case 11:case 15:Ni(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ft=u;else e:for(o=n;Ft!==null;){u=Ft;var f=u.sibling,g=u.return;if(Fv(u),u===o){Ft=null;break e}if(f!==null){f.return=g,Ft=f;break e}Ft=g}}}var rR={getCacheForType:function(n){var i=nn(Lt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},iR=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,Ne=null,ze=0,Ye=0,Cn=null,Pi=!1,fo=!1,km=!1,ti=0,_t=0,Li=0,ea=0,Um=0,Hn=0,mo=0,cu=null,vn=null,Bm=!1,zm=0,Dh=1/0,Ch=null,ki=null,Xt=0,Ui=null,go=null,po=0,qm=0,jm=null,Jv=null,hu=0,Fm=null;function xn(){if((Ke&2)!==0&&ze!==0)return ze&-ze;if(Z.T!==null){var n=no;return n!==0?n:Xm()}return vi()}function eE(){Hn===0&&(Hn=(ze&536870912)===0||Ge?El():536870912);var n=Gn.current;return n!==null&&(n.flags|=32),Hn}function Vn(n,i,o){(n===rt&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(yo(n,0),Bi(n,ze,Hn,!1)),Or(n,o),((Ke&2)===0||n!==rt)&&(n===rt&&((Ke&2)===0&&(ea|=o),_t===4&&Bi(n,ze,Hn,!1)),_r(n))}function tE(n,i,o){if((Ke&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Rs(n,i),f=u?oR(n,i):Qm(n,i,!0),g=u;do{if(f===0){fo&&!u&&Bi(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!sR(o)){f=Qm(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=n;f=cu;var D=A.current.memoizedState.isDehydrated;if(D&&(yo(A,E).flags|=256),E=Qm(A,E,!1),E!==2){if(km&&!D){A.errorRecoveryDisabledLanes|=g,ea|=g,f=4;break e}g=vn,vn=f,g!==null&&(vn===null?vn=g:vn.push.apply(vn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){yo(n,0),Bi(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Bi(u,i,Hn,!Pi);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=zm+300-Mn(),10<f)){if(Bi(u,i,Hn,!Pi),Oa(u,0,!0)!==0)break e;u.timeoutHandle=xE(nE.bind(null,u,o,vn,Ch,Bm,i,Hn,ea,mo,Pi,g,2,-0,0),f);break e}nE(u,o,vn,Ch,Bm,i,Hn,ea,mo,Pi,g,0,-0,0)}}break}while(!0);_r(n)}function nE(n,i,o,u,f,g,E,A,D,j,W,ee,G,H){if(n.timeoutHandle=-1,ee=i.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(_u={stylesheets:null,count:0,unsuspend:zR},$v(i),ee=jR(),ee!==null)){n.cancelPendingCommit=ee(uE.bind(null,n,i,g,o,u,f,E,A,D,W,1,G,H)),Bi(n,g,E,!j);return}uE(n,i,g,o,u,f,E,A,D)}function sR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Sn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(n,i,o,u){i&=~Um,i&=~ea,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-tn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&rr(n,o,i)}function xh(){return(Ke&6)===0?(fu(0),!1):!0}function Gm(){if(Ne!==null){if(Ye===0)var n=Ne.return;else n=Ne,Kr=Ys=null,om(n),lo=null,nu=0,n=Ne;for(;n!==null;)Pv(n.alternate,n),n=n.return;Ne=null}}function yo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,bR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Gm(),rt=n,Ne=o=Gr(n.current,null),ze=i,Ye=0,Cn=null,Pi=!1,fo=Rs(n,i),km=!1,mo=Hn=Um=ea=Li=_t=0,vn=cu=null,Bm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-tn(u),g=1<<f;i|=n[f],u&=~g}return ti=i,Wc(),o}function rE(n,i){Ce=null,Z.H=yh,i===Kl||i===oh?(i=E_(),Ye=3):i===y_?(i=E_(),Ye=4):Ye=i===Tv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Ne===null&&(_t=1,Ah(n,zn(i,n.current)))}function iE(){var n=Z.H;return Z.H=yh,n===null?yh:n}function sE(){var n=Z.A;return Z.A=rR,n}function Hm(){_t=4,Pi||(ze&4194048)!==ze&&Gn.current!==null||(fo=!0),(Li&134217727)===0&&(ea&134217727)===0||rt===null||Bi(rt,ze,Hn,!1)}function Qm(n,i,o){var u=Ke;Ke|=2;var f=iE(),g=sE();(rt!==n||ze!==i)&&(Ch=null,yo(n,i)),i=!1;var E=_t;e:do try{if(Ye!==0&&Ne!==null){var A=Ne,D=Cn;switch(Ye){case 8:Gm(),E=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(i=!0);var j=Ye;if(Ye=0,Cn=null,_o(n,A,D,j),o&&fo){E=0;break e}break;default:j=Ye,Ye=0,Cn=null,_o(n,A,D,j)}}aR(),E=_t;break}catch(W){rE(n,W)}while(!0);return i&&n.shellSuspendCounter++,Kr=Ys=null,Ke=u,Z.H=f,Z.A=g,Ne===null&&(rt=null,ze=0,Wc()),E}function aR(){for(;Ne!==null;)aE(Ne)}function oR(n,i){var o=Ke;Ke|=2;var u=iE(),f=sE();rt!==n||ze!==i?(Ch=null,Dh=Mn()+500,yo(n,i)):fo=Rs(n,i);e:do try{if(Ye!==0&&Ne!==null){i=Ne;var g=Cn;t:switch(Ye){case 1:Ye=0,Cn=null,_o(n,i,g,1);break;case 2:case 9:if(__(g)){Ye=0,Cn=null,oE(i);break}i=function(){Ye!==2&&Ye!==9||rt!==n||(Ye=7),_r(n)},g.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:__(g)?(Ye=0,Cn=null,oE(i)):(Ye=0,Cn=null,_o(n,i,g,7));break;case 5:var E=null;switch(Ne.tag){case 26:E=Ne.memoizedState;case 5:case 27:var A=Ne;if(!E||jE(E)){Ye=0,Cn=null;var D=A.sibling;if(D!==null)Ne=D;else{var j=A.return;j!==null?(Ne=j,Vh(j)):Ne=null}break t}}Ye=0,Cn=null,_o(n,i,g,5);break;case 6:Ye=0,Cn=null,_o(n,i,g,6);break;case 8:Gm(),_t=6;break e;default:throw Error(r(462))}}lR();break}catch(W){rE(n,W)}while(!0);return Kr=Ys=null,Z.H=u,Z.A=f,Ke=o,Ne!==null?0:(rt=null,ze=0,Wc(),_t)}function lR(){for(;Ne!==null&&!pl();)aE(Ne)}function aE(n){var i=Ov(n.alternate,n,ti);n.memoizedProps=n.pendingProps,i===null?Vh(n):Ne=i}function oE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Iv(o,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=Iv(o,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:om(i);default:Pv(o,i),i=Ne=l_(i,ti),i=Ov(o,i,ti)}n.memoizedProps=n.pendingProps,i===null?Vh(n):Ne=i}function _o(n,i,o,u){Kr=Ys=null,om(i),lo=null,nu=0;var f=i.return;try{if(ZS(n,f,i,o,ze)){_t=1,Ah(n,zn(o,n.current)),Ne=null;return}}catch(g){if(f!==null)throw Ne=f,g;_t=1,Ah(n,zn(o,n.current)),Ne=null;return}i.flags&32768?(Ge||u===1?n=!0:fo||(ze&536870912)!==0?n=!1:(Pi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gn.current,u!==null&&u.tag===13&&(u.flags|=16384))),lE(i,n)):Vh(i)}function Vh(n){var i=n;do{if((i.flags&32768)!==0){lE(i,Pi);return}n=i.return;var o=JS(i.alternate,i,ti);if(o!==null){Ne=o;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=n}while(i!==null);_t===0&&(_t=5)}function lE(n,i){do{var o=eR(n.alternate,n);if(o!==null){o.flags&=32767,Ne=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ne=n;return}Ne=n=o}while(n!==null);_t=6,Ne=null}function uE(n,i,o,u,f,g,E,A,D){n.cancelPendingCommit=null;do Nh();while(Xt!==0);if((Ke&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Ld,Al(n,o,g,E,A,D),n===rt&&(Ne=rt=null,ze=0),go=i,Ui=n,po=o,qm=g,jm=f,Jv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,fR(As,function(){return mE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null,f=ue.p,ue.p=2,E=Ke,Ke|=4;try{tR(n,i,o)}finally{Ke=E,ue.p=f,Z.T=u}}Xt=1,cE(),hE(),fE()}}function cE(){if(Xt===1){Xt=0;var n=Ui,i=go,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var u=ue.p;ue.p=2;var f=Ke;Ke|=4;try{Qv(i,n);var g=ig,E=Wy(n.containerInfo),A=g.focusedElem,D=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&Zy(A.ownerDocument.documentElement,A)){if(D!==null&&Vd(A)){var j=D.start,W=D.end;if(W===void 0&&(W=j),"selectionStart"in A)A.selectionStart=j,A.selectionEnd=Math.min(W,A.value.length);else{var ee=A.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var H=G.getSelection(),Se=A.textContent.length,Ae=Math.min(D.start,Se),et=D.end===void 0?Ae:Math.min(D.end,Se);!H.extend&&Ae>et&&(E=et,et=Ae,Ae=E);var L=Xy(A,Ae),M=Xy(A,et);if(L&&M&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),H.removeAllRanges(),Ae>et?(H.addRange(q),H.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),H.addRange(q))}}}}for(ee=[],H=A;H=H.parentNode;)H.nodeType===1&&ee.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var J=ee[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Gh=!!rg,ig=rg=null}finally{Ke=f,ue.p=u,Z.T=o}}n.current=i,Xt=2}}function hE(){if(Xt===2){Xt=0;var n=Ui,i=go,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var u=ue.p;ue.p=2;var f=Ke;Ke|=4;try{jv(n,i.alternate,i)}finally{Ke=f,ue.p=u,Z.T=o}}Xt=3}}function fE(){if(Xt===4||Xt===3){Xt=0,Ic();var n=Ui,i=go,o=po,u=Jv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xt=5:(Xt=0,go=Ui=null,dE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ki=null),Ma(o),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(pt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Z.T,f=ue.p,ue.p=2,Z.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{Z.T=i,ue.p=f}}(po&3)!==0&&Nh(),_r(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Fm?hu++:(hu=0,Fm=n):hu=0,fu(0)}}function dE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Hl(i)))}function Nh(n){return cE(),hE(),fE(),mE()}function mE(){if(Xt!==5)return!1;var n=Ui,i=qm;qm=0;var o=Ma(po),u=Z.T,f=ue.p;try{ue.p=32>o?32:o,Z.T=null,o=jm,jm=null;var g=Ui,E=po;if(Xt=0,go=Ui=null,po=0,(Ke&6)!==0)throw Error(r(331));var A=Ke;if(Ke|=4,Zv(g.current),Yv(g,g.current,E,o),Ke=A,fu(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(pt,g)}catch{}return!0}finally{ue.p=f,Z.T=u,dE(n,i)}}function gE(n,i,o){i=zn(o,i),i=Tm(n.stateNode,i,2),n=Di(n,i,2),n!==null&&(Or(n,2),_r(n))}function tt(n,i,o){if(n.tag===3)gE(n,n,o);else for(;i!==null;){if(i.tag===3){gE(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ki===null||!ki.has(u))){n=zn(o,n),o=vv(2),u=Di(i,o,2),u!==null&&(Ev(o,u,i,n),Or(u,2),_r(u));break}}i=i.return}}function Km(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new iR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(km=!0,f.add(o),n=uR.bind(null,n,i,o),i.then(n,n))}function uR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,rt===n&&(ze&o)===o&&(_t===4||_t===3&&(ze&62914560)===ze&&300>Mn()-zm?(Ke&2)===0&&yo(n,0):Um|=o,mo===ze&&(mo=0)),_r(n)}function pE(n,i){i===0&&(i=Tl()),n=Wa(n,i),n!==null&&(Or(n,i),_r(n))}function cR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),pE(n,o)}function hR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),pE(n,o)}function fR(n,i){return Es(n,i)}var Oh=null,vo=null,Ym=!1,Mh=!1,$m=!1,ta=0;function _r(n){n!==vo&&n.next===null&&(vo===null?Oh=vo=n:vo=vo.next=n),Mh=!0,Ym||(Ym=!0,mR())}function fu(n,i){if(!$m&&Mh){$m=!0;do for(var o=!1,u=Oh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-tn(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,EE(u,g))}else g=ze,g=Oa(u,u===rt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Rs(u,g)||(o=!0,EE(u,g));u=u.next}while(o);$m=!1}}function dR(){yE()}function yE(){Mh=Ym=!1;var n=0;ta!==0&&(AR()&&(n=ta),ta=0);for(var i=Mn(),o=null,u=Oh;u!==null;){var f=u.next,g=_E(u,i);g===0?(u.next=null,o===null?Oh=f:o.next=f,f===null&&(vo=o)):(o=u,(n!==0||(g&3)!==0)&&(Mh=!0)),u=f}fu(n)}function _E(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-tn(g),A=1<<E,D=f[E];D===-1?((A&o)===0||(A&u)!==0)&&(f[E]=vl(A,i)):D<=i&&(n.expiredLanes|=A),g&=~A}if(i=rt,o=ze,o=Oa(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ts(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Rs(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&Ts(u),Ma(o)){case 2:case 8:o=Va;break;case 32:o=As;break;case 268435456:o=Na;break;default:o=As}return u=vE.bind(null,n),o=Es(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&Ts(u),n.callbackPriority=2,n.callbackNode=null,2}function vE(n,i){if(Xt!==0&&Xt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Nh()&&n.callbackNode!==o)return null;var u=ze;return u=Oa(n,n===rt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(tE(n,u,i),_E(n,Mn()),n.callbackNode!=null&&n.callbackNode===o?vE.bind(null,n):null)}function EE(n,i){if(Nh())return null;tE(n,i,!0)}function mR(){wR(function(){(Ke&6)!==0?Es(yl,dR):yE()})}function Xm(){return ta===0&&(ta=El()),ta}function TE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:za(""+n)}function AE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function gR(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=TE((f[It]||null).action),E=u.submitter;E&&(i=(i=E[It]||null)?TE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new qa("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ta!==0){var D=E?AE(f,E):new FormData(f);pm(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=E?AE(f,E):new FormData(f),pm(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Zm=0;Zm<Pd.length;Zm++){var Wm=Pd[Zm],pR=Wm.toLowerCase(),yR=Wm[0].toUpperCase()+Wm.slice(1);Wn(pR,"on"+yR)}Wn(t_,"onAnimationEnd"),Wn(n_,"onAnimationIteration"),Wn(r_,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(MS,"onTransitionRun"),Wn(PS,"onTransitionStart"),Wn(LS,"onTransitionCancel"),Wn(i_,"onTransitionEnd"),Pr("onMouseEnter",["mouseout","mouseover"]),Pr("onMouseLeave",["mouseout","mouseover"]),Pr("onPointerEnter",["pointerout","pointerover"]),Pr("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function bE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],D=A.instance,j=A.currentTarget;if(A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=j;try{g(f)}catch(W){Th(W)}f.currentTarget=null,g=D}else for(E=0;E<u.length;E++){if(A=u[E],D=A.instance,j=A.currentTarget,A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=j;try{g(f)}catch(W){Th(W)}f.currentTarget=null,g=D}}}}function Oe(n,i){var o=i[wl];o===void 0&&(o=i[wl]=new Set);var u=n+"__bubble";o.has(u)||(wE(i,n,2,!1),o.add(u))}function Jm(n,i,o){var u=0;i&&(u|=4),wE(o,n,u,i)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function eg(n){if(!n[Ph]){n[Ph]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(_R.has(o)||Jm(o,!1,n),Jm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ph]||(i[Ph]=!0,Jm("selectionchange",!1,i))}}function wE(n,i,o,u){switch(YE(i)){case 2:var f=HR;break;case 8:f=QR;break;default:f=mg}o=f.bind(null,i,o,n),f=void 0,!Un||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function tg(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Mr(A),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=g=E;continue e}A=A.parentNode}}u=u.return}kc(function(){var j=g,W=kn(o),ee=[];e:{var G=s_.get(n);if(G!==void 0){var H=qa,Se=n;switch(n){case"keypress":if(ur(o)===0)break e;case"keydown":case"keyup":H=Ka;break;case"focusin":Se="focus",H=Ga;break;case"focusout":Se="blur",H=Ga;break;case"beforeblur":case"afterblur":H=Ga;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Hc;break;case t_:case n_:case r_:H=Ha;break;case i_:H=Kc;break;case"scroll":case"scrollend":H=Uc;break;case"wheel":H=Ya;break;case"copy":case"cut":case"paste":H=Qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=kl;break;case"toggle":case"beforetoggle":H=$c}var Ae=(i&4)!==0,et=!Ae&&(n==="scroll"||n==="scrollend"),L=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var M=j,q;M!==null;){var J=M;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||L===null||(J=Ms(M,L),J!=null&&Ae.push(mu(M,J,q))),et)break;M=M.return}0<Ae.length&&(G=new H(G,Se,null,o,W),ee.push({event:G,listeners:Ae}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",G&&o!==Ur&&(Se=o.relatedTarget||o.fromElement)&&(Mr(Se)||Se[Pn]))break e;if((H||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,H?(Se=o.relatedTarget||o.toElement,H=j,Se=Se?Mr(Se):null,Se!==null&&(et=l(Se),Ae=Se.tag,Se!==et||Ae!==5&&Ae!==27&&Ae!==6)&&(Se=null)):(H=null,Se=j),H!==Se)){if(Ae=Bn,J="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=kl,J="onPointerLeave",L="onPointerEnter",M="pointer"),et=H==null?G:sr(H),q=Se==null?G:sr(Se),G=new Ae(J,M+"leave",H,o,W),G.target=et,G.relatedTarget=q,J=null,Mr(W)===j&&(Ae=new Ae(L,M+"enter",Se,o,W),Ae.target=q,Ae.relatedTarget=et,J=Ae),et=J,H&&Se)t:{for(Ae=H,L=Se,M=0,q=Ae;q;q=Eo(q))M++;for(q=0,J=L;J;J=Eo(J))q++;for(;0<M-q;)Ae=Eo(Ae),M--;for(;0<q-M;)L=Eo(L),q--;for(;M--;){if(Ae===L||L!==null&&Ae===L.alternate)break t;Ae=Eo(Ae),L=Eo(L)}Ae=null}else Ae=null;H!==null&&SE(ee,G,H,Ae,!1),Se!==null&&et!==null&&SE(ee,et,Se,Ae,!0)}}e:{if(G=j?sr(j):window,H=G.nodeName&&G.nodeName.toLowerCase(),H==="select"||H==="input"&&G.type==="file")var ge=Gy;else if(Pt(G))if(Hy)ge=VS;else{ge=CS;var Ve=DS}else H=G.nodeName,!H||H.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&xl(j.elementType)&&(ge=Gy):ge=xS;if(ge&&(ge=ge(n,j))){Fr(ee,ge,o,W);break e}Ve&&Ve(n,G,j),n==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&bi(G,"number",G.value)}switch(Ve=j?sr(j):window,n){case"focusin":(Pt(Ve)||Ve.contentEditable==="true")&&($a=Ve,Nd=j,zl=null);break;case"focusout":zl=Nd=$a=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,Jy(ee,o,W);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Jy(ee,o,W)}var ve;if(fr)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ue?$(n,o)&&(be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(v&&o.locale!=="ko"&&(Ue||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ue&&(ve=Nl()):(lr=W,wi="value"in lr?lr.value:lr.textContent,Ue=!0)),Ve=Lh(j,be),0<Ve.length&&(be=new Pl(be,n,null,o,W),ee.push({event:be,listeners:Ve}),ve?be.data=ve:(ve=oe(o),ve!==null&&(be.data=ve)))),(ve=y?Mt(n,o):Be(n,o))&&(be=Lh(j,"onBeforeInput"),0<be.length&&(Ve=new Pl("onBeforeInput","beforeinput",null,o,W),ee.push({event:Ve,listeners:be}),Ve.data=ve)),gR(ee,n,j,o,W)}bE(ee,i)})}function mu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Lh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Ms(n,o),f!=null&&u.unshift(mu(n,f,g)),f=Ms(n,i),f!=null&&u.push(mu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function SE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var A=o,D=A.alternate,j=A.stateNode;if(A=A.tag,D!==null&&D===u)break;A!==5&&A!==26&&A!==27||j===null||(D=j,f?(j=Ms(o,g),j!=null&&E.unshift(mu(o,j,D))):f||(j=Ms(o,g),j!=null&&E.push(mu(o,j,D)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var vR=/\r\n?/g,ER=/\u0000|\uFFFD/g;function RE(n){return(typeof n=="string"?n:""+n).replace(vR,`
`).replace(ER,"")}function IE(n,i){return i=RE(i),RE(n)===i}function kh(){}function Je(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Ln(n,""+u);break;case"className":ar(n,"class",u);break;case"tabIndex":ar(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ar(n,o,u);break;case"style":Cl(n,u,g);break;case"data":if(i!=="object"){ar(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=za(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Je(n,i,"name",f.name,f,null),Je(n,i,"formEncType",f.formEncType,f,null),Je(n,i,"formMethod",f.formMethod,f,null),Je(n,i,"formTarget",f.formTarget,f,null)):(Je(n,i,"encType",f.encType,f,null),Je(n,i,"method",f.method,f,null),Je(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=za(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=kh);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=za(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),Ai(n,"popover",u);break;case"xlinkActuate":Kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Kt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Kt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Kt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Kt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ai(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Sd.get(o)||o,Ai(n,o,u))}}function ng(n,i,o,u,f,g){switch(o){case"style":Cl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ln(n,u):(typeof u=="number"||typeof u=="bigint")&&Ln(n,""+u);break;case"onScroll":u!=null&&Oe("scroll",n);break;case"onScrollEnd":u!=null&&Oe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=kh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[It]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ai(n,o,u)}}}function Zt(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Je(n,i,g,E,o,null)}}f&&Je(n,i,"srcSet",o.srcSet,o,null),u&&Je(n,i,"src",o.src,o,null);return;case"input":Oe("invalid",n);var A=g=E=f=null,D=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":D=W;break;case"defaultChecked":j=W;break;case"value":g=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:Je(n,i,u,W,o,null)}}Vs(n,g,A,D,j,E,f,!1),Ba(n);return;case"select":Oe("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:Je(n,i,f,A,o,null)}i=g,o=E,n.multiple=!!u,i!=null?kr(n,!!u,i,!1):o!=null&&kr(n,!!u,o,!0);return;case"textarea":Oe("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Je(n,i,E,A,o,null)}Ns(n,u,f,g),Ba(n);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Je(n,i,D,u,o,null)}return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(u=0;u<du.length;u++)Oe(du[u],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Je(n,i,j,u,o,null)}return;default:if(xl(i)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&ng(n,i,W,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&Je(n,i,A,u,o,null))}function TR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,D=null,j=null,W=null;for(H in o){var ee=o[H];if(o.hasOwnProperty(H)&&ee!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":D=ee;default:u.hasOwnProperty(H)||Je(n,i,H,null,u,ee)}}for(var G in u){var H=u[G];if(ee=o[G],u.hasOwnProperty(G)&&(H!=null||ee!=null))switch(G){case"type":g=H;break;case"name":f=H;break;case"checked":j=H;break;case"defaultChecked":W=H;break;case"value":E=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==ee&&Je(n,i,G,H,u,ee)}}wn(n,E,A,D,j,W,g,f);return;case"select":H=E=A=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":H=D;default:u.hasOwnProperty(g)||Je(n,i,g,null,u,D)}for(f in u)if(g=u[f],D=o[f],u.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":G=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==D&&Je(n,i,f,g,u,D)}i=A,o=E,u=H,G!=null?kr(n,!!o,G,!1):!!u!=!!o&&(i!=null?kr(n,!!o,i,!0):kr(n,!!o,o?[]:"",!1));return;case"textarea":H=G=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Je(n,i,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":G=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&Je(n,i,E,f,u,g)}Ze(n,G,H);return;case"option":for(var Se in o)if(G=o[Se],o.hasOwnProperty(Se)&&G!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:Je(n,i,Se,null,u,G)}for(D in u)if(G=u[D],H=o[D],u.hasOwnProperty(D)&&G!==H&&(G!=null||H!=null))switch(D){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Je(n,i,D,G,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)G=o[Ae],o.hasOwnProperty(Ae)&&G!=null&&!u.hasOwnProperty(Ae)&&Je(n,i,Ae,null,u,G);for(j in u)if(G=u[j],H=o[j],u.hasOwnProperty(j)&&G!==H&&(G!=null||H!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Je(n,i,j,G,u,H)}return;default:if(xl(i)){for(var et in o)G=o[et],o.hasOwnProperty(et)&&G!==void 0&&!u.hasOwnProperty(et)&&ng(n,i,et,void 0,u,G);for(W in u)G=u[W],H=o[W],!u.hasOwnProperty(W)||G===H||G===void 0&&H===void 0||ng(n,i,W,G,u,H);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&Je(n,i,L,null,u,G);for(ee in u)G=u[ee],H=o[ee],!u.hasOwnProperty(ee)||G===H||G==null&&H==null||Je(n,i,ee,G,u,H)}var rg=null,ig=null;function Uh(n){return n.nodeType===9?n:n.ownerDocument}function DE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function sg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ag=null;function AR(){var n=window.event;return n&&n.type==="popstate"?n===ag?!1:(ag=n,!0):(ag=null,!1)}var xE=typeof setTimeout=="function"?setTimeout:void 0,bR=typeof clearTimeout=="function"?clearTimeout:void 0,VE=typeof Promise=="function"?Promise:void 0,wR=typeof queueMicrotask=="function"?queueMicrotask:typeof VE<"u"?function(n){return VE.resolve(null).then(n).catch(SR)}:xE;function SR(n){setTimeout(function(){throw n})}function zi(n){return n==="head"}function NE(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&gu(E.documentElement),o&2&&gu(E.body),o&4)for(o=E.head,gu(o),E=o.firstChild;E;){var A=E.nextSibling,D=E.nodeName;E[Is]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),bu(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);bu(i)}function og(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":og(o),Ti(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function RR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Is])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=er(n.nextSibling),n===null)break}return null}function IR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=er(n.nextSibling),n===null))return null;return n}function lg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function DR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function er(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var ug=null;function OE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function ME(n,i,o){switch(i=Uh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function gu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ti(n)}var Qn=new Map,PE=new Set;function Bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ni=ue.d;ue.d={f:CR,r:xR,D:VR,C:NR,L:OR,m:MR,X:LR,S:PR,M:kR};function CR(){var n=ni.f(),i=xh();return n||i}function xR(n){var i=ir(n);i!==null&&i.tag===5&&i.type==="form"?tv(i):ni.r(n)}var To=typeof document>"u"?null:document;function LE(n,i,o){var u=To;if(u&&typeof i=="string"&&i){var f=Dt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),PE.has(f)||(PE.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Zt(i,"link",n),Et(i),u.head.appendChild(i)))}}function VR(n){ni.D(n),LE("dns-prefetch",n,null)}function NR(n,i){ni.C(n,i),LE("preconnect",n,i)}function OR(n,i,o){ni.L(n,i,o);var u=To;if(u&&n&&i){var f='link[rel="preload"][as="'+Dt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Dt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Dt(o.imageSizes)+'"]')):f+='[href="'+Dt(n)+'"]';var g=f;switch(i){case"style":g=Ao(n);break;case"script":g=bo(n)}Qn.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Qn.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(pu(g))||i==="script"&&u.querySelector(yu(g))||(i=u.createElement("link"),Zt(i,"link",n),Et(i),u.head.appendChild(i)))}}function MR(n,i){ni.m(n,i);var o=To;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Dt(u)+'"][href="'+Dt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=bo(n)}if(!Qn.has(g)&&(n=_({rel:"modulepreload",href:n},i),Qn.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yu(g)))return}u=o.createElement("link"),Zt(u,"link",n),Et(u),o.head.appendChild(u)}}}function PR(n,i,o){ni.S(n,i,o);var u=To;if(u&&n){var f=un(u).hoistableStyles,g=Ao(n);i=i||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(pu(g)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Qn.get(g))&&cg(n,o);var D=E=u.createElement("link");Et(D),Zt(D,"link",n),D._p=new Promise(function(j,W){D.onload=j,D.onerror=W}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,zh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function LR(n,i){ni.X(n,i);var o=To;if(o&&n){var u=un(o).hoistableScripts,f=bo(n),g=u.get(f);g||(g=o.querySelector(yu(f)),g||(n=_({src:n,async:!0},i),(i=Qn.get(f))&&hg(n,i),g=o.createElement("script"),Et(g),Zt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function kR(n,i){ni.M(n,i);var o=To;if(o&&n){var u=un(o).hoistableScripts,f=bo(n),g=u.get(f);g||(g=o.querySelector(yu(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&hg(n,i),g=o.createElement("script"),Et(g),Zt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function kE(n,i,o,u){var f=(f=Re.current)?Bh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ao(o.href),o=un(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ao(o.href);var g=un(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(pu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),Qn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qn.set(n,o),g||UR(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=bo(o),o=un(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ao(n){return'href="'+Dt(n)+'"'}function pu(n){return'link[rel="stylesheet"]['+n+"]"}function UE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function UR(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Zt(i,"link",o),Et(i),n.head.appendChild(i))}function bo(n){return'[src="'+Dt(n)+'"]'}function yu(n){return"script[async]"+n}function BE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Dt(o.href)+'"]');if(u)return i.instance=u,Et(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Et(u),Zt(u,"style",f),zh(u,o.precedence,n),i.instance=u;case"stylesheet":f=Ao(o.href);var g=n.querySelector(pu(f));if(g)return i.state.loading|=4,i.instance=g,Et(g),g;u=UE(o),(f=Qn.get(f))&&cg(u,f),g=(n.ownerDocument||n).createElement("link"),Et(g);var E=g;return E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Zt(g,"link",u),i.state.loading|=4,zh(g,o.precedence,n),i.instance=g;case"script":return g=bo(o.src),(f=n.querySelector(yu(g)))?(i.instance=f,Et(f),f):(u=o,(f=Qn.get(g))&&(u=_({},o),hg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Et(f),Zt(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,zh(u,o.precedence,n));return i.instance}function zh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function cg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function hg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var qh=null;function zE(n,i,o){if(qh===null){var u=new Map,f=qh=new Map;f.set(o,u)}else f=qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Is]||g[Ot]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function qE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function BR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function jE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var _u=null;function zR(){}function qR(n,i,o){if(_u===null)throw Error(r(475));var u=_u;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ao(o.href),g=n.querySelector(pu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=jh.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,Et(g);return}g=n.ownerDocument||n,o=UE(o),(f=Qn.get(f))&&cg(o,f),g=g.createElement("link"),Et(g);var E=g;E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Zt(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=jh.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function jR(){if(_u===null)throw Error(r(475));var n=_u;return n.stylesheets&&n.count===0&&fg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&fg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function jh(){if(this.count--,this.count===0){if(this.stylesheets)fg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Fh=null;function fg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Fh=new Map,i.forEach(FR,n),Fh=null,jh.call(n))}function FR(n,i){if(!(i.state.loading&4)){var o=Fh.get(n);if(o)var u=o.get(null);else{o=new Map,Fh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=jh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var vu={$$typeof:K,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function GR(n,i,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nr(0),this.hiddenUpdates=Nr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function FE(n,i,o,u,f,g,E,A,D,j,W,ee){return n=new GR(n,i,o,E,A,D,j,ee),i=1,g===!0&&(i|=24),g=Rn(3,null,null,i),n.current=g,g.stateNode=n,i=Kd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},Zd(g),n}function GE(n){return n?(n=Ja,n):Ja}function HE(n,i,o,u,f,g){f=GE(f),u.context===null?u.context=f:u.pendingContext=f,u=Ii(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Di(n,u,i),o!==null&&(Vn(o,n,i),$l(o,n,i))}function QE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function dg(n,i){QE(n,i),(n=n.alternate)&&QE(n,i)}function KE(n){if(n.tag===13){var i=Wa(n,67108864);i!==null&&Vn(i,n,67108864),dg(n,67108864)}}var Gh=!0;function HR(n,i,o,u){var f=Z.T;Z.T=null;var g=ue.p;try{ue.p=2,mg(n,i,o,u)}finally{ue.p=g,Z.T=f}}function QR(n,i,o,u){var f=Z.T;Z.T=null;var g=ue.p;try{ue.p=8,mg(n,i,o,u)}finally{ue.p=g,Z.T=f}}function mg(n,i,o,u){if(Gh){var f=gg(u);if(f===null)tg(n,i,u,Hh,o),$E(n,u);else if(YR(f,n,i,o,u))u.stopPropagation();else if($E(n,u),i&4&&-1<KR.indexOf(n)){for(;f!==null;){var g=ir(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=$n(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var D=1<<31-tn(E);A.entanglements[1]|=D,E&=~D}_r(g),(Ke&6)===0&&(Dh=Mn()+500,fu(0))}}break;case 13:A=Wa(g,2),A!==null&&Vn(A,g,2),xh(),dg(g,2)}if(g=gg(u),g===null&&tg(n,i,u,Hh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else tg(n,i,u,null,o)}}function gg(n){return n=kn(n),pg(n)}var Hh=null;function pg(n){if(Hh=null,n=Mr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Hh=n,null}function YE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vd()){case yl:return 2;case Va:return 8;case As:case Ed:return 32;case Na:return 268435456;default:return 32}default:return 32}}var yg=!1,qi=null,ji=null,Fi=null,Eu=new Map,Tu=new Map,Gi=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $E(n,i){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":Eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(i.pointerId)}}function Au(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=ir(i),i!==null&&KE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function YR(n,i,o,u,f){switch(i){case"focusin":return qi=Au(qi,n,i,o,u,f),!0;case"dragenter":return ji=Au(ji,n,i,o,u,f),!0;case"mouseover":return Fi=Au(Fi,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return Eu.set(g,Au(Eu.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Tu.set(g,Au(Tu.get(g)||null,n,i,o,u,f)),!0}return!1}function XE(n){var i=Mr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,xc(n.priority,function(){if(o.tag===13){var u=xn();u=_i(u);var f=Wa(o,u);f!==null&&Vn(f,o,u),dg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=gg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ur=u,o.target.dispatchEvent(u),Ur=null}else return i=ir(o),i!==null&&KE(i),n.blockedOn=o,!1;i.shift()}return!0}function ZE(n,i,o){Qh(n)&&o.delete(i)}function $R(){yg=!1,qi!==null&&Qh(qi)&&(qi=null),ji!==null&&Qh(ji)&&(ji=null),Fi!==null&&Qh(Fi)&&(Fi=null),Eu.forEach(ZE),Tu.forEach(ZE)}function Kh(n,i){n.blockedOn===i&&(n.blockedOn=null,yg||(yg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$R)))}var Yh=null;function WE(n){Yh!==n&&(Yh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yh===n&&(Yh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(pg(u||o)===null)continue;break}var g=ir(o);g!==null&&(n.splice(i,3),i-=3,pm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function bu(n){function i(D){return Kh(D,n)}qi!==null&&Kh(qi,n),ji!==null&&Kh(ji,n),Fi!==null&&Kh(Fi,n),Eu.forEach(i),Tu.forEach(i);for(var o=0;o<Gi.length;o++){var u=Gi[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Gi.length&&(o=Gi[0],o.blockedOn===null);)XE(o),o.blockedOn===null&&Gi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[It]||null;if(typeof g=="function")E||WE(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[It]||null)A=E.formAction;else if(pg(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),WE(o)}}}function _g(n){this._internalRoot=n}$h.prototype.render=_g.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=xn();HE(o,u,n,i,null,null)},$h.prototype.unmount=_g.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;HE(n.current,2,null,n,null,null),xh(),i[Pn]=null}};function $h(n){this._internalRoot=n}$h.prototype.unstable_scheduleHydration=function(n){if(n){var i=vi();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Gi.length&&i!==0&&i<Gi[o].priority;o++);Gi.splice(o,0,n),o===0&&XE(n)}};var JE=e.version;if(JE!=="19.1.0")throw Error(r(527,JE,"19.1.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var XR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{pt=Xh.inject(XR),Qe=Xh}catch{}}return Su.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=gv,g=pv,E=yv,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=FE(n,1,!1,null,null,o,u,f,g,E,A,null),n[Pn]=i.current,eg(n),new _g(i)},Su.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=gv,E=pv,A=yv,D=null,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(j=o.formState)),i=FE(n,1,!0,i,o??null,u,f,g,E,A,D,j),i.context=GE(null),o=i.current,u=xn(),u=_i(u),f=Ii(u),f.callback=null,Di(o,f,u),o=u,i.current.lanes=o,Or(i,o),_r(i),n[Pn]=i.current,eg(n),new $h(i)},Su.version="19.1.0",Su}var uT;function oI(){if(uT)return Tg.exports;uT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Tg.exports=aI(),Tg.exports}var lI=oI();const uI=rA(lI);var Ru={},cT;function cI(){if(cT)return Ru;cT=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.parse=c,Ru.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,R){const V=new l,F=b.length;if(F<2)return V;const U=(R==null?void 0:R.decode)||_;let Q=0;do{const ie=b.indexOf("=",Q);if(ie===-1)break;const K=b.indexOf(";",Q),de=K===-1?F:K;if(ie>de){Q=b.lastIndexOf(";",ie-1)+1;continue}const le=d(b,Q,ie),Ee=m(b,ie,le),x=b.slice(le,Ee);if(V[x]===void 0){let S=d(b,ie+1,de),I=m(b,de,S);const O=U(b.slice(S,I));V[x]=O}Q=de+1}while(Q<F);return V}function d(b,R,V){do{const F=b.charCodeAt(R);if(F!==32&&F!==9)return R}while(++R<V);return V}function m(b,R,V){for(;R>V;){const F=b.charCodeAt(--R);if(F!==32&&F!==9)return R+1}return V}function p(b,R,V){const F=(V==null?void 0:V.encode)||encodeURIComponent;if(!s.test(b))throw new TypeError(`argument name is invalid: ${b}`);const U=F(R);if(!e.test(U))throw new TypeError(`argument val is invalid: ${R}`);let Q=b+"="+U;if(!V)return Q;if(V.maxAge!==void 0){if(!Number.isInteger(V.maxAge))throw new TypeError(`option maxAge is invalid: ${V.maxAge}`);Q+="; Max-Age="+V.maxAge}if(V.domain){if(!t.test(V.domain))throw new TypeError(`option domain is invalid: ${V.domain}`);Q+="; Domain="+V.domain}if(V.path){if(!r.test(V.path))throw new TypeError(`option path is invalid: ${V.path}`);Q+="; Path="+V.path}if(V.expires){if(!T(V.expires)||!Number.isFinite(V.expires.valueOf()))throw new TypeError(`option expires is invalid: ${V.expires}`);Q+="; Expires="+V.expires.toUTCString()}if(V.httpOnly&&(Q+="; HttpOnly"),V.secure&&(Q+="; Secure"),V.partitioned&&(Q+="; Partitioned"),V.priority)switch(typeof V.priority=="string"?V.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${V.priority}`)}if(V.sameSite)switch(typeof V.sameSite=="string"?V.sameSite.toLowerCase():V.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${V.sameSite}`)}return Q}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function T(b){return a.call(b)==="[object Date]"}return Ru}cI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hT="popstate";function hI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return zg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Gu(a)}return dI(e,t,null,s)}function mt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Rr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fI(){return Math.random().toString(36).substring(2,10)}function fT(s,e){return{usr:s.state,key:s.key,idx:e}}function zg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?al(e):e,state:t,key:e&&e.key||r||fI()}}function Gu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function al(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function dI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),Q=U==null?null:U-p;p=U,m&&m({action:d,location:F.location,delta:Q})}function b(U,Q){d="PUSH";let ie=zg(F.location,U,Q);p=_()+1;let K=fT(ie,p),de=F.createHref(ie);try{c.pushState(K,"",de)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(de)}l&&m&&m({action:d,location:F.location,delta:1})}function R(U,Q){d="REPLACE";let ie=zg(F.location,U,Q);p=_();let K=fT(ie,p),de=F.createHref(ie);c.replaceState(K,"",de),l&&m&&m({action:d,location:F.location,delta:0})}function V(U){let Q=a.location.origin!=="null"?a.location.origin:a.location.href,ie=typeof U=="string"?U:Gu(U);return ie=ie.replace(/ $/,"%20"),mt(Q,`No window.location.(origin|href) available to create URL for href: ${ie}`),new URL(ie,Q)}let F={get action(){return d},get location(){return s(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(hT,T),m=U,()=>{a.removeEventListener(hT,T),m=null}},createHref(U){return e(a,U)},createURL:V,encodeLocation(U){let Q=V(U);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:b,replace:R,go(U){return c.go(U)}};return F}function iA(s,e,t="/"){return mI(s,e,t,!1)}function mI(s,e,t,r){let a=typeof e=="string"?al(e):e,l=oi(a.pathname||"/",t);if(l==null)return null;let c=sA(s);gI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=RI(l);d=wI(c[m],p,r)}return d}function sA(s,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(mt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=si([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),sA(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:AI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of aA(l.path))a(l,c,m)}),e}function aA(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=aA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function gI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:bI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var pI=/^:[\w-]+$/,yI=3,_I=2,vI=1,EI=10,TI=-2,dT=s=>s==="*";function AI(s,e){let t=s.split("/"),r=t.length;return t.some(dT)&&(r+=TI),e&&(r+=_I),t.filter(a=>!dT(a)).reduce((a,l)=>a+(pI.test(l)?yI:l===""?vI:EI),r)}function bI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function wI(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=vf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),b=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=vf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:si([l,T.pathname]),pathnameBase:xI(si([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=si([l,T.pathnameBase]))}return c}function vf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=SI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},b)=>{if(_==="*"){let V=d[b]||"";c=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const R=d[b];return T&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function SI(s,e=!1,t=!0){Rr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function RI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function oi(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function II(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?al(s):s;return{pathname:t?t.startsWith("/")?t:DI(t,e):e,search:VI(r),hash:NI(a)}}function DI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Sg(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oA(s){let e=CI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function lA(s,e,t,r=!1){let a;typeof s=="string"?a=al(s):(a={...s},mt(!a.pathname||!a.pathname.includes("?"),Sg("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),Sg("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),Sg("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=II(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var si=s=>s.join("/").replace(/\/\/+/g,"/"),xI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),VI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,NI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function OI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var uA=["POST","PUT","PATCH","DELETE"];new Set(uA);var MI=["GET",...uA];new Set(MI);var ol=X.createContext(null);ol.displayName="DataRouter";var Ff=X.createContext(null);Ff.displayName="DataRouterState";var cA=X.createContext({isTransitioning:!1});cA.displayName="ViewTransition";var PI=X.createContext(new Map);PI.displayName="Fetchers";var LI=X.createContext(null);LI.displayName="Await";var xr=X.createContext(null);xr.displayName="Navigation";var cc=X.createContext(null);cc.displayName="Location";var fi=X.createContext({outlet:null,matches:[],isDataRoute:!1});fi.displayName="Route";var Ap=X.createContext(null);Ap.displayName="RouteError";function kI(s,{relative:e}={}){mt(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=X.useContext(xr),{hash:a,pathname:l,search:c}=fc(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:si([t,l])),r.createHref({pathname:d,search:c,hash:a})}function hc(){return X.useContext(cc)!=null}function Sa(){return mt(hc(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(cc).location}var hA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fA(s){X.useContext(xr).static||X.useLayoutEffect(s)}function UI(){let{isDataRoute:s}=X.useContext(fi);return s?ZI():BI()}function BI(){mt(hc(),"useNavigate() may be used only in the context of a <Router> component.");let s=X.useContext(ol),{basename:e,navigator:t}=X.useContext(xr),{matches:r}=X.useContext(fi),{pathname:a}=Sa(),l=JSON.stringify(oA(r)),c=X.useRef(!1);return fA(()=>{c.current=!0}),X.useCallback((m,p={})=>{if(Rr(c.current,hA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=lA(m,JSON.parse(l),a,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:si([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,s])}X.createContext(null);function fc(s,{relative:e}={}){let{matches:t}=X.useContext(fi),{pathname:r}=Sa(),a=JSON.stringify(oA(t));return X.useMemo(()=>lA(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function zI(s,e){return dA(s,e)}function dA(s,e,t,r){var ie;mt(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=X.useContext(xr),{matches:c}=X.useContext(fi),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let K=T&&T.path||"";mA(p,!T||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=Sa(),R;if(e){let K=typeof e=="string"?al(e):e;mt(_==="/"||((ie=K.pathname)==null?void 0:ie.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${K.pathname}" was given in the \`location\` prop.`),R=K}else R=b;let V=R.pathname||"/",F=V;if(_!=="/"){let K=_.replace(/^\//,"").split("/");F="/"+V.replace(/^\//,"").split("/").slice(K.length).join("/")}let U=!l&&t&&t.matches&&t.matches.length>0?t.matches:iA(s,{pathname:F});Rr(T||U!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Rr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=HI(U&&U.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:si([_,a.encodeLocation?a.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:si([_,a.encodeLocation?a.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),c,t,r);return e&&Q?X.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Q):Q}function qI(){let s=XI(),e=OI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=X.createElement(X.Fragment,null,X.createElement("p",null,"💿 Hey developer 👋"),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:l},"ErrorBoundary")," or"," ",X.createElement("code",{style:l},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:a},t):null,c)}var jI=X.createElement(qI,null),FI=class extends X.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?X.createElement(fi.Provider,{value:this.props.routeContext},X.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GI({routeContext:s,match:e,children:t}){let r=X.useContext(ol);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(fi.Provider,{value:s},t)}function HI(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);mt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,b=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,b=!1,R=null,V=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||jI,c&&(d<0&&_===0?(mA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,V=null):d===_&&(b=!0,V=p.route.hydrateFallbackElement||null)));let F=e.concat(a.slice(0,_+1)),U=()=>{let Q;return T?Q=R:b?Q=V:p.route.Component?Q=X.createElement(p.route.Component,null):p.route.element?Q=p.route.element:Q=m,X.createElement(GI,{match:p,routeContext:{outlet:m,matches:F,isDataRoute:t!=null},children:Q})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?X.createElement(FI,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:U(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):U()},null)}function bp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QI(s){let e=X.useContext(ol);return mt(e,bp(s)),e}function KI(s){let e=X.useContext(Ff);return mt(e,bp(s)),e}function YI(s){let e=X.useContext(fi);return mt(e,bp(s)),e}function wp(s){let e=YI(s),t=e.matches[e.matches.length-1];return mt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function $I(){return wp("useRouteId")}function XI(){var r;let s=X.useContext(Ap),e=KI("useRouteError"),t=wp("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function ZI(){let{router:s}=QI("useNavigate"),e=wp("useNavigate"),t=X.useRef(!1);return fA(()=>{t.current=!0}),X.useCallback(async(a,l={})=>{Rr(t.current,hA),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var mT={};function mA(s,e,t){!e&&!mT[s]&&(mT[s]=!0,Rr(!1,t))}X.memo(WI);function WI({routes:s,future:e,state:t}){return dA(s,void 0,t,e)}function af(s){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JI({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){mt(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=X.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=al(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:b="default"}=t,R=X.useMemo(()=>{let V=oi(m,c);return V==null?null:{location:{pathname:V,search:p,hash:_,state:T,key:b},navigationType:r}},[c,m,p,_,T,b,r]);return Rr(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:X.createElement(xr.Provider,{value:d},X.createElement(cc.Provider,{children:e,value:R}))}function e1({children:s,location:e}){return zI(qg(s),e)}function qg(s,e=[]){let t=[];return X.Children.forEach(s,(r,a)=>{if(!X.isValidElement(r))return;let l=[...e,a];if(r.type===X.Fragment){t.push.apply(t,qg(r.props.children,l));return}mt(r.type===af,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=qg(r.props.children,l)),t.push(c)}),t}var of="get",lf="application/x-www-form-urlencoded";function Gf(s){return s!=null&&typeof s.tagName=="string"}function t1(s){return Gf(s)&&s.tagName.toLowerCase()==="button"}function n1(s){return Gf(s)&&s.tagName.toLowerCase()==="form"}function r1(s){return Gf(s)&&s.tagName.toLowerCase()==="input"}function i1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function s1(s,e){return s.button===0&&(!e||e==="_self")&&!i1(s)}var Zh=null;function a1(){if(Zh===null)try{new FormData(document.createElement("form"),0),Zh=!1}catch{Zh=!0}return Zh}var o1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rg(s){return s!=null&&!o1.has(s)?(Rr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lf}"`),null):s}function l1(s,e){let t,r,a,l,c;if(n1(s)){let d=s.getAttribute("action");r=d?oi(d,e):null,t=s.getAttribute("method")||of,a=Rg(s.getAttribute("enctype"))||lf,l=new FormData(s)}else if(t1(s)||r1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?oi(m,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||of,a=Rg(s.getAttribute("formenctype"))||Rg(d.getAttribute("enctype"))||lf,l=new FormData(d,s),!a1()){let{name:p,type:_,value:T}=s;if(_==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(Gf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=of,r=null,a=lf,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Sp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function u1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function h1(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await u1(l,t);return c.links?c.links():[]}return[]}));return g1(r.flat(1).filter(c1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function gT(s,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function f1(s,e,{includeHydrateFallback:t}={}){return d1(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function d1(s){return[...new Set(s)]}function m1(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function g1(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(m1(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}var p1=new Set([100,101,204,205]);function y1(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&oi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function gA(){let s=X.useContext(ol);return Sp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function _1(){let s=X.useContext(Ff);return Sp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Rp=X.createContext(void 0);Rp.displayName="FrameworkContext";function pA(){let s=X.useContext(Rp);return Sp(s,"You must render this element inside a <HydratedRouter> element"),s}function v1(s,e){let t=X.useContext(Rp),[r,a]=X.useState(!1),[l,c]=X.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,b=X.useRef(null);X.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let F=Q=>{Q.forEach(ie=>{c(ie.isIntersecting)})},U=new IntersectionObserver(F,{threshold:.5});return b.current&&U.observe(b.current),()=>{U.disconnect()}}},[s]),X.useEffect(()=>{if(r){let F=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(F)}}},[r]);let R=()=>{a(!0)},V=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,b,{}]:[l,b,{onFocus:Iu(d,R),onBlur:Iu(m,V),onMouseEnter:Iu(p,R),onMouseLeave:Iu(_,V),onTouchStart:Iu(T,R)}]:[!1,b,{}]}function Iu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function E1({page:s,...e}){let{router:t}=gA(),r=X.useMemo(()=>iA(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?X.createElement(A1,{page:s,matches:r,...e}):null}function T1(s){let{manifest:e,routeModules:t}=pA(),[r,a]=X.useState([]);return X.useEffect(()=>{let l=!1;return h1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function A1({page:s,matches:e,...t}){let r=Sa(),{manifest:a,routeModules:l}=pA(),{basename:c}=gA(),{loaderData:d,matches:m}=_1(),p=X.useMemo(()=>gT(s,e,m,a,r,"data"),[s,e,m,a,r]),_=X.useMemo(()=>gT(s,e,m,a,r,"assets"),[s,e,m,a,r]),T=X.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let V=new Set,F=!1;if(e.forEach(Q=>{var K;let ie=a.routes[Q.route.id];!ie||!ie.hasLoader||(!p.some(de=>de.route.id===Q.route.id)&&Q.route.id in d&&((K=l[Q.route.id])!=null&&K.shouldRevalidate)||ie.hasClientLoader?F=!0:V.add(Q.route.id))}),V.size===0)return[];let U=y1(s,c);return F&&V.size>0&&U.searchParams.set("_routes",e.filter(Q=>V.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[U.pathname+U.search]},[c,d,r,a,p,e,s,l]),b=X.useMemo(()=>f1(_,a),[_,a]),R=T1(_);return X.createElement(X.Fragment,null,T.map(V=>X.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),b.map(V=>X.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),R.map(({key:V,link:F})=>X.createElement("link",{key:V,...F})))}function b1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yA&&(window.__reactRouterVersion="7.5.1")}catch{}function w1({basename:s,children:e,window:t}){let r=X.useRef();r.current==null&&(r.current=hI({window:t,v5Compat:!0}));let a=r.current,[l,c]=X.useState({action:a.action,location:a.location}),d=X.useCallback(m=>{X.startTransition(()=>c(m))},[c]);return X.useLayoutEffect(()=>a.listen(d),[a,d]),X.createElement(JI,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var _A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tr=X.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...b},R){let{basename:V}=X.useContext(xr),F=typeof p=="string"&&_A.test(p),U,Q=!1;if(typeof p=="string"&&F&&(U=p,yA))try{let I=new URL(window.location.href),O=p.startsWith("//")?new URL(I.protocol+p):new URL(p),P=oi(O.pathname,V);O.origin===I.origin&&P!=null?p=P+O.search+O.hash:Q=!0}catch{Rr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=kI(p,{relative:a}),[K,de,le]=v1(r,b),Ee=D1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function x(I){e&&e(I),I.defaultPrevented||Ee(I)}let S=X.createElement("a",{...b,...le,href:U||ie,onClick:Q||l?e:x,ref:b1(R,de),target:m,"data-discover":!F&&t==="render"?"true":void 0});return K&&!F?X.createElement(X.Fragment,null,S,X.createElement(E1,{page:ie})):S});Tr.displayName="Link";var S1=X.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=fc(c,{relative:p.relative}),b=Sa(),R=X.useContext(Ff),{navigator:V,basename:F}=X.useContext(xr),U=R!=null&&O1(T)&&d===!0,Q=V.encodeLocation?V.encodeLocation(T).pathname:T.pathname,ie=b.pathname,K=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),K=K?K.toLowerCase():null,Q=Q.toLowerCase()),K&&F&&(K=oi(K,F)||K);const de=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let le=ie===Q||!a&&ie.startsWith(Q)&&ie.charAt(de)==="/",Ee=K!=null&&(K===Q||!a&&K.startsWith(Q)&&K.charAt(Q.length)==="/"),x={isActive:le,isPending:Ee,isTransitioning:U},S=le?e:void 0,I;typeof r=="function"?I=r(x):I=[r,le?"active":null,Ee?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(x):l;return X.createElement(Tr,{...p,"aria-current":S,className:I,ref:_,style:O,to:c,viewTransition:d},typeof m=="function"?m(x):m)});S1.displayName="NavLink";var R1=X.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=of,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...b},R)=>{let V=V1(),F=N1(d,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&_A.test(d),ie=K=>{if(m&&m(K),K.defaultPrevented)return;K.preventDefault();let de=K.nativeEvent.submitter,le=(de==null?void 0:de.getAttribute("formmethod"))||c;V(de||K.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return X.createElement("form",{ref:R,method:U,action:F,onSubmit:r?m:ie,...b,"data-discover":!Q&&s==="render"?"true":void 0})});R1.displayName="Form";function I1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vA(s){let e=X.useContext(ol);return mt(e,I1(s)),e}function D1(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=UI(),m=Sa(),p=fc(s,{relative:l});return X.useCallback(_=>{if(s1(_,e)){_.preventDefault();let T=t!==void 0?t:Gu(m)===Gu(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,s,a,l,c])}var C1=0,x1=()=>`__${String(++C1)}__`;function V1(){let{router:s}=vA("useSubmit"),{basename:e}=X.useContext(xr),t=$I();return X.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=l1(r,e);if(a.navigate===!1){let _=a.fetcherKey||x1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function N1(s,{relative:e}={}){let{basename:t}=X.useContext(xr),r=X.useContext(fi);mt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...fc(s||".",{relative:e})},c=Sa();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:si([t,l.pathname])),Gu(l)}function O1(s,e={}){let t=X.useContext(cA);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vA("useViewTransitionState"),a=fc(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=oi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=oi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return vf(a.pathname,c)!=null||vf(a.pathname,l)!=null}new TextEncoder;[...p1];function M1(){const[s,e]=X.useState(null);return X.useEffect(()=>{var a,l;const t=(a=window.Telegram)==null?void 0:a.WebApp;if(!t)return;t.ready(),t.expand();const r=t.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&e(r.user.id)},[]),s}const P1=()=>{};var pT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},L1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},TA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,R=p&63;m||(R=64,c||(b=64)),r.push(t[_],t[T],t[b],t[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(EA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):L1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new k1;const b=l<<2|d>>4;if(r.push(b),p!==64){const R=d<<4&240|p>>2;if(r.push(R),T!==64){const V=p<<6&192|T;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class k1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U1=function(s){const e=EA(s);return TA.encodeByteArray(e,!0)},Ef=function(s){return U1(s).replace(/\./g,"")},AA=function(s){try{return TA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!B1(t)||(s[t]=Tf(s[t],e[t]));return s}function B1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=()=>bA().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof pT>"u")return;const s=pT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},j1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&AA(s[1]);return e&&JSON.parse(e)},wA=()=>{try{return P1()||z1()||q1()||j1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},SA=()=>{var s;return(s=wA())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Ef(JSON.stringify(t)),Ef(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H1(){var s;const e=(s=wA())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q1(){return typeof window<"u"||RA()}function RA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function IA(){return!H1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DA(){try{return typeof indexedDB=="object"}catch{return!1}}function K1(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="FirebaseError";class Ra extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y1,Object.setPrototypeOf(this,Ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hf.prototype.create)}}class Hf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?$1(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ra(a,d,r)}}function $1(s,e){return s.replace(X1,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const X1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function ko(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(_T(l)&&_T(c)){if(!ko(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function _T(s){return s!==null&&typeof s=="object"}function Z1(s,e){const t=new W1(s,e);return t.subscribe.bind(t)}class W1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");J1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Ig),a.error===void 0&&(a.error=Ig),a.complete===void 0&&(a.complete=Ig);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J1(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Ig(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new F1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nD(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tD(s){return s===ra?void 0:s}function nD(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=[];var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const xA={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},rD=Le.INFO,iD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},sD=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=iD[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dp{constructor(e){this.name=e,this._logLevel=rD,this._logHandler=sD,this._userLogHandler=null,Ip.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}function aD(s){Ip.forEach(e=>{e.setLogLevel(s)})}function oD(s,e){for(const t of Ip){let r=null;e&&e.level&&(r=xA[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:Le[l].toLowerCase(),message:d,args:c,type:a.name})}}}const lD=(s,e)=>e.some(t=>s instanceof t);let vT,ET;function uD(){return vT||(vT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return ET||(ET=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VA=new WeakMap,jg=new WeakMap,NA=new WeakMap,Dg=new WeakMap,Cp=new WeakMap;function hD(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(Ji(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&VA.set(t,s)}).catch(()=>{}),Cp.set(e,s),e}function fD(s){if(jg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});jg.set(s,e)}let Fg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return jg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||NA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ji(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function dD(s){Fg=s(Fg)}function mD(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Cg(this),e,...t);return NA.set(r,e.sort?e.sort():[e]),Ji(r)}:cD().includes(s)?function(...e){return s.apply(Cg(this),e),Ji(VA.get(this))}:function(...e){return Ji(s.apply(Cg(this),e))}}function gD(s){return typeof s=="function"?mD(s):(s instanceof IDBTransaction&&fD(s),lD(s,uD())?new Proxy(s,Fg):s)}function Ji(s){if(s instanceof IDBRequest)return hD(s);if(Dg.has(s))return Dg.get(s);const e=gD(s);return e!==s&&(Dg.set(s,e),Cp.set(e,s)),e}const Cg=s=>Cp.get(s);function pD(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=Ji(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ji(c.result),m.oldVersion,m.newVersion,Ji(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const yD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],xg=new Map;function TT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=_D.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||yD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return xg.set(e,l),l}dD(s=>({...s,get:(e,t,r)=>TT(e,t)||s.get(e,t,r),has:(e,t)=>!!TT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ED(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ED(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",Gg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Dp("@firebase/app"),TD="@firebase/app-compat",AD="@firebase/analytics-compat",bD="@firebase/analytics",wD="@firebase/app-check-compat",SD="@firebase/app-check",RD="@firebase/auth",ID="@firebase/auth-compat",DD="@firebase/database",CD="@firebase/data-connect",xD="@firebase/database-compat",VD="@firebase/functions",ND="@firebase/functions-compat",OD="@firebase/installations",MD="@firebase/installations-compat",PD="@firebase/messaging",LD="@firebase/messaging-compat",kD="@firebase/performance",UD="@firebase/performance-compat",BD="@firebase/remote-config",zD="@firebase/remote-config-compat",qD="@firebase/storage",jD="@firebase/storage-compat",FD="@firebase/firestore",GD="@firebase/vertexai",HD="@firebase/firestore-compat",QD="firebase",KD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]",YD={[bf]:"fire-core",[TD]:"fire-core-compat",[bD]:"fire-analytics",[AD]:"fire-analytics-compat",[SD]:"fire-app-check",[wD]:"fire-app-check-compat",[RD]:"fire-auth",[ID]:"fire-auth-compat",[DD]:"fire-rtdb",[CD]:"fire-data-connect",[xD]:"fire-rtdb-compat",[VD]:"fire-fn",[ND]:"fire-fn-compat",[OD]:"fire-iid",[MD]:"fire-iid-compat",[PD]:"fire-fcm",[LD]:"fire-fcm-compat",[kD]:"fire-perf",[UD]:"fire-perf-compat",[BD]:"fire-rc",[zD]:"fire-rc-compat",[qD]:"fire-gcs",[jD]:"fire-gcs-compat",[FD]:"fire-fst",[HD]:"fire-fst-compat",[GD]:"fire-vertex","fire-js":"fire-js",[QD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Map,Uo=new Map,Bo=new Map;function Hu(s,e){try{s.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function OA(s,e){s.container.addOrOverwriteComponent(e)}function zo(s){const e=s.name;if(Bo.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Bo.set(e,s);for(const t of is.values())Hu(t,s);for(const t of Uo.values())Hu(t,s);return!0}function MA(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function $D(s,e,t=rs){MA(s,e).clearInstance(t)}function PA(s){return s.options!==void 0}function LA(s){return s==null?!1:s.settings!==void 0}function XD(){Bo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Hf("app","Firebase",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(s,e){const t=AA(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class WD extends kA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&AT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&AT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ai(bf,Gg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Np(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Yn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=KD;function Vp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rs,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw Yn.create("bad-app-name",{appName:String(a)});if(t||(t=SA()),!t)throw Yn.create("no-options");const l=is.get(a);if(l){if(ko(t,l.options)&&ko(r,l.config))return l;throw Yn.create("duplicate-app",{appName:a})}const c=new CA(a);for(const m of Bo.values())c.addComponent(m);const d=new kA(t,r,c);return is.set(a,d),d}function JD(s,e){if(Q1()&&!RA())throw Yn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;PA(s)?t=s.options:t=s;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Yn.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=Uo.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new CA(l);for(const p of Bo.values())d.addComponent(p);const m=new WD(t,e,l,d);return Uo.set(l,m),m}function eC(s=rs){const e=is.get(s);if(!e&&s===rs&&SA())return Vp();if(!e)throw Yn.create("no-app",{appName:s});return e}function tC(){return Array.from(is.values())}async function Np(s){let e=!1;const t=s.name;is.has(t)?(e=!0,is.delete(t)):Uo.has(t)&&s.decRefCount()<=0&&(Uo.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function ai(s,e,t){var r;let a=(r=YD[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(d.join(" "));return}zo(new ga(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function UA(s,e){if(s!==null&&typeof s!="function")throw Yn.create("invalid-log-argument");oD(s,e)}function BA(s){aD(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebase-heartbeat-database",rC=1,Qu="firebase-heartbeat-store";let Vg=null;function zA(){return Vg||(Vg=pD(nC,rC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Yn.create("idb-open",{originalErrorMessage:s.message})})),Vg}async function iC(s){try{const t=(await zA()).transaction(Qu),r=await t.objectStore(Qu).get(qA(s));return await t.done,r}catch(e){if(e instanceof Ra)li.warn(e.message);else{const t=Yn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(t.message)}}}async function bT(s,e){try{const r=(await zA()).transaction(Qu,"readwrite");await r.objectStore(Qu).put(e,qA(s)),await r.done}catch(t){if(t instanceof Ra)li.warn(t.message);else{const r=Yn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});li.warn(r.message)}}}function qA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1024,aC=30;class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=wT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>aC){const c=cC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wT(),{heartbeatsToSend:r,unsentEntries:a}=lC(this._heartbeatsCache.heartbeats),l=Ef(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return li.warn(t),""}}}function wT(){return new Date().toISOString().substring(0,10)}function lC(s,e=sC){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),ST(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ST(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class uC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DA()?K1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return bT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return bT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ST(s){return Ef(JSON.stringify({version:2,heartbeats:s})).length}function cC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(s){zo(new ga("platform-logger",e=>new vD(e),"PRIVATE")),zo(new ga("heartbeat",e=>new oC(e),"PRIVATE")),ai(bf,Gg,s),ai(bf,Gg,"esm2017"),ai("fire-js","")}hC("");const fC=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ra,SDK_VERSION:xp,_DEFAULT_ENTRY_NAME:rs,_addComponent:Hu,_addOrOverwriteComponent:OA,_apps:is,_clearComponents:XD,_components:Bo,_getProvider:MA,_isFirebaseApp:PA,_isFirebaseServerApp:LA,_registerComponent:zo,_removeServiceInstance:$D,_serverApps:Uo,deleteApp:Np,getApp:eC,getApps:tC,initializeApp:Vp,initializeServerApp:JD,onLog:UA,registerVersion:ai,setLogLevel:BA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this._delegate=e,this.firebase=t,Hu(e,new ga("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Np(this._delegate)))}_getService(e,t=rs){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=rs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Hu(this._delegate,e)}_addOrOverwriteComponent(e){OA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},RT=new Hf("app-compat","Firebase",mC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:ai,setLogLevel:BA,onLog:UA,apps:null,SDK_VERSION:xp,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:fC}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function a(p){if(p=p||rs,!yT(e,p))throw RT.create("no-app",{appName:p});return e[p]}a.App=s;function l(p,_={}){const T=Vp(p,_);if(yT(e,T.name))return e[T.name];const b=new s(T,t);return e[T.name]=b,b}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const _=p.name,T=_.replace("-compat","");if(zo(p)&&p.type==="PUBLIC"){const b=(R=a())=>{if(typeof R[T]!="function")throw RT.create("invalid-app-argument",{appName:_});return R[T]()};p.serviceProps!==void 0&&Tf(b,p.serviceProps),t[T]=b,s.prototype[T]=function(...R){return this._getService.bind(this,_).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){const s=gC(dC);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:jA,extendNamespace:e,createSubscribe:Z1,ErrorFactory:Hf,deepExtend:Tf});function e(t){Tf(s,t)}return s}const pC=jA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new Dp("@firebase/app-compat"),yC="@firebase/app-compat",_C="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(s){ai(yC,_C,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=bA();if(s.firebase!==void 0){IT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&IT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ri=pC;vC();var EC="firebase",TC="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.registerVersion(EC,TC,"app-compat");var DT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,FA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function I(){}I.prototype=S.prototype,x.D=S.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(O,P,k){for(var C=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)C[Rt-2]=arguments[Rt];return S.prototype[P].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,I){I||(I=0);var O=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)O[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)O[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=x.g[0],I=x.g[1],P=x.g[2];var k=x.g[3],C=S+(k^I&(P^k))+O[0]+3614090360&4294967295;S=I+(C<<7&4294967295|C>>>25),C=k+(P^S&(I^P))+O[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(I^k&(S^I))+O[2]+606105819&4294967295,P=k+(C<<17&4294967295|C>>>15),C=I+(S^P&(k^S))+O[3]+3250441966&4294967295,I=P+(C<<22&4294967295|C>>>10),C=S+(k^I&(P^k))+O[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=k+(P^S&(I^P))+O[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(I^k&(S^I))+O[6]+2821735955&4294967295,P=k+(C<<17&4294967295|C>>>15),C=I+(S^P&(k^S))+O[7]+4249261313&4294967295,I=P+(C<<22&4294967295|C>>>10),C=S+(k^I&(P^k))+O[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=k+(P^S&(I^P))+O[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(I^k&(S^I))+O[10]+4294925233&4294967295,P=k+(C<<17&4294967295|C>>>15),C=I+(S^P&(k^S))+O[11]+2304563134&4294967295,I=P+(C<<22&4294967295|C>>>10),C=S+(k^I&(P^k))+O[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=k+(P^S&(I^P))+O[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(I^k&(S^I))+O[14]+2792965006&4294967295,P=k+(C<<17&4294967295|C>>>15),C=I+(S^P&(k^S))+O[15]+1236535329&4294967295,I=P+(C<<22&4294967295|C>>>10),C=S+(P^k&(I^P))+O[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=k+(I^P&(S^I))+O[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^I&(k^S))+O[11]+643717713&4294967295,P=k+(C<<14&4294967295|C>>>18),C=I+(k^S&(P^k))+O[0]+3921069994&4294967295,I=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(I^P))+O[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=k+(I^P&(S^I))+O[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^I&(k^S))+O[15]+3634488961&4294967295,P=k+(C<<14&4294967295|C>>>18),C=I+(k^S&(P^k))+O[4]+3889429448&4294967295,I=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(I^P))+O[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=k+(I^P&(S^I))+O[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^I&(k^S))+O[3]+4107603335&4294967295,P=k+(C<<14&4294967295|C>>>18),C=I+(k^S&(P^k))+O[8]+1163531501&4294967295,I=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(I^P))+O[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=k+(I^P&(S^I))+O[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^I&(k^S))+O[7]+1735328473&4294967295,P=k+(C<<14&4294967295|C>>>18),C=I+(k^S&(P^k))+O[12]+2368359562&4294967295,I=P+(C<<20&4294967295|C>>>12),C=S+(I^P^k)+O[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=k+(S^I^P)+O[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^I)+O[11]+1839030562&4294967295,P=k+(C<<16&4294967295|C>>>16),C=I+(P^k^S)+O[14]+4259657740&4294967295,I=P+(C<<23&4294967295|C>>>9),C=S+(I^P^k)+O[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=k+(S^I^P)+O[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^I)+O[7]+4139469664&4294967295,P=k+(C<<16&4294967295|C>>>16),C=I+(P^k^S)+O[10]+3200236656&4294967295,I=P+(C<<23&4294967295|C>>>9),C=S+(I^P^k)+O[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=k+(S^I^P)+O[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^I)+O[3]+3572445317&4294967295,P=k+(C<<16&4294967295|C>>>16),C=I+(P^k^S)+O[6]+76029189&4294967295,I=P+(C<<23&4294967295|C>>>9),C=S+(I^P^k)+O[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=k+(S^I^P)+O[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^I)+O[15]+530742520&4294967295,P=k+(C<<16&4294967295|C>>>16),C=I+(P^k^S)+O[2]+3299628645&4294967295,I=P+(C<<23&4294967295|C>>>9),C=S+(P^(I|~k))+O[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=k+(I^(S|~P))+O[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~I))+O[14]+2878612391&4294967295,P=k+(C<<15&4294967295|C>>>17),C=I+(k^(P|~S))+O[5]+4237533241&4294967295,I=P+(C<<21&4294967295|C>>>11),C=S+(P^(I|~k))+O[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=k+(I^(S|~P))+O[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~I))+O[10]+4293915773&4294967295,P=k+(C<<15&4294967295|C>>>17),C=I+(k^(P|~S))+O[1]+2240044497&4294967295,I=P+(C<<21&4294967295|C>>>11),C=S+(P^(I|~k))+O[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=k+(I^(S|~P))+O[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~I))+O[6]+2734768916&4294967295,P=k+(C<<15&4294967295|C>>>17),C=I+(k^(P|~S))+O[13]+1309151649&4294967295,I=P+(C<<21&4294967295|C>>>11),C=S+(P^(I|~k))+O[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=k+(I^(S|~P))+O[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~I))+O[2]+718787259&4294967295,P=k+(C<<15&4294967295|C>>>17),C=I+(k^(P|~S))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+k&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var I=S-this.blockSize,O=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=I;)a(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<S;)if(O[P++]=x.charCodeAt(k++),P==this.blockSize){a(this,O),P=0;break}}else for(;k<S;)if(O[P++]=x[k++],P==this.blockSize){a(this,O),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var I=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=I&255,I/=256;for(this.u(x),x=Array(16),S=I=0;4>S;++S)for(var O=0;32>O;O+=8)x[I++]=this.g[S]>>>O&255;return x};function l(x,S){var I=d;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=S(x)}function c(x,S){this.h=S;for(var I=[],O=!0,P=x.length-1;0<=P;P--){var k=x[P]|0;O&&k==S||(I[P]=k,O=!1)}this.g=I}var d={};function m(x){return-128<=x&&128>x?l(x,function(S){return new c([S|0],0>S?-1:0)}):new c([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return U(p(-x));for(var S=[],I=1,O=0;x>=I;O++)S[O]=x/I|0,I*=4294967296;return new c(S,0)}function _(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return U(_(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(S,8)),O=T,P=0;P<x.length;P+=8){var k=Math.min(8,x.length-P),C=parseInt(x.substring(P,P+k),S);8>k?(k=p(Math.pow(S,k)),O=O.j(k).add(p(C))):(O=O.j(I),O=O.add(p(C)))}return O}var T=m(0),b=m(1),R=m(16777216);s=c.prototype,s.m=function(){if(F(this))return-U(this).m();for(var x=0,S=1,I=0;I<this.g.length;I++){var O=this.i(I);x+=(0<=O?O:4294967296+O)*S,S*=4294967296}return x},s.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(F(this))return"-"+U(this).toString(x);for(var S=p(Math.pow(x,6)),I=this,O="";;){var P=de(I,S).g;I=Q(I,P.j(S));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=P,V(I))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},s.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function F(x){return x.h==-1}s.l=function(x){return x=Q(this,x),F(x)?-1:V(x)?0:1};function U(x){for(var S=x.g.length,I=[],O=0;O<S;O++)I[O]=~x.g[O];return new c(I,~x.h).add(b)}s.abs=function(){return F(this)?U(this):this},s.add=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0,P=0;P<=S;P++){var k=O+(this.i(P)&65535)+(x.i(P)&65535),C=(k>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);O=C>>>16,k&=65535,C&=65535,I[P]=C<<16|k}return new c(I,I[I.length-1]&-2147483648?-1:0)};function Q(x,S){return x.add(U(S))}s.j=function(x){if(V(this)||V(x))return T;if(F(this))return F(x)?U(this).j(U(x)):U(U(this).j(x));if(F(x))return U(this.j(U(x)));if(0>this.l(R)&&0>x.l(R))return p(this.m()*x.m());for(var S=this.g.length+x.g.length,I=[],O=0;O<2*S;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<x.g.length;P++){var k=this.i(O)>>>16,C=this.i(O)&65535,Rt=x.i(P)>>>16,st=x.i(P)&65535;I[2*O+2*P]+=C*st,ie(I,2*O+2*P),I[2*O+2*P+1]+=k*st,ie(I,2*O+2*P+1),I[2*O+2*P+1]+=C*Rt,ie(I,2*O+2*P+1),I[2*O+2*P+2]+=k*Rt,ie(I,2*O+2*P+2)}for(O=0;O<S;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=S;O<2*S;O++)I[O]=0;return new c(I,0)};function ie(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function K(x,S){this.g=x,this.h=S}function de(x,S){if(V(S))throw Error("division by zero");if(V(x))return new K(T,T);if(F(x))return S=de(U(x),S),new K(U(S.g),U(S.h));if(F(S))return S=de(x,U(S)),new K(U(S.g),S.h);if(30<x.g.length){if(F(x)||F(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=S;0>=O.l(x);)I=le(I),O=le(O);var P=Ee(I,1),k=Ee(O,1);for(O=Ee(O,2),I=Ee(I,2);!V(O);){var C=k.add(O);0>=C.l(x)&&(P=P.add(I),k=C),O=Ee(O,1),I=Ee(I,1)}return S=Q(x,P.j(S)),new K(P,S)}for(P=T;0<=x.l(S);){for(I=Math.max(1,Math.floor(x.m()/S.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=p(I),C=k.j(S);F(C)||0<C.l(x);)I-=O,k=p(I),C=k.j(S);V(k)&&(k=b),P=P.add(k),x=Q(x,C)}return new K(P,x)}s.A=function(x){return de(this,x).h},s.and=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)&x.i(O);return new c(I,this.h&x.h)},s.or=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)|x.i(O);return new c(I,this.h|x.h)},s.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)^x.i(O);return new c(I,this.h^x.h)};function le(x){for(var S=x.g.length+1,I=[],O=0;O<S;O++)I[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(I,x.h)}function Ee(x,S){var I=S>>5;S%=32;for(var O=x.g.length-I,P=[],k=0;k<O;k++)P[k]=0<S?x.i(k+I)>>>S|x.i(k+I+1)<<32-S:x.i(k+I);return new c(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,es=c}).apply(typeof DT<"u"?DT:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GA,Ou,HA,uf,Hg,QA,KA,YA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var B=h[w];if(!(B in v))break e;v=v[B]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,B={next:function(){if(!w&&v<h.length){var $=v++;return{value:y($,h[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),h.apply(y,B)}}return function(){return h.apply(y,arguments)}}function b(h,y,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,b.apply(null,arguments)}function R(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function V(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,B,$){for(var oe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)oe[Ue-2]=arguments[Ue];return y.prototype[B].apply(w,oe)}}function F(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const B=h.length||0,$=w.length||0;h.length=B+$;for(let oe=0;oe<$;oe++)h[B+oe]=w[oe]}else h.push(w)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function de(h){return de[" "](h),h}de[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Ee(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function x(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(v in w)h[v]=w[v];for(let $=0;$<I.length;$++)v=I[$],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function P(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function k(h){d.setTimeout(()=>{throw h},0)}function C(){var h=ke;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Rt{constructor(){this.h=this.g=null}add(y,v){const w=st.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var st=new Q(()=>new Z,h=>h.reset());class Z{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,pe=!1,ke=new Rt,N=()=>{const h=d.Promise.resolve(void 0);ue=()=>{h.then(te)}};var te=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){k(v)}var y=st;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}pe=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function xe(h,y){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(le){e:{try{de(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xe.aa.h.call(this)}}V(xe,se);var Re={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Bt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function nr(h,y,v,w,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=B,this.key=++nt,this.da=this.fa=!1}function yi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vr(h){this.src=h,this.g={},this.h=0}Vr.prototype.add=function(h,y,v,w,B){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var oe=Es(h,y,w,B);return-1<oe?(y=h[oe],v||(y.fa=!1)):(y=new nr(y,this.src,$,!!w,B),y.fa=v,h.push(y)),y};function vs(h,y){var v=y.type;if(v in h.g){var w=h.g[v],B=Array.prototype.indexOf.call(w,y,void 0),$;($=0<=B)&&Array.prototype.splice.call(w,B,1),$&&(yi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Es(h,y,v,w){for(var B=0;B<h.length;++B){var $=h[B];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==w)return B}return-1}var Ts="closure_lm_"+(1e6*Math.random()|0),pl={};function Ic(h,y,v,w,B){if(Array.isArray(y)){for(var $=0;$<y.length;$++)Ic(h,y[$],v,w,B);return null}return v=Dc(v),h&&h[Bt]?h.K(y,v,p(w)?!!w.capture:!1,B):Mn(h,y,v,!1,w,B)}function Mn(h,y,v,w,B,$){if(!y)throw Error("Invalid event type");var oe=p(B)?!!B.capture:!!B,Ue=Na(h);if(Ue||(h[Ts]=Ue=new Vr(h)),v=Ue.add(y,v,w,oe,$),v.proxy)return v;if(w=vd(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)Te||(B=oe),B===void 0&&(B=!1),h.addEventListener(y.toString(),w,B);else if(h.attachEvent)h.attachEvent(As(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function vd(){function h(v){return y.call(h.src,h.listener,v)}const y=Ed;return h}function yl(h,y,v,w,B){if(Array.isArray(y))for(var $=0;$<y.length;$++)yl(h,y[$],v,w,B);else w=p(w)?!!w.capture:!!w,v=Dc(v),h&&h[Bt]?(h=h.i,y=String(y).toString(),y in h.g&&($=h.g[y],v=Es($,v,w,B),-1<v&&(yi($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete h.g[y],h.h--)))):h&&(h=Na(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Es(y,v,w,B)),(v=-1<h?y[h]:null)&&Va(v))}function Va(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Bt])vs(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(As(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Na(y))?(vs(v,h),v.h==0&&(v.src=null,y[Ts]=null)):yi(h)}}}function As(h){return h in pl?pl[h]:pl[h]="on"+h}function Ed(h,y){if(h.da)h=!0;else{y=new xe(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&Va(h),h=v.call(w,y)}return h}function Na(h){return h=h[Ts],h instanceof Vr?h:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dc(h){return typeof h=="function"?h:(h[_l]||(h[_l]=function(y){return h.handleEvent(y)}),h[_l])}function pt(){ce.call(this),this.i=new Vr(this),this.M=this,this.F=null}V(pt,ce),pt.prototype[Bt]=!0,pt.prototype.removeEventListener=function(h,y,v,w){yl(this,h,y,v,w)};function Qe(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new se(y,h);else if(y instanceof se)y.target=y.target||h;else{var B=y;y=new se(w,h),O(y,B)}if(B=!0,v)for(var $=v.length-1;0<=$;$--){var oe=y.g=v[$];B=bn(oe,w,!0,y)&&B}if(oe=y.g=h,B=bn(oe,w,!0,y)&&B,B=bn(oe,w,!1,y)&&B,v)for($=0;$<v.length;$++)oe=y.g=v[$],B=bn(oe,w,!1,y)&&B}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)yi(v[w]);delete h.g[y],h.h--}}this.F=null},pt.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},pt.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function bn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,$=0;$<y.length;++$){var oe=y[$];if(oe&&!oe.da&&oe.capture==v){var Ue=oe.listener,Mt=oe.ha||oe.src;oe.fa&&vs(h.i,oe),B=Ue.call(Mt,w)!==!1&&B}}return B&&!w.defaultPrevented}function tn(h,y,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Cc(h){h.g=tn(()=>{h.g=null,h.i&&(h.i=!1,Cc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Td extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Cc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(h){ce.call(this),this.h=h,this.g={}}V(bs,ce);var ws=[];function Ss(h){Ee(h.g,function(y,v){this.g.hasOwnProperty(v)&&Va(y)},h),h.g={}}bs.prototype.N=function(){bs.aa.N.call(this),Ss(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=d.JSON.stringify,Oa=d.JSON.parse,Rs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function vl(){}vl.prototype.h=null;function El(h){return h.h||(h.h=h.i())}function Tl(){}var Nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){se.call(this,"d")}V(Or,se);function Al(){se.call(this,"c")}V(Al,se);var rr={},bl=null;function _i(){return bl=bl||new pt}rr.La="serverreachability";function Ma(h){se.call(this,rr.La,h)}V(Ma,se);function vi(h){const y=_i();Qe(y,new Ma(y))}rr.STAT_EVENT="statevent";function xc(h,y){se.call(this,rr.STAT_EVENT,h),this.stat=y}V(xc,se);function ot(h){const y=_i();Qe(y,new xc(y,h))}rr.Ma="timingevent";function Ot(h,y){se.call(this,rr.Ma,h),this.size=y}V(Ot,se);function It(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function wl(h,y,v,w,B,$){h.info(function(){if(h.g)if($)for(var oe="",Ue=$.split("&"),Mt=0;Mt<Ue.length;Mt++){var Be=Ue[Mt].split("=");if(1<Be.length){var qt=Be[0];Be=Be[1];var Pt=qt.split("_");oe=2<=Pt.length&&Pt[1]=="type"?oe+(qt+"="+Be+"&"):oe+(qt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+v+`
`+oe})}function Ad(h,y,v,w,B,$,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+v+`
`+$+" "+oe})}function Ei(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Is(h,v)+(w?" "+w:"")})}function Vc(h,y){h.info(function(){return"TIMEOUT: "+y})}Pn.prototype.info=function(){};function Is(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return $n(v)}catch{return y}}var Ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function sr(){}V(sr,vl),sr.prototype.g=function(){return new XMLHttpRequest},sr.prototype.i=function(){return{}},ir=new sr;function un(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var Sl={},Pa={};function Xn(h,y,v){h.L=1,h.v=Ns(wn(y)),h.m=v,h.P=!0,Pr(h,null)}function Pr(h,y){h.F=Date.now(),Ds(h),h.A=wn(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Vl(v.i,"t",w),h.C=0,v=h.j.J,h.h=new Et,h.g=Kc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Td(b(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(ws[0]=B.toString()),B=ws);for(var $=0;$<B.length;$++){var oe=Ic(v,B[$],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),vi(),wl(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const y=this.M;y&&Bn(h)==3?y.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Pt=Bn(this.g);var y=this.g.Ba();const Fr=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Bc(this.g)))){this.J||Pt!=4||y==7||(y==8||0>=Fr?vi(3):vi(2)),Ai(this);var v=this.g.Z();this.X=v;t:if(Nc(this)){var w=Bc(this.g);h="";var B=w.length,$=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),ar(this);var oe="";break t}this.h.i=new d.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!($&&y==B-1)});w.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,Ad(this.i,this.u,this.A,this.l,this.R,Pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Mt=this.g;if((Ue=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Ue)){var Be=Ue;break t}}Be=null}if(v=Be)Ei(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cs(this,v);else{this.o=!1,this.s=3,ot(12),Kt(this),ar(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<oe.length;)if(Yt=Oc(this,oe),Yt==Pa){Pt==4&&(this.s=4,ot(14),v=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Sl){this.s=4,ot(15),Ei(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else Ei(this.i,this.l,Yt,null),Cs(this,Yt);if(Nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||oe.length!=0||this.h.h||(this.s=1,ot(16),v=!1),this.o=this.o&&v,!v)Ei(this.i,this.l,oe,"[Invalid Chunked Response]"),Kt(this),ar(this);else if(0<oe.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),zs(qt),qt.M=!0,ot(11))}}else Ei(this.i,this.l,oe,null),Cs(this,oe);Pt==4&&Kt(this),this.o&&!this.J&&(Pt==4?Gc(this.j,this):(this.o=!1,Ds(this)))}else Id(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Kt(this),ar(this)}}}catch{}finally{}};function Nc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Oc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Pa:(v=Number(y.substring(v,w)),isNaN(v)?Sl:(w+=1,w+v>y.length?Pa:(y=y.slice(w,w+v),h.C=w+v,y)))}un.prototype.cancel=function(){this.J=!0,Kt(this)};function Ds(h){h.S=Date.now()+h.I,Mc(h,h.I)}function Mc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=It(b(h.ba,h),y)}function Ai(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Vc(this.i,this.A),this.L!=2&&(vi(),ot(17)),Kt(this),this.s=2,ar(this)):Mc(this,this.S-h)};function ar(h){h.j.G==0||h.J||Gc(h.j,h)}function Kt(h){Ai(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ss(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Cs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Rl(v.h,h))){if(!h.K&&Rl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Ka(v),Ha(v);else break e;Ll(v),ot(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=It(b(v.Za,v),6e3));if(1>=ka(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else jr(v,11)}else if((h.K||v.g==h)&&Ka(v),!ie(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Be=B[y];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const qt=Be[3];qt!=null&&(v.la=qt,v.j.info("VER="+v.la));const Pt=Be[4];Pt!=null&&(v.Aa=Pt,v.j.info("SVER="+v.Aa));const Fr=Be[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(w=1.5*Fr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Yt=h.g;if(Yt){const dr=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dr){var $=w.h;$.g||dr.indexOf("spdy")==-1&&dr.indexOf("quic")==-1&&dr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ua($,$.h),$.h=null))}if(w.D){const Ul=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(w.ya=Ul,Ze(w.I,w.D,Ul))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var oe=h;if(w.qa=Qc(w,w.J?w.ia:null,w.W),oe.K){cn(w.h,oe);var Ue=oe,Mt=w.L;Mt&&(Ue.I=Mt),Ue.B&&(Ai(Ue),Ds(Ue)),w.g=oe}else jc(w);0<v.i.length&&Qa(v)}else Be[0]!="stop"&&Be[0]!="close"||jr(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?jr(v,7):Ml(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}vi(4)}catch{}}var Pc=class{constructor(h,y){this.g=h,this.map=y}};function Lr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function La(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ka(h){return h.h?1:h.g?h.g.size:0}function Rl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ua(h,y){h.g?h.g.add(y):h.h=y}function cn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Lr.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Il(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return F(h.i)}function bd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function Ba(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function Dl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Ba(h),w=bd(h),B=w.length,$=0;$<B;$++)y.call(void 0,w[$],v&&v[$],h)}var xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),B=null;if(0<=w){var $=h[v].substring(0,w);B=h[v].substring(w+1)}else $=h[v];y($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Dt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Dt){this.h=h.h,Vs(this,h.j),this.o=h.o,this.g=h.g,bi(this,h.s),this.l=h.l;var y=h.i,v=new Ur;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),kr(this,v),this.m=h.m}else h&&(y=String(h).match(xs))?(this.h=!1,Vs(this,y[1]||"",!0),this.o=Ln(y[2]||""),this.g=Ln(y[3]||"",!0),bi(this,y[4]),this.l=Ln(y[5]||"",!0),kr(this,y[6]||"",!0),this.m=Ln(y[7]||"")):(this.h=!1,this.i=new Ur(null,this.h))}Dt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Os(y,Cl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Os(y,Cl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Os(v,v.charAt(0)=="/"?Sd:xl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Os(v,za)),h.join("")};function wn(h){return new Dt(h)}function Vs(h,y,v){h.j=v?Ln(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function bi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function kr(h,y,v){y instanceof Ur?(h.i=y,kc(h.i,h.h)):(v||(y=Os(y,Rd)),h.i=new Ur(y,h.h))}function Ze(h,y,v){h.i.set(y,v)}function Ns(h){return Ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ln(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Os(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Lc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Lc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Cl=/[#\/\?@]/g,xl=/[#\?:]/g,Sd=/[#\?]/g,Rd=/[#\?@]/g,za=/#/g;function Ur(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&wd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Ur.prototype,s.add=function(h,y){kn(this),this.i=null,h=or(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Br(h,y){kn(h),y=or(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function zr(h,y){return kn(h),y=or(h,y),h.g.has(y)}s.forEach=function(h,y){kn(this),this.g.forEach(function(v,w){v.forEach(function(B){h.call(y,B,w,this)},this)},this)},s.na=function(){kn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const B=h[w];for(let $=0;$<B.length;$++)v.push(y[w])}return v},s.V=function(h){kn(this);let y=[];if(typeof h=="string")zr(this,h)&&(y=y.concat(this.g.get(or(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return kn(this),this.i=null,h=or(this,h),zr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Vl(h,y,v){Br(h,y),0<v.length&&(h.i=null,h.g.set(or(h,y),F(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const $=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var B=$;oe[w]!==""&&(B+="="+encodeURIComponent(String(oe[w]))),h.push(B)}}return this.i=h.join("&")};function or(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function kc(h,y){y&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(v,w){var B=w.toLowerCase();w!=B&&(Br(this,w),Vl(this,B,v))},h)),h.j=y}function Ms(h,y){const v=new Pn;if(d.Image){const w=new Image;w.onload=R(Un,v,"TestLoadImage: loaded",!0,y,w),w.onerror=R(Un,v,"TestLoadImage: error",!1,y,w),w.onabort=R(Un,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=R(Un,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Zn(h,y){const v=new Pn,w=new AbortController,B=setTimeout(()=>{w.abort(),Un(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(B),$.ok?Un(v,"TestPingServer: ok",!0,y):Un(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Un(v,"TestPingServer: error",!1,y)})}function Un(h,y,v,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(v)}catch{}}function Ps(){this.g=new Rs}function lr(h,y,v){const w=v||"";try{Dl(h,function(B,$){let oe=B;p(B)&&(oe=$n(B)),y.push(w+$+"="+encodeURIComponent(oe))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function wi(h){this.l=h.Ub||null,this.j=h.eb||!1}V(wi,vl),wi.prototype.g=function(){return new qr(this.l,this.j)},wi.prototype.i=function(h){return function(){return h}}({});function qr(h,y){pt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(qr,pt),s=qr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,cr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,cr(this)),this.g&&(this.readyState=3,cr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ur(this):cr(this),this.readyState==3&&Nl(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,ur(this))},s.Qa=function(h){this.g&&(this.response=h,ur(this))},s.ga=function(){this.g&&ur(this)};function ur(h){h.readyState=4,h.l=null,h.j=null,h.v=null,cr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function cr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ol(h){let y="";return Ee(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function zt(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Ol(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Ze(h,y,v))}function He(h){pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(He,pt);var qa=/^https?$/i,Ls=["POST","PUT"];s=He.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?El(this.o):El(ir),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){Uc(this,$);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)v.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ls,y,void 0))||w||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of v)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(h),this.u=!1}catch($){Uc(this,$)}};function Uc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ja(h),hr(h)}function ja(h){h.A||(h.A=!0,Qe(h,"complete"),Qe(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qe(this,"complete"),Qe(this,"abort"),hr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hr(this,!0)),He.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},s.bb=function(){Fa(this)};function Fa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Bn(h)!=4||h.Z()!=2)){if(h.u&&Bn(h)==4)tn(h.Ea,0,h);else if(Qe(h,"readystatechange"),Bn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=oe===0){var B=String(h.D).match(xs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),w=!qa.test(B?B.toLowerCase():"")}v=w}if(v)Qe(h,"complete"),Qe(h,"success");else{h.m=6;try{var $=2<Bn(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",ja(h)}}finally{hr(h)}}}}function hr(h,y){if(h.g){ks(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Qe(h,"ready");try{v.onreadystatechange=w}catch{}}}function ks(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Bn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Oa(y)}};function Bc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Id(h){const y={};h=(h.g&&2<=Bn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ie(h[w]))continue;var v=P(h[w]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[B]||[];y[B]=$,$.push(v)}x(y,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ga(h){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,h),this.cb=Us("retryDelaySeedMs",1e4,h),this.Wa=Us("forwardChannelMaxRetries",2,h),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Lr(h&&h.concurrentRequestLimit),this.Da=new Ps,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ga.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,w){ot(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Qc(this,null,this.W),Qa(this)};function Ml(h){if(zc(h),h.G==3){var y=h.U++,v=wn(h.I);if(Ze(v,"SID",h.K),Ze(v,"RID",y),Ze(v,"TYPE","terminate"),Bs(h,v),y=new un(h,h.j,y),y.L=2,y.v=Ns(wn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Kc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ds(y)}Hc(h)}function Ha(h){h.g&&(zs(h),h.g.cancel(),h.g=null)}function zc(h){Ha(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ka(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Qa(h){if(!La(h.h)&&!h.s){h.s=!0;var y=h.Ga;ue||N(),pe||(ue(),pe=!0),ke.add(y,h),h.B=0}}function Dd(h,y){return ka(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=It(b(h.Ga,h,y),kl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new un(this,this.j,h);let $=this.o;if(this.S&&($?($=S($),O($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=qc(this,B,y),v=wn(this.I),Ze(v,"RID",h),Ze(v,"CVER",22),this.D&&Ze(v,"X-HTTP-Session-Id",this.D),Bs(this,v),$&&(this.O?y="headers="+encodeURIComponent(String(Ol($)))+"&"+y:this.m&&zt(v,this.m,$)),Ua(this.h,B),this.Ua&&Ze(v,"TYPE","init"),this.P?(Ze(v,"$req",y),Ze(v,"SID","null"),B.T=!0,Xn(B,v,null)):Xn(B,v,y),this.G=2}}else this.G==3&&(h?Pl(this,h):this.i.length==0||La(this.h)||Pl(this))};function Pl(h,y){var v;y?v=y.l:v=h.U++;const w=wn(h.I);Ze(w,"SID",h.K),Ze(w,"RID",v),Ze(w,"AID",h.T),Bs(h,w),h.m&&h.o&&zt(w,h.m,h.o),v=new un(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=qc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ua(h.h,v),Xn(v,w,y)}function Bs(h,y){h.H&&Ee(h.H,function(v,w){Ze(y,w,v)}),h.l&&Dl({},function(v,w){Ze(y,w,v)})}function qc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?b(h.l.Na,h.l,h):null;e:{var B=h.i;let $=-1;for(;;){const oe=["count="+v];$==-1?0<v?($=B[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Ue=!0;for(let Mt=0;Mt<v;Mt++){let Be=B[Mt].g;const qt=B[Mt].map;if(Be-=$,0>Be)$=Math.max(0,B[Mt].g-100),Ue=!1;else try{lr(qt,oe,"req"+Be+"_")}catch{w&&w(qt)}}if(Ue){w=oe.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function jc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ue||N(),pe||(ue(),pe=!0),ke.add(y,h),h.v=0}}function Ll(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=It(b(h.Fa,h),kl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=It(b(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Ha(this),Fc(this))};function zs(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Fc(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wn(h.qa);Ze(y,"RID","rpc"),Ze(y,"SID",h.K),Ze(y,"AID",h.T),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ze(y,"TO",h.ja),Ze(y,"TYPE","xmlhttp"),Bs(h,y),h.m&&h.o&&zt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ns(wn(y)),v.m=null,v.P=!0,Pr(v,h)}s.Za=function(){this.C!=null&&(this.C=null,Ha(this),Ll(this),ot(19))};function Ka(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Gc(h,y){var v=null;if(h.g==y){Ka(h),zs(h),h.g=null;var w=2}else if(Rl(h.h,y))v=y.D,cn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=h.B;w=_i(),Qe(w,new Ot(w,v)),Qa(h)}else jc(h);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&Dd(h,y)||w==2&&Ll(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),B){case 1:jr(h,5);break;case 4:jr(h,10);break;case 3:jr(h,6);break;default:jr(h,2)}}}function kl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function jr(h,y){if(h.j.info("Error code "+y),y==2){var v=b(h.fb,h),w=h.Xa;const B=!w;w=new Dt(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Vs(w,"https"),Ns(w),B?Ms(w.toString(),v):Zn(w.toString(),v)}else ot(2);h.G=0,h.l&&h.l.sa(y),Hc(h),zc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Hc(h){if(h.G=0,h.ka=[],h.l){const y=Il(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function Qc(h,y,v){var w=v instanceof Dt?wn(v):new Dt(v);if(w.g!="")y&&(w.g=y+"."+w.g),bi(w,w.s);else{var B=d.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var $=new Dt(null);w&&Vs($,w),y&&($.g=y),B&&bi($,B),v&&($.l=v),w=$}return v=h.D,y=h.ya,v&&y&&Ze(w,v,y),Ze(w,"VER",h.la),Bs(h,w),w}function Kc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new He(new wi({eb:v})):new He(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}s=Yc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ya(){}Ya.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){pt.call(this),this.g=new Ga(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new fr(this)}V(hn,pt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ml(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=$n(h),h=v);y.i.push(new Pc(y.Ya++,h)),y.G==3&&Qa(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,hn.aa.N.call(this)};function $c(h){Or.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}V($c,Or);function Xc(){Al.call(this),this.status=1}V(Xc,Al);function fr(h){this.g=h}V(fr,Yc),fr.prototype.ua=function(){Qe(this.g,"a")},fr.prototype.ta=function(h){Qe(this.g,new $c(h))},fr.prototype.sa=function(h){Qe(this.g,new Xc)},fr.prototype.ra=function(){Qe(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,YA=function(){return new Ya},KA=function(){return _i()},QA=rr,Hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,uf=Ti,Mr.COMPLETE="complete",HA=Mr,Tl.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ou=Tl,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,GA=He}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});const CT="@firebase/firestore",xT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Dp("@firebase/firestore");function xo(){return ss.logLevel}function AC(s){ss.setLogLevel(s)}function re(s,...e){if(ss.logLevel<=Le.DEBUG){const t=e.map(Op);ss.debug(`Firestore (${ll}): ${s}`,...t)}}function bt(s,...e){if(ss.logLevel<=Le.ERROR){const t=e.map(Op);ss.error(`Firestore (${ll}): ${s}`,...t)}}function Ir(s,...e){if(ss.logLevel<=Le.WARN){const t=e.map(Op);ss.warn(`Firestore (${ll}): ${s}`,...t)}}function Op(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(s="Unexpected state"){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+s;throw bt(e),new Error(e)}function ye(s,e){s||me()}function bC(s,e){s||me()}function fe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Ra{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class SC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class RC{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new en;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new en,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new en)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new $A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Qt(e)}}class IC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class DC{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new IC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CC{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,LA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0);const r=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new VT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string"),this.R=t.token,new VT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=xC(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function we(s,e){return s<e?-1:s>e?1:0}function Qg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return we(r,a);{const l=Mp(),c=VC(l.encode(NT(s,t)),l.encode(NT(e,t)));return c!==0?c:we(r,a)}}t+=r>65535?2:1}return we(s.length,e.length)}function NT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function VC(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return we(s[t],e[t]);return we(s.length,e.length)}function qo(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function ZA(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=-62135596800,MT=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*MT);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ne(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ne(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OT)throw new ne(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MT}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-OT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ft(0,0))}static max(){return new _e(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="__name__";class vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(),r===void 0?r=e.length-t:r>e.length-t&&me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return we(e.length,t.length)}static compareSegments(e,t){const r=vr.isNumericId(e),a=vr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?vr.extractNumericId(e).compare(vr.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class Me extends vr{construct(e,t,r){return new Me(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Me(t)}static emptyPath(){return new Me([])}}const NC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends vr{construct(e,t,r){return new ct(e,t,r)}static isValidIdentifier(e){return NC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PT}static keyField(){return new ct([PT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ne(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ne(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ne(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ne(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(t)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Me.fromString(e))}static fromName(e){return new he(Me.fromString(e).popFirst(5))}static empty(){return new he(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=-1;class wf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Kg(s){return s.fields.find(e=>e.kind===2)}function ia(s){return s.fields.filter(e=>e.kind!==2)}wf.UNKNOWN_ID=-1;class cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ku{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ku(0,On.min())}}function WA(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=_e.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new On(a,he.empty(),e)}function JA(s){return new On(s.readTime,s.key,jo)}class On{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new On(_e.min(),he.empty(),jo)}static max(){return new On(_e.max(),he.empty(),jo)}}function Pp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(s.documentKey,e.documentKey),t!==0?t:we(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ms(s){if(s.code!==Y.FAILED_PRECONDITION||s.message!==eb)throw s;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,r)=>{t(e)})}static reject(e){return new z((t,r)=>{r(e)})}static waitFor(e){return new z((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next(a=>a?z.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new z((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new z((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="SimpleDb";class Qf{static open(e,t,r,a){try{return new Qf(t,e.transaction(a,r))}catch(l){throw new ku(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new en,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new ku(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=Lp(r.target.error);this.m.reject(new ku(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(re(Nn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new MC(t)}}class wr{static delete(e){return re(Nn,"Removing database:",e),aa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!DA())return!1;if(wr.v())return!0;const e=Af(),t=wr.C(e),r=0<t&&t<10,a=nb(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,wr.C(Af())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(re(Nn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ne(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ne(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ku(e,c))},a.onupgradeneeded=l=>{re(Nn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{re(Nn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=Qf.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),z.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(re(Nn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nb(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class OC{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return aa(this.q.delete())}}class ku extends ne{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gs(s){return s.name==="IndexedDbTransactionError"}class MC{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(re(Nn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(re(Nn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return re(Nn,"ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(t=>(t===void 0&&(t=null),re(Nn,"GET",this.store.name,e,t),t))}delete(e){return re(Nn,"DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return re(Nn,"COUNT",this.store.name),aa(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(e,t){re(Nn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new z((r,a)=>{t.onerror=l=>{const c=Lp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new z((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new OC(d),p=t(d.primaryKey,d.value,m);if(p instanceof z){const _=p.catch(T=>(m.done(),z.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>z.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function aa(s){return new z((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=Lp(r.target.error);t(a)}})}let LT=!1;function Lp(s){const e=wr.C(Af());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LT||(LT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Uu="IndexBackfiller";class PC{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){re(Uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();re(Uu,`Documents written: ${t}`)}catch(t){gs(t)?re(Uu,"Ignoring IndexedDB error during index backfill: ",t):await ms(t)}await this.te(6e4)})}}class LC{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return z.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return re(Uu,`Processing collection: ${c}`),this.ie(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(a,l)).next(d=>(re(Uu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=JA(l);Pp(c,r)>0&&(r=c)}),new On(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}En.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=-1;function dc(s){return s==null}function Yu(s){return s===0&&1/s==-1/0}function rb(s){return typeof s=="number"&&Number.isInteger(s)&&!Yu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="";function on(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=kT(e)),e=kC(s.get(t),e);return kT(e)}function kC(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case Sf:t+="";break;default:t+=l}}return t}function kT(s){return s+Sf+""}function Ar(s){const e=s.length;if(ye(e>=2),e===2)return ye(s.charAt(0)===Sf&&s.charAt(1)===""),Me.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(Sf,l);switch((c<0||c>t)&&me(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:me()}l=c+2}return new Me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="remoteDocuments",mc="owner",wo="owner",$u="mutationQueues",UC="userId",tr="mutations",UT="batchId",ha="userMutationsIndex",BT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(s,e){return[s,on(e)]}function ib(s,e,t){return[s,on(e),t]}const BC={},Fo="documentMutations",Rf="remoteDocumentsV14",zC=["prefixPath","collectionGroup","readTime","documentId"],ff="documentKeyIndex",qC=["prefixPath","collectionGroup","documentId"],sb="collectionGroupIndex",jC=["collectionGroup","readTime","prefixPath","documentId"],Xu="remoteDocumentGlobal",Yg="remoteDocumentGlobalKey",Go="targets",ab="queryTargetsIndex",FC=["canonicalId","targetId"],Ho="targetDocuments",GC=["targetId","path"],kp="documentTargetsIndex",HC=["path","targetId"],If="targetGlobalKey",ma="targetGlobal",Zu="collectionParents",QC=["collectionId","parent"],Qo="clientMetadata",KC="clientId",Kf="bundles",YC="bundleId",Yf="namedQueries",$C="name",Up="indexConfiguration",XC="indexId",$g="collectionGroupIndex",ZC="collectionGroup",Df="indexState",WC=["indexId","uid"],ob="sequenceNumberIndex",JC=["uid","sequenceNumber"],Cf="indexEntries",ex=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lb="documentKeyIndex",tx=["indexId","uid","orderedDocumentKey"],$f="documentOverlays",nx=["userId","collectionPath","documentId"],Xg="collectionPathOverlayIndex",rx=["userId","collectionPath","largestBatchId"],ub="collectionGroupOverlayIndex",ix=["userId","collectionGroup","largestBatchId"],Bp="globals",sx="name",cb=[$u,tr,Fo,sa,Go,mc,ma,Ho,Qo,Xu,Zu,Kf,Yf],ax=[...cb,$f],hb=[$u,tr,Fo,Rf,Go,mc,ma,Ho,Qo,Xu,Zu,Kf,Yf,$f],fb=hb,zp=[...fb,Up,Df,Cf],ox=zp,lx=[...zp,Bp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends tb{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Ut(s,e){const t=fe(s);return wr.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ps(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function db(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Wt.RED,this.left=a??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Wt(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Wt.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,t,r,a,l){return this}insert(e,t,r){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qT(this.data.getIterator())}getIteratorFrom(e){return new qT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class qT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function So(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new Xe(ct.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new mb("Invalid base64 string: "+l):l}}(e);return new vt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const cx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(s){if(ye(!!s),typeof s=="string"){let e=0;const t=cx.exec(s);if(ye(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(s.seconds),nanos:ut(s.nanos)}}function ut(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ci(s){return typeof s=="string"?vt.fromBase64String(s):vt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="server_timestamp",pb="__type__",yb="__previous_value__",_b="__local_write_time__";function Xf(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[pb])===null||t===void 0?void 0:t.stringValue)===gb}function Zf(s){const e=s.mapValue.fields[yb];return Xf(e)?Zf(e):e}function Wu(s){const e=ui(s.mapValue.fields[_b].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,r,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const Wg="(default)";class as{constructor(e,t){this.projectId=e,this.database=t||Wg}static empty(){return new as("","")}get isDefaultDatabase(){return this.database===Wg}isEqual(e){return e instanceof as&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="__type__",vb="__max__",Zi={mapValue:{fields:{__type__:{stringValue:vb}}}},jp="__vector__",Ko="value",df={nullValue:"NULL_VALUE"};function os(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xf(s)?4:Eb(s)?9007199254740991:Wf(s)?10:11:me()}function Dr(s,e){if(s===e)return!0;const t=os(s);if(t!==os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Wu(s).isEqual(Wu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ui(a.timestampValue),d=ui(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return ci(a.bytesValue).isEqual(ci(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return ut(a.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(a.geoPointValue.longitude)===ut(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ut(a.integerValue)===ut(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ut(a.doubleValue),d=ut(l.doubleValue);return c===d?Yu(c)===Yu(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return qo(s.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(zT(c)!==zT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Dr(c[m],d[m])))return!1;return!0}(s,e);default:return me()}}function Ju(s,e){return(s.values||[]).find(t=>Dr(t,e))!==void 0}function ls(s,e){if(s===e)return 0;const t=os(s),r=os(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=ut(l.integerValue||l.doubleValue),m=ut(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,e);case 3:return jT(s.timestampValue,e.timestampValue);case 4:return jT(Wu(s),Wu(e));case 5:return Qg(s.stringValue,e.stringValue);case 6:return function(l,c){const d=ci(l),m=ci(c);return d.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=we(d[p],m[p]);if(_!==0)return _}return we(d.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=we(ut(l.latitude),ut(c.latitude));return d!==0?d:we(ut(l.longitude),ut(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return FT(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},b=c.fields||{},R=(d=T[Ko])===null||d===void 0?void 0:d.arrayValue,V=(m=b[Ko])===null||m===void 0?void 0:m.arrayValue,F=we(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:FT(R,V)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===Zi.mapValue&&c===Zi.mapValue)return 0;if(l===Zi.mapValue)return 1;if(c===Zi.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Qg(m[T],_[T]);if(b!==0)return b;const R=ls(d[m[T]],p[_[T]]);if(R!==0)return R}return we(m.length,_.length)}(s.mapValue,e.mapValue);default:throw me()}}function jT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return we(s,e);const t=ui(s),r=ui(e),a=we(t.seconds,r.seconds);return a!==0?a:we(t.nanos,r.nanos)}function FT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ls(t[a],r[a]);if(l)return l}return we(t.length,r.length)}function Yo(s){return Jg(s)}function Jg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=ui(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return ci(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return he.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Jg(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Jg(t.fields[c])}`;return a+"}"}(s.mapValue):me()}function mf(s){switch(os(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zf(s);return e?16+mf(e):16;case 5:return 2*s.stringValue.length;case 6:return ci(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+mf(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return ps(r.fields,(l,c)=>{a+=l.length+mf(c)}),a}(s.mapValue);default:throw me()}}function pa(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ep(s){return!!s&&"integerValue"in s}function ec(s){return!!s&&"arrayValue"in s}function GT(s){return!!s&&"nullValue"in s}function HT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gf(s){return!!s&&"mapValue"in s}function Wf(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[qp])===null||t===void 0?void 0:t.stringValue)===jp}function Bu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ps(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bu(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bu(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Eb(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===vb}const Tb={mapValue:{fields:{[qp]:{stringValue:jp},[Ko]:{arrayValue:{}}}}};function fx(s){return"nullValue"in s?df:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?pa(as.empty(),he.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Wf(s)?Tb:{mapValue:{}}:me()}function dx(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?pa(as.empty(),he.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Tb:"mapValue"in s?Wf(s)?{mapValue:{}}:Zi:me()}function QT(s,e){const t=ls(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function KT(s,e){const t=ls(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(t)}setAll(e){let t=ct.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Bu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];gf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ps(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new Jt(Bu(this.value))}}function Ab(s){const e=[];return ps(s.fields,(t,r)=>{const a=new ct([t]);if(gf(r)){const l=Ab(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new at(e,0,_e.min(),_e.min(),_e.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,a){return new at(e,1,t,_e.min(),r,a,0)}static newNoDocument(e,t){return new at(e,2,t,_e.min(),_e.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,_e.min(),_e.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t){this.position=e,this.inclusive=t}}function YT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=he.comparator(he.fromName(c.referenceValue),t.key):r=ls(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function $T(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Dr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function mx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{}class Pe extends bb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gx(e,t,r):t==="array-contains"?new _x(e,r):t==="in"?new Cb(e,r):t==="not-in"?new vx(e,r):t==="array-contains-any"?new Ex(e,r):new Pe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new px(e,r):new yx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ls(t,this.value)):t!==null&&os(this.value)===os(t)&&this.matchesComparison(ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends bb{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new $e(e,t)}matches(e){return $o(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function $o(s){return s.op==="and"}function tp(s){return s.op==="or"}function Fp(s){return wb(s)&&$o(s)}function wb(s){for(const e of s.filters)if(e instanceof $e)return!1;return!0}function np(s){if(s instanceof Pe)return s.field.canonicalString()+s.op.toString()+Yo(s.value);if(Fp(s))return s.filters.map(e=>np(e)).join(",");{const e=s.filters.map(t=>np(t)).join(",");return`${s.op}(${e})`}}function Sb(s,e){return s instanceof Pe?function(r,a){return a instanceof Pe&&r.op===a.op&&r.field.isEqual(a.field)&&Dr(r.value,a.value)}(s,e):s instanceof $e?function(r,a){return a instanceof $e&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Sb(c,a.filters[d]),!0):!1}(s,e):void me()}function Rb(s,e){const t=s.filters.concat(e);return $e.create(t,s.op)}function Ib(s){return s instanceof Pe?function(t){return`${t.field.canonicalString()} ${t.op} ${Yo(t.value)}`}(s):s instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(Ib).join(" ,")+"}"}(s):"Filter"}class gx extends Pe{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class px extends Pe{constructor(e,t){super(e,"in",t),this.keys=Db("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yx extends Pe{constructor(e,t){super(e,"not-in",t),this.keys=Db("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Db(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class _x extends Pe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ec(t)&&Ju(t.arrayValue,this.value)}}class Cb extends Pe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ju(this.value.arrayValue,t)}}class vx extends Pe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ju(this.value.arrayValue,t)}}class Ex extends Pe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function rp(s,e=null,t=[],r=[],a=null,l=null,c=null){return new Tx(s,e,t,r,a,l,c)}function ya(s){const e=fe(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>np(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yo(r)).join(",")),e.le=t}return e.le}function gc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!mx(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Sb(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!$T(s.startAt,e.startAt)&&$T(s.endAt,e.endAt)}function xf(s){return he.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Vf(s,e){return s.filters.filter(t=>t instanceof Pe&&t.field.isEqual(e))}function XT(s,e,t){let r=df,a=!0;for(const l of Vf(s,e)){let c=df,d=!0;switch(l.op){case"<":case"<=":c=fx(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=df}QT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];QT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function ZT(s,e,t){let r=Zi,a=!0;for(const l of Vf(s,e)){let c=Zi,d=!0;switch(l.op){case">=":case">":c=dx(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Zi}KT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];KT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function xb(s,e,t,r,a,l,c,d){return new di(s,e,t,r,a,l,c,d)}function ul(s){return new di(s)}function WT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Gp(s){return s.collectionGroup!==null}function Po(s){const e=fe(s);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xe(ct.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new tc(l,r))}),t.has(ct.keyField().canonicalString())||e.he.push(new tc(ct.keyField(),r))}return e.he}function gn(s){const e=fe(s);return e.Pe||(e.Pe=Ax(e,Po(s))),e.Pe}function Ax(s,e){if(s.limitType==="F")return rp(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new tc(a.field,l)});const t=s.endAt?new us(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new us(s.startAt.position,s.startAt.inclusive):null;return rp(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function ip(s,e){const t=s.filters.concat([e]);return new di(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Nf(s,e,t){return new di(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function pc(s,e){return gc(gn(s),gn(e))&&s.limitType===e.limitType}function Vb(s){return`${ya(gn(s))}|lt:${s.limitType}`}function Vo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>Ib(a)).join(", ")}]`),dc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Yo(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Yo(a)).join(",")),`Target(${r})`}(gn(s))}; limitType=${s.limitType})`}function yc(s,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):he.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,a){for(const l of Po(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=YT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Po(r),a)||r.endAt&&!function(c,d,m){const p=YT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Po(r),a))}(s,e)}function Nb(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Ob(s){return(e,t)=>{let r=!1;for(const a of Po(s)){const l=bx(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function bx(s,e,t){const r=s.field.isKeyField()?he.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?ls(m,p):me()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return db(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new it(he.comparator);function An(){return wx}const Mb=new it(he.comparator);function Mu(...s){let e=Mb;for(const t of s)e=e.insert(t.key,t);return e}function Pb(s){let e=Mb;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function br(){return zu()}function Lb(){return zu()}function zu(){return new mi(s=>s.toString(),(s,e)=>s.isEqual(e))}const Sx=new it(he.comparator),Rx=new Xe(he.comparator);function Ie(...s){let e=Rx;for(const t of s)e=e.add(t);return e}const Ix=new Xe(we);function Hp(){return Ix}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function kb(s){return{integerValue:""+s}}function Ub(s,e){return rb(e)?kb(e):Qp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function Dx(s,e,t){return s instanceof Xo?function(a,l){const c={fields:{[pb]:{stringValue:gb},[_b]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Xf(l)&&(l=Zf(l)),l&&(c.fields[yb]=l),{mapValue:c}}(t,e):s instanceof _a?zb(s,e):s instanceof va?qb(s,e):function(a,l){const c=Bb(a,l),d=JT(c)+JT(a.Ie);return ep(c)&&ep(a.Ie)?kb(d):Qp(a.serializer,d)}(s,e)}function Cx(s,e,t){return s instanceof _a?zb(s,e):s instanceof va?qb(s,e):t}function Bb(s,e){return s instanceof Zo?function(r){return ep(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Xo extends Jf{}class _a extends Jf{constructor(e){super(),this.elements=e}}function zb(s,e){const t=jb(e);for(const r of s.elements)t.some(a=>Dr(a,r))||t.push(r);return{arrayValue:{values:t}}}class va extends Jf{constructor(e){super(),this.elements=e}}function qb(s,e){let t=jb(e);for(const r of s.elements)t=t.filter(a=>!Dr(a,r));return{arrayValue:{values:t}}}class Zo extends Jf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function JT(s){return ut(s.integerValue||s.doubleValue)}function jb(s){return ec(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.field=e,this.transform=t}}function xx(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof _a&&a instanceof _a||r instanceof va&&a instanceof va?qo(r.elements,a.elements,Dr):r instanceof Zo&&a instanceof Zo?Dr(r.Ie,a.Ie):r instanceof Xo&&a instanceof Xo}(s.transform,e.transform)}class Vx{constructor(e,t){this.version=e,this.transformResults=t}}class ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ed{}function Fb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new hl(s.key,ht.none()):new cl(s.key,s.data,ht.none());{const t=s.data,r=Jt.empty();let a=new Xe(ct.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new gi(s.key,r,new Tn(a.toArray()),ht.none())}}function Nx(s,e,t){s instanceof cl?function(a,l,c){const d=a.value.clone(),m=t0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof gi?function(a,l,c){if(!pf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=t0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Gb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function qu(s,e,t,r){return s instanceof cl?function(l,c,d,m){if(!pf(l.precondition,c))return d;const p=l.value.clone(),_=n0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,e,t,r):s instanceof gi?function(l,c,d,m){if(!pf(l.precondition,c))return d;const p=n0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Gb(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(l,c,d){return pf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function Ox(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=Bb(r.transform,a||null);l!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,l))}return t||null}function e0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&qo(r,a,(l,c)=>xx(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class cl extends ed{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gi extends ed{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Gb(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function t0(s,e,t){const r=new Map;ye(s.length===t.length);for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,Cx(c,d,t[a]))}return r}function n0(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,Dx(l,c,e))}return r}class hl extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kp extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Nx(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Lb();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Fb(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(t,r)=>e0(t,r))&&qo(this.baseMutations,e.baseMutations,(t,r)=>e0(t,r))}}class $p{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ye(e.mutations.length===r.length);let a=function(){return Sx}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new $p(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,qe;function Hb(s){switch(s){case Y.OK:return me();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return me()}}function Qb(s){if(s===void 0)return bt("GRPC error has no .code"),Y.UNKNOWN;switch(s){case Vt.OK:return Y.OK;case Vt.CANCELLED:return Y.CANCELLED;case Vt.UNKNOWN:return Y.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return Y.INTERNAL;case Vt.UNAVAILABLE:return Y.UNAVAILABLE;case Vt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Vt.NOT_FOUND:return Y.NOT_FOUND;case Vt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Vt.ABORTED:return Y.ABORTED;case Vt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Vt.DATA_LOSS:return Y.DATA_LOSS;default:return me()}}(qe=Vt||(Vt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new es([4294967295,4294967295],0);function r0(s){const e=Mp().encode(s),t=new FA;return t.update(e),new Uint8Array(t.digest())}function i0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new es([t,r],0),new es([a,l],0)]}class Zp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(r<0)throw new Pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=es.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(es.fromNumber(r)));return a.compare(Px)===1&&(a=new es([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=r0(e),[r,a]=i0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Zp(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=r0(e),[r,a]=i0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vc(_e.min(),a,new it(we),An(),Ie())}}class Ec{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ec(r,t,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class Kb{constructor(e,t){this.targetId=e,this.ge=t}}class Yb{constructor(e,t,r=vt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class s0{constructor(){this.pe=0,this.ye=a0(),this.we=vt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ie(),t=Ie(),r=Ie();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:me()}}),new Ec(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=a0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ye(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Lx{constructor(e){this.ke=e,this.qe=new Map,this.Qe=An(),this.$e=ef(),this.Ue=ef(),this.Ke=new it(we)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(xf(l))if(r===0){const c=new he(l.path);this.ze(t,c,at.newNoDocument(c,_e.min()))}else ye(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ci(r).toUint8Array()}catch(m){if(m instanceof mb)return Ir("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Zp(c,a,l)}catch(m){return Ir(m instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&xf(d.target)){const m=new he(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,at.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=Ie();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new vc(e,t,this.Ke,this.Qe,r);return this.Qe=An(),this.$e=ef(),this.Ue=ef(),this.Ke=new it(we),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new s0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Xe(we),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Xe(we),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new s0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function ef(){return new it(he.comparator)}function a0(){return new it(he.comparator)}const kx={asc:"ASCENDING",desc:"DESCENDING"},Ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bx={and:"AND",or:"OR"};class zx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(s,e){return s.useProto3Json||dc(e)?e:{value:e}}function Wo(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function qx(s,e){return Wo(s,e.toTimestamp())}function wt(s){return ye(!!s),_e.fromTimestamp(function(t){const r=ui(t);return new ft(r.seconds,r.nanos)}(s))}function Wp(s,e){return ap(s,e).canonicalString()}function ap(s,e){const t=function(a){return new Me(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Xb(s){const e=Me.fromString(s);return ye(aw(e)),e}function nc(s,e){return Wp(s.databaseId,e.path)}function Sr(s,e){const t=Xb(e);if(t.get(1)!==s.databaseId.projectId)throw new ne(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ne(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new he(Jb(t))}function Zb(s,e){return Wp(s.databaseId,e)}function Wb(s){const e=Xb(s);return e.length===4?Me.emptyPath():Jb(e)}function op(s){return new Me(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Jb(s){return ye(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function o0(s,e,t){return{name:nc(s,e),fields:t.value.mapValue.fields}}function ew(s,e,t){const r=Sr(s,e.name),a=wt(e.updateTime),l=e.createTime?wt(e.createTime):_e.min(),c=new Jt({mapValue:{fields:e.fields}}),d=at.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function jx(s,e){return"found"in e?function(r,a){ye(!!a.found),a.found.name,a.found.updateTime;const l=Sr(r,a.found.name),c=wt(a.found.updateTime),d=a.found.createTime?wt(a.found.createTime):_e.min(),m=new Jt({mapValue:{fields:a.found.fields}});return at.newFoundDocument(l,c,d,m)}(s,e):"missing"in e?function(r,a){ye(!!a.missing),ye(!!a.readTime);const l=Sr(r,a.missing),c=wt(a.readTime);return at.newNoDocument(l,c)}(s,e):me()}function Fx(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(ye(_===void 0||typeof _=="string"),vt.fromBase64String(_||"")):(ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),vt.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?Y.UNKNOWN:Qb(p.code);return new ne(_,p.message||"")}(c);t=new Yb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Sr(s,r.document.name),l=wt(r.document.updateTime),c=r.document.createTime?wt(r.document.createTime):_e.min(),d=new Jt({mapValue:{fields:r.document.fields}}),m=at.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];t=new yf(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Sr(s,r.document),l=r.readTime?wt(r.readTime):_e.min(),c=at.newNoDocument(a,l),d=r.removedTargetIds||[];t=new yf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Sr(s,r.document),l=r.removedTargetIds||[];t=new yf([],l,a,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new Mx(a,l),d=r.targetId;t=new Kb(d,c)}}return t}function rc(s,e){let t;if(e instanceof cl)t={update:o0(s,e.key,e.value)};else if(e instanceof hl)t={delete:nc(s,e.key)};else if(e instanceof gi)t={update:o0(s,e.key,e.data),updateMask:$x(e.fieldMask)};else{if(!(e instanceof Kp))return me();t={verify:nc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Xo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _a)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof va)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zo)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw me()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:qx(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:me()}(s,e.precondition)),t}function lp(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?ht.updateTime(wt(l.updateTime)):l.exists!==void 0?ht.exists(l.exists):ht.none()}(e.currentDocument):ht.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ye(d.setToServerValue==="REQUEST_TIME"),m=new Xo;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new _a(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new va(_)}else"increment"in d?m=new Zo(c,d.increment):me();const p=ct.fromServerFormat(d.fieldPath);return new _c(p,m)}(s,a)):[];if(e.update){e.update.name;const a=Sr(s,e.update.name),l=new Jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Tn(p.map(_=>ct.fromServerFormat(_)))}(e.updateMask);return new gi(a,l,c,t,r)}return new cl(a,l,t,r)}if(e.delete){const a=Sr(s,e.delete);return new hl(a,t)}if(e.verify){const a=Sr(s,e.verify);return new Kp(a,t)}return me()}function Gx(s,e){return s&&s.length>0?(ye(e!==void 0),s.map(t=>function(a,l){let c=a.updateTime?wt(a.updateTime):wt(l);return c.isEqual(_e.min())&&(c=wt(l)),new Vx(c,a.transformResults||[])}(t,e))):[]}function tw(s,e){return{documents:[Zb(s,e.path)]}}function nw(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Zb(s,a);const l=function(p){if(p.length!==0)return sw($e.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(b){return{field:No(b.field),direction:Qx(b.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=sp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function rw(s){let e=Wb(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ye(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const b=iw(T);return b instanceof $e&&Fp(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(b=>function(V){return new tc(Oo(V.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(b))}(t.orderBy));let d=null;t.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,dc(b)?null:b}(t.limit));let m=null;t.startAt&&(m=function(T){const b=!!T.before,R=T.values||[];return new us(R,b)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const b=!T.before,R=T.values||[];return new us(R,b)}(t.endAt)),xb(e,a,c,l,d,"F",m,p)}function Hx(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iw(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Oo(t.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Oo(t.unaryFilter.field);return Pe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return Pe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Oo(t.unaryFilter.field);return Pe.create(c,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(s):s.fieldFilter!==void 0?function(t){return Pe.create(Oo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>iw(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return me()}}(t.compositeFilter.op))}(s):me()}function Qx(s){return kx[s]}function Kx(s){return Ux[s]}function Yx(s){return Bx[s]}function No(s){return{fieldPath:s.canonicalString()}}function Oo(s){return ct.fromServerFormat(s.fieldPath)}function sw(s){return s instanceof Pe?function(t){if(t.op==="=="){if(HT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(GT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(HT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(GT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:Kx(t.op),value:t.value}}}(s):s instanceof $e?function(t){const r=t.getFilters().map(a=>sw(a));return r.length===1?r[0]:{compositeFilter:{op:Yx(t.op),filters:r}}}(s):me()}function $x(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,r,a,l=_e.min(),c=_e.min(),d=vt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.Tt=e}}function Xx(s,e){let t;if(e.document)t=ew(s.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),a=Ta(e.noDocument.readTime);t=at.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me();{const r=he.fromSegments(e.unknownDocument.path),a=Ta(e.unknownDocument.version);t=at.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new ft(a[0],a[1]);return _e.fromTimestamp(l)}(e.readTime)),t}function l0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Of(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:nc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Wo(l,c.version.toTimestamp()),createTime:Wo(l,c.createTime.toTimestamp())}}(s.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ea(e.version)};else{if(!e.isUnknownDocument())return me();r.unknownDocument={path:t.path.toArray(),version:Ea(e.version)}}return r}function Of(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Ea(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ta(s){const e=new ft(s.seconds,s.nanoseconds);return _e.fromTimestamp(e)}function oa(s,e){const t=(e.baseMutations||[]).map(l=>lp(s.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>lp(s.Tt,l)),a=ft.fromMillis(e.localWriteTimeMs);return new Yp(e.batchId,a,t,r)}function Lu(s){const e=Ta(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Ta(s.lastLimboFreeSnapshotVersion):_e.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return ye(l.documents.length===1),gn(ul(Wb(l.documents[0])))}(s.query):function(l){return gn(rw(l))}(s.query),new ii(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,vt.fromBase64String(s.resumeToken))}function lw(s,e){const t=Ea(e.snapshotVersion),r=Ea(e.lastLimboFreeSnapshotVersion);let a;a=xf(e.target)?tw(s.Tt,e.target):nw(s.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ya(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Jp(s){const e=rw({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Nf(e,e.limit,"L"):e}function Ng(s,e){return new Xp(e.largestBatchId,lp(s.Tt,e.overlayMutation))}function u0(s,e){const t=e.path.lastSegment();return[s,on(e.path.popLast()),t]}function c0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Ea(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{getBundleMetadata(e,t){return h0(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ta(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return h0(e).put(function(a){return{bundleId:a.id,createTime:Ea(wt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return f0(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:Jp(l.bundledQuery),readTime:Ta(l.readTime)}}(r)})}saveNamedQuery(e,t){return f0(e).put(function(a){return{name:a.name,readTime:Ea(wt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function h0(s){return Ut(s,Kf)}function f0(s){return Ut(s,Yf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new td(e,r)}getOverlay(e,t){return Du(e).get(u0(this.userId,t)).next(r=>r?Ng(this.serializer,r):null)}getOverlays(e,t){const r=br();return z.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new Xp(t,c);a.push(this.Et(e,d))}),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(on(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Du(e).J(Xg,d))}),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=br(),l=on(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Du(e).G(Xg,c).next(d=>{for(const m of d){const p=Ng(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=br();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Du(e).Z({index:ub,range:d},(m,p,_)=>{const T=Ng(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return Du(e).put(function(a,l,c){const[d,m,p]=u0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:rc(a.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function Du(s){return Ut(s,$f)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{dt(e){return Ut(e,Bp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?vt.fromUint8Array(r):vt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Yu(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=ui(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ci(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?Eb(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Wf(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):me()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const c=Ko,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(ut(d)),this.wt(c,t),this.Rt(l[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),he.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}la.xt=new la;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=255;function Jx(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function d0(s){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=Jx(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class eV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=d0(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=d0(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Ro),this.jt(255)}Ht(){this.Jt(Ro),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Ro?(this.jt(Ro),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Ro?(this.Jt(Ro),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class tV{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class nV{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Cu{constructor(){this.Zt=new eV,this.Xt=new tV(this.Zt),this.en=new nV(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ua(this.indexId,this.documentKey,this.arrayValue,r)}}function Qi(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=m0(s.arrayValue,e.arrayValue),t!==0?t:(t=m0(s.directionalValue,e.directionalValue),t!==0?t:he.comparator(s.documentKey,e.documentKey)))}function m0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){this.rn=new Xe((t,r)=>ct.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(ye(e.collectionGroup===this.collectionId),this.an)return!1;const t=Kg(e);if(t!==void 0&&!this.cn(t))return!1;const r=ia(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new Xe(ct.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new cf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new cf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new cf(r.field,r.dir==="asc"?0:1)));return new wf(wf.UNKNOWN_ID,this.collectionId,t,Ku.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(s){var e,t;if(ye(s instanceof Pe||s instanceof $e),s instanceof Pe){if(s instanceof Cb){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Pe.create(s.field,"==",l)))||[];return $e.create(a,"or")}return s}const r=s.filters.map(a=>uw(a));return $e.create(r,s.op)}function rV(s){if(s.getFilters().length===0)return[];const e=hp(uw(s));return ye(cw(e)),up(e)||cp(e)?[e]:e.getFilters()}function up(s){return s instanceof Pe}function cp(s){return s instanceof $e&&Fp(s)}function cw(s){return up(s)||cp(s)||function(t){if(t instanceof $e&&tp(t)){for(const r of t.getFilters())if(!up(r)&&!cp(r))return!1;return!0}return!1}(s)}function hp(s){if(ye(s instanceof Pe||s instanceof $e),s instanceof Pe)return s;if(s.filters.length===1)return hp(s.filters[0]);const e=s.filters.map(r=>hp(r));let t=$e.create(e,s.op);return t=Mf(t),cw(t)?t:(ye(t instanceof $e),ye($o(t)),ye(t.filters.length>1),t.filters.reduce((r,a)=>ey(r,a)))}function ey(s,e){let t;return ye(s instanceof Pe||s instanceof $e),ye(e instanceof Pe||e instanceof $e),t=s instanceof Pe?e instanceof Pe?function(a,l){return $e.create([a,l],"and")}(s,e):p0(s,e):e instanceof Pe?p0(e,s):function(a,l){if(ye(a.filters.length>0&&l.filters.length>0),$o(a)&&$o(l))return Rb(a,l.getFilters());const c=tp(a)?a:l,d=tp(a)?l:a,m=c.filters.map(p=>ey(p,d));return $e.create(m,"or")}(s,e),Mf(t)}function p0(s,e){if($o(e))return Rb(e,s.getFilters());{const t=e.filters.map(r=>ey(s,r));return $e.create(t,"or")}}function Mf(s){if(ye(s instanceof Pe||s instanceof $e),s instanceof Pe)return s;const e=s.getFilters();if(e.length===1)return Mf(e[0]);if(wb(s))return s;const t=e.map(a=>Mf(a)),r=[];return t.forEach(a=>{a instanceof Pe?r.push(a):a instanceof $e&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:$e.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.Tn=new ty}addToCollectionParentIndex(e,t){return this.Tn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(On.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(On.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class ty{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Xe(Me.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Xe(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="IndexedDbIndexManager",tf=new Uint8Array(0);class sV{constructor(e,t){this.databaseId=t,this.In=new ty,this.En=new mi(r=>ya(r),(r,a)=>gc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:on(a)};return _0(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[ZA(t),""],!1,!0);return _0(e).G(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Ar(c.parent))}return r})}addFieldIndex(e,t){const r=xu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Do(e);return l.next(d=>{c.put(c0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=xu(e),a=Do(e),l=Io(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=xu(e),r=Io(e),a=Do(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return z.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new g0(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Io(e);let a=!0;const l=new Map;return z.forEach(this.dn(t),c=>this.An(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=Ie();const d=[];return z.forEach(l,(m,p)=>{re(y0,`Using index ${function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(de=>`${de.fieldPath}:${de.kind}`).join(",")}`}(m)} to execute ${ya(t)}`);const _=function(K,de){const le=Kg(de);if(le===void 0)return null;for(const Ee of Vf(K,le.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null}(p,m),T=function(K,de){const le=new Map;for(const Ee of ia(de))for(const x of Vf(K,Ee.fieldPath))switch(x.op){case"==":case"in":le.set(Ee.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return le.set(Ee.fieldPath.canonicalString(),x.value),Array.from(le.values())}return null}(p,m),b=function(K,de){const le=[];let Ee=!0;for(const x of ia(de)){const S=x.kind===0?XT(K,x.fieldPath,K.startAt):ZT(K,x.fieldPath,K.startAt);le.push(S.value),Ee&&(Ee=S.inclusive)}return new us(le,Ee)}(p,m),R=function(K,de){const le=[];let Ee=!0;for(const x of ia(de)){const S=x.kind===0?ZT(K,x.fieldPath,K.endAt):XT(K,x.fieldPath,K.endAt);le.push(S.value),Ee&&(Ee=S.inclusive)}return new us(le,Ee)}(p,m),V=this.Rn(m,p,b),F=this.Rn(m,p,R),U=this.Vn(m,p,T),Q=this.mn(m.indexId,_,V,b.inclusive,F,R.inclusive,U);return z.forEach(Q,ie=>r.H(ie,t.limit).next(K=>{K.forEach(de=>{const le=he.fromSegments(de.documentKey);c.has(le)||(c=c.add(le),d.push(le))})}))}).next(()=>d)}return z.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=rV($e.create(e.filters,"and")).map(r=>rp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const b=t?this.fn(t[T/p]):tf,R=this.gn(e,b,r[T%p],a),V=this.pn(e,b,l[T%p],c),F=d.map(U=>this.gn(e,b,U,!0));_.push(...this.createRange(R,V,F))}return _}gn(e,t,r,a){const l=new ua(e,he.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new ua(e,he.empty(),t,r);return a?l.nn():l}An(e,t){const r=new g0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.dn(t);return z.forEach(a,l=>this.An(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new Xe(ct.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Cu;for(const a of ia(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);la.xt.At(l,c)}return r.Yt()}fn(e){const t=new Cu;return la.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Cu;return la.xt.At(pa(this.databaseId,t),r.tn(function(l){const c=ia(l);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Cu);let l=0;for(const c of ia(e)){const d=r[l++];for(const m of a)if(this.Sn(t,c.fieldPath)&&ec(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);la.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Cu;m.seed(d.Yt()),la.xt.At(c,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=xu(e),a=Do(e);return(t?r.G($g,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const c=[];return z.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const b=T?new Ku(T.sequenceNumber,new On(Ta(T.readTime),new he(Ar(T.documentKey)),T.largestBatchId)):Ku.empty(),R=_.fields.map(([V,F])=>new cf(ct.fromServerFormat(V),F));return new wf(_.indexId,_.collectionGroup,R,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:we(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=xu(e),l=Do(e);return this.vn(e).next(c=>a.G($g,IDBKeyRange.bound(t,t)).next(d=>z.forEach(d,m=>l.put(c0(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),z.forEach(d,m=>this.Cn(e,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?z.resolve():this.Mn(e,l,m,p,_)}))))})}xn(e,t,r,a){return Io(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Io(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Io(e);let l=new Xe(Qi);return a.Z({index:lb,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{l=l.add(new ua(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new Xe(Qi);const a=this.yn(t,e);if(a==null)return r;const l=Kg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ec(c))for(const d of c.arrayValue.values||[])r=r.add(new ua(t.indexId,e.key,this.fn(d),a))}else r=r.add(new ua(t.indexId,e.key,tf,a));return r}Mn(e,t,r,a,l){re(y0,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,_,T,b){const R=m.getIterator(),V=p.getIterator();let F=So(R),U=So(V);for(;F||U;){let Q=!1,ie=!1;if(F&&U){const K=_(F,U);K<0?ie=!0:K>0&&(Q=!0)}else F!=null?ie=!0:Q=!0;Q?(T(U),U=So(V)):ie?(b(F),F=So(R)):(F=So(R),U=So(V))}}(a,l,Qi,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),z.waitFor(c)}vn(e){let t=1;return Do(e).Z({index:ob,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>Qi(c,d)).filter((c,d,m)=>!d||Qi(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=Qi(c,e),m=Qi(c,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,tf,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,tf,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return Qi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(v0)}getMinOffset(e,t){return z.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||me())).next(v0)}}function _0(s){return Ut(s,Zu)}function Io(s){return Ut(s,Cf)}function xu(s){return Ut(s,Up)}function Do(s){return Ut(s,Df)}function v0(s){ye(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;Pp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new On(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hw=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(s,e,t){const r=s.store(tr),a=s.store(Fo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:c},(_,T,b)=>(d++,b.delete()));l.push(m.next(()=>{ye(d===1)}));const p=[];for(const _ of t.mutations){const T=ib(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return z.waitFor(l).next(()=>p)}function Pf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw me();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(hw,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);class nd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){ye(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new nd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).Z({index:ha,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Mo(e),c=Ki(e);return c.add({}).next(d=>{ye(typeof d=="number");const m=new Yp(d,t,r,a),p=function(R,V,F){const U=F.baseMutations.map(ie=>rc(R.Tt,ie)),Q=F.mutations.map(ie=>rc(R.Tt,ie));return{userId:V,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:U,mutations:Q}}(this.serializer,this.userId,m),_=[];let T=new Xe((b,R)=>we(b.canonicalString(),R.canonicalString()));for(const b of a){const R=ib(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(p)),_.push(l.put(R,BC))}return T.forEach(b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),z.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return Ki(e).get(t).next(r=>r?(ye(r.userId===this.userId),oa(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?z.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ki(e).Z({index:ha,range:a},(c,d,m)=>{d.userId===this.userId&&(ye(d.batchId>=r),l=oa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ts;return Ki(e).Z({index:ha,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ts],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).G(ha,t).next(r=>r.map(a=>oa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=hf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Mo(e).Z({range:a},(c,d,m)=>{const[p,_,T]=c,b=Ar(_);if(p===this.userId&&t.path.isEqual(b))return Ki(e).get(T).next(R=>{if(!R)throw me();ye(R.userId===this.userId),l.push(oa(this.serializer,R))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we);const a=[];return t.forEach(l=>{const c=hf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Mo(e).Z({range:d},(p,_,T)=>{const[b,R,V]=p,F=Ar(R);b===this.userId&&l.path.isEqual(F)?r=r.add(V):T.done()});a.push(m)}),z.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=hf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Xe(we);return Mo(e).Z({range:c},(m,p,_)=>{const[T,b,R]=m,V=Ar(b);T===this.userId&&r.isPrefixOf(V)?V.length===a&&(d=d.add(R)):_.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(Ki(e).get(l).next(c=>{if(c===null)throw me();ye(c.userId===this.userId),r.push(oa(this.serializer,c))}))}),z.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return fw(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),z.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Mo(e).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Ar(l[1]);a.push(m)}else d.done()}).next(()=>{ye(a.length===0)})})}containsKey(e,t){return dw(e,this.userId,t)}Qn(e){return mw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ts,lastStreamToken:""})}}function dw(s,e,t){const r=hf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Mo(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function Ki(s){return Ut(s,tr)}function Mo(s){return Ut(s,Fo)}function mw(s){return Ut(s,$u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Aa(0)}static Kn(){return new Aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Aa(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>_e.fromTimestamp(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Co(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Co(e).Z((c,d)=>{const m=Lu(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>z.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Co(e).Z((r,a)=>{const l=Lu(a);t(l)})}Wn(e){return T0(e).get(If).next(t=>(ye(t!==null),t))}Gn(e,t){return T0(e).put(If,t)}zn(e,t){return Co(e).put(lw(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ya(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Co(e).Z({range:a,index:ab},(c,d,m)=>{const p=Lu(d);gc(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=Xi(e);return t.forEach(c=>{const d=on(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=Xi(e);return z.forEach(t,l=>{const c=on(l.path);return z.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Xi(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Xi(e);let l=Ie();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Ar(c[1]),_=new he(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=on(t.path),a=IDBKeyRange.bound([r],[ZA(r)],!1,!0);let l=0;return Xi(e).Z({index:kp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Co(e).get(t).next(r=>r?Lu(r):null)}}function Co(s){return Ut(s,Go)}function T0(s){return Ut(s,ma)}function Xi(s){return Ut(s,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="LruGarbageCollector",oV=1048576;function b0([s,e],[t,r]){const a=we(s,t);return a===0?we(e,r):a}class lV{constructor(e){this.Hn=e,this.buffer=new Xe(b0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();b0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){re(A0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gs(t)?re(A0,"Ignoring IndexedDB error during garbage collection: ",t):await ms(t)}await this.er(3e5)})}}class uV{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(En.ae);const r=new lV(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(E0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),xo()<=Le.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function pw(s,e){return new uV(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.db=e,this.garbageCollector=pw(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return nf(e,r)}removeReference(e,t,r){return nf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nf(e,t)}ar(e,t){return function(a,l){let c=!1;return mw(a).X(d=>dw(a,d,l).next(m=>(m&&(c=!0),z.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(c,d)=>{if(d<=t){const m=this.ar(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,_e.min()),Xi(e).delete(function(T){return[0,on(T.path)]}(c))))});a.push(m)}}).next(()=>z.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nf(e,t)}_r(e,t){const r=Xi(e);let a,l=En.ae;return r.Z({index:kp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==En.ae&&t(new he(Ar(a)),l),l=p,a=m):l=En.ae}).next(()=>{l!==En.ae&&t(new he(Ar(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nf(s,e){return Xi(s).put(function(r,a){return{targetId:0,path:on(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.changes=new mi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return na(e).put(r)}removeEntry(e,t,r){return na(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Of(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return na(e).Z({index:ff,range:IDBKeyRange.only(Vu(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return na(e).Z({index:ff,range:IDBKeyRange.only(Vu(t))},(a,l)=>{r={document:this.cr(t,l),size:Pf(l)}}).next(()=>r)}getEntries(e,t){let r=An();return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(e,t){let r=An(),a=new it(he.comparator);return this.hr(e,t,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,Pf(c))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return z.resolve();let a=new Xe(R0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Vu(a.first()),Vu(a.last())),c=a.getIterator();let d=c.getNext();return na(e).Z({index:ff,range:l},(m,p,_)=>{const T=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&R0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(Vu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Of(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=An();for(const T of p){const b=this.cr(he.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(yc(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=An();const c=S0(t,r),d=S0(t,On.max());return na(e).Z({index:sb,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new fV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return w0(e).get(Yg).next(t=>(ye(!!t),t))}ur(e,t){return w0(e).put(Yg,t)}cr(e,t){if(t){const r=Xx(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(_e.min())))return r}return at.newInvalidDocument(e)}}function _w(s){return new hV(s)}class fV extends yw{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new mi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Xe((l,c)=>we(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=l0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=Pf(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=l0(this.Ir.serializer,c.convertToNoDocument(_e.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function w0(s){return Ut(s,Xu)}function na(s){return Ut(s,Rf)}function Vu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function S0(s,e){const t=e.documentKey.path.toArray();return[s,Of(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function R0(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=we(t[l],r[l]),a)return a;return a=we(t.length,r.length),a||(a=we(t[t.length-2],r[r.length-2]),a||we(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&qu(r.mutation,a,Tn.empty(),ft.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){const a=br();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=Mu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=An();const c=zu(),d=function(){return zu()}();return t.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof gi)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),qu(_.mutation,p,_.mutation.getFieldMask(),ft.now())):c.set(p.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new dV(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=zu();let a=new it((c,d)=>c-d),l=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||Tn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||Ie()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Lb();_.forEach(b=>{if(!l.has(b)){const R=Fb(t.get(b),r.get(b));R!==null&&T.set(b,R),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return z.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return he.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(br());let d=jo,m=l;return c.next(p=>z.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?z.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{m=m.insert(_,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Ie())).next(_=>({batchId:d,changes:Pb(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let a=Mu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Mu();return this.indexManager.getCollectionParents(e,l).next(d=>z.forEach(d,m=>{const p=function(T,b){return new di(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,at.newInvalidDocument(_)))});let d=Mu();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&qu(_.mutation,p,Tn.empty(),ft.now()),yc(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return z.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:wt(a.createTime)}}(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:Jp(a.bundledQuery),readTime:wt(a.readTime)}}(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.overlays=new it(he.comparator),this.Rr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=br();return z.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=br(),l=t.length+1,c=new he(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new it((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=br(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=br(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return z.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Xp(t,r));let l=this.Rr.get(t);l===void 0&&(l=Ie(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.Vr=new Xe(Ht.mr),this.gr=new Xe(Ht.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ht(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new he(new Me([])),r=new Ht(t,e),a=new Ht(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new he(new Me([])),r=new Ht(t,e),a=new Ht(t,e+1);let l=Ie();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Ht(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return he.comparator(e.key,t.key)||we(e.Cr,t.Cr)}static pr(e,t){return we(e.Cr,t.Cr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Xe(Ht.mr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Yp(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return z.resolve(c)}lookupMutationBatch(e,t){return z.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ts:this.Fr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),a=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we);return t.forEach(a=>{const l=new Ht(a,0),c=new Ht(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),z.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;he.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new he(l),0);let d=new Xe(we);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),z.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ye(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return z.forEach(t.mutations,a=>{const l=new Ht(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Ht(t,0),a=this.Mr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.kr=e,this.docs=function(){return new it(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=An();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():at.newInvalidDocument(a))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=An();const c=t.path,d=new he(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Pp(JA(_),r)<=0||(a.has(_.key)||yc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){me()}qr(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vV(this)}getSize(e){return z.resolve(this.size)}}class vV extends yw{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.persistence=e,this.Qr=new mi(t=>ya(t),gc),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ny,this.targetCount=0,this.Kr=Aa.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),z.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.zn(t),z.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),z.waitFor(l).next(()=>a)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new En(0),this.zr=!1,this.zr=!0,this.jr=new pV,this.referenceDelegate=e(this),this.Hr=new EV(this),this.indexManager=new iV,this.remoteDocumentCache=function(a){return new _V(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new ow(t),this.Yr=new mV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new yV(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const a=new TV(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return z.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class TV extends tb{constructor(e){super(),this.currentSequenceNumber=e}}class rd{constructor(e){this.persistence=e,this.ti=new ny,this.ni=null}static ri(e){return new rd(e)}get ii(){if(this.ni)return this.ni;throw me()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),z.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.ii,r=>{const a=he.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,_e.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return z.or([()=>z.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.oi=new mi(r=>on(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=pw(this,t)}static ri(e,t){return new Lf(e,t)}Zr(){}Xr(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return z.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?z.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,_e.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),z.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}ar(e,t,r){return z.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Qf("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(mc)}(e),function(m){m.createObjectStore($u,{keyPath:UC}),m.createObjectStore(tr,{keyPath:UT,autoIncrement:!0}).createIndex(ha,BT,{unique:!0}),m.createObjectStore(Fo)}(e),I0(e),function(m){m.createObjectStore(sa)}(e));let c=z.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(Ho),m.deleteObjectStore(Go),m.deleteObjectStore(ma)}(e),I0(e)),c=c.next(()=>function(m){const p=m.store(ma),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_e.min().toTimestamp(),targetCount:0};return p.put(If,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(tr).G().next(T=>{m.deleteObjectStore(tr),m.createObjectStore(tr,{keyPath:UT,autoIncrement:!0}).createIndex(ha,BT,{unique:!0});const b=p.store(tr),R=T.map(V=>b.put(V));return z.waitFor(R)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(Qo,{keyPath:KC})})(e)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Xu)}(e),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Kf,{keyPath:YC})})(e),function(m){m.createObjectStore(Yf,{keyPath:$C})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore($f,{keyPath:nx});p.createIndex(Xg,rx,{unique:!1}),p.createIndex(ub,ix,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(Rf,{keyPath:zC});p.createIndex(ff,qC),p.createIndex(sb,jC)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(sa))),r<14&&a>=14&&(c=c.next(()=>this.Pi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Up,{keyPath:XC,autoIncrement:!0}).createIndex($g,ZC,{unique:!1}),m.createObjectStore(Df,{keyPath:WC}).createIndex(ob,JC,{unique:!1}),m.createObjectStore(Cf,{keyPath:ex}).createIndex(lb,tx,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Df).clear()}).next(()=>{t.objectStore(Cf).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Bp,{keyPath:sx})})(e)})),c}ai(e){let t=0;return e.store(sa).Z((r,a)=>{t+=Pf(a)}).next(()=>{const r={byteSize:t};return e.store(Xu).put(Yg,r)})}_i(e){const t=e.store($u),r=e.store(tr);return t.G().next(a=>z.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,ts],[l.userId,l.lastAcknowledgedBatchId]);return r.G(ha,c).next(d=>z.forEach(d,m=>{ye(m.userId===l.userId);const p=oa(this.serializer,m);return fw(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Ho),r=e.store(sa);return e.store(ma).get(If).next(a=>{const l=[];return r.Z((c,d)=>{const m=new Me(c),p=function(T){return[0,on(T)]}(m);l.push(t.get(p).next(_=>_?z.resolve():(T=>t.put({targetId:0,path:on(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>z.waitFor(l))})}ci(e,t){e.createObjectStore(Zu,{keyPath:QC});const r=t.store(Zu),a=new ty,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:on(m)})}};return t.store(sa).Z({Y:!0},(c,d)=>{const m=new Me(c);return l(m.popLast())}).next(()=>t.store(Fo).Z({Y:!0},([c,d,m],p)=>{const _=Ar(d);return l(_.popLast())}))}li(e){const t=e.store(Go);return t.Z((r,a)=>{const l=Lu(a),c=lw(this.serializer,l);return t.put(c)})}hi(e,t){const r=t.store(sa),a=[];return r.Z((l,c)=>{const d=t.store(Rf),m=function(T){return T.document?new he(Me.fromString(T.document.name).popFirst(5)):T.noDocument?he.fromSegments(T.noDocument.path):T.unknownDocument?he.fromSegments(T.unknownDocument.path):me()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>z.waitFor(a))}Pi(e,t){const r=t.store(tr),a=_w(this.serializer),l=new ry(rd.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:Ie();oa(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),z.forEach(d,(m,p)=>{const _=new Qt(p),T=td.It(this.serializer,_),b=l.getIndexManager(_),R=nd.It(_,this.serializer,b,l.referenceDelegate);return new vw(a,R,T,b).recalculateAndSaveOverlaysForDocumentKeys(new Zg(t,En.ae),m).next()})})}}function I0(s){s.createObjectStore(Ho,{keyPath:GC}).createIndex(kp,HC,{unique:!0}),s.createObjectStore(Go,{keyPath:"targetId"}).createIndex(ab,FC,{unique:!0}),s.createObjectStore(ma)}const Yi="IndexedDbPersistence",Og=18e5,Mg=5e3,Pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ew="main";class iy{constructor(e,t,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=b=>Promise.resolve(),!iy.D())throw new ne(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cV(this,a),this.gi=t+Ew,this.serializer=new ow(m),this.pi=new wr(this.gi,this.di,new AV(this.serializer)),this.jr=new Wx,this.Hr=new aV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_w(this.serializer),this.Yr=new Zx,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&bt(Yi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(Y.FAILED_PRECONDITION,Pg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new En(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(gs(e))return re(Yi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(Yi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Nu(e).get(wo).next(t=>z.resolve(this.Ni(t)))}Bi(e){return rf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Og)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ut(t,Qo);return r.G().next(a=>{const l=this.qi(a,Og),c=a.filter(d=>l.indexOf(d)===-1);return z.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?z.resolve(!0):Nu(e).get(wo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Mg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ne(Y.FAILED_PRECONDITION,Pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||rf(e).G().next(r=>this.qi(r,Mg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&re(Yi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[mc,Qo],e=>{const t=new Zg(e,En.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>rf(e).G().next(t=>this.qi(t,Og).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return nd.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sV(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return td.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){re(Yi,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?lx:m===16?ox:m===15?zp:m===14?fb:m===13?hb:m===12?ax:m===11?cb:void me()}(this.di);let c;return this.pi.runTransaction(e,a,l,d=>(c=new Zg(d,this.Gr?this.Gr.next():En.ae),t==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ne(Y.FAILED_PRECONDITION,eb);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return Nu(e).get(wo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Mg)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ne(Y.FAILED_PRECONDITION,Pg)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nu(e).put(wo,t)}static D(){return wr.D()}xi(e){const t=Nu(e);return t.get(wo).next(r=>this.Ni(r)?(re(Yi,"Releasing primary lease."),t.delete(wo)):z.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;IA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return re(Yi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bt(Yi,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nu(s){return Ut(s,mc)}function rf(s){return Ut(s,Qo)}function sy(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=Ie(),a=Ie();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ay(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return IA()?8:nb(Af())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new bV;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(xo()<=Le.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),z.resolve()):(xo()<=Le.DEBUG&&re("QueryEngine","Query:",Vo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(xo()<=Le.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(t))):z.resolve())}rs(e,t){if(WT(t))return z.resolve(null);let r=gn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Nf(t,null,"F"),r=gn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Ie(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Nf(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return WT(t)||a.isEqual(_e.min())?z.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?z.resolve(null):(xo()<=Le.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Vo(t)),this.hs(e,c,t,WA(a,jo)).next(d=>d))})}cs(e,t){let r=new Xe(Ob(e));return t.forEach((a,l)=>{yc(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return xo()<=Le.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Vo(t)),this.ns.getDocumentsMatchingQuery(e,t,On.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",wV=3e8;class SV{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new it(we),this.Is=new mi(l=>ya(l),gc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function Aw(s,e,t,r){return new SV(s,e,t,r)}async function bw(s,e){const t=fe(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Ie();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function RV(s,e){const t=fe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,b=T.keys();let R=z.resolve();return b.forEach(V=>{R=R.next(()=>_.getEntry(m,V)).next(F=>{const U=p.docVersions.get(V);ye(U!==null),F.version.compareTo(U)<0&&(T.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ie();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function ww(s){const e=fe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function IV(s,e){const t=fe(s),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,T)));let R=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(vt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),a=a.insert(T,R),function(F,U,Q){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=wV?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(b,R,_)&&d.push(t.Hr.updateTargetData(l,R))});let m=An(),p=Ie();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(Sw(l,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(_e.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return z.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function Sw(s,e,t){let r=Ie(),a=Ie();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=An();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(_e.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):re(oy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function DV(s,e){const t=fe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ts),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jo(s,e){const t=fe(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,z.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new ii(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function el(s,e,t){const r=fe(s),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!gs(c))throw c;re(oy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function kf(s,e,t){const r=fe(s);let a=_e.min(),l=Ie();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=fe(m),b=T.Is.get(_);return b!==void 0?z.resolve(T.Ts.get(b)):T.Hr.getTargetData(p,_)}(r,c,gn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:_e.min(),t?l:Ie())).next(d=>(Dw(r,Nb(e),d),{documents:d,gs:l})))}function Rw(s,e){const t=fe(s),r=fe(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(c=>c?c.target:null))}function Iw(s,e){const t=fe(s),r=t.Es.get(e)||_e.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,WA(r,jo),Number.MAX_SAFE_INTEGER)).then(a=>(Dw(t,e,a),a))}function Dw(s,e,t){let r=s.Es.get(e)||_e.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(e,r)}async function CV(s,e,t,r){const a=fe(s);let l=Ie(),c=An();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const T=e.ys(p);T.setReadTime(e.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await Jo(a,function(_){return gn(ul(Me.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>Sw(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function xV(s,e,t=Ie()){const r=await Jo(s,gn(Jp(e.bundledQuery))),a=fe(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=wt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(vt.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="firestore_clients";function D0(s,e){return`${Cw}_${s}_${e}`}const xw="firestore_mutations";function C0(s,e,t){let r=`${xw}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Vw="firestore_targets";function Lg(s,e){return`${Vw}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="SharedClientState";class Uf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ne(a.error.code,a.error.message))),c?new Uf(e,t,a.state,l):(bt(Er,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ne(r.error.code,r.error.message))),l?new ju(e,r.state,a):(bt(Er,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Hp();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=rb(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Bf(e,l):(bt(Er,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ly{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ly(t.clientId,t.onlineState):(bt(Er,`Failed to parse online state: ${e}`),null)}}class fp{constructor(){this.activeTargetIds=Hp()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kg{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new it(we),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=D0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new fp),this.Ls=new RegExp(`^${Cw}_${c}_([^_]*)$`),this.ks=new RegExp(`^${xw}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Vw}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(D0(this.persistenceKey,r));if(a){const l=Bf.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Lg(this.persistenceKey,e));if(a){const l=ju.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Er,"READ",e,t),t}setItem(e,t){re(Er,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Er,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(re(Er,"EVENT",t.key,t.newValue),t.key===this.Ns)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let c=En.ae;if(l!=null)try{const d=JSON.parse(l);ye(typeof d=="number"),c=d}catch(d){bt(Er,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==En.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new Uf(this.currentUser,e,t,r),l=C0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=C0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=Lg(this.persistenceKey,e),l=new ju(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Bf.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Uf.Ss(new Qt(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return ju.Ss(a,t)}Ks(e){return ly.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);re(Er,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=Hp();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Nw{constructor(){this.ho=new fp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new fp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="ConnectivityMonitor";class V0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){re(x0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){re(x0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=null;function dp(){return sf===null?sf=function(){return 268435456+Math.round(2147483648*Math.random())}():sf++,"0x"+sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="RestConnection",NV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===Wg?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=dp(),d=this.bo(e,t.toUriEncodedString());re(Ug,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(re(Ug,`Received RPC '${e}' ${c}: `,p),p),p=>{throw Ir(Ug,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=NV[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class PV extends OV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=dp();return new Promise((c,d)=>{const m=new GA;m.setWithCredentials(!0),m.listenOnce(HA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case uf.NO_ERROR:const _=m.getResponseJson();re(sn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case uf.TIMEOUT:re(sn,`RPC '${e}' ${l} timed out`),d(new ne(Y.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const T=m.getStatus();if(re(sn,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b==null?void 0:b.error;if(R&&R.status&&R.message){const V=function(U){const Q=U.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN}(R.status);d(new ne(V,R.message))}else d(new ne(Y.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ne(Y.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{re(sn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);re(sn,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=dp(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=YA(),d=KA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");re(sn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let b=!1,R=!1;const V=new MV({Fo:U=>{R?re(sn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(b||(re(sn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),re(sn,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Mo:()=>T.close()}),F=(U,Q,ie)=>{U.listen(Q,K=>{try{ie(K)}catch(de){setTimeout(()=>{throw de},0)}})};return F(T,Ou.EventType.OPEN,()=>{R||(re(sn,`RPC '${e}' stream ${a} transport opened.`),V.Qo())}),F(T,Ou.EventType.CLOSE,()=>{R||(R=!0,re(sn,`RPC '${e}' stream ${a} transport closed`),V.Uo())}),F(T,Ou.EventType.ERROR,U=>{R||(R=!0,Ir(sn,`RPC '${e}' stream ${a} transport errored:`,U),V.Uo(new ne(Y.UNAVAILABLE,"The operation could not be completed")))}),F(T,Ou.EventType.MESSAGE,U=>{var Q;if(!R){const ie=U.data[0];ye(!!ie);const K=ie,de=(K==null?void 0:K.error)||((Q=K[0])===null||Q===void 0?void 0:Q.error);if(de){re(sn,`RPC '${e}' stream ${a} received error:`,de);const le=de.status;let Ee=function(I){const O=Vt[I];if(O!==void 0)return Qb(O)}(le),x=de.message;Ee===void 0&&(Ee=Y.INTERNAL,x="Unknown error status: "+le+" with message "+de.message),R=!0,V.Uo(new ne(Ee,x)),T.close()}else re(sn,`RPC '${e}' stream ${a} received:`,ie),V.Ko(ie)}}),F(d,QA.STAT_EVENT,U=>{U.stat===Hg.PROXY?re(sn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Hg.NOPROXY&&re(sn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{V.$o()},0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof window<"u"?window:null}function _f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(s){return new zx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="PersistentStream";class Mw{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new uy(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ne(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return re(N0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(re(N0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LV extends Mw{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Fx(this.serializer,e),r=function(l){if(!("targetChange"in l))return _e.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?_e.min():c.readTime?wt(c.readTime):_e.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=op(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=xf(m)?{documents:tw(l,m)}:{query:nw(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=$b(l,c.resumeToken);const p=sp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(_e.min())>0){d.readTime=Wo(l,c.snapshotVersion.toTimestamp());const p=sp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=Hx(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=op(this.serializer),t.removeTarget=e,this.I_(t)}}class kV extends Mw{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Gx(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=op(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rc(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{}class BV extends UV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ne(Y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,ap(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(Y.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,ap(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ne(Y.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class zV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bt(t),this.N_=!1):re("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="RemoteStore";class qV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{ys(this)&&(re(ba,"Restarting streams for network reachability change."),await async function(m){const p=fe(m);p.W_.add(4),await fl(p),p.j_.set("Unknown"),p.W_.delete(4),await Ac(p)}(this))})}),this.j_=new zV(r,a)}}async function Ac(s){if(ys(s))for(const e of s.G_)await e(!0)}async function fl(s){for(const e of s.G_)await e(!1)}function id(s,e){const t=fe(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),fy(t)?hy(t):ml(t).c_()&&cy(t,e))}function tl(s,e){const t=fe(s),r=ml(t);t.K_.delete(e),r.c_()&&Pw(t,e),t.K_.size===0&&(r.c_()?r.P_():ys(t)&&t.j_.set("Unknown"))}function cy(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ml(s).y_(e)}function Pw(s,e){s.H_.Ne(e),ml(s).w_(e)}function hy(s){s.H_=new Lx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),ml(s).start(),s.j_.B_()}function fy(s){return ys(s)&&!ml(s).u_()&&s.K_.size>0}function ys(s){return fe(s).W_.size===0}function Lw(s){s.H_=void 0}async function jV(s){s.j_.set("Online")}async function FV(s){s.K_.forEach((e,t)=>{cy(s,e)})}async function GV(s,e){Lw(s),fy(s)?(s.j_.q_(e),hy(s)):s.j_.set("Unknown")}async function HV(s,e,t){if(s.j_.set("Online"),e instanceof Yb&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,e)}catch(r){re(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zf(s,r)}else if(e instanceof yf?s.H_.We(e):e instanceof Kb?s.H_.Ze(e):s.H_.je(e),!t.isEqual(_e.min()))try{const r=await ww(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(vt.EMPTY_BYTE_STRING,_.snapshotVersion)),Pw(l,m);const T=new ii(_.target,m,p,_.sequenceNumber);cy(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){re(ba,"Failed to raise snapshot:",r),await zf(s,r)}}async function zf(s,e,t){if(!gs(e))throw e;s.W_.add(1),await fl(s),s.j_.set("Offline"),t||(t=()=>ww(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{re(ba,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await Ac(s)})}function kw(s,e){return e().catch(t=>zf(s,t,e))}async function dl(s){const e=fe(s),t=cs(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:ts;for(;QV(e);)try{const a=await DV(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,KV(e,a)}catch(a){await zf(e,a)}Uw(e)&&Bw(e)}function QV(s){return ys(s)&&s.U_.length<10}function KV(s,e){s.U_.push(e);const t=cs(s);t.c_()&&t.S_&&t.b_(e.mutations)}function Uw(s){return ys(s)&&!cs(s).u_()&&s.U_.length>0}function Bw(s){cs(s).start()}async function YV(s){cs(s).C_()}async function $V(s){const e=cs(s);for(const t of s.U_)e.b_(t.mutations)}async function XV(s,e,t){const r=s.U_.shift(),a=$p.from(r,e,t);await kw(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await dl(s)}async function ZV(s,e){e&&cs(s).S_&&await async function(r,a){if(function(c){return Hb(c)&&c!==Y.ABORTED}(a.code)){const l=r.U_.shift();cs(r).h_(),await kw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await dl(r)}}(s,e),Uw(s)&&Bw(s)}async function O0(s,e){const t=fe(s);t.asyncQueue.verifyOperationInProgress(),re(ba,"RemoteStore received new credentials");const r=ys(t);t.W_.add(3),await fl(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ac(t)}async function mp(s,e){const t=fe(s);e?(t.W_.delete(2),await Ac(t)):e||(t.W_.add(2),await fl(t),t.j_.set("Unknown"))}function ml(s){return s.J_||(s.J_=function(t,r,a){const l=fe(t);return l.M_(),new LV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:jV.bind(null,s),No:FV.bind(null,s),Lo:GV.bind(null,s),p_:HV.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),fy(s)?hy(s):s.j_.set("Unknown")):(await s.J_.stop(),Lw(s))})),s.J_}function cs(s){return s.Y_||(s.Y_=function(t,r,a){const l=fe(t);return l.M_(),new kV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:YV.bind(null,s),Lo:ZV.bind(null,s),D_:$V.bind(null,s),v_:XV.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await dl(s)):(await s.Y_.stop(),s.U_.length>0&&(re(ba,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new dy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gl(s,e){if(bt("AsyncQueue",`${e}: ${s}`),gs(s))return new ne(Y.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=Mu(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Lo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.Z_=new it(he.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):me():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class nl{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new nl(e,t,Lo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class JV{constructor(){this.queries=P0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=fe(t),l=a.queries;a.queries=P0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new ne(Y.ABORTED,"Firestore shutting down"))}}function P0(){return new mi(s=>Vb(s),pc)}async function my(s,e){const t=fe(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new WV,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=gl(c,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&py(t)}async function gy(s,e){const t=fe(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function e2(s,e){const t=fe(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&py(t)}function t2(s,e,t){const r=fe(s),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function py(s){s.ia.forEach(e=>{e.next()})}var gp,L0;(L0=gp||(gp={}))._a="default",L0.Cache="cache";class yy{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.serializer=e}ps(e){return Sr(this.serializer,e)}ys(e){return e.metadata.exists?ew(this.serializer,e.document,!1):at.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return wt(e)}}class r2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zw(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Me.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new k0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||Ie()).add(l);t.set(c,d)}}return t}async complete(){const e=await CV(this.localStore,new k0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await xV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function zw(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class Fw{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ie(),this.mutatedKeys=Ie(),this.ya=Ob(e),this.wa=new Lo(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new M0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const b=a.get(_),R=yc(this.query,T)?T:null,V=!!b&&this.mutatedKeys.has(b.key),F=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;b&&R?b.data.isEqual(R.data)?V!==F&&(r.track({type:3,doc:R}),U=!0):this.va(b,R)||(r.track({type:2,doc:R}),U=!0,(m&&this.ya(R,m)>0||p&&this.ya(R,p)<0)&&(d=!0)):!b&&R?(r.track({type:0,doc:R}),U=!0):b&&!R&&(r.track({type:1,doc:b}),U=!0,(m||p)&&(d=!0)),U&&(R?(c=c.add(R),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(R,V){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return F(R)-F(V)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new nl(this.query,e.wa,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new M0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ie(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new jw(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new qw(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ie();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return nl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const _s="SyncEngine";class i2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class s2{constructor(e){this.key=e,this.Ba=!1}}class a2{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new mi(d=>Vb(d),pc),this.qa=new Map,this.Qa=new Set,this.$a=new it(he.comparator),this.Ua=new Map,this.Ka=new ny,this.Wa={},this.Ga=new Map,this.za=Aa.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function o2(s,e,t=!0){const r=sd(s);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await Gw(r,e,t,!0),a}async function l2(s,e){const t=sd(s);await Gw(t,e,!0,!1)}async function Gw(s,e,t,r){const a=await Jo(s.localStore,gn(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await _y(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&id(s.remoteStore,a),d}async function _y(s,e,t,r,a){s.Ha=(T,b,R)=>async function(F,U,Q,ie){let K=U.view.ba(Q);K.ls&&(K=await kf(F.localStore,U.query,!1).then(({documents:x})=>U.view.ba(x,K)));const de=ie&&ie.targetChanges.get(U.targetId),le=ie&&ie.targetMismatches.get(U.targetId)!=null,Ee=U.view.applyChanges(K,F.isPrimaryClient,de,le);return pp(F,U.targetId,Ee.Ma),Ee.snapshot}(s,T,b,R);const l=await kf(s.localStore,e,!0),c=new Fw(e,l.gs),d=c.ba(l.documents),m=Ec.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);pp(s,t,p.Ma);const _=new i2(e,t,c);return s.ka.set(e,_),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function u2(s,e,t){const r=fe(s),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!pc(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await el(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&tl(r.remoteStore,a.targetId),rl(r,a.targetId)}).catch(ms)):(rl(r,a.targetId),await el(r.localStore,a.targetId,!0))}async function c2(s,e){const t=fe(s),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tl(t.remoteStore,r.targetId))}async function h2(s,e,t){const r=Ay(s);try{const a=await function(c,d){const m=fe(c),p=ft.now(),_=d.reduce((R,V)=>R.add(V.key),Ie());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=An(),F=Ie();return m.ds.getEntries(R,_).next(U=>{V=U,V.forEach((Q,ie)=>{ie.isValidDocument()||(F=F.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,V)).next(U=>{T=U;const Q=[];for(const ie of d){const K=Ox(ie,T.get(ie.key).overlayedDocument);K!=null&&Q.push(new gi(ie.key,K,Ab(K.value.mapValue),ht.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,Q,d)}).next(U=>{b=U;const Q=U.applyToLocalDocumentSet(T,F);return m.documentOverlayCache.saveOverlays(R,U.batchId,Q)})}).then(()=>({batchId:b.batchId,changes:Pb(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new it(we)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,t),await pi(r,a.changes),await dl(r.remoteStore)}catch(a){const l=gl(a,"Failed to persist write");t.reject(l)}}async function Hw(s,e){const t=fe(s);try{const r=await IV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(ye(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?ye(c.Ba):a.removedDocuments.size>0&&(ye(c.Ba),c.Ba=!1))}),await pi(t,r,e)}catch(r){await ms(r)}}function U0(s,e,t){const r=fe(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=fe(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const b of T.ta)b.sa(d)&&(p=!0)}),p&&py(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function f2(s,e,t){const r=fe(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new it(he.comparator);c=c.insert(l,at.newNoDocument(l,_e.min()));const d=Ie().add(l),m=new vc(_e.min(),new Map,new it(we),c,d);await Hw(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),Ty(r)}else await el(r.localStore,e,!1).then(()=>rl(r,e,t)).catch(ms)}async function d2(s,e){const t=fe(s),r=e.batch.batchId;try{const a=await RV(t.localStore,e);Ey(t,r,null),vy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pi(t,a)}catch(a){await ms(a)}}async function m2(s,e,t){const r=fe(s);try{const a=await function(c,d){const m=fe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(ye(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);Ey(r,e,t),vy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pi(r,a)}catch(a){await ms(a)}}async function g2(s,e){const t=fe(s);ys(t.remoteStore)||re(_s,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=fe(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===ts)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=gl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function vy(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function Ey(s,e,t){const r=fe(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function rl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.qa.get(e))s.ka.delete(r),t&&s.La.Ja(r,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(r=>{s.Ka.containsKey(r)||Qw(s,r)})}function Qw(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(tl(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),Ty(s))}function pp(s,e,t){for(const r of t)r instanceof qw?(s.Ka.addReference(r.key,e),p2(s,r)):r instanceof jw?(re(_s,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,e),s.Ka.containsKey(r.key)||Qw(s,r.key)):me()}function p2(s,e){const t=e.key,r=t.path.canonicalString();s.$a.get(t)||s.Qa.has(r)||(re(_s,"New document in limbo: "+t),s.Qa.add(r),Ty(s))}function Ty(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new he(Me.fromString(e)),r=s.za.next();s.Ua.set(r,new s2(t)),s.$a=s.$a.insert(t,r),id(s.remoteStore,new ii(gn(ul(t.path)),r,"TargetPurposeLimboResolution",En.ae))}}async function pi(s,e,t){const r=fe(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=ay.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=fe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>z.forEach(p,b=>z.forEach(b.Hi,R=>_.persistence.referenceDelegate.addReference(T,b.targetId,R)).next(()=>z.forEach(b.Ji,R=>_.persistence.referenceDelegate.removeReference(T,b.targetId,R)))))}catch(T){if(!gs(T))throw T;re(oy,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const R=_.Ts.get(b),V=R.snapshotVersion,F=R.withLastLimboFreeSnapshotVersion(V);_.Ts=_.Ts.insert(b,F)}}}(r.localStore,l))}async function y2(s,e){const t=fe(s);if(!t.currentUser.isEqual(e)){re(_s,"User change. New user:",e.toKey());const r=await bw(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ne(Y.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pi(t,r.Rs)}}function _2(s,e){const t=fe(s),r=t.Ua.get(e);if(r&&r.Ba)return Ie().add(r.key);{let a=Ie();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function v2(s,e){const t=fe(s),r=await kf(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&pp(t,e.targetId,a.Ma),a}async function E2(s,e){const t=fe(s);return Iw(t.localStore,e).then(r=>pi(t,r))}async function T2(s,e,t,r){const a=fe(s),l=await function(d,m){const p=fe(d),_=fe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):z.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await dl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Ey(a,e,r||null),vy(a,e),function(d,m){fe(fe(d).mutationQueue).qn(m)}(a.localStore,e)):me(),await pi(a,l)):re(_s,"Cannot apply mutation batch with id: "+e)}async function A2(s,e){const t=fe(s);if(sd(t),Ay(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await B0(t,r.toArray());t.ja=!0,await mp(t.remoteStore,!0);for(const l of a)id(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(rl(t,c),el(t.localStore,c,!0))),tl(t.remoteStore,c)}),await a,await B0(t,r),function(c){const d=fe(c);d.Ua.forEach((m,p)=>{tl(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new it(he.comparator)}(t),t.ja=!1,await mp(t.remoteStore,!1)}}async function B0(s,e,t){const r=fe(s),a=[],l=[];for(const c of e){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await Jo(r.localStore,gn(m[0]));for(const p of m){const _=r.ka.get(p),T=await v2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await Rw(r.localStore,c);d=await Jo(r.localStore,p),await _y(r,Kw(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function Kw(s){return xb(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function b2(s){return function(t){return fe(fe(t).persistence).zi()}(fe(s).localStore)}async function w2(s,e,t,r){const a=fe(s);if(a.ja)return void re(_s,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Iw(a.localStore,Nb(l[0])),d=vc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",vt.EMPTY_BYTE_STRING);await pi(a,c,d);break}case"rejected":await el(a.localStore,e,!0),rl(a,e,r);break;default:me()}}async function S2(s,e,t){const r=sd(s);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){re(_s,"Adding an already active target "+a);continue}const l=await Rw(r.localStore,a),c=await Jo(r.localStore,l);await _y(r,Kw(l),c.targetId,!1,c.resumeToken),id(r.remoteStore,c)}for(const a of t)r.qa.has(a)&&await el(r.localStore,a,!1).then(()=>{tl(r.remoteStore,a),rl(r,a)}).catch(ms)}}function sd(s){const e=fe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f2.bind(null,e),e.La.p_=e2.bind(null,e.eventManager),e.La.Ja=t2.bind(null,e.eventManager),e}function Ay(s){const e=fe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m2.bind(null,e),e}function R2(s,e,t){const r=fe(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(R,V){const F=fe(R),U=wt(V.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",Q=>F.Yr.getBundleMetadata(Q,V.id)).then(Q=>!!Q&&Q.createTime.compareTo(U)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(zw(m));const p=new r2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const b=await p.Aa(_);b&&d._updateProgress(b),_=await c.Ya()}const T=await p.complete();return await pi(l,T.ma,void 0),await function(R,V){const F=fe(R);return F.persistence.runTransaction("Save bundle","readwrite",U=>F.Yr.saveBundleMetadata(U,V))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return Ir(_s,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Aw(this.persistence,new Tw,e.initialUser,this.serializer)}Xa(e){return new ry(rd.ri,this.serializer)}Za(e){return new Nw}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class I2 extends ic{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ye(this.persistence.referenceDelegate instanceof Lf);const r=this.persistence.referenceDelegate.garbageCollector;return new gw(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new ry(r=>Lf.ri(r,t),this.serializer)}}class Yw extends ic{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Ay(this.ru.syncEngine),await dl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return Aw(this.persistence,new Tw,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new gw(r,e.asyncQueue,t)}nu(e,t){const r=new LC(t,this.persistence);return new PC(e.asyncQueue,r)}Xa(e){const t=sy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new iy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ow(),_f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new Nw}}class D2 extends Yw{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof kg&&(this.sharedClientState.syncEngine={uo:T2.bind(null,t),co:w2.bind(null,t),lo:S2.bind(null,t),zi:b2.bind(null,t),ao:E2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await A2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=Ow();if(!kg.D(t))throw new ne(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>U0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y2.bind(null,this.syncEngine),await mp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JV}()}createDatastore(e){const t=Tc(e.databaseInfo.databaseId),r=function(l){return new PV(l)}(e.databaseInfo);return function(l,c,d,m){return new BV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new qV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>U0(this.syncEngine,t,0),function(){return V0.D()?new V0:new VV}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new a2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=fe(a);re(ba,"RemoteStore shutting down."),l.W_.add(5),await fl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sc.provider={build:()=>new sc};function z0(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new en,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new n2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ne(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=fe(a),d={documents:l.map(T=>nc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,Me.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=jx(c.serializer,T);p.set(b.key.toString(),b)});const _=[];return l.forEach(T=>{const b=p.get(T.toString());ye(!!b),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=he.fromPath(r);this.mutations.push(new Kp(a,this.precondition(a)))}),await async function(r,a){const l=fe(r),c={writes:a.map(d=>rc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Me.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw me();t=_e.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ne(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_e.min())?ht.exists(!1):ht.updateTime(t):ht.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_e.min()))throw new ne(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ht.updateTime(t)}return ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new uy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new x2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!dc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Hb(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class N2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Qt.UNAUTHENTICATED,this.clientId=XA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{re(hs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(re(hs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=gl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bg(s,e){s.asyncQueue.verifyOperationInProgress(),re(hs,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await bw(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function q0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await by(s);re(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>O0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>O0(e.remoteStore,a)),s._onlineComponents=e}async function by(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){re(hs,"Using user provided OfflineComponentProvider");try{await Bg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Ir("Error using user provided cache. Falling back to memory cache: "+t),await Bg(s,new ic)}}else re(hs,"Using default OfflineComponentProvider"),await Bg(s,new I2(void 0));return s._offlineComponents}async function od(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(re(hs,"Using user provided OnlineComponentProvider"),await q0(s,s._uninitializedComponentsProvider._online)):(re(hs,"Using default OnlineComponentProvider"),await q0(s,new sc))),s._onlineComponents}function $w(s){return by(s).then(e=>e.persistence)}function wy(s){return by(s).then(e=>e.localStore)}function Xw(s){return od(s).then(e=>e.remoteStore)}function Sy(s){return od(s).then(e=>e.syncEngine)}function O2(s){return od(s).then(e=>e.datastore)}async function il(s){const e=await od(s),t=e.eventManager;return t.onListen=o2.bind(null,e.syncEngine),t.onUnlisten=u2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=c2.bind(null,e.syncEngine),t}function M2(s){return s.asyncQueue.enqueue(async()=>{const e=await $w(s),t=await Xw(s);return e.setNetworkEnabled(!0),function(a){const l=fe(a);return l.W_.delete(0),Ac(l)}(t)})}function P2(s){return s.asyncQueue.enqueue(async()=>{const e=await $w(s),t=await Xw(s);return e.setNetworkEnabled(!1),async function(a){const l=fe(a);l.W_.add(0),await fl(l),l.j_.set("Offline")}(t)})}function L2(s,e){const t=new en;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=fe(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ne(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=gl(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await wy(s),e,t)),t.promise}function Zw(s,e,t={}){const r=new en;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new ad({next:b=>{_.su(),c.enqueueAndForget(()=>gy(l,T));const R=b.docs.has(d);!R&&b.fromCache?p.reject(new ne(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&m&&m.source==="server"?p.reject(new ne(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new yy(ul(d.path),_,{includeMetadataChanges:!0,Ta:!0});return my(l,T)}(await il(s),s.asyncQueue,e,t,r)),r.promise}function k2(s,e){const t=new en;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await kf(a,l,!0),m=new Fw(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=gl(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await wy(s),e,t)),t.promise}function Ww(s,e,t={}){const r=new en;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new ad({next:b=>{_.su(),c.enqueueAndForget(()=>gy(l,T)),b.fromCache&&m.source==="server"?p.reject(new ne(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new yy(d,_,{includeMetadataChanges:!0,Ta:!0});return my(l,T)}(await il(s),s.asyncQueue,e,t,r)),r.promise}function U2(s,e){const t=new ad(e);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.add(l),l.next()}(await il(s),t)),()=>{t.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){fe(a).ia.delete(l)}(await il(s),t))}}function B2(s,e,t,r){const a=function(c,d){let m;return m=typeof c=="string"?Mp().encode(c):c,function(_,T){return new C2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return z0(_,T);if(_ instanceof ArrayBuffer)return z0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Tc(e));s.asyncQueue.enqueueAndForget(async()=>{R2(await Sy(s),a,r)})}function z2(s,e){return s.asyncQueue.enqueue(async()=>function(r,a){const l=fe(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await wy(s),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(s,e,t){if(!t)throw new ne(Y.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function eS(s,e,t,r){if(e===!0&&r===!0)throw new ne(Y.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function F0(s){if(!he.isDocumentKey(s))throw new ne(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function G0(s){if(he.isDocumentKey(s))throw new ne(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ld(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":me()}function Fe(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ne(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ld(s);throw new ne(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function tS(s,e){if(e<=0)throw new ne(Y.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firestore.googleapis.com",H0=!0;class Q0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nS,this.ssl=H0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:H0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oV)throw new ne(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ne(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ne(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ne(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wC;switch(r.type){case"firstParty":return new DC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=j0.get(t);r&&(re("ComponentProvider","Removing Datastore"),j0.delete(t),r.terminate())}(this),Promise.resolve()}}function q2(s,e,t,r={}){var a;const l=(s=Fe(s,bc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==nS&&l.host!==d&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!ko(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Qt.MOCK_USER;else{p=G1(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ne(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Qt(T)}s._authCredentials=new SC(new $A(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pn=class rS{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rS(this.firestore,e,this._query)}},gt=class iS{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new iS(this.firestore,e,this._key)}},ns=class sS extends pn{constructor(e,t,r){super(e,t,ul(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new he(e))}withConverter(e){return new sS(this.firestore,e,this._path)}};function aS(s,e,...t){if(s=Nt(s),Ry("collection","path",e),s instanceof bc){const r=Me.fromString(e,...t);return G0(r),new ns(s,null,r)}{if(!(s instanceof gt||s instanceof ns))throw new ne(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Me.fromString(e,...t));return G0(r),new ns(s.firestore,null,r)}}function j2(s,e){if(s=Fe(s,bc),Ry("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pn(s,null,function(r){return new di(Me.emptyPath(),r)}(e))}function qf(s,e,...t){if(s=Nt(s),arguments.length===1&&(e=XA.newId()),Ry("doc","path",e),s instanceof bc){const r=Me.fromString(e,...t);return F0(r),new gt(s,null,new he(r))}{if(!(s instanceof gt||s instanceof ns))throw new ne(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Me.fromString(e,...t));return F0(r),new gt(s.firestore,s instanceof ns?s.converter:null,new he(r))}}function oS(s,e){return s=Nt(s),e=Nt(e),(s instanceof gt||s instanceof ns)&&(e instanceof gt||e instanceof ns)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function lS(s,e){return s=Nt(s),e=Nt(e),s instanceof pn&&e instanceof pn&&s.firestore===e.firestore&&pc(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="AsyncQueue";class Y0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new uy(this,"async_queue_retry"),this.Su=()=>{const r=_f();r&&re(K0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=_f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=_f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new en;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!gs(e))throw e;re(K0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw bt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=dy.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&me()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function yp(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class F2{constructor(){this._progressObserver={},this._taskCompletionResolver=new en,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=-1;let St=class extends bc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Y0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y0(e),this._firestoreClient=void 0,await e}}};function ln(s){if(s._terminated)throw new ne(Y.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||uS(s),s._firestoreClient}function uS(s){var e,t,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new hx(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Jw(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new N2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function H2(s,e){Ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return cS(s,sc.provider,{build:r=>new Yw(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Q2(s){Ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();cS(s,sc.provider,{build:t=>new D2(t,e.cacheSizeBytes)})}function cS(s,e,t){if((s=Fe(s,St))._firestoreClient||s._terminated)throw new ne(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ne(Y.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},uS(s)}function K2(s){if(s._initialized&&!s._terminated)throw new ne(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new en;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wr.D())return Promise.resolve();const a=r+Ew;await wr.delete(a)}(sy(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function Y2(s){return function(t){const r=new en;return t.asyncQueue.enqueueAndForget(async()=>g2(await Sy(t),r)),r.promise}(ln(s=Fe(s,St)))}function $2(s){return M2(ln(s=Fe(s,St)))}function X2(s){return P2(ln(s=Fe(s,St)))}function Z2(s,e){const t=ln(s=Fe(s,St)),r=new F2;return B2(t,s._databaseId,e,r),r}function W2(s,e){return z2(ln(s=Fe(s,St)),e).then(t=>t?new pn(s,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(vt.fromBase64String(e))}catch(t){throw new ne(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cr(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ne(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ne(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ne(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=/^__.*__$/;class eN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}class hS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class cd{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new cd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return jf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(fS(this.Lu)&&J2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class tN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Tc(e)}ju(e,t,r,a=!1){return new cd({Lu:e,methodName:t,zu:r,path:ct.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Da(s){const e=s._freezeSettings(),t=Tc(s._databaseId);return new tN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function hd(s,e,t,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,e,t,a);My("Data must be an object, but it was:",c,r);const d=gS(r,c);let m,p;if(l.merge)m=new Tn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=_p(e,T,t);if(!c.contains(b))throw new ne(Y.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);yS(_,b)||_.push(b)}m=new Tn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new eN(new Jt(d),m,p)}class wc extends Ia{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function dS(s,e,t){return new cd({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dy extends Ia{_toFieldTransform(e){return new _c(e.path,new Xo)}isEqual(e){return e instanceof Dy}}class Cy extends Ia{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=dS(this,e,!0),r=this.Hu.map(l=>Ca(l,t)),a=new _a(r);return new _c(e.path,a)}isEqual(e){return e instanceof Cy&&ko(this.Hu,e.Hu)}}class xy extends Ia{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=dS(this,e,!0),r=this.Hu.map(l=>Ca(l,t)),a=new va(r);return new _c(e.path,a)}isEqual(e){return e instanceof xy&&ko(this.Hu,e.Hu)}}class Vy extends Ia{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Zo(e.serializer,Ub(e.serializer,this.Ju));return new _c(e.path,t)}isEqual(e){return e instanceof Vy&&this.Ju===e.Ju}}function Ny(s,e,t,r){const a=s.ju(1,e,t);My("Data must be an object, but it was:",a,r);const l=[],c=Jt.empty();ps(r,(m,p)=>{const _=Py(e,m,t);p=Nt(p);const T=a.Uu(_);if(p instanceof wc)l.push(_);else{const b=Ca(p,T);b!=null&&(l.push(_),c.set(_,b))}});const d=new Tn(l);return new hS(c,d,a.fieldTransforms)}function Oy(s,e,t,r,a,l){const c=s.ju(1,e,t),d=[_p(e,r,t)],m=[a];if(l.length%2!=0)throw new ne(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(_p(e,l[b])),m.push(l[b+1]);const p=[],_=Jt.empty();for(let b=d.length-1;b>=0;--b)if(!yS(p,d[b])){const R=d[b];let V=m[b];V=Nt(V);const F=c.Uu(R);if(V instanceof wc)p.push(R);else{const U=Ca(V,F);U!=null&&(p.push(R),_.set(R,U))}}const T=new Tn(p);return new hS(_,T,c.fieldTransforms)}function mS(s,e,t,r=!1){return Ca(t,s.ju(r?4:3,e))}function Ca(s,e){if(pS(s=Nt(s)))return My("Unsupported field value:",e,s),gS(s,e);if(s instanceof Ia)return function(r,a){if(!fS(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Ca(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,a){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ub(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ft.fromDate(r);return{timestampValue:Wo(a.serializer,l)}}if(r instanceof ft){const l=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(a.serializer,l)}}if(r instanceof ud)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:$b(a.serializer,r._byteString)};if(r instanceof gt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Iy)return function(c,d){return{mapValue:{fields:{[qp]:{stringValue:jp},[Ko]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Qp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${ld(r)}`)}(s,e)}function gS(s,e){const t={};return db(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(s,(r,a)=>{const l=Ca(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function pS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ft||s instanceof ud||s instanceof Cr||s instanceof gt||s instanceof Ia||s instanceof Iy)}function My(s,e,t){if(!pS(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=ld(t);throw r==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+r)}}function _p(s,e,t){if((e=Nt(e))instanceof fs)return e._internalPath;if(typeof e=="string")return Py(s,e);throw jf("Field path arguments must be of type string or ",s,!1,void 0,t)}const nN=new RegExp("[~\\*/\\[\\]]");function Py(s,e,t){if(e.search(nN)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new fs(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function jf(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ne(Y.INVALID_ARGUMENT,d+s+m)}function yS(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rN extends ac{data(){return super.data()}}function fd(s,e){return typeof e=="string"?Py(s,e):e instanceof fs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ne(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ly{}class Sc extends Ly{}function $i(s,e,...t){let r=[];e instanceof Ly&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof ky).length,d=l.filter(m=>m instanceof dd).length;if(c>1||c>0&&d>0)throw new ne(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class dd extends Sc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new dd(e,t,r)}_apply(e){const t=this._parse(e);return ES(e._query,t),new pn(e.firestore,e.converter,ip(e._query,t))}_parse(e){const t=Da(e.firestore);return function(l,c,d,m,p,_,T){let b;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){X0(T,_);const V=[];for(const F of T)V.push($0(m,l,F));b={arrayValue:{values:V}}}else b=$0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||X0(T,_),b=mS(d,c,T,_==="in"||_==="not-in");return Pe.create(p,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function iN(s,e,t){const r=e,a=fd("where",s);return dd._create(a,r,t)}class ky extends Ly{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ky(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)ES(c,m),c=ip(c,m)}(e._query,t),new pn(e.firestore,e.converter,ip(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uy extends Sc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ne(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ne(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tc(l,c)}(e._query,this._field,this._direction);return new pn(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new di(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function sN(s,e="asc"){const t=e,r=fd("orderBy",s);return Uy._create(r,t)}class md extends Sc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new md(e,t,r)}_apply(e){return new pn(e.firestore,e.converter,Nf(e._query,this._limit,this._limitType))}}function aN(s){return tS("limit",s),md._create("limit",s,"F")}function oN(s){return tS("limitToLast",s),md._create("limitToLast",s,"L")}class gd extends Sc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gd(e,t,r)}_apply(e){const t=vS(e,this.type,this._docOrFields,this._inclusive);return new pn(e.firestore,e.converter,function(a,l){return new di(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function lN(...s){return gd._create("startAt",s,!0)}function uN(...s){return gd._create("startAfter",s,!1)}class pd extends Sc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pd(e,t,r)}_apply(e){const t=vS(e,this.type,this._docOrFields,this._inclusive);return new pn(e.firestore,e.converter,function(a,l){return new di(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function cN(...s){return pd._create("endBefore",s,!1)}function hN(...s){return pd._create("endAt",s,!0)}function vS(s,e,t,r){if(t[0]=Nt(t[0]),t[0]instanceof ac)return function(l,c,d,m,p){if(!m)throw new ne(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Po(l))if(T.field.isKeyField())_.push(pa(c,m.key));else{const b=m.data.field(T.field);if(Xf(b))throw new ne(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const R=T.field.canonicalString();throw new ne(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(b)}return new us(_,p)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=Da(s.firestore);return function(c,d,m,p,_,T){const b=c.explicitOrderBy;if(_.length>b.length)throw new ne(Y.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<_.length;V++){const F=_[V];if(b[V].field.isKeyField()){if(typeof F!="string")throw new ne(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!Gp(c)&&F.indexOf("/")!==-1)throw new ne(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const U=c.path.child(Me.fromString(F));if(!he.isDocumentKey(U))throw new ne(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const Q=new he(U);R.push(pa(d,Q))}else{const U=mS(m,p,F);R.push(U)}}return new us(R,T)}(s._query,s.firestore._databaseId,a,e,t,r)}}function $0(s,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new ne(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gp(e)&&t.indexOf("/")!==-1)throw new ne(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Me.fromString(t));if(!he.isDocumentKey(r))throw new ne(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pa(s,new he(r))}if(t instanceof gt)return pa(s,t._key);throw new ne(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(t)}.`)}function X0(s,e){if(!Array.isArray(s)||s.length===0)throw new ne(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ES(s,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ne(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class By{convertValue(e,t="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ps(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Ko].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>ut(c.doubleValue));return new Iy(l)}convertGeoPoint(e){return new ud(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=ui(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Me.fromString(e);ye(aw(r));const a=new as(r.get(1),r.get(3)),l=new he(r.popFirst(5));return a.isEqual(t)||bt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class fN extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let hi=class extends ac{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Fu=class extends hi{data(e={}){return super.data(e)}},ds=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new fa(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fu(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ne(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Fu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new fa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Fu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new fa(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:dN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function dN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}function TS(s,e){return s instanceof hi&&e instanceof hi?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ds&&e instanceof ds&&s._firestore===e._firestore&&lS(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(s){s=Fe(s,gt);const e=Fe(s.firestore,St);return Zw(ln(e),s._key).then(t=>zy(e,s,t))}class xa extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function gN(s){s=Fe(s,gt);const e=Fe(s.firestore,St),t=ln(e),r=new xa(e);return L2(t,s._key).then(a=>new hi(e,r,s._key,a,new fa(a!==null&&a.hasLocalMutations,!0),s.converter))}function pN(s){s=Fe(s,gt);const e=Fe(s.firestore,St);return Zw(ln(e),s._key,{source:"server"}).then(t=>zy(e,s,t))}function yN(s){s=Fe(s,pn);const e=Fe(s.firestore,St),t=ln(e),r=new xa(e);return _S(s._query),Ww(t,s._query).then(a=>new ds(e,r,s,a))}function _N(s){s=Fe(s,pn);const e=Fe(s.firestore,St),t=ln(e),r=new xa(e);return k2(t,s._query).then(a=>new ds(e,r,s,a))}function vN(s){s=Fe(s,pn);const e=Fe(s.firestore,St),t=ln(e),r=new xa(e);return Ww(t,s._query,{source:"server"}).then(a=>new ds(e,r,s,a))}function Z0(s,e,t){s=Fe(s,gt);const r=Fe(s.firestore,St),a=yd(s.converter,e,t);return Rc(r,[hd(Da(r),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,ht.none())])}function W0(s,e,t,...r){s=Fe(s,gt);const a=Fe(s.firestore,St),l=Da(a);let c;return c=typeof(e=Nt(e))=="string"||e instanceof fs?Oy(l,"updateDoc",s._key,e,t,r):Ny(l,"updateDoc",s._key,e),Rc(a,[c.toMutation(s._key,ht.exists(!0))])}function EN(s){return Rc(Fe(s.firestore,St),[new hl(s._key,ht.none())])}function TN(s,e){const t=Fe(s.firestore,St),r=qf(s),a=yd(s.converter,e);return Rc(t,[hd(Da(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}function AS(s,...e){var t,r,a;s=Nt(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||yp(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(yp(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof gt)p=Fe(s.firestore,St),_=ul(s._key.path),m={next:T=>{e[c]&&e[c](zy(p,s,T))},error:e[c+1],complete:e[c+2]};else{const T=Fe(s,pn);p=Fe(T.firestore,St),_=T._query;const b=new xa(p);m={next:R=>{e[c]&&e[c](new ds(p,b,T,R))},error:e[c+1],complete:e[c+2]},_S(s._query)}return function(b,R,V,F){const U=new ad(F),Q=new yy(R,U,V);return b.asyncQueue.enqueueAndForget(async()=>my(await il(b),Q)),()=>{U.su(),b.asyncQueue.enqueueAndForget(async()=>gy(await il(b),Q))}}(ln(p),_,d,m)}function AN(s,e){return U2(ln(s=Fe(s,St)),yp(e)?e:{next:e})}function Rc(s,e){return function(r,a){const l=new en;return r.asyncQueue.enqueueAndForget(async()=>h2(await Sy(r),a,l)),l.promise}(ln(s),e)}function zy(s,e,t){const r=t.docs.get(e._key),a=new xa(s);return new hi(s,a,e._key,r,new fa(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Da(e)}set(e,t,r){this._verifyNotCommitted();const a=Wi(e,this._firestore),l=yd(a.converter,t,r),c=hd(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,ht.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Wi(e,this._firestore);let c;return c=typeof(t=Nt(t))=="string"||t instanceof fs?Oy(this._dataReader,"WriteBatch.update",l._key,t,r,a):Ny(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wi(e,this._firestore);return this._mutations=this._mutations.concat(new hl(t._key,ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Wi(s,e){if((s=Nt(s)).firestore!==e)throw new ne(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Da(e)}get(e){const t=Wi(e,this._firestore),r=new fN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return me();const l=a[0];if(l.isFoundDocument())return new ac(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new ac(this._firestore,r,t._key,null,t.converter);throw me()})}set(e,t,r){const a=Wi(e,this._firestore),l=yd(a.converter,t,r),c=hd(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=Wi(e,this._firestore);let c;return c=typeof(t=Nt(t))=="string"||t instanceof fs?Oy(this._dataReader,"Transaction.update",l._key,t,r,a):Ny(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Wi(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RN=class extends SN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wi(e,this._firestore),r=new xa(this._firestore);return super.get(e).then(a=>new hi(this._firestore,r,t._key,a._document,new fa(!1,!1),t.converter))}};function IN(s,e,t){s=Fe(s,St);const r=Object.assign(Object.assign({},bN),t);return function(l){if(l.maxAttempts<1)throw new ne(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new en;return l.asyncQueue.enqueueAndForget(async()=>{const p=await O2(l);new V2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(ln(s),a=>e(new RN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return new wc("deleteField")}function CN(){return new Dy("serverTimestamp")}function xN(...s){return new Cy("arrayUnion",s)}function VN(...s){return new xy("arrayRemove",s)}function NN(s){return new Vy("increment",s)}(function(e,t=!0){(function(a){ll=a})(xp),zo(new ga("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new St(new RC(r.getProvider("auth-internal")),new CC(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ne(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new as(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),ai(CT,xT,e),ai(CT,xT,"esm2017")})();const ON="@firebase/firestore-compat",MN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ne("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(){if(typeof Uint8Array>"u")throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function eA(){if(!ux())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class oc{constructor(e){this._delegate=e}static fromBase64String(e){return eA(),new oc(Cr.fromBase64String(e))}static fromUint8Array(e){return J0(),new oc(Cr.fromUint8Array(e))}toBase64(){return eA(),this._delegate.toBase64()}toUint8Array(){return J0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(s){return PN(s,["next","error","complete"])}function PN(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{enableIndexedDbPersistence(e,t){return H2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Q2(e._delegate)}clearIndexedDbPersistence(e){return K2(e._delegate)}}class bS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof as||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){q2(this._delegate,e,t,r)}enableNetwork(){return $2(this._delegate)}disableNetwork(){return X2(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Y2(this._delegate)}onSnapshotsInSync(e){return AN(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sl(this,aS(this._delegate,e))}catch(t){throw mn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kn(this,qf(this._delegate,e))}catch(t){throw mn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dn(this,j2(this._delegate,e))}catch(t){throw mn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return IN(this._delegate,t=>e(new wS(this,t)))}batch(){return ln(this._delegate),new SS(new wN(this._delegate,e=>Rc(this._delegate,e)))}loadBundle(e){return Z2(this._delegate,e)}namedQuery(e){return W2(this._delegate,e).then(t=>t?new dn(this,t):null)}}class _d extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(new Cr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Kn.forKey(t,this.firestore,null)}}function kN(s){AC(s)}class wS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _d(e)}get(e){const t=da(e);return this._delegate.get(t).then(r=>new lc(this._firestore,new hi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=da(e);return r?(qy("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=da(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=da(e);return this._delegate.delete(t),this}}class SS{constructor(e){this._delegate=e}set(e,t,r){const a=da(e);return r?(qy("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=da(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=da(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wa{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Fu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wa.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new wa(e,new _d(e),t),a.set(t,l)),l}}wa.INSTANCES=new WeakMap;class Kn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _d(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kn(t,new gt(t._delegate,r,new he(e)))}static forKey(e,t,r){return new Kn(t,new gt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sl(this.firestore,aS(this._delegate,e))}catch(t){throw mn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Nt(e),e instanceof gt?oS(this._delegate,e):!1}set(e,t){t=qy("DocumentReference.set",t);try{return t?Z0(this._delegate,e,t):Z0(this._delegate,e)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?W0(this._delegate,e):W0(this._delegate,e,t,...r)}catch(a){throw mn(a,"updateDoc()","DocumentReference.update()")}}delete(){return EN(this._delegate)}onSnapshot(...e){const t=RS(e),r=IS(e,a=>new lc(this.firestore,new hi(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return AS(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=gN(this._delegate):(e==null?void 0:e.source)==="server"?t=pN(this._delegate):t=mN(this._delegate),t.then(r=>new lc(this.firestore,new hi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kn(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mn(s,e,t){return s.message=s.message.replace(e,t),s}function RS(s){for(const e of s)if(typeof e=="object"&&!vp(e))return e;return{}}function IS(s,e){var t,r;let a;return vp(s[0])?a=s[0]:vp(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class lc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TS(this._delegate,e._delegate)}}class uc extends lc{data(e){const t=this._delegate.data(e);return this._delegate._converter||bC(t!==void 0),t}}class dn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _d(e)}where(e,t,r){try{return new dn(this.firestore,$i(this._delegate,iN(e,t,r)))}catch(a){throw mn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new dn(this.firestore,$i(this._delegate,sN(e,t)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dn(this.firestore,$i(this._delegate,aN(e)))}catch(t){throw mn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new dn(this.firestore,$i(this._delegate,oN(e)))}catch(t){throw mn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new dn(this.firestore,$i(this._delegate,lN(...e)))}catch(t){throw mn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new dn(this.firestore,$i(this._delegate,uN(...e)))}catch(t){throw mn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new dn(this.firestore,$i(this._delegate,cN(...e)))}catch(t){throw mn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new dn(this.firestore,$i(this._delegate,hN(...e)))}catch(t){throw mn(t,"endAt()","Query.endAt()")}}isEqual(e){return lS(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=_N(this._delegate):(e==null?void 0:e.source)==="server"?t=vN(this._delegate):t=yN(this._delegate),t.then(r=>new Ep(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RS(e),r=IS(e,a=>new Ep(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return AS(this._delegate,t,r)}withConverter(e){return new dn(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class UN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ep{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new uc(this._firestore,r))})}isEqual(e){return TS(this._delegate,e._delegate)}}class sl extends dn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kn(this.firestore,e):null}doc(e){try{return e===void 0?new Kn(this.firestore,qf(this._delegate)):new Kn(this.firestore,qf(this._delegate,e))}catch(t){throw mn(t,"doc()","CollectionReference.doc()")}}add(e){return TN(this._delegate,e).then(t=>new Kn(this.firestore,t))}isEqual(e){return oS(this._delegate,e._delegate)}withConverter(e){return new sl(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function da(s){return Fe(s,gt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(...e){this._delegate=new fs(...e)}static documentId(){return new jy(ct.keyField().canonicalString())}isEqual(e){return e=Nt(e),e instanceof fs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{static serverTimestamp(){const e=CN();return e._methodName="FieldValue.serverTimestamp",new ca(e)}static delete(){const e=DN();return e._methodName="FieldValue.delete",new ca(e)}static arrayUnion(...e){const t=xN(...e);return t._methodName="FieldValue.arrayUnion",new ca(t)}static arrayRemove(...e){const t=VN(...e);return t._methodName="FieldValue.arrayRemove",new ca(t)}static increment(e){const t=NN(e);return t._methodName="FieldValue.increment",new ca(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={Firestore:bS,GeoPoint:ud,Timestamp:ft,Blob:oc,Transaction:wS,WriteBatch:SS,DocumentReference:Kn,DocumentSnapshot:lc,Query:dn,QueryDocumentSnapshot:uc,QuerySnapshot:Ep,CollectionReference:sl,FieldPath:jy,FieldValue:ca,setLogLevel:kN,CACHE_SIZE_UNLIMITED:G2};function zN(s,e){s.INTERNAL.registerComponent(new ga("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},BN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(s){zN(s,(e,t)=>new bS(e,t,new LN)),s.registerVersion(ON,MN)}qN(ri);const jN={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let tA;function FN(){const[s,e]=X.useState(!1);return X.useEffect(()=>{ri.apps.length||(ri.initializeApp(jN),tA=ri.firestore()),e(!0)},[]),{db:tA,initialized:s}}const nA="/clicker/assets/click-pWWDwmzr.png";function Fy({db:s,userId:e,initialized:t}){const[r,a]=X.useState(!0),[l,c]=X.useState(null),[d,m]=X.useState(null),[p,_]=X.useState(null),[T,b]=X.useState(""),[R,V]=X.useState(!1),[F,U]=X.useState(!1),Q=e&&s&&t,ie=`mainStats_${e}`,K=x=>s.collection("users").doc(String(e)).collection("stats").doc(x),de=()=>s.collection("users").doc(String(e));return X.useEffect(()=>{if(!Q)return;(async()=>{try{const S=localStorage.getItem(ie);if(S){const{count:ke,totalCount:N,multiplier:te,username:ce}=JSON.parse(S);ke!==void 0&&c(ke),N!==void 0&&m(N),te!==void 0&&_(te),ce!==void 0&&b(ce)}const[I,O,P,k,C]=await Promise.all([K("count").get(),K("multiplier").get(),K("totalCount").get(),K("username").get(),de().get()]),Rt=I.exists?I.data().value:0,st=O.exists?O.data().value:1,Z=P.exists?P.data().value:0,ue=k.exists?k.data().value:"";c(Rt),_(st),m(Z),ue?b(ue):V(!0),localStorage.setItem(ie,JSON.stringify({count:Rt,totalCount:Z,multiplier:st,username:ue}));const pe=ri.firestore.FieldValue.serverTimestamp();C.exists||await de().set({createdAt:pe},{merge:!0}),I.exists||await K("count").set({value:0,createdAt:pe,updatedAt:pe}),O.exists||await K("multiplier").set({value:1,createdAt:pe,updatedAt:pe}),P.exists||await K("totalCount").set({value:0,createdAt:pe,updatedAt:pe})}catch(S){console.error("[STATS] Завантаження помилка:",S),c(0),_(1),m(0)}finally{a(!1)}})()},[Q]),X.useEffect(()=>{if(!F||!Q)return;const x=setTimeout(()=>{const S=ri.firestore.FieldValue.serverTimestamp();Promise.all([K("count").set({value:l,updatedAt:S},{merge:!0}),K("totalCount").set({value:d,updatedAt:S},{merge:!0})]).then(()=>U(!1)).catch(I=>console.error("[STATS] Помилка збереження:",I)),localStorage.setItem(ie,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T}))},300);return()=>clearTimeout(x)},[F,l,d,Q]),X.useEffect(()=>{const x=()=>{if(Q&&l!==null){const S=ri.firestore.FieldValue.serverTimestamp();K("count").set({value:l,updatedAt:S},{merge:!0}),K("totalCount").set({value:d,updatedAt:S},{merge:!0}),localStorage.setItem(ie,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T}))}};return window.addEventListener("beforeunload",x),()=>window.removeEventListener("beforeunload",x)},[Q,l,d]),{loading:r,count:l,totalCount:d,multiplier:p,username:T,showUsernameForm:R,setShowUsernameForm:V,increment:()=>{c(x=>x+p),m(x=>x+p),U(!0)},saveUsername:async x=>{if(x.trim())try{const S=ri.firestore.FieldValue.serverTimestamp();await K("username").set({value:x,updatedAt:S,createdAt:S}),b(x),V(!1),localStorage.setItem(ie,JSON.stringify({count:l,totalCount:d,multiplier:p,username:x}))}catch(S){console.error("[USERNAME] Помилка збереження:",S)}},setUsername:b,setCount:c,setTotalCount:m}}function GN({userId:s,db:e,initialized:t}){const[r,a]=X.useState(""),[l,c]=X.useState(!1),{count:d,multiplier:m,username:p,showUsernameForm:_,increment:T,saveUsername:b}=Fy({db:e,userId:s,initialized:t});return X.useEffect(()=>{const R=new Image;R.src=nA,R.onload=()=>c(!0)},[]),ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"header",children:[ae.jsx("div",{className:"header-left"}),ae.jsx("div",{className:"header-center",children:p&&l?p:""}),ae.jsx("div",{className:"header-right",children:ae.jsx(Tr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),ae.jsxs("div",{className:"wrapper",children:[_&&ae.jsx("div",{className:"modal-backdrop",children:ae.jsxs("div",{className:"modal",children:[ae.jsx("h2",{children:"Введіть свій нікнейм"}),ae.jsx("input",{type:"text",value:r,onChange:R=>a(R.target.value),className:"username-input",placeholder:"Ваш нікнейм"}),ae.jsx("button",{className:"menu-button",onClick:()=>b(r),children:"Зберегти"})]})}),ae.jsxs("div",{className:"clicker-container",children:[ae.jsxs("p",{className:"clicker-text",children:["ID: ",ae.jsx("strong",{children:s})]}),ae.jsxs("p",{className:"clicker-text",children:["Монети: ",ae.jsx("strong",{children:d??0})]}),ae.jsxs("p",{className:"clicker-text",children:["Множник: ",ae.jsxs("strong",{children:["x",m??1]})]}),l&&ae.jsx("img",{src:nA,alt:"Click",className:"clicker-img",onClick:T,onContextMenu:R=>R.preventDefault(),onTouchStart:R=>R.preventDefault()})]}),ae.jsxs("div",{className:"button-group fade-in",children:[ae.jsx(Tr,{to:"/upgrade",children:ae.jsx("button",{className:"menu-button",children:"🛠 Покращення"})}),ae.jsx(Tr,{to:"/",children:ae.jsx("button",{className:"menu-button",children:"🛒 Магазин"})}),ae.jsx(Tr,{to:"/leaderboard",children:ae.jsx("button",{className:"menu-button",children:"🏆 Топ"})})]})]})]})}function HN({userId:s,db:e,initialized:t}){const{count:r,multiplier:a,username:l,setCount:c,setMultiplier:d}=Fy({db:e,userId:s,initialized:t}),m=T=>Math.floor(1e3*Math.pow(T,1.5)),p=m(a||1),_=async()=>{const T=m(a);if(r>=T){const b=r-T,R=a+1;try{await Promise.all([e.collection("users").doc(String(s)).collection("stats").doc("count").set({value:b,updatedAt:new Date},{merge:!0}),e.collection("users").doc(String(s)).collection("stats").doc("multiplier").set({value:R,updatedAt:new Date},{merge:!0})]),c(b),d(R)}catch(V){console.error("Помилка при покупці покращення:",V)}}else alert("Недостатньо монет!")};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"header",children:[ae.jsx("div",{className:"header-left",children:ae.jsx(Tr,{to:"/",className:"header-button",children:"←"})}),ae.jsx("div",{className:"header-center",children:l||""}),ae.jsx("div",{className:"header-right",children:ae.jsx(Tr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),ae.jsxs("div",{className:"wrapper",children:[ae.jsx("h2",{className:"clicker-text",children:"🛠 Покращення"}),ae.jsxs("p",{className:"clicker-text",children:["Монети: ",ae.jsx("strong",{children:r??"..."})]}),ae.jsxs("p",{className:"clicker-text",children:["Множник кліку: ",ae.jsx("strong",{children:a?`x${a}`:"..."})]}),ae.jsxs("button",{onClick:_,className:"menu-button",disabled:r<p,children:["Купити x",(a||1)+1," за ",p," монет"]})]})]})}function QN({userId:s,db:e,initialized:t}){const[r,a]=X.useState([]),[l,c]=X.useState(!0),d=e&&t,{username:m,totalCount:p,multiplier:_}=Fy({db:e,userId:s,initialized:t});X.useEffect(()=>{if(!d)return;(async()=>{try{const V=await e.collection("users").get(),F=[];for(const U of V.docs){const Q=e.collection("users").doc(U.id).collection("stats"),ie=await Q.get(),K={};ie.forEach(le=>{K[le.id]=le.data().value});const de=[];if(K.username===void 0){const le=`Гравець-${U.id.slice(0,4)}`;de.push(Q.doc("username").set({value:le})),K.username=le}K.totalCount===void 0&&(de.push(Q.doc("totalCount").set({value:0})),K.totalCount=0),K.multiplier===void 0&&(de.push(Q.doc("multiplier").set({value:1})),K.multiplier=1),de.length>0&&await Promise.all(de),F.push({userId:U.id,username:K.username,totalCount:K.totalCount,multiplier:K.multiplier})}F.sort((U,Q)=>Q.totalCount-U.totalCount),a(F)}catch(V){console.error("[ЛІДЕРБОРД] Помилка завантаження:",V)}finally{c(!1)}})()},[d]);const T=r.findIndex(R=>R.userId===s),b=l?Array.from({length:11},(R,V)=>({userId:`loading-${V}`,username:"...",totalCount:"...",multiplier:"..."})):r.slice(0,11);return ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"header",children:[ae.jsx("div",{className:"header-left",children:ae.jsx(Tr,{to:"/",className:"header-button",children:"←"})}),ae.jsx("div",{className:"header-right",children:ae.jsx(Tr,{to:"/settings",className:"settings-button",children:"⚙️"})})]}),ae.jsxs("div",{className:"wrapper",children:[ae.jsx("h2",{className:"clicker-text",children:"🏆 Топ гравців"}),ae.jsxs("div",{className:"leaderboard",children:[ae.jsxs("div",{className:"leaderboard-header",children:[ae.jsx("span",{children:"🏅"}),ae.jsx("span",{children:"Ім’я"}),ae.jsx("span",{children:"Зароблено"}),ae.jsx("span",{children:"Множник"})]}),b.map((R,V)=>{const F=R.userId===s;return ae.jsxs("div",{className:`leaderboard-row ${V===0?"gold":V===1?"silver":V===2?"bronze":""} ${F?"highlight-row":""}`,children:[ae.jsx("span",{children:V+1}),ae.jsx("span",{children:R.username}),ae.jsx("span",{children:R.totalCount}),ae.jsx("span",{children:R.multiplier})]},R.userId)})]}),!l&&T>=11&&ae.jsxs("div",{className:"leaderboard current-user-row highlight-row",children:[ae.jsxs("div",{className:"leaderboard-header",style:{marginTop:"24px"},children:[ae.jsx("span",{children:"📍"}),ae.jsx("span",{children:"Ви"}),ae.jsx("span",{children:"Зароблено"}),ae.jsx("span",{children:"Множник"})]}),ae.jsxs("div",{className:"leaderboard-row",children:[ae.jsx("span",{children:T+1}),ae.jsx("span",{children:m}),ae.jsx("span",{children:p}),ae.jsxs("span",{children:["x",_]})]})]})]})]})}function KN(){const s=M1(),{initialized:e,db:t}=FN();return s&&e&&t?ae.jsx(w1,{basename:"/clicker",children:ae.jsxs(e1,{children:[ae.jsx(af,{path:"/",element:ae.jsx(GN,{userId:s,db:t,initialized:e})}),ae.jsx(af,{path:"/upgrade",element:ae.jsx(HN,{userId:s,db:t,initialized:e})}),ae.jsx(af,{path:"/leaderboard",element:ae.jsx(QN,{db:t,initialized:e})})]})}):ae.jsx("div",{className:"wrapper",children:ae.jsx("p",{children:"Завантаження…"})})}uI.createRoot(document.getElementById("root")).render(ae.jsx(tI.StrictMode,{children:ae.jsx(KN,{})}));
