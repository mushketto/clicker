(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function _0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $m={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function $w(){if(ET)return du;ET=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return du.Fragment=t,du.jsx=e,du.jsxs=e,du}var AT;function Zw(){return AT||(AT=1,$m.exports=$w()),$m.exports}var Wn=Zw(),Zm={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function Ww(){if(bT)return It;bT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function w(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Z={};function $(V,W,at){this.props=V,this.context=W,this.refs=Z,this.updater=at||U}$.prototype.isReactComponent={},$.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},$.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function gt(){}gt.prototype=$.prototype;function pt(V,W,at){this.props=V,this.context=W,this.refs=Z,this.updater=at||U}var lt=pt.prototype=new gt;lt.constructor=pt,K(lt,$.prototype),lt.isPureReactComponent=!0;var St=Array.isArray,ht={H:null,A:null,T:null,S:null,V:null},At=Object.prototype.hasOwnProperty;function x(V,W,at,et,_t,Dt){return at=Dt.ref,{$$typeof:s,type:V,key:W,ref:at!==void 0?at:null,props:Dt}}function S(V,W){return x(V.type,W,void 0,void 0,void 0,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function N(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(at){return W[at]})}var O=/\/+/g;function P(V,W){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):W.toString(36)}function R(){}function je(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(R,R):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function fe(V,W,at,et,_t){var Dt=typeof V;(Dt==="undefined"||Dt==="boolean")&&(V=null);var bt=!1;if(V===null)bt=!0;else switch(Dt){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(V.$$typeof){case s:case t:bt=!0;break;case T:return bt=V._init,fe(bt(V._payload),W,at,et,_t)}}if(bt)return _t=_t(V),bt=et===""?"."+P(V,0):et,St(_t)?(at="",bt!=null&&(at=bt.replace(O,"$&/")+"/"),fe(_t,W,at,"",function(ti){return ti})):_t!=null&&(D(_t)&&(_t=S(_t,at+(_t.key==null||V&&V.key===_t.key?"":(""+_t.key).replace(O,"$&/")+"/")+bt)),W.push(_t)),1;bt=0;var Pe=et===""?".":et+":";if(St(V))for(var te=0;te<V.length;te++)et=V[te],Dt=Pe+P(et,te),bt+=fe(et,W,at,Dt,_t);else if(te=w(V),typeof te=="function")for(V=te.call(V),te=0;!(et=V.next()).done;)et=et.value,Dt=Pe+P(et,te++),bt+=fe(et,W,at,Dt,_t);else if(Dt==="object"){if(typeof V.then=="function")return fe(je(V),W,at,et,_t);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return bt}function H(V,W,at){if(V==null)return V;var et=[],_t=0;return fe(V,et,"","",function(Dt){return W.call(at,Dt,_t++)}),et}function rt(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(at){(V._status===0||V._status===-1)&&(V._status=1,V._result=at)},function(at){(V._status===0||V._status===-1)&&(V._status=2,V._result=at)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var mt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function qt(){}return It.Children={map:H,forEach:function(V,W,at){H(V,function(){W.apply(this,arguments)},at)},count:function(V){var W=0;return H(V,function(){W++}),W},toArray:function(V){return H(V,function(W){return W})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},It.Component=$,It.Fragment=e,It.Profiler=o,It.PureComponent=pt,It.StrictMode=r,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,It.__COMPILER_RUNTIME={__proto__:null,c:function(V){return ht.H.useMemoCache(V)}},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cloneElement=function(V,W,at){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var et=K({},V.props),_t=V.key,Dt=void 0;if(W!=null)for(bt in W.ref!==void 0&&(Dt=void 0),W.key!==void 0&&(_t=""+W.key),W)!At.call(W,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&W.ref===void 0||(et[bt]=W[bt]);var bt=arguments.length-2;if(bt===1)et.children=at;else if(1<bt){for(var Pe=Array(bt),te=0;te<bt;te++)Pe[te]=arguments[te+2];et.children=Pe}return x(V.type,_t,void 0,void 0,Dt,et)},It.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},It.createElement=function(V,W,at){var et,_t={},Dt=null;if(W!=null)for(et in W.key!==void 0&&(Dt=""+W.key),W)At.call(W,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(_t[et]=W[et]);var bt=arguments.length-2;if(bt===1)_t.children=at;else if(1<bt){for(var Pe=Array(bt),te=0;te<bt;te++)Pe[te]=arguments[te+2];_t.children=Pe}if(V&&V.defaultProps)for(et in bt=V.defaultProps,bt)_t[et]===void 0&&(_t[et]=bt[et]);return x(V,Dt,void 0,void 0,null,_t)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:m,render:V}},It.isValidElement=D,It.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:rt}},It.memo=function(V,W){return{$$typeof:_,type:V,compare:W===void 0?null:W}},It.startTransition=function(V){var W=ht.T,at={};ht.T=at;try{var et=V(),_t=ht.S;_t!==null&&_t(at,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(qt,mt)}catch(Dt){mt(Dt)}finally{ht.T=W}},It.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},It.use=function(V){return ht.H.use(V)},It.useActionState=function(V,W,at){return ht.H.useActionState(V,W,at)},It.useCallback=function(V,W){return ht.H.useCallback(V,W)},It.useContext=function(V){return ht.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,W){return ht.H.useDeferredValue(V,W)},It.useEffect=function(V,W,at){var et=ht.H;if(typeof at=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return et.useEffect(V,W)},It.useId=function(){return ht.H.useId()},It.useImperativeHandle=function(V,W,at){return ht.H.useImperativeHandle(V,W,at)},It.useInsertionEffect=function(V,W){return ht.H.useInsertionEffect(V,W)},It.useLayoutEffect=function(V,W){return ht.H.useLayoutEffect(V,W)},It.useMemo=function(V,W){return ht.H.useMemo(V,W)},It.useOptimistic=function(V,W){return ht.H.useOptimistic(V,W)},It.useReducer=function(V,W,at){return ht.H.useReducer(V,W,at)},It.useRef=function(V){return ht.H.useRef(V)},It.useState=function(V){return ht.H.useState(V)},It.useSyncExternalStore=function(V,W,at){return ht.H.useSyncExternalStore(V,W,at)},It.useTransition=function(){return ht.H.useTransition()},It.version="19.1.0",It}var ST;function Yg(){return ST||(ST=1,Zm.exports=Ww()),Zm.exports}var Wi=Yg();const Jw=_0(Wi);var Wm={exports:{}},mu={},Jm={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function tI(){return wT||(wT=1,function(s){function t(H,rt){var mt=H.length;H.push(rt);t:for(;0<mt;){var qt=mt-1>>>1,V=H[qt];if(0<o(V,rt))H[qt]=rt,H[mt]=V,mt=qt;else break t}}function e(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var rt=H[0],mt=H.pop();if(mt!==rt){H[0]=mt;t:for(var qt=0,V=H.length,W=V>>>1;qt<W;){var at=2*(qt+1)-1,et=H[at],_t=at+1,Dt=H[_t];if(0>o(et,mt))_t<V&&0>o(Dt,et)?(H[qt]=Dt,H[_t]=mt,qt=_t):(H[qt]=et,H[at]=mt,qt=at);else if(_t<V&&0>o(Dt,mt))H[qt]=Dt,H[_t]=mt,qt=_t;else break t}}return rt}function o(H,rt){var mt=H.sortIndex-rt.sortIndex;return mt!==0?mt:H.id-rt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],T=1,A=null,w=3,U=!1,K=!1,Z=!1,$=!1,gt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function St(H){for(var rt=e(_);rt!==null;){if(rt.callback===null)r(_);else if(rt.startTime<=H)r(_),rt.sortIndex=rt.expirationTime,t(g,rt);else break;rt=e(_)}}function ht(H){if(Z=!1,St(H),!K)if(e(g)!==null)K=!0,At||(At=!0,P());else{var rt=e(_);rt!==null&&fe(ht,rt.startTime-H)}}var At=!1,x=-1,S=5,D=-1;function N(){return $?!0:!(s.unstable_now()-D<S)}function O(){if($=!1,At){var H=s.unstable_now();D=H;var rt=!0;try{t:{K=!1,Z&&(Z=!1,pt(x),x=-1),U=!0;var mt=w;try{e:{for(St(H),A=e(g);A!==null&&!(A.expirationTime>H&&N());){var qt=A.callback;if(typeof qt=="function"){A.callback=null,w=A.priorityLevel;var V=qt(A.expirationTime<=H);if(H=s.unstable_now(),typeof V=="function"){A.callback=V,St(H),rt=!0;break e}A===e(g)&&r(g),St(H)}else r(g);A=e(g)}if(A!==null)rt=!0;else{var W=e(_);W!==null&&fe(ht,W.startTime-H),rt=!1}}break t}finally{A=null,w=mt,U=!1}rt=void 0}}finally{rt?P():At=!1}}}var P;if(typeof lt=="function")P=function(){lt(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,je=R.port2;R.port1.onmessage=O,P=function(){je.postMessage(null)}}else P=function(){gt(O,0)};function fe(H,rt){x=gt(function(){H(s.unstable_now())},rt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(H){switch(w){case 1:case 2:case 3:var rt=3;break;default:rt=w}var mt=w;w=rt;try{return H()}finally{w=mt}},s.unstable_requestPaint=function(){$=!0},s.unstable_runWithPriority=function(H,rt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var mt=w;w=H;try{return rt()}finally{w=mt}},s.unstable_scheduleCallback=function(H,rt,mt){var qt=s.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?qt+mt:qt):mt=qt,H){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=mt+V,H={id:T++,callback:rt,priorityLevel:H,startTime:mt,expirationTime:V,sortIndex:-1},mt>qt?(H.sortIndex=mt,t(_,H),e(g)===null&&H===e(_)&&(Z?(pt(x),x=-1):Z=!0,fe(ht,mt-qt))):(H.sortIndex=V,t(g,H),K||U||(K=!0,At||(At=!0,P()))),H},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(H){var rt=w;return function(){var mt=w;w=rt;try{return H.apply(this,arguments)}finally{w=mt}}}}(tg)),tg}var IT;function eI(){return IT||(IT=1,Jm.exports=tI()),Jm.exports}var eg={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function nI(){if(RT)return tn;RT=1;var s=Yg();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:_,implementation:T}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,T)},tn.flushSync=function(g){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=T,r.d.f()}},tn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin),w=typeof _.integrity=="string"?_.integrity:void 0,U=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:w,fetchPriority:U}):T==="script"&&r.d.X(g,{crossOrigin:A,integrity:w,fetchPriority:U,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},tn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},tn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,A=m(T,_.crossOrigin);r.d.L(g,T,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},tn.preloadModule=function(g,_){if(typeof g=="string")if(_){var T=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,_){return g(_)},tn.useFormState=function(g,_,T){return h.H.useFormState(g,_,T)},tn.useFormStatus=function(){return h.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var DT;function iI(){if(DT)return eg.exports;DT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),eg.exports=nI(),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function rI(){if(VT)return mu;VT=1;var s=eI(),t=Yg(),e=iI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,E=f.child;E;){if(E===a){v=!0,a=f,l=d;break}if(E===l){v=!0,l=f,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=f;break}if(E===l){v=!0,l=d,a=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function _(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=_(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),gt=Symbol.for("react.provider"),pt=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),At=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function je(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case K:return"Fragment";case $:return"Profiler";case Z:return"StrictMode";case ht:return"Suspense";case At:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case lt:return(n.displayName||"Context")+".Provider";case pt:return(n._context.displayName||"Context")+".Consumer";case St:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return i=n.displayName||null,i!==null?i:je(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return je(n(i))}catch{}}return null}var fe=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},qt=[],V=-1;function W(n){return{current:n}}function at(n){0>V||(n.current=qt[V],qt[V]=null,V--)}function et(n,i){V++,qt[V]=n.current,n.current=i}var _t=W(null),Dt=W(null),bt=W(null),Pe=W(null);function te(n,i){switch(et(bt,i),et(Dt,n),et(_t,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Xv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Xv(i),n=$v(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}at(_t),et(_t,n)}function ti(){at(_t),at(Dt),at(bt)}function ur(n){n.memoizedState!==null&&et(Pe,n);var i=_t.current,a=$v(i,n.type);i!==a&&(et(Dt,n),et(_t,a))}function Ii(n){Dt.current===n&&(at(_t),at(Dt)),Pe.current===n&&(at(Pe),lu._currentValue=mt)}var hs=Object.prototype.hasOwnProperty,fs=s.unstable_scheduleCallback,ds=s.unstable_cancelCallback,sl=s.unstable_shouldYield,hc=s.unstable_requestPaint,xn=s.unstable_now,$f=s.unstable_getCurrentPriorityLevel,al=s.unstable_ImmediatePriority,Aa=s.unstable_UserBlockingPriority,ms=s.unstable_NormalPriority,Zf=s.unstable_LowPriority,ba=s.unstable_IdlePriority,ol=s.log,fc=s.unstable_setDisableYieldValue,de=null,Gt=null;function Tn(n){if(typeof ol=="function"&&fc(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(de,n)}catch{}}var We=Math.clz32?Math.clz32:gs,dc=Math.log,Wf=Math.LN2;function gs(n){return n>>>=0,n===0?32:31-(dc(n)/Wf|0)|0}var ps=256,_s=4194304;function Qn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Sa(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=Qn(l):(v&=E,v!==0?f=Qn(v):a||(a=E&~n,a!==0&&(f=Qn(a))))):(E=l&~d,E!==0?f=Qn(E):v!==0?f=Qn(v):a||(a=l&~n,a!==0&&(f=Qn(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ys(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ll(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ul(){var n=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),n}function cl(){var n=_s;return _s<<=1,(_s&62914560)===0&&(_s=4194304),n}function Ri(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Di(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hl(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,I=n.expirationTimes,z=n.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-We(a),X=1<<Q;E[Q]=0,I[Q]=-1;var q=z[Q];if(q!==null)for(z[Q]=null,Q=0;Q<q.length;Q++){var F=q[Q];F!==null&&(F.lane&=-536870913)}a&=~X}l!==0&&ei(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function ei(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-We(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function fl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-We(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function cr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function wa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function hr(){var n=rt.p;return n!==0?n:(n=window.event,n===void 0?32:gT(n.type))}function mc(n,i){var a=rt.p;try{return rt.p=n,i()}finally{rt.p=a}}var re=Math.random().toString(36).slice(2),Ve="__reactFiber$"+re,be="__reactProps$"+re,Nn="__reactContainer$"+re,dl="__reactEvents$"+re,Jf="__reactListeners$"+re,fr="__reactHandles$"+re,gc="__reactResources$"+re,vs="__reactMarker$"+re;function dr(n){delete n[Ve],delete n[be],delete n[dl],delete n[Jf],delete n[fr]}function Vi(n){var i=n[Ve];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Nn]||a[Ve]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=tT(n);n!==null;){if(a=n[Ve])return a;n=tT(n)}return i}n=a,a=n.parentNode}return null}function ni(n){if(n=n[Ve]||n[Nn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ii(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function an(n){var i=n[gc];return i||(i=n[gc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _e(n){n[vs]=!0}var ml=new Set,Ia={};function Kn(n,i){Ci(n,i),Ci(n+"Capture",i)}function Ci(n,i){for(Ia[n]=i,n=0;n<i.length;n++)ml.add(i[n])}var pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_c={},Ts={};function yc(n){return hs.call(Ts,n)?!0:hs.call(_c,n)?!1:pc.test(n)?Ts[n]=!0:(_c[n]=!0,!1)}function mr(n,i,a){if(yc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function ri(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Ge(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var Es,vc;function xi(n){if(Es===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Es=i&&i[1]||"",vc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Es+n+vc}var Ra=!1;function Da(n,i){if(!n||Ra)return"";Ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(F){var q=F}Reflect.construct(n,[],X)}else{try{X.call()}catch(F){q=F}n.call(X.prototype)}}else{try{throw Error()}catch(F){q=F}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var I=v.split(`
`),z=E.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===z.length)for(l=I.length-1,f=z.length-1;1<=l&&0<=f&&I[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==z[f]){var Q=`
`+I[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{Ra=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?xi(a):""}function gl(n){switch(n.tag){case 26:case 27:case 5:return xi(n.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return Da(n.type,!1);case 11:return Da(n.type.render,!1);case 1:return Da(n.type,!0);case 31:return xi("Activity");default:return""}}function Va(n){try{var i="";do i+=gl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function on(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function td(n){var i=pl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ca(n){n._valueTracker||(n._valueTracker=td(n))}function _l(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=pl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function As(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ed=/[\n"\\]/g;function Se(n){return n.replace(ed,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function En(n,i,a,l,f,d,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+on(i)):n.value!==""+on(i)&&(n.value=""+on(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?gr(n,v,on(i)):a!=null?gr(n,v,on(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+on(E):n.removeAttribute("name")}function bs(n,i,a,l,f,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+on(a):"",i=i!=null?""+on(i):a,E||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=E?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function gr(n,i,a){i==="number"&&As(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ni(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+on(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Xt(n,i,a){if(i!=null&&(i=""+on(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+on(a):""}function Ss(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(fe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=on(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function On(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var ws=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tc(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||ws.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function yl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Tc(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Tc(n,d,i[d])}function vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),id=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(n){return id.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Oi=null;function Mn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mi=null,Pi=null;function Tl(n){var i=ni(n);if(i&&(n=i.stateNode)){var a=n[be]||null;t:switch(n=i.stateNode,i.type){case"input":if(En(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Se(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[be]||null;if(!f)throw Error(r(90));En(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&_l(l)}break t;case"textarea":Xt(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ni(n,!!a.multiple,i,!1)}}}var si=!1;function Ec(n,i,a){if(si)return n(i,a);si=!0;try{var l=n(i);return l}finally{if(si=!1,(Mi!==null||Pi!==null)&&(mh(),Mi&&(i=Mi,n=Pi,Pi=Mi=null,Tl(i),n)))for(i=0;i<n.length;i++)Tl(n[i])}}function Is(n,i){var a=n.stateNode;if(a===null)return null;var l=a[be]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Yn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{Pn=!1}var ai=null,pr=null,Ui=null;function El(){if(Ui)return Ui;var n,i=pr,a=i.length,l,f="value"in ai?ai.value:ai.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Ui=f.slice(n,1<l?1-l:void 0)}function oi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function li(){return!0}function Al(){return!1}function Ue(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?li:Al,this.isPropagationStopped=Al,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),i}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Ue(jt),Ds=T({},jt,{view:0,detail:0}),Ac=Ue(Ds),Oa,Ma,ui,Vs=T({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(Oa=n.screenX-ui.screenX,Ma=n.screenY-ui.screenY):Ma=Oa=0,ui=n),Oa)},movementY:function(n){return"movementY"in n?n.movementY:Ma}}),Un=Ue(Vs),bc=T({},Vs,{dataTransfer:0}),rd=Ue(bc),Cs=T({},Ds,{relatedTarget:0}),Pa=Ue(Cs),bl=T({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=Ue(bl),Sc=T({},jt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),La=Ue(Sc),sd=T({},jt,{data:0}),Sl=Ue(sd),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Ic[n])?!!i[n]:!1}function Ns(){return wl}var Rc=T({},Ds,{key:function(n){if(n.key){var i=xs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=oi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(n){return n.type==="keypress"?oi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ba=Ue(Rc),Dc=T({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Ue(Dc),Li=T({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns}),Vc=Ue(Li),Cc=T({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xc=Ue(Cc),Nc=T({},Vs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=Ue(Nc),ln=T({},jt,{newState:0,oldState:0}),Oc=Ue(ln),Mc=[9,13,27,32],ci=Yn&&"CompositionEvent"in window,c=null;Yn&&"documentMode"in document&&(c=document.documentMode);var p=Yn&&"TextEvent"in window&&!c,y=Yn&&(!ci||c&&8<c&&11>=c),b=" ",L=!1;function G(n,i){switch(n){case"keyup":return Mc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pt=!1;function Ce(n,i){switch(n){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return n=i.data,n===b&&L?null:n;default:return null}}function Ut(n,i){if(Pt)return n==="compositionend"||!ci&&G(n,i)?(n=El(),Ui=pr=ai=null,Pt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Le[n.type]:i==="textarea"}function Bi(n,i,a,l){Mi?Pi?Pi.push(l):Pi=[l]:Mi=l,i=Th(i,"onChange"),0<i.length&&(a=new Na("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var He=null,hi=null;function Rl(n){Gv(n,0)}function Pc(n){var i=ii(n);if(_l(i))return n}function h_(n,i){if(n==="change")return i}var f_=!1;if(Yn){var ad;if(Yn){var od="oninput"in document;if(!od){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),od=typeof d_.oninput=="function"}ad=od}else ad=!1;f_=ad&&(!document.documentMode||9<document.documentMode)}function m_(){He&&(He.detachEvent("onpropertychange",g_),hi=He=null)}function g_(n){if(n.propertyName==="value"&&Pc(hi)){var i=[];Bi(i,hi,n,Mn(n)),Ec(Rl,i)}}function IS(n,i,a){n==="focusin"?(m_(),He=i,hi=a,He.attachEvent("onpropertychange",g_)):n==="focusout"&&m_()}function RS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pc(hi)}function DS(n,i){if(n==="click")return Pc(i)}function VS(n,i){if(n==="input"||n==="change")return Pc(i)}function CS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var An=typeof Object.is=="function"?Object.is:CS;function Dl(n,i){if(An(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!hs.call(i,f)||!An(n[f],i[f]))return!1}return!0}function p_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function __(n,i){var a=p_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=p_(a)}}function y_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?y_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function v_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=As(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=As(n.document)}return i}function ld(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var xS=Yn&&"documentMode"in document&&11>=document.documentMode,za=null,ud=null,Vl=null,cd=!1;function T_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||za==null||za!==As(l)||(l=za,"selectionStart"in l&&ld(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Vl&&Dl(Vl,l)||(Vl=l,l=Th(ud,"onSelect"),0<l.length&&(i=new Na("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=za)))}function Os(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var qa={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},hd={},E_={};Yn&&(E_=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function Ms(n){if(hd[n])return hd[n];if(!qa[n])return n;var i=qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in E_)return hd[n]=i[a];return n}var A_=Ms("animationend"),b_=Ms("animationiteration"),S_=Ms("animationstart"),NS=Ms("transitionrun"),OS=Ms("transitionstart"),MS=Ms("transitioncancel"),w_=Ms("transitionend"),I_=new Map,fd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fd.push("scrollEnd");function Xn(n,i){I_.set(n,i),Kn(i,[n])}var R_=new WeakMap;function Ln(n,i){if(typeof n=="object"&&n!==null){var a=R_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Va(i)},R_.set(n,i),i)}return{value:n,source:i,stack:Va(i)}}var Bn=[],Fa=0,dd=0;function Uc(){for(var n=Fa,i=dd=Fa=0;i<n;){var a=Bn[i];Bn[i++]=null;var l=Bn[i];Bn[i++]=null;var f=Bn[i];Bn[i++]=null;var d=Bn[i];if(Bn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&D_(a,f,d)}}function Lc(n,i,a,l){Bn[Fa++]=n,Bn[Fa++]=i,Bn[Fa++]=a,Bn[Fa++]=l,dd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function md(n,i,a,l){return Lc(n,i,a,l),Bc(n)}function ja(n,i){return Lc(n,null,null,i),Bc(n)}function D_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-We(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Bc(n){if(50<tu)throw tu=0,Tm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ga={};function PS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(n,i,a,l){return new PS(n,i,a,l)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ki(n,i){var a=n.alternate;return a===null?(a=bn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function V_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function kc(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")gd(n)&&(v=1);else if(typeof n=="string")v=Lw(n,a,_t.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case D:return n=bn(31,a,i,f),n.elementType=D,n.lanes=d,n;case K:return Ps(a.children,f,d,i);case Z:v=8,f|=24;break;case $:return n=bn(12,a,i,f|2),n.elementType=$,n.lanes=d,n;case ht:return n=bn(13,a,i,f),n.elementType=ht,n.lanes=d,n;case At:return n=bn(19,a,i,f),n.elementType=At,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gt:case lt:v=10;break t;case pt:v=9;break t;case St:v=11;break t;case x:v=14;break t;case S:v=16,l=null;break t}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=bn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Ps(n,i,a,l){return n=bn(7,n,l,i),n.lanes=a,n}function pd(n,i,a){return n=bn(6,n,null,i),n.lanes=a,n}function _d(n,i,a){return i=bn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ha=[],Qa=0,zc=null,qc=0,kn=[],zn=0,Us=null,zi=1,qi="";function Ls(n,i){Ha[Qa++]=qc,Ha[Qa++]=zc,zc=n,qc=i}function C_(n,i,a){kn[zn++]=zi,kn[zn++]=qi,kn[zn++]=Us,Us=n;var l=zi;n=qi;var f=32-We(l)-1;l&=~(1<<f),a+=1;var d=32-We(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,zi=1<<32-We(i)+f|a<<f|l,qi=d+n}else zi=1<<d|a<<f|l,qi=n}function yd(n){n.return!==null&&(Ls(n,1),C_(n,1,0))}function vd(n){for(;n===zc;)zc=Ha[--Qa],Ha[Qa]=null,qc=Ha[--Qa],Ha[Qa]=null;for(;n===Us;)Us=kn[--zn],kn[zn]=null,qi=kn[--zn],kn[zn]=null,zi=kn[--zn],kn[zn]=null}var un=null,me=null,Ft=!1,Bs=null,fi=!1,Td=Error(r(519));function ks(n){var i=Error(r(418,""));throw Nl(Ln(i,n)),Td}function x_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ve]=n,i[be]=l,a){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(a=0;a<nu.length;a++)xt(nu[a],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":xt("invalid",i),bs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ca(i);break;case"select":xt("invalid",i);break;case"textarea":xt("invalid",i),Ss(i,l.value,l.defaultValue,l.children),Ca(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Yv(i.textContent,a)?(l.popover!=null&&(xt("beforetoggle",i),xt("toggle",i)),l.onScroll!=null&&xt("scroll",i),l.onScrollEnd!=null&&xt("scrollend",i),l.onClick!=null&&(i.onclick=Eh),i=!0):i=!1,i||ks(n)}function N_(n){for(un=n.return;un;)switch(un.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:un=un.return}}function Cl(n){if(n!==un)return!1;if(!Ft)return N_(n),Ft=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Um(n.type,n.memoizedProps)),a=!a),a&&me&&ks(n),N_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){me=Zn(n.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}me=null}}else i===27?(i=me,Nr(n.type)?(n=zm,zm=null,me=n):me=i):me=un?Zn(n.stateNode.nextSibling):null;return!0}function xl(){me=un=null,Ft=!1}function O_(){var n=Bs;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),Bs=null),n}function Nl(n){Bs===null?Bs=[n]:Bs.push(n)}var Ed=W(null),zs=null,Fi=null;function _r(n,i,a){et(Ed,i._currentValue),i._currentValue=a}function ji(n){n._currentValue=Ed.current,at(Ed)}function Ad(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function bd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=f;for(var I=0;I<i.length;I++)if(E.context===i[I]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Ad(d.return,a,n),l||(v=null);break t}d=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Ad(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Ol(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=f.type;An(f.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(f===Pe.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(lu):n=[lu])}f=f.return}n!==null&&bd(i,n,a,l),i.flags|=262144}function Fc(n){for(n=n.firstContext;n!==null;){if(!An(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qs(n){zs=n,Fi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Je(n){return M_(zs,n)}function jc(n,i){return zs===null&&qs(n),M_(n,i)}function M_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Fi===null){if(n===null)throw Error(r(308));Fi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Fi=Fi.next=i;return a}var US=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},LS=s.unstable_scheduleCallback,BS=s.unstable_NormalPriority,Ne={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new US,data:new Map,refCount:0}}function Ml(n){n.refCount--,n.refCount===0&&LS(BS,function(){n.controller.abort()})}var Pl=null,wd=0,Ka=0,Ya=null;function kS(n,i){if(Pl===null){var a=Pl=[];wd=0,Ka=Rm(),Ya={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wd++,i.then(P_,P_),i}function P_(){if(--wd===0&&Pl!==null){Ya!==null&&(Ya.status="fulfilled");var n=Pl;Pl=null,Ka=0,Ya=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function zS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var U_=H.S;H.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kS(n,i),U_!==null&&U_(n,i)};var Fs=W(null);function Id(){var n=Fs.current;return n!==null?n:ee.pooledCache}function Gc(n,i){i===null?et(Fs,Fs.current):et(Fs,i.pool)}function L_(){var n=Id();return n===null?null:{parent:Ne._currentValue,pool:n}}var Ul=Error(r(460)),B_=Error(r(474)),Hc=Error(r(542)),Rd={then:function(){}};function k_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qc(){}function z_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Qc,Qc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,F_(n),n;default:if(typeof i.status=="string")i.then(Qc,Qc);else{if(n=ee,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,F_(n),n}throw Ll=i,Ul}}var Ll=null;function q_(){if(Ll===null)throw Error(r(459));var n=Ll;return Ll=null,n}function F_(n){if(n===Ul||n===Hc)throw Error(r(483))}var yr=!1;function Dd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function vr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Tr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ht&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Bc(n),D_(n,null,a),i}return Lc(n,l,i,a),Bc(n)}function Bl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,fl(n,a)}}function Cd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var xd=!1;function kl(){if(xd){var n=Ya;if(n!==null)throw n}}function zl(n,i,a,l){xd=!1;var f=n.updateQueue;yr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var I=E,z=I.next;I.next=null,v===null?d=z:v.next=z,v=I;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==v&&(E===null?Q.firstBaseUpdate=z:E.next=z,Q.lastBaseUpdate=I))}if(d!==null){var X=f.baseState;v=0,Q=z=I=null,E=d;do{var q=E.lane&-536870913,F=q!==E.lane;if(F?(Lt&q)===q:(l&q)===q){q!==0&&q===Ka&&(xd=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=n,yt=E;q=i;var Wt=a;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){X=Et.call(Wt,X,q);break t}X=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,q=typeof Et=="function"?Et.call(Wt,X,q):Et,q==null)break t;X=T({},X,q);break t;case 2:yr=!0}}q=E.callback,q!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[q]:F.push(q))}else F={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(z=Q=F,I=X):Q=Q.next=F,v|=q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;F=E,E=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);Q===null&&(I=X),f.baseState=I,f.firstBaseUpdate=z,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),Dr|=v,n.lanes=v,n.memoizedState=X}}function j_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function G_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)j_(a[n],i)}var Xa=W(null),Kc=W(0);function H_(n,i){n=$i,et(Kc,n),et(Xa,i),$i=n|i.baseLanes}function Nd(){et(Kc,$i),et(Xa,Xa.current)}function Od(){$i=Kc.current,at(Xa),at(Kc)}var Er=0,Rt=null,$t=null,we=null,Yc=!1,$a=!1,js=!1,Xc=0,ql=0,Za=null,qS=0;function ye(){throw Error(r(321))}function Md(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!An(n[a],i[a]))return!1;return!0}function Pd(n,i,a,l,f,d){return Er=d,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=n===null||n.memoizedState===null?Dy:Vy,js=!1,d=a(l,f),js=!1,$a&&(d=K_(i,a,l,f)),Q_(n),d}function Q_(n){H.H=eh;var i=$t!==null&&$t.next!==null;if(Er=0,we=$t=Rt=null,Yc=!1,ql=0,Za=null,i)throw Error(r(300));n===null||Be||(n=n.dependencies,n!==null&&Fc(n)&&(Be=!0))}function K_(n,i,a,l){Rt=n;var f=0;do{if($a&&(Za=null),ql=0,$a=!1,25<=f)throw Error(r(301));if(f+=1,we=$t=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=YS,d=i(a,l)}while($a);return d}function FS(){var n=H.H,i=n.useState()[0];return i=typeof i.then=="function"?Fl(i):i,n=n.useState()[0],($t!==null?$t.memoizedState:null)!==n&&(Rt.flags|=1024),i}function Ud(){var n=Xc!==0;return Xc=0,n}function Ld(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Bd(n){if(Yc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Yc=!1}Er=0,we=$t=Rt=null,$a=!1,ql=Xc=0,Za=null}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Rt.memoizedState=we=n:we=we.next=n,we}function Ie(){if($t===null){var n=Rt.alternate;n=n!==null?n.memoizedState:null}else n=$t.next;var i=we===null?Rt.memoizedState:we.next;if(i!==null)we=i,$t=n;else{if(n===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));$t=n,n={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},we===null?Rt.memoizedState=we=n:we=we.next=n}return we}function kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(n){var i=ql;return ql+=1,Za===null&&(Za=[]),n=z_(Za,n,i),i=Rt,(we===null?i.memoizedState:we.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Dy:Vy),n}function $c(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fl(n);if(n.$$typeof===lt)return Je(n)}throw Error(r(438,String(n)))}function zd(n){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=kd(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=N;return i.index++,a}function Gi(n,i){return typeof i=="function"?i(n):i}function Zc(n){var i=Ie();return qd(i,$t,n)}function qd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var E=v=null,I=null,z=i,Q=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Lt&X)===X:(Er&X)===X){var q=z.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===Ka&&(Q=!0);else if((Er&q)===q){z=z.next,q===Ka&&(Q=!0);continue}else X={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(E=I=X,v=d):I=I.next=X,Rt.lanes|=q,Dr|=q;X=z.action,js&&a(d,X),d=z.hasEagerState?z.eagerState:a(d,X)}else q={lane:X,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(E=I=q,v=d):I=I.next=q,Rt.lanes|=X,Dr|=X;z=z.next}while(z!==null&&z!==i);if(I===null?v=d:I.next=E,!An(d,n.memoizedState)&&(Be=!0,Q&&(a=Ya,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Fd(n){var i=Ie(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);An(d,i.memoizedState)||(Be=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Y_(n,i,a){var l=Rt,f=Ie(),d=Ft;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!An(($t||f).memoizedState,a);v&&(f.memoizedState=a,Be=!0),f=f.queue;var E=Z_.bind(null,l,f,n);if(jl(2048,8,E,[n]),f.getSnapshot!==i||v||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,Wa(9,Wc(),$_.bind(null,l,f,a,i),null),ee===null)throw Error(r(349));d||(Er&124)!==0||X_(l,i,a)}return a}function X_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=kd(),Rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function $_(n,i,a,l){i.value=a,i.getSnapshot=l,W_(i)&&J_(n)}function Z_(n,i,a){return a(function(){W_(i)&&J_(n)})}function W_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!An(n,a)}catch{return!0}}function J_(n){var i=ja(n,2);i!==null&&Dn(i,n,2)}function jd(n){var i=mn();if(typeof n=="function"){var a=n;if(n=a(),js){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:n},i}function ty(n,i,a,l){return n.baseState=a,qd(n,$t,typeof l=="function"?l:Gi)}function jS(n,i,a,l,f){if(th(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ey(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ey(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var E=a(f,l),I=H.S;I!==null&&I(v,E),ny(n,i,E)}catch(z){Gd(n,i,z)}finally{H.T=d}}else try{d=a(f,l),ny(n,i,d)}catch(z){Gd(n,i,z)}}function ny(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){iy(n,i,l)},function(l){return Gd(n,i,l)}):iy(n,i,a)}function iy(n,i,a){i.status="fulfilled",i.value=a,ry(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,ey(n,a)))}function Gd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ry(i),i=i.next;while(i!==l)}n.action=null}function ry(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function sy(n,i){return i}function ay(n,i){if(Ft){var a=ee.formState;if(a!==null){t:{var l=Rt;if(Ft){if(me){e:{for(var f=me,d=fi;f.nodeType!==8;){if(!d){f=null;break e}if(f=Zn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){me=Zn(f.nextSibling),l=f.data==="F!";break t}}ks(l)}l=!1}l&&(i=a[0])}}return a=mn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:i},a.queue=l,a=wy.bind(null,Rt,l),l.dispatch=a,l=jd(!1),d=Xd.bind(null,Rt,!1,l.queue),l=mn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=jS.bind(null,Rt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function oy(n){var i=Ie();return ly(i,$t,n)}function ly(n,i,a){if(i=qd(n,i,sy)[0],n=Zc(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Fl(i)}catch(v){throw v===Ul?Hc:v}else l=i;i=Ie();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,Wa(9,Wc(),GS.bind(null,f,a),null)),[l,d,n]}function GS(n,i){n.action=i}function uy(n){var i=Ie(),a=$t;if(a!==null)return ly(i,a,n);Ie(),i=i.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Wa(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=kd(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function Wc(){return{destroy:void 0,resource:void 0}}function cy(){return Ie().memoizedState}function Jc(n,i,a,l){var f=mn();l=l===void 0?null:l,Rt.flags|=n,f.memoizedState=Wa(1|i,Wc(),a,l)}function jl(n,i,a,l){var f=Ie();l=l===void 0?null:l;var d=f.memoizedState.inst;$t!==null&&l!==null&&Md(l,$t.memoizedState.deps)?f.memoizedState=Wa(i,d,a,l):(Rt.flags|=n,f.memoizedState=Wa(1|i,d,a,l))}function hy(n,i){Jc(8390656,8,n,i)}function fy(n,i){jl(2048,8,n,i)}function dy(n,i){return jl(4,2,n,i)}function my(n,i){return jl(4,4,n,i)}function gy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function py(n,i,a){a=a!=null?a.concat([n]):null,jl(4,4,gy.bind(null,i,n),a)}function Hd(){}function _y(n,i){var a=Ie();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Md(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function yy(n,i){var a=Ie();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Md(i,l[1]))return l[0];if(l=n(),js){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[l,i],l}function Qd(n,i,a){return a===void 0||(Er&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=Ev(),Rt.lanes|=n,Dr|=n,a)}function vy(n,i,a,l){return An(a,i)?a:Xa.current!==null?(n=Qd(n,a,l),An(n,i)||(Be=!0),n):(Er&42)===0?(Be=!0,n.memoizedState=a):(n=Ev(),Rt.lanes|=n,Dr|=n,i)}function Ty(n,i,a,l,f){var d=rt.p;rt.p=d!==0&&8>d?d:8;var v=H.T,E={};H.T=E,Xd(n,!1,i,a);try{var I=f(),z=H.S;if(z!==null&&z(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=zS(I,l);Gl(n,i,Q,Rn(n))}else Gl(n,i,l,Rn(n))}catch(X){Gl(n,i,{then:function(){},status:"rejected",reason:X},Rn())}finally{rt.p=d,H.T=v}}function HS(){}function Kd(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Ey(n).queue;Ty(n,f,i,mt,a===null?HS:function(){return Ay(n),a(l)})}function Ey(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:mt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Ay(n){var i=Ey(n).next.queue;Gl(n,i,{},Rn())}function Yd(){return Je(lu)}function by(){return Ie().memoizedState}function Sy(){return Ie().memoizedState}function QS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();n=vr(a);var l=Tr(i,n,a);l!==null&&(Dn(l,i,a),Bl(l,i,a)),i={cache:Sd()},n.payload=i;return}i=i.return}}function KS(n,i,a){var l=Rn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},th(n)?Iy(i,a):(a=md(n,i,a,l),a!==null&&(Dn(a,n,l),Ry(a,i,l)))}function wy(n,i,a){var l=Rn();Gl(n,i,a,l)}function Gl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(th(n))Iy(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(f.hasEagerState=!0,f.eagerState=E,An(E,v))return Lc(n,i,f,0),ee===null&&Uc(),!1}catch{}finally{}if(a=md(n,i,f,l),a!==null)return Dn(a,n,l),Ry(a,i,l),!0}return!1}function Xd(n,i,a,l){if(l={lane:2,revertLane:Rm(),action:l,hasEagerState:!1,eagerState:null,next:null},th(n)){if(i)throw Error(r(479))}else i=md(n,a,l,2),i!==null&&Dn(i,n,2)}function th(n){var i=n.alternate;return n===Rt||i!==null&&i===Rt}function Iy(n,i){$a=Yc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Ry(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,fl(n,a)}}var eh={readContext:Je,use:$c,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Dy={readContext:Je,use:$c,useCallback:function(n,i){return mn().memoizedState=[n,i===void 0?null:i],n},useContext:Je,useEffect:hy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Jc(4194308,4,gy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Jc(4194308,4,n,i)},useInsertionEffect:function(n,i){Jc(4,2,n,i)},useMemo:function(n,i){var a=mn();i=i===void 0?null:i;var l=n();if(js){Tn(!0);try{n()}finally{Tn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=mn();if(a!==void 0){var f=a(i);if(js){Tn(!0);try{a(i)}finally{Tn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=KS.bind(null,Rt,n),[l.memoizedState,n]},useRef:function(n){var i=mn();return n={current:n},i.memoizedState=n},useState:function(n){n=jd(n);var i=n.queue,a=wy.bind(null,Rt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Hd,useDeferredValue:function(n,i){var a=mn();return Qd(a,n,i)},useTransition:function(){var n=jd(!1);return n=Ty.bind(null,Rt,n.queue,!0,!1),mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Rt,f=mn();if(Ft){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ee===null)throw Error(r(349));(Lt&124)!==0||X_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,hy(Z_.bind(null,l,d,n),[n]),l.flags|=2048,Wa(9,Wc(),$_.bind(null,l,d,a,i),null),a},useId:function(){var n=mn(),i=ee.identifierPrefix;if(Ft){var a=qi,l=zi;a=(l&~(1<<32-We(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Xc++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=qS++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Yd,useFormState:ay,useActionState:ay,useOptimistic:function(n){var i=mn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Xd.bind(null,Rt,!0,a),a.dispatch=i,[n,i]},useMemoCache:zd,useCacheRefresh:function(){return mn().memoizedState=QS.bind(null,Rt)}},Vy={readContext:Je,use:$c,useCallback:_y,useContext:Je,useEffect:fy,useImperativeHandle:py,useInsertionEffect:dy,useLayoutEffect:my,useMemo:yy,useReducer:Zc,useRef:cy,useState:function(){return Zc(Gi)},useDebugValue:Hd,useDeferredValue:function(n,i){var a=Ie();return vy(a,$t.memoizedState,n,i)},useTransition:function(){var n=Zc(Gi)[0],i=Ie().memoizedState;return[typeof n=="boolean"?n:Fl(n),i]},useSyncExternalStore:Y_,useId:by,useHostTransitionStatus:Yd,useFormState:oy,useActionState:oy,useOptimistic:function(n,i){var a=Ie();return ty(a,$t,n,i)},useMemoCache:zd,useCacheRefresh:Sy},YS={readContext:Je,use:$c,useCallback:_y,useContext:Je,useEffect:fy,useImperativeHandle:py,useInsertionEffect:dy,useLayoutEffect:my,useMemo:yy,useReducer:Fd,useRef:cy,useState:function(){return Fd(Gi)},useDebugValue:Hd,useDeferredValue:function(n,i){var a=Ie();return $t===null?Qd(a,n,i):vy(a,$t.memoizedState,n,i)},useTransition:function(){var n=Fd(Gi)[0],i=Ie().memoizedState;return[typeof n=="boolean"?n:Fl(n),i]},useSyncExternalStore:Y_,useId:by,useHostTransitionStatus:Yd,useFormState:uy,useActionState:uy,useOptimistic:function(n,i){var a=Ie();return $t!==null?ty(a,$t,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:zd,useCacheRefresh:Sy},Ja=null,Hl=0;function nh(n){var i=Hl;return Hl+=1,Ja===null&&(Ja=[]),z_(Ja,n,i)}function Ql(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ih(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Cy(n){var i=n._init;return i(n._payload)}function xy(n){function i(M,C){if(n){var k=M.deletions;k===null?(M.deletions=[C],M.flags|=16):k.push(C)}}function a(M,C){if(!n)return null;for(;C!==null;)i(M,C),C=C.sibling;return null}function l(M){for(var C=new Map;M!==null;)M.key!==null?C.set(M.key,M):C.set(M.index,M),M=M.sibling;return C}function f(M,C){return M=ki(M,C),M.index=0,M.sibling=null,M}function d(M,C,k){return M.index=k,n?(k=M.alternate,k!==null?(k=k.index,k<C?(M.flags|=67108866,C):k):(M.flags|=67108866,C)):(M.flags|=1048576,C)}function v(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function E(M,C,k,Y){return C===null||C.tag!==6?(C=pd(k,M.mode,Y),C.return=M,C):(C=f(C,k),C.return=M,C)}function I(M,C,k,Y){var ut=k.type;return ut===K?Q(M,C,k.props.children,Y,k.key):C!==null&&(C.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Cy(ut)===C.type)?(C=f(C,k.props),Ql(C,k),C.return=M,C):(C=kc(k.type,k.key,k.props,null,M.mode,Y),Ql(C,k),C.return=M,C)}function z(M,C,k,Y){return C===null||C.tag!==4||C.stateNode.containerInfo!==k.containerInfo||C.stateNode.implementation!==k.implementation?(C=_d(k,M.mode,Y),C.return=M,C):(C=f(C,k.children||[]),C.return=M,C)}function Q(M,C,k,Y,ut){return C===null||C.tag!==7?(C=Ps(k,M.mode,Y,ut),C.return=M,C):(C=f(C,k),C.return=M,C)}function X(M,C,k){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=pd(""+C,M.mode,k),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case w:return k=kc(C.type,C.key,C.props,null,M.mode,k),Ql(k,C),k.return=M,k;case U:return C=_d(C,M.mode,k),C.return=M,C;case S:var Y=C._init;return C=Y(C._payload),X(M,C,k)}if(fe(C)||P(C))return C=Ps(C,M.mode,k,null),C.return=M,C;if(typeof C.then=="function")return X(M,nh(C),k);if(C.$$typeof===lt)return X(M,jc(M,C),k);ih(M,C)}return null}function q(M,C,k,Y){var ut=C!==null?C.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ut!==null?null:E(M,C,""+k,Y);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return k.key===ut?I(M,C,k,Y):null;case U:return k.key===ut?z(M,C,k,Y):null;case S:return ut=k._init,k=ut(k._payload),q(M,C,k,Y)}if(fe(k)||P(k))return ut!==null?null:Q(M,C,k,Y,null);if(typeof k.then=="function")return q(M,C,nh(k),Y);if(k.$$typeof===lt)return q(M,C,jc(M,k),Y);ih(M,k)}return null}function F(M,C,k,Y,ut){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return M=M.get(k)||null,E(C,M,""+Y,ut);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return M=M.get(Y.key===null?k:Y.key)||null,I(C,M,Y,ut);case U:return M=M.get(Y.key===null?k:Y.key)||null,z(C,M,Y,ut);case S:var Vt=Y._init;return Y=Vt(Y._payload),F(M,C,k,Y,ut)}if(fe(Y)||P(Y))return M=M.get(k)||null,Q(C,M,Y,ut,null);if(typeof Y.then=="function")return F(M,C,k,nh(Y),ut);if(Y.$$typeof===lt)return F(M,C,k,jc(C,Y),ut);ih(C,Y)}return null}function Et(M,C,k,Y){for(var ut=null,Vt=null,dt=C,vt=C=0,ze=null;dt!==null&&vt<k.length;vt++){dt.index>vt?(ze=dt,dt=null):ze=dt.sibling;var kt=q(M,dt,k[vt],Y);if(kt===null){dt===null&&(dt=ze);break}n&&dt&&kt.alternate===null&&i(M,dt),C=d(kt,C,vt),Vt===null?ut=kt:Vt.sibling=kt,Vt=kt,dt=ze}if(vt===k.length)return a(M,dt),Ft&&Ls(M,vt),ut;if(dt===null){for(;vt<k.length;vt++)dt=X(M,k[vt],Y),dt!==null&&(C=d(dt,C,vt),Vt===null?ut=dt:Vt.sibling=dt,Vt=dt);return Ft&&Ls(M,vt),ut}for(dt=l(dt);vt<k.length;vt++)ze=F(dt,M,vt,k[vt],Y),ze!==null&&(n&&ze.alternate!==null&&dt.delete(ze.key===null?vt:ze.key),C=d(ze,C,vt),Vt===null?ut=ze:Vt.sibling=ze,Vt=ze);return n&&dt.forEach(function(Lr){return i(M,Lr)}),Ft&&Ls(M,vt),ut}function yt(M,C,k,Y){if(k==null)throw Error(r(151));for(var ut=null,Vt=null,dt=C,vt=C=0,ze=null,kt=k.next();dt!==null&&!kt.done;vt++,kt=k.next()){dt.index>vt?(ze=dt,dt=null):ze=dt.sibling;var Lr=q(M,dt,kt.value,Y);if(Lr===null){dt===null&&(dt=ze);break}n&&dt&&Lr.alternate===null&&i(M,dt),C=d(Lr,C,vt),Vt===null?ut=Lr:Vt.sibling=Lr,Vt=Lr,dt=ze}if(kt.done)return a(M,dt),Ft&&Ls(M,vt),ut;if(dt===null){for(;!kt.done;vt++,kt=k.next())kt=X(M,kt.value,Y),kt!==null&&(C=d(kt,C,vt),Vt===null?ut=kt:Vt.sibling=kt,Vt=kt);return Ft&&Ls(M,vt),ut}for(dt=l(dt);!kt.done;vt++,kt=k.next())kt=F(dt,M,vt,kt.value,Y),kt!==null&&(n&&kt.alternate!==null&&dt.delete(kt.key===null?vt:kt.key),C=d(kt,C,vt),Vt===null?ut=kt:Vt.sibling=kt,Vt=kt);return n&&dt.forEach(function(Xw){return i(M,Xw)}),Ft&&Ls(M,vt),ut}function Wt(M,C,k,Y){if(typeof k=="object"&&k!==null&&k.type===K&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case w:t:{for(var ut=k.key;C!==null;){if(C.key===ut){if(ut=k.type,ut===K){if(C.tag===7){a(M,C.sibling),Y=f(C,k.props.children),Y.return=M,M=Y;break t}}else if(C.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&Cy(ut)===C.type){a(M,C.sibling),Y=f(C,k.props),Ql(Y,k),Y.return=M,M=Y;break t}a(M,C);break}else i(M,C);C=C.sibling}k.type===K?(Y=Ps(k.props.children,M.mode,Y,k.key),Y.return=M,M=Y):(Y=kc(k.type,k.key,k.props,null,M.mode,Y),Ql(Y,k),Y.return=M,M=Y)}return v(M);case U:t:{for(ut=k.key;C!==null;){if(C.key===ut)if(C.tag===4&&C.stateNode.containerInfo===k.containerInfo&&C.stateNode.implementation===k.implementation){a(M,C.sibling),Y=f(C,k.children||[]),Y.return=M,M=Y;break t}else{a(M,C);break}else i(M,C);C=C.sibling}Y=_d(k,M.mode,Y),Y.return=M,M=Y}return v(M);case S:return ut=k._init,k=ut(k._payload),Wt(M,C,k,Y)}if(fe(k))return Et(M,C,k,Y);if(P(k)){if(ut=P(k),typeof ut!="function")throw Error(r(150));return k=ut.call(k),yt(M,C,k,Y)}if(typeof k.then=="function")return Wt(M,C,nh(k),Y);if(k.$$typeof===lt)return Wt(M,C,jc(M,k),Y);ih(M,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,C!==null&&C.tag===6?(a(M,C.sibling),Y=f(C,k),Y.return=M,M=Y):(a(M,C),Y=pd(k,M.mode,Y),Y.return=M,M=Y),v(M)):a(M,C)}return function(M,C,k,Y){try{Hl=0;var ut=Wt(M,C,k,Y);return Ja=null,ut}catch(dt){if(dt===Ul||dt===Hc)throw dt;var Vt=bn(29,dt,null,M.mode);return Vt.lanes=Y,Vt.return=M,Vt}finally{}}}var to=xy(!0),Ny=xy(!1),qn=W(null),di=null;function Ar(n){var i=n.alternate;et(Oe,Oe.current&1),et(qn,n),di===null&&(i===null||Xa.current!==null||i.memoizedState!==null)&&(di=n)}function Oy(n){if(n.tag===22){if(et(Oe,Oe.current),et(qn,n),di===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(di=n)}}else br()}function br(){et(Oe,Oe.current),et(qn,qn.current)}function Hi(n){at(qn),di===n&&(di=null),at(Oe)}var Oe=W(0);function rh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||km(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function $d(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Zd={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=vr(l);f.payload=i,a!=null&&(f.callback=a),i=Tr(n,f,l),i!==null&&(Dn(i,n,l),Bl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=vr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Tr(n,f,l),i!==null&&(Dn(i,n,l),Bl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Rn(),l=vr(a);l.tag=2,i!=null&&(l.callback=i),i=Tr(n,l,a),i!==null&&(Dn(i,n,a),Bl(i,n,a))}};function My(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Dl(a,l)||!Dl(f,d):!0}function Py(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Zd.enqueueReplaceState(i,i.state,null)}function Gs(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var sh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Uy(n){sh(n)}function Ly(n){console.error(n)}function By(n){sh(n)}function ah(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function ky(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Wd(n,i,a){return a=vr(a),a.tag=3,a.payload={element:null},a.callback=function(){ah(n,i)},a}function zy(n){return n=vr(n),n.tag=3,n}function qy(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){ky(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){ky(i,a,l),typeof f!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function XS(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ol(i,a,f,!0),a=qn.current,a!==null){switch(a.tag){case 13:return di===null?Am():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Sm(n,l,f)),!1;case 22:return a.flags|=65536,l===Rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Sm(n,l,f)),!1}throw Error(r(435,a.tag))}return Sm(n,l,f),Am(),!1}if(Ft)return i=qn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Td&&(n=Error(r(422),{cause:l}),Nl(Ln(n,a)))):(l!==Td&&(i=Error(r(423),{cause:l}),Nl(Ln(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Ln(l,a),f=Wd(n.stateNode,l,f),Cd(n,f),ge!==4&&(ge=2)),!1;var d=Error(r(520),{cause:l});if(d=Ln(d,a),Jl===null?Jl=[d]:Jl.push(d),ge!==4&&(ge=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Wd(a.stateNode,l,n),Cd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Vr===null||!Vr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=zy(f),qy(f,n,a,l),Cd(a,f),!1}a=a.return}while(a!==null);return!1}var Fy=Error(r(461)),Be=!1;function Qe(n,i,a,l){i.child=n===null?Ny(i,null,a,l):to(i,n.child,a,l)}function jy(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return qs(i),l=Pd(n,i,a,v,d,f),E=Ud(),n!==null&&!Be?(Ld(n,i,f),Qi(n,i,f)):(Ft&&E&&yd(i),i.flags|=1,Qe(n,i,l,f),i.child)}function Gy(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!gd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Hy(n,i,d,l,f)):(n=kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!am(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Dl,a(v,l)&&n.ref===i.ref)return Qi(n,i,f)}return i.flags|=1,n=ki(d,l),n.ref=i.ref,n.return=i,i.child=n}function Hy(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Dl(d,l)&&n.ref===i.ref)if(Be=!1,i.pendingProps=l=d,am(n,f))(n.flags&131072)!==0&&(Be=!0);else return i.lanes=n.lanes,Qi(n,i,f)}return Jd(n,i,a,l,f)}function Qy(n,i,a){var l=i.pendingProps,f=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(f=i.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ky(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Gc(i,d!==null?d.cachePool:null),d!==null?H_(i,d):Nd(),Oy(i);else return i.lanes=i.childLanes=536870912,Ky(n,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Gc(i,d.cachePool),H_(i,d),br(),i.memoizedState=null):(n!==null&&Gc(i,null),Nd(),br());return Qe(n,i,f,a),i.child}function Ky(n,i,a,l){var f=Id();return f=f===null?null:{parent:Ne._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Gc(i,null),Nd(),Oy(i),n!==null&&Ol(n,i,l,!0),null}function oh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Jd(n,i,a,l,f){return qs(i),a=Pd(n,i,a,l,void 0,f),l=Ud(),n!==null&&!Be?(Ld(n,i,f),Qi(n,i,f)):(Ft&&l&&yd(i),i.flags|=1,Qe(n,i,a,f),i.child)}function Yy(n,i,a,l,f,d){return qs(i),i.updateQueue=null,a=K_(i,l,a,f),Q_(n),l=Ud(),n!==null&&!Be?(Ld(n,i,d),Qi(n,i,d)):(Ft&&l&&yd(i),i.flags|=1,Qe(n,i,a,d),i.child)}function Xy(n,i,a,l,f){if(qs(i),i.stateNode===null){var d=Ga,v=a.contextType;typeof v=="object"&&v!==null&&(d=Je(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Zd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Dd(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Je(v):Ga,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&($d(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Zd.enqueueReplaceState(d,d.state,null),zl(i,l,d,f),kl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var E=i.memoizedProps,I=Gs(a,E);d.props=I;var z=d.context,Q=a.contextType;v=Ga,typeof Q=="object"&&Q!==null&&(v=Je(Q));var X=a.getDerivedStateFromProps;Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||z!==v)&&Py(i,d,l,v),yr=!1;var q=i.memoizedState;d.state=q,zl(i,l,d,f),kl(),z=i.memoizedState,E||q!==z||yr?(typeof X=="function"&&($d(i,a,X,l),z=i.memoizedState),(I=yr||My(i,a,I,l,q,z,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Vd(n,i),v=i.memoizedProps,Q=Gs(a,v),d.props=Q,X=i.pendingProps,q=d.context,z=a.contextType,I=Ga,typeof z=="object"&&z!==null&&(I=Je(z)),E=a.getDerivedStateFromProps,(z=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||q!==I)&&Py(i,d,l,I),yr=!1,q=i.memoizedState,d.state=q,zl(i,l,d,f),kl();var F=i.memoizedState;v!==X||q!==F||yr||n!==null&&n.dependencies!==null&&Fc(n.dependencies)?(typeof E=="function"&&($d(i,a,E,l),F=i.memoizedState),(Q=yr||My(i,a,Q,l,q,F,I)||n!==null&&n.dependencies!==null&&Fc(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=I,l=Q):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,oh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=to(i,n.child,null,f),i.child=to(i,null,a,f)):Qe(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Qi(n,i,f),n}function $y(n,i,a,l){return xl(),i.flags|=256,Qe(n,i,a,l),i.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(n){return{baseLanes:n,cachePool:L_()}}function nm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Fn),n}function Zy(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Oe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ft){if(f?Ar(i):br(),Ft){var E=me,I;if(I=E){t:{for(I=E,E=fi;I.nodeType!==8;){if(!E){E=null;break t}if(I=Zn(I.nextSibling),I===null){E=null;break t}}E=I}E!==null?(i.memoizedState={dehydrated:E,treeContext:Us!==null?{id:zi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},I=bn(18,null,null,0),I.stateNode=E,I.return=i,i.child=I,un=i,me=null,I=!0):I=!1}I||ks(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return km(E)?i.lanes=32:i.lanes=536870912,null;Hi(i)}return E=l.children,l=l.fallback,f?(br(),f=i.mode,E=lh({mode:"hidden",children:E},f),l=Ps(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,f=i.child,f.memoizedState=em(a),f.childLanes=nm(n,v,a),i.memoizedState=tm,l):(Ar(i),im(i,E))}if(I=n.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(d)i.flags&256?(Ar(i),i.flags&=-257,i=rm(n,i,a)):i.memoizedState!==null?(br(),i.child=n.child,i.flags|=128,i=null):(br(),f=l.fallback,E=i.mode,l=lh({mode:"visible",children:l.children},E),f=Ps(f,E,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,to(i,n.child,null,a),l=i.child,l.memoizedState=em(a),l.childLanes=nm(n,v,a),i.memoizedState=tm,i=f);else if(Ar(i),km(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(r(419)),l.stack="",l.digest=v,Nl({value:l,source:null,stack:null}),i=rm(n,i,a)}else if(Be||Ol(n,i,a,!1),v=(a&n.childLanes)!==0,Be||v){if(v=ee,v!==null&&(l=a&-a,l=(l&42)!==0?1:cr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,ja(n,l),Dn(v,n,l),Fy;E.data==="$?"||Am(),i=rm(n,i,a)}else E.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=I.treeContext,me=Zn(E.nextSibling),un=i,Ft=!0,Bs=null,fi=!1,n!==null&&(kn[zn++]=zi,kn[zn++]=qi,kn[zn++]=Us,zi=n.id,qi=n.overflow,Us=i),i=im(i,l.children),i.flags|=4096);return i}return f?(br(),f=l.fallback,E=i.mode,I=n.child,z=I.sibling,l=ki(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,z!==null?f=ki(z,f):(f=Ps(f,E,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,E=n.child.memoizedState,E===null?E=em(a):(I=E.cachePool,I!==null?(z=Ne._currentValue,I=I.parent!==z?{parent:z,pool:z}:I):I=L_(),E={baseLanes:E.baseLanes|a,cachePool:I}),f.memoizedState=E,f.childLanes=nm(n,v,a),i.memoizedState=tm,l):(Ar(i),a=n.child,n=a.sibling,a=ki(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function im(n,i){return i=lh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function lh(n,i){return n=bn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function rm(n,i,a){return to(i,n.child,null,a),n=im(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Wy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Ad(n.return,i,a)}function sm(n,i,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function Jy(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(Qe(n,i,l.children,a),l=Oe.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wy(n,a,i);else if(n.tag===19)Wy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(et(Oe,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&rh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),sm(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&rh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}sm(i,!0,a,null,d);break;case"together":sm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Dr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Ol(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=ki(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ki(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function am(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Fc(n)))}function $S(n,i,a){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),_r(i,Ne,n.memoizedState.cache),xl();break;case 27:case 5:ur(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:_r(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ar(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Zy(n,i,a):(Ar(i),n=Qi(n,i,a),n!==null?n.sibling:null);Ar(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ol(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Jy(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),et(Oe,Oe.current),l)break;return null;case 22:case 23:return i.lanes=0,Qy(n,i,a);case 24:_r(i,Ne,n.memoizedState.cache)}return Qi(n,i,a)}function tv(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Be=!0;else{if(!am(n,a)&&(i.flags&128)===0)return Be=!1,$S(n,i,a);Be=(n.flags&131072)!==0}else Be=!1,Ft&&(i.flags&1048576)!==0&&C_(i,qc,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")gd(l)?(n=Gs(l,n),i.tag=1,i=Xy(null,i,l,n,a)):(i.tag=0,i=Jd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===St){i.tag=11,i=jy(null,i,l,n,a);break t}else if(f===x){i.tag=14,i=Gy(null,i,l,n,a);break t}}throw i=je(l)||l,Error(r(306,i,""))}}return i;case 0:return Jd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Gs(l,i.pendingProps),Xy(n,i,l,f,a);case 3:t:{if(te(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Vd(n,i),zl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,_r(i,Ne,l),l!==d.cache&&bd(i,[Ne],a,!0),kl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=$y(n,i,l,a);break t}else if(l!==f){f=Ln(Error(r(424)),i),Nl(f),i=$y(n,i,l,a);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(me=Zn(n.firstChild),un=i,Ft=!0,Bs=null,fi=!0,a=Ny(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xl(),l===f){i=Qi(n,i,a);break t}Qe(n,i,l,a)}i=i.child}return i;case 26:return oh(n,i),n===null?(a=rT(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ft||(a=i.type,n=i.pendingProps,l=Ah(bt.current).createElement(a),l[Ve]=i,l[be]=n,Ye(l,a,n),_e(l),i.stateNode=l):i.memoizedState=rT(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ur(i),n===null&&Ft&&(l=i.stateNode=eT(i.type,i.pendingProps,bt.current),un=i,fi=!0,f=me,Nr(i.type)?(zm=f,me=Zn(l.firstChild)):me=f),Qe(n,i,i.pendingProps.children,a),oh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ft&&((f=l=me)&&(l=Sw(l,i.type,i.pendingProps,fi),l!==null?(i.stateNode=l,un=i,me=Zn(l.firstChild),fi=!1,f=!0):f=!1),f||ks(i)),ur(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,Um(f,d)?l=null:v!==null&&Um(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Pd(n,i,FS,null,null,a),lu._currentValue=f),oh(n,i),Qe(n,i,l,a),i.child;case 6:return n===null&&Ft&&((n=a=me)&&(a=ww(a,i.pendingProps,fi),a!==null?(i.stateNode=a,un=i,me=null,n=!0):n=!1),n||ks(i)),null;case 13:return Zy(n,i,a);case 4:return te(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=to(i,null,l,a):Qe(n,i,l,a),i.child;case 11:return jy(n,i,i.type,i.pendingProps,a);case 7:return Qe(n,i,i.pendingProps,a),i.child;case 8:return Qe(n,i,i.pendingProps.children,a),i.child;case 12:return Qe(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,_r(i,i.type,l.value),Qe(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,qs(i),f=Je(f),l=l(f),i.flags|=1,Qe(n,i,l,a),i.child;case 14:return Gy(n,i,i.type,i.pendingProps,a);case 15:return Hy(n,i,i.type,i.pendingProps,a);case 19:return Jy(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=lh(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=ki(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Qy(n,i,a);case 24:return qs(i),l=Je(Ne),n===null?(f=Id(),f===null&&(f=ee,d=Sd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Dd(i),_r(i,Ne,f)):((n.lanes&a)!==0&&(Vd(n,i),zl(i,null,null,a),kl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),_r(i,Ne,l)):(l=d.cache,_r(i,Ne,l),l!==f.cache&&bd(i,[Ne],a,!0))),Qe(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ki(n){n.flags|=4}function ev(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!uT(i)){if(i=qn.current,i!==null&&((Lt&4194048)===Lt?di!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==di))throw Ll=Rd,B_;n.flags|=8192}}function uh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?cl():536870912,n.lanes|=i,ro|=i)}function Kl(n,i){if(!Ft)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ce(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function ZS(n,i,a){var l=i.pendingProps;switch(vd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(i),null;case 1:return ce(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ji(Ne),ti(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Cl(i)?Ki(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,O_())),ce(i),null;case 26:return a=i.memoizedState,n===null?(Ki(i),a!==null?(ce(i),ev(i,a)):(ce(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Ki(i),ce(i),ev(i,a)):(ce(i),i.flags&=-16777217):(n.memoizedProps!==l&&Ki(i),ce(i),i.flags&=-16777217),null;case 27:Ii(i),a=bt.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}n=_t.current,Cl(i)?x_(i):(n=eT(f,l,a),i.stateNode=n,Ki(i))}return ce(i),null;case 5:if(Ii(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ce(i),null}if(n=_t.current,Cl(i))x_(i);else{switch(f=Ah(bt.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ve]=i,n[be]=l;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch(Ye(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Ki(i)}}return ce(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=bt.current,Cl(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=un,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ve]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yv(n.nodeValue,a)),n||ks(i)}else n=Ah(n).createTextNode(l),n[Ve]=i,i.stateNode=n}return ce(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Cl(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ve]=i}else xl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ce(i),f=!1}else f=O_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Hi(i),i):(Hi(i),null)}if(Hi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),uh(i,i.updateQueue),ce(i),null;case 4:return ti(),n===null&&xm(i.stateNode.containerInfo),ce(i),null;case 10:return ji(i.type),ce(i),null;case 19:if(at(Oe),f=i.memoizedState,f===null)return ce(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)Kl(f,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=rh(n),d!==null){for(i.flags|=128,Kl(f,!1),n=d.updateQueue,i.updateQueue=n,uh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)V_(a,n),a=a.sibling;return et(Oe,Oe.current&1|2),i.child}n=n.sibling}f.tail!==null&&xn()>fh&&(i.flags|=128,l=!0,Kl(f,!1),i.lanes=4194304)}else{if(!l)if(n=rh(d),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,uh(i,n),Kl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Ft)return ce(i),null}else 2*xn()-f.renderingStartTime>fh&&a!==536870912&&(i.flags|=128,l=!0,Kl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(n=f.last,n!==null?n.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=xn(),i.sibling=null,n=Oe.current,et(Oe,l?n&1|2:n&1),i):(ce(i),null);case 22:case 23:return Hi(i),Od(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ce(i),i.subtreeFlags&6&&(i.flags|=8192)):ce(i),a=i.updateQueue,a!==null&&uh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&at(Fs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(Ne),ce(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function WS(n,i){switch(vd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ji(Ne),ti(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ii(i),null;case 13:if(Hi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));xl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return at(Oe),null;case 4:return ti(),null;case 10:return ji(i.type),null;case 22:case 23:return Hi(i),Od(),n!==null&&at(Fs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ji(Ne),null;case 25:return null;default:return null}}function nv(n,i){switch(vd(i),i.tag){case 3:ji(Ne),ti();break;case 26:case 27:case 5:Ii(i);break;case 4:ti();break;case 13:Hi(i);break;case 19:at(Oe);break;case 10:ji(i.type);break;case 22:case 23:Hi(i),Od(),n!==null&&at(Fs);break;case 24:ji(Ne)}}function Yl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(E){Jt(i,i.return,E)}}function Sr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=i;var I=a,z=E;try{z()}catch(Q){Jt(f,I,Q)}}}l=l.next}while(l!==d)}}catch(Q){Jt(i,i.return,Q)}}function iv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{G_(i,a)}catch(l){Jt(n,n.return,l)}}}function rv(n,i,a){a.props=Gs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Jt(n,i,l)}}function Xl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Jt(n,i,f)}}function mi(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Jt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Jt(n,i,f)}else a.current=null}function sv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Jt(n,n.return,f)}}function om(n,i,a){try{var l=n.stateNode;vw(l,n.type,a,i),l[be]=i}catch(f){Jt(n,n.return,f)}}function av(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Nr(n.type)||n.tag===4}function lm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||av(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Nr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function um(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Eh));else if(l!==4&&(l===27&&Nr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(um(n,i,a),n=n.sibling;n!==null;)um(n,i,a),n=n.sibling}function ch(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Nr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ch(n,i,a),n=n.sibling;n!==null;)ch(n,i,a),n=n.sibling}function ov(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Ye(i,l,a),i[Ve]=n,i[be]=a}catch(d){Jt(n,n.return,d)}}var Yi=!1,ve=!1,cm=!1,lv=typeof WeakSet=="function"?WeakSet:Set,ke=null;function JS(n,i){if(n=n.containerInfo,Mm=Dh,n=v_(n),ld(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,I=-1,z=0,Q=0,X=n,q=null;e:for(;;){for(var F;X!==a||f!==0&&X.nodeType!==3||(E=v+f),X!==d||l!==0&&X.nodeType!==3||(I=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(F=X.firstChild)!==null;)q=X,X=F;for(;;){if(X===n)break e;if(q===a&&++z===f&&(E=v),q===d&&++Q===l&&(I=v),(F=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=F}a=E===-1||I===-1?null:{start:E,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pm={focusedElem:n,selectionRange:a},Dh=!1,ke=i;ke!==null;)if(i=ke,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,ke=n;else for(;ke!==null;){switch(i=ke,d=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Et=Gs(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Et,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(yt){Jt(a,a.return,yt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Bm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Bm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,ke=n;break}ke=i.return}}function uv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:wr(n,a),l&4&&Yl(5,a);break;case 1:if(wr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var f=Gs(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}l&64&&iv(a),l&512&&Xl(a,a.return);break;case 3:if(wr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{G_(n,i)}catch(v){Jt(a,a.return,v)}}break;case 27:i===null&&l&4&&ov(a);case 26:case 5:wr(n,a),i===null&&l&4&&sv(a),l&512&&Xl(a,a.return);break;case 12:wr(n,a);break;case 13:wr(n,a),l&4&&fv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=lw.bind(null,a),Iw(n,a))));break;case 22:if(l=a.memoizedState!==null||Yi,!l){i=i!==null&&i.memoizedState!==null||ve,f=Yi;var d=ve;Yi=l,(ve=i)&&!d?Ir(n,a,(a.subtreeFlags&8772)!==0):wr(n,a),Yi=f,ve=d}break;case 30:break;default:wr(n,a)}}function cv(n){var i=n.alternate;i!==null&&(n.alternate=null,cv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&dr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var se=null,gn=!1;function Xi(n,i,a){for(a=a.child;a!==null;)hv(n,i,a),a=a.sibling}function hv(n,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(de,a)}catch{}switch(a.tag){case 26:ve||mi(a,i),Xi(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ve||mi(a,i);var l=se,f=gn;Nr(a.type)&&(se=a.stateNode,gn=!1),Xi(n,i,a),ru(a.stateNode),se=l,gn=f;break;case 5:ve||mi(a,i);case 6:if(l=se,f=gn,se=null,Xi(n,i,a),se=l,gn=f,se!==null)if(gn)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(d){Jt(a,i,d)}else try{se.removeChild(a.stateNode)}catch(d){Jt(a,i,d)}break;case 18:se!==null&&(gn?(n=se,Jv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),fu(n)):Jv(se,a.stateNode));break;case 4:l=se,f=gn,se=a.stateNode.containerInfo,gn=!0,Xi(n,i,a),se=l,gn=f;break;case 0:case 11:case 14:case 15:ve||Sr(2,a,i),ve||Sr(4,a,i),Xi(n,i,a);break;case 1:ve||(mi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&rv(a,i,l)),Xi(n,i,a);break;case 21:Xi(n,i,a);break;case 22:ve=(l=ve)||a.memoizedState!==null,Xi(n,i,a),ve=l;break;default:Xi(n,i,a)}}function fv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fu(n)}catch(a){Jt(i,i.return,a)}}function tw(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new lv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new lv),i;default:throw Error(r(435,n.tag))}}function hm(n,i){var a=tw(n);i.forEach(function(l){var f=uw.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Sn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(Nr(E.type)){se=E.stateNode,gn=!1;break t}break;case 5:se=E.stateNode,gn=!1;break t;case 3:case 4:se=E.stateNode.containerInfo,gn=!0;break t}E=E.return}if(se===null)throw Error(r(160));hv(d,v,f),se=null,gn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)dv(i,n),i=i.sibling}var $n=null;function dv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Sn(i,n),wn(n),l&4&&(Sr(3,n,n.return),Yl(3,n),Sr(5,n,n.return));break;case 1:Sn(i,n),wn(n),l&512&&(ve||a===null||mi(a,a.return)),l&64&&Yi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=$n;if(Sn(i,n),wn(n),l&512&&(ve||a===null||mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[vs]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Ye(d,l,a),d[Ve]=n,_e(d),l=d;break t;case"link":var v=oT("link","href",f).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=f.createElement(l),Ye(d,l,a),f.head.appendChild(d);break;case"meta":if(v=oT("meta","content",f).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=f.createElement(l),Ye(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ve]=n,_e(d),l=d}n.stateNode=l}else lT(f,n.type,n.stateNode);else n.stateNode=aT(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?lT(f,n.type,n.stateNode):aT(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&om(n,n.memoizedProps,a.memoizedProps)}break;case 27:Sn(i,n),wn(n),l&512&&(ve||a===null||mi(a,a.return)),a!==null&&l&4&&om(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Sn(i,n),wn(n),l&512&&(ve||a===null||mi(a,a.return)),n.flags&32){f=n.stateNode;try{On(f,"")}catch(F){Jt(n,n.return,F)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,om(n,f,a!==null?a.memoizedProps:f)),l&1024&&(cm=!0);break;case 6:if(Sn(i,n),wn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(F){Jt(n,n.return,F)}}break;case 3:if(wh=null,f=$n,$n=bh(i.containerInfo),Sn(i,n),$n=f,wn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fu(i.containerInfo)}catch(F){Jt(n,n.return,F)}cm&&(cm=!1,mv(n));break;case 4:l=$n,$n=bh(n.stateNode.containerInfo),Sn(i,n),wn(n),$n=l;break;case 12:Sn(i,n),wn(n);break;case 13:Sn(i,n),wn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_m=xn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,hm(n,l)));break;case 22:f=n.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,z=Yi,Q=ve;if(Yi=z||f,ve=Q||I,Sn(i,n),ve=Q,Yi=z,wn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||I||Yi||ve||Hs(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=I.stateNode;var X=I.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(F){Jt(I,I.return,F)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(F){Jt(I,I.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hm(n,a))));break;case 19:Sn(i,n),wn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,hm(n,l)));break;case 30:break;case 21:break;default:Sn(i,n),wn(n)}}function wn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(av(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=lm(n);ch(n,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(On(v,""),a.flags&=-33);var E=lm(n);ch(n,E,v);break;case 3:case 4:var I=a.stateNode.containerInfo,z=lm(n);um(n,z,I);break;default:throw Error(r(161))}}catch(Q){Jt(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function mv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;mv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function wr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)uv(n,i.alternate,i),i=i.sibling}function Hs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Sr(4,i,i.return),Hs(i);break;case 1:mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&rv(i,i.return,a),Hs(i);break;case 27:ru(i.stateNode);case 26:case 5:mi(i,i.return),Hs(i);break;case 22:i.memoizedState===null&&Hs(i);break;case 30:Hs(i);break;default:Hs(i)}n=n.sibling}}function Ir(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Ir(f,d,a),Yl(4,d);break;case 1:if(Ir(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Jt(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)j_(I[f],E)}catch(z){Jt(l,l.return,z)}}a&&v&64&&iv(d),Xl(d,d.return);break;case 27:ov(d);case 26:case 5:Ir(f,d,a),a&&l===null&&v&4&&sv(d),Xl(d,d.return);break;case 12:Ir(f,d,a);break;case 13:Ir(f,d,a),a&&v&4&&fv(f,d);break;case 22:d.memoizedState===null&&Ir(f,d,a),Xl(d,d.return);break;case 30:break;default:Ir(f,d,a)}i=i.sibling}}function fm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ml(a))}function dm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ml(n))}function gi(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gv(n,i,a,l),i=i.sibling}function gv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:gi(n,i,a,l),f&2048&&Yl(9,i);break;case 1:gi(n,i,a,l);break;case 3:gi(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ml(n)));break;case 12:if(f&2048){gi(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){Jt(i,i.return,I)}}else gi(n,i,a,l);break;case 13:gi(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?gi(n,i,a,l):$l(n,i):d._visibility&2?gi(n,i,a,l):(d._visibility|=2,eo(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&fm(v,i);break;case 24:gi(n,i,a,l),f&2048&&dm(i.alternate,i);break;default:gi(n,i,a,l)}}function eo(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=n,v=i,E=a,I=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:eo(d,v,E,I,f),Yl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?eo(d,v,E,I,f):$l(d,v):(Q._visibility|=2,eo(d,v,E,I,f)),f&&z&2048&&fm(v.alternate,v);break;case 24:eo(d,v,E,I,f),f&&z&2048&&dm(v.alternate,v);break;default:eo(d,v,E,I,f)}i=i.sibling}}function $l(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:$l(a,l),f&2048&&fm(l.alternate,l);break;case 24:$l(a,l),f&2048&&dm(l.alternate,l);break;default:$l(a,l)}i=i.sibling}}var Zl=8192;function no(n){if(n.subtreeFlags&Zl)for(n=n.child;n!==null;)pv(n),n=n.sibling}function pv(n){switch(n.tag){case 26:no(n),n.flags&Zl&&n.memoizedState!==null&&kw($n,n.memoizedState,n.memoizedProps);break;case 5:no(n);break;case 3:case 4:var i=$n;$n=bh(n.stateNode.containerInfo),no(n),$n=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Zl,Zl=16777216,no(n),Zl=i):no(n));break;default:no(n)}}function _v(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Wl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ke=l,vv(l,n)}_v(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)yv(n),n=n.sibling}function yv(n){switch(n.tag){case 0:case 11:case 15:Wl(n),n.flags&2048&&Sr(9,n,n.return);break;case 3:Wl(n);break;case 12:Wl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,hh(n)):Wl(n);break;default:Wl(n)}}function hh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];ke=l,vv(l,n)}_v(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Sr(8,i,i.return),hh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,hh(i));break;default:hh(i)}n=n.sibling}}function vv(n,i){for(;ke!==null;){var a=ke;switch(a.tag){case 0:case 11:case 15:Sr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ke=l;else t:for(a=n;ke!==null;){l=ke;var f=l.sibling,d=l.return;if(cv(l),l===a){ke=null;break t}if(f!==null){f.return=d,ke=f;break t}ke=d}}}var ew={getCacheForType:function(n){var i=Je(Ne),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},nw=typeof WeakMap=="function"?WeakMap:Map,Ht=0,ee=null,Ct=null,Lt=0,Qt=0,In=null,Rr=!1,io=!1,mm=!1,$i=0,ge=0,Dr=0,Qs=0,gm=0,Fn=0,ro=0,Jl=null,pn=null,pm=!1,_m=0,fh=1/0,dh=null,Vr=null,Ke=0,Cr=null,so=null,ao=0,ym=0,vm=null,Tv=null,tu=0,Tm=null;function Rn(){if((Ht&2)!==0&&Lt!==0)return Lt&-Lt;if(H.T!==null){var n=Ka;return n!==0?n:Rm()}return hr()}function Ev(){Fn===0&&(Fn=(Lt&536870912)===0||Ft?ul():536870912);var n=qn.current;return n!==null&&(n.flags|=32),Fn}function Dn(n,i,a){(n===ee&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)&&(oo(n,0),xr(n,Lt,Fn,!1)),Di(n,a),((Ht&2)===0||n!==ee)&&(n===ee&&((Ht&2)===0&&(Qs|=a),ge===4&&xr(n,Lt,Fn,!1)),pi(n))}function Av(n,i,a){if((Ht&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||ys(n,i),f=l?sw(n,i):bm(n,i,!0),d=l;do{if(f===0){io&&!l&&xr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!iw(a)){f=bm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=n;f=Jl;var I=E.current.memoizedState.isDehydrated;if(I&&(oo(E,v).flags|=256),v=bm(E,v,!1),v!==2){if(mm&&!I){E.errorRecoveryDisabledLanes|=d,Qs|=d,f=4;break t}d=pn,pn=f,d!==null&&(pn===null?pn=d:pn.push.apply(pn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){oo(n,0),xr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:xr(l,i,Fn,!Rr);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=_m+300-xn(),10<f)){if(xr(l,i,Fn,!Rr),Sa(l,0,!0)!==0)break t;l.timeoutHandle=Zv(bv.bind(null,l,a,pn,dh,pm,i,Fn,Qs,ro,Rr,d,2,-0,0),f);break t}bv(l,a,pn,dh,pm,i,Fn,Qs,ro,Rr,d,0,-0,0)}}break}while(!0);pi(n)}function bv(n,i,a,l,f,d,v,E,I,z,Q,X,q,F){if(n.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:Bw},pv(i),X=zw(),X!==null)){n.cancelPendingCommit=X(Cv.bind(null,n,i,d,a,l,f,v,E,I,Q,1,q,F)),xr(n,d,v,!z);return}Cv(n,i,d,a,l,f,v,E,I)}function iw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!An(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xr(n,i,a,l){i&=~gm,i&=~Qs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-We(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&ei(n,a,i)}function mh(){return(Ht&6)===0?(eu(0),!1):!0}function Em(){if(Ct!==null){if(Qt===0)var n=Ct.return;else n=Ct,Fi=zs=null,Bd(n),Ja=null,Hl=0,n=Ct;for(;n!==null;)nv(n.alternate,n),n=n.return;Ct=null}}function oo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Ew(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Em(),ee=n,Ct=a=ki(n.current,null),Lt=i,Qt=0,In=null,Rr=!1,io=ys(n,i),mm=!1,ro=Fn=gm=Qs=Dr=ge=0,pn=Jl=null,pm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-We(l),d=1<<f;i|=n[f],l&=~d}return $i=i,Uc(),a}function Sv(n,i){Rt=null,H.H=eh,i===Ul||i===Hc?(i=q_(),Qt=3):i===B_?(i=q_(),Qt=4):Qt=i===Fy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,In=i,Ct===null&&(ge=1,ah(n,Ln(i,n.current)))}function wv(){var n=H.H;return H.H=eh,n===null?eh:n}function Iv(){var n=H.A;return H.A=ew,n}function Am(){ge=4,Rr||(Lt&4194048)!==Lt&&qn.current!==null||(io=!0),(Dr&134217727)===0&&(Qs&134217727)===0||ee===null||xr(ee,Lt,Fn,!1)}function bm(n,i,a){var l=Ht;Ht|=2;var f=wv(),d=Iv();(ee!==n||Lt!==i)&&(dh=null,oo(n,i)),i=!1;var v=ge;t:do try{if(Qt!==0&&Ct!==null){var E=Ct,I=In;switch(Qt){case 8:Em(),v=6;break t;case 3:case 2:case 9:case 6:qn.current===null&&(i=!0);var z=Qt;if(Qt=0,In=null,lo(n,E,I,z),a&&io){v=0;break t}break;default:z=Qt,Qt=0,In=null,lo(n,E,I,z)}}rw(),v=ge;break}catch(Q){Sv(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Fi=zs=null,Ht=l,H.H=f,H.A=d,Ct===null&&(ee=null,Lt=0,Uc()),v}function rw(){for(;Ct!==null;)Rv(Ct)}function sw(n,i){var a=Ht;Ht|=2;var l=wv(),f=Iv();ee!==n||Lt!==i?(dh=null,fh=xn()+500,oo(n,i)):io=ys(n,i);t:do try{if(Qt!==0&&Ct!==null){i=Ct;var d=In;e:switch(Qt){case 1:Qt=0,In=null,lo(n,i,d,1);break;case 2:case 9:if(k_(d)){Qt=0,In=null,Dv(i);break}i=function(){Qt!==2&&Qt!==9||ee!==n||(Qt=7),pi(n)},d.then(i,i);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:k_(d)?(Qt=0,In=null,Dv(i)):(Qt=0,In=null,lo(n,i,d,7));break;case 5:var v=null;switch(Ct.tag){case 26:v=Ct.memoizedState;case 5:case 27:var E=Ct;if(!v||uT(v)){Qt=0,In=null;var I=E.sibling;if(I!==null)Ct=I;else{var z=E.return;z!==null?(Ct=z,gh(z)):Ct=null}break e}}Qt=0,In=null,lo(n,i,d,5);break;case 6:Qt=0,In=null,lo(n,i,d,6);break;case 8:Em(),ge=6;break t;default:throw Error(r(462))}}aw();break}catch(Q){Sv(n,Q)}while(!0);return Fi=zs=null,H.H=l,H.A=f,Ht=a,Ct!==null?0:(ee=null,Lt=0,Uc(),ge)}function aw(){for(;Ct!==null&&!sl();)Rv(Ct)}function Rv(n){var i=tv(n.alternate,n,$i);n.memoizedProps=n.pendingProps,i===null?gh(n):Ct=i}function Dv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Yy(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=Yy(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Bd(i);default:nv(a,i),i=Ct=V_(i,$i),i=tv(a,i,$i)}n.memoizedProps=n.pendingProps,i===null?gh(n):Ct=i}function lo(n,i,a,l){Fi=zs=null,Bd(i),Ja=null,Hl=0;var f=i.return;try{if(XS(n,f,i,a,Lt)){ge=1,ah(n,Ln(a,n.current)),Ct=null;return}}catch(d){if(f!==null)throw Ct=f,d;ge=1,ah(n,Ln(a,n.current)),Ct=null;return}i.flags&32768?(Ft||l===1?n=!0:io||(Lt&536870912)!==0?n=!1:(Rr=n=!0,(l===2||l===9||l===3||l===6)&&(l=qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vv(i,n)):gh(i)}function gh(n){var i=n;do{if((i.flags&32768)!==0){Vv(i,Rr);return}n=i.return;var a=ZS(i.alternate,i,$i);if(a!==null){Ct=a;return}if(i=i.sibling,i!==null){Ct=i;return}Ct=i=n}while(i!==null);ge===0&&(ge=5)}function Vv(n,i){do{var a=WS(n.alternate,n);if(a!==null){a.flags&=32767,Ct=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ct=n;return}Ct=n=a}while(n!==null);ge=6,Ct=null}function Cv(n,i,a,l,f,d,v,E,I){n.cancelPendingCommit=null;do ph();while(Ke!==0);if((Ht&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=dd,hl(n,a,d,v,E,I),n===ee&&(Ct=ee=null,Lt=0),so=i,Cr=n,ao=a,ym=d,vm=f,Tv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,cw(ms,function(){return Pv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,f=rt.p,rt.p=2,v=Ht,Ht|=4;try{JS(n,i,a)}finally{Ht=v,rt.p=f,H.T=l}}Ke=1,xv(),Nv(),Ov()}}function xv(){if(Ke===1){Ke=0;var n=Cr,i=so,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{dv(i,n);var d=Pm,v=v_(n.containerInfo),E=d.focusedElem,I=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&y_(E.ownerDocument.documentElement,E)){if(I!==null&&ld(E)){var z=I.start,Q=I.end;if(Q===void 0&&(Q=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var F=q.getSelection(),Et=E.textContent.length,yt=Math.min(I.start,Et),Wt=I.end===void 0?yt:Math.min(I.end,Et);!F.extend&&yt>Wt&&(v=Wt,Wt=yt,yt=v);var M=__(E,yt),C=__(E,Wt);if(M&&C&&(F.rangeCount!==1||F.anchorNode!==M.node||F.anchorOffset!==M.offset||F.focusNode!==C.node||F.focusOffset!==C.offset)){var k=X.createRange();k.setStart(M.node,M.offset),F.removeAllRanges(),yt>Wt?(F.addRange(k),F.extend(C.node,C.offset)):(k.setEnd(C.node,C.offset),F.addRange(k))}}}}for(X=[],F=E;F=F.parentNode;)F.nodeType===1&&X.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Y=X[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Dh=!!Mm,Pm=Mm=null}finally{Ht=f,rt.p=l,H.T=a}}n.current=i,Ke=2}}function Nv(){if(Ke===2){Ke=0;var n=Cr,i=so,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{uv(n,i.alternate,i)}finally{Ht=f,rt.p=l,H.T=a}}Ke=3}}function Ov(){if(Ke===4||Ke===3){Ke=0,hc();var n=Cr,i=so,a=ao,l=Tv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ke=5:(Ke=0,so=Cr=null,Mv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Vr=null),wa(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(de,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,f=rt.p,rt.p=2,H.T=null;try{for(var d=n.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{H.T=i,rt.p=f}}(ao&3)!==0&&ph(),pi(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===Tm?tu++:(tu=0,Tm=n):tu=0,eu(0)}}function Mv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ml(i)))}function ph(n){return xv(),Nv(),Ov(),Pv()}function Pv(){if(Ke!==5)return!1;var n=Cr,i=ym;ym=0;var a=wa(ao),l=H.T,f=rt.p;try{rt.p=32>a?32:a,H.T=null,a=vm,vm=null;var d=Cr,v=ao;if(Ke=0,so=Cr=null,ao=0,(Ht&6)!==0)throw Error(r(331));var E=Ht;if(Ht|=4,yv(d.current),gv(d,d.current,v,a),Ht=E,eu(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(de,d)}catch{}return!0}finally{rt.p=f,H.T=l,Mv(n,i)}}function Uv(n,i,a){i=Ln(a,i),i=Wd(n.stateNode,i,2),n=Tr(n,i,2),n!==null&&(Di(n,2),pi(n))}function Jt(n,i,a){if(n.tag===3)Uv(n,n,a);else for(;i!==null;){if(i.tag===3){Uv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Vr===null||!Vr.has(l))){n=Ln(a,n),a=zy(2),l=Tr(i,a,2),l!==null&&(qy(a,l,i,n),Di(l,2),pi(l));break}}i=i.return}}function Sm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new nw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(mm=!0,f.add(a),n=ow.bind(null,n,i,a),i.then(n,n))}function ow(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ee===n&&(Lt&a)===a&&(ge===4||ge===3&&(Lt&62914560)===Lt&&300>xn()-_m?(Ht&2)===0&&oo(n,0):gm|=a,ro===Lt&&(ro=0)),pi(n)}function Lv(n,i){i===0&&(i=cl()),n=ja(n,i),n!==null&&(Di(n,i),pi(n))}function lw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Lv(n,a)}function uw(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Lv(n,a)}function cw(n,i){return fs(n,i)}var _h=null,uo=null,wm=!1,yh=!1,Im=!1,Ks=0;function pi(n){n!==uo&&n.next===null&&(uo===null?_h=uo=n:uo=uo.next=n),yh=!0,wm||(wm=!0,fw())}function eu(n,i){if(!Im&&yh){Im=!0;do for(var a=!1,l=_h;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-We(42|n)+1)-1,d&=f&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,qv(l,d))}else d=Lt,d=Sa(l,l===ee?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ys(l,d)||(a=!0,qv(l,d));l=l.next}while(a);Im=!1}}function hw(){Bv()}function Bv(){yh=wm=!1;var n=0;Ks!==0&&(Tw()&&(n=Ks),Ks=0);for(var i=xn(),a=null,l=_h;l!==null;){var f=l.next,d=kv(l,i);d===0?(l.next=null,a===null?_h=f:a.next=f,f===null&&(uo=a)):(a=l,(n!==0||(d&3)!==0)&&(yh=!0)),l=f}eu(n)}function kv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-We(d),E=1<<v,I=f[v];I===-1?((E&a)===0||(E&l)!==0)&&(f[v]=ll(E,i)):I<=i&&(n.expiredLanes|=E),d&=~E}if(i=ee,a=Lt,a=Sa(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Qt===2||Qt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&ds(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ys(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&ds(l),wa(a)){case 2:case 8:a=Aa;break;case 32:a=ms;break;case 268435456:a=ba;break;default:a=ms}return l=zv.bind(null,n),a=fs(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&ds(l),n.callbackPriority=2,n.callbackNode=null,2}function zv(n,i){if(Ke!==0&&Ke!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(ph()&&n.callbackNode!==a)return null;var l=Lt;return l=Sa(n,n===ee?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Av(n,l,i),kv(n,xn()),n.callbackNode!=null&&n.callbackNode===a?zv.bind(null,n):null)}function qv(n,i){if(ph())return null;Av(n,i,!0)}function fw(){Aw(function(){(Ht&6)!==0?fs(al,hw):Bv()})}function Rm(){return Ks===0&&(Ks=ul()),Ks}function Fv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xa(""+n)}function jv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function dw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Fv((f[be]||null).action),v=l.submitter;v&&(i=(i=v[be]||null)?Fv(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new Na("action","action",null,l,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ks!==0){var I=v?jv(f,v):new FormData(f);Kd(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(E.preventDefault(),I=v?jv(f,v):new FormData(f),Kd(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var Dm=0;Dm<fd.length;Dm++){var Vm=fd[Dm],mw=Vm.toLowerCase(),gw=Vm[0].toUpperCase()+Vm.slice(1);Xn(mw,"on"+gw)}Xn(A_,"onAnimationEnd"),Xn(b_,"onAnimationIteration"),Xn(S_,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(NS,"onTransitionRun"),Xn(OS,"onTransitionStart"),Xn(MS,"onTransitionCancel"),Xn(w_,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function Gv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],I=E.instance,z=E.currentTarget;if(E=E.listener,I!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=z;try{d(f)}catch(Q){sh(Q)}f.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(E=l[v],I=E.instance,z=E.currentTarget,E=E.listener,I!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=z;try{d(f)}catch(Q){sh(Q)}f.currentTarget=null,d=I}}}}function xt(n,i){var a=i[dl];a===void 0&&(a=i[dl]=new Set);var l=n+"__bubble";a.has(l)||(Hv(i,n,2,!1),a.add(l))}function Cm(n,i,a){var l=0;i&&(l|=4),Hv(a,n,l,i)}var vh="_reactListening"+Math.random().toString(36).slice(2);function xm(n){if(!n[vh]){n[vh]=!0,ml.forEach(function(a){a!=="selectionchange"&&(pw.has(a)||Cm(a,!1,n),Cm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[vh]||(i[vh]=!0,Cm("selectionchange",!1,i))}}function Hv(n,i,a,l){switch(gT(i)){case 2:var f=jw;break;case 8:f=Gw;break;default:f=Hm}a=f.bind(null,i,a,n),f=void 0,!Pn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Nm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=Vi(E),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue t}E=E.parentNode}}l=l.return}Ec(function(){var z=d,Q=Mn(a),X=[];t:{var q=I_.get(n);if(q!==void 0){var F=Na,Et=n;switch(n){case"keypress":if(oi(a)===0)break t;case"keydown":case"keyup":F=Ba;break;case"focusin":Et="focus",F=Pa;break;case"focusout":Et="blur",F=Pa;break;case"beforeblur":case"afterblur":F=Pa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Vc;break;case A_:case b_:case S_:F=Ua;break;case w_:F=xc;break;case"scroll":case"scrollend":F=Ac;break;case"wheel":F=ka;break;case"copy":case"cut":case"paste":F=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Il;break;case"toggle":case"beforetoggle":F=Oc}var yt=(i&4)!==0,Wt=!yt&&(n==="scroll"||n==="scrollend"),M=yt?q!==null?q+"Capture":null:q;yt=[];for(var C=z,k;C!==null;){var Y=C;if(k=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||k===null||M===null||(Y=Is(C,M),Y!=null&&yt.push(iu(C,Y,k))),Wt)break;C=C.return}0<yt.length&&(q=new F(q,Et,null,a,Q),X.push({event:q,listeners:yt}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",q&&a!==Oi&&(Et=a.relatedTarget||a.fromElement)&&(Vi(Et)||Et[Nn]))break t;if((F||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,F?(Et=a.relatedTarget||a.toElement,F=z,Et=Et?Vi(Et):null,Et!==null&&(Wt=u(Et),yt=Et.tag,Et!==Wt||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(F=null,Et=z),F!==Et)){if(yt=Un,Y="onMouseLeave",M="onMouseEnter",C="mouse",(n==="pointerout"||n==="pointerover")&&(yt=Il,Y="onPointerLeave",M="onPointerEnter",C="pointer"),Wt=F==null?q:ii(F),k=Et==null?q:ii(Et),q=new yt(Y,C+"leave",F,a,Q),q.target=Wt,q.relatedTarget=k,Y=null,Vi(Q)===z&&(yt=new yt(M,C+"enter",Et,a,Q),yt.target=k,yt.relatedTarget=Wt,Y=yt),Wt=Y,F&&Et)e:{for(yt=F,M=Et,C=0,k=yt;k;k=co(k))C++;for(k=0,Y=M;Y;Y=co(Y))k++;for(;0<C-k;)yt=co(yt),C--;for(;0<k-C;)M=co(M),k--;for(;C--;){if(yt===M||M!==null&&yt===M.alternate)break e;yt=co(yt),M=co(M)}yt=null}else yt=null;F!==null&&Qv(X,q,F,yt,!1),Et!==null&&Wt!==null&&Qv(X,Wt,Et,yt,!0)}}t:{if(q=z?ii(z):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var ut=h_;else if(xe(q))if(f_)ut=VS;else{ut=RS;var Vt=IS}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&vl(z.elementType)&&(ut=h_):ut=DS;if(ut&&(ut=ut(n,z))){Bi(X,ut,a,Q);break t}Vt&&Vt(n,q,z),n==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&gr(q,"number",q.value)}switch(Vt=z?ii(z):window,n){case"focusin":(xe(Vt)||Vt.contentEditable==="true")&&(za=Vt,ud=z,Vl=null);break;case"focusout":Vl=ud=za=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,T_(X,a,Q);break;case"selectionchange":if(xS)break;case"keydown":case"keyup":T_(X,a,Q)}var dt;if(ci)t:{switch(n){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Pt?G(n,a)&&(vt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(y&&a.locale!=="ko"&&(Pt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Pt&&(dt=El()):(ai=Q,pr="value"in ai?ai.value:ai.textContent,Pt=!0)),Vt=Th(z,vt),0<Vt.length&&(vt=new Sl(vt,n,null,a,Q),X.push({event:vt,listeners:Vt}),dt?vt.data=dt:(dt=nt(a),dt!==null&&(vt.data=dt)))),(dt=p?Ce(n,a):Ut(n,a))&&(vt=Th(z,"onBeforeInput"),0<vt.length&&(Vt=new Sl("onBeforeInput","beforeinput",null,a,Q),X.push({event:Vt,listeners:vt}),Vt.data=dt)),dw(X,n,z,a,Q)}Gv(X,i)})}function iu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Th(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Is(n,a),f!=null&&l.unshift(iu(n,f,d)),f=Is(n,i),f!=null&&l.push(iu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function co(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Qv(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,I=E.alternate,z=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||z===null||(I=z,f?(z=Is(a,d),z!=null&&v.unshift(iu(a,z,I))):f||(z=Is(a,d),z!=null&&v.push(iu(a,z,I)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var _w=/\r\n?/g,yw=/\u0000|\uFFFD/g;function Kv(n){return(typeof n=="string"?n:""+n).replace(_w,`
`).replace(yw,"")}function Yv(n,i){return i=Kv(i),Kv(n)===i}function Eh(){}function Zt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||On(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&On(n,""+l);break;case"className":ri(n,"class",l);break;case"tabIndex":ri(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(n,a,l);break;case"style":yl(n,l,d);break;case"data":if(i!=="object"){ri(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=xa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Zt(n,i,"name",f.name,f,null),Zt(n,i,"formEncType",f.formEncType,f,null),Zt(n,i,"formMethod",f.formMethod,f,null),Zt(n,i,"formTarget",f.formTarget,f,null)):(Zt(n,i,"encType",f.encType,f,null),Zt(n,i,"method",f.method,f,null),Zt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=xa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Eh);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=xa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":xt("beforetoggle",n),xt("toggle",n),mr(n,"popover",l);break;case"xlinkActuate":Ge(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ge(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ge(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ge(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ge(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ge(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ge(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ge(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ge(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":mr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=nd.get(a)||a,mr(n,a,l))}}function Om(n,i,a,l,f,d){switch(a){case"style":yl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?On(n,l):(typeof l=="number"||typeof l=="bigint")&&On(n,""+l);break;case"onScroll":l!=null&&xt("scroll",n);break;case"onScrollEnd":l!=null&&xt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Eh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ia.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[be]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):mr(n,a,l)}}}function Ye(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",n),xt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(n,i,d,v,a,null)}}f&&Zt(n,i,"srcSet",a.srcSet,a,null),l&&Zt(n,i,"src",a.src,a,null);return;case"input":xt("invalid",n);var E=d=v=f=null,I=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":v=Q;break;case"checked":I=Q;break;case"defaultChecked":z=Q;break;case"value":d=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Zt(n,i,l,Q,a,null)}}bs(n,d,E,I,z,v,f,!1),Ca(n);return;case"select":xt("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Zt(n,i,f,E,a,null)}i=d,a=v,n.multiple=!!l,i!=null?Ni(n,!!l,i,!1):a!=null&&Ni(n,!!l,a,!0);return;case"textarea":xt("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Zt(n,i,v,E,a,null)}Ss(n,l,f,d),Ca(n);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(n,i,I,l,a,null)}return;case"dialog":xt("beforetoggle",n),xt("toggle",n),xt("cancel",n),xt("close",n);break;case"iframe":case"object":xt("load",n);break;case"video":case"audio":for(l=0;l<nu.length;l++)xt(nu[l],n);break;case"image":xt("error",n),xt("load",n);break;case"details":xt("toggle",n);break;case"embed":case"source":case"link":xt("error",n),xt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(n,i,z,l,a,null)}return;default:if(vl(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&Om(n,i,Q,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Zt(n,i,E,l,a,null))}function vw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,E=null,I=null,z=null,Q=null;for(F in a){var X=a[F];if(a.hasOwnProperty(F)&&X!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=X;default:l.hasOwnProperty(F)||Zt(n,i,F,null,l,X)}}for(var q in l){var F=l[q];if(X=a[q],l.hasOwnProperty(q)&&(F!=null||X!=null))switch(q){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":Q=F;break;case"value":v=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==X&&Zt(n,i,q,F,l,X)}}En(n,v,E,I,z,Q,d,f);return;case"select":F=v=E=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":F=I;default:l.hasOwnProperty(d)||Zt(n,i,d,null,l,I)}for(f in l)if(d=l[f],I=a[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==I&&Zt(n,i,f,d,l,I)}i=E,a=v,l=F,q!=null?Ni(n,!!a,q,!1):!!l!=!!a&&(i!=null?Ni(n,!!a,i,!0):Ni(n,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Zt(n,i,E,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":q=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Zt(n,i,v,f,l,d)}Xt(n,q,F);return;case"option":for(var Et in a)if(q=a[Et],a.hasOwnProperty(Et)&&q!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":n.selected=!1;break;default:Zt(n,i,Et,null,l,q)}for(I in l)if(q=l[I],F=a[I],l.hasOwnProperty(I)&&q!==F&&(q!=null||F!=null))switch(I){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Zt(n,i,I,q,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)q=a[yt],a.hasOwnProperty(yt)&&q!=null&&!l.hasOwnProperty(yt)&&Zt(n,i,yt,null,l,q);for(z in l)if(q=l[z],F=a[z],l.hasOwnProperty(z)&&q!==F&&(q!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Zt(n,i,z,q,l,F)}return;default:if(vl(i)){for(var Wt in a)q=a[Wt],a.hasOwnProperty(Wt)&&q!==void 0&&!l.hasOwnProperty(Wt)&&Om(n,i,Wt,void 0,l,q);for(Q in l)q=l[Q],F=a[Q],!l.hasOwnProperty(Q)||q===F||q===void 0&&F===void 0||Om(n,i,Q,q,l,F);return}}for(var M in a)q=a[M],a.hasOwnProperty(M)&&q!=null&&!l.hasOwnProperty(M)&&Zt(n,i,M,null,l,q);for(X in l)q=l[X],F=a[X],!l.hasOwnProperty(X)||q===F||q==null&&F==null||Zt(n,i,X,q,l,F)}var Mm=null,Pm=null;function Ah(n){return n.nodeType===9?n:n.ownerDocument}function Xv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $v(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Um(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Lm=null;function Tw(){var n=window.event;return n&&n.type==="popstate"?n===Lm?!1:(Lm=n,!0):(Lm=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(n){return Wv.resolve(null).then(n).catch(bw)}:Zv;function bw(n){setTimeout(function(){throw n})}function Nr(n){return n==="head"}function Jv(n,i){var a=i,l=0,f=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=n.ownerDocument;if(a&1&&ru(v.documentElement),a&2&&ru(v.body),a&4)for(a=v.head,ru(a),v=a.firstChild;v;){var E=v.nextSibling,I=v.nodeName;v[vs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(f===0){n.removeChild(d),fu(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);fu(i)}function Bm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bm(a),dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Sw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[vs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Zn(n.nextSibling),n===null)break}return null}function ww(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Zn(n.nextSibling),n===null))return null;return n}function km(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Iw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Zn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var zm=null;function tT(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function eT(n,i,a){switch(i=Ah(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function ru(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);dr(n)}var jn=new Map,nT=new Set;function bh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zi=rt.d;rt.d={f:Rw,r:Dw,D:Vw,C:Cw,L:xw,m:Nw,X:Mw,S:Ow,M:Pw};function Rw(){var n=Zi.f(),i=mh();return n||i}function Dw(n){var i=ni(n);i!==null&&i.tag===5&&i.type==="form"?Ay(i):Zi.r(n)}var ho=typeof document>"u"?null:document;function iT(n,i,a){var l=ho;if(l&&typeof i=="string"&&i){var f=Se(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),nT.has(f)||(nT.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Ye(i,"link",n),_e(i),l.head.appendChild(i)))}}function Vw(n){Zi.D(n),iT("dns-prefetch",n,null)}function Cw(n,i){Zi.C(n,i),iT("preconnect",n,i)}function xw(n,i,a){Zi.L(n,i,a);var l=ho;if(l&&n&&i){var f='link[rel="preload"][as="'+Se(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Se(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Se(a.imageSizes)+'"]')):f+='[href="'+Se(n)+'"]';var d=f;switch(i){case"style":d=fo(n);break;case"script":d=mo(n)}jn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),jn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(su(d))||i==="script"&&l.querySelector(au(d))||(i=l.createElement("link"),Ye(i,"link",n),_e(i),l.head.appendChild(i)))}}function Nw(n,i){Zi.m(n,i);var a=ho;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Se(l)+'"][href="'+Se(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=mo(n)}if(!jn.has(d)&&(n=T({rel:"modulepreload",href:n},i),jn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(au(d)))return}l=a.createElement("link"),Ye(l,"link",n),_e(l),a.head.appendChild(l)}}}function Ow(n,i,a){Zi.S(n,i,a);var l=ho;if(l&&n){var f=an(l).hoistableStyles,d=fo(n);i=i||"default";var v=f.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(su(d)))E.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=jn.get(d))&&qm(n,a);var I=v=l.createElement("link");_e(I),Ye(I,"link",n),I._p=new Promise(function(z,Q){I.onload=z,I.onerror=Q}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Sh(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(d,v)}}}function Mw(n,i){Zi.X(n,i);var a=ho;if(a&&n){var l=an(a).hoistableScripts,f=mo(n),d=l.get(f);d||(d=a.querySelector(au(f)),d||(n=T({src:n,async:!0},i),(i=jn.get(f))&&Fm(n,i),d=a.createElement("script"),_e(d),Ye(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Pw(n,i){Zi.M(n,i);var a=ho;if(a&&n){var l=an(a).hoistableScripts,f=mo(n),d=l.get(f);d||(d=a.querySelector(au(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=jn.get(f))&&Fm(n,i),d=a.createElement("script"),_e(d),Ye(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function rT(n,i,a,l){var f=(f=bt.current)?bh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=fo(a.href),a=an(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=fo(a.href);var d=an(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(su(n)))&&!d._p&&(v.instance=d,v.state.loading=5),jn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},jn.set(n,a),d||Uw(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=mo(a),a=an(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function fo(n){return'href="'+Se(n)+'"'}function su(n){return'link[rel="stylesheet"]['+n+"]"}function sT(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function Uw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ye(i,"link",a),_e(i),n.head.appendChild(i))}function mo(n){return'[src="'+Se(n)+'"]'}function au(n){return"script[async]"+n}function aT(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+Se(a.href)+'"]');if(l)return i.instance=l,_e(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),_e(l),Ye(l,"style",f),Sh(l,a.precedence,n),i.instance=l;case"stylesheet":f=fo(a.href);var d=n.querySelector(su(f));if(d)return i.state.loading|=4,i.instance=d,_e(d),d;l=sT(a),(f=jn.get(f))&&qm(l,f),d=(n.ownerDocument||n).createElement("link"),_e(d);var v=d;return v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Ye(d,"link",l),i.state.loading|=4,Sh(d,a.precedence,n),i.instance=d;case"script":return d=mo(a.src),(f=n.querySelector(au(d)))?(i.instance=f,_e(f),f):(l=a,(f=jn.get(d))&&(l=T({},a),Fm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),_e(f),Ye(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Sh(l,a.precedence,n));return i.instance}function Sh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function qm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Fm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var wh=null;function oT(n,i,a){if(wh===null){var l=new Map,f=wh=new Map;f.set(a,l)}else f=wh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[vs]||d[Ve]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function lT(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Lw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function uT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ou=null;function Bw(){}function kw(n,i,a){if(ou===null)throw Error(r(475));var l=ou;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=fo(a.href),d=n.querySelector(su(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Ih.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=d,_e(d);return}d=n.ownerDocument||n,a=sT(a),(f=jn.get(f))&&qm(a,f),d=d.createElement("link"),_e(d);var v=d;v._p=new Promise(function(E,I){v.onload=E,v.onerror=I}),Ye(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Ih.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function zw(){if(ou===null)throw Error(r(475));var n=ou;return n.stylesheets&&n.count===0&&jm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&jm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Ih(){if(this.count--,this.count===0){if(this.stylesheets)jm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Rh=null;function jm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Rh=new Map,i.forEach(qw,n),Rh=null,Ih.call(n))}function qw(n,i){if(!(i.state.loading&4)){var a=Rh.get(n);if(a)var l=a.get(null);else{a=new Map,Rh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Ih.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var lu={$$typeof:lt,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function Fw(n,i,a,l,f,d,v,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cT(n,i,a,l,f,d,v,E,I,z,Q,X){return n=new Fw(n,i,a,v,E,I,z,X),i=1,d===!0&&(i|=24),d=bn(3,null,null,i),n.current=d,d.stateNode=n,i=Sd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Dd(d),n}function hT(n){return n?(n=Ga,n):Ga}function fT(n,i,a,l,f,d){f=hT(f),l.context===null?l.context=f:l.pendingContext=f,l=vr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Tr(n,l,i),a!==null&&(Dn(a,n,i),Bl(a,n,i))}function dT(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Gm(n,i){dT(n,i),(n=n.alternate)&&dT(n,i)}function mT(n){if(n.tag===13){var i=ja(n,67108864);i!==null&&Dn(i,n,67108864),Gm(n,67108864)}}var Dh=!0;function jw(n,i,a,l){var f=H.T;H.T=null;var d=rt.p;try{rt.p=2,Hm(n,i,a,l)}finally{rt.p=d,H.T=f}}function Gw(n,i,a,l){var f=H.T;H.T=null;var d=rt.p;try{rt.p=8,Hm(n,i,a,l)}finally{rt.p=d,H.T=f}}function Hm(n,i,a,l){if(Dh){var f=Qm(l);if(f===null)Nm(n,i,l,Vh,a),pT(n,l);else if(Qw(f,n,i,a,l))l.stopPropagation();else if(pT(n,l),i&4&&-1<Hw.indexOf(n)){for(;f!==null;){var d=ni(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Qn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var I=1<<31-We(v);E.entanglements[1]|=I,v&=~I}pi(d),(Ht&6)===0&&(fh=xn()+500,eu(0))}}break;case 13:E=ja(d,2),E!==null&&Dn(E,d,2),mh(),Gm(d,2)}if(d=Qm(l),d===null&&Nm(n,i,l,Vh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Nm(n,i,l,null,a)}}function Qm(n){return n=Mn(n),Km(n)}var Vh=null;function Km(n){if(Vh=null,n=Vi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Vh=n,null}function gT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($f()){case al:return 2;case Aa:return 8;case ms:case Zf:return 32;case ba:return 268435456;default:return 32}default:return 32}}var Ym=!1,Or=null,Mr=null,Pr=null,uu=new Map,cu=new Map,Ur=[],Hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pT(n,i){switch(n){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":uu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(i.pointerId)}}function hu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=ni(i),i!==null&&mT(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Qw(n,i,a,l,f){switch(i){case"focusin":return Or=hu(Or,n,i,a,l,f),!0;case"dragenter":return Mr=hu(Mr,n,i,a,l,f),!0;case"mouseover":return Pr=hu(Pr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return uu.set(d,hu(uu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,cu.set(d,hu(cu.get(d)||null,n,i,a,l,f)),!0}return!1}function _T(n){var i=Vi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,mc(n.priority,function(){if(a.tag===13){var l=Rn();l=cr(l);var f=ja(a,l);f!==null&&Dn(f,a,l),Gm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ch(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Qm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Oi=l,a.target.dispatchEvent(l),Oi=null}else return i=ni(a),i!==null&&mT(i),n.blockedOn=a,!1;i.shift()}return!0}function yT(n,i,a){Ch(n)&&a.delete(i)}function Kw(){Ym=!1,Or!==null&&Ch(Or)&&(Or=null),Mr!==null&&Ch(Mr)&&(Mr=null),Pr!==null&&Ch(Pr)&&(Pr=null),uu.forEach(yT),cu.forEach(yT)}function xh(n,i){n.blockedOn===i&&(n.blockedOn=null,Ym||(Ym=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Kw)))}var Nh=null;function vT(n){Nh!==n&&(Nh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nh===n&&(Nh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Km(l||a)===null)continue;break}var d=ni(a);d!==null&&(n.splice(i,3),i-=3,Kd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function fu(n){function i(I){return xh(I,n)}Or!==null&&xh(Or,n),Mr!==null&&xh(Mr,n),Pr!==null&&xh(Pr,n),uu.forEach(i),cu.forEach(i);for(var a=0;a<Ur.length;a++){var l=Ur[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ur.length&&(a=Ur[0],a.blockedOn===null);)_T(a),a.blockedOn===null&&Ur.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[be]||null;if(typeof d=="function")v||vT(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[be]||null)E=v.formAction;else if(Km(f)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),vT(a)}}}function Xm(n){this._internalRoot=n}Oh.prototype.render=Xm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();fT(a,l,n,i,null,null)},Oh.prototype.unmount=Xm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;fT(n.current,2,null,n,null,null),mh(),i[Nn]=null}};function Oh(n){this._internalRoot=n}Oh.prototype.unstable_scheduleHydration=function(n){if(n){var i=hr();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Ur.length&&i!==0&&i<Ur[a].priority;a++);Ur.splice(a,0,n),a===0&&_T(n)}};var TT=t.version;if(TT!=="19.1.0")throw Error(r(527,TT,"19.1.0"));rt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var Yw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{de=Mh.inject(Yw),Gt=Mh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=Uy,d=Ly,v=By,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=cT(n,1,!1,null,null,a,l,f,d,v,E,null),n[Nn]=i.current,xm(n),new Xm(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Uy,v=Ly,E=By,I=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=cT(n,1,!0,i,a??null,l,f,d,v,E,I,z),i.context=hT(null),a=i.current,l=Rn(),l=cr(l),f=vr(l),f.callback=null,Tr(a,f,l),a=l,i.current.lanes=a,Di(i,a),pi(i),n[Nn]=i.current,xm(n),new Oh(i)},mu.version="19.1.0",mu}var CT;function sI(){if(CT)return Wm.exports;CT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Wm.exports=rI(),Wm.exports}var aI=sI();const oI=_0(aI),lI="/clicker/assets/click-pWWDwmzr.png";function uI(){const[s,t]=Wi.useState(null);return Wi.useEffect(()=>{var o,u;const e=(o=window.Telegram)==null?void 0:o.WebApp;if(!e)return;e.ready(),e.expand();const r=e.initDataUnsafe;(u=r==null?void 0:r.user)!=null&&u.id&&t(r.user.id)},[]),s}const cI=()=>{};var xT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},hI=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],h=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],h=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},v0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let w=(m&15)<<2|_>>6,U=_&63;g||(U=64,h||(w=64)),r.push(e[T],e[A],e[w],e[U])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(y0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):hI(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const _=o<s.length?e[s.charAt(o)]:64;++o;const A=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||A==null)throw new fI;const w=u<<2|m>>4;if(r.push(w),_!==64){const U=m<<4&240|_>>2;if(r.push(U),A!==64){const K=_<<6&192|A;r.push(K)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class fI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dI=function(s){const t=y0(s);return v0.encodeByteArray(t,!0)},Wh=function(s){return dI(s).replace(/\./g,"")},T0=function(s){try{return v0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Jh(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!mI(e)||(s[e]=Jh(s[e],t[e]));return s}function mI(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=()=>E0().__FIREBASE_DEFAULTS__,pI=()=>{if(typeof process>"u"||typeof xT>"u")return;const s=xT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_I=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&T0(s[1]);return t&&JSON.parse(t)},A0=()=>{try{return cI()||gI()||pI()||_I()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},b0=()=>{var s;return(s=A0())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Wh(JSON.stringify(e)),Wh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TI(){var s;const t=(s=A0())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EI(){return typeof window<"u"||S0()}function S0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function w0(){return!TI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I0(){try{return typeof indexedDB=="object"}catch{return!1}}function AI(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FirebaseError";class _a extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=bI,Object.setPrototypeOf(this,_a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Af.prototype.create)}}class Af{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?SI(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new _a(o,m,r)}}function SI(s,t){return s.replace(wI,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Do(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(OT(u)&&OT(h)){if(!Do(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function OT(s){return s!==null&&typeof s=="object"}function II(s,t){const e=new RI(s,t);return e.subscribe.bind(e)}class RI{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");DI(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=ng),o.error===void 0&&(o.error=ng),o.complete===void 0&&(o.complete=ng);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DI(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function ng(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(s){return s&&s._delegate?s._delegate:s}class oa{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new yI;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xI(t))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Xs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xs){return this.instances.has(t)}getOptions(t=Xs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,e){var r;const o=this.normalizeInstanceIdentifier(e),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CI(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xs){return this.component?this.component.multipleInstances?t:Xs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CI(s){return s===Xs?void 0:s}function xI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new VI(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=[];var Mt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Mt||(Mt={}));const D0={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},NI=Mt.INFO,OI={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},MI=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=OI[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class $g{constructor(t){this.name=t,this._logLevel=NI,this._logHandler=MI,this._userLogHandler=null,Xg.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?D0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}function PI(s){Xg.forEach(t=>{t.setLogLevel(s)})}function UI(s,t){for(const e of Xg){let r=null;t&&t.level&&(r=D0[t.level]),s===null?e.userLogHandler=null:e.userLogHandler=(o,u,...h)=>{const m=h.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");u>=(r??o.logLevel)&&s({level:Mt[u].toLowerCase(),message:m,args:h,type:o.name})}}}const LI=(s,t)=>t.some(e=>s instanceof e);let MT,PT;function BI(){return MT||(MT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kI(){return PT||(PT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V0=new WeakMap,gg=new WeakMap,C0=new WeakMap,ig=new WeakMap,Zg=new WeakMap;function zI(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{e(Hr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&V0.set(e,s)}).catch(()=>{}),Zg.set(t,s),t}function qI(s){if(gg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{e(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});gg.set(s,t)}let pg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return gg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||C0.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Hr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function FI(s){pg=s(pg)}function jI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(rg(this),t,...e);return C0.set(r,t.sort?t.sort():[t]),Hr(r)}:kI().includes(s)?function(...t){return s.apply(rg(this),t),Hr(V0.get(this))}:function(...t){return Hr(s.apply(rg(this),t))}}function GI(s){return typeof s=="function"?jI(s):(s instanceof IDBTransaction&&qI(s),LI(s,BI())?new Proxy(s,pg):s)}function Hr(s){if(s instanceof IDBRequest)return zI(s);if(ig.has(s))return ig.get(s);const t=GI(s);return t!==s&&(ig.set(s,t),Zg.set(t,s)),t}const rg=s=>Zg.get(s);function HI(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=Hr(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Hr(h.result),g.oldVersion,g.newVersion,Hr(h.transaction),g)}),e&&h.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const QI=["get","getKey","getAll","getAllKeys","count"],KI=["put","add","delete","clear"],sg=new Map;function UT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(sg.get(t))return sg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=KI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||QI.includes(e)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[e](...m),o&&g.done]))[0]};return sg.set(t,u),u}FI(s=>({...s,get:(t,e,r)=>UT(t,e)||s.get(t,e,r),has:(t,e)=>!!UT(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(XI(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function XI(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ef="@firebase/app",_g="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new $g("@firebase/app"),$I="@firebase/app-compat",ZI="@firebase/analytics-compat",WI="@firebase/analytics",JI="@firebase/app-check-compat",tR="@firebase/app-check",eR="@firebase/auth",nR="@firebase/auth-compat",iR="@firebase/database",rR="@firebase/data-connect",sR="@firebase/database-compat",aR="@firebase/functions",oR="@firebase/functions-compat",lR="@firebase/installations",uR="@firebase/installations-compat",cR="@firebase/messaging",hR="@firebase/messaging-compat",fR="@firebase/performance",dR="@firebase/performance-compat",mR="@firebase/remote-config",gR="@firebase/remote-config-compat",pR="@firebase/storage",_R="@firebase/storage-compat",yR="@firebase/firestore",vR="@firebase/vertexai",TR="@firebase/firestore-compat",ER="firebase",AR="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]",bR={[ef]:"fire-core",[$I]:"fire-core-compat",[WI]:"fire-analytics",[ZI]:"fire-analytics-compat",[tR]:"fire-app-check",[JI]:"fire-app-check-compat",[eR]:"fire-auth",[nR]:"fire-auth-compat",[iR]:"fire-rtdb",[rR]:"fire-data-connect",[sR]:"fire-rtdb-compat",[aR]:"fire-fn",[oR]:"fire-fn-compat",[lR]:"fire-iid",[uR]:"fire-iid-compat",[cR]:"fire-fcm",[hR]:"fire-fcm-compat",[fR]:"fire-perf",[dR]:"fire-perf-compat",[mR]:"fire-rc",[gR]:"fire-rc-compat",[pR]:"fire-gcs",[_R]:"fire-gcs-compat",[yR]:"fire-fst",[TR]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Map,Vo=new Map,Co=new Map;function Nu(s,t){try{s.container.addComponent(t)}catch(e){er.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function x0(s,t){s.container.addOrOverwriteComponent(t)}function xo(s){const t=s.name;if(Co.has(t))return er.debug(`There were multiple attempts to register component ${t}.`),!1;Co.set(t,s);for(const e of $r.values())Nu(e,s);for(const e of Vo.values())Nu(e,s);return!0}function N0(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function SR(s,t,e=Xr){N0(s,t).clearInstance(e)}function O0(s){return s.options!==void 0}function M0(s){return s==null?!1:s.settings!==void 0}function wR(){Co.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new Af("app","Firebase",IR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P0=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(s,t){const e=T0(s.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(e).exp*1e3,u=new Date().getTime();o-u<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class RR extends P0{constructor(t,e,r,o){const u=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!1,h={name:r,automaticDataCollectionEnabled:u};if(t.apiKey!==void 0)super(t,h,o);else{const m=t;super(m.options,h,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:u},e),this._serverConfig.authIdToken&&LT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&LT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,tr(ef,_g,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Hn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=AR;function Jg(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Xr,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Hn.create("bad-app-name",{appName:String(o)});if(e||(e=b0()),!e)throw Hn.create("no-options");const u=$r.get(o);if(u){if(Do(e,u.options)&&Do(r,u.config))return u;throw Hn.create("duplicate-app",{appName:o})}const h=new R0(o);for(const g of Co.values())h.addComponent(g);const m=new P0(e,r,h);return $r.set(o,m),m}function DR(s,t){if(EI()&&!S0())throw Hn.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let e;O0(s)?e=s.options:e=s;const r=Object.assign(Object.assign({},t),e);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const o=_=>[..._].reduce((T,A)=>Math.imul(31,T)+A.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Hn.create("finalization-registry-not-supported",{});const u=""+o(JSON.stringify(r)),h=Vo.get(u);if(h)return h.incRefCount(t.releaseOnDeref),h;const m=new R0(u);for(const _ of Co.values())m.addComponent(_);const g=new RR(e,t,u,m);return Vo.set(u,g),g}function VR(s=Xr){const t=$r.get(s);if(!t&&s===Xr&&b0())return Jg();if(!t)throw Hn.create("no-app",{appName:s});return t}function CR(){return Array.from($r.values())}async function tp(s){let t=!1;const e=s.name;$r.has(e)?(t=!0,$r.delete(e)):Vo.has(e)&&s.decRefCount()<=0&&(Vo.delete(e),t=!0),t&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function tr(s,t,e){var r;let o=(r=bR[s])!==null&&r!==void 0?r:s;e&&(o+=`-${e}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),er.warn(m.join(" "));return}xo(new oa(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}function U0(s,t){if(s!==null&&typeof s!="function")throw Hn.create("invalid-log-argument");UI(s,t)}function L0(s){PI(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="firebase-heartbeat-database",NR=1,Ou="firebase-heartbeat-store";let ag=null;function B0(){return ag||(ag=HI(xR,NR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ou)}catch(e){console.warn(e)}}}}).catch(s=>{throw Hn.create("idb-open",{originalErrorMessage:s.message})})),ag}async function OR(s){try{const e=(await B0()).transaction(Ou),r=await e.objectStore(Ou).get(k0(s));return await e.done,r}catch(t){if(t instanceof _a)er.warn(t.message);else{const e=Hn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});er.warn(e.message)}}}async function BT(s,t){try{const r=(await B0()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(t,k0(s)),await r.done}catch(e){if(e instanceof _a)er.warn(e.message);else{const r=Hn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});er.warn(r.message)}}}function k0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=1024,PR=30;class UR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new BR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=kT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>PR){const h=kR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kT(),{heartbeatsToSend:r,unsentEntries:o}=LR(this._heartbeatsCache.heartbeats),u=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return er.warn(e),""}}}function kT(){return new Date().toISOString().substring(0,10)}function LR(s,t=MR){const e=[];let r=s.slice();for(const o of s){const u=e.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),zT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),zT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class BR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I0()?AI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await OR(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return BT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return BT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function zT(s){return Wh(JSON.stringify({version:2,heartbeats:s})).length}function kR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(s){xo(new oa("platform-logger",t=>new YI(t),"PRIVATE")),xo(new oa("heartbeat",t=>new UR(t),"PRIVATE")),tr(ef,_g,s),tr(ef,_g,"esm2017"),tr("fire-js","")}zR("");const qR=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:_a,SDK_VERSION:Wg,_DEFAULT_ENTRY_NAME:Xr,_addComponent:Nu,_addOrOverwriteComponent:x0,_apps:$r,_clearComponents:wR,_components:Co,_getProvider:N0,_isFirebaseApp:O0,_isFirebaseServerApp:M0,_registerComponent:xo,_removeServiceInstance:SR,_serverApps:Vo,deleteApp:tp,getApp:VR,getApps:CR,initializeApp:Jg,initializeServerApp:DR,onLog:U0,registerVersion:tr,setLogLevel:L0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t,e){this._delegate=t,this.firebase=e,Nu(t,new oa("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tp(this._delegate)))}_getService(t,e=Xr){var r;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(t);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:e})}_removeServiceInstance(t,e=Xr){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Nu(this._delegate,t)}_addOrOverwriteComponent(t){x0(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},qT=new Af("app-compat","Firebase",jR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(s){const t={},e={__esModule:!0,initializeApp:u,app:o,registerVersion:tr,setLogLevel:L0,onLog:U0,apps:null,SDK_VERSION:Wg,INTERNAL:{registerComponent:m,removeApp:r,useAsService:g,modularAPIs:qR}};e.default=e,Object.defineProperty(e,"apps",{get:h});function r(_){delete t[_]}function o(_){if(_=_||Xr,!NT(t,_))throw qT.create("no-app",{appName:_});return t[_]}o.App=s;function u(_,T={}){const A=Jg(_,T);if(NT(t,A.name))return t[A.name];const w=new s(A,e);return t[A.name]=w,w}function h(){return Object.keys(t).map(_=>t[_])}function m(_){const T=_.name,A=T.replace("-compat","");if(xo(_)&&_.type==="PUBLIC"){const w=(U=o())=>{if(typeof U[A]!="function")throw qT.create("invalid-app-argument",{appName:T});return U[A]()};_.serviceProps!==void 0&&Jh(w,_.serviceProps),e[A]=w,s.prototype[A]=function(...U){return this._getService.bind(this,T).apply(this,_.multipleInstances?U:[])}}return _.type==="PUBLIC"?e[A]:null}function g(_,T){return T==="serverAuth"?null:T}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(){const s=GR(FR);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:z0,extendNamespace:t,createSubscribe:II,ErrorFactory:Af,deepExtend:Jh});function t(e){Jh(s,e)}return s}const HR=z0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new $g("@firebase/app-compat"),QR="@firebase/app-compat",KR="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(s){tr(QR,KR,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=E0();if(s.firebase!==void 0){FT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&FT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Su=HR;YR();var XR="firebase",$R="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Su.registerVersion(XR,$R,"app-compat");var jT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,q0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,S){function D(){}D.prototype=S.prototype,x.D=S.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(N,O,P){for(var R=Array(arguments.length-2),je=2;je<arguments.length;je++)R[je-2]=arguments[je];return S.prototype[O].apply(N,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,D){D||(D=0);var N=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)N[O]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(O=0;16>O;++O)N[O]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=x.g[0],D=x.g[1],O=x.g[2];var P=x.g[3],R=S+(P^D&(O^P))+N[0]+3614090360&4294967295;S=D+(R<<7&4294967295|R>>>25),R=P+(O^S&(D^O))+N[1]+3905402710&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(D^P&(S^D))+N[2]+606105819&4294967295,O=P+(R<<17&4294967295|R>>>15),R=D+(S^O&(P^S))+N[3]+3250441966&4294967295,D=O+(R<<22&4294967295|R>>>10),R=S+(P^D&(O^P))+N[4]+4118548399&4294967295,S=D+(R<<7&4294967295|R>>>25),R=P+(O^S&(D^O))+N[5]+1200080426&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(D^P&(S^D))+N[6]+2821735955&4294967295,O=P+(R<<17&4294967295|R>>>15),R=D+(S^O&(P^S))+N[7]+4249261313&4294967295,D=O+(R<<22&4294967295|R>>>10),R=S+(P^D&(O^P))+N[8]+1770035416&4294967295,S=D+(R<<7&4294967295|R>>>25),R=P+(O^S&(D^O))+N[9]+2336552879&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(D^P&(S^D))+N[10]+4294925233&4294967295,O=P+(R<<17&4294967295|R>>>15),R=D+(S^O&(P^S))+N[11]+2304563134&4294967295,D=O+(R<<22&4294967295|R>>>10),R=S+(P^D&(O^P))+N[12]+1804603682&4294967295,S=D+(R<<7&4294967295|R>>>25),R=P+(O^S&(D^O))+N[13]+4254626195&4294967295,P=S+(R<<12&4294967295|R>>>20),R=O+(D^P&(S^D))+N[14]+2792965006&4294967295,O=P+(R<<17&4294967295|R>>>15),R=D+(S^O&(P^S))+N[15]+1236535329&4294967295,D=O+(R<<22&4294967295|R>>>10),R=S+(O^P&(D^O))+N[1]+4129170786&4294967295,S=D+(R<<5&4294967295|R>>>27),R=P+(D^O&(S^D))+N[6]+3225465664&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^D&(P^S))+N[11]+643717713&4294967295,O=P+(R<<14&4294967295|R>>>18),R=D+(P^S&(O^P))+N[0]+3921069994&4294967295,D=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(D^O))+N[5]+3593408605&4294967295,S=D+(R<<5&4294967295|R>>>27),R=P+(D^O&(S^D))+N[10]+38016083&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^D&(P^S))+N[15]+3634488961&4294967295,O=P+(R<<14&4294967295|R>>>18),R=D+(P^S&(O^P))+N[4]+3889429448&4294967295,D=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(D^O))+N[9]+568446438&4294967295,S=D+(R<<5&4294967295|R>>>27),R=P+(D^O&(S^D))+N[14]+3275163606&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^D&(P^S))+N[3]+4107603335&4294967295,O=P+(R<<14&4294967295|R>>>18),R=D+(P^S&(O^P))+N[8]+1163531501&4294967295,D=O+(R<<20&4294967295|R>>>12),R=S+(O^P&(D^O))+N[13]+2850285829&4294967295,S=D+(R<<5&4294967295|R>>>27),R=P+(D^O&(S^D))+N[2]+4243563512&4294967295,P=S+(R<<9&4294967295|R>>>23),R=O+(S^D&(P^S))+N[7]+1735328473&4294967295,O=P+(R<<14&4294967295|R>>>18),R=D+(P^S&(O^P))+N[12]+2368359562&4294967295,D=O+(R<<20&4294967295|R>>>12),R=S+(D^O^P)+N[5]+4294588738&4294967295,S=D+(R<<4&4294967295|R>>>28),R=P+(S^D^O)+N[8]+2272392833&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^D)+N[11]+1839030562&4294967295,O=P+(R<<16&4294967295|R>>>16),R=D+(O^P^S)+N[14]+4259657740&4294967295,D=O+(R<<23&4294967295|R>>>9),R=S+(D^O^P)+N[1]+2763975236&4294967295,S=D+(R<<4&4294967295|R>>>28),R=P+(S^D^O)+N[4]+1272893353&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^D)+N[7]+4139469664&4294967295,O=P+(R<<16&4294967295|R>>>16),R=D+(O^P^S)+N[10]+3200236656&4294967295,D=O+(R<<23&4294967295|R>>>9),R=S+(D^O^P)+N[13]+681279174&4294967295,S=D+(R<<4&4294967295|R>>>28),R=P+(S^D^O)+N[0]+3936430074&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^D)+N[3]+3572445317&4294967295,O=P+(R<<16&4294967295|R>>>16),R=D+(O^P^S)+N[6]+76029189&4294967295,D=O+(R<<23&4294967295|R>>>9),R=S+(D^O^P)+N[9]+3654602809&4294967295,S=D+(R<<4&4294967295|R>>>28),R=P+(S^D^O)+N[12]+3873151461&4294967295,P=S+(R<<11&4294967295|R>>>21),R=O+(P^S^D)+N[15]+530742520&4294967295,O=P+(R<<16&4294967295|R>>>16),R=D+(O^P^S)+N[2]+3299628645&4294967295,D=O+(R<<23&4294967295|R>>>9),R=S+(O^(D|~P))+N[0]+4096336452&4294967295,S=D+(R<<6&4294967295|R>>>26),R=P+(D^(S|~O))+N[7]+1126891415&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~D))+N[14]+2878612391&4294967295,O=P+(R<<15&4294967295|R>>>17),R=D+(P^(O|~S))+N[5]+4237533241&4294967295,D=O+(R<<21&4294967295|R>>>11),R=S+(O^(D|~P))+N[12]+1700485571&4294967295,S=D+(R<<6&4294967295|R>>>26),R=P+(D^(S|~O))+N[3]+2399980690&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~D))+N[10]+4293915773&4294967295,O=P+(R<<15&4294967295|R>>>17),R=D+(P^(O|~S))+N[1]+2240044497&4294967295,D=O+(R<<21&4294967295|R>>>11),R=S+(O^(D|~P))+N[8]+1873313359&4294967295,S=D+(R<<6&4294967295|R>>>26),R=P+(D^(S|~O))+N[15]+4264355552&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~D))+N[6]+2734768916&4294967295,O=P+(R<<15&4294967295|R>>>17),R=D+(P^(O|~S))+N[13]+1309151649&4294967295,D=O+(R<<21&4294967295|R>>>11),R=S+(O^(D|~P))+N[4]+4149444226&4294967295,S=D+(R<<6&4294967295|R>>>26),R=P+(D^(S|~O))+N[11]+3174756917&4294967295,P=S+(R<<10&4294967295|R>>>22),R=O+(S^(P|~D))+N[2]+718787259&4294967295,O=P+(R<<15&4294967295|R>>>17),R=D+(P^(O|~S))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var D=S-this.blockSize,N=this.B,O=this.h,P=0;P<S;){if(O==0)for(;P<=D;)o(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<S;)if(N[O++]=x.charCodeAt(P++),O==this.blockSize){o(this,N),O=0;break}}else for(;P<S;)if(N[O++]=x[P++],O==this.blockSize){o(this,N),O=0;break}}this.h=O,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var D=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=D&255,D/=256;for(this.u(x),x=Array(16),S=D=0;4>S;++S)for(var N=0;32>N;N+=8)x[D++]=this.g[S]>>>N&255;return x};function u(x,S){var D=m;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=S(x)}function h(x,S){this.h=S;for(var D=[],N=!0,O=x.length-1;0<=O;O--){var P=x[O]|0;N&&P==S||(D[O]=P,N=!1)}this.g=D}var m={};function g(x){return-128<=x&&128>x?u(x,function(S){return new h([S|0],0>S?-1:0)}):new h([x|0],0>x?-1:0)}function _(x){if(isNaN(x)||!isFinite(x))return A;if(0>x)return $(_(-x));for(var S=[],D=1,N=0;x>=D;N++)S[N]=x/D|0,D*=4294967296;return new h(S,0)}function T(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return $(T(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=_(Math.pow(S,8)),N=A,O=0;O<x.length;O+=8){var P=Math.min(8,x.length-O),R=parseInt(x.substring(O,O+P),S);8>P?(P=_(Math.pow(S,P)),N=N.j(P).add(_(R))):(N=N.j(D),N=N.add(_(R)))}return N}var A=g(0),w=g(1),U=g(16777216);s=h.prototype,s.m=function(){if(Z(this))return-$(this).m();for(var x=0,S=1,D=0;D<this.g.length;D++){var N=this.i(D);x+=(0<=N?N:4294967296+N)*S,S*=4294967296}return x},s.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(K(this))return"0";if(Z(this))return"-"+$(this).toString(x);for(var S=_(Math.pow(x,6)),D=this,N="";;){var O=St(D,S).g;D=gt(D,O.j(S));var P=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=O,K(D))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},s.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function K(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function Z(x){return x.h==-1}s.l=function(x){return x=gt(this,x),Z(x)?-1:K(x)?0:1};function $(x){for(var S=x.g.length,D=[],N=0;N<S;N++)D[N]=~x.g[N];return new h(D,~x.h).add(w)}s.abs=function(){return Z(this)?$(this):this},s.add=function(x){for(var S=Math.max(this.g.length,x.g.length),D=[],N=0,O=0;O<=S;O++){var P=N+(this.i(O)&65535)+(x.i(O)&65535),R=(P>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);N=R>>>16,P&=65535,R&=65535,D[O]=R<<16|P}return new h(D,D[D.length-1]&-2147483648?-1:0)};function gt(x,S){return x.add($(S))}s.j=function(x){if(K(this)||K(x))return A;if(Z(this))return Z(x)?$(this).j($(x)):$($(this).j(x));if(Z(x))return $(this.j($(x)));if(0>this.l(U)&&0>x.l(U))return _(this.m()*x.m());for(var S=this.g.length+x.g.length,D=[],N=0;N<2*S;N++)D[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<x.g.length;O++){var P=this.i(N)>>>16,R=this.i(N)&65535,je=x.i(O)>>>16,fe=x.i(O)&65535;D[2*N+2*O]+=R*fe,pt(D,2*N+2*O),D[2*N+2*O+1]+=P*fe,pt(D,2*N+2*O+1),D[2*N+2*O+1]+=R*je,pt(D,2*N+2*O+1),D[2*N+2*O+2]+=P*je,pt(D,2*N+2*O+2)}for(N=0;N<S;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=S;N<2*S;N++)D[N]=0;return new h(D,0)};function pt(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function lt(x,S){this.g=x,this.h=S}function St(x,S){if(K(S))throw Error("division by zero");if(K(x))return new lt(A,A);if(Z(x))return S=St($(x),S),new lt($(S.g),$(S.h));if(Z(S))return S=St(x,$(S)),new lt($(S.g),S.h);if(30<x.g.length){if(Z(x)||Z(S))throw Error("slowDivide_ only works with positive integers.");for(var D=w,N=S;0>=N.l(x);)D=ht(D),N=ht(N);var O=At(D,1),P=At(N,1);for(N=At(N,2),D=At(D,2);!K(N);){var R=P.add(N);0>=R.l(x)&&(O=O.add(D),P=R),N=At(N,1),D=At(D,1)}return S=gt(x,O.j(S)),new lt(O,S)}for(O=A;0<=x.l(S);){for(D=Math.max(1,Math.floor(x.m()/S.m())),N=Math.ceil(Math.log(D)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=_(D),R=P.j(S);Z(R)||0<R.l(x);)D-=N,P=_(D),R=P.j(S);K(P)&&(P=w),O=O.add(P),x=gt(x,R)}return new lt(O,x)}s.A=function(x){return St(this,x).h},s.and=function(x){for(var S=Math.max(this.g.length,x.g.length),D=[],N=0;N<S;N++)D[N]=this.i(N)&x.i(N);return new h(D,this.h&x.h)},s.or=function(x){for(var S=Math.max(this.g.length,x.g.length),D=[],N=0;N<S;N++)D[N]=this.i(N)|x.i(N);return new h(D,this.h|x.h)},s.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),D=[],N=0;N<S;N++)D[N]=this.i(N)^x.i(N);return new h(D,this.h^x.h)};function ht(x){for(var S=x.g.length+1,D=[],N=0;N<S;N++)D[N]=x.i(N)<<1|x.i(N-1)>>>31;return new h(D,x.h)}function At(x,S){var D=S>>5;S%=32;for(var N=x.g.length-D,O=[],P=0;P<N;P++)O[P]=0<S?x.i(P+D)>>>S|x.i(P+D+1)<<32-S:x.i(P+D);return new h(O,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,Qr=h}).apply(typeof jT<"u"?jT:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F0,Tu,j0,Fh,yg,G0,H0,Q0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function o(c,p){if(p)t:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in y))break t;y=y[L]}c=c[c.length-1],b=y[c],p=p(b),p!=b&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,b=!1,L={next:function(){if(!b&&y<c.length){var G=y++;return{value:p(G,c[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,y){return c.call.apply(c.bind,arguments)}function A(c,p,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function w(c,p,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,w.apply(null,arguments)}function U(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function K(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,L,G){for(var nt=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)nt[Pt-2]=arguments[Pt];return p.prototype[L].apply(b,nt)}}function Z(c){const p=c.length;if(0<p){const y=Array(p);for(let b=0;b<p;b++)y[b]=c[b];return y}return[]}function $(c,p){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const L=c.length||0,G=b.length||0;c.length=L+G;for(let nt=0;nt<G;nt++)c[L+nt]=b[nt]}else c.push(b)}}class gt{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function pt(c){return/^[\s\xa0]*$/.test(c)}function lt(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function St(c){return St[" "](c),c}St[" "]=function(){};var ht=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function At(c,p,y){for(const b in c)p.call(y,c[b],b,c)}function x(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function S(c){const p={};for(const y in c)p[y]=c[y];return p}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,p){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)c[y]=b[y];for(let G=0;G<D.length;G++)y=D[G],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function O(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function P(c){m.setTimeout(()=>{throw c},0)}function R(){var c=qt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class je{constructor(){this.h=this.g=null}add(p,y){const b=fe.get();b.set(p,y),this.h?this.h.next=b:this.g=b,this.h=b}}var fe=new gt(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,mt=!1,qt=new je,V=()=>{const c=m.Promise.resolve(void 0);rt=()=>{c.then(W)}};var W=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(y){P(y)}var p=fe;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}mt=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function Dt(c,p){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(ht){t:{try{St(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:bt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Dt.aa.h.call(this)}}K(Dt,et);var bt={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),te=0;function ti(c,p,y,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!b,this.ha=L,this.key=++te,this.da=this.fa=!1}function ur(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ii(c){this.src=c,this.g={},this.h=0}Ii.prototype.add=function(c,p,y,b,L){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var nt=fs(c,p,b,L);return-1<nt?(p=c[nt],y||(p.fa=!1)):(p=new ti(p,this.src,G,!!b,L),p.fa=y,c.push(p)),p};function hs(c,p){var y=p.type;if(y in c.g){var b=c.g[y],L=Array.prototype.indexOf.call(b,p,void 0),G;(G=0<=L)&&Array.prototype.splice.call(b,L,1),G&&(ur(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function fs(c,p,y,b){for(var L=0;L<c.length;++L){var G=c[L];if(!G.da&&G.listener==p&&G.capture==!!y&&G.ha==b)return L}return-1}var ds="closure_lm_"+(1e6*Math.random()|0),sl={};function hc(c,p,y,b,L){if(Array.isArray(p)){for(var G=0;G<p.length;G++)hc(c,p[G],y,b,L);return null}return y=fc(y),c&&c[Pe]?c.K(p,y,_(b)?!!b.capture:!1,L):xn(c,p,y,!1,b,L)}function xn(c,p,y,b,L,G){if(!p)throw Error("Invalid event type");var nt=_(L)?!!L.capture:!!L,Pt=ba(c);if(Pt||(c[ds]=Pt=new Ii(c)),y=Pt.add(p,y,b,nt,G),y.proxy)return y;if(b=$f(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)_t||(L=nt),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(ms(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function $f(){function c(y){return p.call(c.src,c.listener,y)}const p=Zf;return c}function al(c,p,y,b,L){if(Array.isArray(p))for(var G=0;G<p.length;G++)al(c,p[G],y,b,L);else b=_(b)?!!b.capture:!!b,y=fc(y),c&&c[Pe]?(c=c.i,p=String(p).toString(),p in c.g&&(G=c.g[p],y=fs(G,y,b,L),-1<y&&(ur(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete c.g[p],c.h--)))):c&&(c=ba(c))&&(p=c.g[p.toString()],c=-1,p&&(c=fs(p,y,b,L)),(y=-1<c?p[c]:null)&&Aa(y))}function Aa(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Pe])hs(p.i,c);else{var y=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(y,b,c.capture):p.detachEvent?p.detachEvent(ms(y),b):p.addListener&&p.removeListener&&p.removeListener(b),(y=ba(p))?(hs(y,c),y.h==0&&(y.src=null,p[ds]=null)):ur(c)}}}function ms(c){return c in sl?sl[c]:sl[c]="on"+c}function Zf(c,p){if(c.da)c=!0;else{p=new Dt(p,this);var y=c.listener,b=c.ha||c.src;c.fa&&Aa(c),c=y.call(b,p)}return c}function ba(c){return c=c[ds],c instanceof Ii?c:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function fc(c){return typeof c=="function"?c:(c[ol]||(c[ol]=function(p){return c.handleEvent(p)}),c[ol])}function de(){at.call(this),this.i=new Ii(this),this.M=this,this.F=null}K(de,at),de.prototype[Pe]=!0,de.prototype.removeEventListener=function(c,p,y,b){al(this,c,p,y,b)};function Gt(c,p){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new et(p,c);else if(p instanceof et)p.target=p.target||c;else{var L=p;p=new et(b,c),N(p,L)}if(L=!0,y)for(var G=y.length-1;0<=G;G--){var nt=p.g=y[G];L=Tn(nt,b,!0,p)&&L}if(nt=p.g=c,L=Tn(nt,b,!0,p)&&L,L=Tn(nt,b,!1,p)&&L,y)for(G=0;G<y.length;G++)nt=p.g=y[G],L=Tn(nt,b,!1,p)&&L}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],b=0;b<y.length;b++)ur(y[b]);delete c.g[p],c.h--}}this.F=null},de.prototype.K=function(c,p,y,b){return this.i.add(String(c),p,!1,y,b)},de.prototype.L=function(c,p,y,b){return this.i.add(String(c),p,!0,y,b)};function Tn(c,p,y,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,G=0;G<p.length;++G){var nt=p[G];if(nt&&!nt.da&&nt.capture==y){var Pt=nt.listener,Ce=nt.ha||nt.src;nt.fa&&hs(c.i,nt),L=Pt.call(Ce,b)!==!1&&L}}return L&&!b.defaultPrevented}function We(c,p,y){if(typeof c=="function")y&&(c=w(c,y));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function dc(c){c.g=We(()=>{c.g=null,c.i&&(c.i=!1,dc(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Wf extends at{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:dc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(c){at.call(this),this.h=c,this.g={}}K(gs,at);var ps=[];function _s(c){At(c.g,function(p,y){this.g.hasOwnProperty(y)&&Aa(p)},c),c.g={}}gs.prototype.N=function(){gs.aa.N.call(this),_s(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=m.JSON.stringify,Sa=m.JSON.parse,ys=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function ll(){}ll.prototype.h=null;function ul(c){return c.h||(c.h=c.i())}function cl(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Di(){et.call(this,"d")}K(Di,et);function hl(){et.call(this,"c")}K(hl,et);var ei={},fl=null;function cr(){return fl=fl||new de}ei.La="serverreachability";function wa(c){et.call(this,ei.La,c)}K(wa,et);function hr(c){const p=cr();Gt(p,new wa(p))}ei.STAT_EVENT="statevent";function mc(c,p){et.call(this,ei.STAT_EVENT,c),this.stat=p}K(mc,et);function re(c){const p=cr();Gt(p,new mc(p,c))}ei.Ma="timingevent";function Ve(c,p){et.call(this,ei.Ma,c),this.size=p}K(Ve,et);function be(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function dl(c,p,y,b,L,G){c.info(function(){if(c.g)if(G)for(var nt="",Pt=G.split("&"),Ce=0;Ce<Pt.length;Ce++){var Ut=Pt[Ce].split("=");if(1<Ut.length){var Le=Ut[0];Ut=Ut[1];var xe=Le.split("_");nt=2<=xe.length&&xe[1]=="type"?nt+(Le+"="+Ut+"&"):nt+(Le+"=redacted&")}}else nt=null;else nt=G;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+y+`
`+nt})}function Jf(c,p,y,b,L,G,nt){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+y+`
`+G+" "+nt})}function fr(c,p,y,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+vs(c,y)+(b?" "+b:"")})}function gc(c,p){c.info(function(){return"TIMEOUT: "+p})}Nn.prototype.info=function(){};function vs(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var G=L[0];if(G!="noop"&&G!="stop"&&G!="close")for(var nt=1;nt<L.length;nt++)L[nt]=""}}}}return Qn(y)}catch{return p}}var dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function ii(){}K(ii,ll),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ni=new ii;function an(c,p,y,b){this.j=c,this.i=p,this.l=y,this.R=b||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var ml={},Ia={};function Kn(c,p,y){c.L=1,c.v=Ss(En(p)),c.m=y,c.P=!0,Ci(c,null)}function Ci(c,p){c.F=Date.now(),Ts(c),c.A=En(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),Tl(y.i,"t",b),c.C=0,y=c.j.J,c.h=new _e,c.g=xc(c.j,y?p:null,!c.m),0<c.O&&(c.M=new Wf(w(c.Y,c,c.g),c.O)),p=c.U,y=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ps[0]=L.toString()),L=ps);for(var G=0;G<L.length;G++){var nt=hc(y,L[G],b||p.handleEvent,!1,p.h||p);if(!nt)break;p.g[nt.key]=nt}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),hr(),dl(c.i,c.u,c.A,c.l,c.R,c.m)}an.prototype.ca=function(c){c=c.target;const p=this.M;p&&Un(c)==3?p.j():this.Y(c)},an.prototype.Y=function(c){try{if(c==this.g)t:{const xe=Un(this.g);var p=this.g.Ba();const Bi=this.g.Z();if(!(3>xe)&&(xe!=3||this.g&&(this.h.h||this.g.oa()||bc(this.g)))){this.J||xe!=4||p==7||(p==8||0>=Bi?hr(3):hr(2)),mr(this);var y=this.g.Z();this.X=y;e:if(pc(this)){var b=bc(this.g);c="";var L=b.length,G=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ge(this),ri(this);var nt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(G&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=y==200,Jf(this.i,this.u,this.A,this.l,this.R,xe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,Ce=this.g;if((Pt=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pt(Pt)){var Ut=Pt;break e}}Ut=null}if(y=Ut)fr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,y);else{this.o=!1,this.s=3,re(12),Ge(this),ri(this);break t}}if(this.P){y=!0;let He;for(;!this.J&&this.C<nt.length;)if(He=_c(this,nt),He==Ia){xe==4&&(this.s=4,re(14),y=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(He==ml){this.s=4,re(15),fr(this.i,this.l,nt,"[Invalid Chunk]"),y=!1;break}else fr(this.i,this.l,He,null),Es(this,He);if(pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||nt.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)fr(this.i,this.l,nt,"[Invalid Chunked Response]"),Ge(this),ri(this);else if(0<nt.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Ns(Le),Le.M=!0,re(11))}}else fr(this.i,this.l,nt,null),Es(this,nt);xe==4&&Ge(this),this.o&&!this.J&&(xe==4?Dc(this.j,this):(this.o=!1,Ts(this)))}else rd(this.g),y==400&&0<nt.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),Ge(this),ri(this)}}}catch{}finally{}};function pc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _c(c,p){var y=c.C,b=p.indexOf(`
`,y);return b==-1?Ia:(y=Number(p.substring(y,b)),isNaN(y)?ml:(b+=1,b+y>p.length?Ia:(p=p.slice(b,b+y),c.C=b+y,p)))}an.prototype.cancel=function(){this.J=!0,Ge(this)};function Ts(c){c.S=Date.now()+c.I,yc(c,c.I)}function yc(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=be(w(c.ba,c),p)}function mr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}an.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(gc(this.i,this.A),this.L!=2&&(hr(),re(17)),Ge(this),this.s=2,ri(this)):yc(this,this.S-c)};function ri(c){c.j.G==0||c.J||Dc(c.j,c)}function Ge(c){mr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,_s(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Es(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||gl(y.h,c))){if(!c.K&&gl(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ba(y),Ua(y);else break t;wl(y),re(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=be(w(y.Za,y),6e3));if(1>=Da(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Li(y,11)}else if((c.K||y.g==c)&&Ba(y),!pt(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let Ut=L[p];if(y.T=Ut[0],Ut=Ut[1],y.G==2)if(Ut[0]=="c"){y.K=Ut[1],y.ia=Ut[2];const Le=Ut[3];Le!=null&&(y.la=Le,y.j.info("VER="+y.la));const xe=Ut[4];xe!=null&&(y.Aa=xe,y.j.info("SVER="+y.Aa));const Bi=Ut[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(b=1.5*Bi,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const He=c.g;if(He){const hi=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var G=b.h;G.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Va(G,G.h),G.h=null))}if(b.D){const Rl=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(b.ya=Rl,Xt(b.I,b.D,Rl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var nt=c;if(b.qa=Cc(b,b.J?b.ia:null,b.W),nt.K){on(b.h,nt);var Pt=nt,Ce=b.L;Ce&&(Pt.I=Ce),Pt.B&&(mr(Pt),Ts(Pt)),b.g=nt}else Ic(b);0<y.i.length&&La(y)}else Ut[0]!="stop"&&Ut[0]!="close"||Li(y,7);else y.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Li(y,7):bl(y):Ut[0]!="noop"&&y.l&&y.l.ta(Ut),y.v=0)}}hr(4)}catch{}}var vc=class{constructor(c,p){this.g=c,this.map=p}};function xi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ra(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Da(c){return c.h?1:c.g?c.g.size:0}function gl(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Va(c,p){c.g?c.g.add(p):c.h=p}function on(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}xi.prototype.cancel=function(){if(this.i=pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function pl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return Z(c.i)}function td(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,b=0;b<y;b++)p.push(c[b]);return p}p=[],y=0;for(b in c)p[y++]=c[b];return p}function Ca(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const b in c)p[y++]=b;return p}}}function _l(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Ca(c),b=td(c),L=b.length,G=0;G<L;G++)p.call(void 0,b[G],y&&y[G],c)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),L=null;if(0<=b){var G=c[y].substring(0,b);L=c[y].substring(b+1)}else G=c[y];p(G,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Se(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Se){this.h=c.h,bs(this,c.j),this.o=c.o,this.g=c.g,gr(this,c.s),this.l=c.l;var p=c.i,y=new Oi;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Ni(this,y),this.m=c.m}else c&&(p=String(c).match(As))?(this.h=!1,bs(this,p[1]||"",!0),this.o=On(p[2]||""),this.g=On(p[3]||"",!0),gr(this,p[4]),this.l=On(p[5]||"",!0),Ni(this,p[6]||"",!0),this.m=On(p[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}Se.prototype.toString=function(){var c=[],p=this.j;p&&c.push(ws(p,yl,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ws(p,yl,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(ws(y,y.charAt(0)=="/"?nd:vl,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",ws(y,xa)),c.join("")};function En(c){return new Se(c)}function bs(c,p,y){c.j=y?On(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function gr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Ni(c,p,y){p instanceof Oi?(c.i=p,Ec(c.i,c.h)):(y||(p=ws(p,id)),c.i=new Oi(p,c.h))}function Xt(c,p,y){c.i.set(p,y)}function Ss(c){return Xt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function On(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ws(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Tc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Tc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yl=/[#\/\?@]/g,vl=/[#\?:]/g,nd=/[#\?]/g,id=/[#\?@]/g,xa=/#/g;function Oi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Mn(c){c.g||(c.g=new Map,c.h=0,c.i&&ed(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=Oi.prototype,s.add=function(c,p){Mn(this),this.i=null,c=si(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function Mi(c,p){Mn(c),p=si(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Pi(c,p){return Mn(c),p=si(c,p),c.g.has(p)}s.forEach=function(c,p){Mn(this),this.g.forEach(function(y,b){y.forEach(function(L){c.call(p,L,b,this)},this)},this)},s.na=function(){Mn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let b=0;b<p.length;b++){const L=c[b];for(let G=0;G<L.length;G++)y.push(p[b])}return y},s.V=function(c){Mn(this);let p=[];if(typeof c=="string")Pi(this,c)&&(p=p.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},s.set=function(c,p){return Mn(this),this.i=null,c=si(this,c),Pi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Tl(c,p,y){Mi(c,p),0<y.length&&(c.i=null,c.g.set(si(c,p),Z(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var b=p[y];const G=encodeURIComponent(String(b)),nt=this.V(b);for(b=0;b<nt.length;b++){var L=G;nt[b]!==""&&(L+="="+encodeURIComponent(String(nt[b]))),c.push(L)}}return this.i=c.join("&")};function si(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ec(c,p){p&&!c.j&&(Mn(c),c.i=null,c.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(Mi(this,b),Tl(this,L,y))},c)),c.j=p}function Is(c,p){const y=new Nn;if(m.Image){const b=new Image;b.onload=U(Pn,y,"TestLoadImage: loaded",!0,p,b),b.onerror=U(Pn,y,"TestLoadImage: error",!1,p,b),b.onabort=U(Pn,y,"TestLoadImage: abort",!1,p,b),b.ontimeout=U(Pn,y,"TestLoadImage: timeout",!1,p,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function Yn(c,p){const y=new Nn,b=new AbortController,L=setTimeout(()=>{b.abort(),Pn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(G=>{clearTimeout(L),G.ok?Pn(y,"TestPingServer: ok",!0,p):Pn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Pn(y,"TestPingServer: error",!1,p)})}function Pn(c,p,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function Rs(){this.g=new ys}function ai(c,p,y){const b=y||"";try{_l(c,function(L,G){let nt=L;_(L)&&(nt=Qn(L)),p.push(b+G+"="+encodeURIComponent(nt))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function pr(c){this.l=c.Ub||null,this.j=c.eb||!1}K(pr,ll),pr.prototype.g=function(){return new Ui(this.l,this.j)},pr.prototype.i=function(c){return function(){return c}}({});function Ui(c,p){de.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(Ui,de),s=Ui.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,li(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?oi(this):li(this),this.readyState==3&&El(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,oi(this))},s.Qa=function(c){this.g&&(this.response=c,oi(this))},s.ga=function(){this.g&&oi(this)};function oi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,li(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function li(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Al(c){let p="";return At(c,function(y,b){p+=b,p+=":",p+=y,p+=`\r
`}),p}function Ue(c,p,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=Al(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Xt(c,p,y))}function jt(c){de.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(jt,de);var Na=/^https?$/i,Ds=["POST","PUT"];s=jt.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?ul(this.o):ul(ni),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){Ac(this,G);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ds,p,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,nt]of y)this.g.setRequestHeader(G,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vs(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Ac(this,G)}};function Ac(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Oa(c),ui(c)}function Oa(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),ui(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),jt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ma(this):this.bb())},s.bb=function(){Ma(this)};function Ma(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)We(c.Ea,0,c);else if(Gt(c,"readystatechange"),Un(c)==4){c.h=!1;try{const nt=c.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var b;if(b=nt===0){var L=String(c.D).match(As)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!Na.test(L?L.toLowerCase():"")}y=b}if(y)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var G=2<Un(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Oa(c)}}finally{ui(c)}}}}function ui(c,p){if(c.g){Vs(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Gt(c,"ready");try{y.onreadystatechange=b}catch{}}}function Vs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Sa(p)}};function bc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(c){const p={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(pt(c[b]))continue;var y=O(c[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=p[L]||[];p[L]=G,G.push(y)}x(p,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function Pa(c){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cs("baseRetryDelayMs",5e3,c),this.cb=Cs("retryDelaySeedMs",1e4,c),this.Wa=Cs("forwardChannelMaxRetries",2,c),this.wa=Cs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xi(c&&c.concurrentRequestLimit),this.Da=new Rs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Pa.prototype,s.la=8,s.G=1,s.connect=function(c,p,y,b){re(0),this.W=c,this.H=p||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=Cc(this,null,this.W),La(this)};function bl(c){if(Sc(c),c.G==3){var p=c.U++,y=En(c.I);if(Xt(y,"SID",c.K),Xt(y,"RID",p),Xt(y,"TYPE","terminate"),xs(c,y),p=new an(c,c.j,p),p.L=2,p.v=Ss(En(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=xc(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ts(p)}Vc(c)}function Ua(c){c.g&&(Ns(c),c.g.cancel(),c.g=null)}function Sc(c){Ua(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ba(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function La(c){if(!Ra(c.h)&&!c.s){c.s=!0;var p=c.Ga;rt||V(),mt||(rt(),mt=!0),qt.add(p,c),c.B=0}}function sd(c,p){return Da(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=be(w(c.Ga,c,p),Il(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new an(this,this.j,c);let G=this.o;if(this.S&&(G?(G=S(G),N(G,this.S)):G=this.S),this.m!==null||this.O||(L.H=G,G=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=wc(this,L,p),y=En(this.I),Xt(y,"RID",c),Xt(y,"CVER",22),this.D&&Xt(y,"X-HTTP-Session-Id",this.D),xs(this,y),G&&(this.O?p="headers="+encodeURIComponent(String(Al(G)))+"&"+p:this.m&&Ue(y,this.m,G)),Va(this.h,L),this.Ua&&Xt(y,"TYPE","init"),this.P?(Xt(y,"$req",p),Xt(y,"SID","null"),L.T=!0,Kn(L,y,null)):Kn(L,y,p),this.G=2}}else this.G==3&&(c?Sl(this,c):this.i.length==0||Ra(this.h)||Sl(this))};function Sl(c,p){var y;p?y=p.l:y=c.U++;const b=En(c.I);Xt(b,"SID",c.K),Xt(b,"RID",y),Xt(b,"AID",c.T),xs(c,b),c.m&&c.o&&Ue(b,c.m,c.o),y=new an(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=wc(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Va(c.h,y),Kn(y,b,p)}function xs(c,p){c.H&&At(c.H,function(y,b){Xt(p,b,y)}),c.l&&_l({},function(y,b){Xt(p,b,y)})}function wc(c,p,y){y=Math.min(c.i.length,y);var b=c.l?w(c.l.Na,c.l,c):null;t:{var L=c.i;let G=-1;for(;;){const nt=["count="+y];G==-1?0<y?(G=L[0].g,nt.push("ofs="+G)):G=0:nt.push("ofs="+G);let Pt=!0;for(let Ce=0;Ce<y;Ce++){let Ut=L[Ce].g;const Le=L[Ce].map;if(Ut-=G,0>Ut)G=Math.max(0,L[Ce].g-100),Pt=!1;else try{ai(Le,nt,"req"+Ut+"_")}catch{b&&b(Le)}}if(Pt){b=nt.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,b}function Ic(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;rt||V(),mt||(rt(),mt=!0),qt.add(p,c),c.v=0}}function wl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=be(w(c.Fa,c),Il(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=be(w(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Ua(this),Rc(this))};function Ns(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Rc(c){c.g=new an(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=En(c.qa);Xt(p,"RID","rpc"),Xt(p,"SID",c.K),Xt(p,"AID",c.T),Xt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xt(p,"TO",c.ja),Xt(p,"TYPE","xmlhttp"),xs(c,p),c.m&&c.o&&Ue(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Ss(En(p)),y.m=null,y.P=!0,Ci(y,c)}s.Za=function(){this.C!=null&&(this.C=null,Ua(this),wl(this),re(19))};function Ba(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Dc(c,p){var y=null;if(c.g==p){Ba(c),Ns(c),c.g=null;var b=2}else if(gl(c.h,p))y=p.D,on(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=cr(),Gt(b,new Ve(b,y)),La(c)}else Ic(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&sd(c,p)||b==2&&wl(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:Li(c,5);break;case 4:Li(c,10);break;case 3:Li(c,6);break;default:Li(c,2)}}}function Il(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function Li(c,p){if(c.j.info("Error code "+p),p==2){var y=w(c.fb,c),b=c.Xa;const L=!b;b=new Se(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||bs(b,"https"),Ss(b),L?Is(b.toString(),y):Yn(b.toString(),y)}else re(2);c.G=0,c.l&&c.l.sa(p),Vc(c),Sc(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Vc(c){if(c.G=0,c.ka=[],c.l){const p=pl(c.h);(p.length!=0||c.i.length!=0)&&($(c.ka,p),$(c.ka,c.i),c.h.i.length=0,Z(c.i),c.i.length=0),c.l.ra()}}function Cc(c,p,y){var b=y instanceof Se?En(y):new Se(y);if(b.g!="")p&&(b.g=p+"."+b.g),gr(b,b.s);else{var L=m.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var G=new Se(null);b&&bs(G,b),p&&(G.g=p),L&&gr(G,L),y&&(G.l=y),b=G}return y=c.D,p=c.ya,y&&p&&Xt(b,y,p),Xt(b,"VER",c.la),xs(c,b),b}function xc(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new jt(new pr({eb:y})):new jt(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}s=Nc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ka(){}ka.prototype.g=function(c,p){return new ln(c,p)};function ln(c,p){de.call(this),this.g=new Pa(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!pt(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!pt(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ci(this)}K(ln,de),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){bl(this.g)},ln.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Qn(c),c=y);p.i.push(new vc(p.Ya++,c)),p.G==3&&La(p)},ln.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,ln.aa.N.call(this)};function Oc(c){Di.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}K(Oc,Di);function Mc(){hl.call(this),this.status=1}K(Mc,hl);function ci(c){this.g=c}K(ci,Nc),ci.prototype.ua=function(){Gt(this.g,"a")},ci.prototype.ta=function(c){Gt(this.g,new Oc(c))},ci.prototype.sa=function(c){Gt(this.g,new Mc)},ci.prototype.ra=function(){Gt(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Q0=function(){return new ka},H0=function(){return cr()},G0=ei,yg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dr.NO_ERROR=0,dr.TIMEOUT=8,dr.HTTP_ERROR=6,Fh=dr,Vi.COMPLETE="complete",j0=Vi,cl.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",de.prototype.listen=de.prototype.K,Tu=cl,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,F0=jt}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const GT="@firebase/firestore",HT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new $g("@firebase/firestore");function Eo(){return Zr.logLevel}function ZR(s){Zr.setLogLevel(s)}function tt(s,...t){if(Zr.logLevel<=Mt.DEBUG){const e=t.map(ep);Zr.debug(`Firestore (${Zo}): ${s}`,...e)}}function Te(s,...t){if(Zr.logLevel<=Mt.ERROR){const e=t.map(ep);Zr.error(`Firestore (${Zo}): ${s}`,...e)}}function bi(s,...t){if(Zr.logLevel<=Mt.WARN){const e=t.map(ep);Zr.warn(`Firestore (${Zo}): ${s}`,...e)}}function ep(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(s="Unexpected state"){const t=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: `+s;throw Te(t),new Error(t)}function ct(s,t){s||ot()}function WR(s,t){s||ot()}function st(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends _a{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class JR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Fe.UNAUTHENTICATED))}shutdown(){}}class t1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class e1{constructor(t){this.t=t,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ct(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new Ze;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ze,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ze)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new K0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string"),new Fe(t)}}class n1{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class i1{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new n1(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r1{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,M0(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){ct(this.o===void 0);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new QT(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ct(typeof e.token=="string"),this.R=e.token,new QT(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=s1(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function Tt(s,t){return s<t?-1:s>t?1:0}function vg(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=s.codePointAt(e),o=t.codePointAt(e);if(r!==o){if(r<128&&o<128)return Tt(r,o);{const u=np(),h=a1(u.encode(KT(s,e)),u.encode(KT(t,e)));return h!==0?h:Tt(r,o)}}e+=r>65535?2:1}return Tt(s.length,t.length)}function KT(s,t){return s.codePointAt(t)>65535?s.substring(t,t+2):s.substring(t,t+1)}function a1(s,t){for(let e=0;e<s.length&&e<t.length;++e)if(s[e]!==t[e])return Tt(s[e],t[e]);return Tt(s.length,t.length)}function No(s,t,e){return s.length===t.length&&s.every((r,o)=>e(r,t[o]))}function X0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=-62135596800,XT=1e6;class ue{static now(){return ue.fromMillis(Date.now())}static fromDate(t){return ue.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*XT);return new ue(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new J(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<YT)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XT}_compareTo(t){return this.seconds===t.seconds?Tt(this.nanoseconds,t.nanoseconds):Tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-YT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(t){return new ft(t)}static min(){return new ft(new ue(0,0))}static max(){return new ft(new ue(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="__name__";class _i{constructor(t,e,r){e===void 0?e=0:e>t.length&&ot(),r===void 0?r=t.length-e:r>t.length-e&&ot(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return _i.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _i?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=_i.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Tt(t.length,e.length)}static compareSegments(t,e){const r=_i.isNumericId(t),o=_i.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?_i.extractNumericId(t).compare(_i.extractNumericId(e)):vg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qr.fromString(t.substring(4,t.length-2))}}class Nt extends _i{construct(t,e,r){return new Nt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new Nt(e)}static emptyPath(){return new Nt([])}}const o1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends _i{construct(t,e,r){return new oe(t,e,r)}static isValidIdentifier(t){return o1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$T}static keyField(){return new oe([$T])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new J(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new J(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new J(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oe(e)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.path=t}static fromPath(t){return new it(Nt.fromString(t))}static fromName(t){return new it(Nt.fromString(t).popFirst(5))}static empty(){return new it(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=-1;class nf{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Tg(s){return s.fields.find(t=>t.kind===2)}function $s(s){return s.fields.filter(t=>t.kind!==2)}nf.UNKNOWN_ID=-1;class jh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Mu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Mu(0,Cn.min())}}function $0(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=ft.fromTimestamp(r===1e9?new ue(e+1,0):new ue(e,r));return new Cn(o,it.empty(),t)}function Z0(s){return new Cn(s.readTime,s.key,Oo)}class Cn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Cn(ft.min(),it.empty(),Oo)}static max(){return new Cn(ft.max(),it.empty(),Oo)}}function ip(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=it.comparator(s.documentKey,t.documentKey),e!==0?e:Tt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(s){if(s.code!==j.FAILED_PRECONDITION||s.message!==W0)throw s;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new B((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof B?e:B.resolve(e)}catch(e){return B.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):B.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):B.reject(e)}static resolve(t){return new B((e,r)=>{e(t)})}static reject(t){return new B((e,r)=>{r(t)})}static waitFor(t){return new B((e,r)=>{let o=0,u=0,h=!1;t.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&e()},g=>r(g))}),h=!0,u===o&&e()})}static or(t){let e=B.resolve(!1);for(const r of t)e=e.next(o=>o?B.resolve(o):r());return e}static forEach(t,e){const r=[];return t.forEach((o,u)=>{r.push(e.call(this,o,u))}),this.waitFor(r)}static mapArray(t,e){return new B((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;e(t[_]).next(T=>{h[_]=T,++m,m===u&&r(h)},T=>o(T))}})}static doWhile(t,e){return new B((r,o)=>{const u=()=>{t()===!0?e().next(()=>{u()},o):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="SimpleDb";class bf{static open(t,e,r,o){try{return new bf(e,t.transaction(o,r))}catch(u){throw new wu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.m=new Ze,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{e.error?this.m.reject(new wu(t,e.error)):this.m.resolve()},this.transaction.onerror=r=>{const o=rp(r.target.error);this.m.reject(new wu(t,o))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(tt(Vn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new u1(e)}}class Ei{static delete(t){return tt(Vn,"Removing database:",t),Ws(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!I0())return!1;if(Ei.v())return!0;const t=tf(),e=Ei.C(t),r=0<e&&e<10,o=tA(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static C(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.O=r,Ei.C(tf())===12.2&&Te("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(tt(Vn,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;e(h)},o.onblocked=()=>{r(new wu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new J(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new J(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new wu(t,h))},o.onupgradeneeded=u=>{tt(Vn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.O.B(h,o.transaction,u.oldVersion,this.version).next(()=>{tt(Vn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.N(t);const m=bf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next(_=>(m.S(),_)).catch(_=>(m.abort(_),B.reject(_))).toPromise();return g.catch(()=>{}),await m.p,g}catch(m){const g=m,_=g.name!=="FirebaseError"&&h<3;if(tt(Vn,"Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tA(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class l1{constructor(t){this.q=t,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.U=t}delete(){return Ws(this.q.delete())}}class wu extends J{constructor(t,e){super(j.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function os(s){return s.name==="IndexedDbTransactionError"}class u1{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(Vn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(Vn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ws(r)}add(t){return tt(Vn,"ADD",this.store.name,t,t),Ws(this.store.add(t))}get(t){return Ws(this.store.get(t)).next(e=>(e===void 0&&(e=null),tt(Vn,"GET",this.store.name,t,e),e))}delete(t){return tt(Vn,"DELETE",this.store.name,t),Ws(this.store.delete(t))}count(){return tt(Vn,"COUNT",this.store.name),Ws(this.store.count())}G(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new B((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}})}{const u=this.cursor(r),h=[];return this.j(u,(m,g)=>{h.push(g)}).next(()=>h)}}H(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new B((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}J(t,e){tt(Vn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.Y=!1;const o=this.cursor(r);return this.j(o,(u,h,m)=>m.delete())}Z(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.j(o,e)}X(t){const e=this.cursor({});return new B((r,o)=>{e.onerror=u=>{const h=rp(u.target.error);o(h)},e.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}j(t,e){const r=[];return new B((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new l1(m),_=e(m.primaryKey,m.value,g);if(_ instanceof B){const T=_.catch(A=>(g.done(),B.reject(A)));r.push(T)}g.isDone?o():g.K===null?m.continue():m.continue(g.K)}}).next(()=>B.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.Y?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Ws(s){return new B((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=rp(r.target.error);e(o)}})}let ZT=!1;function rp(s){const t=Ei.C(tf());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZT||(ZT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Iu="IndexBackfiller";class c1{constructor(t,e){this.asyncQueue=t,this.ee=e,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){tt(Iu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ee.ne();tt(Iu,`Documents written: ${e}`)}catch(e){os(e)?tt(Iu,"Ignoring IndexedDB error during index backfill: ",e):await as(e)}await this.te(6e4)})}}class h1{constructor(t,e){this.localStore=t,this.persistence=e}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.re(e,t))}re(t,e){const r=new Set;let o=e,u=!0;return B.doWhile(()=>u===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(h=>{if(h!==null&&!r.has(h))return tt(Iu,`Processing collection: ${h}`),this.ie(t,h,o).next(m=>{o-=m,r.add(h)});u=!1})).next(()=>e-o)}ie(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next(()=>this.se(o,u)).next(m=>(tt(Iu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m))).next(()=>h.size)}))}se(t,e){let r=t;return e.changes.forEach((o,u)=>{const h=Z0(u);ip(h,r)>0&&(r=h)}),new Cn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}_n.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=-1;function Zu(s){return s==null}function Pu(s){return s===0&&1/s==-1/0}function eA(s){return typeof s=="number"&&Number.isInteger(s)&&!Pu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="";function rn(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=WT(t)),t=f1(s.get(e),t);return WT(t)}function f1(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case rf:e+="";break;default:e+=u}}return e}function WT(s){return s+rf+""}function vi(s){const t=s.length;if(ct(t>=2),t===2)return ct(s.charAt(0)===rf&&s.charAt(1)===""),Nt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(rf,u);switch((h<0||h>e)&&ot(),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:ot()}u=h+2}return new Nt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="remoteDocuments",Wu="owner",go="owner",Uu="mutationQueues",d1="userId",Jn="mutations",JT="batchId",ia="userMutationsIndex",tE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s,t){return[s,rn(t)]}function nA(s,t,e){return[s,rn(t),e]}const m1={},Mo="documentMutations",sf="remoteDocumentsV14",g1=["prefixPath","collectionGroup","readTime","documentId"],Hh="documentKeyIndex",p1=["prefixPath","collectionGroup","documentId"],iA="collectionGroupIndex",_1=["collectionGroup","readTime","prefixPath","documentId"],Lu="remoteDocumentGlobal",Eg="remoteDocumentGlobalKey",Po="targets",rA="queryTargetsIndex",y1=["canonicalId","targetId"],Uo="targetDocuments",v1=["targetId","path"],sp="documentTargetsIndex",T1=["path","targetId"],af="targetGlobalKey",aa="targetGlobal",Bu="collectionParents",E1=["collectionId","parent"],Lo="clientMetadata",A1="clientId",Sf="bundles",b1="bundleId",wf="namedQueries",S1="name",ap="indexConfiguration",w1="indexId",Ag="collectionGroupIndex",I1="collectionGroup",of="indexState",R1=["indexId","uid"],sA="sequenceNumberIndex",D1=["uid","sequenceNumber"],lf="indexEntries",V1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aA="documentKeyIndex",C1=["indexId","uid","orderedDocumentKey"],If="documentOverlays",x1=["userId","collectionPath","documentId"],bg="collectionPathOverlayIndex",N1=["userId","collectionPath","largestBatchId"],oA="collectionGroupOverlayIndex",O1=["userId","collectionGroup","largestBatchId"],op="globals",M1="name",lA=[Uu,Jn,Mo,Zs,Po,Wu,aa,Uo,Lo,Lu,Bu,Sf,wf],P1=[...lA,If],uA=[Uu,Jn,Mo,sf,Po,Wu,aa,Uo,Lo,Lu,Bu,Sf,wf,If],cA=uA,lp=[...cA,ap,of,lf],U1=lp,L1=[...lp,op];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends J0{constructor(t,e){super(),this.ue=t,this.currentSequenceNumber=e}}function Me(s,t){const e=st(s);return Ei.M(e.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function ls(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function hA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,e){this.comparator=t,this.root=e||Xe.EMPTY}insert(t,e){return new ne(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Uh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Uh(this.root,t,this.comparator,!0)}}class Uh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xe{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Xe.RED,this.left=o??Xe.EMPTY,this.right=u??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Xe(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Xe.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const t=this.left.check();if(t!==this.right.check())throw ot();return t+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(t,e,r,o,u){return this}insert(t,e,r){return new Xe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nE(this.data.getIterator())}getIteratorFrom(t){return new nE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Yt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Yt(this.comparator);return e.data=t,e}}class nE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function po(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(oe.comparator)}static empty(){return new yn([])}unionWith(t){let e=new Yt(oe.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new yn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return No(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new fA("Invalid base64 string: "+u):u}}(t);return new pe(e)}static fromUint8Array(t){const e=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new pe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pe.EMPTY_BYTE_STRING=new pe("");const k1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(s){if(ct(!!s),typeof s=="string"){let t=0;const e=k1.exec(s);if(ct(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ae(s.seconds),nanos:ae(s.nanos)}}function ae(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ir(s){return typeof s=="string"?pe.fromBase64String(s):pe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="server_timestamp",mA="__type__",gA="__previous_value__",pA="__local_write_time__";function Rf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[mA])===null||e===void 0?void 0:e.stringValue)===dA}function Df(s){const t=s.mapValue.fields[gA];return Rf(t)?Df(t):t}function ku(s){const t=nr(s.mapValue.fields[pA].timestampValue);return new ue(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,e,r,o,u,h,m,g,_){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}const wg="(default)";class Wr{constructor(t,e){this.projectId=t,this.database=e||wg}static empty(){return new Wr("","")}get isDefaultDatabase(){return this.database===wg}isEqual(t){return t instanceof Wr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="__type__",_A="__max__",jr={mapValue:{fields:{__type__:{stringValue:_A}}}},cp="__vector__",Bo="value",Qh={nullValue:"NULL_VALUE"};function Jr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Rf(s)?4:yA(s)?9007199254740991:Vf(s)?10:11:ot()}function Si(s,t){if(s===t)return!0;const e=Jr(s);if(e!==Jr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return ku(s).isEqual(ku(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=nr(o.timestampValue),m=nr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(o,u){return ir(o.bytesValue).isEqual(ir(u.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(o,u){return ae(o.geoPointValue.latitude)===ae(u.geoPointValue.latitude)&&ae(o.geoPointValue.longitude)===ae(u.geoPointValue.longitude)}(s,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ae(o.integerValue)===ae(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ae(o.doubleValue),m=ae(u.doubleValue);return h===m?Pu(h)===Pu(m):isNaN(h)&&isNaN(m)}return!1}(s,t);case 9:return No(s.arrayValue.values||[],t.arrayValue.values||[],Si);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(eE(h)!==eE(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Si(h[g],m[g])))return!1;return!0}(s,t);default:return ot()}}function zu(s,t){return(s.values||[]).find(e=>Si(e,t))!==void 0}function ts(s,t){if(s===t)return 0;const e=Jr(s),r=Jr(t);if(e!==r)return Tt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Tt(s.booleanValue,t.booleanValue);case 2:return function(u,h){const m=ae(u.integerValue||u.doubleValue),g=ae(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,t);case 3:return iE(s.timestampValue,t.timestampValue);case 4:return iE(ku(s),ku(t));case 5:return vg(s.stringValue,t.stringValue);case 6:return function(u,h){const m=ir(u),g=ir(h);return m.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const T=Tt(m[_],g[_]);if(T!==0)return T}return Tt(m.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(u,h){const m=Tt(ae(u.latitude),ae(h.latitude));return m!==0?m:Tt(ae(u.longitude),ae(h.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return rE(s.arrayValue,t.arrayValue);case 10:return function(u,h){var m,g,_,T;const A=u.fields||{},w=h.fields||{},U=(m=A[Bo])===null||m===void 0?void 0:m.arrayValue,K=(g=w[Bo])===null||g===void 0?void 0:g.arrayValue,Z=Tt(((_=U==null?void 0:U.values)===null||_===void 0?void 0:_.length)||0,((T=K==null?void 0:K.values)===null||T===void 0?void 0:T.length)||0);return Z!==0?Z:rE(U,K)}(s.mapValue,t.mapValue);case 11:return function(u,h){if(u===jr.mapValue&&h===jr.mapValue)return 0;if(u===jr.mapValue)return 1;if(h===jr.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},T=Object.keys(_);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const w=vg(g[A],T[A]);if(w!==0)return w;const U=ts(m[g[A]],_[T[A]]);if(U!==0)return U}return Tt(g.length,T.length)}(s.mapValue,t.mapValue);default:throw ot()}}function iE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Tt(s,t);const e=nr(s),r=nr(t),o=Tt(e.seconds,r.seconds);return o!==0?o:Tt(e.nanos,r.nanos)}function rE(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=ts(e[o],r[o]);if(u)return u}return Tt(e.length,r.length)}function ko(s){return Ig(s)}function Ig(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=nr(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return ir(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return it.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Ig(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Ig(e.fields[h])}`;return o+"}"}(s.mapValue):ot()}function Kh(s){switch(Jr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Df(s);return t?16+Kh(t):16;case 5:return 2*s.stringValue.length;case 6:return ir(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+Kh(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return ls(r.fields,(u,h)=>{o+=u.length+Kh(h)}),o}(s.mapValue);default:throw ot()}}function la(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Rg(s){return!!s&&"integerValue"in s}function qu(s){return!!s&&"arrayValue"in s}function sE(s){return!!s&&"nullValue"in s}function aE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yh(s){return!!s&&"mapValue"in s}function Vf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[up])===null||e===void 0?void 0:e.stringValue)===cp}function Ru(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return ls(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Ru(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ru(s.arrayValue.values[e]);return t}return Object.assign({},s)}function yA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===_A}const vA={mapValue:{fields:{[up]:{stringValue:cp},[Bo]:{arrayValue:{}}}}};function q1(s){return"nullValue"in s?Qh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?la(Wr.empty(),it.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Vf(s)?vA:{mapValue:{}}:ot()}function F1(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?la(Wr.empty(),it.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?vA:"mapValue"in s?Vf(s)?{mapValue:{}}:jr:ot()}function oE(s,t){const e=ts(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function lE(s,t){const e=ts(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.value=t}static empty(){return new $e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Yh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ru(e)}setAll(t){let e=oe.emptyPath(),r={},o=[];t.forEach((h,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}h?r[m.lastSegment()]=Ru(h):o.push(m.lastSegment())});const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());Yh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Si(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];Yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){ls(e,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new $e(Ru(this.value))}}function TA(s){const t=[];return ls(s.fields,(e,r)=>{const o=new oe([e]);if(Yh(r)){const u=TA(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,r,o,u,h,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new ie(t,0,ft.min(),ft.min(),ft.min(),$e.empty(),0)}static newFoundDocument(t,e,r,o){return new ie(t,1,e,ft.min(),r,o,0)}static newNoDocument(t,e){return new ie(t,2,e,ft.min(),ft.min(),$e.empty(),0)}static newUnknownDocument(t,e){return new ie(t,3,e,ft.min(),ft.min(),$e.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$e.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){this.position=t,this.inclusive=e}}function uE(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=it.comparator(it.fromName(h.referenceValue),e.key):r=ts(h,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function cE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Si(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t,e="asc"){this.field=t,this.dir=e}}function j1(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{}class Ot extends EA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new G1(t,e,r):e==="array-contains"?new K1(t,r):e==="in"?new RA(t,r):e==="not-in"?new Y1(t,r):e==="array-contains-any"?new X1(t,r):new Ot(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new H1(t,r):new Q1(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(ts(e,this.value)):e!==null&&Jr(this.value)===Jr(e)&&this.matchesComparison(ts(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends EA{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Kt(t,e)}matches(t){return zo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zo(s){return s.op==="and"}function Dg(s){return s.op==="or"}function hp(s){return AA(s)&&zo(s)}function AA(s){for(const t of s.filters)if(t instanceof Kt)return!1;return!0}function Vg(s){if(s instanceof Ot)return s.field.canonicalString()+s.op.toString()+ko(s.value);if(hp(s))return s.filters.map(t=>Vg(t)).join(",");{const t=s.filters.map(e=>Vg(e)).join(",");return`${s.op}(${t})`}}function bA(s,t){return s instanceof Ot?function(r,o){return o instanceof Ot&&r.op===o.op&&r.field.isEqual(o.field)&&Si(r.value,o.value)}(s,t):s instanceof Kt?function(r,o){return o instanceof Kt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,m)=>u&&bA(h,o.filters[m]),!0):!1}(s,t):void ot()}function SA(s,t){const e=s.filters.concat(t);return Kt.create(e,s.op)}function wA(s){return s instanceof Ot?function(e){return`${e.field.canonicalString()} ${e.op} ${ko(e.value)}`}(s):s instanceof Kt?function(e){return e.op.toString()+" {"+e.getFilters().map(wA).join(" ,")+"}"}(s):"Filter"}class G1 extends Ot{constructor(t,e,r){super(t,e,r),this.key=it.fromName(r.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.matchesComparison(e)}}class H1 extends Ot{constructor(t,e){super(t,"in",e),this.keys=IA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Q1 extends Ot{constructor(t,e){super(t,"not-in",e),this.keys=IA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function IA(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>it.fromName(r.referenceValue))}class K1 extends Ot{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return qu(e)&&zu(e.arrayValue,this.value)}}class RA extends Ot{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&zu(this.value.arrayValue,e)}}class Y1 extends Ot{constructor(t,e){super(t,"not-in",e)}matches(t){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!zu(this.value.arrayValue,e)}}class X1 extends Ot{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!qu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,e=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.le=null}}function Cg(s,t=null,e=[],r=[],o=null,u=null,h=null){return new $1(s,t,e,r,o,u,h)}function ua(s){const t=st(s);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Vg(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Zu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>ko(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>ko(r)).join(",")),t.le=e}return t.le}function Ju(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!j1(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!bA(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!cE(s.startAt,t.startAt)&&cE(s.endAt,t.endAt)}function uf(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function cf(s,t){return s.filters.filter(e=>e instanceof Ot&&e.field.isEqual(t))}function hE(s,t,e){let r=Qh,o=!0;for(const u of cf(s,t)){let h=Qh,m=!0;switch(u.op){case"<":case"<=":h=q1(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Qh}oE({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];oE({value:r,inclusive:o},{value:h,inclusive:e.inclusive})<0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}function fE(s,t,e){let r=jr,o=!0;for(const u of cf(s,t)){let h=jr,m=!0;switch(u.op){case">=":case">":h=F1(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=jr}lE({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];lE({value:r,inclusive:o},{value:h,inclusive:e.inclusive})>0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t,e=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function DA(s,t,e,r,o,u,h,m){return new sr(s,t,e,r,o,u,h,m)}function Wo(s){return new sr(s)}function dE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function fp(s){return s.collectionGroup!==null}function Io(s){const t=st(s);if(t.he===null){t.he=[];const e=new Set;for(const u of t.explicitOrderBy)t.he.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Yt(oe.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{e.has(u.canonicalString())||u.isKeyField()||t.he.push(new Fu(u,r))}),e.has(oe.keyField().canonicalString())||t.he.push(new Fu(oe.keyField(),r))}return t.he}function fn(s){const t=st(s);return t.Pe||(t.Pe=Z1(t,Io(s))),t.Pe}function Z1(s,t){if(s.limitType==="F")return Cg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Fu(o.field,u)});const e=s.endAt?new es(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new es(s.startAt.position,s.startAt.inclusive):null;return Cg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function xg(s,t){const e=s.filters.concat([t]);return new sr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function hf(s,t,e){return new sr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function tc(s,t){return Ju(fn(s),fn(t))&&s.limitType===t.limitType}function VA(s){return`${ua(fn(s))}|lt:${s.limitType}`}function Ao(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(o=>wA(o)).join(", ")}]`),Zu(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>ko(o)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>ko(o)).join(",")),`Target(${r})`}(fn(s))}; limitType=${s.limitType})`}function ec(s,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):it.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,t)&&function(r,o){for(const u of Io(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,t)&&function(r,o){return!(r.startAt&&!function(h,m,g){const _=uE(h,m,g);return h.inclusive?_<=0:_<0}(r.startAt,Io(r),o)||r.endAt&&!function(h,m,g){const _=uE(h,m,g);return h.inclusive?_>=0:_>0}(r.endAt,Io(r),o))}(s,t)}function CA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function xA(s){return(t,e)=>{let r=!1;for(const o of Io(s)){const u=W1(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function W1(s,t,e){const r=s.field.isKeyField()?it.comparator(t.key,e.key):function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?ts(g,_):ot()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ls(this.inner,(e,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return hA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new ne(it.comparator);function vn(){return J1}const NA=new ne(it.comparator);function Eu(...s){let t=NA;for(const e of s)t=t.insert(e.key,e);return t}function OA(s){let t=NA;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ti(){return Du()}function MA(){return Du()}function Du(){return new ar(s=>s.toString(),(s,t)=>s.isEqual(t))}const tD=new ne(it.comparator),eD=new Yt(it.comparator);function wt(...s){let t=eD;for(const e of s)t=t.add(e);return t}const nD=new Yt(Tt);function dp(){return nD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(t)?"-0":t}}function PA(s){return{integerValue:""+s}}function UA(s,t){return eA(t)?PA(t):mp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function iD(s,t,e){return s instanceof qo?function(o,u){const h={fields:{[mA]:{stringValue:dA},[pA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Rf(u)&&(u=Df(u)),u&&(h.fields[gA]=u),{mapValue:h}}(e,t):s instanceof ca?BA(s,t):s instanceof ha?kA(s,t):function(o,u){const h=LA(o,u),m=mE(h)+mE(o.Ie);return Rg(h)&&Rg(o.Ie)?PA(m):mp(o.serializer,m)}(s,t)}function rD(s,t,e){return s instanceof ca?BA(s,t):s instanceof ha?kA(s,t):e}function LA(s,t){return s instanceof Fo?function(r){return Rg(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class qo extends Cf{}class ca extends Cf{constructor(t){super(),this.elements=t}}function BA(s,t){const e=zA(t);for(const r of s.elements)e.some(o=>Si(o,r))||e.push(r);return{arrayValue:{values:e}}}class ha extends Cf{constructor(t){super(),this.elements=t}}function kA(s,t){let e=zA(t);for(const r of s.elements)e=e.filter(o=>!Si(o,r));return{arrayValue:{values:e}}}class Fo extends Cf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function mE(s){return ae(s.integerValue||s.doubleValue)}function zA(s){return qu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,e){this.field=t,this.transform=e}}function sD(s,t){return s.field.isEqual(t.field)&&function(r,o){return r instanceof ca&&o instanceof ca||r instanceof ha&&o instanceof ha?No(r.elements,o.elements,Si):r instanceof Fo&&o instanceof Fo?Si(r.Ie,o.Ie):r instanceof qo&&o instanceof qo}(s.transform,t.transform)}class aD{constructor(t,e){this.version=t,this.transformResults=e}}class le{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new le}static exists(t){return new le(void 0,t)}static updateTime(t){return new le(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class xf{}function qA(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new tl(s.key,le.none()):new Jo(s.key,s.data,le.none());{const e=s.data,r=$e.empty();let o=new Yt(oe.comparator);for(let u of t.fields)if(!o.has(u)){let h=e.field(u);h===null&&u.length>1&&(u=u.popLast(),h=e.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new or(s.key,r,new yn(o.toArray()),le.none())}}function oD(s,t,e){s instanceof Jo?function(o,u,h){const m=o.value.clone(),g=pE(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,t,e):s instanceof or?function(o,u,h){if(!Xh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=pE(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(FA(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,t,e):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function Vu(s,t,e,r){return s instanceof Jo?function(u,h,m,g){if(!Xh(u.precondition,h))return m;const _=u.value.clone(),T=_E(u.fieldTransforms,g,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,t,e,r):s instanceof or?function(u,h,m,g){if(!Xh(u.precondition,h))return m;const _=_E(u.fieldTransforms,g,h),T=h.data;return T.setAll(FA(u)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(s,t,e,r):function(u,h,m){return Xh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,t,e)}function lD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=LA(r.transform,o||null);u!=null&&(e===null&&(e=$e.empty()),e.set(r.field,u))}return e||null}function gE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&No(r,o,(u,h)=>sD(u,h))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Jo extends xf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class or extends xf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function FA(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function pE(s,t,e){const r=new Map;ct(s.length===e.length);for(let o=0;o<e.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,rD(h,m,e[o]))}return r}function _E(s,t,e){const r=new Map;for(const o of s){const u=o.transform,h=e.data.field(o.field);r.set(o.field,iD(u,h,t))}return r}class tl extends xf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gp extends xf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&oD(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Vu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Vu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=MA();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=e.has(o.key)?null:m;const g=qA(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),wt())}isEqual(t){return this.batchId===t.batchId&&No(this.mutations,t.mutations,(e,r)=>gE(e,r))&&No(this.baseMutations,t.baseMutations,(e,r)=>gE(e,r))}}class _p{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ct(t.mutations.length===r.length);let o=function(){return tD}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new _p(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,Bt;function jA(s){switch(s){case j.OK:return ot();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ot()}}function GA(s){if(s===void 0)return Te("GRPC error has no .code"),j.UNKNOWN;switch(s){case Re.OK:return j.OK;case Re.CANCELLED:return j.CANCELLED;case Re.UNKNOWN:return j.UNKNOWN;case Re.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Re.INTERNAL:return j.INTERNAL;case Re.UNAVAILABLE:return j.UNAVAILABLE;case Re.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Re.NOT_FOUND:return j.NOT_FOUND;case Re.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Re.ABORTED:return j.ABORTED;case Re.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Re.DATA_LOSS:return j.DATA_LOSS;default:return ot()}}(Bt=Re||(Re={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Qr([4294967295,4294967295],0);function yE(s){const t=np().encode(s),e=new q0;return e.update(t),new Uint8Array(e.digest())}function vE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Qr([e,r],0),new Qr([o,u],0)]}class vp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Au(`Invalid padding: ${e}`);if(r<0)throw new Au(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Au(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Qr.fromNumber(this.Ee)}Ae(t,e,r){let o=t.add(e.multiply(Qr.fromNumber(r)));return o.compare(cD)===1&&(o=new Qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=yE(t),[r,o]=vE(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);if(!this.Re(h))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new vp(u,o,e);return r.forEach(m=>h.insert(m)),h}insert(t){if(this.Ee===0)return;const e=yE(t),[r,o]=vE(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);this.Ve(h)}}Ve(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,rc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new ic(ft.min(),o,new ne(Tt),vn(),wt())}}class rc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new rc(r,e,wt(),wt(),wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t,e,r,o){this.me=t,this.removedTargetIds=e,this.key=r,this.fe=o}}class HA{constructor(t,e){this.targetId=t,this.ge=e}}class QA{constructor(t,e,r=pe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class TE{constructor(){this.pe=0,this.ye=EE(),this.we=pe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=wt(),e=wt(),r=wt();return this.ye.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ot()}}),new rc(this.we,this.Se,t,e,r)}Me(){this.be=!1,this.ye=EE()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,ct(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class hD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=vn(),this.$e=Lh(),this.Ue=Lh(),this.Ke=new ne(Tt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const r=this.He(e);switch(t.state){case 0:this.Je(e)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(t.resumeToken));break;default:ot()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((r,o)=>{this.Je(o)&&e(o)})}Ze(t){const e=t.targetId,r=t.ge.count,o=this.Xe(e);if(o){const u=o.target;if(uf(u))if(r===0){const h=new it(u.path);this.ze(e,h,ie.newNoDocument(h,ft.min()))}else ct(r===1);else{const h=this.et(e);if(h!==r){const m=this.tt(t),g=m?this.nt(m,t,h):1;if(g!==0){this.Ye(e);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,_)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let h,m;try{h=ir(r).toUint8Array()}catch(g){if(g instanceof fA)return bi("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new vp(h,o,u)}catch(g){return bi(g instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(t,e,r){return e.ge.count===r-this.st(t,e.targetId)?0:2}st(t,e){const r=this.ke.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const h=this.ke.it(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.ze(e,u,null),o++)}),o}ot(t){const e=new Map;this.qe.forEach((u,h)=>{const m=this.Xe(h);if(m){if(u.current&&uf(m.target)){const g=new it(m.target.path);this._t(g).has(h)||this.ut(h,g)||this.ze(h,g,ie.newNoDocument(g,t))}u.ve&&(e.set(h,u.Fe()),u.Me())}});let r=wt();this.Ue.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.Xe(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(t));const o=new ic(t,e,this.Ke,this.Qe,r);return this.Qe=vn(),this.$e=Lh(),this.Ue=Lh(),this.Ke=new ne(Tt),o}Ge(t,e){if(!this.Je(t))return;const r=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,r){if(!this.Je(t))return;const o=this.He(t);this.ut(t,e)?o.xe(e,1):o.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new TE,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Yt(Tt),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Yt(Tt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new TE),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Lh(){return new ne(it.comparator)}function EE(){return new ne(it.comparator)}const fD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mD={and:"AND",or:"OR"};class gD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ng(s,t){return s.useProto3Json||Zu(t)?t:{value:t}}function jo(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function KA(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function pD(s,t){return jo(s,t.toTimestamp())}function Ee(s){return ct(!!s),ft.fromTimestamp(function(e){const r=nr(e);return new ue(r.seconds,r.nanos)}(s))}function Tp(s,t){return Og(s,t).canonicalString()}function Og(s,t){const e=function(o){return new Nt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return t===void 0?e:e.child(t)}function YA(s){const t=Nt.fromString(s);return ct(rb(t)),t}function ju(s,t){return Tp(s.databaseId,t.path)}function Ai(s,t){const e=YA(t);if(e.get(1)!==s.databaseId.projectId)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new J(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new it(ZA(e))}function XA(s,t){return Tp(s.databaseId,t)}function $A(s){const t=YA(s);return t.length===4?Nt.emptyPath():ZA(t)}function Mg(s){return new Nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ZA(s){return ct(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function AE(s,t,e){return{name:ju(s,t),fields:e.value.mapValue.fields}}function WA(s,t,e){const r=Ai(s,t.name),o=Ee(t.updateTime),u=t.createTime?Ee(t.createTime):ft.min(),h=new $e({mapValue:{fields:t.fields}}),m=ie.newFoundDocument(r,o,u,h);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function _D(s,t){return"found"in t?function(r,o){ct(!!o.found),o.found.name,o.found.updateTime;const u=Ai(r,o.found.name),h=Ee(o.found.updateTime),m=o.found.createTime?Ee(o.found.createTime):ft.min(),g=new $e({mapValue:{fields:o.found.fields}});return ie.newFoundDocument(u,h,m,g)}(s,t):"missing"in t?function(r,o){ct(!!o.missing),ct(!!o.readTime);const u=Ai(r,o.missing),h=Ee(o.readTime);return ie.newNoDocument(u,h)}(s,t):ot()}function yD(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ot()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,T){return _.useProto3Json?(ct(T===void 0||typeof T=="string"),pe.fromBase64String(T||"")):(ct(T===void 0||T instanceof Buffer||T instanceof Uint8Array),pe.fromUint8Array(T||new Uint8Array))}(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(_){const T=_.code===void 0?j.UNKNOWN:GA(_.code);return new J(T,_.message||"")}(h);e=new QA(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Ai(s,r.document.name),u=Ee(r.document.updateTime),h=r.document.createTime?Ee(r.document.createTime):ft.min(),m=new $e({mapValue:{fields:r.document.fields}}),g=ie.newFoundDocument(o,u,h,m),_=r.targetIds||[],T=r.removedTargetIds||[];e=new $h(_,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Ai(s,r.document),u=r.readTime?Ee(r.readTime):ft.min(),h=ie.newNoDocument(o,u),m=r.removedTargetIds||[];e=new $h([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Ai(s,r.document),u=r.removedTargetIds||[];e=new $h([],u,o,null)}else{if(!("filter"in t))return ot();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new uD(o,u),m=r.targetId;e=new HA(m,h)}}return e}function Gu(s,t){let e;if(t instanceof Jo)e={update:AE(s,t.key,t.value)};else if(t instanceof tl)e={delete:ju(s,t.key)};else if(t instanceof or)e={update:AE(s,t.key,t.data),updateMask:SD(t.fieldMask)};else{if(!(t instanceof gp))return ot();e={verify:ju(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const m=h.transform;if(m instanceof qo)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ca)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ha)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Fo)return{fieldPath:h.field.canonicalString(),increment:m.Ie};throw ot()}(0,r))),t.precondition.isNone||(e.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:pD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ot()}(s,t.precondition)),e}function Pg(s,t){const e=t.currentDocument?function(u){return u.updateTime!==void 0?le.updateTime(Ee(u.updateTime)):u.exists!==void 0?le.exists(u.exists):le.none()}(t.currentDocument):le.none(),r=t.updateTransforms?t.updateTransforms.map(o=>function(h,m){let g=null;if("setToServerValue"in m)ct(m.setToServerValue==="REQUEST_TIME"),g=new qo;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new ca(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new ha(T)}else"increment"in m?g=new Fo(h,m.increment):ot();const _=oe.fromServerFormat(m.fieldPath);return new nc(_,g)}(s,o)):[];if(t.update){t.update.name;const o=Ai(s,t.update.name),u=new $e({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=function(g){const _=g.fieldPaths||[];return new yn(_.map(T=>oe.fromServerFormat(T)))}(t.updateMask);return new or(o,u,h,e,r)}return new Jo(o,u,e,r)}if(t.delete){const o=Ai(s,t.delete);return new tl(o,e)}if(t.verify){const o=Ai(s,t.verify);return new gp(o,e)}return ot()}function vD(s,t){return s&&s.length>0?(ct(t!==void 0),s.map(e=>function(o,u){let h=o.updateTime?Ee(o.updateTime):Ee(u);return h.isEqual(ft.min())&&(h=Ee(u)),new aD(h,o.transformResults||[])}(e,t))):[]}function JA(s,t){return{documents:[XA(s,t.path)]}}function tb(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=XA(s,o);const u=function(_){if(_.length!==0)return ib(Kt.create(_,"and"))}(t.filters);u&&(e.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(T=>function(w){return{field:bo(w.field),direction:ED(w.dir)}}(T))}(t.orderBy);h&&(e.structuredQuery.orderBy=h);const m=Ng(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ht:e,parent:o}}function eb(s){let t=$A(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ct(r===1);const T=e.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];e.where&&(u=function(A){const w=nb(A);return w instanceof Kt&&hp(w)?w.getFilters():[w]}(e.where));let h=[];e.orderBy&&(h=function(A){return A.map(w=>function(K){return new Fu(So(K.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(w))}(e.orderBy));let m=null;e.limit&&(m=function(A){let w;return w=typeof A=="object"?A.value:A,Zu(w)?null:w}(e.limit));let g=null;e.startAt&&(g=function(A){const w=!!A.before,U=A.values||[];return new es(U,w)}(e.startAt));let _=null;return e.endAt&&(_=function(A){const w=!A.before,U=A.values||[];return new es(U,w)}(e.endAt)),DA(t,o,h,u,m,"F",g,_)}function TD(s,t){const e=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function nb(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=So(e.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=So(e.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=So(e.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(e.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(s):s.fieldFilter!==void 0?function(e){return Ot.create(So(e.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Kt.create(e.compositeFilter.filters.map(r=>nb(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(s):ot()}function ED(s){return fD[s]}function AD(s){return dD[s]}function bD(s){return mD[s]}function bo(s){return{fieldPath:s.canonicalString()}}function So(s){return oe.fromServerFormat(s.fieldPath)}function ib(s){return s instanceof Ot?function(e){if(e.op==="=="){if(aE(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NAN"}};if(sE(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(aE(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NOT_NAN"}};if(sE(e.value))return{unaryFilter:{field:bo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(e.field),op:AD(e.op),value:e.value}}}(s):s instanceof Kt?function(e){const r=e.getFilters().map(o=>ib(o));return r.length===1?r[0]:{compositeFilter:{op:bD(e.op),filters:r}}}(s):ot()}function SD(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function rb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,e,r,o,u=ft.min(),h=ft.min(),m=pe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Ji(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.Tt=t}}function wD(s,t){let e;if(t.document)e=WA(s.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=it.fromSegments(t.noDocument.path),o=da(t.noDocument.readTime);e=ie.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ot();{const r=it.fromSegments(t.unknownDocument.path),o=da(t.unknownDocument.version);e=ie.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime(function(o){const u=new ue(o[0],o[1]);return ft.fromTimestamp(u)}(t.readTime)),e}function bE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:ff(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(u,h){return{name:ju(u,h.key),fields:h.data.value.mapValue.fields,updateTime:jo(u,h.version.toTimestamp()),createTime:jo(u,h.createTime.toTimestamp())}}(s.Tt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:fa(t.version)};else{if(!t.isUnknownDocument())return ot();r.unknownDocument={path:e.path.toArray(),version:fa(t.version)}}return r}function ff(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function fa(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function da(s){const t=new ue(s.seconds,s.nanoseconds);return ft.fromTimestamp(t)}function Js(s,t){const e=(t.baseMutations||[]).map(u=>Pg(s.Tt,u));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map(u=>Pg(s.Tt,u)),o=ue.fromMillis(t.localWriteTimeMs);return new pp(t.batchId,o,e,r)}function bu(s){const t=da(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?da(s.lastLimboFreeSnapshotVersion):ft.min();let r;return r=function(u){return u.documents!==void 0}(s.query)?function(u){return ct(u.documents.length===1),fn(Wo($A(u.documents[0])))}(s.query):function(u){return fn(eb(u))}(s.query),new Ji(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,pe.fromBase64String(s.resumeToken))}function ab(s,t){const e=fa(t.snapshotVersion),r=fa(t.lastLimboFreeSnapshotVersion);let o;o=uf(t.target)?JA(s.Tt,t.target):tb(s.Tt,t.target).ht;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ua(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Ep(s){const t=eb({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?hf(t,t.limit,"L"):t}function og(s,t){return new yp(t.largestBatchId,Pg(s.Tt,t.overlayMutation))}function SE(s,t){const e=t.path.lastSegment();return[s,rn(t.path.popLast()),e]}function wE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:fa(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{getBundleMetadata(t,e){return IE(t).get(e).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:da(u.createTime),version:u.version}}(r)})}saveBundleMetadata(t,e){return IE(t).put(function(o){return{bundleId:o.id,createTime:fa(Ee(o.createTime)),version:o.version}}(e))}getNamedQuery(t,e){return RE(t).get(e).next(r=>{if(r)return function(u){return{name:u.name,query:Ep(u.bundledQuery),readTime:da(u.readTime)}}(r)})}saveNamedQuery(t,e){return RE(t).put(function(o){return{name:o.name,readTime:fa(Ee(o.readTime)),bundledQuery:o.bundledQuery}}(e))}}function IE(s){return Me(s,Sf)}function RE(s){return Me(s,wf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,e){this.serializer=t,this.userId=e}static It(t,e){const r=e.uid||"";return new Nf(t,r)}getOverlay(t,e){return gu(t).get(SE(this.userId,e)).next(r=>r?og(this.serializer,r):null)}getOverlays(t,e){const r=Ti();return B.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){const o=[];return r.forEach((u,h)=>{const m=new yp(e,h);o.push(this.Et(t,m))}),B.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach(h=>o.add(rn(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(gu(t).J(bg,m))}),B.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Ti(),u=rn(e),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(t).G(bg,h).next(m=>{for(const g of m){const _=og(this.serializer,g);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(t,e,r,o){const u=Ti();let h;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gu(t).Z({index:oA,range:m},(g,_,T)=>{const A=og(this.serializer,_);u.size()<o||A.largestBatchId===h?(u.set(A.getKey(),A),h=A.largestBatchId):T.done()}).next(()=>u)}Et(t,e){return gu(t).put(function(o,u,h){const[m,g,_]=SE(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Gu(o.Tt,h.mutation)}}(this.serializer,this.userId,e))}}function gu(s){return Me(s,If)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{dt(t){return Me(t,op)}getSessionToken(t){return this.dt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?pe.fromUint8Array(r):pe.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(ae(t.integerValue));else if("doubleValue"in t){const r=ae(t.doubleValue);isNaN(r)?this.ft(e,13):(this.ft(e,15),Pu(r)?e.gt(0):e.gt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.ft(e,20),typeof r=="string"&&(r=nr(r)),e.yt(`${r.seconds||""}`),e.gt(r.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(ir(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ft(e,45),e.gt(r.latitude||0),e.gt(r.longitude||0)}else"mapValue"in t?yA(t)?this.ft(e,Number.MAX_SAFE_INTEGER):Vf(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):ot()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const r=t.fields||{};this.ft(e,55);for(const o of Object.keys(r))this.wt(o,e),this.Rt(r[o],e)}vt(t,e){var r,o;const u=t.fields||{};this.ft(e,53);const h=Bo,m=((o=(r=u[h].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.ft(e,15),e.gt(ae(m)),this.wt(h,e),this.Rt(u[h],e)}Ft(t,e){const r=t.values||[];this.ft(e,50);for(const o of r)this.Rt(o,e)}Dt(t,e){this.ft(e,37),it.fromName(t).path.forEach(r=>{this.ft(e,60),this.Mt(r,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}}ta.xt=new ta;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=255;function DD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function DE(s){const t=64-function(r){let o=0;for(let u=0;u<8;++u){const h=DD(255&r[u]);if(o+=h,h!==8)break}return o}(s);return Math.ceil(t/8)}class VD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Nt(r.value),r=e.next();this.Bt()}Lt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.kt(r.value),r=e.next();this.qt()}Qt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const o=e.codePointAt(0);this.Nt(240|o>>>18),this.Nt(128|63&o>>>12),this.Nt(128|63&o>>>6),this.Nt(128|63&o)}}this.Bt()}$t(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const o=e.codePointAt(0);this.kt(240|o>>>18),this.kt(128|63&o>>>12),this.kt(128|63&o>>>6),this.kt(128|63&o)}}this.qt()}Ut(t){const e=this.Kt(t),r=DE(e);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Gt(t){const e=this.Kt(t),r=DE(e);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}zt(){this.jt(_o),this.jt(255)}Ht(){this.Jt(_o),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Kt(t){const e=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Nt(t){const e=255&t;e===0?(this.jt(0),this.jt(255)):e===_o?(this.jt(_o),this.jt(0)):this.jt(e)}kt(t){const e=255&t;e===0?(this.Jt(0),this.Jt(255)):e===_o?(this.Jt(_o),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class CD{constructor(t){this.Zt=t}bt(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Ut(t)}Vt(){this.Zt.zt()}}class xD{constructor(t){this.Zt=t}bt(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class pu{constructor(){this.Zt=new VD,this.Xt=new CD(this.Zt),this.en=new xD(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t,e,r,o){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}nn(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new ea(this.indexId,this.documentKey,this.arrayValue,r)}}function Br(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=VE(s.arrayValue,t.arrayValue),e!==0?e:(e=VE(s.directionalValue,t.directionalValue),e!==0?e:it.comparator(s.documentKey,t.documentKey)))}function VE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t){this.rn=new Yt((e,r)=>oe.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const e of t.filters){const r=e;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(t){if(ct(t.collectionGroup===this.collectionId),this.an)return!1;const e=Tg(t);if(e!==void 0&&!this.cn(e))return!1;const r=$s(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.cn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.rn.size>0){const m=this.rn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.ln(m,g)||!this.hn(this.sn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.sn.length||!this.hn(this.sn[h++],m))return!1}return!0}Pn(){if(this.an)return null;let t=new Yt(oe.comparator);const e=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new jh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new jh(r.field,0))}for(const r of this.sn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new jh(r.field,r.dir==="asc"?0:1)));return new nf(nf.UNKNOWN_ID,this.collectionId,e,Mu.empty())}cn(t){for(const e of this._n)if(this.ln(e,t))return!0;return!1}ln(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}hn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(s){var t,e;if(ct(s instanceof Ot||s instanceof Kt),s instanceof Ot){if(s instanceof RA){const o=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(u=>Ot.create(s.field,"==",u)))||[];return Kt.create(o,"or")}return s}const r=s.filters.map(o=>ob(o));return Kt.create(r,s.op)}function ND(s){if(s.getFilters().length===0)return[];const t=Bg(ob(s));return ct(lb(t)),Ug(t)||Lg(t)?[t]:t.getFilters()}function Ug(s){return s instanceof Ot}function Lg(s){return s instanceof Kt&&hp(s)}function lb(s){return Ug(s)||Lg(s)||function(e){if(e instanceof Kt&&Dg(e)){for(const r of e.getFilters())if(!Ug(r)&&!Lg(r))return!1;return!0}return!1}(s)}function Bg(s){if(ct(s instanceof Ot||s instanceof Kt),s instanceof Ot)return s;if(s.filters.length===1)return Bg(s.filters[0]);const t=s.filters.map(r=>Bg(r));let e=Kt.create(t,s.op);return e=df(e),lb(e)?e:(ct(e instanceof Kt),ct(zo(e)),ct(e.filters.length>1),e.filters.reduce((r,o)=>Ap(r,o)))}function Ap(s,t){let e;return ct(s instanceof Ot||s instanceof Kt),ct(t instanceof Ot||t instanceof Kt),e=s instanceof Ot?t instanceof Ot?function(o,u){return Kt.create([o,u],"and")}(s,t):xE(s,t):t instanceof Ot?xE(t,s):function(o,u){if(ct(o.filters.length>0&&u.filters.length>0),zo(o)&&zo(u))return SA(o,u.getFilters());const h=Dg(o)?o:u,m=Dg(o)?u:o,g=h.filters.map(_=>Ap(_,m));return Kt.create(g,"or")}(s,t),df(e)}function xE(s,t){if(zo(t))return SA(t,s.getFilters());{const e=t.filters.map(r=>Ap(s,r));return Kt.create(e,"or")}}function df(s){if(ct(s instanceof Ot||s instanceof Kt),s instanceof Ot)return s;const t=s.getFilters();if(t.length===1)return df(t[0]);if(AA(s))return s;const e=t.map(o=>df(o)),r=[];return e.forEach(o=>{o instanceof Ot?r.push(o):o instanceof Kt&&(o.op===s.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:Kt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Tn=new bp}addToCollectionParentIndex(t,e){return this.Tn.add(e),B.resolve()}getCollectionParents(t,e){return B.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return B.resolve()}deleteFieldIndex(t,e){return B.resolve()}deleteAllFieldIndexes(t){return B.resolve()}createTargetIndexes(t,e){return B.resolve()}getDocumentsMatchingTarget(t,e){return B.resolve(null)}getIndexType(t,e){return B.resolve(0)}getFieldIndexes(t,e){return B.resolve([])}getNextCollectionGroupToUpdate(t){return B.resolve(null)}getMinOffset(t,e){return B.resolve(Cn.min())}getMinOffsetFromCollectionGroup(t,e){return B.resolve(Cn.min())}updateCollectionGroup(t,e,r){return B.resolve()}updateIndexEntries(t,e){return B.resolve()}}class bp{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Yt(Nt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Yt(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="IndexedDbIndexManager",Bh=new Uint8Array(0);class MD{constructor(t,e){this.databaseId=e,this.In=new bp,this.En=new ar(r=>ua(r),(r,o)=>Ju(r,o)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.In.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener(()=>{this.In.add(e)});const u={collectionId:r,parent:rn(o)};return OE(t).put(u)}return B.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[X0(e),""],!1,!0);return OE(t).G(o).next(u=>{for(const h of u){if(h.collectionId!==e)break;r.push(vi(h.parent))}return r})}addFieldIndex(t,e){const r=_u(t),o=function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete o.indexId;const u=r.add(o);if(e.indexState){const h=vo(t);return u.next(m=>{h.put(wE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return u.next()}deleteFieldIndex(t,e){const r=_u(t),o=vo(t),u=yo(t);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=_u(t),r=yo(t),o=vo(t);return e.J().next(()=>r.J()).next(()=>o.J())}createTargetIndexes(t,e){return B.forEach(this.dn(e),r=>this.getIndexType(t,r).next(o=>{if(o===0||o===1){const u=new CE(r).Pn();if(u!=null)return this.addFieldIndex(t,u)}}))}getDocumentsMatchingTarget(t,e){const r=yo(t);let o=!0;const u=new Map;return B.forEach(this.dn(e),h=>this.An(t,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=wt();const m=[];return B.forEach(u,(g,_)=>{tt(NE,`Using index ${function(lt){return`id=${lt.indexId}|cg=${lt.collectionGroup}|f=${lt.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`}(g)} to execute ${ua(e)}`);const T=function(lt,St){const ht=Tg(St);if(ht===void 0)return null;for(const At of cf(lt,ht.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(_,g),A=function(lt,St){const ht=new Map;for(const At of $s(St))for(const x of cf(lt,At.fieldPath))switch(x.op){case"==":case"in":ht.set(At.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ht.set(At.fieldPath.canonicalString(),x.value),Array.from(ht.values())}return null}(_,g),w=function(lt,St){const ht=[];let At=!0;for(const x of $s(St)){const S=x.kind===0?hE(lt,x.fieldPath,lt.startAt):fE(lt,x.fieldPath,lt.startAt);ht.push(S.value),At&&(At=S.inclusive)}return new es(ht,At)}(_,g),U=function(lt,St){const ht=[];let At=!0;for(const x of $s(St)){const S=x.kind===0?fE(lt,x.fieldPath,lt.endAt):hE(lt,x.fieldPath,lt.endAt);ht.push(S.value),At&&(At=S.inclusive)}return new es(ht,At)}(_,g),K=this.Rn(g,_,w),Z=this.Rn(g,_,U),$=this.Vn(g,_,A),gt=this.mn(g.indexId,T,K,w.inclusive,Z,U.inclusive,$);return B.forEach(gt,pt=>r.H(pt,e.limit).next(lt=>{lt.forEach(St=>{const ht=it.fromSegments(St.documentKey);h.has(ht)||(h=h.add(ht),m.push(ht))})}))}).next(()=>m)}return B.resolve(null)})}dn(t){let e=this.En.get(t);return e||(t.filters.length===0?e=[t]:e=ND(Kt.create(t.filters,"and")).map(r=>Cg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,e),e)}mn(t,e,r,o,u,h,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),_=g/(e!=null?e.length:1),T=[];for(let A=0;A<g;++A){const w=e?this.fn(e[A/_]):Bh,U=this.gn(t,w,r[A%_],o),K=this.pn(t,w,u[A%_],h),Z=m.map($=>this.gn(t,w,$,!0));T.push(...this.createRange(U,K,Z))}return T}gn(t,e,r,o){const u=new ea(t,it.empty(),e,r);return o?u:u.nn()}pn(t,e,r,o){const u=new ea(t,it.empty(),e,r);return o?u.nn():u}An(t,e){const r=new CE(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next(u=>{let h=null;for(const m of u)r.un(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(t,e){let r=2;const o=this.dn(e);return B.forEach(o,u=>this.An(t,u).next(h=>{h?r!==0&&h.fields.length<function(g){let _=new Yt(oe.comparator),T=!1;for(const A of g.filters)for(const w of A.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?T=!0:_=_.add(w.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(T?1:0)}(u)&&(r=1):r=0})).next(()=>function(h){return h.limit!==null}(e)&&o.length>1&&r===2?1:r)}yn(t,e){const r=new pu;for(const o of $s(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const h=r.tn(o.kind);ta.xt.At(u,h)}return r.Yt()}fn(t){const e=new pu;return ta.xt.At(t,e.tn(0)),e.Yt()}wn(t,e){const r=new pu;return ta.xt.At(la(this.databaseId,e),r.tn(function(u){const h=$s(u);return h.length===0?0:h[h.length-1].kind}(t))),r.Yt()}Vn(t,e,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const h of $s(t)){const m=r[u++];for(const g of o)if(this.Sn(e,h.fieldPath)&&qu(m))o=this.bn(o,h,m);else{const _=g.tn(h.kind);ta.xt.At(m,_)}}return this.Dn(o)}Rn(t,e,r){return this.Vn(t,e,r.position)}Dn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Yt();return e}bn(t,e,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.Yt()),ta.xt.At(h,g.tn(e.kind)),u.push(g)}return u}Sn(t,e){return!!t.filters.find(r=>r instanceof Ot&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=_u(t),o=vo(t);return(e?r.G(Ag,IDBKeyRange.bound(e,e)):r.G()).next(u=>{const h=[];return B.forEach(u,m=>o.get([m.indexId,this.uid]).next(g=>{h.push(function(T,A){const w=A?new Mu(A.sequenceNumber,new Cn(da(A.readTime),new it(vi(A.documentKey)),A.largestBatchId)):Mu.empty(),U=T.fields.map(([K,Z])=>new jh(oe.fromServerFormat(K),Z));return new nf(T.indexId,T.collectionGroup,U,w)}(m,g))})).next(()=>h)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Tt(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const o=_u(t),u=vo(t);return this.vn(t).next(h=>o.G(Ag,IDBKeyRange.bound(e,e)).next(m=>B.forEach(m,g=>u.put(wE(g.indexId,this.uid,h,r)))))}updateIndexEntries(t,e){const r=new Map;return B.forEach(e,(o,u)=>{const h=r.get(o.collectionGroup);return(h?B.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),B.forEach(m,g=>this.Cn(t,o,g).next(_=>{const T=this.Fn(u,g);return _.isEqual(T)?B.resolve():this.Mn(t,u,g,_,T)}))))})}xn(t,e,r,o){return yo(t).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.wn(r,e.key),documentKey:e.key.path.toArray()})}On(t,e,r,o){return yo(t).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.wn(r,e.key),e.key.path.toArray()])}Cn(t,e,r){const o=yo(t);let u=new Yt(Br);return o.Z({index:aA,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,e)])},(h,m)=>{u=u.add(new ea(r.indexId,e,m.arrayValue,m.directionalValue))}).next(()=>u)}Fn(t,e){let r=new Yt(Br);const o=this.yn(e,t);if(o==null)return r;const u=Tg(e);if(u!=null){const h=t.data.field(u.fieldPath);if(qu(h))for(const m of h.arrayValue.values||[])r=r.add(new ea(e.indexId,t.key,this.fn(m),o))}else r=r.add(new ea(e.indexId,t.key,Bh,o));return r}Mn(t,e,r,o,u){tt(NE,"Updating index entries for document '%s'",e.key);const h=[];return function(g,_,T,A,w){const U=g.getIterator(),K=_.getIterator();let Z=po(U),$=po(K);for(;Z||$;){let gt=!1,pt=!1;if(Z&&$){const lt=T(Z,$);lt<0?pt=!0:lt>0&&(gt=!0)}else Z!=null?pt=!0:gt=!0;gt?(A($),$=po(K)):pt?(w(Z),Z=po(U)):(Z=po(U),$=po(K))}}(o,u,Br,m=>{h.push(this.xn(t,e,r,m))},m=>{h.push(this.On(t,e,r,m))}),B.waitFor(h)}vn(t){let e=1;return vo(t).Z({index:sA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((h,m)=>Br(h,m)).filter((h,m,g)=>!m||Br(h,g[m-1])!==0);const o=[];o.push(t);for(const h of r){const m=Br(h,t),g=Br(h,e);if(m===0)o[0]=t.nn();else if(m>0&&g<0)o.push(h),o.push(h.nn());else if(g>0)break}o.push(e);const u=[];for(let h=0;h<o.length;h+=2){if(this.Nn(o[h],o[h+1]))return[];const m=[o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,Bh,[]],g=[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,Bh,[]];u.push(IDBKeyRange.bound(m,g))}return u}Nn(t,e){return Br(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(ME)}getMinOffset(t,e){return B.mapArray(this.dn(e),r=>this.An(t,r).next(o=>o||ot())).next(ME)}}function OE(s){return Me(s,Bu)}function yo(s){return Me(s,lf)}function _u(s){return Me(s,ap)}function vo(s){return Me(s,of)}function ME(s){ct(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;ip(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Cn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ub=41943040;class nn{static withCacheSize(t){return new nn(t,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(s,t,e){const r=s.store(Jn),o=s.store(Mo),u=[],h=IDBKeyRange.only(e.batchId);let m=0;const g=r.Z({range:h},(T,A,w)=>(m++,w.delete()));u.push(g.next(()=>{ct(m===1)}));const _=[];for(const T of e.mutations){const A=nA(t,T.key.path,e.batchId);u.push(o.delete(A)),_.push(T.key)}return B.waitFor(u).next(()=>_)}function mf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ot();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(ub,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class Of{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Bn={}}static It(t,e,r,o){ct(t.uid!=="");const u=t.isAuthenticated()?t.uid:"";return new Of(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kr(t).Z({index:ia,range:r},(o,u,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,r,o){const u=wo(t),h=kr(t);return h.add({}).next(m=>{ct(typeof m=="number");const g=new pp(m,e,r,o),_=function(U,K,Z){const $=Z.baseMutations.map(pt=>Gu(U.Tt,pt)),gt=Z.mutations.map(pt=>Gu(U.Tt,pt));return{userId:K,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:$,mutations:gt}}(this.serializer,this.userId,g),T=[];let A=new Yt((w,U)=>Tt(w.canonicalString(),U.canonicalString()));for(const w of o){const U=nA(this.userId,w.key.path,m);A=A.add(w.key.path.popLast()),T.push(h.put(_)),T.push(u.put(U,m1))}return A.forEach(w=>{T.push(this.indexManager.addToCollectionParentIndex(t,w))}),t.addOnCommittedListener(()=>{this.Bn[m]=g.keys()}),B.waitFor(T).next(()=>g)})}lookupMutationBatch(t,e){return kr(t).get(e).next(r=>r?(ct(r.userId===this.userId),Js(this.serializer,r)):null)}Ln(t,e){return this.Bn[e]?B.resolve(this.Bn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const o=r.keys();return this.Bn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return kr(t).Z({index:ia,range:o},(h,m,g)=>{m.userId===this.userId&&(ct(m.batchId>=r),u=Js(this.serializer,m)),g.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Kr;return kr(t).Z({index:ia,range:e,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Kr],[this.userId,Number.POSITIVE_INFINITY]);return kr(t).G(ia,e).next(r=>r.map(o=>Js(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Gh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return wo(t).Z({range:o},(h,m,g)=>{const[_,T,A]=h,w=vi(T);if(_===this.userId&&e.path.isEqual(w))return kr(t).get(A).next(U=>{if(!U)throw ot();ct(U.userId===this.userId),u.push(Js(this.serializer,U))});g.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Yt(Tt);const o=[];return e.forEach(u=>{const h=Gh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=wo(t).Z({range:m},(_,T,A)=>{const[w,U,K]=_,Z=vi(U);w===this.userId&&u.path.isEqual(Z)?r=r.add(K):A.done()});o.push(g)}),B.waitFor(o).next(()=>this.kn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=Gh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Yt(Tt);return wo(t).Z({range:h},(g,_,T)=>{const[A,w,U]=g,K=vi(w);A===this.userId&&r.isPrefixOf(K)?K.length===o&&(m=m.add(U)):T.done()}).next(()=>this.kn(t,m))}kn(t,e){const r=[],o=[];return e.forEach(u=>{o.push(kr(t).get(u).next(h=>{if(h===null)throw ot();ct(h.userId===this.userId),r.push(Js(this.serializer,h))}))}),B.waitFor(o).next(()=>r)}removeMutationBatch(t,e){return cb(t.ue,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.qn(e.batchId)}),B.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return B.resolve();const r=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),o=[];return wo(t).Z({range:r},(u,h,m)=>{if(u[0]===this.userId){const g=vi(u[1]);o.push(g)}else m.done()}).next(()=>{ct(o.length===0)})})}containsKey(t,e){return hb(t,this.userId,e)}Qn(t){return fb(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Kr,lastStreamToken:""})}}function hb(s,t,e){const r=Gh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return wo(s).Z({range:u,Y:!0},(m,g,_)=>{const[T,A,w]=m;T===t&&A===o&&(h=!0),_.done()}).next(()=>h)}function kr(s){return Me(s,Jn)}function wo(s){return Me(s,Mo)}function fb(s){return Me(s,Uu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new ma(0)}static Kn(){return new ma(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Wn(t).next(e=>{const r=new ma(e.highestTargetId);return e.highestTargetId=r.next(),this.Gn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(e=>ft.fromTimestamp(new ue(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.Wn(t).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.Gn(t,o)))}addTargetData(t,e){return this.zn(t,e).next(()=>this.Wn(t).next(r=>(r.targetCount+=1,this.jn(e,r),this.Gn(t,r))))}updateTargetData(t,e){return this.zn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>To(t).delete(e.targetId)).next(()=>this.Wn(t)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Gn(t,r)))}removeTargets(t,e,r){let o=0;const u=[];return To(t).Z((h,m)=>{const g=bu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))}).next(()=>B.waitFor(u)).next(()=>o)}forEachTarget(t,e){return To(t).Z((r,o)=>{const u=bu(o);e(u)})}Wn(t){return UE(t).get(af).next(e=>(ct(e!==null),e))}Gn(t,e){return UE(t).put(af,e)}zn(t,e){return To(t).put(ab(this.serializer,e))}jn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.Wn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=ua(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return To(t).Z({range:o,index:rA},(h,m,g)=>{const _=bu(m);Ju(e,_.target)&&(u=_,g.done())}).next(()=>u)}addMatchingKeys(t,e,r){const o=[],u=Fr(t);return e.forEach(h=>{const m=rn(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))}),B.waitFor(o)}removeMatchingKeys(t,e,r){const o=Fr(t);return B.forEach(e,u=>{const h=rn(u.path);return B.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])})}removeMatchingKeysForTargetId(t,e){const r=Fr(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Fr(t);let u=wt();return o.Z({range:r,Y:!0},(h,m,g)=>{const _=vi(h[1]),T=new it(_);u=u.add(T)}).next(()=>u)}containsKey(t,e){const r=rn(e.path),o=IDBKeyRange.bound([r],[X0(r)],!1,!0);let u=0;return Fr(t).Z({index:sp,Y:!0,range:o},([h,m],g,_)=>{h!==0&&(u++,_.done())}).next(()=>u>0)}lt(t,e){return To(t).get(e).next(r=>r?bu(r):null)}}function To(s){return Me(s,Po)}function UE(s){return Me(s,aa)}function Fr(s){return Me(s,Uo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="LruGarbageCollector",UD=1048576;function BE([s,t],[e,r]){const o=Tt(s,e);return o===0?Tt(t,r):o}class LD{constructor(t){this.Hn=t,this.buffer=new Yt(BE),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();BE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class db{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){tt(LE,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){os(e)?tt(LE,"Ignoring IndexedDB error during garbage collection: ",e):await as(e)}await this.er(3e5)})}}class BD{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return B.resolve(_n.ae);const r=new LD(e);return this.tr.forEachTarget(t,o=>r.Zn(o.sequenceNumber)).next(()=>this.tr.rr(t,o=>r.Zn(o))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.tr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(PE)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PE):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let r,o,u,h,m,g,_;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(t,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(t,r,e))).next(A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(_=Date.now(),Eo()<=Mt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-T}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function mb(s,t){return new BD(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(t,e){this.db=t,this.garbageCollector=mb(this,e)}nr(t){const e=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}rr(t,e){return this._r(t,(r,o)=>e(o))}addReference(t,e,r){return kh(t,r)}removeReference(t,e,r){return kh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return kh(t,e)}ar(t,e){return function(o,u){let h=!1;return fb(o).X(m=>hb(o,m,u).next(g=>(g&&(h=!0),B.resolve(!g)))).next(()=>h)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this._r(t,(h,m)=>{if(m<=e){const g=this.ar(t,h).next(_=>{if(!_)return u++,r.getEntry(t,h).next(()=>(r.removeEntry(h,ft.min()),Fr(t).delete(function(A){return[0,rn(A.path)]}(h))))});o.push(g)}}).next(()=>B.waitFor(o)).next(()=>r.apply(t)).next(()=>u)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return kh(t,e)}_r(t,e){const r=Fr(t);let o,u=_n.ae;return r.Z({index:sp},([h,m],{path:g,sequenceNumber:_})=>{h===0?(u!==_n.ae&&e(new it(vi(o)),u),u=_,o=g):u=_n.ae}).next(()=>{u!==_n.ae&&e(new it(vi(o)),u)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function kh(s,t){return Fr(s).put(function(r,o){return{targetId:0,path:rn(r.path),sequenceNumber:o}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.changes=new ar(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?B.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Ys(t).put(r)}removeEntry(t,e,r){return Ys(t).delete(function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],ff(h),m[m.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.ur(t,r)))}getEntry(t,e){let r=ie.newInvalidDocument(e);return Ys(t).Z({index:Hh,range:IDBKeyRange.only(yu(e))},(o,u)=>{r=this.cr(e,u)}).next(()=>r)}lr(t,e){let r={size:0,document:ie.newInvalidDocument(e)};return Ys(t).Z({index:Hh,range:IDBKeyRange.only(yu(e))},(o,u)=>{r={document:this.cr(e,u),size:mf(u)}}).next(()=>r)}getEntries(t,e){let r=vn();return this.hr(t,e,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h)}).next(()=>r)}Pr(t,e){let r=vn(),o=new ne(it.comparator);return this.hr(t,e,(u,h)=>{const m=this.cr(u,h);r=r.insert(u,m),o=o.insert(u,mf(h))}).next(()=>({documents:r,Tr:o}))}hr(t,e,r){if(e.isEmpty())return B.resolve();let o=new Yt(qE);e.forEach(g=>o=o.add(g));const u=IDBKeyRange.bound(yu(o.first()),yu(o.last())),h=o.getIterator();let m=h.getNext();return Ys(t).Z({index:Hh,range:u},(g,_,T)=>{const A=it.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&qE(m,A)<0;)r(m,null),m=h.getNext();m&&m.isEqual(A)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?T.W(yu(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(t,e,r,o,u){const h=e.path,m=[h.popLast().toArray(),h.lastSegment(),ff(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(t).G(IDBKeyRange.bound(m,g,!0)).next(_=>{u==null||u.incrementDocumentReadCount(_.length);let T=vn();for(const A of _){const w=this.cr(it.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);w.isFoundDocument()&&(ec(e,w)||o.has(w.key))&&(T=T.insert(w.key,w))}return T})}getAllFromCollectionGroup(t,e,r,o){let u=vn();const h=zE(e,r),m=zE(e,Cn.max());return Ys(t).Z({index:iA,range:IDBKeyRange.bound(h,m,!0)},(g,_,T)=>{const A=this.cr(it.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(A.key,A),u.size===o&&T.done()}).next(()=>u)}newChangeBuffer(t){return new qD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return kE(t).get(Eg).next(e=>(ct(!!e),e))}ur(t,e){return kE(t).put(Eg,e)}cr(t,e){if(e){const r=wD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(ft.min())))return r}return ie.newInvalidDocument(t)}}function pb(s){return new zD(s)}class qD extends gb{constructor(t,e){super(),this.Ir=t,this.trackRemovals=e,this.Er=new ar(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(t){const e=[];let r=0,o=new Yt((u,h)=>Tt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Er.get(u);if(e.push(this.Ir.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=bE(this.Ir.serializer,h);o=o.add(u.path.popLast());const _=mf(g);r+=_-m.size,e.push(this.Ir.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=bE(this.Ir.serializer,h.convertToNoDocument(ft.min()));e.push(this.Ir.addEntry(t,u,g))}}),o.forEach(u=>{e.push(this.Ir.indexManager.addToCollectionParentIndex(t,u))}),e.push(this.Ir.updateMetadata(t,r)),B.waitFor(e)}getFromCache(t,e){return this.Ir.lr(t,e).next(r=>(this.Er.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Ir.Pr(t,e).next(({documents:r,Tr:o})=>(o.forEach((u,h)=>{this.Er.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function kE(s){return Me(s,Lu)}function Ys(s){return Me(s,sf)}function yu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function zE(s,t){const e=t.documentKey.path.toArray();return[s,ff(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function qE(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=Tt(e[u],r[u]),o)return o;return o=Tt(e.length,r.length),o||(o=Tt(e[e.length-2],r[r.length-2]),o||Tt(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,e))).next(o=>(r!==null&&Vu(r.mutation,o,yn.empty(),ue.now()),o))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,wt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=wt()){const o=Ti();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,r).next(u=>{let h=Eu();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(t,e){const r=Ti();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,wt()))}populateOverlays(t,e,r){const o=[];return r.forEach(u=>{e.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,m)=>{e.set(h,m)})})}computeViews(t,e,r,o){let u=vn();const h=Du(),m=function(){return Du()}();return e.forEach((g,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof or)?u=u.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Vu(T.mutation,_,T.mutation.getFieldMask(),ue.now())):h.set(_.key,yn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,T)=>h.set(_,T)),e.forEach((_,T)=>{var A;return m.set(_,new FD(T,(A=h.get(_))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(t,e){const r=Du();let o=new ne((h,m)=>h-m),u=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=e.get(g);if(_===null)return;let T=r.get(g)||yn.empty();T=m.applyToLocalView(_,T),r.set(g,T);const A=(o.get(m.batchId)||wt()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,T=g.value,A=MA();T.forEach(w=>{if(!u.has(w)){const U=qA(e.get(w),r.get(w));U!==null&&A.set(w,U),u=u.add(w)}}),h.push(this.documentOverlayCache.saveOverlays(t,_,A))}return B.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,o){return function(h){return it.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fp(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):B.resolve(Ti());let m=Oo,g=u;return h.next(_=>B.forEach(_,(T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?B.resolve():this.remoteDocumentCache.getEntry(t,T).next(w=>{g=g.insert(T,w)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,wt())).next(T=>({batchId:m,changes:OA(T)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new it(e)).next(r=>{let o=Eu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let h=Eu();return this.indexManager.getCollectionParents(t,u).next(m=>B.forEach(m,g=>{const _=function(A,w){return new sr(w,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next(T=>{T.forEach((A,w)=>{h=h.insert(A,w)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o))).next(h=>{u.forEach((g,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,ie.newInvalidDocument(T)))});let m=Eu();return h.forEach((g,_)=>{const T=u.get(g);T!==void 0&&Vu(T.mutation,_,yn.empty(),ue.now()),ec(e,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return B.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(o){return{id:o.id,version:o.version,createTime:Ee(o.createTime)}}(e)),B.resolve()}getNamedQuery(t,e){return B.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(o){return{name:o.name,query:Ep(o.bundledQuery),readTime:Ee(o.readTime)}}(e)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.overlays=new ne(it.comparator),this.Rr=new Map}getOverlay(t,e){return B.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ti();return B.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((o,u)=>{this.Et(t,e,u)}),B.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.Rr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(r)),B.resolve()}getOverlaysForCollection(t,e,r){const o=Ti(),u=e.length+1,h=new it(e.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return B.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ne((_,T)=>_-T);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let T=u.get(_.largestBatchId);T===null&&(T=Ti(),u=u.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const m=Ti(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,T)=>m.set(_,T)),!(m.size()>=o)););return B.resolve(m)}Et(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(r.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new yp(e,r));let u=this.Rr.get(e);u===void 0&&(u=wt(),this.Rr.set(e,u)),this.Rr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.sessionToken=pe.EMPTY_BYTE_STRING}getSessionToken(t){return B.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Vr=new Yt(qe.mr),this.gr=new Yt(qe.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const r=new qe(t,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.wr(new qe(t,e))}Sr(t,e){t.forEach(r=>this.removeReference(r,e))}br(t){const e=new it(new Nt([])),r=new qe(e,t),o=new qe(e,t+1),u=[];return this.gr.forEachInRange([r,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new it(new Nt([])),r=new qe(e,t),o=new qe(e,t+1);let u=wt();return this.gr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const e=new qe(t,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class qe{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return it.comparator(t.key,e.key)||Tt(t.Cr,e.Cr)}static pr(t,e){return Tt(t.Cr,e.Cr)||it.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Yt(qe.mr)}checkEmpty(t){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new pp(u,e,r,o);this.mutationQueue.push(h);for(const m of o)this.Mr=this.Mr.add(new qe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return B.resolve(h)}lookupMutationBatch(t,e){return B.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.Nr(r),u=o<0?0:o;return B.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Kr:this.Fr-1)}getAllMutationBatches(t){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new qe(e,0),o=new qe(e,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([r,o],h=>{const m=this.Or(h.Cr);u.push(m)}),B.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Yt(Tt);return e.forEach(o=>{const u=new qe(o,0),h=new qe(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],m=>{r=r.add(m.Cr)})}),B.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;it.isDocumentKey(u)||(u=u.child(""));const h=new qe(new it(u),0);let m=new Yt(Tt);return this.Mr.forEachWhile(g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Cr)),!0)},h),B.resolve(this.Br(m))}Br(t){const e=[];return t.forEach(r=>{const o=this.Or(r);o!==null&&e.push(o)}),e}removeMutationBatch(t,e){ct(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return B.forEach(e.mutations,o=>{const u=new qe(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,e){const r=new qe(e,0),o=this.Mr.firstAfterOrEqual(r);return B.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,B.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(t){this.kr=t,this.docs=function(){return new ne(it.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,h=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return B.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(e))}getEntries(t,e){let r=vn();return e.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ie.newInvalidDocument(o))}),B.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=vn();const h=e.path,m=new it(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:T}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||ip(Z0(T),r)<=0||(o.has(T.key)||ec(e,T))&&(u=u.insert(T.key,T.mutableCopy()))}return B.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ot()}qr(t,e){return B.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new YD(this)}getSize(t){return B.resolve(this.size)}}class YD extends gb{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.Ir.addEntry(t,o)):this.Ir.removeEntry(r)}),B.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.persistence=t,this.Qr=new ar(e=>ua(e),Ju),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Sp,this.targetCount=0,this.Kr=ma.Un()}forEachTarget(t,e){return this.Qr.forEach((r,o)=>e(o)),B.resolve()}getLastRemoteSnapshotVersion(t){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return B.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),B.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new ma(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,B.resolve()}updateTargetData(t,e){return this.zn(e),B.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,B.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.Qr.forEach((h,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),B.waitFor(u).next(()=>o)}getTargetCount(t){return B.resolve(this.targetCount)}getTargetData(t,e){const r=this.Qr.get(e)||null;return B.resolve(r)}addMatchingKeys(t,e,r){return this.Ur.yr(e,r),B.resolve()}removeMatchingKeys(t,e,r){this.Ur.Sr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),B.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),B.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Ur.vr(e);return B.resolve(r)}containsKey(t,e){return B.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new _n(0),this.zr=!1,this.zr=!0,this.jr=new HD,this.referenceDelegate=t(this),this.Hr=new XD(this),this.indexManager=new OD,this.remoteDocumentCache=function(o){return new KD(o)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new sb(e),this.Yr=new jD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new GD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Wr[t.toKey()];return r||(r=new QD(e,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new $D(this.Gr.next());return this.referenceDelegate.Zr(),r(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(t,e){return B.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,e)))}}class $D extends J0{constructor(t){super(),this.currentSequenceNumber=t}}class Mf{constructor(t){this.persistence=t,this.ti=new Sp,this.ni=null}static ri(t){return new Mf(t)}get ii(){if(this.ni)return this.ni;throw ot()}addReference(t,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),B.resolve()}removeReference(t,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),B.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),B.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(o=>this.ii.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>r.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ii,r=>{const o=it.fromPath(r);return this.si(t,o).next(u=>{u||e.removeEntry(o,ft.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return B.or([()=>B.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class gf{constructor(t,e){this.persistence=t,this.oi=new ar(r=>rn(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=mb(this,e)}static ri(t,e){return new gf(t,e)}Zr(){}Xr(t){return B.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}rr(t,e){return B.forEach(this.oi,(r,o)=>this.ar(t,r,o).next(u=>u?B.resolve():e(o)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(t,h=>this.ar(t,h,e).next(m=>{m||(r++,u.removeEntry(h,ft.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}removeReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),B.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),B.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Kh(t.data.value)),e}ar(t,e,r){return B.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.oi.get(e);return B.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.serializer=t}B(t,e,r,o){const u=new bf("createOrUpgrade",e);r<1&&o>=1&&(function(g){g.createObjectStore(Wu)}(t),function(g){g.createObjectStore(Uu,{keyPath:d1}),g.createObjectStore(Jn,{keyPath:JT,autoIncrement:!0}).createIndex(ia,tE,{unique:!0}),g.createObjectStore(Mo)}(t),FE(t),function(g){g.createObjectStore(Zs)}(t));let h=B.resolve();return r<3&&o>=3&&(r!==0&&(function(g){g.deleteObjectStore(Uo),g.deleteObjectStore(Po),g.deleteObjectStore(aa)}(t),FE(t)),h=h.next(()=>function(g){const _=g.store(aa),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ft.min().toTimestamp(),targetCount:0};return _.put(af,T)}(u))),r<4&&o>=4&&(r!==0&&(h=h.next(()=>function(g,_){return _.store(Jn).G().next(A=>{g.deleteObjectStore(Jn),g.createObjectStore(Jn,{keyPath:JT,autoIncrement:!0}).createIndex(ia,tE,{unique:!0});const w=_.store(Jn),U=A.map(K=>w.put(K));return B.waitFor(U)})}(t,u))),h=h.next(()=>{(function(g){g.createObjectStore(Lo,{keyPath:A1})})(t)})),r<5&&o>=5&&(h=h.next(()=>this._i(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore(Lu)}(t),this.ai(u)))),r<7&&o>=7&&(h=h.next(()=>this.ui(u))),r<8&&o>=8&&(h=h.next(()=>this.ci(t,u))),r<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&o>=10&&(h=h.next(()=>this.li(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore(Sf,{keyPath:b1})})(t),function(g){g.createObjectStore(wf,{keyPath:S1})}(t)})),r<12&&o>=12&&(h=h.next(()=>{(function(g){const _=g.createObjectStore(If,{keyPath:x1});_.createIndex(bg,N1,{unique:!1}),_.createIndex(oA,O1,{unique:!1})})(t)})),r<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore(sf,{keyPath:g1});_.createIndex(Hh,p1),_.createIndex(iA,_1)}(t)).next(()=>this.hi(t,u)).next(()=>t.deleteObjectStore(Zs))),r<14&&o>=14&&(h=h.next(()=>this.Pi(t,u))),r<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore(ap,{keyPath:w1,autoIncrement:!0}).createIndex(Ag,I1,{unique:!1}),g.createObjectStore(of,{keyPath:R1}).createIndex(sA,D1,{unique:!1}),g.createObjectStore(lf,{keyPath:V1}).createIndex(aA,C1,{unique:!1})}(t))),r<16&&o>=16&&(h=h.next(()=>{e.objectStore(of).clear()}).next(()=>{e.objectStore(lf).clear()})),r<17&&o>=17&&(h=h.next(()=>{(function(g){g.createObjectStore(op,{keyPath:M1})})(t)})),h}ai(t){let e=0;return t.store(Zs).Z((r,o)=>{e+=mf(o)}).next(()=>{const r={byteSize:e};return t.store(Lu).put(Eg,r)})}_i(t){const e=t.store(Uu),r=t.store(Jn);return e.G().next(o=>B.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,Kr],[u.userId,u.lastAcknowledgedBatchId]);return r.G(ia,h).next(m=>B.forEach(m,g=>{ct(g.userId===u.userId);const _=Js(this.serializer,g);return cb(t,u.userId,_).next(()=>{})}))}))}ui(t){const e=t.store(Uo),r=t.store(Zs);return t.store(aa).get(af).next(o=>{const u=[];return r.Z((h,m)=>{const g=new Nt(h),_=function(A){return[0,rn(A)]}(g);u.push(e.get(_).next(T=>T?B.resolve():(A=>e.put({targetId:0,path:rn(A),sequenceNumber:o.highestListenSequenceNumber}))(g)))}).next(()=>B.waitFor(u))})}ci(t,e){t.createObjectStore(Bu,{keyPath:E1});const r=e.store(Bu),o=new bp,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:rn(g)})}};return e.store(Zs).Z({Y:!0},(h,m)=>{const g=new Nt(h);return u(g.popLast())}).next(()=>e.store(Mo).Z({Y:!0},([h,m,g],_)=>{const T=vi(m);return u(T.popLast())}))}li(t){const e=t.store(Po);return e.Z((r,o)=>{const u=bu(o),h=ab(this.serializer,u);return e.put(h)})}hi(t,e){const r=e.store(Zs),o=[];return r.Z((u,h)=>{const m=e.store(sf),g=function(A){return A.document?new it(Nt.fromString(A.document.name).popFirst(5)):A.noDocument?it.fromSegments(A.noDocument.path):A.unknownDocument?it.fromSegments(A.unknownDocument.path):ot()}(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(_))}).next(()=>B.waitFor(o))}Pi(t,e){const r=e.store(Jn),o=pb(this.serializer),u=new wp(Mf.ri,this.serializer.Tt);return r.G().next(h=>{const m=new Map;return h.forEach(g=>{var _;let T=(_=m.get(g.userId))!==null&&_!==void 0?_:wt();Js(this.serializer,g).keys().forEach(A=>T=T.add(A)),m.set(g.userId,T)}),B.forEach(m,(g,_)=>{const T=new Fe(_),A=Nf.It(this.serializer,T),w=u.getIndexManager(T),U=Of.It(T,this.serializer,w,u.referenceDelegate);return new _b(o,U,A,w).recalculateAndSaveOverlaysForDocumentKeys(new Sg(e,_n.ae),g).next()})})}}function FE(s){s.createObjectStore(Uo,{keyPath:v1}).createIndex(sp,T1,{unique:!0}),s.createObjectStore(Po,{keyPath:"targetId"}).createIndex(rA,y1,{unique:!0}),s.createObjectStore(aa)}const zr="IndexedDbPersistence",lg=18e5,ug=5e3,cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yb="main";class Ip{constructor(t,e,r,o,u,h,m,g,_,T,A=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Ti=u,this.window=h,this.document=m,this.Ii=_,this.Ei=T,this.di=A,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!Ip.D())throw new J(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kD(this,o),this.gi=e+yb,this.serializer=new sb(g),this.pi=new Ei(this.gi,this.di,new ZD(this.serializer)),this.jr=new RD,this.Hr=new PD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pb(this.serializer),this.Yr=new ID,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,T===!1&&Te(zr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,cg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new _n(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>zh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(e=>this.isPrimary&&!e?this.xi(t).next(()=>!1):!!e&&this.Oi(t).next(()=>!0))).catch(t=>{if(os(t))return tt(zr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(zr,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return vu(t).get(go).next(e=>B.resolve(this.Ni(e)))}Bi(t){return zh(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,lg)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Me(e,Lo);return r.G().next(o=>{const u=this.qi(o,lg),h=o.filter(m=>u.indexOf(m)===-1);return B.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(this.yi)for(const e of t)this.yi.removeItem(this.Qi(e.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?B.resolve(!0):vu(t).get(go).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,ug)&&!this.$i(e.ownerId)){if(this.Ni(e)&&this.networkEnabled)return!0;if(!this.Ni(e)){if(!e.allowTabSynchronization)throw new J(j.FAILED_PRECONDITION,cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(t).G().next(r=>this.qi(r,ug).find(o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&tt(zr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Wu,Lo],t=>{const e=new Sg(t,_n.ae);return this.xi(e).next(()=>this.Bi(e))}),this.pi.close(),this.Gi()}qi(t,e){return t.filter(r=>this.ki(r.updateTimeMs,e)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>zh(t).G().next(e=>this.qi(e,lg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,e){return Of.It(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new MD(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return Nf.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,e,r){tt(zr,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=function(g){return g===17?L1:g===16?U1:g===15?lp:g===14?cA:g===13?uA:g===12?P1:g===11?lA:void ot()}(this.di);let h;return this.pi.runTransaction(t,o,u,m=>(h=new Sg(m,this.Gr?this.Gr.next():_n.ae),e==="readwrite-primary"?this.Fi(h).next(g=>!!g||this.Mi(h)).next(g=>{if(!g)throw Te(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new J(j.FAILED_PRECONDITION,W0);return r(h)}).next(g=>this.Oi(h).next(()=>g)):this.ji(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}ji(t){return vu(t).get(go).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,ug)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new J(j.FAILED_PRECONDITION,cg)})}Oi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(t).put(go,e)}static D(){return Ei.D()}xi(t){const e=vu(t);return e.get(go).next(r=>this.Ni(r)?(tt(zr,"Releasing primary lease."),e.delete(go)):B.resolve())}ki(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Te(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;w0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var e;try{const r=((e=this.yi)===null||e===void 0?void 0:e.getItem(this.Qi(t)))!==null;return tt(zr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Te(zr,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){Te("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vu(s){return Me(s,Wu)}function zh(s){return Me(s,Lo)}function Rp(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Hi=r,this.Ji=o}static Yi(t,e){let r=wt(),o=wt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Dp(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return w0()?8:tA(tf())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.rs(t,e).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(t,e,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new WD;return this._s(t,e,h).next(m=>{if(u.result=m,this.Xi)return this.us(t,e,h,m.size)})}).next(()=>u.result)}us(t,e,r,o){return r.documentReadCount<this.es?(Eo()<=Mt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Ao(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),B.resolve()):(Eo()<=Mt.DEBUG&&tt("QueryEngine","Query:",Ao(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ts*o?(Eo()<=Mt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Ao(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fn(e))):B.resolve())}rs(t,e){if(dE(e))return B.resolve(null);let r=fn(e);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(e.limit!==null&&o===1&&(e=hf(e,null,"F"),r=fn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=wt(...u);return this.ns.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,r).next(g=>{const _=this.cs(e,m);return this.ls(e,_,h,g.readTime)?this.rs(t,hf(e,null,"F")):this.hs(t,_,e,g)}))})))}ss(t,e,r,o){return dE(e)||o.isEqual(ft.min())?B.resolve(null):this.ns.getDocuments(t,r).next(u=>{const h=this.cs(e,u);return this.ls(e,h,r,o)?B.resolve(null):(Eo()<=Mt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(e)),this.hs(t,h,e,$0(o,Oo)).next(m=>m))})}cs(t,e){let r=new Yt(xA(t));return e.forEach((o,u)=>{ec(t,u)&&(r=r.add(u))}),r}ls(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(t,e,r){return Eo()<=Mt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Ao(e)),this.ns.getDocumentsMatchingQuery(t,e,Cn.min(),r)}hs(t,e,r,o){return this.ns.getDocumentsMatchingQuery(t,r,o).next(u=>(e.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="LocalStore",JD=3e8;class tV{constructor(t,e,r,o){this.persistence=t,this.Ps=e,this.serializer=o,this.Ts=new ne(Tt),this.Is=new ar(u=>ua(u),Ju),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _b(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function Tb(s,t,e,r){return new tV(s,t,e,r)}async function Eb(s,t){const e=st(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,e.As(t),e.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let g=wt();for(const _ of o){h.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}for(const _ of u){m.push(_.batchId);for(const T of _.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(r,g).next(_=>({Rs:_,removedBatchIds:h,addedBatchIds:m}))})})}function eV(s,t){const e=st(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=e.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,_,T){const A=_.batch,w=A.keys();let U=B.resolve();return w.forEach(K=>{U=U.next(()=>T.getEntry(g,K)).next(Z=>{const $=_.docVersions.get(K);ct($!==null),Z.version.compareTo($)<0&&(A.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),T.addEntry(Z)))})}),U.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(e,r,t,u).next(()=>u.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=wt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>e.localDocuments.getDocuments(r,o))})}function Ab(s){const t=st(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function nV(s,t){const e=st(s),r=t.snapshotVersion;let o=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=e.ds.newChangeBuffer({trackRemovals:!0});o=e.Ts;const m=[];t.targetChanges.forEach((T,A)=>{const w=o.get(A);if(!w)return;m.push(e.Hr.removeMatchingKeys(u,T.removedDocuments,A).next(()=>e.Hr.addMatchingKeys(u,T.addedDocuments,A)));let U=w.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?U=U.withResumeToken(pe.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),o=o.insert(A,U),function(Z,$,gt){return Z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=JD?!0:gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0}(w,U,T)&&m.push(e.Hr.updateTargetData(u,U))});let g=vn(),_=wt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(bb(u,h,t.documentUpdates).next(T=>{g=T.Vs,_=T.fs})),!r.isEqual(ft.min())){const T=e.Hr.getLastRemoteSnapshotVersion(u).next(A=>e.Hr.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return B.waitFor(m).next(()=>h.apply(u)).next(()=>e.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(e.Ts=o,u))}function bb(s,t,e){let r=wt(),o=wt();return e.forEach(u=>r=r.add(u)),t.getEntries(s,r).next(u=>{let h=vn();return e.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ft.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):tt(Vp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Vs:h,fs:o}})}function iV(s,t){const e=st(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Kr),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Go(s,t){const e=st(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Hr.getTargetData(r,t).next(u=>u?(o=u,B.resolve(o)):e.Hr.allocateTargetId(r).next(h=>(o=new Ji(t,h,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.Ts.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(t,r.targetId)),r})}async function Ho(s,t,e){const r=st(s),o=r.Ts.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!os(h))throw h;tt(Vp,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ts=r.Ts.remove(t),r.Is.delete(o.target)}function pf(s,t,e){const r=st(s);let o=ft.min(),u=wt();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,T){const A=st(g),w=A.Is.get(T);return w!==void 0?B.resolve(A.Ts.get(w)):A.Hr.getTargetData(_,T)}(r,h,fn(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>r.Ps.getDocumentsMatchingQuery(h,t,e?o:ft.min(),e?u:wt())).next(m=>(Ib(r,CA(t),m),{documents:m,gs:u})))}function Sb(s,t){const e=st(s),r=st(e.Hr),o=e.Ts.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",u=>r.lt(u,t).next(h=>h?h.target:null))}function wb(s,t){const e=st(s),r=e.Es.get(t)||ft.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.ds.getAllFromCollectionGroup(o,t,$0(r,Oo),Number.MAX_SAFE_INTEGER)).then(o=>(Ib(e,t,o),o))}function Ib(s,t,e){let r=s.Es.get(t)||ft.min();e.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Es.set(t,r)}async function rV(s,t,e,r){const o=st(s);let u=wt(),h=vn();for(const _ of e){const T=t.ps(_.metadata.name);_.document&&(u=u.add(T));const A=t.ys(_);A.setReadTime(t.ws(_.metadata.readTime)),h=h.insert(T,A)}const m=o.ds.newChangeBuffer({trackRemovals:!0}),g=await Go(o,function(T){return fn(Wo(Nt.fromString(`__bundle__/docs/${T}`)))}(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",_=>bb(_,m,h).next(T=>(m.apply(_),T)).next(T=>o.Hr.removeMatchingKeysForTargetId(_,g.targetId).next(()=>o.Hr.addMatchingKeys(_,u,g.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(_,T.Vs,T.fs)).next(()=>T.Vs)))}async function sV(s,t,e=wt()){const r=await Go(s,fn(Ep(t.bundledQuery))),o=st(s);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Ee(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Yr.saveNamedQuery(u,t);const m=r.withResumeToken(pe.EMPTY_BYTE_STRING,h);return o.Ts=o.Ts.insert(m.targetId,m),o.Hr.updateTargetData(u,m).next(()=>o.Hr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Hr.addMatchingKeys(u,e,r.targetId)).next(()=>o.Yr.saveNamedQuery(u,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firestore_clients";function jE(s,t){return`${Rb}_${s}_${t}`}const Db="firestore_mutations";function GE(s,t,e){let r=`${Db}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Vb="firestore_targets";function hg(s,t){return`${Vb}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="SharedClientState";class _f{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ss(t,e,r){const o=JSON.parse(r);let u,h=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return h&&o.error&&(h=typeof o.error.message=="string"&&typeof o.error.code=="string",h&&(u=new J(o.error.code,o.error.message))),h?new _f(t,e,o.state,u):(Te(yi,`Failed to parse mutation state for ID '${e}': ${r}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Cu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ss(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new J(r.error.code,r.error.message))),u?new Cu(t,r.state,o):(Te(yi,`Failed to parse target state for ID '${t}': ${e}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ss(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=dp();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=eA(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new yf(t,u):(Te(yi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Cp{constructor(t,e){this.clientId=t,this.onlineState=e}static Ss(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Cp(e.clientId,e.onlineState):(Te(yi,`Failed to parse online state: ${t}`),null)}}class kg{constructor(){this.activeTargetIds=dp()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fg{constructor(t,e,r,o,u){this.window=t,this.Ti=e,this.persistenceKey=r,this.Cs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ne(Tt),this.started=!1,this.Os=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Ns=jE(this.persistenceKey,this.Cs),this.Bs=function(g){return`firestore_sequence_number_${g}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new kg),this.Ls=new RegExp(`^${Rb}_${h}_([^_]*)$`),this.ks=new RegExp(`^${Db}_${h}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${Vb}_${h}_(\\d+)$`),this.Qs=function(g){return`firestore_online_state_${g}`}(this.persistenceKey),this.$s=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.zi();for(const r of t){if(r===this.Cs)continue;const o=this.getItem(jE(this.persistenceKey,r));if(o){const u=yf.Ss(r,o);u&&(this.xs=this.xs.insert(u.clientId,u))}}this.Us();const e=this.storage.getItem(this.Qs);if(e){const r=this.Ks(e);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Bs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(t){let e=!1;return this.xs.forEach((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.zs(t,"pending")}updateMutationState(t,e,r){this.zs(t,e,r),this.js(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(hg(this.persistenceKey,t));if(o){const u=Cu.Ss(t,o);u&&(r=u.state)}}return e&&this.Hs.Ds(t),this.Us(),r}removeLocalQueryTarget(t){this.Hs.vs(t),this.Us()}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(hg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Js(t,e,r)}handleUserChange(t,e,r){e.forEach(o=>{this.js(o)}),this.currentUser=t,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(t){this.Ys(t)}notifyBundleLoaded(t){this.Zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(yi,"READ",t,e),e}setItem(t,e){tt(yi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(yi,"REMOVE",t),this.storage.removeItem(t)}Ms(t){const e=t;if(e.storageArea===this.storage){if(tt(yi,"EVENT",e.key,e.newValue),e.key===this.Ns)return void Te("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.Ls.test(e.key)){if(e.newValue==null){const r=this.Xs(e.key);return this.eo(r,null)}{const r=this.no(e.key,e.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(e.key)){if(e.newValue!==null){const r=this.ro(e.key,e.newValue);if(r)return this.io(r)}}else if(this.qs.test(e.key)){if(e.newValue!==null){const r=this.so(e.key,e.newValue);if(r)return this.oo(r)}}else if(e.key===this.Qs){if(e.newValue!==null){const r=this.Ks(e.newValue);if(r)return this.Ws(r)}}else if(e.key===this.Bs){const r=function(u){let h=_n.ae;if(u!=null)try{const m=JSON.parse(u);ct(typeof m=="number"),h=m}catch(m){Te(yi,"Failed to read sequence number from WebStorage",m)}return h}(e.newValue);r!==_n.ae&&this.sequenceNumberHandler(r)}else if(e.key===this.$s){const r=this._o(e.newValue);await Promise.all(r.map(o=>this.syncEngine.ao(o)))}}}else this.Os.push(e)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(t,e,r){const o=new _f(this.currentUser,t,e,r),u=GE(this.persistenceKey,this.currentUser,t);this.setItem(u,o.bs())}js(t){const e=GE(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ys(t){const e={clientId:this.Cs,onlineState:t};this.storage.setItem(this.Qs,JSON.stringify(e))}Js(t,e,r){const o=hg(this.persistenceKey,t),u=new Cu(t,e,r);this.setItem(o,u.bs())}Zs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.$s,e)}Xs(t){const e=this.Ls.exec(t);return e?e[1]:null}no(t,e){const r=this.Xs(t);return yf.Ss(r,e)}ro(t,e){const r=this.ks.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return _f.Ss(new Fe(u),o,e)}so(t,e){const r=this.qs.exec(t),o=Number(r[1]);return Cu.Ss(o,e)}Ks(t){return Cp.Ss(t)}_o(t){return JSON.parse(t)}async io(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.uo(t.batchId,t.state,t.error);tt(yi,`Ignoring mutation for non-active user ${t.user.uid}`)}oo(t){return this.syncEngine.co(t.targetId,t.state,t.error)}eo(t,e){const r=e?this.xs.insert(t,e):this.xs.remove(t),o=this.Gs(this.xs),u=this.Gs(r),h=[],m=[];return u.forEach(g=>{o.has(g)||h.push(g)}),o.forEach(g=>{u.has(g)||m.push(g)}),this.syncEngine.lo(h,m).then(()=>{this.xs=r})}Ws(t){this.xs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Gs(t){let e=dp();return t.forEach((r,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class Cb{constructor(){this.ho=new kg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,r){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new kg,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="ConnectivityMonitor";class QE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){tt(HE,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){tt(HE,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh=null;function zg(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",oV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lV{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${r}/databases/${o}`,this.wo=this.databaseId.database===wg?`project_id=${r}`:`project_id=${r}&database_id=${o}`}So(t,e,r,o,u){const h=zg(),m=this.bo(t,e.toUriEncodedString());tt(dg,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(t,m,g,r).then(_=>(tt(dg,`Received RPC '${t}' ${h}: `,_),_),_=>{throw bi(dg,`RPC '${t}' ${h} failed with error: `,_,"url: ",m,"request:",r),_})}Co(t,e,r,o,u,h){return this.So(t,e,r,o,u)}Do(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}bo(t,e){const r=oV[t];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class cV extends lV{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,r,o){const u=zg();return new Promise((h,m)=>{const g=new F0;g.setWithCredentials(!0),g.listenOnce(j0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Fh.NO_ERROR:const T=g.getResponseJson();tt(en,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(T)),h(T);break;case Fh.TIMEOUT:tt(en,`RPC '${t}' ${u} timed out`),m(new J(j.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const A=g.getStatus();if(tt(en,`RPC '${t}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const U=w==null?void 0:w.error;if(U&&U.status&&U.message){const K=function($){const gt=$.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(gt)>=0?gt:j.UNKNOWN}(U.status);m(new J(K,U.message))}else m(new J(j.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new J(j.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{tt(en,`RPC '${t}' ${u} completed.`)}});const _=JSON.stringify(o);tt(en,`RPC '${t}' ${u} sending request:`,o),g.send(e,"POST",_,r,15)})}Wo(t,e,r){const o=zg(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Q0(),m=H0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const T=u.join("");tt(en,`Creating RPC '${t}' stream ${o}: ${T}`,g);const A=h.createWebChannel(T,g);let w=!1,U=!1;const K=new uV({Fo:$=>{U?tt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,$):(w||(tt(en,`Opening RPC '${t}' stream ${o} transport.`),A.open(),w=!0),tt(en,`RPC '${t}' stream ${o} sending:`,$),A.send($))},Mo:()=>A.close()}),Z=($,gt,pt)=>{$.listen(gt,lt=>{try{pt(lt)}catch(St){setTimeout(()=>{throw St},0)}})};return Z(A,Tu.EventType.OPEN,()=>{U||(tt(en,`RPC '${t}' stream ${o} transport opened.`),K.Qo())}),Z(A,Tu.EventType.CLOSE,()=>{U||(U=!0,tt(en,`RPC '${t}' stream ${o} transport closed`),K.Uo())}),Z(A,Tu.EventType.ERROR,$=>{U||(U=!0,bi(en,`RPC '${t}' stream ${o} transport errored:`,$),K.Uo(new J(j.UNAVAILABLE,"The operation could not be completed")))}),Z(A,Tu.EventType.MESSAGE,$=>{var gt;if(!U){const pt=$.data[0];ct(!!pt);const lt=pt,St=(lt==null?void 0:lt.error)||((gt=lt[0])===null||gt===void 0?void 0:gt.error);if(St){tt(en,`RPC '${t}' stream ${o} received error:`,St);const ht=St.status;let At=function(D){const N=Re[D];if(N!==void 0)return GA(N)}(ht),x=St.message;At===void 0&&(At=j.INTERNAL,x="Unknown error status: "+ht+" with message "+St.message),U=!0,K.Uo(new J(At,x)),A.close()}else tt(en,`RPC '${t}' stream ${o} received:`,pt),K.Ko(pt)}}),Z(m,G0.STAT_EVENT,$=>{$.stat===yg.PROXY?tt(en,`RPC '${t}' stream ${o} detected buffering proxy`):$.stat===yg.NOPROXY&&tt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{K.$o()},0),K}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(s){return new gD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="PersistentStream";class Nb{constructor(t,e,r,o,u,h,m,g){this.Ti=t,this.n_=r,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new xp(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===j.RESOURCE_EXHAUSTED?(Te(e.toString()),Te("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.i_===e&&this.V_(r,o)},r=>{t(()=>{const o=new J(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(o)})})}V_(t,e){const r=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{r(()=>this.m_(o))}),this.stream.onMessage(o=>{r(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return tt(KE,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(tt(KE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hV extends Nb{constructor(t,e,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=yD(this.serializer,t),r=function(u){if(!("targetChange"in u))return ft.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?ft.min():h.readTime?Ee(h.readTime):ft.min()}(t);return this.listener.p_(e,r)}y_(t){const e={};e.database=Mg(this.serializer),e.addTarget=function(u,h){let m;const g=h.target;if(m=uf(g)?{documents:JA(u,g)}:{query:tb(u,g).ht},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=KA(u,h.resumeToken);const _=Ng(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(ft.min())>0){m.readTime=jo(u,h.snapshotVersion.toTimestamp());const _=Ng(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const r=TD(this.serializer,t);r&&(e.labels=r),this.I_(e)}w_(t){const e={};e.database=Mg(this.serializer),e.removeTarget=t,this.I_(e)}}class fV extends Nb{constructor(t,e,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return ct(!!t.streamToken),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=vD(t.writeResults,t.commitTime),r=Ee(t.commitTime);return this.listener.v_(r,e)}C_(){const t={};t.database=Mg(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>Gu(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{}class mV extends dV{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(t,Og(e,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new J(j.UNKNOWN,u.toString())})}Co(t,e,r,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Co(t,Og(e,r),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new J(j.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class gV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Te(e),this.N_=!1):tt("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class pV{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{r.enqueueAndForget(async()=>{us(this)&&(tt(ga,"Restarting streams for network reachability change."),await async function(g){const _=st(g);_.W_.add(4),await el(_),_.j_.set("Unknown"),_.W_.delete(4),await ac(_)}(this))})}),this.j_=new gV(r,o)}}async function ac(s){if(us(s))for(const t of s.G_)await t(!0)}async function el(s){for(const t of s.G_)await t(!1)}function Pf(s,t){const e=st(s);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),Mp(e)?Op(e):il(e).c_()&&Np(e,t))}function Qo(s,t){const e=st(s),r=il(e);e.K_.delete(t),r.c_()&&Ob(e,t),e.K_.size===0&&(r.c_()?r.P_():us(e)&&e.j_.set("Unknown"))}function Np(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ft.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}il(s).y_(t)}function Ob(s,t){s.H_.Ne(t),il(s).w_(t)}function Op(s){s.H_=new hD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.K_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),il(s).start(),s.j_.B_()}function Mp(s){return us(s)&&!il(s).u_()&&s.K_.size>0}function us(s){return st(s).W_.size===0}function Mb(s){s.H_=void 0}async function _V(s){s.j_.set("Online")}async function yV(s){s.K_.forEach((t,e)=>{Np(s,t)})}async function vV(s,t){Mb(s),Mp(s)?(s.j_.q_(t),Op(s)):s.j_.set("Unknown")}async function TV(s,t,e){if(s.j_.set("Online"),t instanceof QA&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.K_.delete(m),o.H_.removeTarget(m))}(s,t)}catch(r){tt(ga,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await vf(s,r)}else if(t instanceof $h?s.H_.We(t):t instanceof HA?s.H_.Ze(t):s.H_.je(t),!e.isEqual(ft.min()))try{const r=await Ab(s.localStore);e.compareTo(r)>=0&&await function(u,h){const m=u.H_.ot(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.K_.get(_);T&&u.K_.set(_,T.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const T=u.K_.get(g);if(!T)return;u.K_.set(g,T.withResumeToken(pe.EMPTY_BYTE_STRING,T.snapshotVersion)),Ob(u,g);const A=new Ji(T.target,g,_,T.sequenceNumber);Np(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(s,e)}catch(r){tt(ga,"Failed to raise snapshot:",r),await vf(s,r)}}async function vf(s,t,e){if(!os(t))throw t;s.W_.add(1),await el(s),s.j_.set("Offline"),e||(e=()=>Ab(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{tt(ga,"Retrying IndexedDB access"),await e(),s.W_.delete(1),await ac(s)})}function Pb(s,t){return t().catch(e=>vf(s,e,t))}async function nl(s){const t=st(s),e=ns(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Kr;for(;EV(t);)try{const o=await iV(t.localStore,r);if(o===null){t.U_.length===0&&e.P_();break}r=o.batchId,AV(t,o)}catch(o){await vf(t,o)}Ub(t)&&Lb(t)}function EV(s){return us(s)&&s.U_.length<10}function AV(s,t){s.U_.push(t);const e=ns(s);e.c_()&&e.S_&&e.b_(t.mutations)}function Ub(s){return us(s)&&!ns(s).u_()&&s.U_.length>0}function Lb(s){ns(s).start()}async function bV(s){ns(s).C_()}async function SV(s){const t=ns(s);for(const e of s.U_)t.b_(e.mutations)}async function wV(s,t,e){const r=s.U_.shift(),o=_p.from(r,t,e);await Pb(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await nl(s)}async function IV(s,t){t&&ns(s).S_&&await async function(r,o){if(function(h){return jA(h)&&h!==j.ABORTED}(o.code)){const u=r.U_.shift();ns(r).h_(),await Pb(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await nl(r)}}(s,t),Ub(s)&&Lb(s)}async function YE(s,t){const e=st(s);e.asyncQueue.verifyOperationInProgress(),tt(ga,"RemoteStore received new credentials");const r=us(e);e.W_.add(3),await el(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await ac(e)}async function qg(s,t){const e=st(s);t?(e.W_.delete(2),await ac(e)):t||(e.W_.add(2),await el(e),e.j_.set("Unknown"))}function il(s){return s.J_||(s.J_=function(e,r,o){const u=st(e);return u.M_(),new hV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:_V.bind(null,s),No:yV.bind(null,s),Lo:vV.bind(null,s),p_:TV.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),Mp(s)?Op(s):s.j_.set("Unknown")):(await s.J_.stop(),Mb(s))})),s.J_}function ns(s){return s.Y_||(s.Y_=function(e,r,o){const u=st(e);return u.M_(),new fV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:bV.bind(null,s),Lo:IV.bind(null,s),D_:SV.bind(null,s),v_:wV.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await nl(s)):(await s.Y_.stop(),s.U_.length>0&&(tt(ga,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const h=Date.now()+r,m=new Pp(t,e,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rl(s,t){if(Te("AsyncQueue",`${t}: ${s}`),os(s))return new J(j.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(t){return new Ro(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||it.comparator(e.key,r.key):(e,r)=>it.comparator(e.key,r.key),this.keyedMap=Eu(),this.sortedSet=new ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ro)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Ro;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.Z_=new ne(it.comparator)}track(t){const e=t.doc.key,r=this.Z_.get(e);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(e):t.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ot():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,r)=>{t.push(r)}),t}}class Ko{constructor(t,e,r,o,u,h,m,g,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,e,r,o,u){const h=[];return e.forEach(m=>{h.push({type:0,doc:m})}),new Ko(t,e,Ro.emptySet(e),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&tc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class DV{constructor(){this.queries=$E(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const o=st(e),u=o.queries;o.queries=$E(),u.forEach((h,m)=>{for(const g of m.ta)g.onError(r)})})(this,new J(j.ABORTED,"Firestore shutting down"))}}function $E(){return new ar(s=>VA(s),tc)}async function Up(s,t){const e=st(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.na()&&t.ra()&&(r=2):(u=new RV,r=t.ra()?0:1);try{switch(r){case 0:u.ea=await e.onListen(o,!0);break;case 1:u.ea=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(h){const m=rl(h,`Initialization of query '${Ao(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.ta.push(t),t.sa(e.onlineState),u.ea&&t.oa(u.ea)&&Bp(e)}async function Lp(s,t){const e=st(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const h=u.ta.indexOf(t);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=t.ra()?0:1:!u.na()&&t.ra()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function VV(s,t){const e=st(s);let r=!1;for(const o of t){const u=o.query,h=e.queries.get(u);if(h){for(const m of h.ta)m.oa(o)&&(r=!0);h.ea=o}}r&&Bp(e)}function CV(s,t,e){const r=st(s),o=r.queries.get(t);if(o)for(const u of o.ta)u.onError(e);r.queries.delete(t)}function Bp(s){s.ia.forEach(t=>{t.next()})}var Fg,ZE;(ZE=Fg||(Fg={}))._a="default",ZE.Cache="cache";class kp{constructor(t,e,r){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Ko(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Ko.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(t,e){this.Ia=t,this.byteLength=e}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t){this.serializer=t}ps(t){return Ai(this.serializer,t)}ys(t){return t.metadata.exists?WA(this.serializer,t.document,!1):ie.newNoDocument(this.ps(t.metadata.name),this.ws(t.metadata.readTime))}ws(t){return Ee(t)}}class NV{constructor(t,e,r){this.da=t,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Bb(t)}Aa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Ia.namedQuery)this.queries.push(t.Ia.namedQuery);else if(t.Ia.documentMetadata){this.documents.push({metadata:t.Ia.documentMetadata}),t.Ia.documentMetadata.exists||++e;const r=Nt.fromString(t.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.Ia.document&&(this.documents[this.documents.length-1].document=t.Ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ra(t){const e=new Map,r=new WE(this.serializer);for(const o of t)if(o.metadata.queries){const u=r.ps(o.metadata.name);for(const h of o.metadata.queries){const m=(e.get(h)||wt()).add(u);e.set(h,m)}}return e}async complete(){const t=await rV(this.localStore,new WE(this.serializer),this.documents,this.da.id),e=this.Ra(this.documents);for(const r of this.queries)await sV(this.localStore,r,e.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:t}}}function Bb(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t){this.key=t}}class zb{constructor(t){this.key=t}}class qb{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=wt(),this.mutatedKeys=wt(),this.ya=xA(t),this.wa=new Ro(this.ya)}get Sa(){return this.fa}ba(t,e){const r=e?e.Da:new XE,o=e?e.wa:this.wa;let u=e?e.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((T,A)=>{const w=o.get(T),U=ec(this.query,A)?A:null,K=!!w&&this.mutatedKeys.has(w.key),Z=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let $=!1;w&&U?w.data.isEqual(U.data)?K!==Z&&(r.track({type:3,doc:U}),$=!0):this.va(w,U)||(r.track({type:2,doc:U}),$=!0,(g&&this.ya(U,g)>0||_&&this.ya(U,_)<0)&&(m=!0)):!w&&U?(r.track({type:0,doc:U}),$=!0):w&&!U&&(r.track({type:1,doc:w}),$=!0,(g||_)&&(m=!0)),$&&(U?(h=h.add(U),u=Z?u.add(T):u.delete(T)):(h=h.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{wa:h,Da:r,ls:m,mutatedKeys:u}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const h=t.Da.X_();h.sort((T,A)=>function(U,K){const Z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return Z(U)-Z(K)}(T.type,A.type)||this.ya(T.doc,A.doc)),this.Ca(r),o=o!=null&&o;const m=e&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,_=g!==this.ga;return this.ga=g,h.length!==0||_?{snapshot:new Ko(this.query,t.wa,u,h,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new XE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=wt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return t.forEach(r=>{this.pa.has(r)||e.push(new zb(r))}),this.pa.forEach(r=>{t.has(r)||e.push(new kb(r))}),e}Oa(t){this.fa=t.gs,this.pa=wt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Ko.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const cs="SyncEngine";class OV{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class MV{constructor(t){this.key=t,this.Ba=!1}}class PV{constructor(t,e,r,o,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new ar(m=>VA(m),tc),this.qa=new Map,this.Qa=new Set,this.$a=new ne(it.comparator),this.Ua=new Map,this.Ka=new Sp,this.Wa={},this.Ga=new Map,this.za=ma.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function UV(s,t,e=!0){const r=Uf(s);let o;const u=r.ka.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Fb(r,t,e,!0),o}async function LV(s,t){const e=Uf(s);await Fb(e,t,!0,!1)}async function Fb(s,t,e,r){const o=await Go(s.localStore,fn(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await zp(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&e&&Pf(s.remoteStore,o),m}async function zp(s,t,e,r,o){s.Ha=(A,w,U)=>async function(Z,$,gt,pt){let lt=$.view.ba(gt);lt.ls&&(lt=await pf(Z.localStore,$.query,!1).then(({documents:x})=>$.view.ba(x,lt)));const St=pt&&pt.targetChanges.get($.targetId),ht=pt&&pt.targetMismatches.get($.targetId)!=null,At=$.view.applyChanges(lt,Z.isPrimaryClient,St,ht);return jg(Z,$.targetId,At.Ma),At.snapshot}(s,A,w,U);const u=await pf(s.localStore,t,!0),h=new qb(t,u.gs),m=h.ba(u.documents),g=rc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);jg(s,e,_.Ma);const T=new OV(t,e,h);return s.ka.set(t,T),s.qa.has(e)?s.qa.get(e).push(t):s.qa.set(e,[t]),_.snapshot}async function BV(s,t,e){const r=st(s),o=r.ka.get(t),u=r.qa.get(o.targetId);if(u.length>1)return r.qa.set(o.targetId,u.filter(h=>!tc(h,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ho(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Qo(r.remoteStore,o.targetId),Yo(r,o.targetId)}).catch(as)):(Yo(r,o.targetId),await Ho(r.localStore,o.targetId,!0))}async function kV(s,t){const e=st(s),r=e.ka.get(t),o=e.qa.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Qo(e.remoteStore,r.targetId))}async function zV(s,t,e){const r=Gp(s);try{const o=await function(h,m){const g=st(h),_=ue.now(),T=m.reduce((U,K)=>U.add(K.key),wt());let A,w;return g.persistence.runTransaction("Locally write mutations","readwrite",U=>{let K=vn(),Z=wt();return g.ds.getEntries(U,T).next($=>{K=$,K.forEach((gt,pt)=>{pt.isValidDocument()||(Z=Z.add(gt))})}).next(()=>g.localDocuments.getOverlayedDocuments(U,K)).next($=>{A=$;const gt=[];for(const pt of m){const lt=lD(pt,A.get(pt.key).overlayedDocument);lt!=null&&gt.push(new or(pt.key,lt,TA(lt.value.mapValue),le.exists(!0)))}return g.mutationQueue.addMutationBatch(U,_,gt,m)}).next($=>{w=$;const gt=$.applyToLocalDocumentSet(A,Z);return g.documentOverlayCache.saveOverlays(U,$.batchId,gt)})}).then(()=>({batchId:w.batchId,changes:OA(A)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Wa[h.currentUser.toKey()];_||(_=new ne(Tt)),_=_.insert(m,g),h.Wa[h.currentUser.toKey()]=_}(r,o.batchId,e),await lr(r,o.changes),await nl(r.remoteStore)}catch(o){const u=rl(o,"Failed to persist write");e.reject(u)}}async function jb(s,t){const e=st(s);try{const r=await nV(e.localStore,t);t.targetChanges.forEach((o,u)=>{const h=e.Ua.get(u);h&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?ct(h.Ba):o.removedDocuments.size>0&&(ct(h.Ba),h.Ba=!1))}),await lr(e,r,t)}catch(r){await as(r)}}function JE(s,t,e){const r=st(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.ka.forEach((u,h)=>{const m=h.view.sa(t);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=st(h);g.onlineState=m;let _=!1;g.queries.forEach((T,A)=>{for(const w of A.ta)w.sa(m)&&(_=!0)}),_&&Bp(g)}(r.eventManager,t),o.length&&r.La.p_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qV(s,t,e){const r=st(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Ua.get(t),u=o&&o.key;if(u){let h=new ne(it.comparator);h=h.insert(u,ie.newNoDocument(u,ft.min()));const m=wt().add(u),g=new ic(ft.min(),new Map,new ne(Tt),h,m);await jb(r,g),r.$a=r.$a.remove(u),r.Ua.delete(t),jp(r)}else await Ho(r.localStore,t,!1).then(()=>Yo(r,t,e)).catch(as)}async function FV(s,t){const e=st(s),r=t.batch.batchId;try{const o=await eV(e.localStore,t);Fp(e,r,null),qp(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await lr(e,o)}catch(o){await as(o)}}async function jV(s,t,e){const r=st(s);try{const o=await function(h,m){const g=st(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let T;return g.mutationQueue.lookupMutationBatch(_,m).next(A=>(ct(A!==null),T=A.keys(),g.mutationQueue.removeMutationBatch(_,A))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T)).next(()=>g.localDocuments.getDocuments(_,T))})}(r.localStore,t);Fp(r,t,e),qp(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await lr(r,o)}catch(o){await as(o)}}async function GV(s,t){const e=st(s);us(e.remoteStore)||tt(cs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(h){const m=st(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g))}(e.localStore);if(r===Kr)return void t.resolve();const o=e.Ga.get(r)||[];o.push(t),e.Ga.set(r,o)}catch(r){const o=rl(r,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}}function qp(s,t){(s.Ga.get(t)||[]).forEach(e=>{e.resolve()}),s.Ga.delete(t)}function Fp(s,t,e){const r=st(s);let o=r.Wa[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Wa[r.currentUser.toKey()]=o}}function Yo(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.qa.get(t))s.ka.delete(r),e&&s.La.Ja(r,e);s.qa.delete(t),s.isPrimaryClient&&s.Ka.br(t).forEach(r=>{s.Ka.containsKey(r)||Gb(s,r)})}function Gb(s,t){s.Qa.delete(t.path.canonicalString());const e=s.$a.get(t);e!==null&&(Qo(s.remoteStore,e),s.$a=s.$a.remove(t),s.Ua.delete(e),jp(s))}function jg(s,t,e){for(const r of e)r instanceof kb?(s.Ka.addReference(r.key,t),HV(s,r)):r instanceof zb?(tt(cs,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,t),s.Ka.containsKey(r.key)||Gb(s,r.key)):ot()}function HV(s,t){const e=t.key,r=e.path.canonicalString();s.$a.get(e)||s.Qa.has(r)||(tt(cs,"New document in limbo: "+e),s.Qa.add(r),jp(s))}function jp(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const e=new it(Nt.fromString(t)),r=s.za.next();s.Ua.set(r,new MV(e)),s.$a=s.$a.insert(e,r),Pf(s.remoteStore,new Ji(fn(Wo(e.path)),r,"TargetPurposeLimboResolution",_n.ae))}}async function lr(s,t,e){const r=st(s),o=[],u=[],h=[];r.ka.isEmpty()||(r.ka.forEach((m,g)=>{h.push(r.Ha(g,t,e).then(_=>{var T;if((_||e)&&r.isPrimaryClient){const A=_?!_.fromCache:(T=e==null?void 0:e.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Dp.Yi(g.targetId,_);u.push(A)}}))}),await Promise.all(h),r.La.p_(o),await async function(g,_){const T=st(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>B.forEach(_,w=>B.forEach(w.Hi,U=>T.persistence.referenceDelegate.addReference(A,w.targetId,U)).next(()=>B.forEach(w.Ji,U=>T.persistence.referenceDelegate.removeReference(A,w.targetId,U)))))}catch(A){if(!os(A))throw A;tt(Vp,"Failed to update sequence numbers: "+A)}for(const A of _){const w=A.targetId;if(!A.fromCache){const U=T.Ts.get(w),K=U.snapshotVersion,Z=U.withLastLimboFreeSnapshotVersion(K);T.Ts=T.Ts.insert(w,Z)}}}(r.localStore,u))}async function QV(s,t){const e=st(s);if(!e.currentUser.isEqual(t)){tt(cs,"User change. New user:",t.toKey());const r=await Eb(e.localStore,t);e.currentUser=t,function(u,h){u.Ga.forEach(m=>{m.forEach(g=>{g.reject(new J(j.CANCELLED,h))})}),u.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await lr(e,r.Rs)}}function KV(s,t){const e=st(s),r=e.Ua.get(t);if(r&&r.Ba)return wt().add(r.key);{let o=wt();const u=e.qa.get(t);if(!u)return o;for(const h of u){const m=e.ka.get(h);o=o.unionWith(m.view.Sa)}return o}}async function YV(s,t){const e=st(s),r=await pf(e.localStore,t.query,!0),o=t.view.Oa(r);return e.isPrimaryClient&&jg(e,t.targetId,o.Ma),o}async function XV(s,t){const e=st(s);return wb(e.localStore,t).then(r=>lr(e,r))}async function $V(s,t,e,r){const o=st(s),u=await function(m,g){const _=st(m),T=st(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>T.Ln(A,g).next(w=>w?_.localDocuments.getDocuments(A,w):B.resolve(null)))}(o.localStore,t);u!==null?(e==="pending"?await nl(o.remoteStore):e==="acknowledged"||e==="rejected"?(Fp(o,t,r||null),qp(o,t),function(m,g){st(st(m).mutationQueue).qn(g)}(o.localStore,t)):ot(),await lr(o,u)):tt(cs,"Cannot apply mutation batch with id: "+t)}async function ZV(s,t){const e=st(s);if(Uf(e),Gp(e),t===!0&&e.ja!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await t0(e,r.toArray());e.ja=!0,await qg(e.remoteStore,!0);for(const u of o)Pf(e.remoteStore,u)}else if(t===!1&&e.ja!==!1){const r=[];let o=Promise.resolve();e.qa.forEach((u,h)=>{e.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Yo(e,h),Ho(e.localStore,h,!0))),Qo(e.remoteStore,h)}),await o,await t0(e,r),function(h){const m=st(h);m.Ua.forEach((g,_)=>{Qo(m.remoteStore,_)}),m.Ka.Dr(),m.Ua=new Map,m.$a=new ne(it.comparator)}(e),e.ja=!1,await qg(e.remoteStore,!1)}}async function t0(s,t,e){const r=st(s),o=[],u=[];for(const h of t){let m;const g=r.qa.get(h);if(g&&g.length!==0){m=await Go(r.localStore,fn(g[0]));for(const _ of g){const T=r.ka.get(_),A=await YV(r,T);A.snapshot&&u.push(A.snapshot)}}else{const _=await Sb(r.localStore,h);m=await Go(r.localStore,_),await zp(r,Hb(_),h,!1,m.resumeToken)}o.push(m)}return r.La.p_(u),o}function Hb(s){return DA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function WV(s){return function(e){return st(st(e).persistence).zi()}(st(s).localStore)}async function JV(s,t,e,r){const o=st(s);if(o.ja)return void tt(cs,"Ignoring unexpected query state notification.");const u=o.qa.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const h=await wb(o.localStore,CA(u[0])),m=ic.createSynthesizedRemoteEventForCurrentChange(t,e==="current",pe.EMPTY_BYTE_STRING);await lr(o,h,m);break}case"rejected":await Ho(o.localStore,t,!0),Yo(o,t,r);break;default:ot()}}async function t2(s,t,e){const r=Uf(s);if(r.ja){for(const o of t){if(r.qa.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(cs,"Adding an already active target "+o);continue}const u=await Sb(r.localStore,o),h=await Go(r.localStore,u);await zp(r,Hb(u),h.targetId,!1,h.resumeToken),Pf(r.remoteStore,h)}for(const o of e)r.qa.has(o)&&await Ho(r.localStore,o,!1).then(()=>{Qo(r.remoteStore,o),Yo(r,o)}).catch(as)}}function Uf(s){const t=st(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=jb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=KV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qV.bind(null,t),t.La.p_=VV.bind(null,t.eventManager),t.La.Ja=CV.bind(null,t.eventManager),t}function Gp(s){const t=st(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=FV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jV.bind(null,t),t}function e2(s,t,e){const r=st(s);(async function(u,h,m){try{const g=await h.getMetadata();if(await function(U,K){const Z=st(U),$=Ee(K.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",gt=>Z.Yr.getBundleMetadata(gt,K.id)).then(gt=>!!gt&&gt.createTime.compareTo($)>=0)}(u.localStore,g))return await h.close(),m._completeWith(function(U){return{taskState:"Success",documentsLoaded:U.totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}}(g)),Promise.resolve(new Set);m._updateProgress(Bb(g));const _=new NV(g,u.localStore,h.serializer);let T=await h.Ya();for(;T;){const w=await _.Aa(T);w&&m._updateProgress(w),T=await h.Ya()}const A=await _.complete();return await lr(u,A.ma,void 0),await function(U,K){const Z=st(U);return Z.persistence.runTransaction("Save bundle","readwrite",$=>Z.Yr.saveBundleMetadata($,K))}(u.localStore,g),m._completeWith(A.progress),Promise.resolve(A.Va)}catch(g){return bi(cs,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,t,e).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}class Hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return Tb(this.persistence,new vb,t.initialUser,this.serializer)}Xa(t){return new wp(Mf.ri,this.serializer)}Za(t){return new Cb}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hu.provider={build:()=>new Hu};class n2 extends Hu{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){ct(this.persistence.referenceDelegate instanceof gf);const r=this.persistence.referenceDelegate.garbageCollector;return new db(r,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new wp(r=>gf.ri(r,e),this.serializer)}}class Qb extends Hu{constructor(t,e,r){super(),this.ru=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await Gp(this.ru.syncEngine),await nl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return Tb(this.persistence,new vb,t.initialUser,this.serializer)}tu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new db(r,t.asyncQueue,e)}nu(t,e){const r=new h1(e,this.persistence);return new c1(t.asyncQueue,r)}Xa(t){const e=Rp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Ip(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,xb(),Zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new Cb}}class i2 extends Qb{constructor(t,e){super(t,e,!1),this.ru=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ru.syncEngine;this.sharedClientState instanceof fg&&(this.sharedClientState.syncEngine={uo:$V.bind(null,e),co:JV.bind(null,e),lo:t2.bind(null,e),zi:WV.bind(null,e),ao:XV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await ZV(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(t){const e=xb();if(!fg.D(e))throw new J(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Rp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new fg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Qu{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QV.bind(null,this.syncEngine),await qg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new DV}()}createDatastore(t){const e=sc(t.databaseInfo.databaseId),r=function(u){return new cV(u)}(t.databaseInfo);return function(u,h,m,g){return new mV(u,h,m,g)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,o,u,h,m){return new pV(r,o,u,h,m)}(this.localStore,this.datastore,t.asyncQueue,e=>JE(this.syncEngine,e,0),function(){return QE.D()?new QE:new aV}())}createSyncEngine(t,e){return function(o,u,h,m,g,_,T){const A=new PV(o,u,h,m,g,_);return T&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(o){const u=st(o);tt(ga,"RemoteStore shutting down."),u.W_.add(5),await el(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Qu.provider={build:()=>new Qu};function e0(s,t=10240){let e=0;return{async read(){if(e<s.byteLength){const r={value:s.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Te("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,e){this.ou=t,this.serializer=e,this.metadata=new Ze,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const t=await this.uu();if(t===null)return null;const e=this._u.decode(t),r=Number(e);isNaN(r)&&this.cu(`length string (${e}) is not valid number`);const o=await this.lu(r);return new xV(JSON.parse(o),t.length+r)}hu(){return this.buffer.findIndex(t=>t===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const t=this.hu();t<0&&this.cu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async lu(t){for(;this.buffer.length<t;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const e=this._u.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}cu(t){throw this.ou.cancel(),new Error(`Invalid bundle format: ${t}`)}async Pu(){const t=await this.ou.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(o,u){const h=st(o),m={documents:u.map(A=>ju(h.serializer,A))},g=await h.Co("BatchGetDocuments",h.serializer.databaseId,Nt.emptyPath(),m,u.length),_=new Map;g.forEach(A=>{const w=_D(h.serializer,A);_.set(w.key.toString(),w)});const T=[];return u.forEach(A=>{const w=_.get(A.toString());ct(!!w),T.push(w)}),T}(this.datastore,t);return e.forEach(r=>this.recordVersion(r)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new tl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,r)=>{const o=it.fromPath(r);this.mutations.push(new gp(o,this.precondition(o)))}),await async function(r,o){const u=st(r),h={writes:o.map(m=>Gu(u.serializer,m))};await u.So("Commit",u.serializer.databaseId,Nt.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ot();e=ft.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new J(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(ft.min())?le.exists(!1):le.updateTime(e):le.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ft.min()))throw new J(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return le.updateTime(e)}return le.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,e,r,o,u){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=u,this.Tu=r.maxAttempts,this.a_=new xp(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new s2(this.datastore),e=this.du(t);e&&e.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.Au(o)}))}).catch(r=>{this.Au(r)})})}du(t){try{const e=this.updateFunction(t);return!Zu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!jA(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class o2{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=Fe.UNAUTHENTICATED,this.clientId=Y0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{tt(is,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(tt(is,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=rl(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function mg(s,t){s.asyncQueue.verifyOperationInProgress(),tt(is,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await Eb(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function n0(s,t){s.asyncQueue.verifyOperationInProgress();const e=await Hp(s);tt(is,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>YE(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>YE(t.remoteStore,o)),s._onlineComponents=t}async function Hp(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(is,"Using user provided OfflineComponentProvider");try{await mg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(e))throw e;bi("Error using user provided cache. Falling back to memory cache: "+e),await mg(s,new Hu)}}else tt(is,"Using default OfflineComponentProvider"),await mg(s,new n2(void 0));return s._offlineComponents}async function Bf(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(is,"Using user provided OnlineComponentProvider"),await n0(s,s._uninitializedComponentsProvider._online)):(tt(is,"Using default OnlineComponentProvider"),await n0(s,new Qu))),s._onlineComponents}function Kb(s){return Hp(s).then(t=>t.persistence)}function Qp(s){return Hp(s).then(t=>t.localStore)}function Yb(s){return Bf(s).then(t=>t.remoteStore)}function Kp(s){return Bf(s).then(t=>t.syncEngine)}function l2(s){return Bf(s).then(t=>t.datastore)}async function Xo(s){const t=await Bf(s),e=t.eventManager;return e.onListen=UV.bind(null,t.syncEngine),e.onUnlisten=BV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=LV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=kV.bind(null,t.syncEngine),e}function u2(s){return s.asyncQueue.enqueue(async()=>{const t=await Kb(s),e=await Yb(s);return t.setNetworkEnabled(!0),function(o){const u=st(o);return u.W_.delete(0),ac(u)}(e)})}function c2(s){return s.asyncQueue.enqueue(async()=>{const t=await Kb(s),e=await Yb(s);return t.setNetworkEnabled(!1),async function(o){const u=st(o);u.W_.add(0),await el(u),u.j_.set("Offline")}(e)})}function h2(s,t){const e=new Ze;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const m=await function(_,T){const A=st(_);return A.persistence.runTransaction("read document","readonly",w=>A.localDocuments.getDocument(w,T))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new J(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=rl(m,`Failed to get document '${u} from cache`);h.reject(g)}}(await Qp(s),t,e)),e.promise}function Xb(s,t,e={}){const r=new Ze;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const T=new Lf({next:w=>{T.su(),h.enqueueAndForget(()=>Lp(u,A));const U=w.docs.has(m);!U&&w.fromCache?_.reject(new J(j.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&w.fromCache&&g&&g.source==="server"?_.reject(new J(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(w)},error:w=>_.reject(w)}),A=new kp(Wo(m.path),T,{includeMetadataChanges:!0,Ta:!0});return Up(u,A)}(await Xo(s),s.asyncQueue,t,e,r)),r.promise}function f2(s,t){const e=new Ze;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const m=await pf(o,u,!0),g=new qb(u,m.gs),_=g.ba(m.documents),T=g.applyChanges(_,!1);h.resolve(T.snapshot)}catch(m){const g=rl(m,`Failed to execute query '${u} against cache`);h.reject(g)}}(await Qp(s),t,e)),e.promise}function $b(s,t,e={}){const r=new Ze;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const T=new Lf({next:w=>{T.su(),h.enqueueAndForget(()=>Lp(u,A)),w.fromCache&&g.source==="server"?_.reject(new J(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(w)},error:w=>_.reject(w)}),A=new kp(m,T,{includeMetadataChanges:!0,Ta:!0});return Up(u,A)}(await Xo(s),s.asyncQueue,t,e,r)),r.promise}function d2(s,t){const e=new Lf(t);return s.asyncQueue.enqueueAndForget(async()=>function(o,u){st(o).ia.add(u),u.next()}(await Xo(s),e)),()=>{e.su(),s.asyncQueue.enqueueAndForget(async()=>function(o,u){st(o).ia.delete(u)}(await Xo(s),e))}}function m2(s,t,e,r){const o=function(h,m){let g;return g=typeof h=="string"?np().encode(h):h,function(T,A){return new r2(T,A)}(function(T,A){if(T instanceof Uint8Array)return e0(T,A);if(T instanceof ArrayBuffer)return e0(new Uint8Array(T),A);if(T instanceof ReadableStream)return T.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),m)}(e,sc(t));s.asyncQueue.enqueueAndForget(async()=>{e2(await Kp(s),o,r)})}function g2(s,t){return s.asyncQueue.enqueue(async()=>function(r,o){const u=st(r);return u.persistence.runTransaction("Get named query","readonly",h=>u.Yr.getNamedQuery(h,o))}(await Qp(s),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(s,t,e){if(!e)throw new J(j.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Wb(s,t,e,r){if(t===!0&&r===!0)throw new J(j.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function r0(s){if(!it.isDocumentKey(s))throw new J(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function s0(s){if(it.isDocumentKey(s))throw new J(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function kf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ot()}function zt(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new J(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=kf(s);throw new J(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function Jb(s,t){if(t<=0)throw new J(j.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firestore.googleapis.com",a0=!0;class o0{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new J(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tS,this.ssl=a0}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:a0;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ub;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UD)throw new J(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Wb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new J(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class oc{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JR;switch(r.type){case"firstParty":return new i1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=i0.get(e);r&&(tt("ComponentProvider","Removing Datastore"),i0.delete(e),r.terminate())}(this),Promise.resolve()}}function p2(s,t,e,r={}){var o;const u=(s=zt(s,oc))._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:s._getEmulatorOptions()}),m=`${t}:${e}`;u.host!==tS&&u.host!==m&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:r});if(!Do(g,h)&&(s._setSettings(g),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=Fe.MOCK_USER;else{_=vI(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new J(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Fe(A)}s._authCredentials=new t1(new K0(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class eS{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new eS(this.firestore,t,this._query)}},he=class nS{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nS(this.firestore,t,this._key)}},Yr=class iS extends dn{constructor(t,e,r){super(t,e,Wo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new he(this.firestore,null,new it(t))}withConverter(t){return new iS(this.firestore,t,this._path)}};function rS(s,t,...e){if(s=De(s),Yp("collection","path",t),s instanceof oc){const r=Nt.fromString(t,...e);return s0(r),new Yr(s,null,r)}{if(!(s instanceof he||s instanceof Yr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Nt.fromString(t,...e));return s0(r),new Yr(s.firestore,null,r)}}function _2(s,t){if(s=zt(s,oc),Yp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new J(j.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(s,null,function(r){return new sr(Nt.emptyPath(),r)}(t))}function Tf(s,t,...e){if(s=De(s),arguments.length===1&&(t=Y0.newId()),Yp("doc","path",t),s instanceof oc){const r=Nt.fromString(t,...e);return r0(r),new he(s,null,new it(r))}{if(!(s instanceof he||s instanceof Yr))throw new J(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Nt.fromString(t,...e));return r0(r),new he(s.firestore,s instanceof Yr?s.converter:null,new it(r))}}function sS(s,t){return s=De(s),t=De(t),(s instanceof he||s instanceof Yr)&&(t instanceof he||t instanceof Yr)&&s.firestore===t.firestore&&s.path===t.path&&s.converter===t.converter}function aS(s,t){return s=De(s),t=De(t),s instanceof dn&&t instanceof dn&&s.firestore===t.firestore&&tc(s._query,t._query)&&s.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="AsyncQueue";class u0{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new xp(this,"async_queue_retry"),this.Su=()=>{const r=Zh();r&&tt(l0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const e=Zh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Zh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Ze;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!os(t))throw t;tt(l0,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(r);throw Te("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const o=Pp.createAndSchedule(this,t,e,r,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&ot()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function Gg(s){return function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class y2{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ze,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=-1;let Ae=class extends oc{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new u0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new u0(t),this._firestoreClient=void 0,await t}}};function sn(s){if(s._terminated)throw new J(j.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||oS(s),s._firestoreClient}function oS(s){var t,e,r;const o=s._freezeSettings(),u=function(m,g,_,T){return new z1(m,g,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Zb(T.experimentalLongPollingOptions),T.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((e=o.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new o2(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}function T2(s,t){bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return lS(s,Qu.provider,{build:r=>new Qb(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function E2(s){bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();lS(s,Qu.provider,{build:e=>new i2(e,t.cacheSizeBytes)})}function lS(s,t,e){if((s=zt(s,Ae))._firestoreClient||s._terminated)throw new J(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new J(j.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},oS(s)}function A2(s){if(s._initialized&&!s._terminated)throw new J(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ze;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ei.D())return Promise.resolve();const o=r+yb;await Ei.delete(o)}(Rp(s._databaseId,s._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function b2(s){return function(e){const r=new Ze;return e.asyncQueue.enqueueAndForget(async()=>GV(await Kp(e),r)),r.promise}(sn(s=zt(s,Ae)))}function S2(s){return u2(sn(s=zt(s,Ae)))}function w2(s){return c2(sn(s=zt(s,Ae)))}function I2(s,t){const e=sn(s=zt(s,Ae)),r=new y2;return m2(e,s._databaseId,t,r),r}function R2(s,t){return g2(sn(s=zt(s,Ae)),t).then(e=>e?new dn(s,null,e.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wi(pe.fromBase64String(t))}catch(e){throw new J(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new wi(pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new J(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new J(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new J(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Tt(this._lat,t._lat)||Tt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=/^__.*__$/;class V2{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new or(t,this.data,this.fieldMask,e,this.fieldTransforms):new Jo(t,this.data,e,this.fieldTransforms)}}class uS{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new or(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function cS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class qf{constructor(t,e,r,o,u,h){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new qf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.$u(t),o}Uu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.Bu(),o}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Ef(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(cS(this.Lu)&&D2.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class C2{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||sc(t)}ju(t,e,r,o=!1){return new qf({Lu:t,methodName:e,zu:r,path:oe.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function va(s){const t=s._freezeSettings(),e=sc(s._databaseId);return new C2(s._databaseId,!!t.ignoreUndefinedProperties,e)}function Ff(s,t,e,r,o,u={}){const h=s.ju(u.merge||u.mergeFields?2:0,t,e,o);n_("Data must be an object, but it was:",h,r);const m=dS(r,h);let g,_;if(u.merge)g=new yn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const w=Hg(t,A,e);if(!h.contains(w))throw new J(j.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);gS(T,w)||T.push(w)}g=new yn(T),_=h.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,_=h.fieldTransforms;return new V2(new $e(m),g,_)}class lc extends ya{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof lc}}function hS(s,t,e){return new qf({Lu:3,zu:t.settings.zu,methodName:s._methodName,Qu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $p extends ya{_toFieldTransform(t){return new nc(t.path,new qo)}isEqual(t){return t instanceof $p}}class Zp extends ya{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=hS(this,t,!0),r=this.Hu.map(u=>Ta(u,e)),o=new ca(r);return new nc(t.path,o)}isEqual(t){return t instanceof Zp&&Do(this.Hu,t.Hu)}}class Wp extends ya{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=hS(this,t,!0),r=this.Hu.map(u=>Ta(u,e)),o=new ha(r);return new nc(t.path,o)}isEqual(t){return t instanceof Wp&&Do(this.Hu,t.Hu)}}class Jp extends ya{constructor(t,e){super(t),this.Ju=e}_toFieldTransform(t){const e=new Fo(t.serializer,UA(t.serializer,this.Ju));return new nc(t.path,e)}isEqual(t){return t instanceof Jp&&this.Ju===t.Ju}}function t_(s,t,e,r){const o=s.ju(1,t,e);n_("Data must be an object, but it was:",o,r);const u=[],h=$e.empty();ls(r,(g,_)=>{const T=i_(t,g,e);_=De(_);const A=o.Uu(T);if(_ instanceof lc)u.push(T);else{const w=Ta(_,A);w!=null&&(u.push(T),h.set(T,w))}});const m=new yn(u);return new uS(h,m,o.fieldTransforms)}function e_(s,t,e,r,o,u){const h=s.ju(1,t,e),m=[Hg(t,r,e)],g=[o];if(u.length%2!=0)throw new J(j.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(Hg(t,u[w])),g.push(u[w+1]);const _=[],T=$e.empty();for(let w=m.length-1;w>=0;--w)if(!gS(_,m[w])){const U=m[w];let K=g[w];K=De(K);const Z=h.Uu(U);if(K instanceof lc)_.push(U);else{const $=Ta(K,Z);$!=null&&(_.push(U),T.set(U,$))}}const A=new yn(_);return new uS(T,A,h.fieldTransforms)}function fS(s,t,e,r=!1){return Ta(e,s.ju(r?4:3,t))}function Ta(s,t){if(mS(s=De(s)))return n_("Unsupported field value:",t,s),dS(s,t);if(s instanceof ya)return function(r,o){if(!cS(o.Lu))throw o.Wu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const m of r){let g=Ta(m,o.Ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,t)}return function(r,o){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ue.fromDate(r);return{timestampValue:jo(o.serializer,u)}}if(r instanceof ue){const u=new ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jo(o.serializer,u)}}if(r instanceof zf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:KA(o.serializer,r._byteString)};if(r instanceof he){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Xp)return function(h,m){return{mapValue:{fields:{[up]:{stringValue:cp},[Bo]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw m.Wu("VectorValues must only contain numeric values.");return mp(m.serializer,_)})}}}}}}(r,o);throw o.Wu(`Unsupported field value: ${kf(r)}`)}(s,t)}function dS(s,t){const e={};return hA(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ls(s,(r,o)=>{const u=Ta(o,t.qu(r));u!=null&&(e[r]=u)}),{mapValue:{fields:e}}}function mS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ue||s instanceof zf||s instanceof wi||s instanceof he||s instanceof ya||s instanceof Xp)}function n_(s,t,e){if(!mS(e)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(e)){const r=kf(e);throw r==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+r)}}function Hg(s,t,e){if((t=De(t))instanceof rs)return t._internalPath;if(typeof t=="string")return i_(s,t);throw Ef("Field path arguments must be of type string or ",s,!1,void 0,e)}const x2=new RegExp("[~\\*/\\[\\]]");function i_(s,t,e){if(t.search(x2)>=0)throw Ef(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new rs(...t.split("."))._internalPath}catch{throw Ef(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Ef(s,t,e,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new J(j.INVALID_ARGUMENT,m+s+g)}function gS(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new N2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(jf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class N2 extends Ku{data(){return super.data()}}function jf(s,t){return typeof t=="string"?i_(s,t):t instanceof rs?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new J(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class uc extends r_{}function qr(s,t,...e){let r=[];t instanceof r_&&r.push(t),r=r.concat(e),function(u){const h=u.filter(g=>g instanceof s_).length,m=u.filter(g=>g instanceof Gf).length;if(h>1||h>0&&m>0)throw new J(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Gf extends uc{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Gf(t,e,r)}_apply(t){const e=this._parse(t);return yS(t._query,e),new dn(t.firestore,t.converter,xg(t._query,e))}_parse(t){const e=va(t.firestore);return function(u,h,m,g,_,T,A){let w;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new J(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){h0(A,T);const K=[];for(const Z of A)K.push(c0(g,u,Z));w={arrayValue:{values:K}}}else w=c0(g,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||h0(A,T),w=fS(m,h,A,T==="in"||T==="not-in");return Ot.create(_,T,w)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function O2(s,t,e){const r=t,o=jf("where",s);return Gf._create(o,r,e)}class s_ extends r_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new s_(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:Kt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)yS(h,g),h=xg(h,g)}(t._query,e),new dn(t.firestore,t.converter,xg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a_ extends uc{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new a_(t,e)}_apply(t){const e=function(o,u,h){if(o.startAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new J(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fu(u,h)}(t._query,this._field,this._direction);return new dn(t.firestore,t.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new sr(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,e))}}function M2(s,t="asc"){const e=t,r=jf("orderBy",s);return a_._create(r,e)}class Hf extends uc{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Hf(t,e,r)}_apply(t){return new dn(t.firestore,t.converter,hf(t._query,this._limit,this._limitType))}}function P2(s){return Jb("limit",s),Hf._create("limit",s,"F")}function U2(s){return Jb("limitToLast",s),Hf._create("limitToLast",s,"L")}class Qf extends uc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Qf(t,e,r)}_apply(t){const e=_S(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(o,u){return new sr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)}(t._query,e))}}function L2(...s){return Qf._create("startAt",s,!0)}function B2(...s){return Qf._create("startAfter",s,!1)}class Kf extends uc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Kf(t,e,r)}_apply(t){const e=_S(t,this.type,this._docOrFields,this._inclusive);return new dn(t.firestore,t.converter,function(o,u){return new sr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)}(t._query,e))}}function k2(...s){return Kf._create("endBefore",s,!1)}function z2(...s){return Kf._create("endAt",s,!0)}function _S(s,t,e,r){if(e[0]=De(e[0]),e[0]instanceof Ku)return function(u,h,m,g,_){if(!g)throw new J(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const T=[];for(const A of Io(u))if(A.field.isKeyField())T.push(la(h,g.key));else{const w=g.data.field(A.field);if(Rf(w))throw new J(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const U=A.field.canonicalString();throw new J(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}T.push(w)}return new es(T,_)}(s._query,s.firestore._databaseId,t,e[0]._document,r);{const o=va(s.firestore);return function(h,m,g,_,T,A){const w=h.explicitOrderBy;if(T.length>w.length)throw new J(j.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let K=0;K<T.length;K++){const Z=T[K];if(w[K].field.isKeyField()){if(typeof Z!="string")throw new J(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!fp(h)&&Z.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const $=h.path.child(Nt.fromString(Z));if(!it.isDocumentKey($))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${$}' is not because it contains an odd number of segments.`);const gt=new it($);U.push(la(m,gt))}else{const $=fS(g,_,Z);U.push($)}}return new es(U,A)}(s._query,s.firestore._databaseId,o,t,e,r)}}function c0(s,t,e){if(typeof(e=De(e))=="string"){if(e==="")throw new J(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fp(t)&&e.indexOf("/")!==-1)throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Nt.fromString(e));if(!it.isDocumentKey(r))throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return la(s,new it(r))}if(e instanceof he)return la(s,e._key);throw new J(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(e)}.`)}function h0(s,t){if(!Array.isArray(s)||s.length===0)throw new J(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yS(s,t){const e=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new J(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class o_{convertValue(t,e="none"){switch(Jr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ir(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ot()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return ls(t,(o,u)=>{r[o]=this.convertValue(u,e)}),r}convertVectorValue(t){var e,r,o;const u=(o=(r=(e=t.fields)===null||e===void 0?void 0:e[Bo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>ae(h.doubleValue));return new Xp(u)}convertGeoPoint(t){return new zf(ae(t.latitude),ae(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Df(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ku(t));default:return null}}convertTimestamp(t){const e=nr(t);return new ue(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Nt.fromString(t);ct(rb(r));const o=new Wr(r.get(1),r.get(3)),u=new it(r.popFirst(5));return o.isEqual(e)||Te(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class q2 extends o_{constructor(t){super(),this.firestore=t}convertBytes(t){return new wi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new he(this.firestore,null,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let rr=class extends Ku{constructor(t,e,r,o,u,h){super(t,e,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(jf("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}},xu=class extends rr{data(t={}){return super.data(t)}},ss=class{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new ra(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new xu(this._firestore,this._userDataWriter,r.key,r,new ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new J(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new xu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ra(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new xu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ra(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:F2(m.type),doc:g,oldIndex:_,newIndex:T}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function F2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function vS(s,t){return s instanceof rr&&t instanceof rr?s._firestore===t._firestore&&s._key.isEqual(t._key)&&(s._document===null?t._document===null:s._document.isEqual(t._document))&&s._converter===t._converter:s instanceof ss&&t instanceof ss&&s._firestore===t._firestore&&aS(s.query,t.query)&&s.metadata.isEqual(t.metadata)&&s._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(s){s=zt(s,he);const t=zt(s.firestore,Ae);return Xb(sn(t),s._key).then(e=>l_(t,s,e))}class Ea extends o_{constructor(t){super(),this.firestore=t}convertBytes(t){return new wi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new he(this.firestore,null,e)}}function G2(s){s=zt(s,he);const t=zt(s.firestore,Ae),e=sn(t),r=new Ea(t);return h2(e,s._key).then(o=>new rr(t,r,s._key,o,new ra(o!==null&&o.hasLocalMutations,!0),s.converter))}function H2(s){s=zt(s,he);const t=zt(s.firestore,Ae);return Xb(sn(t),s._key,{source:"server"}).then(e=>l_(t,s,e))}function Q2(s){s=zt(s,dn);const t=zt(s.firestore,Ae),e=sn(t),r=new Ea(t);return pS(s._query),$b(e,s._query).then(o=>new ss(t,r,s,o))}function K2(s){s=zt(s,dn);const t=zt(s.firestore,Ae),e=sn(t),r=new Ea(t);return f2(e,s._query).then(o=>new ss(t,r,s,o))}function Y2(s){s=zt(s,dn);const t=zt(s.firestore,Ae),e=sn(t),r=new Ea(t);return $b(e,s._query,{source:"server"}).then(o=>new ss(t,r,s,o))}function f0(s,t,e){s=zt(s,he);const r=zt(s.firestore,Ae),o=Yf(s.converter,t,e);return cc(r,[Ff(va(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,le.none())])}function d0(s,t,e,...r){s=zt(s,he);const o=zt(s.firestore,Ae),u=va(o);let h;return h=typeof(t=De(t))=="string"||t instanceof rs?e_(u,"updateDoc",s._key,t,e,r):t_(u,"updateDoc",s._key,t),cc(o,[h.toMutation(s._key,le.exists(!0))])}function X2(s){return cc(zt(s.firestore,Ae),[new tl(s._key,le.none())])}function $2(s,t){const e=zt(s.firestore,Ae),r=Tf(s),o=Yf(s.converter,t);return cc(e,[Ff(va(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,le.exists(!1))]).then(()=>r)}function TS(s,...t){var e,r,o;s=De(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||Gg(t[h])||(u=t[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Gg(t[h])){const A=t[h];t[h]=(e=A.next)===null||e===void 0?void 0:e.bind(A),t[h+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),t[h+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,_,T;if(s instanceof he)_=zt(s.firestore,Ae),T=Wo(s._key.path),g={next:A=>{t[h]&&t[h](l_(_,s,A))},error:t[h+1],complete:t[h+2]};else{const A=zt(s,dn);_=zt(A.firestore,Ae),T=A._query;const w=new Ea(_);g={next:U=>{t[h]&&t[h](new ss(_,w,A,U))},error:t[h+1],complete:t[h+2]},pS(s._query)}return function(w,U,K,Z){const $=new Lf(Z),gt=new kp(U,$,K);return w.asyncQueue.enqueueAndForget(async()=>Up(await Xo(w),gt)),()=>{$.su(),w.asyncQueue.enqueueAndForget(async()=>Lp(await Xo(w),gt))}}(sn(_),T,m,g)}function Z2(s,t){return d2(sn(s=zt(s,Ae)),Gg(t)?t:{next:t})}function cc(s,t){return function(r,o){const u=new Ze;return r.asyncQueue.enqueueAndForget(async()=>zV(await Kp(r),o,u)),u.promise}(sn(s),t)}function l_(s,t,e){const r=e.docs.get(t._key),o=new Ea(s);return new rr(s,o,t._key,r,new ra(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J2=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=va(t)}set(t,e,r){this._verifyNotCommitted();const o=Gr(t,this._firestore),u=Yf(o.converter,e,r),h=Ff(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,le.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=Gr(t,this._firestore);let h;return h=typeof(e=De(e))=="string"||e instanceof rs?e_(this._dataReader,"WriteBatch.update",u._key,e,r,o):t_(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(h.toMutation(u._key,le.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Gr(t,this._firestore);return this._mutations=this._mutations.concat(new tl(e._key,le.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Gr(s,t){if((s=De(s)).firestore!==t)throw new J(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=va(t)}get(t){const e=Gr(t,this._firestore),r=new q2(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||o.length!==1)return ot();const u=o[0];if(u.isFoundDocument())return new Ku(this._firestore,r,u.key,u,e.converter);if(u.isNoDocument())return new Ku(this._firestore,r,e._key,null,e.converter);throw ot()})}set(t,e,r){const o=Gr(t,this._firestore),u=Yf(o.converter,e,r),h=Ff(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(t,e,r,...o){const u=Gr(t,this._firestore);let h;return h=typeof(e=De(e))=="string"||e instanceof rs?e_(this._dataReader,"Transaction.update",u._key,e,r,o):t_(this._dataReader,"Transaction.update",u._key,e),this._transaction.update(u._key,h),this}delete(t){const e=Gr(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eC=class extends tC{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Gr(t,this._firestore),r=new Ea(this._firestore);return super.get(t).then(o=>new rr(this._firestore,r,e._key,o._document,new ra(!1,!1),e.converter))}};function nC(s,t,e){s=zt(s,Ae);const r=Object.assign(Object.assign({},W2),e);return function(u){if(u.maxAttempts<1)throw new J(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,h,m){const g=new Ze;return u.asyncQueue.enqueueAndForget(async()=>{const _=await l2(u);new a2(u.asyncQueue,_,m,h,g).Iu()}),g.promise}(sn(s),o=>t(new eC(s,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return new lc("deleteField")}function rC(){return new $p("serverTimestamp")}function sC(...s){return new Zp("arrayUnion",s)}function aC(...s){return new Wp("arrayRemove",s)}function oC(s){return new Jp("increment",s)}(function(t,e=!0){(function(o){Zo=o})(Wg),xo(new oa("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new Ae(new e1(r.getProvider("auth-internal")),new r1(h,r.getProvider("app-check-internal")),function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new J(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wr(_.options.projectId,T)}(h,o),h);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),tr(GT,HT,t),tr(GT,HT,"esm2017")})();const lC="@firebase/firestore-compat",uC="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function g0(){if(!B1())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Yu{constructor(t){this._delegate=t}static fromBase64String(t){return g0(),new Yu(wi.fromBase64String(t))}static fromUint8Array(t){return m0(),new Yu(wi.fromUint8Array(t))}toBase64(){return g0(),this._delegate.toBase64()}toUint8Array(){return m0(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(s){return cC(s,["next","error","complete"])}function cC(s,t){if(typeof s!="object"||s===null)return!1;const e=s;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{enableIndexedDbPersistence(t,e){return T2(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return E2(t._delegate)}clearIndexedDbPersistence(t){return A2(t._delegate)}}class ES{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof Wr||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,r={}){p2(this._delegate,t,e,r)}enableNetwork(){return S2(this._delegate)}disableNetwork(){return w2(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,Wb("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return b2(this._delegate)}onSnapshotsInSync(t){return Z2(this._delegate,t)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new $o(this,rS(this._delegate,t))}catch(e){throw hn(e,"collection()","Firestore.collection()")}}doc(t){try{return new Gn(this,Tf(this._delegate,t))}catch(e){throw hn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new cn(this,_2(this._delegate,t))}catch(e){throw hn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return nC(this._delegate,e=>t(new AS(this,e)))}batch(){return sn(this._delegate),new bS(new J2(this._delegate,t=>cc(this._delegate,t)))}loadBundle(t){return I2(this._delegate,t)}namedQuery(t){return R2(this._delegate,t).then(e=>e?new cn(this,e):null)}}class Xf extends o_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yu(new wi(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Gn.forKey(e,this.firestore,null)}}function fC(s){ZR(s)}class AS{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Xf(t)}get(t){const e=sa(t);return this._delegate.get(e).then(r=>new Xu(this._firestore,new rr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const o=sa(t);return r?(u_("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=sa(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=sa(t);return this._delegate.delete(e),this}}class bS{constructor(t){this._delegate=t}set(t,e,r){const o=sa(t);return r?(u_("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=sa(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=sa(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class pa{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new xu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new $u(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=pa.INSTANCES;let o=r.get(t);o||(o=new WeakMap,r.set(t,o));let u=o.get(e);return u||(u=new pa(t,new Xf(t),e),o.set(e,u)),u}}pa.INSTANCES=new WeakMap;class Gn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Xf(t)}static forPath(t,e,r){if(t.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Gn(e,new he(e._delegate,r,new it(t)))}static forKey(t,e,r){return new Gn(e,new he(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new $o(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new $o(this.firestore,rS(this._delegate,t))}catch(e){throw hn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=De(t),t instanceof he?sS(this._delegate,t):!1}set(t,e){e=u_("DocumentReference.set",e);try{return e?f0(this._delegate,t,e):f0(this._delegate,t)}catch(r){throw hn(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return arguments.length===1?d0(this._delegate,t):d0(this._delegate,t,e,...r)}catch(o){throw hn(o,"updateDoc()","DocumentReference.update()")}}delete(){return X2(this._delegate)}onSnapshot(...t){const e=SS(t),r=wS(t,o=>new Xu(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return TS(this._delegate,e,r)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=G2(this._delegate):(t==null?void 0:t.source)==="server"?e=H2(this._delegate):e=j2(this._delegate),e.then(r=>new Xu(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Gn(this.firestore,t?this._delegate.withConverter(pa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function hn(s,t,e){return s.message=s.message.replace(t,e),s}function SS(s){for(const t of s)if(typeof t=="object"&&!Qg(t))return t;return{}}function wS(s,t){var e,r;let o;return Qg(s[0])?o=s[0]:Qg(s[1])?o=s[1]:typeof s[0]=="function"?o={next:s[0],error:s[1],complete:s[2]}:o={next:s[1],error:s[2],complete:s[3]},{next:u=>{o.next&&o.next(t(u))},error:(e=o.error)===null||e===void 0?void 0:e.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}class Xu{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return vS(this._delegate,t._delegate)}}class $u extends Xu{data(t){const e=this._delegate.data(t);return this._delegate._converter||WR(e!==void 0),e}}class cn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Xf(t)}where(t,e,r){try{return new cn(this.firestore,qr(this._delegate,O2(t,e,r)))}catch(o){throw hn(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new cn(this.firestore,qr(this._delegate,M2(t,e)))}catch(r){throw hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new cn(this.firestore,qr(this._delegate,P2(t)))}catch(e){throw hn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new cn(this.firestore,qr(this._delegate,U2(t)))}catch(e){throw hn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new cn(this.firestore,qr(this._delegate,L2(...t)))}catch(e){throw hn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new cn(this.firestore,qr(this._delegate,B2(...t)))}catch(e){throw hn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new cn(this.firestore,qr(this._delegate,k2(...t)))}catch(e){throw hn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new cn(this.firestore,qr(this._delegate,z2(...t)))}catch(e){throw hn(e,"endAt()","Query.endAt()")}}isEqual(t){return aS(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=K2(this._delegate):(t==null?void 0:t.source)==="server"?e=Y2(this._delegate):e=Q2(this._delegate),e.then(r=>new Kg(this.firestore,new ss(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=SS(t),r=wS(t,o=>new Kg(this.firestore,new ss(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return TS(this._delegate,e,r)}withConverter(t){return new cn(this.firestore,t?this._delegate.withConverter(pa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class dC{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new $u(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kg{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new cn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new $u(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new dC(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new $u(this._firestore,r))})}isEqual(t){return vS(this._delegate,t._delegate)}}class $o extends cn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Gn(this.firestore,t):null}doc(t){try{return t===void 0?new Gn(this.firestore,Tf(this._delegate)):new Gn(this.firestore,Tf(this._delegate,t))}catch(e){throw hn(e,"doc()","CollectionReference.doc()")}}add(t){return $2(this._delegate,t).then(e=>new Gn(this.firestore,e))}isEqual(t){return sS(this._delegate,t._delegate)}withConverter(t){return new $o(this.firestore,t?this._delegate.withConverter(pa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function sa(s){return zt(s,he)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(...t){this._delegate=new rs(...t)}static documentId(){return new c_(oe.keyField().canonicalString())}isEqual(t){return t=De(t),t instanceof rs?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{static serverTimestamp(){const t=rC();return t._methodName="FieldValue.serverTimestamp",new na(t)}static delete(){const t=iC();return t._methodName="FieldValue.delete",new na(t)}static arrayUnion(...t){const e=sC(...t);return e._methodName="FieldValue.arrayUnion",new na(e)}static arrayRemove(...t){const e=aC(...t);return e._methodName="FieldValue.arrayRemove",new na(e)}static increment(t){const e=oC(t);return e._methodName="FieldValue.increment",new na(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={Firestore:ES,GeoPoint:zf,Timestamp:ue,Blob:Yu,Transaction:AS,WriteBatch:bS,DocumentReference:Gn,DocumentSnapshot:Xu,Query:cn,QueryDocumentSnapshot:$u,QuerySnapshot:Kg,CollectionReference:$o,FieldPath:c_,FieldValue:na,setLogLevel:fC,CACHE_SIZE_UNLIMITED:v2};function gC(s,t){s.INTERNAL.registerComponent(new oa("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return t(r,o)},"PUBLIC").setServiceProps(Object.assign({},mC)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(s){gC(s,(t,e)=>new ES(t,e,new hC)),s.registerVersion(lC,uC)}pC(Su);const _C={apiKey:"AIzaSyCpIwj7jRTrf0_RTwhnLatxt8jKugPQi0Q",authDomain:"clicker-d8506.firebaseapp.com",projectId:"clicker-d8506",storageBucket:"clicker-d8506.firebasestorage.app",messagingSenderId:"238835517916",appId:"1:238835517916:web:8fa1728611f32719"};let p0;function yC(){const[s,t]=Wi.useState(!1);return Wi.useEffect(()=>{Su.apps.length||(Su.initializeApp(_C),p0=Su.firestore()),t(!0)},[]),{db:p0,initialized:s}}function vC(){eruda.init();const s=uI(),{db:t,initialized:e}=yC();Wi.useEffect(()=>{t&&s&&console.log("Firebase initialized with userId:",s)},[t,s]);const[r,o]=Wi.useState(0),[u,h]=Wi.useState(!0);Wi.useEffect(()=>{if(!e||!t||!s)return;const g=t.collection("users").doc(String(s));g.get().then(_=>{_.exists?o(_.data().count||0):(g.set({count:0}),o(0))}).catch(_=>console.error("Error fetching count:",_)).finally(()=>h(!1))},[e,t,s]);const m=async()=>{const g=r+1;if(o(g),e&&t&&s)try{await t.collection("users").doc(String(s)).set({count:g}),console.log("Saved to Firestore:",g)}catch(_){console.error("Error saving count:",_)}};return u?Wn.jsx("div",{className:"wrapper",children:Wn.jsx("p",{children:"Завантаження…"})}):Wn.jsx("div",{className:"wrapper",children:Wn.jsxs("div",{className:"clicker-container",children:[s&&Wn.jsxs("p",{className:"clicker-text",children:["Ваш Telegram ID: ",Wn.jsx("strong",{children:s})]}),Wn.jsx("p",{className:"clicker-text",children:Wn.jsx("strong",{children:r})}),Wn.jsx("img",{src:lI,alt:"Click",className:"clicker-img",onClick:m,onContextMenu:g=>g.preventDefault(),onTouchStart:g=>g.preventDefault()})]})})}oI.createRoot(document.getElementById("root")).render(Wn.jsx(Jw.StrictMode,{children:Wn.jsx(vC,{})}));
