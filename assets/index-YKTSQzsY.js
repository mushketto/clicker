(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function aA(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tg={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function tI(){if(rT)return Cu;rT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Cu.Fragment=e,Cu.jsx=t,Cu.jsxs=t,Cu}var iT;function nI(){return iT||(iT=1,Tg.exports=tI()),Tg.exports}var X=nI(),Ag={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function rI(){if(sT)return Ve;sT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function k(O,ne,fe){this.props=O,this.context=ne,this.refs=U,this.updater=fe||b}k.prototype.isReactComponent={},k.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},k.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=k.prototype;function re(O,ne,fe){this.props=O,this.context=ne,this.refs=U,this.updater=fe||b}var Z=re.prototype=new H;Z.constructor=re,V(Z,k.prototype),Z.isPureReactComponent=!0;var pe=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function C(O,ne,fe,ae,we,de){return fe=de.ref,{$$typeof:s,type:O,key:ne,ref:fe!==void 0?fe:null,props:de}}function R(O,ne){return C(O.type,ne,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function N(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return ne[fe]})}var M=/\/+/g;function L(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):ne.toString(36)}function x(){}function Re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(x,x):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Ce(O,ne,fe,ae,we){var de=typeof O;(de==="undefined"||de==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(de){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case s:case e:ce=!0;break;case _:return ce=O._init,Ce(ce(O._payload),ne,fe,ae,we)}}if(ce)return we=we(O),ce=ae===""?"."+L(O,0):ae,pe(we)?(fe="",ce!=null&&(fe=ce.replace(M,"$&/")+"/"),Ce(we,ne,fe,"",function(xt){return xt})):we!=null&&(I(we)&&(we=R(we,fe+(we.key==null||O&&O.key===we.key?"":(""+we.key).replace(M,"$&/")+"/")+ce)),ne.push(we)),1;ce=0;var Pe=ae===""?".":ae+":";if(pe(O))for(var Oe=0;Oe<O.length;Oe++)ae=O[Oe],de=Pe+L(ae,Oe),ce+=Ce(ae,ne,fe,de,we);else if(Oe=w(O),typeof Oe=="function")for(O=Oe.call(O),Oe=0;!(ae=O.next()).done;)ae=ae.value,de=Pe+L(ae,Oe++),ce+=Ce(ae,ne,fe,de,we);else if(de==="object"){if(typeof O.then=="function")return Ce(Re(O),ne,fe,ae,we);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ce}function W(O,ne,fe){if(O==null)return O;var ae=[],we=0;return Ce(O,ae,"","",function(de){return ne.call(fe,de,we++)}),ae}function ue(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var Ee=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function He(){}return Ve.Children={map:W,forEach:function(O,ne,fe){W(O,function(){ne.apply(this,arguments)},fe)},count:function(O){var ne=0;return W(O,function(){ne++}),ne},toArray:function(O){return W(O,function(ne){return ne})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=k,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=re,Ve.StrictMode=r,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return le.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cloneElement=function(O,ne,fe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=V({},O.props),we=O.key,de=void 0;if(ne!=null)for(ce in ne.ref!==void 0&&(de=void 0),ne.key!==void 0&&(we=""+ne.key),ne)!ge.call(ne,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ne.ref===void 0||(ae[ce]=ne[ce]);var ce=arguments.length-2;if(ce===1)ae.children=fe;else if(1<ce){for(var Pe=Array(ce),Oe=0;Oe<ce;Oe++)Pe[Oe]=arguments[Oe+2];ae.children=Pe}return C(O.type,we,void 0,void 0,de,ae)},Ve.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ve.createElement=function(O,ne,fe){var ae,we={},de=null;if(ne!=null)for(ae in ne.key!==void 0&&(de=""+ne.key),ne)ge.call(ne,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(we[ae]=ne[ae]);var ce=arguments.length-2;if(ce===1)we.children=fe;else if(1<ce){for(var Pe=Array(ce),Oe=0;Oe<ce;Oe++)Pe[Oe]=arguments[Oe+2];we.children=Pe}if(O&&O.defaultProps)for(ae in ce=O.defaultProps,ce)we[ae]===void 0&&(we[ae]=ce[ae]);return C(O,de,void 0,void 0,null,we)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:d,render:O}},Ve.isValidElement=I,Ve.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ue}},Ve.memo=function(O,ne){return{$$typeof:p,type:O,compare:ne===void 0?null:ne}},Ve.startTransition=function(O){var ne=le.T,fe={};le.T=fe;try{var ae=O(),we=le.S;we!==null&&we(fe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(He,Ee)}catch(de){Ee(de)}finally{le.T=ne}},Ve.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ve.use=function(O){return le.H.use(O)},Ve.useActionState=function(O,ne,fe){return le.H.useActionState(O,ne,fe)},Ve.useCallback=function(O,ne){return le.H.useCallback(O,ne)},Ve.useContext=function(O){return le.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,ne){return le.H.useDeferredValue(O,ne)},Ve.useEffect=function(O,ne,fe){var ae=le.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(O,ne)},Ve.useId=function(){return le.H.useId()},Ve.useImperativeHandle=function(O,ne,fe){return le.H.useImperativeHandle(O,ne,fe)},Ve.useInsertionEffect=function(O,ne){return le.H.useInsertionEffect(O,ne)},Ve.useLayoutEffect=function(O,ne){return le.H.useLayoutEffect(O,ne)},Ve.useMemo=function(O,ne){return le.H.useMemo(O,ne)},Ve.useOptimistic=function(O,ne){return le.H.useOptimistic(O,ne)},Ve.useReducer=function(O,ne,fe){return le.H.useReducer(O,ne,fe)},Ve.useRef=function(O){return le.H.useRef(O)},Ve.useState=function(O){return le.H.useState(O)},Ve.useSyncExternalStore=function(O,ne,fe){return le.H.useSyncExternalStore(O,ne,fe)},Ve.useTransition=function(){return le.H.useTransition()},Ve.version="19.1.0",Ve}var aT;function bp(){return aT||(aT=1,Ag.exports=rI()),Ag.exports}var G=bp();const iI=aA(G);var wg={exports:{}},Vu={},Sg={exports:{}},bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function sI(){return oT||(oT=1,function(s){function e(W,ue){var Ee=W.length;W.push(ue);e:for(;0<Ee;){var He=Ee-1>>>1,O=W[He];if(0<a(O,ue))W[He]=ue,W[Ee]=O,Ee=He;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ue=W[0],Ee=W.pop();if(Ee!==ue){W[0]=Ee;e:for(var He=0,O=W.length,ne=O>>>1;He<ne;){var fe=2*(He+1)-1,ae=W[fe],we=fe+1,de=W[we];if(0>a(ae,Ee))we<O&&0>a(de,ae)?(W[He]=de,W[we]=Ee,He=we):(W[He]=ae,W[fe]=Ee,He=fe);else if(we<O&&0>a(de,Ee))W[He]=de,W[we]=Ee,He=we;else break e}}return ue}function a(W,ue){var Ee=W.sortIndex-ue.sortIndex;return Ee!==0?Ee:W.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();s.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,w=3,b=!1,V=!1,U=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function pe(W){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=W)r(p),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(p)}}function le(W){if(U=!1,pe(W),!V)if(t(m)!==null)V=!0,ge||(ge=!0,L());else{var ue=t(p);ue!==null&&Ce(le,ue.startTime-W)}}var ge=!1,C=-1,R=5,I=-1;function N(){return k?!0:!(s.unstable_now()-I<R)}function M(){if(k=!1,ge){var W=s.unstable_now();I=W;var ue=!0;try{e:{V=!1,U&&(U=!1,re(C),C=-1),b=!0;var Ee=w;try{t:{for(pe(W),T=t(m);T!==null&&!(T.expirationTime>W&&N());){var He=T.callback;if(typeof He=="function"){T.callback=null,w=T.priorityLevel;var O=He(T.expirationTime<=W);if(W=s.unstable_now(),typeof O=="function"){T.callback=O,pe(W),ue=!0;break t}T===t(m)&&r(m),pe(W)}else r(m);T=t(m)}if(T!==null)ue=!0;else{var ne=t(p);ne!==null&&Ce(le,ne.startTime-W),ue=!1}}break e}finally{T=null,w=Ee,b=!1}ue=void 0}}finally{ue?L():ge=!1}}}var L;if(typeof Z=="function")L=function(){Z(M)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Re=x.port2;x.port1.onmessage=M,L=function(){Re.postMessage(null)}}else L=function(){H(M,0)};function Ce(W,ue){C=H(function(){W(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(W){switch(w){case 1:case 2:case 3:var ue=3;break;default:ue=w}var Ee=w;w=ue;try{return W()}finally{w=Ee}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=w;w=W;try{return ue()}finally{w=Ee}},s.unstable_scheduleCallback=function(W,ue,Ee){var He=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?He+Ee:He):Ee=He,W){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Ee+O,W={id:_++,callback:ue,priorityLevel:W,startTime:Ee,expirationTime:O,sortIndex:-1},Ee>He?(W.sortIndex=Ee,e(p,W),t(m)===null&&W===t(p)&&(U?(re(C),C=-1):U=!0,Ce(le,Ee-He))):(W.sortIndex=O,e(m,W),V||b||(V=!0,ge||(ge=!0,L()))),W},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(W){var ue=w;return function(){var Ee=w;w=ue;try{return W.apply(this,arguments)}finally{w=Ee}}}}(bg)),bg}var lT;function aI(){return lT||(lT=1,Sg.exports=sI()),Sg.exports}var Rg={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function oI(){if(uT)return on;uT=1;var s=bp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},on.flushSync=function(m){var p=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=_,r.d.f()}},on.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},on.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},on.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:b}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},on.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},on.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},on.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},on.requestFormReset=function(m){r.d.r(m)},on.unstable_batchedUpdates=function(m,p){return m(p)},on.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.1.0",on}var cT;function lI(){if(cT)return Rg.exports;cT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rg.exports=oI(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT;function uI(){if(hT)return Vu;hT=1;var s=aI(),e=bp(),t=lI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=g;break}if(A===u){E=!0,u=f,o=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===o){E=!0,o=g,u=f;break}if(A===u){E=!0,u=g,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function Re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case k:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case ge:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case Z:return(n.displayName||"Context")+".Provider";case re:return(n._context.displayName||"Context")+".Consumer";case pe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:Re(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return Re(n(i))}catch{}}return null}var Ce=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},He=[],O=-1;function ne(n){return{current:n}}function fe(n){0>O||(n.current=He[O],He[O]=null,O--)}function ae(n,i){O++,He[O]=n.current,n.current=i}var we=ne(null),de=ne(null),ce=ne(null),Pe=ne(null);function Oe(n,i){switch(ae(ce,i),ae(de,n),ae(we,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?VE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=VE(i),n=NE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}fe(we),ae(we,n)}function xt(){fe(we),fe(de),fe(ce)}function Sn(n){n.memoizedState!==null&&ae(Pe,n);var i=we.current,o=NE(i,n.type);i!==o&&(ae(de,n),ae(we,o))}function rn(n){de.current===n&&(fe(we),fe(de)),Pe.current===n&&(fe(Pe),bu._currentValue=Ee)}var rr=Object.prototype.hasOwnProperty,ir=s.unstable_scheduleCallback,qr=s.unstable_cancelCallback,Ri=s.unstable_shouldYield,xs=s.unstable_requestPaint,fn=s.unstable_now,Cs=s.unstable_getCurrentPriorityLevel,fr=s.unstable_ImmediatePriority,dr=s.unstable_UserBlockingPriority,bn=s.unstable_NormalPriority,Sl=s.unstable_LowPriority,dn=s.unstable_IdlePriority,vt=s.log,Vs=s.unstable_setDisableYieldValue,ut=null,$e=null;function mn(n){if(typeof vt=="function"&&Vs(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ut,n)}catch{}}var sn=Math.clz32?Math.clz32:Ns,Mc=Math.log,wd=Math.LN2;function Ns(n){return n>>>=0,n===0?32:31-(Mc(n)/wd|0)|0}var Os=256,Ms=4194304;function sr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function za(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~g,u!==0?f=sr(u):(E&=A,E!==0?f=sr(E):o||(o=A&~n,o!==0&&(f=sr(o))))):(A=u&~g,A!==0?f=sr(A):E!==0?f=sr(E):o||(o=u&~n,o!==0&&(f=sr(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Ps(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function bl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rl(){var n=Os;return Os<<=1,(Os&4194048)===0&&(Os=256),n}function Il(){var n=Ms;return Ms<<=1,(Ms&62914560)===0&&(Ms=4194304),n}function jr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Fr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Dl(n,i,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(o=E&~o;0<o;){var J=31-sn(o),te=1<<J;A[J]=0,D[J]=-1;var Q=F[J];if(Q!==null)for(F[J]=null,J=0;J<Q.length;J++){var K=Q[J];K!==null&&(K.lane&=-536870913)}o&=~te}u!==0&&mr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~i))}function mr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-sn(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function xl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-sn(o),f=1<<u;f&i|n[u]&i&&(n[u]|=i),o&=~f}}function Ii(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function qa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Di(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:ZE(n.type))}function Pc(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var ct=Math.random().toString(36).slice(2),Lt="__reactFiber$"+ct,Ct="__reactProps$"+ct,Fn="__reactContainer$"+ct,Cl="__reactEvents$"+ct,Sd="__reactListeners$"+ct,xi="__reactHandles$"+ct,Lc="__reactResources$"+ct,Ls="__reactMarker$"+ct;function Ci(n){delete n[Lt],delete n[Ct],delete n[Cl],delete n[Sd],delete n[xi]}function Gr(n){var i=n[Lt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Fn]||o[Lt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=LE(n);n!==null;){if(o=n[Lt])return o;n=LE(n)}return i}n=o,o=n.parentNode}return null}function gr(n){if(n=n[Lt]||n[Fn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function pr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function gn(n){var i=n[Lc];return i||(i=n[Lc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wt(n){n[Ls]=!0}var Vl=new Set,ja={};function ar(n,i){Hr(n,i),Hr(n+"Capture",i)}function Hr(n,i){for(ja[n]=i,n=0;n<i.length;n++)Vl.add(i[n])}var kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uc={},ks={};function Bc(n){return rr.call(ks,n)?!0:rr.call(Uc,n)?!1:kc.test(n)?ks[n]=!0:(Uc[n]=!0,!1)}function Vi(n,i,o){if(Bc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function yr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Yt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}var Us,zc;function Qr(n){if(Us===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Us=i&&i[1]||"",zc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+n+zc}var Fa=!1;function Ga(n,i){if(!n||Fa)return"";Fa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var Q=K}Reflect.construct(n,[],te)}else{try{te.call()}catch(K){Q=K}n.call(te.prototype)}}else{try{throw Error()}catch(K){Q=K}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var D=E.split(`
`),F=A.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===F.length)for(u=D.length-1,f=F.length-1;1<=u&&0<=f&&D[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==F[f]){var J=`
`+D[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{Fa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Qr(o):""}function Nl(n){switch(n.tag){case 26:case 27:case 5:return Qr(n.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return Ga(n.type,!1);case 11:return Ga(n.type.render,!1);case 1:return Ga(n.type,!0);case 31:return Qr("Activity");default:return""}}function Ha(n){try{var i="";do i+=Nl(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ol(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function bd(n){var i=Ol(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qa(n){n._valueTracker||(n._valueTracker=bd(n))}function Ml(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Ol(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Bs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rd=/[\n"\\]/g;function Vt(n){return n.replace(Rd,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nn(n,i,o,u,f,g,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+pn(i)):n.value!==""+pn(i)&&(n.value=""+pn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Ni(n,E,pn(i)):o!=null?Ni(n,E,pn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+pn(A):n.removeAttribute("name")}function zs(n,i,o,u,f,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+pn(o):"",i=i!=null?""+pn(i):o,A||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ni(n,i,o){i==="number"&&Bs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Kr(n,i,o,u){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+pn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function tt(n,i,o){if(i!=null&&(i=""+pn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+pn(o):""}function qs(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(Ce(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=pn(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Gn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qc(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||js.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Pl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&qc(n,f,u)}else for(var g in i)i.hasOwnProperty(g)&&qc(n,g,i[g])}function Ll(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ka(n){return Dd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var $r=null;function Hn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yr=null,Xr=null;function kl(n){var i=gr(n);if(i&&(n=i.stateNode)){var o=n[Ct]||null;e:switch(n=i.stateNode,i.type){case"input":if(Nn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Vt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var f=u[Ct]||null;if(!f)throw Error(r(90));Nn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ml(u)}break e;case"textarea":tt(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Kr(n,!!o.multiple,i,!1)}}}var _r=!1;function jc(n,i,o){if(_r)return n(i,o);_r=!0;try{var u=n(i);return u}finally{if(_r=!1,(Yr!==null||Xr!==null)&&(Ph(),Yr&&(i=Yr,n=Xr,Xr=Yr=null,kl(i),n)))for(i=0;i<n.length;i++)kl(n[i])}}function Fs(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Ct]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qn=!1;if(or)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Qn=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Qn=!1}var vr=null,Oi=null,Zr=null;function Ul(){if(Zr)return Zr;var n,i=Oi,o=i.length,u,f="value"in vr?vr.value:vr.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return Zr=f.slice(n,1<u?1-u:void 0)}function Er(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Tr(){return!0}function Bl(){return!1}function jt(n){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Tr:Bl,this.isPropagationStopped=Bl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var Xe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=jt(Xe),Hs=_({},Xe,{view:0,detail:0}),Fc=jt(Hs),Ya,Xa,Ar,Qs=_({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ar&&(Ar&&n.type==="mousemove"?(Ya=n.screenX-Ar.screenX,Xa=n.screenY-Ar.screenY):Xa=Ya=0,Ar=n),Ya)},movementY:function(n){return"movementY"in n?n.movementY:Xa}}),Kn=jt(Qs),Gc=_({},Qs,{dataTransfer:0}),xd=jt(Gc),Ks=_({},Hs,{relatedTarget:0}),Za=jt(Ks),zl=_({},Xe,{animationName:0,elapsedTime:0,pseudoElement:0}),Wa=jt(zl),Hc=_({},Xe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ja=jt(Hc),Cd=_({},Xe,{data:0}),ql=jt(Cd),$s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Kc[n])?!!i[n]:!1}function Ys(){return jl}var $c=_({},Hs,{key:function(n){if(n.key){var i=$s[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Er(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(n){return n.type==="keypress"?Er(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Er(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),eo=jt($c),Yc=_({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=jt(Yc),Wr=_({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),Xc=jt(Wr),Zc=_({},Xe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wc=jt(Zc),Jc=_({},Qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),to=jt(Jc),yn=_({},Xe,{newState:0,oldState:0}),eh=jt(yn),th=[9,13,27,32],wr=or&&"CompositionEvent"in window,h=null;or&&"documentMode"in document&&(h=document.documentMode);var y=or&&"TextEvent"in window&&!h,v=or&&(!wr||h&&8<h&&11>=h),S=" ",z=!1;function Y(n,i){switch(n){case"keyup":return th.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qe=!1;function kt(n,i){switch(n){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(z=!0,S);case"textInput":return n=i.data,n===S&&z?null:n;default:return null}}function je(n,i){if(qe)return n==="compositionend"||!wr&&Y(n,i)?(n=Ul(),Zr=Oi=vr=null,qe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ft[n.type]:i==="textarea"}function Jr(n,i,o,u){Yr?Xr?Xr.push(u):Xr=[u]:Yr=u,i=qh(i,"onChange"),0<i.length&&(o=new $a("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var Xt=null,Sr=null;function Gl(n){RE(n,0)}function nh(n){var i=pr(n);if(Ml(i))return n}function Ky(n,i){if(n==="change")return i}var $y=!1;if(or){var Vd;if(or){var Nd="oninput"in document;if(!Nd){var Yy=document.createElement("div");Yy.setAttribute("oninput","return;"),Nd=typeof Yy.oninput=="function"}Vd=Nd}else Vd=!1;$y=Vd&&(!document.documentMode||9<document.documentMode)}function Xy(){Xt&&(Xt.detachEvent("onpropertychange",Zy),Sr=Xt=null)}function Zy(n){if(n.propertyName==="value"&&nh(Sr)){var i=[];Jr(i,Sr,n,Hn(n)),jc(Gl,i)}}function Vb(n,i,o){n==="focusin"?(Xy(),Xt=i,Sr=o,Xt.attachEvent("onpropertychange",Zy)):n==="focusout"&&Xy()}function Nb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nh(Sr)}function Ob(n,i){if(n==="click")return nh(i)}function Mb(n,i){if(n==="input"||n==="change")return nh(i)}function Pb(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var On=typeof Object.is=="function"?Object.is:Pb;function Hl(n,i){if(On(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!rr.call(i,f)||!On(n[f],i[f]))return!1}return!0}function Wy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jy(n,i){var o=Wy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wy(o)}}function e_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?e_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function t_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Bs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Bs(n.document)}return i}function Od(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Lb=or&&"documentMode"in document&&11>=document.documentMode,no=null,Md=null,Ql=null,Pd=!1;function n_(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pd||no==null||no!==Bs(u)||(u=no,"selectionStart"in u&&Od(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ql&&Hl(Ql,u)||(Ql=u,u=qh(Md,"onSelect"),0<u.length&&(i=new $a("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=no)))}function Xs(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var ro={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Ld={},r_={};or&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function Zs(n){if(Ld[n])return Ld[n];if(!ro[n])return n;var i=ro[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in r_)return Ld[n]=i[o];return n}var i_=Zs("animationend"),s_=Zs("animationiteration"),a_=Zs("animationstart"),kb=Zs("transitionrun"),Ub=Zs("transitionstart"),Bb=Zs("transitioncancel"),o_=Zs("transitionend"),l_=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function lr(n,i){l_.set(n,i),ar(i,[n])}var u_=new WeakMap;function $n(n,i){if(typeof n=="object"&&n!==null){var o=u_.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ha(i)},u_.set(n,i),i)}return{value:n,source:i,stack:Ha(i)}}var Yn=[],io=0,Ud=0;function rh(){for(var n=io,i=Ud=io=0;i<n;){var o=Yn[i];Yn[i++]=null;var u=Yn[i];Yn[i++]=null;var f=Yn[i];Yn[i++]=null;var g=Yn[i];if(Yn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&c_(o,f,g)}}function ih(n,i,o,u){Yn[io++]=n,Yn[io++]=i,Yn[io++]=o,Yn[io++]=u,Ud|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bd(n,i,o,u){return ih(n,i,o,u),sh(n)}function so(n,i){return ih(n,null,null,i),sh(n)}function c_(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-sn(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function sh(n){if(50<yu)throw yu=0,Hm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ao={};function zb(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,i,o,u){return new zb(n,i,o,u)}function zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ei(n,i){var o=n.alternate;return o===null?(o=Mn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function h_(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ah(n,i,o,u,f,g){var E=0;if(u=n,typeof n=="function")zd(n)&&(E=1);else if(typeof n=="string")E=jR(n,o,we.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Mn(31,o,i,f),n.elementType=I,n.lanes=g,n;case V:return Ws(o.children,f,g,i);case U:E=8,f|=24;break;case k:return n=Mn(12,o,i,f|2),n.elementType=k,n.lanes=g,n;case le:return n=Mn(13,o,i,f),n.elementType=le,n.lanes=g,n;case ge:return n=Mn(19,o,i,f),n.elementType=ge,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:case Z:E=10;break e;case re:E=9;break e;case pe:E=11;break e;case C:E=14;break e;case R:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=Mn(E,o,i,f),i.elementType=n,i.type=u,i.lanes=g,i}function Ws(n,i,o,u){return n=Mn(7,n,u,i),n.lanes=o,n}function qd(n,i,o){return n=Mn(6,n,null,i),n.lanes=o,n}function jd(n,i,o){return i=Mn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var oo=[],lo=0,oh=null,lh=0,Xn=[],Zn=0,Js=null,ti=1,ni="";function ea(n,i){oo[lo++]=lh,oo[lo++]=oh,oh=n,lh=i}function f_(n,i,o){Xn[Zn++]=ti,Xn[Zn++]=ni,Xn[Zn++]=Js,Js=n;var u=ti;n=ni;var f=32-sn(u)-1;u&=~(1<<f),o+=1;var g=32-sn(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,ti=1<<32-sn(i)+f|o<<f|u,ni=g+n}else ti=1<<g|o<<f|u,ni=n}function Fd(n){n.return!==null&&(ea(n,1),f_(n,1,0))}function Gd(n){for(;n===oh;)oh=oo[--lo],oo[lo]=null,lh=oo[--lo],oo[lo]=null;for(;n===Js;)Js=Xn[--Zn],Xn[Zn]=null,ni=Xn[--Zn],Xn[Zn]=null,ti=Xn[--Zn],Xn[Zn]=null}var _n=null,Et=null,Ye=!1,ta=null,br=!1,Hd=Error(r(519));function na(n){var i=Error(r(418,""));throw Yl($n(i,n)),Hd}function d_(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Lt]=n,i[Ct]=u,o){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(o=0;o<vu.length;o++)ke(vu[o],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),zs(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Qa(i);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),qs(i,u.value,u.defaultValue,u.children),Qa(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||CE(i.textContent,o)?(u.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),u.onScroll!=null&&ke("scroll",i),u.onScrollEnd!=null&&ke("scrollend",i),u.onClick!=null&&(i.onclick=jh),i=!0):i=!1,i||na(n)}function m_(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 13:br=!1;return;case 27:case 3:br=!0;return;default:_n=_n.return}}function Kl(n){if(n!==_n)return!1;if(!Ye)return m_(n),Ye=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||og(n.type,n.memoizedProps)),o=!o),o&&Et&&na(n),m_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){Et=cr(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}Et=null}}else i===27?(i=Et,Yi(n.type)?(n=hg,hg=null,Et=n):Et=i):Et=_n?cr(n.stateNode.nextSibling):null;return!0}function $l(){Et=_n=null,Ye=!1}function g_(){var n=ta;return n!==null&&(Dn===null?Dn=n:Dn.push.apply(Dn,n),ta=null),n}function Yl(n){ta===null?ta=[n]:ta.push(n)}var Qd=ne(null),ra=null,ri=null;function Mi(n,i,o){ae(Qd,i._currentValue),i._currentValue=o}function ii(n){n._currentValue=Qd.current,fe(Qd)}function Kd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function $d(n,i,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=f;for(var D=0;D<i.length;D++)if(A.context===i[D]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),Kd(g.return,o,n),u||(E=null);break e}g=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Kd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Xl(n,i,o,u){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;On(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Pe.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(bu):n=[bu])}f=f.return}n!==null&&$d(i,n,o,u),i.flags|=262144}function uh(n){for(n=n.firstContext;n!==null;){if(!On(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){ra=n,ri=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return p_(ra,n)}function ch(n,i){return ra===null&&ia(n),p_(n,i)}function p_(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ri===null){if(n===null)throw Error(r(308));ri=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ri=ri.next=i;return o}var qb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},jb=s.unstable_scheduleCallback,Fb=s.unstable_NormalPriority,Bt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new qb,data:new Map,refCount:0}}function Zl(n){n.refCount--,n.refCount===0&&jb(Fb,function(){n.controller.abort()})}var Wl=null,Xd=0,uo=0,co=null;function Gb(n,i){if(Wl===null){var o=Wl=[];Xd=0,uo=Wm(),co={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Xd++,i.then(y_,y_),i}function y_(){if(--Xd===0&&Wl!==null){co!==null&&(co.status="fulfilled");var n=Wl;Wl=null,uo=0,co=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Hb(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var __=W.S;W.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Gb(n,i),__!==null&&__(n,i)};var sa=ne(null);function Zd(){var n=sa.current;return n!==null?n:at.pooledCache}function hh(n,i){i===null?ae(sa,sa.current):ae(sa,i.pool)}function v_(){var n=Zd();return n===null?null:{parent:Bt._currentValue,pool:n}}var Jl=Error(r(460)),E_=Error(r(474)),fh=Error(r(542)),Wd={then:function(){}};function T_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function dh(){}function A_(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(dh,dh),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,S_(n),n;default:if(typeof i.status=="string")i.then(dh,dh);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,S_(n),n}throw eu=i,Jl}}var eu=null;function w_(){if(eu===null)throw Error(r(459));var n=eu;return eu=null,n}function S_(n){if(n===Jl||n===fh)throw Error(r(483))}var Pi=!1;function Jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ki(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=sh(n),c_(n,null,o),i}return ih(n,u,i,o),sh(n)}function tu(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,xl(n,o)}}function tm(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var nm=!1;function nu(){if(nm){var n=co;if(n!==null)throw n}}function ru(n,i,o,u){nm=!1;var f=n.updateQueue;Pi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,F=D.next;D.next=null,E===null?g=F:E.next=F,E=D;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==E&&(A===null?J.firstBaseUpdate=F:A.next=F,J.lastBaseUpdate=D))}if(g!==null){var te=f.baseState;E=0,J=F=D=null,A=g;do{var Q=A.lane&-536870913,K=Q!==A.lane;if(K?(Fe&Q)===Q:(u&Q)===Q){Q!==0&&Q===uo&&(nm=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var De=n,Se=A;Q=i;var it=o;switch(Se.tag){case 1:if(De=Se.payload,typeof De=="function"){te=De.call(it,te,Q);break e}te=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Se.payload,Q=typeof De=="function"?De.call(it,te,Q):De,Q==null)break e;te=_({},te,Q);break e;case 2:Pi=!0}}Q=A.callback,Q!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(F=J=K,D=te):J=J.next=K,E|=Q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;K=A,A=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(D=te),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),Hi|=E,n.lanes=E,n.memoizedState=te}}function b_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function R_(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)b_(o[n],i)}var ho=ne(null),mh=ne(0);function I_(n,i){n=hi,ae(mh,n),ae(ho,i),hi=n|i.baseLanes}function rm(){ae(mh,hi),ae(ho,ho.current)}function im(){hi=mh.current,fe(ho),fe(mh)}var Ui=0,Ne=null,nt=null,Nt=null,gh=!1,fo=!1,aa=!1,ph=0,iu=0,mo=null,Qb=0;function St(){throw Error(r(321))}function sm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!On(n[o],i[o]))return!1;return!0}function am(n,i,o,u,f,g){return Ui=g,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=n===null||n.memoizedState===null?cv:hv,aa=!1,g=o(u,f),aa=!1,fo&&(g=x_(i,o,u,f)),D_(n),g}function D_(n){W.H=Ah;var i=nt!==null&&nt.next!==null;if(Ui=0,Nt=nt=Ne=null,gh=!1,iu=0,mo=null,i)throw Error(r(300));n===null||Gt||(n=n.dependencies,n!==null&&uh(n)&&(Gt=!0))}function x_(n,i,o,u){Ne=n;var f=0;do{if(fo&&(mo=null),iu=0,fo=!1,25<=f)throw Error(r(301));if(f+=1,Nt=nt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=Jb,g=i(o,u)}while(fo);return g}function Kb(){var n=W.H,i=n.useState()[0];return i=typeof i.then=="function"?su(i):i,n=n.useState()[0],(nt!==null?nt.memoizedState:null)!==n&&(Ne.flags|=1024),i}function om(){var n=ph!==0;return ph=0,n}function lm(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function um(n){if(gh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}gh=!1}Ui=0,Nt=nt=Ne=null,fo=!1,iu=ph=0,mo=null}function Rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Ot(){if(nt===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var i=Nt===null?Ne.memoizedState:Nt.next;if(i!==null)Nt=i,nt=n;else{if(n===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(n){var i=iu;return iu+=1,mo===null&&(mo=[]),n=A_(mo,n,i),i=Ne,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?cv:hv),n}function yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return su(n);if(n.$$typeof===Z)return an(n)}throw Error(r(438,String(n)))}function hm(n){var i=null,o=Ne.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=cm(),Ne.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=N;return i.index++,o}function si(n,i){return typeof i=="function"?i(n):i}function _h(n){var i=Ot();return fm(i,nt,n)}function fm(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var A=E=null,D=null,F=i,J=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Fe&te)===te:(Ui&te)===te){var Q=F.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===uo&&(J=!0);else if((Ui&Q)===Q){F=F.next,Q===uo&&(J=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=te,E=g):D=D.next=te,Ne.lanes|=Q,Hi|=Q;te=F.action,aa&&o(g,te),g=F.hasEagerState?F.eagerState:o(g,te)}else Q={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(A=D=Q,E=g):D=D.next=Q,Ne.lanes|=te,Hi|=te;F=F.next}while(F!==null&&F!==i);if(D===null?E=g:D.next=A,!On(g,n.memoizedState)&&(Gt=!0,J&&(o=co,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=D,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function dm(n){var i=Ot(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);On(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function C_(n,i,o){var u=Ne,f=Ot(),g=Ye;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!On((nt||f).memoizedState,o);E&&(f.memoizedState=o,Gt=!0),f=f.queue;var A=O_.bind(null,u,f,n);if(au(2048,8,A,[n]),f.getSnapshot!==i||E||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,go(9,vh(),N_.bind(null,u,f,o,i),null),at===null)throw Error(r(349));g||(Ui&124)!==0||V_(u,i,o)}return o}function V_(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Ne.updateQueue,i===null?(i=cm(),Ne.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function N_(n,i,o,u){i.value=o,i.getSnapshot=u,M_(i)&&P_(n)}function O_(n,i,o){return o(function(){M_(i)&&P_(n)})}function M_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!On(n,o)}catch{return!0}}function P_(n){var i=so(n,2);i!==null&&Bn(i,n,2)}function mm(n){var i=Rn();if(typeof n=="function"){var o=n;if(n=o(),aa){mn(!0);try{o()}finally{mn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:n},i}function L_(n,i,o,u){return n.baseState=o,fm(n,nt,typeof u=="function"?u:si)}function $b(n,i,o,u,f){if(Th(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};W.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,k_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function k_(n,i){var o=i.action,u=i.payload,f=n.state;if(i.isTransition){var g=W.T,E={};W.T=E;try{var A=o(f,u),D=W.S;D!==null&&D(E,A),U_(n,i,A)}catch(F){gm(n,i,F)}finally{W.T=g}}else try{g=o(f,u),U_(n,i,g)}catch(F){gm(n,i,F)}}function U_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){B_(n,i,u)},function(u){return gm(n,i,u)}):B_(n,i,o)}function B_(n,i,o){i.status="fulfilled",i.value=o,z_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,k_(n,o)))}function gm(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,z_(i),i=i.next;while(i!==u)}n.action=null}function z_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function q_(n,i){return i}function j_(n,i){if(Ye){var o=at.formState;if(o!==null){e:{var u=Ne;if(Ye){if(Et){t:{for(var f=Et,g=br;f.nodeType!==8;){if(!g){f=null;break t}if(f=cr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Et=cr(f.nextSibling),u=f.data==="F!";break e}}na(u)}u=!1}u&&(i=o[0])}}return o=Rn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:i},o.queue=u,o=ov.bind(null,Ne,u),u.dispatch=o,u=mm(!1),g=Em.bind(null,Ne,!1,u.queue),u=Rn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,o=$b.bind(null,Ne,f,g,o),f.dispatch=o,u.memoizedState=n,[i,o,!1]}function F_(n){var i=Ot();return G_(i,nt,n)}function G_(n,i,o){if(i=fm(n,i,q_)[0],n=_h(si)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=su(i)}catch(E){throw E===Jl?fh:E}else u=i;i=Ot();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Ne.flags|=2048,go(9,vh(),Yb.bind(null,f,o),null)),[u,g,n]}function Yb(n,i){n.action=i}function H_(n){var i=Ot(),o=nt;if(o!==null)return G_(i,o,n);Ot(),i=i.memoizedState,o=Ot();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function go(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=cm(),Ne.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function vh(){return{destroy:void 0,resource:void 0}}function Q_(){return Ot().memoizedState}function Eh(n,i,o,u){var f=Rn();u=u===void 0?null:u,Ne.flags|=n,f.memoizedState=go(1|i,vh(),o,u)}function au(n,i,o,u){var f=Ot();u=u===void 0?null:u;var g=f.memoizedState.inst;nt!==null&&u!==null&&sm(u,nt.memoizedState.deps)?f.memoizedState=go(i,g,o,u):(Ne.flags|=n,f.memoizedState=go(1|i,g,o,u))}function K_(n,i){Eh(8390656,8,n,i)}function $_(n,i){au(2048,8,n,i)}function Y_(n,i){return au(4,2,n,i)}function X_(n,i){return au(4,4,n,i)}function Z_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function W_(n,i,o){o=o!=null?o.concat([n]):null,au(4,4,Z_.bind(null,i,n),o)}function pm(){}function J_(n,i){var o=Ot();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&sm(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function ev(n,i){var o=Ot();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&sm(i,u[1]))return u[0];if(u=n(),aa){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,i],u}function ym(n,i,o){return o===void 0||(Ui&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=rE(),Ne.lanes|=n,Hi|=n,o)}function tv(n,i,o,u){return On(o,i)?o:ho.current!==null?(n=ym(n,o,u),On(n,i)||(Gt=!0),n):(Ui&42)===0?(Gt=!0,n.memoizedState=o):(n=rE(),Ne.lanes|=n,Hi|=n,i)}function nv(n,i,o,u,f){var g=ue.p;ue.p=g!==0&&8>g?g:8;var E=W.T,A={};W.T=A,Em(n,!1,i,o);try{var D=f(),F=W.S;if(F!==null&&F(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=Hb(D,u);ou(n,i,J,Un(n))}else ou(n,i,u,Un(n))}catch(te){ou(n,i,{then:function(){},status:"rejected",reason:te},Un())}finally{ue.p=g,W.T=E}}function Xb(){}function _m(n,i,o,u){if(n.tag!==5)throw Error(r(476));var f=rv(n).queue;nv(n,f,i,Ee,o===null?Xb:function(){return iv(n),o(u)})}function rv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:Ee},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function iv(n){var i=rv(n).next.queue;ou(n,i,{},Un())}function vm(){return an(bu)}function sv(){return Ot().memoizedState}function av(){return Ot().memoizedState}function Zb(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Un();n=Li(o);var u=ki(i,n,o);u!==null&&(Bn(u,i,o),tu(u,i,o)),i={cache:Yd()},n.payload=i;return}i=i.return}}function Wb(n,i,o){var u=Un();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Th(n)?lv(i,o):(o=Bd(n,i,o,u),o!==null&&(Bn(o,n,u),uv(o,i,u)))}function ov(n,i,o){var u=Un();ou(n,i,o,u)}function ou(n,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Th(n))lv(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,o);if(f.hasEagerState=!0,f.eagerState=A,On(A,E))return ih(n,i,f,0),at===null&&rh(),!1}catch{}finally{}if(o=Bd(n,i,f,u),o!==null)return Bn(o,n,u),uv(o,i,u),!0}return!1}function Em(n,i,o,u){if(u={lane:2,revertLane:Wm(),action:u,hasEagerState:!1,eagerState:null,next:null},Th(n)){if(i)throw Error(r(479))}else i=Bd(n,o,u,2),i!==null&&Bn(i,n,2)}function Th(n){var i=n.alternate;return n===Ne||i!==null&&i===Ne}function lv(n,i){fo=gh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function uv(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,xl(n,o)}}var Ah={readContext:an,use:yh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},cv={readContext:an,use:yh,useCallback:function(n,i){return Rn().memoizedState=[n,i===void 0?null:i],n},useContext:an,useEffect:K_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Eh(4194308,4,Z_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Eh(4194308,4,n,i)},useInsertionEffect:function(n,i){Eh(4,2,n,i)},useMemo:function(n,i){var o=Rn();i=i===void 0?null:i;var u=n();if(aa){mn(!0);try{n()}finally{mn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=Rn();if(o!==void 0){var f=o(i);if(aa){mn(!0);try{o(i)}finally{mn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Wb.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var i=Rn();return n={current:n},i.memoizedState=n},useState:function(n){n=mm(n);var i=n.queue,o=ov.bind(null,Ne,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:pm,useDeferredValue:function(n,i){var o=Rn();return ym(o,n,i)},useTransition:function(){var n=mm(!1);return n=nv.bind(null,Ne,n.queue,!0,!1),Rn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Ne,f=Rn();if(Ye){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),at===null)throw Error(r(349));(Fe&124)!==0||V_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,K_(O_.bind(null,u,g,n),[n]),u.flags|=2048,go(9,vh(),N_.bind(null,u,g,o,i),null),o},useId:function(){var n=Rn(),i=at.identifierPrefix;if(Ye){var o=ni,u=ti;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,i=""+i+"R"+o,o=ph++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=Qb++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:vm,useFormState:j_,useActionState:j_,useOptimistic:function(n){var i=Rn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Em.bind(null,Ne,!0,o),o.dispatch=i,[n,i]},useMemoCache:hm,useCacheRefresh:function(){return Rn().memoizedState=Zb.bind(null,Ne)}},hv={readContext:an,use:yh,useCallback:J_,useContext:an,useEffect:$_,useImperativeHandle:W_,useInsertionEffect:Y_,useLayoutEffect:X_,useMemo:ev,useReducer:_h,useRef:Q_,useState:function(){return _h(si)},useDebugValue:pm,useDeferredValue:function(n,i){var o=Ot();return tv(o,nt.memoizedState,n,i)},useTransition:function(){var n=_h(si)[0],i=Ot().memoizedState;return[typeof n=="boolean"?n:su(n),i]},useSyncExternalStore:C_,useId:sv,useHostTransitionStatus:vm,useFormState:F_,useActionState:F_,useOptimistic:function(n,i){var o=Ot();return L_(o,nt,n,i)},useMemoCache:hm,useCacheRefresh:av},Jb={readContext:an,use:yh,useCallback:J_,useContext:an,useEffect:$_,useImperativeHandle:W_,useInsertionEffect:Y_,useLayoutEffect:X_,useMemo:ev,useReducer:dm,useRef:Q_,useState:function(){return dm(si)},useDebugValue:pm,useDeferredValue:function(n,i){var o=Ot();return nt===null?ym(o,n,i):tv(o,nt.memoizedState,n,i)},useTransition:function(){var n=dm(si)[0],i=Ot().memoizedState;return[typeof n=="boolean"?n:su(n),i]},useSyncExternalStore:C_,useId:sv,useHostTransitionStatus:vm,useFormState:H_,useActionState:H_,useOptimistic:function(n,i){var o=Ot();return nt!==null?L_(o,nt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hm,useCacheRefresh:av},po=null,lu=0;function wh(n){var i=lu;return lu+=1,po===null&&(po=[]),A_(po,n,i)}function uu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Sh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function fv(n){var i=n._init;return i(n._payload)}function dv(n){function i(B,P){if(n){var j=B.deletions;j===null?(B.deletions=[P],B.flags|=16):j.push(P)}}function o(B,P){if(!n)return null;for(;P!==null;)i(B,P),P=P.sibling;return null}function u(B){for(var P=new Map;B!==null;)B.key!==null?P.set(B.key,B):P.set(B.index,B),B=B.sibling;return P}function f(B,P){return B=ei(B,P),B.index=0,B.sibling=null,B}function g(B,P,j){return B.index=j,n?(j=B.alternate,j!==null?(j=j.index,j<P?(B.flags|=67108866,P):j):(B.flags|=67108866,P)):(B.flags|=1048576,P)}function E(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function A(B,P,j,ee){return P===null||P.tag!==6?(P=qd(j,B.mode,ee),P.return=B,P):(P=f(P,j),P.return=B,P)}function D(B,P,j,ee){var _e=j.type;return _e===V?J(B,P,j.props.children,ee,j.key):P!==null&&(P.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&fv(_e)===P.type)?(P=f(P,j.props),uu(P,j),P.return=B,P):(P=ah(j.type,j.key,j.props,null,B.mode,ee),uu(P,j),P.return=B,P)}function F(B,P,j,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==j.containerInfo||P.stateNode.implementation!==j.implementation?(P=jd(j,B.mode,ee),P.return=B,P):(P=f(P,j.children||[]),P.return=B,P)}function J(B,P,j,ee,_e){return P===null||P.tag!==7?(P=Ws(j,B.mode,ee,_e),P.return=B,P):(P=f(P,j),P.return=B,P)}function te(B,P,j){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=qd(""+P,B.mode,j),P.return=B,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return j=ah(P.type,P.key,P.props,null,B.mode,j),uu(j,P),j.return=B,j;case b:return P=jd(P,B.mode,j),P.return=B,P;case R:var ee=P._init;return P=ee(P._payload),te(B,P,j)}if(Ce(P)||L(P))return P=Ws(P,B.mode,j,null),P.return=B,P;if(typeof P.then=="function")return te(B,wh(P),j);if(P.$$typeof===Z)return te(B,ch(B,P),j);Sh(B,P)}return null}function Q(B,P,j,ee){var _e=P!==null?P.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return _e!==null?null:A(B,P,""+j,ee);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return j.key===_e?D(B,P,j,ee):null;case b:return j.key===_e?F(B,P,j,ee):null;case R:return _e=j._init,j=_e(j._payload),Q(B,P,j,ee)}if(Ce(j)||L(j))return _e!==null?null:J(B,P,j,ee,null);if(typeof j.then=="function")return Q(B,P,wh(j),ee);if(j.$$typeof===Z)return Q(B,P,ch(B,j),ee);Sh(B,j)}return null}function K(B,P,j,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(j)||null,A(P,B,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return B=B.get(ee.key===null?j:ee.key)||null,D(P,B,ee,_e);case b:return B=B.get(ee.key===null?j:ee.key)||null,F(P,B,ee,_e);case R:var Me=ee._init;return ee=Me(ee._payload),K(B,P,j,ee,_e)}if(Ce(ee)||L(ee))return B=B.get(j)||null,J(P,B,ee,_e,null);if(typeof ee.then=="function")return K(B,P,j,wh(ee),_e);if(ee.$$typeof===Z)return K(B,P,j,ch(P,ee),_e);Sh(P,ee)}return null}function De(B,P,j,ee){for(var _e=null,Me=null,Ae=P,be=P=0,Qt=null;Ae!==null&&be<j.length;be++){Ae.index>be?(Qt=Ae,Ae=null):Qt=Ae.sibling;var Qe=Q(B,Ae,j[be],ee);if(Qe===null){Ae===null&&(Ae=Qt);break}n&&Ae&&Qe.alternate===null&&i(B,Ae),P=g(Qe,P,be),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe,Ae=Qt}if(be===j.length)return o(B,Ae),Ye&&ea(B,be),_e;if(Ae===null){for(;be<j.length;be++)Ae=te(B,j[be],ee),Ae!==null&&(P=g(Ae,P,be),Me===null?_e=Ae:Me.sibling=Ae,Me=Ae);return Ye&&ea(B,be),_e}for(Ae=u(Ae);be<j.length;be++)Qt=K(Ae,B,be,j[be],ee),Qt!==null&&(n&&Qt.alternate!==null&&Ae.delete(Qt.key===null?be:Qt.key),P=g(Qt,P,be),Me===null?_e=Qt:Me.sibling=Qt,Me=Qt);return n&&Ae.forEach(function(es){return i(B,es)}),Ye&&ea(B,be),_e}function Se(B,P,j,ee){if(j==null)throw Error(r(151));for(var _e=null,Me=null,Ae=P,be=P=0,Qt=null,Qe=j.next();Ae!==null&&!Qe.done;be++,Qe=j.next()){Ae.index>be?(Qt=Ae,Ae=null):Qt=Ae.sibling;var es=Q(B,Ae,Qe.value,ee);if(es===null){Ae===null&&(Ae=Qt);break}n&&Ae&&es.alternate===null&&i(B,Ae),P=g(es,P,be),Me===null?_e=es:Me.sibling=es,Me=es,Ae=Qt}if(Qe.done)return o(B,Ae),Ye&&ea(B,be),_e;if(Ae===null){for(;!Qe.done;be++,Qe=j.next())Qe=te(B,Qe.value,ee),Qe!==null&&(P=g(Qe,P,be),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe);return Ye&&ea(B,be),_e}for(Ae=u(Ae);!Qe.done;be++,Qe=j.next())Qe=K(Ae,B,be,Qe.value,ee),Qe!==null&&(n&&Qe.alternate!==null&&Ae.delete(Qe.key===null?be:Qe.key),P=g(Qe,P,be),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe);return n&&Ae.forEach(function(eI){return i(B,eI)}),Ye&&ea(B,be),_e}function it(B,P,j,ee){if(typeof j=="object"&&j!==null&&j.type===V&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case w:e:{for(var _e=j.key;P!==null;){if(P.key===_e){if(_e=j.type,_e===V){if(P.tag===7){o(B,P.sibling),ee=f(P,j.props.children),ee.return=B,B=ee;break e}}else if(P.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&fv(_e)===P.type){o(B,P.sibling),ee=f(P,j.props),uu(ee,j),ee.return=B,B=ee;break e}o(B,P);break}else i(B,P);P=P.sibling}j.type===V?(ee=Ws(j.props.children,B.mode,ee,j.key),ee.return=B,B=ee):(ee=ah(j.type,j.key,j.props,null,B.mode,ee),uu(ee,j),ee.return=B,B=ee)}return E(B);case b:e:{for(_e=j.key;P!==null;){if(P.key===_e)if(P.tag===4&&P.stateNode.containerInfo===j.containerInfo&&P.stateNode.implementation===j.implementation){o(B,P.sibling),ee=f(P,j.children||[]),ee.return=B,B=ee;break e}else{o(B,P);break}else i(B,P);P=P.sibling}ee=jd(j,B.mode,ee),ee.return=B,B=ee}return E(B);case R:return _e=j._init,j=_e(j._payload),it(B,P,j,ee)}if(Ce(j))return De(B,P,j,ee);if(L(j)){if(_e=L(j),typeof _e!="function")throw Error(r(150));return j=_e.call(j),Se(B,P,j,ee)}if(typeof j.then=="function")return it(B,P,wh(j),ee);if(j.$$typeof===Z)return it(B,P,ch(B,j),ee);Sh(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,P!==null&&P.tag===6?(o(B,P.sibling),ee=f(P,j),ee.return=B,B=ee):(o(B,P),ee=qd(j,B.mode,ee),ee.return=B,B=ee),E(B)):o(B,P)}return function(B,P,j,ee){try{lu=0;var _e=it(B,P,j,ee);return po=null,_e}catch(Ae){if(Ae===Jl||Ae===fh)throw Ae;var Me=Mn(29,Ae,null,B.mode);return Me.lanes=ee,Me.return=B,Me}finally{}}}var yo=dv(!0),mv=dv(!1),Wn=ne(null),Rr=null;function Bi(n){var i=n.alternate;ae(zt,zt.current&1),ae(Wn,n),Rr===null&&(i===null||ho.current!==null||i.memoizedState!==null)&&(Rr=n)}function gv(n){if(n.tag===22){if(ae(zt,zt.current),ae(Wn,n),Rr===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Rr=n)}}else zi()}function zi(){ae(zt,zt.current),ae(Wn,Wn.current)}function ai(n){fe(Wn),Rr===n&&(Rr=null),fe(zt)}var zt=ne(0);function bh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||cg(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Tm(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Am={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Un(),f=Li(u);f.payload=i,o!=null&&(f.callback=o),i=ki(n,f,u),i!==null&&(Bn(i,n,u),tu(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Un(),f=Li(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ki(n,f,u),i!==null&&(Bn(i,n,u),tu(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Un(),u=Li(o);u.tag=2,i!=null&&(u.callback=i),i=ki(n,u,o),i!==null&&(Bn(i,n,o),tu(i,n,o))}};function pv(n,i,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Hl(o,u)||!Hl(f,g):!0}function yv(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Am.enqueueReplaceState(i,i.state,null)}function oa(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Rh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function _v(n){Rh(n)}function vv(n){console.error(n)}function Ev(n){Rh(n)}function Ih(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Tv(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wm(n,i,o){return o=Li(o),o.tag=3,o.payload={element:null},o.callback=function(){Ih(n,i)},o}function Av(n){return n=Li(n),n.tag=3,n}function wv(n,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Tv(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Tv(i,o,u),typeof f!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function eR(n,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Xl(i,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Rr===null?Km():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Ym(n,u,f)),!1;case 22:return o.flags|=65536,u===Wd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Ym(n,u,f)),!1}throw Error(r(435,o.tag))}return Ym(n,u,f),Km(),!1}if(Ye)return i=Wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Hd&&(n=Error(r(422),{cause:u}),Yl($n(n,o)))):(u!==Hd&&(i=Error(r(423),{cause:u}),Yl($n(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=$n(u,o),f=wm(n.stateNode,u,f),tm(n,f),Tt!==4&&(Tt=2)),!1;var g=Error(r(520),{cause:u});if(g=$n(g,o),pu===null?pu=[g]:pu.push(g),Tt!==4&&(Tt=2),i===null)return!0;u=$n(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=wm(o.stateNode,u,n),tm(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qi===null||!Qi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Av(f),wv(f,n,o,u),tm(o,f),!1}o=o.return}while(o!==null);return!1}var Sv=Error(r(461)),Gt=!1;function Zt(n,i,o,u){i.child=n===null?mv(i,null,o,u):yo(i,n.child,o,u)}function bv(n,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return ia(i),u=am(n,i,o,E,g,f),A=om(),n!==null&&!Gt?(lm(n,i,f),oi(n,i,f)):(Ye&&A&&Fd(i),i.flags|=1,Zt(n,i,u,f),i.child)}function Rv(n,i,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!zd(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Iv(n,i,g,u,f)):(n=ah(o.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!Vm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Hl,o(E,u)&&n.ref===i.ref)return oi(n,i,f)}return i.flags|=1,n=ei(g,u),n.ref=i.ref,n.return=i,i.child=n}function Iv(n,i,o,u,f){if(n!==null){var g=n.memoizedProps;if(Hl(g,u)&&n.ref===i.ref)if(Gt=!1,i.pendingProps=u=g,Vm(n,f))(n.flags&131072)!==0&&(Gt=!0);else return i.lanes=n.lanes,oi(n,i,f)}return Sm(n,i,o,u,f)}function Dv(n,i,o){var u=i.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=i.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return xv(n,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&hh(i,g!==null?g.cachePool:null),g!==null?I_(i,g):rm(),gv(i);else return i.lanes=i.childLanes=536870912,xv(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(hh(i,g.cachePool),I_(i,g),zi(),i.memoizedState=null):(n!==null&&hh(i,null),rm(),zi());return Zt(n,i,f,o),i.child}function xv(n,i,o,u){var f=Zd();return f=f===null?null:{parent:Bt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&hh(i,null),rm(),gv(i),n!==null&&Xl(n,i,u,!0),null}function Dh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Sm(n,i,o,u,f){return ia(i),o=am(n,i,o,u,void 0,f),u=om(),n!==null&&!Gt?(lm(n,i,f),oi(n,i,f)):(Ye&&u&&Fd(i),i.flags|=1,Zt(n,i,o,f),i.child)}function Cv(n,i,o,u,f,g){return ia(i),i.updateQueue=null,o=x_(i,u,o,f),D_(n),u=om(),n!==null&&!Gt?(lm(n,i,g),oi(n,i,g)):(Ye&&u&&Fd(i),i.flags|=1,Zt(n,i,o,g),i.child)}function Vv(n,i,o,u,f){if(ia(i),i.stateNode===null){var g=ao,E=o.contextType;typeof E=="object"&&E!==null&&(g=an(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Am,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Jd(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?an(E):ao,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Tm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Am.enqueueReplaceState(g,g.state,null),ru(i,u,g,f),nu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){g=i.stateNode;var A=i.memoizedProps,D=oa(o,A);g.props=D;var F=g.context,J=o.contextType;E=ao,typeof J=="object"&&J!==null&&(E=an(J));var te=o.getDerivedStateFromProps;J=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||F!==E)&&yv(i,g,u,E),Pi=!1;var Q=i.memoizedState;g.state=Q,ru(i,u,g,f),nu(),F=i.memoizedState,A||Q!==F||Pi?(typeof te=="function"&&(Tm(i,o,te,u),F=i.memoizedState),(D=Pi||pv(i,o,D,u,Q,F,E))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),g.props=u,g.state=F,g.context=E,u=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,em(n,i),E=i.memoizedProps,J=oa(o,E),g.props=J,te=i.pendingProps,Q=g.context,F=o.contextType,D=ao,typeof F=="object"&&F!==null&&(D=an(F)),A=o.getDerivedStateFromProps,(F=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==te||Q!==D)&&yv(i,g,u,D),Pi=!1,Q=i.memoizedState,g.state=Q,ru(i,u,g,f),nu();var K=i.memoizedState;E!==te||Q!==K||Pi||n!==null&&n.dependencies!==null&&uh(n.dependencies)?(typeof A=="function"&&(Tm(i,o,A,u),K=i.memoizedState),(J=Pi||pv(i,o,J,u,Q,K,D)||n!==null&&n.dependencies!==null&&uh(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,K,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,K,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=K),g.props=u,g.state=K,g.context=D,u=J):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(i.flags|=1024),u=!1)}return g=u,Dh(n,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&u?(i.child=yo(i,n.child,null,f),i.child=yo(i,null,o,f)):Zt(n,i,o,f),i.memoizedState=g.state,n=i.child):n=oi(n,i,f),n}function Nv(n,i,o,u){return $l(),i.flags|=256,Zt(n,i,o,u),i.child}var bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rm(n){return{baseLanes:n,cachePool:v_()}}function Im(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Jn),n}function Ov(n,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(zt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(f?Bi(i):zi(),Ye){var A=Et,D;if(D=A){e:{for(D=A,A=br;D.nodeType!==8;){if(!A){A=null;break e}if(D=cr(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(i.memoizedState={dehydrated:A,treeContext:Js!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},D=Mn(18,null,null,0),D.stateNode=A,D.return=i,i.child=D,_n=i,Et=null,D=!0):D=!1}D||na(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return cg(A)?i.lanes=32:i.lanes=536870912,null;ai(i)}return A=u.children,u=u.fallback,f?(zi(),f=i.mode,A=xh({mode:"hidden",children:A},f),u=Ws(u,f,o,null),A.return=i,u.return=i,A.sibling=u,i.child=A,f=i.child,f.memoizedState=Rm(o),f.childLanes=Im(n,E,o),i.memoizedState=bm,u):(Bi(i),Dm(i,A))}if(D=n.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(g)i.flags&256?(Bi(i),i.flags&=-257,i=xm(n,i,o)):i.memoizedState!==null?(zi(),i.child=n.child,i.flags|=128,i=null):(zi(),f=u.fallback,A=i.mode,u=xh({mode:"visible",children:u.children},A),f=Ws(f,A,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,yo(i,n.child,null,o),u=i.child,u.memoizedState=Rm(o),u.childLanes=Im(n,E,o),i.memoizedState=bm,i=f);else if(Bi(i),cg(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(r(419)),u.stack="",u.digest=E,Yl({value:u,source:null,stack:null}),i=xm(n,i,o)}else if(Gt||Xl(n,i,o,!1),E=(o&n.childLanes)!==0,Gt||E){if(E=at,E!==null&&(u=o&-o,u=(u&42)!==0?1:Ii(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,so(n,u),Bn(E,n,u),Sv;A.data==="$?"||Km(),i=xm(n,i,o)}else A.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,Et=cr(A.nextSibling),_n=i,Ye=!0,ta=null,br=!1,n!==null&&(Xn[Zn++]=ti,Xn[Zn++]=ni,Xn[Zn++]=Js,ti=n.id,ni=n.overflow,Js=i),i=Dm(i,u.children),i.flags|=4096);return i}return f?(zi(),f=u.fallback,A=i.mode,D=n.child,F=D.sibling,u=ei(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,F!==null?f=ei(F,f):(f=Ws(f,A,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,A=n.child.memoizedState,A===null?A=Rm(o):(D=A.cachePool,D!==null?(F=Bt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=v_(),A={baseLanes:A.baseLanes|o,cachePool:D}),f.memoizedState=A,f.childLanes=Im(n,E,o),i.memoizedState=bm,u):(Bi(i),o=n.child,n=o.sibling,o=ei(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=o,i.memoizedState=null,o)}function Dm(n,i){return i=xh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function xh(n,i){return n=Mn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function xm(n,i,o){return yo(i,n.child,null,o),n=Dm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Mv(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Kd(n.return,i,o)}function Cm(n,i,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function Pv(n,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(Zt(n,i,u.children,o),u=zt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mv(n,o,i);else if(n.tag===19)Mv(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ae(zt,u),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&bh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Cm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&bh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Cm(i,!0,o,null,g);break;case"together":Cm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function oi(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Xl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=ei(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ei(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Vm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&uh(n)))}function tR(n,i,o){switch(i.tag){case 3:Oe(i,i.stateNode.containerInfo),Mi(i,Bt,n.memoizedState.cache),$l();break;case 27:case 5:Sn(i);break;case 4:Oe(i,i.stateNode.containerInfo);break;case 10:Mi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Bi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Ov(n,i,o):(Bi(i),n=oi(n,i,o),n!==null?n.sibling:null);Bi(i);break;case 19:var f=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Xl(n,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return Pv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(zt,zt.current),u)break;return null;case 22:case 23:return i.lanes=0,Dv(n,i,o);case 24:Mi(i,Bt,n.memoizedState.cache)}return oi(n,i,o)}function Lv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Gt=!0;else{if(!Vm(n,o)&&(i.flags&128)===0)return Gt=!1,tR(n,i,o);Gt=(n.flags&131072)!==0}else Gt=!1,Ye&&(i.flags&1048576)!==0&&f_(i,lh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")zd(u)?(n=oa(u,n),i.tag=1,i=Vv(null,i,u,n,o)):(i.tag=0,i=Sm(null,i,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===pe){i.tag=11,i=bv(null,i,u,n,o);break e}else if(f===C){i.tag=14,i=Rv(null,i,u,n,o);break e}}throw i=Re(u)||u,Error(r(306,i,""))}}return i;case 0:return Sm(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=oa(u,i.pendingProps),Vv(n,i,u,f,o);case 3:e:{if(Oe(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,em(n,i),ru(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Mi(i,Bt,u),u!==g.cache&&$d(i,[Bt],o,!0),nu(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Nv(n,i,u,o);break e}else if(u!==f){f=$n(Error(r(424)),i),Yl(f),i=Nv(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Et=cr(n.firstChild),_n=i,Ye=!0,ta=null,br=!0,o=mv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if($l(),u===f){i=oi(n,i,o);break e}Zt(n,i,u,o)}i=i.child}return i;case 26:return Dh(n,i),n===null?(o=zE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ye||(o=i.type,n=i.pendingProps,u=Fh(ce.current).createElement(o),u[Lt]=i,u[Ct]=n,Jt(u,o,n),wt(u),i.stateNode=u):i.memoizedState=zE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Sn(i),n===null&&Ye&&(u=i.stateNode=kE(i.type,i.pendingProps,ce.current),_n=i,br=!0,f=Et,Yi(i.type)?(hg=f,Et=cr(u.firstChild)):Et=f),Zt(n,i,i.pendingProps.children,o),Dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&((f=u=Et)&&(u=xR(u,i.type,i.pendingProps,br),u!==null?(i.stateNode=u,_n=i,Et=cr(u.firstChild),br=!1,f=!0):f=!1),f||na(i)),Sn(i),f=i.type,g=i.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,og(f,g)?u=null:E!==null&&og(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=am(n,i,Kb,null,null,o),bu._currentValue=f),Dh(n,i),Zt(n,i,u,o),i.child;case 6:return n===null&&Ye&&((n=o=Et)&&(o=CR(o,i.pendingProps,br),o!==null?(i.stateNode=o,_n=i,Et=null,n=!0):n=!1),n||na(i)),null;case 13:return Ov(n,i,o);case 4:return Oe(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=yo(i,null,u,o):Zt(n,i,u,o),i.child;case 11:return bv(n,i,i.type,i.pendingProps,o);case 7:return Zt(n,i,i.pendingProps,o),i.child;case 8:return Zt(n,i,i.pendingProps.children,o),i.child;case 12:return Zt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Mi(i,i.type,u.value),Zt(n,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ia(i),f=an(f),u=u(f),i.flags|=1,Zt(n,i,u,o),i.child;case 14:return Rv(n,i,i.type,i.pendingProps,o);case 15:return Iv(n,i,i.type,i.pendingProps,o);case 19:return Pv(n,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},n===null?(o=xh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ei(n.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Dv(n,i,o);case 24:return ia(i),u=an(Bt),n===null?(f=Zd(),f===null&&(f=at,g=Yd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},Jd(i),Mi(i,Bt,f)):((n.lanes&o)!==0&&(em(n,i),ru(i,null,null,o),nu()),f=n.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Mi(i,Bt,u)):(u=g.cache,Mi(i,Bt,u),u!==f.cache&&$d(i,[Bt],o,!0))),Zt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function li(n){n.flags|=4}function kv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!HE(i)){if(i=Wn.current,i!==null&&((Fe&4194048)===Fe?Rr!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||i!==Rr))throw eu=Wd,E_;n.flags|=8192}}function Ch(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Il():536870912,n.lanes|=i,To|=i)}function cu(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function nR(n,i,o){var u=i.pendingProps;switch(Gd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ii(Bt),xt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Kl(i)?li(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,g_())),pt(i),null;case 26:return o=i.memoizedState,n===null?(li(i),o!==null?(pt(i),kv(i,o)):(pt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(li(i),pt(i),kv(i,o)):(pt(i),i.flags&=-16777217):(n.memoizedProps!==u&&li(i),pt(i),i.flags&=-16777217),null;case 27:rn(i),o=ce.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==u&&li(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}n=we.current,Kl(i)?d_(i):(n=kE(f,u,o),i.stateNode=n,li(i))}return pt(i),null;case 5:if(rn(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&li(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return pt(i),null}if(n=we.current,Kl(i))d_(i);else{switch(f=Fh(ce.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Lt]=i,n[Ct]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Jt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&li(i)}}return pt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&li(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=ce.current,Kl(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,f=_n,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Lt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||CE(n.nodeValue,o)),n||na(i)}else n=Fh(n).createTextNode(u),n[Lt]=i,i.stateNode=n}return pt(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Kl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Lt]=i}else $l(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),f=!1}else f=g_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ai(i),i):(ai(i),null)}if(ai(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Ch(i,i.updateQueue),pt(i),null;case 4:return xt(),n===null&&ng(i.stateNode.containerInfo),pt(i),null;case 10:return ii(i.type),pt(i),null;case 19:if(fe(zt),f=i.memoizedState,f===null)return pt(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)cu(f,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=bh(n),g!==null){for(i.flags|=128,cu(f,!1),n=g.updateQueue,i.updateQueue=n,Ch(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)h_(o,n),o=o.sibling;return ae(zt,zt.current&1|2),i.child}n=n.sibling}f.tail!==null&&fn()>Oh&&(i.flags|=128,u=!0,cu(f,!1),i.lanes=4194304)}else{if(!u)if(n=bh(g),n!==null){if(i.flags|=128,u=!0,n=n.updateQueue,i.updateQueue=n,Ch(i,n),cu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ye)return pt(i),null}else 2*fn()-f.renderingStartTime>Oh&&o!==536870912&&(i.flags|=128,u=!0,cu(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(n=f.last,n!==null?n.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=fn(),i.sibling=null,n=zt.current,ae(zt,u?n&1|2:n&1),i):(pt(i),null);case 22:case 23:return ai(i),im(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),o=i.updateQueue,o!==null&&Ch(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&fe(sa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ii(Bt),pt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function rR(n,i){switch(Gd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ii(Bt),xt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return rn(i),null;case 13:if(ai(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$l()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return fe(zt),null;case 4:return xt(),null;case 10:return ii(i.type),null;case 22:case 23:return ai(i),im(),n!==null&&fe(sa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ii(Bt),null;case 25:return null;default:return null}}function Uv(n,i){switch(Gd(i),i.tag){case 3:ii(Bt),xt();break;case 26:case 27:case 5:rn(i);break;case 4:xt();break;case 13:ai(i);break;case 19:fe(zt);break;case 10:ii(i.type);break;case 22:case 23:ai(i),im(),n!==null&&fe(sa);break;case 24:ii(Bt)}}function hu(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){st(i,i.return,A)}}function qi(n,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=i;var D=o,F=A;try{F()}catch(J){st(f,D,J)}}}u=u.next}while(u!==g)}}catch(J){st(i,i.return,J)}}function Bv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{R_(i,o)}catch(u){st(n,n.return,u)}}}function zv(n,i,o){o.props=oa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){st(n,i,u)}}function fu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){st(n,i,f)}}function Ir(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){st(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){st(n,i,f)}else o.current=null}function qv(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){st(n,n.return,f)}}function Nm(n,i,o){try{var u=n.stateNode;SR(u,n.type,o,i),u[Ct]=i}catch(f){st(n,n.return,f)}}function jv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yi(n.type)||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mm(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=jh));else if(u!==4&&(u===27&&Yi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Mm(n,i,o),n=n.sibling;n!==null;)Mm(n,i,o),n=n.sibling}function Vh(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Yi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Vh(n,i,o),n=n.sibling;n!==null;)Vh(n,i,o),n=n.sibling}function Fv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Jt(i,u,o),i[Lt]=n,i[Ct]=o}catch(g){st(n,n.return,g)}}var ui=!1,bt=!1,Pm=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function iR(n,i){if(n=n.containerInfo,sg=Yh,n=t_(n),Od(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,A=-1,D=-1,F=0,J=0,te=n,Q=null;t:for(;;){for(var K;te!==o||f!==0&&te.nodeType!==3||(A=E+f),te!==g||u!==0&&te.nodeType!==3||(D=E+u),te.nodeType===3&&(E+=te.nodeValue.length),(K=te.firstChild)!==null;)Q=te,te=K;for(;;){if(te===n)break t;if(Q===o&&++F===f&&(A=E),Q===g&&++J===u&&(D=E),(K=te.nextSibling)!==null)break;te=Q,Q=te.parentNode}te=K}o=A===-1||D===-1?null:{start:A,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ag={focusedElem:n,selectionRange:o},Yh=!1,Ht=i;Ht!==null;)if(i=Ht,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ht=n;else for(;Ht!==null;){switch(i=Ht,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var De=oa(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(De,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Se){st(o,o.return,Se)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)ug(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ug(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ht=n;break}Ht=i.return}}function Hv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ji(n,o),u&4&&hu(5,o);break;case 1:if(ji(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(E){st(o,o.return,E)}else{var f=oa(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){st(o,o.return,E)}}u&64&&Bv(o),u&512&&fu(o,o.return);break;case 3:if(ji(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{R_(n,i)}catch(E){st(o,o.return,E)}}break;case 27:i===null&&u&4&&Fv(o);case 26:case 5:ji(n,o),i===null&&u&4&&qv(o),u&512&&fu(o,o.return);break;case 12:ji(n,o);break;case 13:ji(n,o),u&4&&$v(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=dR.bind(null,o),VR(n,o))));break;case 22:if(u=o.memoizedState!==null||ui,!u){i=i!==null&&i.memoizedState!==null||bt,f=ui;var g=bt;ui=u,(bt=i)&&!g?Fi(n,o,(o.subtreeFlags&8772)!==0):ji(n,o),ui=f,bt=g}break;case 30:break;default:ji(n,o)}}function Qv(n){var i=n.alternate;i!==null&&(n.alternate=null,Qv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ci(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,In=!1;function ci(n,i,o){for(o=o.child;o!==null;)Kv(n,i,o),o=o.sibling}function Kv(n,i,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ut,o)}catch{}switch(o.tag){case 26:bt||Ir(o,i),ci(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bt||Ir(o,i);var u=ht,f=In;Yi(o.type)&&(ht=o.stateNode,In=!1),ci(n,i,o),Tu(o.stateNode),ht=u,In=f;break;case 5:bt||Ir(o,i);case 6:if(u=ht,f=In,ht=null,ci(n,i,o),ht=u,In=f,ht!==null)if(In)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(g){st(o,i,g)}else try{ht.removeChild(o.stateNode)}catch(g){st(o,i,g)}break;case 18:ht!==null&&(In?(n=ht,PE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),xu(n)):PE(ht,o.stateNode));break;case 4:u=ht,f=In,ht=o.stateNode.containerInfo,In=!0,ci(n,i,o),ht=u,In=f;break;case 0:case 11:case 14:case 15:bt||qi(2,o,i),bt||qi(4,o,i),ci(n,i,o);break;case 1:bt||(Ir(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&zv(o,i,u)),ci(n,i,o);break;case 21:ci(n,i,o);break;case 22:bt=(u=bt)||o.memoizedState!==null,ci(n,i,o),bt=u;break;default:ci(n,i,o)}}function $v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xu(n)}catch(o){st(i,i.return,o)}}function sR(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Gv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Gv),i;default:throw Error(r(435,n.tag))}}function Lm(n,i){var o=sR(n);i.forEach(function(u){var f=mR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Pn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Yi(A.type)){ht=A.stateNode,In=!1;break e}break;case 5:ht=A.stateNode,In=!1;break e;case 3:case 4:ht=A.stateNode.containerInfo,In=!0;break e}A=A.return}if(ht===null)throw Error(r(160));Kv(g,E,f),ht=null,In=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Yv(i,n),i=i.sibling}var ur=null;function Yv(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(i,n),Ln(n),u&4&&(qi(3,n,n.return),hu(3,n),qi(5,n,n.return));break;case 1:Pn(i,n),Ln(n),u&512&&(bt||o===null||Ir(o,o.return)),u&64&&ui&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ur;if(Pn(i,n),Ln(n),u&512&&(bt||o===null||Ir(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ls]||g[Lt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Jt(g,u,o),g[Lt]=n,wt(g),u=g;break e;case"link":var E=FE("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;case"meta":if(E=FE("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Lt]=n,wt(g),u=g}n.stateNode=u}else GE(f,n.type,n.stateNode);else n.stateNode=jE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?GE(f,n.type,n.stateNode):jE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Pn(i,n),Ln(n),u&512&&(bt||o===null||Ir(o,o.return)),o!==null&&u&4&&Nm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Pn(i,n),Ln(n),u&512&&(bt||o===null||Ir(o,o.return)),n.flags&32){f=n.stateNode;try{Gn(f,"")}catch(K){st(n,n.return,K)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Nm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Pm=!0);break;case 6:if(Pn(i,n),Ln(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(K){st(n,n.return,K)}}break;case 3:if(Qh=null,f=ur,ur=Gh(i.containerInfo),Pn(i,n),ur=f,Ln(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{xu(i.containerInfo)}catch(K){st(n,n.return,K)}Pm&&(Pm=!1,Xv(n));break;case 4:u=ur,ur=Gh(n.stateNode.containerInfo),Pn(i,n),Ln(n),ur=u;break;case 12:Pn(i,n),Ln(n);break;case 13:Pn(i,n),Ln(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=fn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,F=ui,J=bt;if(ui=F||f,bt=J||D,Pn(i,n),bt=J,ui=F,Ln(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||ui||bt||la(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=D.stateNode;var te=D.memoizedProps.style,Q=te!=null&&te.hasOwnProperty("display")?te.display:null;A.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(K){st(D,D.return,K)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(K){st(D,D.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Lm(n,o))));break;case 19:Pn(i,n),Ln(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Lm(n,u)));break;case 30:break;case 21:break;default:Pn(i,n),Ln(n)}}function Ln(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(jv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Om(n);Vh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Gn(E,""),o.flags&=-33);var A=Om(n);Vh(n,A,E);break;case 3:case 4:var D=o.stateNode.containerInfo,F=Om(n);Mm(n,F,D);break;default:throw Error(r(161))}}catch(J){st(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Xv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Xv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ji(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Hv(n,i.alternate,i),i=i.sibling}function la(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:qi(4,i,i.return),la(i);break;case 1:Ir(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&zv(i,i.return,o),la(i);break;case 27:Tu(i.stateNode);case 26:case 5:Ir(i,i.return),la(i);break;case 22:i.memoizedState===null&&la(i);break;case 30:la(i);break;default:la(i)}n=n.sibling}}function Fi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:Fi(f,g,o),hu(4,g);break;case 1:if(Fi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){st(u,u.return,F)}if(u=g,f=u.updateQueue,f!==null){var A=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)b_(D[f],A)}catch(F){st(u,u.return,F)}}o&&E&64&&Bv(g),fu(g,g.return);break;case 27:Fv(g);case 26:case 5:Fi(f,g,o),o&&u===null&&E&4&&qv(g),fu(g,g.return);break;case 12:Fi(f,g,o);break;case 13:Fi(f,g,o),o&&E&4&&$v(f,g);break;case 22:g.memoizedState===null&&Fi(f,g,o),fu(g,g.return);break;case 30:break;default:Fi(f,g,o)}i=i.sibling}}function km(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Zl(o))}function Um(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Zl(n))}function Dr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zv(n,i,o,u),i=i.sibling}function Zv(n,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Dr(n,i,o,u),f&2048&&hu(9,i);break;case 1:Dr(n,i,o,u);break;case 3:Dr(n,i,o,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Zl(n)));break;case 12:if(f&2048){Dr(n,i,o,u),n=i.stateNode;try{var g=i.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){st(i,i.return,D)}}else Dr(n,i,o,u);break;case 13:Dr(n,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?Dr(n,i,o,u):du(n,i):g._visibility&2?Dr(n,i,o,u):(g._visibility|=2,_o(n,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&km(E,i);break;case 24:Dr(n,i,o,u),f&2048&&Um(i.alternate,i);break;default:Dr(n,i,o,u)}}function _o(n,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,E=i,A=o,D=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:_o(g,E,A,D,f),hu(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?_o(g,E,A,D,f):du(g,E):(J._visibility|=2,_o(g,E,A,D,f)),f&&F&2048&&km(E.alternate,E);break;case 24:_o(g,E,A,D,f),f&&F&2048&&Um(E.alternate,E);break;default:_o(g,E,A,D,f)}i=i.sibling}}function du(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,f=u.flags;switch(u.tag){case 22:du(o,u),f&2048&&km(u.alternate,u);break;case 24:du(o,u),f&2048&&Um(u.alternate,u);break;default:du(o,u)}i=i.sibling}}var mu=8192;function vo(n){if(n.subtreeFlags&mu)for(n=n.child;n!==null;)Wv(n),n=n.sibling}function Wv(n){switch(n.tag){case 26:vo(n),n.flags&mu&&n.memoizedState!==null&&GR(ur,n.memoizedState,n.memoizedProps);break;case 5:vo(n);break;case 3:case 4:var i=ur;ur=Gh(n.stateNode.containerInfo),vo(n),ur=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=mu,mu=16777216,vo(n),mu=i):vo(n));break;default:vo(n)}}function Jv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function gu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ht=u,tE(u,n)}Jv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)eE(n),n=n.sibling}function eE(n){switch(n.tag){case 0:case 11:case 15:gu(n),n.flags&2048&&qi(9,n,n.return);break;case 3:gu(n);break;case 12:gu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Nh(n)):gu(n);break;default:gu(n)}}function Nh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Ht=u,tE(u,n)}Jv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:qi(8,i,i.return),Nh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Nh(i));break;default:Nh(i)}n=n.sibling}}function tE(n,i){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:qi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Zl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=n;Ht!==null;){u=Ht;var f=u.sibling,g=u.return;if(Qv(u),u===o){Ht=null;break e}if(f!==null){f.return=g,Ht=f;break e}Ht=g}}}var aR={getCacheForType:function(n){var i=an(Bt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},oR=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,Le=null,Fe=0,We=0,kn=null,Gi=!1,Eo=!1,Bm=!1,hi=0,Tt=0,Hi=0,ua=0,zm=0,Jn=0,To=0,pu=null,Dn=null,qm=!1,jm=0,Oh=1/0,Mh=null,Qi=null,Wt=0,Ki=null,Ao=null,wo=0,Fm=0,Gm=null,nE=null,yu=0,Hm=null;function Un(){if((Ze&2)!==0&&Fe!==0)return Fe&-Fe;if(W.T!==null){var n=uo;return n!==0?n:Wm()}return Di()}function rE(){Jn===0&&(Jn=(Fe&536870912)===0||Ye?Rl():536870912);var n=Wn.current;return n!==null&&(n.flags|=32),Jn}function Bn(n,i,o){(n===at&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(So(n,0),$i(n,Fe,Jn,!1)),Fr(n,o),((Ze&2)===0||n!==at)&&(n===at&&((Ze&2)===0&&(ua|=o),Tt===4&&$i(n,Fe,Jn,!1)),xr(n))}function iE(n,i,o){if((Ze&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Ps(n,i),f=u?cR(n,i):$m(n,i,!0),g=u;do{if(f===0){Eo&&!u&&$i(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!lR(o)){f=$m(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var A=n;f=pu;var D=A.current.memoizedState.isDehydrated;if(D&&(So(A,E).flags|=256),E=$m(A,E,!1),E!==2){if(Bm&&!D){A.errorRecoveryDisabledLanes|=g,ua|=g,f=4;break e}g=Dn,Dn=f,g!==null&&(Dn===null?Dn=g:Dn.push.apply(Dn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){So(n,0),$i(n,i,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$i(u,i,Jn,!Gi);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=jm+300-fn(),10<f)){if($i(u,i,Jn,!Gi),za(u,0,!0)!==0)break e;u.timeoutHandle=OE(sE.bind(null,u,o,Dn,Mh,qm,i,Jn,ua,To,Gi,g,2,-0,0),f);break e}sE(u,o,Dn,Mh,qm,i,Jn,ua,To,Gi,g,0,-0,0)}}break}while(!0);xr(n)}function sE(n,i,o,u,f,g,E,A,D,F,J,te,Q,K){if(n.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:FR},Wv(i),te=HR(),te!==null)){n.cancelPendingCommit=te(fE.bind(null,n,i,g,o,u,f,E,A,D,J,1,Q,K)),$i(n,g,E,!F);return}fE(n,i,g,o,u,f,E,A,D)}function lR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!On(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $i(n,i,o,u){i&=~zm,i&=~ua,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var g=31-sn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&mr(n,o,i)}function Ph(){return(Ze&6)===0?(_u(0),!1):!0}function Qm(){if(Le!==null){if(We===0)var n=Le.return;else n=Le,ri=ra=null,um(n),po=null,lu=0,n=Le;for(;n!==null;)Uv(n.alternate,n),n=n.return;Le=null}}function So(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,RR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Qm(),at=n,Le=o=ei(n.current,null),Fe=i,We=0,kn=null,Gi=!1,Eo=Ps(n,i),Bm=!1,To=Jn=zm=ua=Hi=Tt=0,Dn=pu=null,qm=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-sn(u),g=1<<f;i|=n[f],u&=~g}return hi=i,rh(),o}function aE(n,i){Ne=null,W.H=Ah,i===Jl||i===fh?(i=w_(),We=3):i===E_?(i=w_(),We=4):We=i===Sv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,kn=i,Le===null&&(Tt=1,Ih(n,$n(i,n.current)))}function oE(){var n=W.H;return W.H=Ah,n===null?Ah:n}function lE(){var n=W.A;return W.A=aR,n}function Km(){Tt=4,Gi||(Fe&4194048)!==Fe&&Wn.current!==null||(Eo=!0),(Hi&134217727)===0&&(ua&134217727)===0||at===null||$i(at,Fe,Jn,!1)}function $m(n,i,o){var u=Ze;Ze|=2;var f=oE(),g=lE();(at!==n||Fe!==i)&&(Mh=null,So(n,i)),i=!1;var E=Tt;e:do try{if(We!==0&&Le!==null){var A=Le,D=kn;switch(We){case 8:Qm(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(i=!0);var F=We;if(We=0,kn=null,bo(n,A,D,F),o&&Eo){E=0;break e}break;default:F=We,We=0,kn=null,bo(n,A,D,F)}}uR(),E=Tt;break}catch(J){aE(n,J)}while(!0);return i&&n.shellSuspendCounter++,ri=ra=null,Ze=u,W.H=f,W.A=g,Le===null&&(at=null,Fe=0,rh()),E}function uR(){for(;Le!==null;)uE(Le)}function cR(n,i){var o=Ze;Ze|=2;var u=oE(),f=lE();at!==n||Fe!==i?(Mh=null,Oh=fn()+500,So(n,i)):Eo=Ps(n,i);e:do try{if(We!==0&&Le!==null){i=Le;var g=kn;t:switch(We){case 1:We=0,kn=null,bo(n,i,g,1);break;case 2:case 9:if(T_(g)){We=0,kn=null,cE(i);break}i=function(){We!==2&&We!==9||at!==n||(We=7),xr(n)},g.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:T_(g)?(We=0,kn=null,cE(i)):(We=0,kn=null,bo(n,i,g,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var A=Le;if(!E||HE(E)){We=0,kn=null;var D=A.sibling;if(D!==null)Le=D;else{var F=A.return;F!==null?(Le=F,Lh(F)):Le=null}break t}}We=0,kn=null,bo(n,i,g,5);break;case 6:We=0,kn=null,bo(n,i,g,6);break;case 8:Qm(),Tt=6;break e;default:throw Error(r(462))}}hR();break}catch(J){aE(n,J)}while(!0);return ri=ra=null,W.H=u,W.A=f,Ze=o,Le!==null?0:(at=null,Fe=0,rh(),Tt)}function hR(){for(;Le!==null&&!Ri();)uE(Le)}function uE(n){var i=Lv(n.alternate,n,hi);n.memoizedProps=n.pendingProps,i===null?Lh(n):Le=i}function cE(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Cv(o,i,i.pendingProps,i.type,void 0,Fe);break;case 11:i=Cv(o,i,i.pendingProps,i.type.render,i.ref,Fe);break;case 5:um(i);default:Uv(o,i),i=Le=h_(i,hi),i=Lv(o,i,hi)}n.memoizedProps=n.pendingProps,i===null?Lh(n):Le=i}function bo(n,i,o,u){ri=ra=null,um(i),po=null,lu=0;var f=i.return;try{if(eR(n,f,i,o,Fe)){Tt=1,Ih(n,$n(o,n.current)),Le=null;return}}catch(g){if(f!==null)throw Le=f,g;Tt=1,Ih(n,$n(o,n.current)),Le=null;return}i.flags&32768?(Ye||u===1?n=!0:Eo||(Fe&536870912)!==0?n=!1:(Gi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),hE(i,n)):Lh(i)}function Lh(n){var i=n;do{if((i.flags&32768)!==0){hE(i,Gi);return}n=i.return;var o=nR(i.alternate,i,hi);if(o!==null){Le=o;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=n}while(i!==null);Tt===0&&(Tt=5)}function hE(n,i){do{var o=rR(n.alternate,n);if(o!==null){o.flags&=32767,Le=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Le=n;return}Le=n=o}while(n!==null);Tt=6,Le=null}function fE(n,i,o,u,f,g,E,A,D){n.cancelPendingCommit=null;do kh();while(Wt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Ud,Dl(n,o,g,E,A,D),n===at&&(Le=at=null,Fe=0),Ao=i,Ki=n,wo=o,Fm=g,Gm=f,nE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,gR(bn,function(){return yE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=ue.p,ue.p=2,E=Ze,Ze|=4;try{iR(n,i,o)}finally{Ze=E,ue.p=f,W.T=u}}Wt=1,dE(),mE(),gE()}}function dE(){if(Wt===1){Wt=0;var n=Ki,i=Ao,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=ue.p;ue.p=2;var f=Ze;Ze|=4;try{Yv(i,n);var g=ag,E=t_(n.containerInfo),A=g.focusedElem,D=g.selectionRange;if(E!==A&&A&&A.ownerDocument&&e_(A.ownerDocument.documentElement,A)){if(D!==null&&Od(A)){var F=D.start,J=D.end;if(J===void 0&&(J=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(J,A.value.length);else{var te=A.ownerDocument||document,Q=te&&te.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),De=A.textContent.length,Se=Math.min(D.start,De),it=D.end===void 0?Se:Math.min(D.end,De);!K.extend&&Se>it&&(E=it,it=Se,Se=E);var B=Jy(A,Se),P=Jy(A,it);if(B&&P&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==P.node||K.focusOffset!==P.offset)){var j=te.createRange();j.setStart(B.node,B.offset),K.removeAllRanges(),Se>it?(K.addRange(j),K.extend(P.node,P.offset)):(j.setEnd(P.node,P.offset),K.addRange(j))}}}}for(te=[],K=A;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<te.length;A++){var ee=te[A];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Yh=!!sg,ag=sg=null}finally{Ze=f,ue.p=u,W.T=o}}n.current=i,Wt=2}}function mE(){if(Wt===2){Wt=0;var n=Ki,i=Ao,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=ue.p;ue.p=2;var f=Ze;Ze|=4;try{Hv(n,i.alternate,i)}finally{Ze=f,ue.p=u,W.T=o}}Wt=3}}function gE(){if(Wt===4||Wt===3){Wt=0,xs();var n=Ki,i=Ao,o=wo,u=nE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Wt=5:(Wt=0,Ao=Ki=null,pE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Qi=null),qa(o),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ut,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=W.T,f=ue.p,ue.p=2,W.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];g(A.value,{componentStack:A.stack})}}finally{W.T=i,ue.p=f}}(wo&3)!==0&&kh(),xr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Hm?yu++:(yu=0,Hm=n):yu=0,_u(0)}}function pE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Zl(i)))}function kh(n){return dE(),mE(),gE(),yE()}function yE(){if(Wt!==5)return!1;var n=Ki,i=Fm;Fm=0;var o=qa(wo),u=W.T,f=ue.p;try{ue.p=32>o?32:o,W.T=null,o=Gm,Gm=null;var g=Ki,E=wo;if(Wt=0,Ao=Ki=null,wo=0,(Ze&6)!==0)throw Error(r(331));var A=Ze;if(Ze|=4,eE(g.current),Zv(g,g.current,E,o),Ze=A,_u(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ut,g)}catch{}return!0}finally{ue.p=f,W.T=u,pE(n,i)}}function _E(n,i,o){i=$n(o,i),i=wm(n.stateNode,i,2),n=ki(n,i,2),n!==null&&(Fr(n,2),xr(n))}function st(n,i,o){if(n.tag===3)_E(n,n,o);else for(;i!==null;){if(i.tag===3){_E(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){n=$n(o,n),o=Av(2),u=ki(i,o,2),u!==null&&(wv(o,u,i,n),Fr(u,2),xr(u));break}}i=i.return}}function Ym(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new oR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Bm=!0,f.add(o),n=fR.bind(null,n,i,o),i.then(n,n))}function fR(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,at===n&&(Fe&o)===o&&(Tt===4||Tt===3&&(Fe&62914560)===Fe&&300>fn()-jm?(Ze&2)===0&&So(n,0):zm|=o,To===Fe&&(To=0)),xr(n)}function vE(n,i){i===0&&(i=Il()),n=so(n,i),n!==null&&(Fr(n,i),xr(n))}function dR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),vE(n,o)}function mR(n,i){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),vE(n,o)}function gR(n,i){return ir(n,i)}var Uh=null,Ro=null,Xm=!1,Bh=!1,Zm=!1,ca=0;function xr(n){n!==Ro&&n.next===null&&(Ro===null?Uh=Ro=n:Ro=Ro.next=n),Bh=!0,Xm||(Xm=!0,yR())}function _u(n,i){if(!Zm&&Bh){Zm=!0;do for(var o=!1,u=Uh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,A=u.pingedLanes;g=(1<<31-sn(42|n)+1)-1,g&=f&~(E&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,wE(u,g))}else g=Fe,g=za(u,u===at?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ps(u,g)||(o=!0,wE(u,g));u=u.next}while(o);Zm=!1}}function pR(){EE()}function EE(){Bh=Xm=!1;var n=0;ca!==0&&(bR()&&(n=ca),ca=0);for(var i=fn(),o=null,u=Uh;u!==null;){var f=u.next,g=TE(u,i);g===0?(u.next=null,o===null?Uh=f:o.next=f,f===null&&(Ro=o)):(o=u,(n!==0||(g&3)!==0)&&(Bh=!0)),u=f}_u(n)}function TE(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-sn(g),A=1<<E,D=f[E];D===-1?((A&o)===0||(A&u)!==0)&&(f[E]=bl(A,i)):D<=i&&(n.expiredLanes|=A),g&=~A}if(i=at,o=Fe,o=za(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(We===2||We===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&qr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ps(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&qr(u),qa(o)){case 2:case 8:o=dr;break;case 32:o=bn;break;case 268435456:o=dn;break;default:o=bn}return u=AE.bind(null,n),o=ir(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&qr(u),n.callbackPriority=2,n.callbackNode=null,2}function AE(n,i){if(Wt!==0&&Wt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(kh()&&n.callbackNode!==o)return null;var u=Fe;return u=za(n,n===at?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(iE(n,u,i),TE(n,fn()),n.callbackNode!=null&&n.callbackNode===o?AE.bind(null,n):null)}function wE(n,i){if(kh())return null;iE(n,i,!0)}function yR(){IR(function(){(Ze&6)!==0?ir(fr,pR):EE()})}function Wm(){return ca===0&&(ca=Rl()),ca}function SE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ka(""+n)}function bE(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function _R(n,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=SE((f[Ct]||null).action),E=u.submitter;E&&(i=(i=E[Ct]||null)?SE(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var A=new $a("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ca!==0){var D=E?bE(f,E):new FormData(f);_m(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=E?bE(f,E):new FormData(f),_m(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Jm=0;Jm<kd.length;Jm++){var eg=kd[Jm],vR=eg.toLowerCase(),ER=eg[0].toUpperCase()+eg.slice(1);lr(vR,"on"+ER)}lr(i_,"onAnimationEnd"),lr(s_,"onAnimationIteration"),lr(a_,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(kb,"onTransitionRun"),lr(Ub,"onTransitionStart"),lr(Bb,"onTransitionCancel"),lr(o_,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function RE(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var A=u[E],D=A.instance,F=A.currentTarget;if(A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=F;try{g(f)}catch(J){Rh(J)}f.currentTarget=null,g=D}else for(E=0;E<u.length;E++){if(A=u[E],D=A.instance,F=A.currentTarget,A=A.listener,D!==g&&f.isPropagationStopped())break e;g=A,f.currentTarget=F;try{g(f)}catch(J){Rh(J)}f.currentTarget=null,g=D}}}}function ke(n,i){var o=i[Cl];o===void 0&&(o=i[Cl]=new Set);var u=n+"__bubble";o.has(u)||(IE(i,n,2,!1),o.add(u))}function tg(n,i,o){var u=0;i&&(u|=4),IE(o,n,u,i)}var zh="_reactListening"+Math.random().toString(36).slice(2);function ng(n){if(!n[zh]){n[zh]=!0,Vl.forEach(function(o){o!=="selectionchange"&&(TR.has(o)||tg(o,!1,n),tg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[zh]||(i[zh]=!0,tg("selectionchange",!1,i))}}function IE(n,i,o,u){switch(ZE(i)){case 2:var f=$R;break;case 8:f=YR;break;default:f=pg}o=f.bind(null,i,o,n),f=void 0,!Qn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function rg(n,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Gr(A),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=g=E;continue e}A=A.parentNode}}u=u.return}jc(function(){var F=g,J=Hn(o),te=[];e:{var Q=l_.get(n);if(Q!==void 0){var K=$a,De=n;switch(n){case"keypress":if(Er(o)===0)break e;case"keydown":case"keyup":K=eo;break;case"focusin":De="focus",K=Za;break;case"focusout":De="blur",K=Za;break;case"beforeblur":case"afterblur":K=Za;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Xc;break;case i_:case s_:case a_:K=Wa;break;case o_:K=Wc;break;case"scroll":case"scrollend":K=Fc;break;case"wheel":K=to;break;case"copy":case"cut":case"paste":K=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Fl;break;case"toggle":case"beforetoggle":K=eh}var Se=(i&4)!==0,it=!Se&&(n==="scroll"||n==="scrollend"),B=Se?Q!==null?Q+"Capture":null:Q;Se=[];for(var P=F,j;P!==null;){var ee=P;if(j=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||j===null||B===null||(ee=Fs(P,B),ee!=null&&Se.push(Eu(P,ee,j))),it)break;P=P.return}0<Se.length&&(Q=new K(Q,De,null,o,J),te.push({event:Q,listeners:Se}))}}if((i&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",Q&&o!==$r&&(De=o.relatedTarget||o.fromElement)&&(Gr(De)||De[Fn]))break e;if((K||Q)&&(Q=J.window===J?J:(Q=J.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(De=o.relatedTarget||o.toElement,K=F,De=De?Gr(De):null,De!==null&&(it=l(De),Se=De.tag,De!==it||Se!==5&&Se!==27&&Se!==6)&&(De=null)):(K=null,De=F),K!==De)){if(Se=Kn,ee="onMouseLeave",B="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Se=Fl,ee="onPointerLeave",B="onPointerEnter",P="pointer"),it=K==null?Q:pr(K),j=De==null?Q:pr(De),Q=new Se(ee,P+"leave",K,o,J),Q.target=it,Q.relatedTarget=j,ee=null,Gr(J)===F&&(Se=new Se(B,P+"enter",De,o,J),Se.target=j,Se.relatedTarget=it,ee=Se),it=ee,K&&De)t:{for(Se=K,B=De,P=0,j=Se;j;j=Io(j))P++;for(j=0,ee=B;ee;ee=Io(ee))j++;for(;0<P-j;)Se=Io(Se),P--;for(;0<j-P;)B=Io(B),j--;for(;P--;){if(Se===B||B!==null&&Se===B.alternate)break t;Se=Io(Se),B=Io(B)}Se=null}else Se=null;K!==null&&DE(te,Q,K,Se,!1),De!==null&&it!==null&&DE(te,it,De,Se,!0)}}e:{if(Q=F?pr(F):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var _e=Ky;else if(Ut(Q))if($y)_e=Mb;else{_e=Nb;var Me=Vb}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&Ll(F.elementType)&&(_e=Ky):_e=Ob;if(_e&&(_e=_e(n,F))){Jr(te,_e,o,J);break e}Me&&Me(n,Q,F),n==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&Ni(Q,"number",Q.value)}switch(Me=F?pr(F):window,n){case"focusin":(Ut(Me)||Me.contentEditable==="true")&&(no=Me,Md=F,Ql=null);break;case"focusout":Ql=Md=no=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,n_(te,o,J);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":n_(te,o,J)}var Ae;if(wr)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else qe?Y(n,o)&&(be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(v&&o.locale!=="ko"&&(qe||be!=="onCompositionStart"?be==="onCompositionEnd"&&qe&&(Ae=Ul()):(vr=J,Oi="value"in vr?vr.value:vr.textContent,qe=!0)),Me=qh(F,be),0<Me.length&&(be=new ql(be,n,null,o,J),te.push({event:be,listeners:Me}),Ae?be.data=Ae:(Ae=oe(o),Ae!==null&&(be.data=Ae)))),(Ae=y?kt(n,o):je(n,o))&&(be=qh(F,"onBeforeInput"),0<be.length&&(Me=new ql("onBeforeInput","beforeinput",null,o,J),te.push({event:Me,listeners:be}),Me.data=Ae)),_R(te,n,F,o,J)}RE(te,i)})}function Eu(n,i,o){return{instance:n,listener:i,currentTarget:o}}function qh(n,i){for(var o=i+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Fs(n,o),f!=null&&u.unshift(Eu(n,f,g)),f=Fs(n,i),f!=null&&u.push(Eu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Io(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function DE(n,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var A=o,D=A.alternate,F=A.stateNode;if(A=A.tag,D!==null&&D===u)break;A!==5&&A!==26&&A!==27||F===null||(D=F,f?(F=Fs(o,g),F!=null&&E.unshift(Eu(o,F,D))):f||(F=Fs(o,g),F!=null&&E.push(Eu(o,F,D)))),o=o.return}E.length!==0&&n.push({event:i,listeners:E})}var AR=/\r\n?/g,wR=/\u0000|\uFFFD/g;function xE(n){return(typeof n=="string"?n:""+n).replace(AR,`
`).replace(wR,"")}function CE(n,i){return i=xE(i),xE(n)===i}function jh(){}function rt(n,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Gn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Gn(n,""+u);break;case"className":yr(n,"class",u);break;case"tabIndex":yr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(n,o,u);break;case"style":Pl(n,u,g);break;case"data":if(i!=="object"){yr(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ka(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&rt(n,i,"name",f.name,f,null),rt(n,i,"formEncType",f.formEncType,f,null),rt(n,i,"formMethod",f.formMethod,f,null),rt(n,i,"formTarget",f.formTarget,f,null)):(rt(n,i,"encType",f.encType,f,null),rt(n,i,"method",f.method,f,null),rt(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ka(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=jh);break;case"onScroll":u!=null&&ke("scroll",n);break;case"onScrollEnd":u!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ka(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ke("beforetoggle",n),ke("toggle",n),Vi(n,"popover",u);break;case"xlinkActuate":Yt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Vi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Id.get(o)||o,Vi(n,o,u))}}function ig(n,i,o,u,f,g){switch(o){case"style":Pl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Gn(n,u):(typeof u=="number"||typeof u=="bigint")&&Gn(n,""+u);break;case"onScroll":u!=null&&ke("scroll",n);break;case"onScrollEnd":u!=null&&ke("scrollend",n);break;case"onClick":u!=null&&(n.onclick=jh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[Ct]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Vi(n,o,u)}}}function Jt(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:rt(n,i,g,E,o,null)}}f&&rt(n,i,"srcSet",o.srcSet,o,null),u&&rt(n,i,"src",o.src,o,null);return;case"input":ke("invalid",n);var A=g=E=f=null,D=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":E=J;break;case"checked":D=J;break;case"defaultChecked":F=J;break;case"value":g=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:rt(n,i,u,J,o,null)}}zs(n,g,A,D,F,E,f,!1),Qa(n);return;case"select":ke("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:rt(n,i,f,A,o,null)}i=g,o=E,n.multiple=!!u,i!=null?Kr(n,!!u,i,!1):o!=null&&Kr(n,!!u,o,!0);return;case"textarea":ke("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:rt(n,i,E,A,o,null)}qs(n,u,f,g),Qa(n);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:rt(n,i,D,u,o,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(u=0;u<vu.length;u++)ke(vu[u],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:rt(n,i,F,u,o,null)}return;default:if(Ll(i)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&ig(n,i,J,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&rt(n,i,A,u,o,null))}function SR(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,A=null,D=null,F=null,J=null;for(K in o){var te=o[K];if(o.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=te;default:u.hasOwnProperty(K)||rt(n,i,K,null,u,te)}}for(var Q in u){var K=u[Q];if(te=o[Q],u.hasOwnProperty(Q)&&(K!=null||te!=null))switch(Q){case"type":g=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":J=K;break;case"value":E=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==te&&rt(n,i,Q,K,u,te)}}Nn(n,E,A,D,F,J,g,f);return;case"select":K=E=A=Q=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":K=D;default:u.hasOwnProperty(g)||rt(n,i,g,null,u,D)}for(f in u)if(g=u[f],D=o[f],u.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":Q=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==D&&rt(n,i,f,g,u,D)}i=A,o=E,u=K,Q!=null?Kr(n,!!o,Q,!1):!!u!=!!o&&(i!=null?Kr(n,!!o,i,!0):Kr(n,!!o,o?[]:"",!1));return;case"textarea":K=Q=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:rt(n,i,A,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":Q=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&rt(n,i,E,f,u,g)}tt(n,Q,K);return;case"option":for(var De in o)if(Q=o[De],o.hasOwnProperty(De)&&Q!=null&&!u.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:rt(n,i,De,null,u,Q)}for(D in u)if(Q=u[D],K=o[D],u.hasOwnProperty(D)&&Q!==K&&(Q!=null||K!=null))switch(D){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:rt(n,i,D,Q,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)Q=o[Se],o.hasOwnProperty(Se)&&Q!=null&&!u.hasOwnProperty(Se)&&rt(n,i,Se,null,u,Q);for(F in u)if(Q=u[F],K=o[F],u.hasOwnProperty(F)&&Q!==K&&(Q!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:rt(n,i,F,Q,u,K)}return;default:if(Ll(i)){for(var it in o)Q=o[it],o.hasOwnProperty(it)&&Q!==void 0&&!u.hasOwnProperty(it)&&ig(n,i,it,void 0,u,Q);for(J in u)Q=u[J],K=o[J],!u.hasOwnProperty(J)||Q===K||Q===void 0&&K===void 0||ig(n,i,J,Q,u,K);return}}for(var B in o)Q=o[B],o.hasOwnProperty(B)&&Q!=null&&!u.hasOwnProperty(B)&&rt(n,i,B,null,u,Q);for(te in u)Q=u[te],K=o[te],!u.hasOwnProperty(te)||Q===K||Q==null&&K==null||rt(n,i,te,Q,u,K)}var sg=null,ag=null;function Fh(n){return n.nodeType===9?n:n.ownerDocument}function VE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function og(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lg=null;function bR(){var n=window.event;return n&&n.type==="popstate"?n===lg?!1:(lg=n,!0):(lg=null,!1)}var OE=typeof setTimeout=="function"?setTimeout:void 0,RR=typeof clearTimeout=="function"?clearTimeout:void 0,ME=typeof Promise=="function"?Promise:void 0,IR=typeof queueMicrotask=="function"?queueMicrotask:typeof ME<"u"?function(n){return ME.resolve(null).then(n).catch(DR)}:OE;function DR(n){setTimeout(function(){throw n})}function Yi(n){return n==="head"}function PE(n,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&Tu(E.documentElement),o&2&&Tu(E.body),o&4)for(o=E.head,Tu(o),E=o.firstChild;E;){var A=E.nextSibling,D=E.nodeName;E[Ls]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(g),xu(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);xu(i)}function ug(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ug(o),Ci(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function xR(n,i,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ls])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=cr(n.nextSibling),n===null)break}return null}function CR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=cr(n.nextSibling),n===null))return null;return n}function cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function VR(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function cr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var hg=null;function LE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function kE(n,i,o){switch(i=Fh(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Tu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ci(n)}var er=new Map,UE=new Set;function Gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fi=ue.d;ue.d={f:NR,r:OR,D:MR,C:PR,L:LR,m:kR,X:BR,S:UR,M:zR};function NR(){var n=fi.f(),i=Ph();return n||i}function OR(n){var i=gr(n);i!==null&&i.tag===5&&i.type==="form"?iv(i):fi.r(n)}var Do=typeof document>"u"?null:document;function BE(n,i,o){var u=Do;if(u&&typeof i=="string"&&i){var f=Vt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),UE.has(f)||(UE.add(f),n={rel:n,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Jt(i,"link",n),wt(i),u.head.appendChild(i)))}}function MR(n){fi.D(n),BE("dns-prefetch",n,null)}function PR(n,i){fi.C(n,i),BE("preconnect",n,i)}function LR(n,i,o){fi.L(n,i,o);var u=Do;if(u&&n&&i){var f='link[rel="preload"][as="'+Vt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Vt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Vt(o.imageSizes)+'"]')):f+='[href="'+Vt(n)+'"]';var g=f;switch(i){case"style":g=xo(n);break;case"script":g=Co(n)}er.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),er.set(g,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(Au(g))||i==="script"&&u.querySelector(wu(g))||(i=u.createElement("link"),Jt(i,"link",n),wt(i),u.head.appendChild(i)))}}function kR(n,i){fi.m(n,i);var o=Do;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Vt(u)+'"][href="'+Vt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Co(n)}if(!er.has(g)&&(n=_({rel:"modulepreload",href:n},i),er.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wu(g)))return}u=o.createElement("link"),Jt(u,"link",n),wt(u),o.head.appendChild(u)}}}function UR(n,i,o){fi.S(n,i,o);var u=Do;if(u&&n){var f=gn(u).hoistableStyles,g=xo(n);i=i||"default";var E=f.get(g);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Au(g)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=er.get(g))&&fg(n,o);var D=E=u.createElement("link");wt(D),Jt(D,"link",n),D._p=new Promise(function(F,J){D.onload=F,D.onerror=J}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Hh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(g,E)}}}function BR(n,i){fi.X(n,i);var o=Do;if(o&&n){var u=gn(o).hoistableScripts,f=Co(n),g=u.get(f);g||(g=o.querySelector(wu(f)),g||(n=_({src:n,async:!0},i),(i=er.get(f))&&dg(n,i),g=o.createElement("script"),wt(g),Jt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function zR(n,i){fi.M(n,i);var o=Do;if(o&&n){var u=gn(o).hoistableScripts,f=Co(n),g=u.get(f);g||(g=o.querySelector(wu(f)),g||(n=_({src:n,async:!0,type:"module"},i),(i=er.get(f))&&dg(n,i),g=o.createElement("script"),wt(g),Jt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function zE(n,i,o,u){var f=(f=ce.current)?Gh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=xo(o.href),o=gn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=xo(o.href);var g=gn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(Au(n)))&&!g._p&&(E.instance=g,E.state.loading=5),er.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},er.set(n,o),g||qR(f,n,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Co(o),o=gn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function xo(n){return'href="'+Vt(n)+'"'}function Au(n){return'link[rel="stylesheet"]['+n+"]"}function qE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function qR(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Jt(i,"link",o),wt(i),n.head.appendChild(i))}function Co(n){return'[src="'+Vt(n)+'"]'}function wu(n){return"script[async]"+n}function jE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+Vt(o.href)+'"]');if(u)return i.instance=u,wt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),wt(u),Jt(u,"style",f),Hh(u,o.precedence,n),i.instance=u;case"stylesheet":f=xo(o.href);var g=n.querySelector(Au(f));if(g)return i.state.loading|=4,i.instance=g,wt(g),g;u=qE(o),(f=er.get(f))&&fg(u,f),g=(n.ownerDocument||n).createElement("link"),wt(g);var E=g;return E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Jt(g,"link",u),i.state.loading|=4,Hh(g,o.precedence,n),i.instance=g;case"script":return g=Co(o.src),(f=n.querySelector(wu(g)))?(i.instance=f,wt(f),f):(u=o,(f=er.get(g))&&(u=_({},o),dg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),wt(f),Jt(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Hh(u,o.precedence,n));return i.instance}function Hh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===i)g=A;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function fg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function dg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Qh=null;function FE(n,i,o){if(Qh===null){var u=new Map,f=Qh=new Map;f.set(o,u)}else f=Qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ls]||g[Lt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=n+E;var A=u.get(E);A?A.push(g):u.set(E,[g])}}return u}function GE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function jR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function HE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Su=null;function FR(){}function GR(n,i,o){if(Su===null)throw Error(r(475));var u=Su;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=xo(o.href),g=n.querySelector(Au(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Kh.bind(u),n.then(u,u)),i.state.loading|=4,i.instance=g,wt(g);return}g=n.ownerDocument||n,o=qE(o),(f=er.get(f))&&fg(o,f),g=g.createElement("link"),wt(g);var E=g;E._p=new Promise(function(A,D){E.onload=A,E.onerror=D}),Jt(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Kh.bind(u),n.addEventListener("load",i),n.addEventListener("error",i))}}function HR(){if(Su===null)throw Error(r(475));var n=Su;return n.stylesheets&&n.count===0&&mg(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&mg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Kh(){if(this.count--,this.count===0){if(this.stylesheets)mg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var $h=null;function mg(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,$h=new Map,i.forEach(QR,n),$h=null,Kh.call(n))}function QR(n,i){if(!(i.state.loading&4)){var o=$h.get(n);if(o)var u=o.get(null);else{o=new Map,$h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Kh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var bu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function KR(n,i,o,u,f,g,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function QE(n,i,o,u,f,g,E,A,D,F,J,te){return n=new KR(n,i,o,E,A,D,F,te),i=1,g===!0&&(i|=24),g=Mn(3,null,null,i),n.current=g,g.stateNode=n,i=Yd(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},Jd(g),n}function KE(n){return n?(n=ao,n):ao}function $E(n,i,o,u,f,g){f=KE(f),u.context===null?u.context=f:u.pendingContext=f,u=Li(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ki(n,u,i),o!==null&&(Bn(o,n,i),tu(o,n,i))}function YE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function gg(n,i){YE(n,i),(n=n.alternate)&&YE(n,i)}function XE(n){if(n.tag===13){var i=so(n,67108864);i!==null&&Bn(i,n,67108864),gg(n,67108864)}}var Yh=!0;function $R(n,i,o,u){var f=W.T;W.T=null;var g=ue.p;try{ue.p=2,pg(n,i,o,u)}finally{ue.p=g,W.T=f}}function YR(n,i,o,u){var f=W.T;W.T=null;var g=ue.p;try{ue.p=8,pg(n,i,o,u)}finally{ue.p=g,W.T=f}}function pg(n,i,o,u){if(Yh){var f=yg(u);if(f===null)rg(n,i,u,Xh,o),WE(n,u);else if(ZR(f,n,i,o,u))u.stopPropagation();else if(WE(n,u),i&4&&-1<XR.indexOf(n)){for(;f!==null;){var g=gr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=sr(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var D=1<<31-sn(E);A.entanglements[1]|=D,E&=~D}xr(g),(Ze&6)===0&&(Oh=fn()+500,_u(0))}}break;case 13:A=so(g,2),A!==null&&Bn(A,g,2),Ph(),gg(g,2)}if(g=yg(u),g===null&&rg(n,i,u,Xh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else rg(n,i,u,null,o)}}function yg(n){return n=Hn(n),_g(n)}var Xh=null;function _g(n){if(Xh=null,n=Gr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Xh=n,null}function ZE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cs()){case fr:return 2;case dr:return 8;case bn:case Sl:return 32;case dn:return 268435456;default:return 32}default:return 32}}var vg=!1,Xi=null,Zi=null,Wi=null,Ru=new Map,Iu=new Map,Ji=[],XR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WE(n,i){switch(n){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Ru.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(i.pointerId)}}function Du(n,i,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=gr(i),i!==null&&XE(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function ZR(n,i,o,u,f){switch(i){case"focusin":return Xi=Du(Xi,n,i,o,u,f),!0;case"dragenter":return Zi=Du(Zi,n,i,o,u,f),!0;case"mouseover":return Wi=Du(Wi,n,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return Ru.set(g,Du(Ru.get(g)||null,n,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Iu.set(g,Du(Iu.get(g)||null,n,i,o,u,f)),!0}return!1}function JE(n){var i=Gr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Pc(n.priority,function(){if(o.tag===13){var u=Un();u=Ii(u);var f=so(o,u);f!==null&&Bn(f,o,u),gg(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=yg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);$r=u,o.target.dispatchEvent(u),$r=null}else return i=gr(o),i!==null&&XE(i),n.blockedOn=o,!1;i.shift()}return!0}function eT(n,i,o){Zh(n)&&o.delete(i)}function WR(){vg=!1,Xi!==null&&Zh(Xi)&&(Xi=null),Zi!==null&&Zh(Zi)&&(Zi=null),Wi!==null&&Zh(Wi)&&(Wi=null),Ru.forEach(eT),Iu.forEach(eT)}function Wh(n,i){n.blockedOn===i&&(n.blockedOn=null,vg||(vg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,WR)))}var Jh=null;function tT(n){Jh!==n&&(Jh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Jh===n&&(Jh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(_g(u||o)===null)continue;break}var g=gr(o);g!==null&&(n.splice(i,3),i-=3,_m(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function xu(n){function i(D){return Wh(D,n)}Xi!==null&&Wh(Xi,n),Zi!==null&&Wh(Zi,n),Wi!==null&&Wh(Wi,n),Ru.forEach(i),Iu.forEach(i);for(var o=0;o<Ji.length;o++){var u=Ji[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ji.length&&(o=Ji[0],o.blockedOn===null);)JE(o),o.blockedOn===null&&Ji.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Ct]||null;if(typeof g=="function")E||tT(o);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Ct]||null)A=E.formAction;else if(_g(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),tT(o)}}}function Eg(n){this._internalRoot=n}ef.prototype.render=Eg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Un();$E(o,u,n,i,null,null)},ef.prototype.unmount=Eg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;$E(n.current,2,null,n,null,null),Ph(),i[Fn]=null}};function ef(n){this._internalRoot=n}ef.prototype.unstable_scheduleHydration=function(n){if(n){var i=Di();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Ji.length&&i!==0&&i<Ji[o].priority;o++);Ji.splice(o,0,n),o===0&&JE(n)}};var nT=e.version;if(nT!=="19.1.0")throw Error(r(527,nT,"19.1.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var JR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{ut=tf.inject(JR),$e=tf}catch{}}return Vu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",f=_v,g=vv,E=Ev,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=QE(n,1,!1,null,null,o,u,f,g,E,A,null),n[Fn]=i.current,ng(n),new Eg(i)},Vu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,f="",g=_v,E=vv,A=Ev,D=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),i=QE(n,1,!0,i,o??null,u,f,g,E,A,D,F),i.context=KE(null),o=i.current,u=Un(),u=Ii(u),f=Li(u),f.callback=null,ki(o,f,u),o=u,i.current.lanes=o,Fr(i,o),xr(i),n[Fn]=i.current,ng(n),new ef(i)},Vu.version="19.1.0",Vu}var fT;function cI(){if(fT)return wg.exports;fT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wg.exports=uI(),wg.exports}var hI=cI();const fI=aA(hI);var Nu={},dT;function dI(){if(dT)return Nu;dT=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.parse=c,Nu.serialize=p;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,b){const V=new l,U=w.length;if(U<2)return V;const k=(b==null?void 0:b.decode)||_;let H=0;do{const re=w.indexOf("=",H);if(re===-1)break;const Z=w.indexOf(";",H),pe=Z===-1?U:Z;if(re>pe){H=w.lastIndexOf(";",re-1)+1;continue}const le=d(w,H,re),ge=m(w,re,le),C=w.slice(le,ge);if(V[C]===void 0){let R=d(w,re+1,pe),I=m(w,pe,R);const N=k(w.slice(R,I));V[C]=N}H=pe+1}while(H<U);return V}function d(w,b,V){do{const U=w.charCodeAt(b);if(U!==32&&U!==9)return b}while(++b<V);return V}function m(w,b,V){for(;b>V;){const U=w.charCodeAt(--b);if(U!==32&&U!==9)return b+1}return V}function p(w,b,V){const U=(V==null?void 0:V.encode)||encodeURIComponent;if(!s.test(w))throw new TypeError(`argument name is invalid: ${w}`);const k=U(b);if(!e.test(k))throw new TypeError(`argument val is invalid: ${b}`);let H=w+"="+k;if(!V)return H;if(V.maxAge!==void 0){if(!Number.isInteger(V.maxAge))throw new TypeError(`option maxAge is invalid: ${V.maxAge}`);H+="; Max-Age="+V.maxAge}if(V.domain){if(!t.test(V.domain))throw new TypeError(`option domain is invalid: ${V.domain}`);H+="; Domain="+V.domain}if(V.path){if(!r.test(V.path))throw new TypeError(`option path is invalid: ${V.path}`);H+="; Path="+V.path}if(V.expires){if(!T(V.expires)||!Number.isFinite(V.expires.valueOf()))throw new TypeError(`option expires is invalid: ${V.expires}`);H+="; Expires="+V.expires.toUTCString()}if(V.httpOnly&&(H+="; HttpOnly"),V.secure&&(H+="; Secure"),V.partitioned&&(H+="; Partitioned"),V.priority)switch(typeof V.priority=="string"?V.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${V.priority}`)}if(V.sameSite)switch(typeof V.sameSite=="string"?V.sameSite.toLowerCase():V.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${V.sameSite}`)}return H}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function T(w){return a.call(w)==="[object Date]"}return Nu}dI();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mT="popstate";function mI(s={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Fg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Xu(a)}return pI(e,t,null,s)}function yt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Lr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gI(){return Math.random().toString(36).substring(2,10)}function gT(s,e){return{usr:s.state,key:s.key,idx:e}}function Fg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?ml(e):e,state:t,key:e&&e.key||r||gI()}}function Xu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function ml(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function pI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let k=_(),H=k==null?null:k-p;p=k,m&&m({action:d,location:U.location,delta:H})}function w(k,H){d="PUSH";let re=Fg(U.location,k,H);p=_()+1;let Z=gT(re,p),pe=U.createHref(re);try{c.pushState(Z,"",pe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(pe)}l&&m&&m({action:d,location:U.location,delta:1})}function b(k,H){d="REPLACE";let re=Fg(U.location,k,H);p=_();let Z=gT(re,p),pe=U.createHref(re);c.replaceState(Z,"",pe),l&&m&&m({action:d,location:U.location,delta:0})}function V(k){let H=a.location.origin!=="null"?a.location.origin:a.location.href,re=typeof k=="string"?k:Xu(k);return re=re.replace(/ $/,"%20"),yt(H,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,H)}let U={get action(){return d},get location(){return s(a,c)},listen(k){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(mT,T),m=k,()=>{a.removeEventListener(mT,T),m=null}},createHref(k){return e(a,k)},createURL:V,encodeLocation(k){let H=V(k);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:w,replace:b,go(k){return c.go(k)}};return U}function oA(s,e,t="/"){return yI(s,e,t,!1)}function yI(s,e,t,r){let a=typeof e=="string"?ml(e):e,l=pi(a.pathname||"/",t);if(l==null)return null;let c=lA(s);_I(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=xI(l);d=II(c[m],p,r)}return d}function lA(s,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(yt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let p=mi([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),lA(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:bI(p,l.index),routesMeta:_})};return s.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of uA(l.path))a(l,c,m)}),e}function uA(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=uA(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>s.startsWith("/")&&m===""?"/":m)}function _I(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:RI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vI=/^:[\w-]+$/,EI=3,TI=2,AI=1,wI=10,SI=-2,pT=s=>s==="*";function bI(s,e){let t=s.split("/"),r=t.length;return t.some(pT)&&(r+=SI),e&&(r+=TI),t.filter(a=>!pT(a)).reduce((a,l)=>a+(vI.test(l)?EI:l===""?AI:wI),r)}function RI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function II(s,e,t=!1){let{routesMeta:r}=s,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=wf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),w=m.route;if(!T&&p&&t&&!r[r.length-1].route.index&&(T=wf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:mi([l,T.pathname]),pathnameBase:OI(mi([l,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(l=mi([l,T.pathnameBase]))}return c}function wf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=DI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:T},w)=>{if(_==="*"){let V=d[w]||"";c=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const b=d[w];return T&&!b?p[_]=void 0:p[_]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:s}}function DI(s,e=!1,t=!0){Lr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function xI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Lr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function pi(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function CI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?ml(s):s;return{pathname:t?t.startsWith("/")?t:VI(t,e):e,search:MI(r),hash:PI(a)}}function VI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ig(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cA(s){let e=NI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hA(s,e,t,r=!1){let a;typeof s=="string"?a=ml(s):(a={...s},yt(!a.pathname||!a.pathname.includes("?"),Ig("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),Ig("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),Ig("#","search","hash",a)));let l=s===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),T-=1;a.pathname=w.join("/")}d=T>=0?e[T]:"/"}let m=CI(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var mi=s=>s.join("/").replace(/\/\/+/g,"/"),OI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),MI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,PI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function LI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var fA=["POST","PUT","PATCH","DELETE"];new Set(fA);var kI=["GET",...fA];new Set(kI);var gl=G.createContext(null);gl.displayName="DataRouter";var Kf=G.createContext(null);Kf.displayName="DataRouterState";var dA=G.createContext({isTransitioning:!1});dA.displayName="ViewTransition";var UI=G.createContext(new Map);UI.displayName="Fetchers";var BI=G.createContext(null);BI.displayName="Await";var zr=G.createContext(null);zr.displayName="Navigation";var pc=G.createContext(null);pc.displayName="Location";var Ti=G.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var Rp=G.createContext(null);Rp.displayName="RouteError";function zI(s,{relative:e}={}){yt(yc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(zr),{hash:a,pathname:l,search:c}=_c(s,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:mi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function yc(){return G.useContext(pc)!=null}function Ma(){return yt(yc(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(pc).location}var mA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gA(s){G.useContext(zr).static||G.useLayoutEffect(s)}function qI(){let{isDataRoute:s}=G.useContext(Ti);return s?e1():jI()}function jI(){yt(yc(),"useNavigate() may be used only in the context of a <Router> component.");let s=G.useContext(gl),{basename:e,navigator:t}=G.useContext(zr),{matches:r}=G.useContext(Ti),{pathname:a}=Ma(),l=JSON.stringify(cA(r)),c=G.useRef(!1);return gA(()=>{c.current=!0}),G.useCallback((m,p={})=>{if(Lr(c.current,mA),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=hA(m,JSON.parse(l),a,p.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:mi([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,s])}G.createContext(null);function _c(s,{relative:e}={}){let{matches:t}=G.useContext(Ti),{pathname:r}=Ma(),a=JSON.stringify(cA(t));return G.useMemo(()=>hA(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function FI(s,e){return pA(s,e)}function pA(s,e,t,r){var re;yt(yc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=G.useContext(zr),{matches:c}=G.useContext(Ti),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let Z=T&&T.path||"";yA(p,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let w=Ma(),b;if(e){let Z=typeof e=="string"?ml(e):e;yt(_==="/"||((re=Z.pathname)==null?void 0:re.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),b=Z}else b=w;let V=b.pathname||"/",U=V;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");U="/"+V.replace(/^\//,"").split("/").slice(Z.length).join("/")}let k=!l&&t&&t.matches&&t.matches.length>0?t.matches:oA(s,{pathname:U});Lr(T||k!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Lr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=$I(k&&k.map(Z=>Object.assign({},Z,{params:Object.assign({},m,Z.params),pathname:mi([_,a.encodeLocation?a.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:mi([_,a.encodeLocation?a.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,t,r);return e&&H?G.createElement(pc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},H):H}function GI(){let s=JI(),e=LI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:l},"ErrorBoundary")," or"," ",G.createElement("code",{style:l},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:a},t):null,c)}var HI=G.createElement(GI,null),QI=class extends G.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?G.createElement(Ti.Provider,{value:this.props.routeContext},G.createElement(Rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KI({routeContext:s,match:e,children:t}){let r=G.useContext(gl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Ti.Provider,{value:s},t)}function $I(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);yt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,w=!1,b=null,V=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||HI,c&&(d<0&&_===0?(yA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,V=null):d===_&&(w=!0,V=p.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,_+1)),k=()=>{let H;return T?H=b:w?H=V:p.route.Component?H=G.createElement(p.route.Component,null):p.route.element?H=p.route.element:H=m,G.createElement(KI,{match:p,routeContext:{outlet:m,matches:U,isDataRoute:t!=null},children:H})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?G.createElement(QI,{location:t.location,revalidation:t.revalidation,component:b,error:T,children:k(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):k()},null)}function Ip(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YI(s){let e=G.useContext(gl);return yt(e,Ip(s)),e}function XI(s){let e=G.useContext(Kf);return yt(e,Ip(s)),e}function ZI(s){let e=G.useContext(Ti);return yt(e,Ip(s)),e}function Dp(s){let e=ZI(s),t=e.matches[e.matches.length-1];return yt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function WI(){return Dp("useRouteId")}function JI(){var r;let s=G.useContext(Rp),e=XI("useRouteError"),t=Dp("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function e1(){let{router:s}=YI("useNavigate"),e=Dp("useNavigate"),t=G.useRef(!1);return gA(()=>{t.current=!0}),G.useCallback(async(a,l={})=>{Lr(t.current,mA),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...l}))},[s,e])}var yT={};function yA(s,e,t){!e&&!yT[s]&&(yT[s]=!0,Lr(!1,t))}G.memo(t1);function t1({routes:s,future:e,state:t}){return pA(s,void 0,t,e)}function ko(s){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n1({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){yt(!yc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=G.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=ml(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:w="default"}=t,b=G.useMemo(()=>{let V=pi(m,c);return V==null?null:{location:{pathname:V,search:p,hash:_,state:T,key:w},navigationType:r}},[c,m,p,_,T,w,r]);return Lr(b!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:G.createElement(zr.Provider,{value:d},G.createElement(pc.Provider,{children:e,value:b}))}function r1({children:s,location:e}){return FI(Gg(s),e)}function Gg(s,e=[]){let t=[];return G.Children.forEach(s,(r,a)=>{if(!G.isValidElement(r))return;let l=[...e,a];if(r.type===G.Fragment){t.push.apply(t,Gg(r.props.children,l));return}yt(r.type===ko,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Gg(r.props.children,l)),t.push(c)}),t}var hf="get",ff="application/x-www-form-urlencoded";function $f(s){return s!=null&&typeof s.tagName=="string"}function i1(s){return $f(s)&&s.tagName.toLowerCase()==="button"}function s1(s){return $f(s)&&s.tagName.toLowerCase()==="form"}function a1(s){return $f(s)&&s.tagName.toLowerCase()==="input"}function o1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function l1(s,e){return s.button===0&&(!e||e==="_self")&&!o1(s)}var nf=null;function u1(){if(nf===null)try{new FormData(document.createElement("form"),0),nf=!1}catch{nf=!0}return nf}var c1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dg(s){return s!=null&&!c1.has(s)?(Lr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ff}"`),null):s}function h1(s,e){let t,r,a,l,c;if(s1(s)){let d=s.getAttribute("action");r=d?pi(d,e):null,t=s.getAttribute("method")||hf,a=Dg(s.getAttribute("enctype"))||ff,l=new FormData(s)}else if(i1(s)||a1(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||d.getAttribute("action");if(r=m?pi(m,e):null,t=s.getAttribute("formmethod")||d.getAttribute("method")||hf,a=Dg(s.getAttribute("formenctype"))||Dg(d.getAttribute("enctype"))||ff,l=new FormData(d,s),!u1()){let{name:p,type:_,value:T}=s;if(_==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,T)}}else{if($f(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hf,r=null,a=ff,c=s}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}function xp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function f1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function d1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function m1(s,e,t){let r=await Promise.all(s.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await f1(l,t);return c.links?c.links():[]}return[]}));return _1(r.flat(1).filter(d1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _T(s,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var _;return t[p].pathname!==m.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function g1(s,e,{includeHydrateFallback:t}={}){return p1(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function p1(s){return[...new Set(s)]}function y1(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function _1(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let l=JSON.stringify(y1(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}var v1=new Set([100,101,204,205]);function E1(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&pi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function _A(){let s=G.useContext(gl);return xp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function T1(){let s=G.useContext(Kf);return xp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Cp=G.createContext(void 0);Cp.displayName="FrameworkContext";function vA(){let s=G.useContext(Cp);return xp(s,"You must render this element inside a <HydratedRouter> element"),s}function A1(s,e){let t=G.useContext(Cp),[r,a]=G.useState(!1),[l,c]=G.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,w=G.useRef(null);G.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let U=H=>{H.forEach(re=>{c(re.isIntersecting)})},k=new IntersectionObserver(U,{threshold:.5});return w.current&&k.observe(w.current),()=>{k.disconnect()}}},[s]),G.useEffect(()=>{if(r){let U=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(U)}}},[r]);let b=()=>{a(!0)},V=()=>{a(!1),c(!1)};return t?s!=="intent"?[l,w,{}]:[l,w,{onFocus:Ou(d,b),onBlur:Ou(m,V),onMouseEnter:Ou(p,b),onMouseLeave:Ou(_,V),onTouchStart:Ou(T,b)}]:[!1,w,{}]}function Ou(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function w1({page:s,...e}){let{router:t}=_A(),r=G.useMemo(()=>oA(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?G.createElement(b1,{page:s,matches:r,...e}):null}function S1(s){let{manifest:e,routeModules:t}=vA(),[r,a]=G.useState([]);return G.useEffect(()=>{let l=!1;return m1(s,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[s,e,t]),r}function b1({page:s,matches:e,...t}){let r=Ma(),{manifest:a,routeModules:l}=vA(),{basename:c}=_A(),{loaderData:d,matches:m}=T1(),p=G.useMemo(()=>_T(s,e,m,a,r,"data"),[s,e,m,a,r]),_=G.useMemo(()=>_T(s,e,m,a,r,"assets"),[s,e,m,a,r]),T=G.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let V=new Set,U=!1;if(e.forEach(H=>{var Z;let re=a.routes[H.route.id];!re||!re.hasLoader||(!p.some(pe=>pe.route.id===H.route.id)&&H.route.id in d&&((Z=l[H.route.id])!=null&&Z.shouldRevalidate)||re.hasClientLoader?U=!0:V.add(H.route.id))}),V.size===0)return[];let k=E1(s,c);return U&&V.size>0&&k.searchParams.set("_routes",e.filter(H=>V.has(H.route.id)).map(H=>H.route.id).join(",")),[k.pathname+k.search]},[c,d,r,a,p,e,s,l]),w=G.useMemo(()=>g1(_,a),[_,a]),b=S1(_);return G.createElement(G.Fragment,null,T.map(V=>G.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),w.map(V=>G.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),b.map(({key:V,link:U})=>G.createElement("link",{key:V,...U})))}function R1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EA&&(window.__reactRouterVersion="7.5.1")}catch{}function I1({basename:s,children:e,window:t}){let r=G.useRef();r.current==null&&(r.current=mI({window:t,v5Compat:!0}));let a=r.current,[l,c]=G.useState({action:a.action,location:a.location}),d=G.useCallback(m=>{G.startTransition(()=>c(m))},[c]);return G.useLayoutEffect(()=>a.listen(d),[a,d]),G.createElement(n1,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a})}var TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...w},b){let{basename:V}=G.useContext(zr),U=typeof p=="string"&&TA.test(p),k,H=!1;if(typeof p=="string"&&U&&(k=p,EA))try{let I=new URL(window.location.href),N=p.startsWith("//")?new URL(I.protocol+p):new URL(p),M=pi(N.pathname,V);N.origin===I.origin&&M!=null?p=M+N.search+N.hash:H=!0}catch{Lr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=zI(p,{relative:a}),[Z,pe,le]=A1(r,w),ge=V1(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function C(I){e&&e(I),I.defaultPrevented||ge(I)}let R=G.createElement("a",{...w,...le,href:k||re,onClick:H||l?e:C,ref:R1(b,pe),target:m,"data-discover":!U&&t==="render"?"true":void 0});return Z&&!U?G.createElement(G.Fragment,null,R,G.createElement(w1,{page:re})):R});qn.displayName="Link";var D1=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=_c(c,{relative:p.relative}),w=Ma(),b=G.useContext(Kf),{navigator:V,basename:U}=G.useContext(zr),k=b!=null&&L1(T)&&d===!0,H=V.encodeLocation?V.encodeLocation(T).pathname:T.pathname,re=w.pathname,Z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(re=re.toLowerCase(),Z=Z?Z.toLowerCase():null,H=H.toLowerCase()),Z&&U&&(Z=pi(Z,U)||Z);const pe=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let le=re===H||!a&&re.startsWith(H)&&re.charAt(pe)==="/",ge=Z!=null&&(Z===H||!a&&Z.startsWith(H)&&Z.charAt(H.length)==="/"),C={isActive:le,isPending:ge,isTransitioning:k},R=le?e:void 0,I;typeof r=="function"?I=r(C):I=[r,le?"active":null,ge?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(C):l;return G.createElement(qn,{...p,"aria-current":R,className:I,ref:_,style:N,to:c,viewTransition:d},typeof m=="function"?m(C):m)});D1.displayName="NavLink";var x1=G.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=hf,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...w},b)=>{let V=M1(),U=P1(d,{relative:p}),k=c.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&TA.test(d),re=Z=>{if(m&&m(Z),Z.defaultPrevented)return;Z.preventDefault();let pe=Z.nativeEvent.submitter,le=(pe==null?void 0:pe.getAttribute("formmethod"))||c;V(pe||Z.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return G.createElement("form",{ref:b,method:k,action:U,onSubmit:r?m:re,...w,"data-discover":!H&&s==="render"?"true":void 0})});x1.displayName="Form";function C1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AA(s){let e=G.useContext(gl);return yt(e,C1(s)),e}function V1(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=qI(),m=Ma(),p=_c(s,{relative:l});return G.useCallback(_=>{if(l1(_,e)){_.preventDefault();let T=t!==void 0?t:Xu(m)===Xu(p);d(s,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,s,a,l,c])}var N1=0,O1=()=>`__${String(++N1)}__`;function M1(){let{router:s}=AA("useSubmit"),{basename:e}=G.useContext(zr),t=WI();return G.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=h1(r,e);if(a.navigate===!1){let _=a.fetcherKey||O1();await s.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function P1(s,{relative:e}={}){let{basename:t}=G.useContext(zr),r=G.useContext(Ti);yt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={..._c(s||".",{relative:e})},c=Ma();if(s==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:mi([t,l.pathname])),Xu(l)}function L1(s,e={}){let t=G.useContext(dA);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AA("useViewTransitionState"),a=_c(s,{relative:e.relative});if(!t.isTransitioning)return!1;let l=pi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=pi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return wf(a.pathname,c)!=null||wf(a.pathname,l)!=null}new TextEncoder;[...v1];function k1(){const[s,e]=G.useState(null);return G.useEffect(()=>{var a,l;const t=(a=window.Telegram)==null?void 0:a.WebApp;if(!t)return;t.ready(),t.expand();const r=t.initDataUnsafe;(l=r==null?void 0:r.user)!=null&&l.id&&e(r.user.id)},[]),s}const U1=()=>{};var vT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},B1=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],d=s[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},SA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,d=c?s[a+1]:0,m=a+2<s.length,p=m?s[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let w=(d&15)<<2|p>>6,b=p&63;m||(b=64,c||(w=64)),r.push(t[_],t[T],t[w],t[b])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(wA(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):B1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],d=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const T=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new z1;const w=l<<2|d>>4;if(r.push(w),p!==64){const b=d<<4&240|p>>2;if(r.push(b),T!==64){const V=p<<6&192|T;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class z1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q1=function(s){const e=wA(s);return SA.encodeByteArray(e,!0)},Sf=function(s){return q1(s).replace(/\./g,"")},bA=function(s){try{return SA.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bf(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!j1(t)||(s[t]=bf(s[t],e[t]));return s}function j1(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=()=>RA().__FIREBASE_DEFAULTS__,G1=()=>{if(typeof process>"u"||typeof vT>"u")return;const s=vT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},H1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&bA(s[1]);return e&&JSON.parse(e)},IA=()=>{try{return U1()||F1()||G1()||H1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},DA=()=>{var s;return(s=IA())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $1(){var s;const e=(s=IA())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y1(){return typeof window<"u"||xA()}function xA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function CA(){return!$1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VA(){try{return typeof indexedDB=="object"}catch{return!1}}function X1(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="FirebaseError";class Pa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Z1,Object.setPrototypeOf(this,Pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yf.prototype.create)}}class Yf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?W1(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Pa(a,d,r)}}function W1(s,e){return s.replace(J1,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const J1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Ho(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(TT(l)&&TT(c)){if(!Ho(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function TT(s){return s!==null&&typeof s=="object"}function eD(s,e){const t=new tD(s,e);return t.subscribe.bind(t)}class tD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=xg),a.error===void 0&&(a.error=xg),a.complete===void 0&&(a.complete=xg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nD(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(s){return s&&s._delegate?s._delegate:s}class Sa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Q1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iD(s){return s===fa?void 0:s}function sD(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=[];var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const OA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},aD=ze.INFO,oD={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},lD=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=oD[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=aD,this._logHandler=lD,this._userLogHandler=null,Vp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}function uD(s){Vp.forEach(e=>{e.setLogLevel(s)})}function cD(s,e){for(const t of Vp){let r=null;e&&e.level&&(r=OA[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&s({level:ze[l].toLowerCase(),message:d,args:c,type:a.name})}}}const hD=(s,e)=>e.some(t=>s instanceof t);let AT,wT;function fD(){return AT||(AT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dD(){return wT||(wT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MA=new WeakMap,Hg=new WeakMap,PA=new WeakMap,Cg=new WeakMap,Op=new WeakMap;function mD(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(ls(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&MA.set(t,s)}).catch(()=>{}),Op.set(e,s),e}function gD(s){if(Hg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});Hg.set(s,e)}let Qg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Hg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||PA.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function pD(s){Qg=s(Qg)}function yD(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Vg(this),e,...t);return PA.set(r,e.sort?e.sort():[e]),ls(r)}:dD().includes(s)?function(...e){return s.apply(Vg(this),e),ls(MA.get(this))}:function(...e){return ls(s.apply(Vg(this),e))}}function _D(s){return typeof s=="function"?yD(s):(s instanceof IDBTransaction&&gD(s),hD(s,fD())?new Proxy(s,Qg):s)}function ls(s){if(s instanceof IDBRequest)return mD(s);if(Cg.has(s))return Cg.get(s);const e=_D(s);return e!==s&&(Cg.set(s,e),Op.set(e,s)),e}const Vg=s=>Op.get(s);function vD(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),d=ls(c);return r&&c.addEventListener("upgradeneeded",m=>{r(ls(c.result),m.oldVersion,m.newVersion,ls(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const ED=["get","getKey","getAll","getAllKeys","count"],TD=["put","add","delete","clear"],Ng=new Map;function ST(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=TD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||ED.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Ng.set(e,l),l}pD(s=>({...s,get:(e,t,r)=>ST(e,t)||s.get(e,t,r),has:(e,t)=>!!ST(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function wD(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const If="@firebase/app",Kg="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Np("@firebase/app"),SD="@firebase/app-compat",bD="@firebase/analytics-compat",RD="@firebase/analytics",ID="@firebase/app-check-compat",DD="@firebase/app-check",xD="@firebase/auth",CD="@firebase/auth-compat",VD="@firebase/database",ND="@firebase/data-connect",OD="@firebase/database-compat",MD="@firebase/functions",PD="@firebase/functions-compat",LD="@firebase/installations",kD="@firebase/installations-compat",UD="@firebase/messaging",BD="@firebase/messaging-compat",zD="@firebase/performance",qD="@firebase/performance-compat",jD="@firebase/remote-config",FD="@firebase/remote-config-compat",GD="@firebase/storage",HD="@firebase/storage-compat",QD="@firebase/firestore",KD="@firebase/vertexai",$D="@firebase/firestore-compat",YD="firebase",XD="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]",ZD={[If]:"fire-core",[SD]:"fire-core-compat",[RD]:"fire-analytics",[bD]:"fire-analytics-compat",[DD]:"fire-app-check",[ID]:"fire-app-check-compat",[xD]:"fire-auth",[CD]:"fire-auth-compat",[VD]:"fire-rtdb",[ND]:"fire-data-connect",[OD]:"fire-rtdb-compat",[MD]:"fire-fn",[PD]:"fire-fn-compat",[LD]:"fire-iid",[kD]:"fire-iid-compat",[UD]:"fire-fcm",[BD]:"fire-fcm-compat",[zD]:"fire-perf",[qD]:"fire-perf-compat",[jD]:"fire-rc",[FD]:"fire-rc-compat",[GD]:"fire-gcs",[HD]:"fire-gcs-compat",[QD]:"fire-fst",[$D]:"fire-fst-compat",[KD]:"fire-vertex","fire-js":"fire-js",[YD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Map,Qo=new Map,Ko=new Map;function Zu(s,e){try{s.container.addComponent(e)}catch(t){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function LA(s,e){s.container.addOrOverwriteComponent(e)}function $o(s){const e=s.name;if(Ko.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Ko.set(e,s);for(const t of ms.values())Zu(t,s);for(const t of Qo.values())Zu(t,s);return!0}function kA(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function WD(s,e,t=ds){kA(s,e).clearInstance(t)}function UA(s){return s.options!==void 0}function BA(s){return s==null?!1:s.settings!==void 0}function JD(){Ko.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Yf("app","Firebase",ex);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(s,e){const t=bA(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class tx extends zA{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._serverConfig.authIdToken&&bT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&bT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,gi(If,Kg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Lp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=XD;function Pp(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ds,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw nr.create("bad-app-name",{appName:String(a)});if(t||(t=DA()),!t)throw nr.create("no-options");const l=ms.get(a);if(l){if(Ho(t,l.options)&&Ho(r,l.config))return l;throw nr.create("duplicate-app",{appName:a})}const c=new NA(a);for(const m of Ko.values())c.addComponent(m);const d=new zA(t,r,c);return ms.set(a,d),d}function nx(s,e){if(Y1()&&!xA())throw nr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;UA(s)?t=s.options:t=s;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const a=p=>[...p].reduce((_,T)=>Math.imul(31,_)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw nr.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(r)),c=Qo.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new NA(l);for(const p of Ko.values())d.addComponent(p);const m=new tx(t,e,l,d);return Qo.set(l,m),m}function rx(s=ds){const e=ms.get(s);if(!e&&s===ds&&DA())return Pp();if(!e)throw nr.create("no-app",{appName:s});return e}function ix(){return Array.from(ms.values())}async function Lp(s){let e=!1;const t=s.name;ms.has(t)?(e=!0,ms.delete(t)):Qo.has(t)&&s.decRefCount()<=0&&(Qo.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function gi(s,e,t){var r;let a=(r=ZD[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(d.join(" "));return}$o(new Sa(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function qA(s,e){if(s!==null&&typeof s!="function")throw nr.create("invalid-log-argument");cD(s,e)}function jA(s){uD(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="firebase-heartbeat-database",ax=1,Wu="firebase-heartbeat-store";let Og=null;function FA(){return Og||(Og=vD(sx,ax,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(s=>{throw nr.create("idb-open",{originalErrorMessage:s.message})})),Og}async function ox(s){try{const t=(await FA()).transaction(Wu),r=await t.objectStore(Wu).get(GA(s));return await t.done,r}catch(e){if(e instanceof Pa)yi.warn(e.message);else{const t=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(t.message)}}}async function RT(s,e){try{const r=(await FA()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,GA(s)),await r.done}catch(t){if(t instanceof Pa)yi.warn(t.message);else{const r=nr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yi.warn(r.message)}}}function GA(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=1024,ux=30;class cx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=IT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>ux){const c=dx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=IT(),{heartbeatsToSend:r,unsentEntries:a}=hx(this._heartbeatsCache.heartbeats),l=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return yi.warn(t),""}}}function IT(){return new Date().toISOString().substring(0,10)}function hx(s,e=lx){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),DT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),DT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VA()?X1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ox(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return RT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return RT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function DT(s){return Sf(JSON.stringify({version:2,heartbeats:s})).length}function dx(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(s){$o(new Sa("platform-logger",e=>new AD(e),"PRIVATE")),$o(new Sa("heartbeat",e=>new cx(e),"PRIVATE")),gi(If,Kg,s),gi(If,Kg,"esm2017"),gi("fire-js","")}mx("");const gx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pa,SDK_VERSION:Mp,_DEFAULT_ENTRY_NAME:ds,_addComponent:Zu,_addOrOverwriteComponent:LA,_apps:ms,_clearComponents:JD,_components:Ko,_getProvider:kA,_isFirebaseApp:UA,_isFirebaseServerApp:BA,_registerComponent:$o,_removeServiceInstance:WD,_serverApps:Qo,deleteApp:Lp,getApp:rx,getApps:ix,initializeApp:Pp,initializeServerApp:nx,onLog:qA,registerVersion:gi,setLogLevel:jA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t){this._delegate=e,this.firebase=t,Zu(e,new Sa("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Lp(this._delegate)))}_getService(e,t=ds){var r;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((r=a.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=ds){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Zu(this._delegate,e)}_addOrOverwriteComponent(e){LA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},xT=new Yf("app-compat","Firebase",yx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:gi,setLogLevel:jA,onLog:qA,apps:null,SDK_VERSION:Mp,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:gx}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(p){delete e[p]}function a(p){if(p=p||ds,!ET(e,p))throw xT.create("no-app",{appName:p});return e[p]}a.App=s;function l(p,_={}){const T=Pp(p,_);if(ET(e,T.name))return e[T.name];const w=new s(T,t);return e[T.name]=w,w}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const _=p.name,T=_.replace("-compat","");if($o(p)&&p.type==="PUBLIC"){const w=(b=a())=>{if(typeof b[T]!="function")throw xT.create("invalid-app-argument",{appName:_});return b[T]()};p.serviceProps!==void 0&&bf(w,p.serviceProps),t[T]=w,s.prototype[T]=function(...b){return this._getService.bind(this,_).apply(this,p.multipleInstances?b:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){const s=_x(px);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:HA,extendNamespace:e,createSubscribe:eD,ErrorFactory:Yf,deepExtend:bf});function e(t){bf(s,t)}return s}const vx=HA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Np("@firebase/app-compat"),Ex="@firebase/app-compat",Tx="0.2.53";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(s){gi(Ex,Tx,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=RA();if(s.firebase!==void 0){CT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&CT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const vn=vx;Ax();var wx="firebase",Sx="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.registerVersion(wx,Sx,"app-compat");var VT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,QA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.D=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(N,M,L){for(var x=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)x[Re-2]=arguments[Re];return R.prototype[M].apply(N,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,I){I||(I=0);var N=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)N[M]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(M=0;16>M;++M)N[M]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],M=C.g[2];var L=C.g[3],x=R+(L^I&(M^L))+N[0]+3614090360&4294967295;R=I+(x<<7&4294967295|x>>>25),x=L+(M^R&(I^M))+N[1]+3905402710&4294967295,L=R+(x<<12&4294967295|x>>>20),x=M+(I^L&(R^I))+N[2]+606105819&4294967295,M=L+(x<<17&4294967295|x>>>15),x=I+(R^M&(L^R))+N[3]+3250441966&4294967295,I=M+(x<<22&4294967295|x>>>10),x=R+(L^I&(M^L))+N[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(M^R&(I^M))+N[5]+1200080426&4294967295,L=R+(x<<12&4294967295|x>>>20),x=M+(I^L&(R^I))+N[6]+2821735955&4294967295,M=L+(x<<17&4294967295|x>>>15),x=I+(R^M&(L^R))+N[7]+4249261313&4294967295,I=M+(x<<22&4294967295|x>>>10),x=R+(L^I&(M^L))+N[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(M^R&(I^M))+N[9]+2336552879&4294967295,L=R+(x<<12&4294967295|x>>>20),x=M+(I^L&(R^I))+N[10]+4294925233&4294967295,M=L+(x<<17&4294967295|x>>>15),x=I+(R^M&(L^R))+N[11]+2304563134&4294967295,I=M+(x<<22&4294967295|x>>>10),x=R+(L^I&(M^L))+N[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(M^R&(I^M))+N[13]+4254626195&4294967295,L=R+(x<<12&4294967295|x>>>20),x=M+(I^L&(R^I))+N[14]+2792965006&4294967295,M=L+(x<<17&4294967295|x>>>15),x=I+(R^M&(L^R))+N[15]+1236535329&4294967295,I=M+(x<<22&4294967295|x>>>10),x=R+(M^L&(I^M))+N[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^M&(R^I))+N[6]+3225465664&4294967295,L=R+(x<<9&4294967295|x>>>23),x=M+(R^I&(L^R))+N[11]+643717713&4294967295,M=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(M^L))+N[0]+3921069994&4294967295,I=M+(x<<20&4294967295|x>>>12),x=R+(M^L&(I^M))+N[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^M&(R^I))+N[10]+38016083&4294967295,L=R+(x<<9&4294967295|x>>>23),x=M+(R^I&(L^R))+N[15]+3634488961&4294967295,M=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(M^L))+N[4]+3889429448&4294967295,I=M+(x<<20&4294967295|x>>>12),x=R+(M^L&(I^M))+N[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^M&(R^I))+N[14]+3275163606&4294967295,L=R+(x<<9&4294967295|x>>>23),x=M+(R^I&(L^R))+N[3]+4107603335&4294967295,M=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(M^L))+N[8]+1163531501&4294967295,I=M+(x<<20&4294967295|x>>>12),x=R+(M^L&(I^M))+N[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^M&(R^I))+N[2]+4243563512&4294967295,L=R+(x<<9&4294967295|x>>>23),x=M+(R^I&(L^R))+N[7]+1735328473&4294967295,M=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(M^L))+N[12]+2368359562&4294967295,I=M+(x<<20&4294967295|x>>>12),x=R+(I^M^L)+N[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^M)+N[8]+2272392833&4294967295,L=R+(x<<11&4294967295|x>>>21),x=M+(L^R^I)+N[11]+1839030562&4294967295,M=L+(x<<16&4294967295|x>>>16),x=I+(M^L^R)+N[14]+4259657740&4294967295,I=M+(x<<23&4294967295|x>>>9),x=R+(I^M^L)+N[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^M)+N[4]+1272893353&4294967295,L=R+(x<<11&4294967295|x>>>21),x=M+(L^R^I)+N[7]+4139469664&4294967295,M=L+(x<<16&4294967295|x>>>16),x=I+(M^L^R)+N[10]+3200236656&4294967295,I=M+(x<<23&4294967295|x>>>9),x=R+(I^M^L)+N[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^M)+N[0]+3936430074&4294967295,L=R+(x<<11&4294967295|x>>>21),x=M+(L^R^I)+N[3]+3572445317&4294967295,M=L+(x<<16&4294967295|x>>>16),x=I+(M^L^R)+N[6]+76029189&4294967295,I=M+(x<<23&4294967295|x>>>9),x=R+(I^M^L)+N[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^M)+N[12]+3873151461&4294967295,L=R+(x<<11&4294967295|x>>>21),x=M+(L^R^I)+N[15]+530742520&4294967295,M=L+(x<<16&4294967295|x>>>16),x=I+(M^L^R)+N[2]+3299628645&4294967295,I=M+(x<<23&4294967295|x>>>9),x=R+(M^(I|~L))+N[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~M))+N[7]+1126891415&4294967295,L=R+(x<<10&4294967295|x>>>22),x=M+(R^(L|~I))+N[14]+2878612391&4294967295,M=L+(x<<15&4294967295|x>>>17),x=I+(L^(M|~R))+N[5]+4237533241&4294967295,I=M+(x<<21&4294967295|x>>>11),x=R+(M^(I|~L))+N[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~M))+N[3]+2399980690&4294967295,L=R+(x<<10&4294967295|x>>>22),x=M+(R^(L|~I))+N[10]+4293915773&4294967295,M=L+(x<<15&4294967295|x>>>17),x=I+(L^(M|~R))+N[1]+2240044497&4294967295,I=M+(x<<21&4294967295|x>>>11),x=R+(M^(I|~L))+N[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~M))+N[15]+4264355552&4294967295,L=R+(x<<10&4294967295|x>>>22),x=M+(R^(L|~I))+N[6]+2734768916&4294967295,M=L+(x<<15&4294967295|x>>>17),x=I+(L^(M|~R))+N[13]+1309151649&4294967295,I=M+(x<<21&4294967295|x>>>11),x=R+(M^(I|~L))+N[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~M))+N[11]+3174756917&4294967295,L=R+(x<<10&4294967295|x>>>22),x=M+(R^(L|~I))+N[2]+718787259&4294967295,M=L+(x<<15&4294967295|x>>>17),x=I+(L^(M|~R))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(M+(x<<21&4294967295|x>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var I=R-this.blockSize,N=this.B,M=this.h,L=0;L<R;){if(M==0)for(;L<=I;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<R;)if(N[M++]=C.charCodeAt(L++),M==this.blockSize){a(this,N),M=0;break}}else for(;L<R;)if(N[M++]=C[L++],M==this.blockSize){a(this,N),M=0;break}}this.h=M,this.o+=R},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var I=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.u(C),C=Array(16),R=I=0;4>R;++R)for(var N=0;32>N;N+=8)C[I++]=this.g[R]>>>N&255;return C};function l(C,R){var I=d;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function c(C,R){this.h=R;for(var I=[],N=!0,M=C.length-1;0<=M;M--){var L=C[M]|0;N&&L==R||(I[M]=L,N=!1)}this.g=I}var d={};function m(C){return-128<=C&&128>C?l(C,function(R){return new c([R|0],0>R?-1:0)}):new c([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return T;if(0>C)return k(p(-C));for(var R=[],I=1,N=0;C>=I;N++)R[N]=C/I|0,I*=4294967296;return new c(R,0)}function _(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return k(_(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(R,8)),N=T,M=0;M<C.length;M+=8){var L=Math.min(8,C.length-M),x=parseInt(C.substring(M,M+L),R);8>L?(L=p(Math.pow(R,L)),N=N.j(L).add(p(x))):(N=N.j(I),N=N.add(p(x)))}return N}var T=m(0),w=m(1),b=m(16777216);s=c.prototype,s.m=function(){if(U(this))return-k(this).m();for(var C=0,R=1,I=0;I<this.g.length;I++){var N=this.i(I);C+=(0<=N?N:4294967296+N)*R,R*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(U(this))return"-"+k(this).toString(C);for(var R=p(Math.pow(C,6)),I=this,N="";;){var M=pe(I,R).g;I=H(I,M.j(R));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=M,V(I))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function U(C){return C.h==-1}s.l=function(C){return C=H(this,C),U(C)?-1:V(C)?0:1};function k(C){for(var R=C.g.length,I=[],N=0;N<R;N++)I[N]=~C.g[N];return new c(I,~C.h).add(w)}s.abs=function(){return U(this)?k(this):this},s.add=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],N=0,M=0;M<=R;M++){var L=N+(this.i(M)&65535)+(C.i(M)&65535),x=(L>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);N=x>>>16,L&=65535,x&=65535,I[M]=x<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function H(C,R){return C.add(k(R))}s.j=function(C){if(V(this)||V(C))return T;if(U(this))return U(C)?k(this).j(k(C)):k(k(this).j(C));if(U(C))return k(this.j(k(C)));if(0>this.l(b)&&0>C.l(b))return p(this.m()*C.m());for(var R=this.g.length+C.g.length,I=[],N=0;N<2*R;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<C.g.length;M++){var L=this.i(N)>>>16,x=this.i(N)&65535,Re=C.i(M)>>>16,Ce=C.i(M)&65535;I[2*N+2*M]+=x*Ce,re(I,2*N+2*M),I[2*N+2*M+1]+=L*Ce,re(I,2*N+2*M+1),I[2*N+2*M+1]+=x*Re,re(I,2*N+2*M+1),I[2*N+2*M+2]+=L*Re,re(I,2*N+2*M+2)}for(N=0;N<R;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=R;N<2*R;N++)I[N]=0;return new c(I,0)};function re(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function Z(C,R){this.g=C,this.h=R}function pe(C,R){if(V(R))throw Error("division by zero");if(V(C))return new Z(T,T);if(U(C))return R=pe(k(C),R),new Z(k(R.g),k(R.h));if(U(R))return R=pe(C,k(R)),new Z(k(R.g),R.h);if(30<C.g.length){if(U(C)||U(R))throw Error("slowDivide_ only works with positive integers.");for(var I=w,N=R;0>=N.l(C);)I=le(I),N=le(N);var M=ge(I,1),L=ge(N,1);for(N=ge(N,2),I=ge(I,2);!V(N);){var x=L.add(N);0>=x.l(C)&&(M=M.add(I),L=x),N=ge(N,1),I=ge(I,1)}return R=H(C,M.j(R)),new Z(M,R)}for(M=T;0<=C.l(R);){for(I=Math.max(1,Math.floor(C.m()/R.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=p(I),x=L.j(R);U(x)||0<x.l(C);)I-=N,L=p(I),x=L.j(R);V(L)&&(L=w),M=M.add(L),C=H(C,x)}return new Z(M,C)}s.A=function(C){return pe(this,C).h},s.and=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)&C.i(N);return new c(I,this.h&C.h)},s.or=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)|C.i(N);return new c(I,this.h|C.h)},s.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)^C.i(N);return new c(I,this.h^C.h)};function le(C){for(var R=C.g.length+1,I=[],N=0;N<R;N++)I[N]=C.i(N)<<1|C.i(N-1)>>>31;return new c(I,C.h)}function ge(C,R){var I=R>>5;R%=32;for(var N=C.g.length-I,M=[],L=0;L<N;L++)M[L]=0<R?C.i(L+I)>>>R|C.i(L+I+1)<<32-R:C.i(L+I);return new c(M,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,us=c}).apply(typeof VT<"u"?VT:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KA,Bu,$A,df,$g,YA,XA,ZA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in v))break e;v=v[z]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,S=!1,z={next:function(){if(!S&&v<h.length){var Y=v++;return{value:y(Y,h[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),h.apply(y,z)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function b(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function V(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,z,Y){for(var oe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)oe[qe-2]=arguments[qe];return y.prototype[z].apply(S,oe)}}function U(h){const y=h.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function k(h,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const z=h.length||0,Y=S.length||0;h.length=z+Y;for(let oe=0;oe<Y;oe++)h[z+oe]=S[oe]}else h.push(S)}}class H{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function pe(h){return pe[" "](h),h}pe[" "]=function(){};var le=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ge(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function C(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function R(h){const y={};for(const v in h)y[v]=h[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)h[v]=S[v];for(let Y=0;Y<I.length;Y++)v=I[Y],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function M(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function L(h){d.setTimeout(()=>{throw h},0)}function x(){var h=He;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Re{constructor(){this.h=this.g=null}add(y,v){const S=Ce.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Ce=new H(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Ee=!1,He=new Re,O=()=>{const h=d.Promise.resolve(void 0);ue=()=>{h.then(ne)}};var ne=()=>{for(var h;h=x();){try{h.h.call(h.g)}catch(v){L(v)}var y=Ce;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Ee=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function de(h,y){if(ae.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(le){e:{try{pe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&de.aa.h.call(this)}}V(de,ae);var ce={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function xt(h,y,v,S,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++Oe,this.da=this.fa=!1}function Sn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function rn(h){this.src=h,this.g={},this.h=0}rn.prototype.add=function(h,y,v,S,z){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var oe=ir(h,y,S,z);return-1<oe?(y=h[oe],v||(y.fa=!1)):(y=new xt(y,this.src,Y,!!S,z),y.fa=v,h.push(y)),y};function rr(h,y){var v=y.type;if(v in h.g){var S=h.g[v],z=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=z)&&Array.prototype.splice.call(S,z,1),Y&&(Sn(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function ir(h,y,v,S){for(var z=0;z<h.length;++z){var Y=h[z];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==S)return z}return-1}var qr="closure_lm_"+(1e6*Math.random()|0),Ri={};function xs(h,y,v,S,z){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)xs(h,y[Y],v,S,z);return null}return v=Vs(v),h&&h[Pe]?h.K(y,v,p(S)?!!S.capture:!1,z):fn(h,y,v,!1,S,z)}function fn(h,y,v,S,z,Y){if(!y)throw Error("Invalid event type");var oe=p(z)?!!z.capture:!!z,qe=dn(h);if(qe||(h[qr]=qe=new rn(h)),v=qe.add(y,v,S,oe,Y),v.proxy)return v;if(S=Cs(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)we||(z=oe),z===void 0&&(z=!1),h.addEventListener(y.toString(),S,z);else if(h.attachEvent)h.attachEvent(bn(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Cs(){function h(v){return y.call(h.src,h.listener,v)}const y=Sl;return h}function fr(h,y,v,S,z){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)fr(h,y[Y],v,S,z);else S=p(S)?!!S.capture:!!S,v=Vs(v),h&&h[Pe]?(h=h.i,y=String(y).toString(),y in h.g&&(Y=h.g[y],v=ir(Y,v,S,z),-1<v&&(Sn(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete h.g[y],h.h--)))):h&&(h=dn(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ir(y,v,S,z)),(v=-1<h?y[h]:null)&&dr(v))}function dr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Pe])rr(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(bn(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=dn(y))?(rr(v,h),v.h==0&&(v.src=null,y[qr]=null)):Sn(h)}}}function bn(h){return h in Ri?Ri[h]:Ri[h]="on"+h}function Sl(h,y){if(h.da)h=!0;else{y=new de(y,this);var v=h.listener,S=h.ha||h.src;h.fa&&dr(h),h=v.call(S,y)}return h}function dn(h){return h=h[qr],h instanceof rn?h:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vs(h){return typeof h=="function"?h:(h[vt]||(h[vt]=function(y){return h.handleEvent(y)}),h[vt])}function ut(){fe.call(this),this.i=new rn(this),this.M=this,this.F=null}V(ut,fe),ut.prototype[Pe]=!0,ut.prototype.removeEventListener=function(h,y,v,S){fr(this,h,y,v,S)};function $e(h,y){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new ae(y,h);else if(y instanceof ae)y.target=y.target||h;else{var z=y;y=new ae(S,h),N(y,z)}if(z=!0,v)for(var Y=v.length-1;0<=Y;Y--){var oe=y.g=v[Y];z=mn(oe,S,!0,y)&&z}if(oe=y.g=h,z=mn(oe,S,!0,y)&&z,z=mn(oe,S,!1,y)&&z,v)for(Y=0;Y<v.length;Y++)oe=y.g=v[Y],z=mn(oe,S,!1,y)&&z}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],S=0;S<v.length;S++)Sn(v[S]);delete h.g[y],h.h--}}this.F=null},ut.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},ut.prototype.L=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function mn(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Y=0;Y<y.length;++Y){var oe=y[Y];if(oe&&!oe.da&&oe.capture==v){var qe=oe.listener,kt=oe.ha||oe.src;oe.fa&&rr(h.i,oe),z=qe.call(kt,S)!==!1&&z}}return z&&!S.defaultPrevented}function sn(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Mc(h){h.g=sn(()=>{h.g=null,h.i&&(h.i=!1,Mc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class wd extends fe{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Mc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ns(h){fe.call(this),this.h=h,this.g={}}V(Ns,fe);var Os=[];function Ms(h){ge(h.g,function(y,v){this.g.hasOwnProperty(v)&&dr(y)},h),h.g={}}Ns.prototype.N=function(){Ns.aa.N.call(this),Ms(this)},Ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,za=d.JSON.parse,Ps=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function bl(){}bl.prototype.h=null;function Rl(h){return h.h||(h.h=h.i())}function Il(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){ae.call(this,"d")}V(Fr,ae);function Dl(){ae.call(this,"c")}V(Dl,ae);var mr={},xl=null;function Ii(){return xl=xl||new ut}mr.La="serverreachability";function qa(h){ae.call(this,mr.La,h)}V(qa,ae);function Di(h){const y=Ii();$e(y,new qa(y))}mr.STAT_EVENT="statevent";function Pc(h,y){ae.call(this,mr.STAT_EVENT,h),this.stat=y}V(Pc,ae);function ct(h){const y=Ii();$e(y,new Pc(y,h))}mr.Ma="timingevent";function Lt(h,y){ae.call(this,mr.Ma,h),this.size=y}V(Lt,ae);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Cl(h,y,v,S,z,Y){h.info(function(){if(h.g)if(Y)for(var oe="",qe=Y.split("&"),kt=0;kt<qe.length;kt++){var je=qe[kt].split("=");if(1<je.length){var Ft=je[0];je=je[1];var Ut=Ft.split("_");oe=2<=Ut.length&&Ut[1]=="type"?oe+(Ft+"="+je+"&"):oe+(Ft+"=redacted&")}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+oe})}function Sd(h,y,v,S,z,Y,oe){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+Y+" "+oe})}function xi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ls(h,v)+(S?" "+S:"")})}function Lc(h,y){h.info(function(){return"TIMEOUT: "+y})}Fn.prototype.info=function(){};function Ls(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var Y=z[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return sr(v)}catch{return y}}var Ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gr;function pr(){}V(pr,bl),pr.prototype.g=function(){return new XMLHttpRequest},pr.prototype.i=function(){return{}},gr=new pr;function gn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.R=S||1,this.U=new Ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var Vl={},ja={};function ar(h,y,v){h.L=1,h.v=qs(Nn(y)),h.m=v,h.P=!0,Hr(h,null)}function Hr(h,y){h.F=Date.now(),ks(h),h.A=Nn(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),kl(v.i,"t",S),h.C=0,v=h.j.J,h.h=new wt,h.g=Wc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new wd(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,S=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Os[0]=z.toString()),z=Os);for(var Y=0;Y<z.length;Y++){var oe=xs(v,z[Y],S||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Di(),Cl(h.i,h.u,h.A,h.l,h.R,h.m)}gn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Kn(h)==3?y.j():this.Y(h)},gn.prototype.Y=function(h){try{if(h==this.g)e:{const Ut=Kn(this.g);var y=this.g.Ba();const Jr=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Gc(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=Jr?Di(3):Di(2)),Vi(this);var v=this.g.Z();this.X=v;t:if(kc(this)){var S=Gc(this.g);h="";var z=S.length,Y=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),yr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Y&&y==z-1)});S.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,Sd(this.i,this.u,this.A,this.l,this.R,Ut,v),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,kt=this.g;if((qe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(qe)){var je=qe;break t}}je=null}if(v=je)xi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,v);else{this.o=!1,this.s=3,ct(12),Yt(this),yr(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<oe.length;)if(Xt=Uc(this,oe),Xt==ja){Ut==4&&(this.s=4,ct(14),v=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Vl){this.s=4,ct(15),xi(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else xi(this.i,this.l,Xt,null),Us(this,Xt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||oe.length!=0||this.h.h||(this.s=1,ct(16),v=!1),this.o=this.o&&v,!v)xi(this.i,this.l,oe,"[Invalid Chunked Response]"),Yt(this),yr(this);else if(0<oe.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Ys(Ft),Ft.M=!0,ct(11))}}else xi(this.i,this.l,oe,null),Us(this,oe);Ut==4&&Yt(this),this.o&&!this.J&&(Ut==4?Yc(this.j,this):(this.o=!1,ks(this)))}else xd(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Yt(this),yr(this)}}}catch{}finally{}};function kc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Uc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?ja:(v=Number(y.substring(v,S)),isNaN(v)?Vl:(S+=1,S+v>y.length?ja:(y=y.slice(S,S+v),h.C=S+v,y)))}gn.prototype.cancel=function(){this.J=!0,Yt(this)};function ks(h){h.S=Date.now()+h.I,Bc(h,h.I)}function Bc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ct(w(h.ba,h),y)}function Vi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}gn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Lc(this.i,this.A),this.L!=2&&(Di(),ct(17)),Yt(this),this.s=2,yr(this)):Bc(this,this.S-h)};function yr(h){h.j.G==0||h.J||Yc(h.j,h)}function Yt(h){Vi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ms(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Us(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Nl(v.h,h))){if(!h.K&&Nl(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)eo(v),Wa(v);else break e;jl(v),ct(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ct(w(v.Za,v),6e3));if(1>=Ga(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Wr(v,11)}else if((h.K||v.g==h)&&eo(v),!re(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let je=z[y];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Ft=je[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Ut=je[4];Ut!=null&&(v.Aa=Ut,v.j.info("SVER="+v.Aa));const Jr=je[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(S=1.5*Jr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Xt=h.g;if(Xt){const Sr=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sr){var Y=S.h;Y.g||Sr.indexOf("spdy")==-1&&Sr.indexOf("quic")==-1&&Sr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ha(Y,Y.h),Y.h=null))}if(S.D){const Gl=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gl&&(S.ya=Gl,tt(S.I,S.D,Gl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var oe=h;if(S.qa=Zc(S,S.J?S.ia:null,S.W),oe.K){pn(S.h,oe);var qe=oe,kt=S.L;kt&&(qe.I=kt),qe.B&&(Vi(qe),ks(qe)),S.g=oe}else Kc(S);0<v.i.length&&Ja(v)}else je[0]!="stop"&&je[0]!="close"||Wr(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Wr(v,7):zl(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}Di(4)}catch{}}var zc=class{constructor(h,y){this.g=h,this.map=y}};function Qr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ga(h){return h.h?1:h.g?h.g.size:0}function Nl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ha(h,y){h.g?h.g.add(y):h.h=y}function pn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Qr.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ol(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return U(h.i)}function bd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,S=0;S<v;S++)y.push(h[S]);return y}y=[],v=0;for(S in h)y[v++]=h[S];return y}function Qa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const S in h)y[v++]=S;return y}}}function Ml(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Qa(h),S=bd(h),z=S.length,Y=0;Y<z;Y++)y.call(void 0,S[Y],v&&v[Y],h)}var Bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),z=null;if(0<=S){var Y=h[v].substring(0,S);z=h[v].substring(S+1)}else Y=h[v];y(Y,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Vt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Vt){this.h=h.h,zs(this,h.j),this.o=h.o,this.g=h.g,Ni(this,h.s),this.l=h.l;var y=h.i,v=new $r;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Kr(this,v),this.m=h.m}else h&&(y=String(h).match(Bs))?(this.h=!1,zs(this,y[1]||"",!0),this.o=Gn(y[2]||""),this.g=Gn(y[3]||"",!0),Ni(this,y[4]),this.l=Gn(y[5]||"",!0),Kr(this,y[6]||"",!0),this.m=Gn(y[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}Vt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(js(y,Pl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(js(y,Pl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(js(v,v.charAt(0)=="/"?Id:Ll,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",js(v,Ka)),h.join("")};function Nn(h){return new Vt(h)}function zs(h,y,v){h.j=v?Gn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ni(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Kr(h,y,v){y instanceof $r?(h.i=y,jc(h.i,h.h)):(v||(y=js(y,Dd)),h.i=new $r(y,h.h))}function tt(h,y,v){h.i.set(y,v)}function qs(h){return tt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Gn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,qc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Pl=/[#\/\?@]/g,Ll=/[#\?:]/g,Id=/[#\?]/g,Dd=/[#\?@]/g,Ka=/#/g;function $r(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Rd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=$r.prototype,s.add=function(h,y){Hn(this),this.i=null,h=_r(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Yr(h,y){Hn(h),y=_r(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Xr(h,y){return Hn(h),y=_r(h,y),h.g.has(y)}s.forEach=function(h,y){Hn(this),this.g.forEach(function(v,S){v.forEach(function(z){h.call(y,z,S,this)},this)},this)},s.na=function(){Hn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const z=h[S];for(let Y=0;Y<z.length;Y++)v.push(y[S])}return v},s.V=function(h){Hn(this);let y=[];if(typeof h=="string")Xr(this,h)&&(y=y.concat(this.g.get(_r(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},s.set=function(h,y){return Hn(this),this.i=null,h=_r(this,h),Xr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function kl(h,y,v){Yr(h,y),0<v.length&&(h.i=null,h.g.set(_r(h,y),U(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Y=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var z=Y;oe[S]!==""&&(z+="="+encodeURIComponent(String(oe[S]))),h.push(z)}}return this.i=h.join("&")};function _r(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function jc(h,y){y&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(v,S){var z=S.toLowerCase();S!=z&&(Yr(this,S),kl(this,z,v))},h)),h.j=y}function Fs(h,y){const v=new Fn;if(d.Image){const S=new Image;S.onload=b(Qn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=b(Qn,v,"TestLoadImage: error",!1,y,S),S.onabort=b(Qn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(Qn,v,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function or(h,y){const v=new Fn,S=new AbortController,z=setTimeout(()=>{S.abort(),Qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Y=>{clearTimeout(z),Y.ok?Qn(v,"TestPingServer: ok",!0,y):Qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Qn(v,"TestPingServer: error",!1,y)})}function Qn(h,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function Gs(){this.g=new Ps}function vr(h,y,v){const S=v||"";try{Ml(h,function(z,Y){let oe=z;p(z)&&(oe=sr(z)),y.push(S+Y+"="+encodeURIComponent(oe))})}catch(z){throw y.push(S+"type="+encodeURIComponent("_badmap")),z}}function Oi(h){this.l=h.Ub||null,this.j=h.eb||!1}V(Oi,bl),Oi.prototype.g=function(){return new Zr(this.l,this.j)},Oi.prototype.i=function(h){return function(){return h}}({});function Zr(h,y){ut.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Zr,ut),s=Zr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Tr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Er(this):Tr(this),this.readyState==3&&Ul(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,Er(this))},s.Qa=function(h){this.g&&(this.response=h,Er(this))},s.ga=function(){this.g&&Er(this)};function Er(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Tr(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bl(h){let y="";return ge(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function jt(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Bl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):tt(h,y,v))}function Xe(h){ut.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Xe,ut);var $a=/^https?$/i,Hs=["POST","PUT"];s=Xe.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gr.g(),this.v=this.o?Rl(this.o):Rl(gr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Fc(this,Y);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())v.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Hs,y,void 0))||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of v)this.g.setRequestHeader(Y,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){Fc(this,Y)}};function Fc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Ya(h),Ar(h)}function Ya(h){h.A||(h.A=!0,$e(h,"complete"),$e(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,$e(this,"complete"),$e(this,"abort"),Ar(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),Xe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Xa(this):this.bb())},s.bb=function(){Xa(this)};function Xa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Kn(h)!=4||h.Z()!=2)){if(h.u&&Kn(h)==4)sn(h.Ea,0,h);else if($e(h,"readystatechange"),Kn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=oe===0){var z=String(h.D).match(Bs)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),S=!$a.test(z?z.toLowerCase():"")}v=S}if(v)$e(h,"complete"),$e(h,"success");else{h.m=6;try{var Y=2<Kn(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",Ya(h)}}finally{Ar(h)}}}}function Ar(h,y){if(h.g){Qs(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||$e(h,"ready");try{v.onreadystatechange=S}catch{}}}function Qs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function Kn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),za(y)}};function Gc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(h){const y={};h=(h.g&&2<=Kn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(re(h[S]))continue;var v=M(h[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[z]||[];y[z]=Y,Y.push(v)}C(y,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Za(h){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,h),this.cb=Ks("retryDelaySeedMs",1e4,h),this.Wa=Ks("forwardChannelMaxRetries",2,h),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(h&&h.concurrentRequestLimit),this.Da=new Gs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Za.prototype,s.la=8,s.G=1,s.connect=function(h,y,v,S){ct(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Zc(this,null,this.W),Ja(this)};function zl(h){if(Hc(h),h.G==3){var y=h.U++,v=Nn(h.I);if(tt(v,"SID",h.K),tt(v,"RID",y),tt(v,"TYPE","terminate"),$s(h,v),y=new gn(h,h.j,y),y.L=2,y.v=qs(Nn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Wc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ks(y)}Xc(h)}function Wa(h){h.g&&(Ys(h),h.g.cancel(),h.g=null)}function Hc(h){Wa(h),h.u&&(d.clearTimeout(h.u),h.u=null),eo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ja(h){if(!Fa(h.h)&&!h.s){h.s=!0;var y=h.Ga;ue||O(),Ee||(ue(),Ee=!0),He.add(y,h),h.B=0}}function Cd(h,y){return Ga(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ct(w(h.Ga,h,y),Fl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new gn(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=R(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(z.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Qc(this,z,y),v=Nn(this.I),tt(v,"RID",h),tt(v,"CVER",22),this.D&&tt(v,"X-HTTP-Session-Id",this.D),$s(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(Bl(Y)))+"&"+y:this.m&&jt(v,this.m,Y)),Ha(this.h,z),this.Ua&&tt(v,"TYPE","init"),this.P?(tt(v,"$req",y),tt(v,"SID","null"),z.T=!0,ar(z,v,null)):ar(z,v,y),this.G=2}}else this.G==3&&(h?ql(this,h):this.i.length==0||Fa(this.h)||ql(this))};function ql(h,y){var v;y?v=y.l:v=h.U++;const S=Nn(h.I);tt(S,"SID",h.K),tt(S,"RID",v),tt(S,"AID",h.T),$s(h,S),h.m&&h.o&&jt(S,h.m,h.o),v=new gn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Qc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ha(h.h,v),ar(v,S,y)}function $s(h,y){h.H&&ge(h.H,function(v,S){tt(y,S,v)}),h.l&&Ml({},function(v,S){tt(y,S,v)})}function Qc(h,y,v){v=Math.min(h.i.length,v);var S=h.l?w(h.l.Na,h.l,h):null;e:{var z=h.i;let Y=-1;for(;;){const oe=["count="+v];Y==-1?0<v?(Y=z[0].g,oe.push("ofs="+Y)):Y=0:oe.push("ofs="+Y);let qe=!0;for(let kt=0;kt<v;kt++){let je=z[kt].g;const Ft=z[kt].map;if(je-=Y,0>je)Y=Math.max(0,z[kt].g-100),qe=!1;else try{vr(Ft,oe,"req"+je+"_")}catch{S&&S(Ft)}}if(qe){S=oe.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,S}function Kc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ue||O(),Ee||(ue(),Ee=!0),He.add(y,h),h.v=0}}function jl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ct(w(h.Fa,h),Fl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,$c(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ct(w(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Wa(this),$c(this))};function Ys(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function $c(h){h.g=new gn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Nn(h.qa);tt(y,"RID","rpc"),tt(y,"SID",h.K),tt(y,"AID",h.T),tt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&tt(y,"TO",h.ja),tt(y,"TYPE","xmlhttp"),$s(h,y),h.m&&h.o&&jt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=qs(Nn(y)),v.m=null,v.P=!0,Hr(v,h)}s.Za=function(){this.C!=null&&(this.C=null,Wa(this),jl(this),ct(19))};function eo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Yc(h,y){var v=null;if(h.g==y){eo(h),Ys(h),h.g=null;var S=2}else if(Nl(h.h,y))v=y.D,pn(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=h.B;S=Ii(),$e(S,new Lt(S,v)),Ja(h)}else Kc(h);else if(z=y.s,z==3||z==0&&0<y.X||!(S==1&&Cd(h,y)||S==2&&jl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Wr(h,5);break;case 4:Wr(h,10);break;case 3:Wr(h,6);break;default:Wr(h,2)}}}function Fl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Wr(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),S=h.Xa;const z=!S;S=new Vt(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||zs(S,"https"),qs(S),z?Fs(S.toString(),v):or(S.toString(),v)}else ct(2);h.G=0,h.l&&h.l.sa(y),Xc(h),Hc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Xc(h){if(h.G=0,h.ka=[],h.l){const y=Ol(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ka,y),k(h.ka,h.i),h.h.i.length=0,U(h.i),h.i.length=0),h.l.ra()}}function Zc(h,y,v){var S=v instanceof Vt?Nn(v):new Vt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ni(S,S.s);else{var z=d.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Y=new Vt(null);S&&zs(Y,S),y&&(Y.g=y),z&&Ni(Y,z),v&&(Y.l=v),S=Y}return v=h.D,y=h.ya,v&&y&&tt(S,v,y),tt(S,"VER",h.la),$s(h,S),S}function Wc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Xe(new Oi({eb:v})):new Xe(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function to(){}to.prototype.g=function(h,y){return new yn(h,y)};function yn(h,y){ut.call(this),this.g=new Za(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!re(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new wr(this)}V(yn,ut),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){zl(this.g)},yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=sr(h),h=v);y.i.push(new zc(y.Ya++,h)),y.G==3&&Ja(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,yn.aa.N.call(this)};function eh(h){Fr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}V(eh,Fr);function th(){Dl.call(this),this.status=1}V(th,Dl);function wr(h){this.g=h}V(wr,Jc),wr.prototype.ua=function(){$e(this.g,"a")},wr.prototype.ta=function(h){$e(this.g,new eh(h))},wr.prototype.sa=function(h){$e(this.g,new th)},wr.prototype.ra=function(){$e(this.g,"b")},to.prototype.createWebChannel=to.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,ZA=function(){return new to},XA=function(){return Ii()},YA=mr,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,df=Ci,Gr.COMPLETE="complete",$A=Gr,Il.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Bu=Il,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,KA=Xe}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const NT="@firebase/firestore",OT="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Np("@firebase/firestore");function Uo(){return gs.logLevel}function bx(s){gs.setLogLevel(s)}function se(s,...e){if(gs.logLevel<=ze.DEBUG){const t=e.map(kp);gs.debug(`Firestore (${pl}): ${s}`,...t)}}function Rt(s,...e){if(gs.logLevel<=ze.ERROR){const t=e.map(kp);gs.error(`Firestore (${pl}): ${s}`,...t)}}function kr(s,...e){if(gs.logLevel<=ze.WARN){const t=e.map(kp);gs.warn(`Firestore (${pl}): ${s}`,...t)}}function kp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(s="Unexpected state"){const e=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: `+s;throw Rt(e),new Error(e)}function ve(s,e){s||ye()}function Rx(s,e){s||ye()}function me(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ix{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($t.UNAUTHENTICATED))}shutdown(){}}class Dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xx{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new nn,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new nn)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new WA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new $t(e)}}class Cx{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Vx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Cx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nx{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,BA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0);const r=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new MT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new MT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Ox(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ie(s,e){return s<e?-1:s>e?1:0}function Yg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ie(r,a);{const l=Up(),c=Mx(l.encode(PT(s,t)),l.encode(PT(e,t)));return c!==0?c:Ie(r,a)}}t+=r>65535?2:1}return Ie(s.length,e.length)}function PT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function Mx(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Ie(s[t],e[t]);return Ie(s.length,e.length)}function Yo(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function ew(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,kT=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kT);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<LT)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kT}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new gt(0,0))}static max(){return new Te(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__name__";class Cr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(),r===void 0?r=e.length-t:r>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Cr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ie(e.length,t.length)}static compareSegments(e,t){const r=Cr.isNumericId(e),a=Cr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):Yg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class Ue extends Cr{construct(e,t,r){return new Ue(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Ue(t)}static emptyPath(){return new Ue([])}}const Px=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Cr{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return Px.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UT}static keyField(){return new dt([UT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ie($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ie($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ue.fromString(e))}static fromName(e){return new he(Ue.fromString(e).popFirst(5))}static empty(){return new he(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;class Df{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Xg(s){return s.fields.find(e=>e.kind===2)}function da(s){return s.fields.filter(e=>e.kind!==2)}Df.UNKNOWN_ID=-1;class mf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ju{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ju(0,jn.min())}}function tw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new jn(a,he.empty(),e)}function nw(s){return new jn(s.readTime,s.key,Xo)}class jn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new jn(Te.min(),he.empty(),Xo)}static max(){return new jn(Te.max(),he.empty(),Xo)}}function Bp(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(s.documentKey,e.documentKey),t!==0?t:Ie(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==rw)throw s;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(a=>a?q.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new q((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new q((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="SimpleDb";class Xf{static open(e,t,r,a){try{return new Xf(t,e.transaction(a,r))}catch(l){throw new Fu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new nn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Fu(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const a=zp(r.target.error);this.m.reject(new Fu(e,a))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(se(zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kx(t)}}class Mr{static delete(e){return se(zn,"Removing database:",e),ga(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!VA())return!1;if(Mr.v())return!0;const e=Rf(),t=Mr.C(e),r=0<t&&t<10,a=sw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Mr.C(Rf())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(se(zn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ie($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Fu(e,c))},a.onupgradeneeded=l=>{se(zn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.O.B(c,a.transaction,l.oldVersion,this.version).next(()=>{se(zn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.N(e);const d=Xf.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(p=>(d.S(),p)).catch(p=>(d.abort(p),q.reject(p))).toPromise();return m.catch(()=>{}),await d.p,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(se(zn,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Lx{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return ga(this.q.delete())}}class Fu extends ie{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bs(s){return s.name==="IndexedDbTransactionError"}class kx{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se(zn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(se(zn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ga(r)}add(e){return se(zn,"ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next(t=>(t===void 0&&(t=null),se(zn,"GET",this.store.name,e,t),t))}delete(e){return se(zn,"DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return se(zn,"COUNT",this.store.name),ga(this.store.count())}G(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new q((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.j(l,(d,m)=>{c.push(m)}).next(()=>c)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new q((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}J(e,t){se(zn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.j(a,(l,c,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.j(a,t)}X(e){const t=this.cursor({});return new q((r,a)=>{t.onerror=l=>{const c=zp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}j(e,t){const r=[];return new q((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new Lx(d),p=t(d.primaryKey,d.value,m);if(p instanceof q){const _=p.catch(T=>(m.done(),q.reject(T)));r.push(_)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(s){return new q((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=zp(r.target.error);t(a)}})}let BT=!1;function zp(s){const e=Mr.C(Rf());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BT||(BT=!0,setTimeout(()=>{throw r},0)),r}}return s}const Gu="IndexBackfiller";class Ux{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){se(Gu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();se(Gu,`Documents written: ${t}`)}catch(t){bs(t)?se(Gu,"Ignoring IndexedDB error during index backfill: ",t):await Ss(t)}await this.te(6e4)})}}class Bx{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let a=t,l=!0;return q.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return se(Gu,`Processing collection: ${c}`),this.ie(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.se(a,l)).next(d=>(se(Gu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}se(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=nw(l);Bp(c,r)>0&&(r=c)}),new jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=-1;function vc(s){return s==null}function ec(s){return s===0&&1/s==-1/0}function aw(s){return typeof s=="number"&&Number.isInteger(s)&&!ec(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="";function cn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=zT(e)),e=zx(s.get(t),e);return zT(e)}function zx(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case xf:t+="";break;default:t+=l}}return t}function zT(s){return s+xf+""}function Nr(s){const e=s.length;if(ve(e>=2),e===2)return ve(s.charAt(0)===xf&&s.charAt(1)===""),Ue.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=s.indexOf(xf,l);switch((c<0||c>t)&&ye(),s.charAt(c+1)){case"":const d=s.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=s.substring(l,c),a+="\0";break;case"":a+=s.substring(l,c+1);break;default:ye()}l=c+2}return new Ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="remoteDocuments",Ec="owner",Vo="owner",tc="mutationQueues",qx="userId",hr="mutations",qT="batchId",Ea="userMutationsIndex",jT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(s,e){return[s,cn(e)]}function ow(s,e,t){return[s,cn(e),t]}const jx={},Zo="documentMutations",Cf="remoteDocumentsV14",Fx=["prefixPath","collectionGroup","readTime","documentId"],pf="documentKeyIndex",Gx=["prefixPath","collectionGroup","documentId"],lw="collectionGroupIndex",Hx=["collectionGroup","readTime","prefixPath","documentId"],nc="remoteDocumentGlobal",Zg="remoteDocumentGlobalKey",Wo="targets",uw="queryTargetsIndex",Qx=["canonicalId","targetId"],Jo="targetDocuments",Kx=["targetId","path"],qp="documentTargetsIndex",$x=["path","targetId"],Vf="targetGlobalKey",wa="targetGlobal",rc="collectionParents",Yx=["collectionId","parent"],el="clientMetadata",Xx="clientId",Zf="bundles",Zx="bundleId",Wf="namedQueries",Wx="name",jp="indexConfiguration",Jx="indexId",Wg="collectionGroupIndex",eC="collectionGroup",Nf="indexState",tC=["indexId","uid"],cw="sequenceNumberIndex",nC=["uid","sequenceNumber"],Of="indexEntries",rC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hw="documentKeyIndex",iC=["indexId","uid","orderedDocumentKey"],Jf="documentOverlays",sC=["userId","collectionPath","documentId"],Jg="collectionPathOverlayIndex",aC=["userId","collectionPath","largestBatchId"],fw="collectionGroupOverlayIndex",oC=["userId","collectionGroup","largestBatchId"],Fp="globals",lC="name",dw=[tc,hr,Zo,ma,Wo,Ec,wa,Jo,el,nc,rc,Zf,Wf],uC=[...dw,Jf],mw=[tc,hr,Zo,Cf,Wo,Ec,wa,Jo,el,nc,rc,Zf,Wf,Jf],gw=mw,Gp=[...gw,jp,Nf,Of],cC=Gp,hC=[...Gp,Fp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends iw{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function qt(s,e){const t=me(s);return Mr.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Rs(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function pw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new en(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,r,a,l){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GT(this.data.getIterator())}getIteratorFrom(e){return new GT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class GT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new et(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new yw("Invalid base64 string: "+l):l}}(e);return new At(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new At(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const dC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(s){if(ve(!!s),typeof s=="string"){let e=0;const t=dC.exec(s);if(ve(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(s.seconds),nanos:ft(s.nanos)}}function ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function vi(s){return typeof s=="string"?At.fromBase64String(s):At.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="server_timestamp",vw="__type__",Ew="__previous_value__",Tw="__local_write_time__";function ed(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[vw])===null||t===void 0?void 0:t.stringValue)===_w}function td(s){const e=s.mapValue.fields[Ew];return ed(e)?td(e):e}function ic(s){const e=_i(s.mapValue.fields[Tw].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,r,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}const tp="(default)";class ps{constructor(e,t){this.projectId=e,this.database=t||tp}static empty(){return new ps("","")}get isDefaultDatabase(){return this.database===tp}isEqual(e){return e instanceof ps&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="__type__",Aw="__max__",as={mapValue:{fields:{__type__:{stringValue:Aw}}}},Qp="__vector__",tl="value",yf={nullValue:"NULL_VALUE"};function ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ed(s)?4:ww(s)?9007199254740991:nd(s)?10:11:ye()}function Ur(s,e){if(s===e)return!0;const t=ys(s);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ic(s).isEqual(ic(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=_i(a.timestampValue),d=_i(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,l){return vi(a.bytesValue).isEqual(vi(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,l){return ft(a.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(l.geoPointValue.longitude)}(s,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ft(a.integerValue)===ft(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ft(a.doubleValue),d=ft(l.doubleValue);return c===d?ec(c)===ec(d):isNaN(c)&&isNaN(d)}return!1}(s,e);case 9:return Yo(s.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(FT(c)!==FT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ur(c[m],d[m])))return!1;return!0}(s,e);default:return ye()}}function sc(s,e){return(s.values||[]).find(t=>Ur(t,e))!==void 0}function _s(s,e){if(s===e)return 0;const t=ys(s),r=ys(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(s.booleanValue,e.booleanValue);case 2:return function(l,c){const d=ft(l.integerValue||l.doubleValue),m=ft(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(s,e);case 3:return HT(s.timestampValue,e.timestampValue);case 4:return HT(ic(s),ic(e));case 5:return Yg(s.stringValue,e.stringValue);case 6:return function(l,c){const d=vi(l),m=vi(c);return d.compareTo(m)}(s.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Ie(d[p],m[p]);if(_!==0)return _}return Ie(d.length,m.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ie(ft(l.latitude),ft(c.latitude));return d!==0?d:Ie(ft(l.longitude),ft(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return QT(s.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},w=c.fields||{},b=(d=T[tl])===null||d===void 0?void 0:d.arrayValue,V=(m=w[tl])===null||m===void 0?void 0:m.arrayValue,U=Ie(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((_=V==null?void 0:V.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:QT(b,V)}(s.mapValue,e.mapValue);case 11:return function(l,c){if(l===as.mapValue&&c===as.mapValue)return 0;if(l===as.mapValue)return 1;if(c===as.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const w=Yg(m[T],_[T]);if(w!==0)return w;const b=_s(d[m[T]],p[_[T]]);if(b!==0)return b}return Ie(m.length,_.length)}(s.mapValue,e.mapValue);default:throw ye()}}function HT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ie(s,e);const t=_i(s),r=_i(e),a=Ie(t.seconds,r.seconds);return a!==0?a:Ie(t.nanos,r.nanos)}function QT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=_s(t[a],r[a]);if(l)return l}return Ie(t.length,r.length)}function nl(s){return np(s)}function np(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=_i(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return vi(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return he.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=np(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${np(t.fields[c])}`;return a+"}"}(s.mapValue):ye()}function _f(s){switch(ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=td(s);return e?16+_f(e):16;case 5:return 2*s.stringValue.length;case 6:return vi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+_f(l),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return Rs(r.fields,(l,c)=>{a+=l.length+_f(c)}),a}(s.mapValue);default:throw ye()}}function ba(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function rp(s){return!!s&&"integerValue"in s}function ac(s){return!!s&&"arrayValue"in s}function KT(s){return!!s&&"nullValue"in s}function $T(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vf(s){return!!s&&"mapValue"in s}function nd(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hp])===null||t===void 0?void 0:t.stringValue)===Qp}function Hu(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Rs(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hu(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(s.arrayValue.values[t]);return e}return Object.assign({},s)}function ww(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Aw}const Sw={mapValue:{fields:{[Hp]:{stringValue:Qp},[tl]:{arrayValue:{}}}}};function gC(s){return"nullValue"in s?yf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ba(ps.empty(),he.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?nd(s)?Sw:{mapValue:{}}:ye()}function pC(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ba(ps.empty(),he.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Sw:"mapValue"in s?nd(s)?{mapValue:{}}:as:ye()}function YT(s,e){const t=_s(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function XT(s,e){const t=_s(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=dt.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Hu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];vf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Rs(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new tn(Hu(this.value))}}function bw(s){const e=[];return Rs(s.fields,(t,r)=>{const a=new dt([t]);if(vf(r)){const l=bw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new lt(e,0,Te.min(),Te.min(),Te.min(),tn.empty(),0)}static newFoundDocument(e,t,r,a){return new lt(e,1,t,Te.min(),r,a,0)}static newNoDocument(e,t){return new lt(e,2,t,Te.min(),Te.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new lt(e,3,t,Te.min(),Te.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.position=e,this.inclusive=t}}function ZT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=he.comparator(he.fromName(c.referenceValue),t.key):r=_s(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function WT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ur(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{}class Be extends Rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _C(e,t,r):t==="array-contains"?new TC(e,r):t==="in"?new Nw(e,r):t==="not-in"?new AC(e,r):t==="array-contains-any"?new wC(e,r):new Be(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vC(e,r):new EC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_s(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(_s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Je(e,t)}matches(e){return rl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function rl(s){return s.op==="and"}function ip(s){return s.op==="or"}function Kp(s){return Iw(s)&&rl(s)}function Iw(s){for(const e of s.filters)if(e instanceof Je)return!1;return!0}function sp(s){if(s instanceof Be)return s.field.canonicalString()+s.op.toString()+nl(s.value);if(Kp(s))return s.filters.map(e=>sp(e)).join(",");{const e=s.filters.map(t=>sp(t)).join(",");return`${s.op}(${e})`}}function Dw(s,e){return s instanceof Be?function(r,a){return a instanceof Be&&r.op===a.op&&r.field.isEqual(a.field)&&Ur(r.value,a.value)}(s,e):s instanceof Je?function(r,a){return a instanceof Je&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Dw(c,a.filters[d]),!0):!1}(s,e):void ye()}function xw(s,e){const t=s.filters.concat(e);return Je.create(t,s.op)}function Cw(s){return s instanceof Be?function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`}(s):s instanceof Je?function(t){return t.op.toString()+" {"+t.getFilters().map(Cw).join(" ,")+"}"}(s):"Filter"}class _C extends Be{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class vC extends Be{constructor(e,t){super(e,"in",t),this.keys=Vw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EC extends Be{constructor(e,t){super(e,"not-in",t),this.keys=Vw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vw(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}class TC extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ac(t)&&sc(t.arrayValue,this.value)}}class Nw extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sc(this.value.arrayValue,t)}}class AC extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!sc(this.value.arrayValue,t)}}class wC extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.le=null}}function ap(s,e=null,t=[],r=[],a=null,l=null,c=null){return new SC(s,e,t,r,a,l,c)}function Ra(s){const e=me(s);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nl(r)).join(",")),e.le=t}return e.le}function Tc(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!yC(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Dw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!WT(s.startAt,e.startAt)&&WT(s.endAt,e.endAt)}function Mf(s){return he.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Pf(s,e){return s.filters.filter(t=>t instanceof Be&&t.field.isEqual(e))}function JT(s,e,t){let r=yf,a=!0;for(const l of Pf(s,e)){let c=yf,d=!0;switch(l.op){case"<":case"<=":c=gC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=yf}YT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];YT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function e0(s,e,t){let r=as,a=!0;for(const l of Pf(s,e)){let c=as,d=!0;switch(l.op){case">=":case">":c=pC(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=as}XT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const c=t.position[l];XT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Ow(s,e,t,r,a,l,c,d){return new Ai(s,e,t,r,a,l,c,d)}function yl(s){return new Ai(s)}function t0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function $p(s){return s.collectionGroup!==null}function Fo(s){const e=me(s);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new et(dt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new oc(l,r))}),t.has(dt.keyField().canonicalString())||e.he.push(new oc(dt.keyField(),r))}return e.he}function An(s){const e=me(s);return e.Pe||(e.Pe=bC(e,Fo(s))),e.Pe}function bC(s,e){if(s.limitType==="F")return ap(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new oc(a.field,l)});const t=s.endAt?new vs(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new vs(s.startAt.position,s.startAt.inclusive):null;return ap(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function op(s,e){const t=s.filters.concat([e]);return new Ai(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Lf(s,e,t){return new Ai(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Ac(s,e){return Tc(An(s),An(e))&&s.limitType===e.limitType}function Mw(s){return`${Ra(An(s))}|lt:${s.limitType}`}function Bo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>Cw(a)).join(", ")}]`),vc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>nl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>nl(a)).join(",")),`Target(${r})`}(An(s))}; limitType=${s.limitType})`}function wc(s,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):he.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,a){for(const l of Fo(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const p=ZT(c,d,m);return c.inclusive?p<=0:p<0}(r.startAt,Fo(r),a)||r.endAt&&!function(c,d,m){const p=ZT(c,d,m);return c.inclusive?p>=0:p>0}(r.endAt,Fo(r),a))}(s,e)}function Pw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Lw(s){return(e,t)=>{let r=!1;for(const a of Fo(s)){const l=RC(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function RC(s,e,t){const r=s.field.isKeyField()?he.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?_s(m,p):ye()}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new ot(he.comparator);function Vn(){return IC}const kw=new ot(he.comparator);function zu(...s){let e=kw;for(const t of s)e=e.insert(t.key,t);return e}function Uw(s){let e=kw;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Or(){return Qu()}function Bw(){return Qu()}function Qu(){return new wi(s=>s.toString(),(s,e)=>s.isEqual(e))}const DC=new ot(he.comparator),xC=new et(he.comparator);function xe(...s){let e=xC;for(const t of s)e=e.add(t);return e}const CC=new et(Ie);function Yp(){return CC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function zw(s){return{integerValue:""+s}}function qw(s,e){return aw(e)?zw(e):Xp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function VC(s,e,t){return s instanceof il?function(a,l){const c={fields:{[vw]:{stringValue:_w},[Tw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ed(l)&&(l=td(l)),l&&(c.fields[Ew]=l),{mapValue:c}}(t,e):s instanceof Ia?Fw(s,e):s instanceof Da?Gw(s,e):function(a,l){const c=jw(a,l),d=n0(c)+n0(a.Ie);return rp(c)&&rp(a.Ie)?zw(d):Xp(a.serializer,d)}(s,e)}function NC(s,e,t){return s instanceof Ia?Fw(s,e):s instanceof Da?Gw(s,e):t}function jw(s,e){return s instanceof sl?function(r){return rp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class il extends rd{}class Ia extends rd{constructor(e){super(),this.elements=e}}function Fw(s,e){const t=Hw(e);for(const r of s.elements)t.some(a=>Ur(a,r))||t.push(r);return{arrayValue:{values:t}}}class Da extends rd{constructor(e){super(),this.elements=e}}function Gw(s,e){let t=Hw(e);for(const r of s.elements)t=t.filter(a=>!Ur(a,r));return{arrayValue:{values:t}}}class sl extends rd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function n0(s){return ft(s.integerValue||s.doubleValue)}function Hw(s){return ac(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.field=e,this.transform=t}}function OC(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof Ia&&a instanceof Ia||r instanceof Da&&a instanceof Da?Yo(r.elements,a.elements,Ur):r instanceof sl&&a instanceof sl?Ur(r.Ie,a.Ie):r instanceof il&&a instanceof il}(s.transform,e.transform)}class MC{constructor(e,t){this.version=e,this.transformResults=t}}class mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ef(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class id{}function Qw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new vl(s.key,mt.none()):new _l(s.key,s.data,mt.none());{const t=s.data,r=tn.empty();let a=new et(dt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Si(s.key,r,new Cn(a.toArray()),mt.none())}}function PC(s,e,t){s instanceof _l?function(a,l,c){const d=a.value.clone(),m=i0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(s,e,t):s instanceof Si?function(a,l,c){if(!Ef(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=i0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Kw(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Ku(s,e,t,r){return s instanceof _l?function(l,c,d,m){if(!Ef(l.precondition,c))return d;const p=l.value.clone(),_=s0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(s,e,t,r):s instanceof Si?function(l,c,d,m){if(!Ef(l.precondition,c))return d;const p=s0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Kw(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(s,e,t,r):function(l,c,d){return Ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(s,e,t)}function LC(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=jw(r.transform,a||null);l!=null&&(t===null&&(t=tn.empty()),t.set(r.field,l))}return t||null}function r0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Yo(r,a,(l,c)=>OC(l,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class _l extends id{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Si extends id{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kw(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function i0(s,e,t){const r=new Map;ve(s.length===t.length);for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,NC(c,d,t[a]))}return r}function s0(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,VC(l,c,e))}return r}class vl extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zp extends id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&PC(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Bw();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Qw(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(t,r)=>r0(t,r))&&Yo(this.baseMutations,e.baseMutations,(t,r)=>r0(t,r))}}class Jp{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ve(e.mutations.length===r.length);let a=function(){return DC}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Jp(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Ge;function $w(s){switch(s){case $.OK:return ye();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ye()}}function Yw(s){if(s===void 0)return Rt("GRPC error has no .code"),$.UNKNOWN;switch(s){case Mt.OK:return $.OK;case Mt.CANCELLED:return $.CANCELLED;case Mt.UNKNOWN:return $.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return $.INTERNAL;case Mt.UNAVAILABLE:return $.UNAVAILABLE;case Mt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Mt.NOT_FOUND:return $.NOT_FOUND;case Mt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Mt.ABORTED:return $.ABORTED;case Mt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Mt.DATA_LOSS:return $.DATA_LOSS;default:return ye()}}(Ge=Mt||(Mt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new us([4294967295,4294967295],0);function a0(s){const e=Up().encode(s),t=new QA;return t.update(e),new Uint8Array(t.digest())}function o0(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new us([t,r],0),new us([a,l],0)]}class ty{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qu(`Invalid padding: ${t}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=us.fromNumber(this.Ee)}Ae(e,t,r){let a=e.add(t.multiply(us.fromNumber(r)));return a.compare(UC)===1&&(a=new us([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=a0(e),[r,a]=o0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);if(!this.Re(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ty(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.Ee===0)return;const t=a0(e),[r,a]=o0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(r,a,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bc(Te.min(),a,new ot(Ie),Vn(),xe())}}class Rc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rc(r,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,r,a){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=a}}class Xw{constructor(e,t){this.targetId=e,this.ge=t}}class Zw{constructor(e,t,r=At.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class l0{constructor(){this.pe=0,this.ye=u0(),this.we=At.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=xe(),t=xe(),r=xe();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ye()}}),new Rc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=u0()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ve(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class BC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Vn(),this.$e=af(),this.Ue=af(),this.Ke=new ot(Ie)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,r=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(Mf(l))if(r===0){const c=new he(l.path);this.ze(t,c,lt.newNoDocument(c,Te.min()))}else ve(r===1);else{const c=this.et(t);if(c!==r){const d=this.tt(e),m=d?this.nt(d,e,c):1;if(m!==0){this.Ye(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=vi(r).toUint8Array()}catch(m){if(m instanceof yw)return kr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new ty(c,a,l)}catch(m){return kr(m instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const d=this.Xe(c);if(d){if(l.current&&Mf(d.target)){const m=new he(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,lt.newNoDocument(m,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let r=xe();this.Ue.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Xe(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const a=new bc(e,t,this.Ke,this.Qe,r);return this.Qe=Vn(),this.$e=af(),this.Ue=af(),this.Ke=new ot(Ie),a}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new l0,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new et(Ie),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new et(Ie),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new l0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function af(){return new ot(he.comparator)}function u0(){return new ot(he.comparator)}const zC={asc:"ASCENDING",desc:"DESCENDING"},qC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jC={and:"AND",or:"OR"};class FC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lp(s,e){return s.useProto3Json||vc(e)?e:{value:e}}function al(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ww(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function GC(s,e){return al(s,e.toTimestamp())}function It(s){return ve(!!s),Te.fromTimestamp(function(t){const r=_i(t);return new gt(r.seconds,r.nanos)}(s))}function ny(s,e){return up(s,e).canonicalString()}function up(s,e){const t=function(a){return new Ue(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Jw(s){const e=Ue.fromString(s);return ve(uS(e)),e}function lc(s,e){return ny(s.databaseId,e.path)}function Pr(s,e){const t=Jw(e);if(t.get(1)!==s.databaseId.projectId)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ie($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new he(nS(t))}function eS(s,e){return ny(s.databaseId,e)}function tS(s){const e=Jw(s);return e.length===4?Ue.emptyPath():nS(e)}function cp(s){return new Ue(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function nS(s){return ve(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function c0(s,e,t){return{name:lc(s,e),fields:t.value.mapValue.fields}}function rS(s,e,t){const r=Pr(s,e.name),a=It(e.updateTime),l=e.createTime?It(e.createTime):Te.min(),c=new tn({mapValue:{fields:e.fields}}),d=lt.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function HC(s,e){return"found"in e?function(r,a){ve(!!a.found),a.found.name,a.found.updateTime;const l=Pr(r,a.found.name),c=It(a.found.updateTime),d=a.found.createTime?It(a.found.createTime):Te.min(),m=new tn({mapValue:{fields:a.found.fields}});return lt.newFoundDocument(l,c,d,m)}(s,e):"missing"in e?function(r,a){ve(!!a.missing),ve(!!a.readTime);const l=Pr(r,a.missing),c=It(a.readTime);return lt.newNoDocument(l,c)}(s,e):ye()}function QC(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(ve(_===void 0||typeof _=="string"),At.fromBase64String(_||"")):(ve(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),At.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?$.UNKNOWN:Yw(p.code);return new ie(_,p.message||"")}(c);t=new Zw(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Pr(s,r.document.name),l=It(r.document.updateTime),c=r.document.createTime?It(r.document.createTime):Te.min(),d=new tn({mapValue:{fields:r.document.fields}}),m=lt.newFoundDocument(a,l,c,d),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Tf(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Pr(s,r.document),l=r.readTime?It(r.readTime):Te.min(),c=lt.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Tf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Pr(s,r.document),l=r.removedTargetIds||[];t=new Tf([],l,a,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new kC(a,l),d=r.targetId;t=new Xw(d,c)}}return t}function uc(s,e){let t;if(e instanceof _l)t={update:c0(s,e.key,e.value)};else if(e instanceof vl)t={delete:lc(s,e.key)};else if(e instanceof Si)t={update:c0(s,e.key,e.data),updateMask:WC(e.fieldMask)};else{if(!(e instanceof Zp))return ye();t={verify:lc(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof il)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ia)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Da)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof sl)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ye()}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:GC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye()}(s,e.precondition)),t}function hp(s,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?mt.updateTime(It(l.updateTime)):l.exists!==void 0?mt.exists(l.exists):mt.none()}(e.currentDocument):mt.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME"),m=new il;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new Ia(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new Da(_)}else"increment"in d?m=new sl(c,d.increment):ye();const p=dt.fromServerFormat(d.fieldPath);return new Sc(p,m)}(s,a)):[];if(e.update){e.update.name;const a=Pr(s,e.update.name),l=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Cn(p.map(_=>dt.fromServerFormat(_)))}(e.updateMask);return new Si(a,l,c,t,r)}return new _l(a,l,t,r)}if(e.delete){const a=Pr(s,e.delete);return new vl(a,t)}if(e.verify){const a=Pr(s,e.verify);return new Zp(a,t)}return ye()}function KC(s,e){return s&&s.length>0?(ve(e!==void 0),s.map(t=>function(a,l){let c=a.updateTime?It(a.updateTime):It(l);return c.isEqual(Te.min())&&(c=It(l)),new MC(c,a.transformResults||[])}(t,e))):[]}function iS(s,e){return{documents:[eS(s,e.path)]}}function sS(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eS(s,a);const l=function(p){if(p.length!==0)return lS(Je.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(w){return{field:zo(w.field),direction:YC(w.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=lp(s,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:a}}function aS(s){let e=tS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ve(r===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const w=oS(T);return w instanceof Je&&Kp(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(w=>function(V){return new oc(qo(V.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(T){let w;return w=typeof T=="object"?T.value:T,vc(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(T){const w=!!T.before,b=T.values||[];return new vs(b,w)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const w=!T.before,b=T.values||[];return new vs(b,w)}(t.endAt)),Ow(e,a,c,l,d,"F",m,p)}function $C(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oS(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qo(t.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(t.unaryFilter.field);return Be.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(t.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(s):s.fieldFilter!==void 0?function(t){return Be.create(qo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Je.create(t.compositeFilter.filters.map(r=>oS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(s):ye()}function YC(s){return zC[s]}function XC(s){return qC[s]}function ZC(s){return jC[s]}function zo(s){return{fieldPath:s.canonicalString()}}function qo(s){return dt.fromServerFormat(s.fieldPath)}function lS(s){return s instanceof Be?function(t){if(t.op==="=="){if($T(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(KT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($T(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(KT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:XC(t.op),value:t.value}}}(s):s instanceof Je?function(t){const r=t.getFilters().map(a=>lS(a));return r.length===1?r[0]:{compositeFilter:{op:ZC(t.op),filters:r}}}(s):ye()}function WC(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r,a,l=Te.min(),c=Te.min(),d=At.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.Tt=e}}function JC(s,e){let t;if(e.document)t=rS(s.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),a=Ca(e.noDocument.readTime);t=lt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const r=he.fromSegments(e.unknownDocument.path),a=Ca(e.unknownDocument.version);t=lt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new gt(a[0],a[1]);return Te.fromTimestamp(l)}(e.readTime)),t}function h0(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:lc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:al(l,c.version.toTimestamp()),createTime:al(l,c.createTime.toTimestamp())}}(s.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xa(e.version)};else{if(!e.isUnknownDocument())return ye();r.unknownDocument={path:t.path.toArray(),version:xa(e.version)}}return r}function kf(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function xa(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ca(s){const e=new gt(s.seconds,s.nanoseconds);return Te.fromTimestamp(e)}function pa(s,e){const t=(e.baseMutations||[]).map(l=>hp(s.Tt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>hp(s.Tt,l)),a=gt.fromMillis(e.localWriteTimeMs);return new Wp(e.batchId,a,t,r)}function ju(s){const e=Ca(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Ca(s.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(l){return l.documents!==void 0}(s.query)?function(l){return ve(l.documents.length===1),An(yl(tS(l.documents[0])))}(s.query):function(l){return An(aS(l))}(s.query),new di(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,At.fromBase64String(s.resumeToken))}function hS(s,e){const t=xa(e.snapshotVersion),r=xa(e.lastLimboFreeSnapshotVersion);let a;a=Mf(e.target)?iS(s.Tt,e.target):sS(s.Tt,e.target).ht;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ra(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function ry(s){const e=aS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Lf(e,e.limit,"L"):e}function Mg(s,e){return new ey(e.largestBatchId,hp(s.Tt,e.overlayMutation))}function f0(s,e){const t=e.path.lastSegment();return[s,cn(e.path.popLast()),t]}function d0(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:xa(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{getBundleMetadata(e,t){return m0(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ca(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return m0(e).put(function(a){return{bundleId:a.id,createTime:xa(It(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return g0(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:ry(l.bundledQuery),readTime:Ca(l.readTime)}}(r)})}saveNamedQuery(e,t){return g0(e).put(function(a){return{name:a.name,readTime:xa(It(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function m0(s){return qt(s,Zf)}function g0(s){return qt(s,Wf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new sd(e,r)}getOverlay(e,t){return Mu(e).get(f0(this.userId,t)).next(r=>r?Mg(this.serializer,r):null)}getOverlays(e,t){const r=Or();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new ey(t,c);a.push(this.Et(e,d))}),q.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(cn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Mu(e).J(Jg,d))}),q.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Or(),l=cn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Mu(e).G(Jg,c).next(d=>{for(const m of d){const p=Mg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Or();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mu(e).Z({index:fw,range:d},(m,p,_)=>{const T=Mg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}Et(e,t){return Mu(e).put(function(a,l,c){const[d,m,p]=f0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:uc(a.Tt,c.mutation)}}(this.serializer,this.userId,t))}}function Mu(s){return qt(s,Jf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{dt(e){return qt(e,Fp)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?At.fromUint8Array(r):At.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ft(e.integerValue));else if("doubleValue"in e){const r=ft(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ec(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=_i(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(vi(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?ww(e)?this.ft(t,Number.MAX_SAFE_INTEGER):nd(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ye()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const a of Object.keys(r))this.wt(a,t),this.Rt(r[a],t)}vt(e,t){var r,a;const l=e.fields||{};this.ft(t,53);const c=tl,d=((a=(r=l[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.ft(t,15),t.gt(ft(d)),this.wt(c,t),this.Rt(l[c],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const a of r)this.Rt(a,t)}Dt(e,t){this.ft(t,37),he.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}}ya.xt=new ya;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=255;function nV(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function p0(s){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=nV(255&r[l]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class rV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const a=t.codePointAt(0);this.Nt(240|a>>>18),this.Nt(128|63&a>>>12),this.Nt(128|63&a>>>6),this.Nt(128|63&a)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const a=t.codePointAt(0);this.kt(240|a>>>18),this.kt(128|63&a>>>12),this.kt(128|63&a>>>6),this.kt(128|63&a)}}this.qt()}Ut(e){const t=this.Kt(e),r=p0(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Gt(e){const t=this.Kt(e),r=p0(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}zt(){this.jt(Oo),this.jt(255)}Ht(){this.Jt(Oo),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===Oo?(this.jt(Oo),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===Oo?(this.Jt(Oo),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class iV{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class sV{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Pu{constructor(){this.Zt=new rV,this.Xt=new iV(this.Zt),this.en=new sV(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _a(this.indexId,this.documentKey,this.arrayValue,r)}}function ts(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=y0(s.arrayValue,e.arrayValue),t!==0?t:(t=y0(s.directionalValue,e.directionalValue),t!==0?t:he.comparator(s.documentKey,e.documentKey)))}function y0(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.rn=new et((t,r)=>dt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(ve(e.collectionGroup===this.collectionId),this.an)return!1;const t=Xg(e);if(t!==void 0&&!this.cn(t))return!1;const r=da(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.cn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.rn.size>0){const d=this.rn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.ln(d,m)||!this.hn(this.sn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.sn.length||!this.hn(this.sn[c++],d))return!1}return!0}Pn(){if(this.an)return null;let e=new et(dt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new mf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new mf(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new mf(r.field,r.dir==="asc"?0:1)));return new Df(Df.UNKNOWN_ID,this.collectionId,t,Ju.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(s){var e,t;if(ve(s instanceof Be||s instanceof Je),s instanceof Be){if(s instanceof Nw){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Be.create(s.field,"==",l)))||[];return Je.create(a,"or")}return s}const r=s.filters.map(a=>fS(a));return Je.create(r,s.op)}function aV(s){if(s.getFilters().length===0)return[];const e=mp(fS(s));return ve(dS(e)),fp(e)||dp(e)?[e]:e.getFilters()}function fp(s){return s instanceof Be}function dp(s){return s instanceof Je&&Kp(s)}function dS(s){return fp(s)||dp(s)||function(t){if(t instanceof Je&&ip(t)){for(const r of t.getFilters())if(!fp(r)&&!dp(r))return!1;return!0}return!1}(s)}function mp(s){if(ve(s instanceof Be||s instanceof Je),s instanceof Be)return s;if(s.filters.length===1)return mp(s.filters[0]);const e=s.filters.map(r=>mp(r));let t=Je.create(e,s.op);return t=Uf(t),dS(t)?t:(ve(t instanceof Je),ve(rl(t)),ve(t.filters.length>1),t.filters.reduce((r,a)=>iy(r,a)))}function iy(s,e){let t;return ve(s instanceof Be||s instanceof Je),ve(e instanceof Be||e instanceof Je),t=s instanceof Be?e instanceof Be?function(a,l){return Je.create([a,l],"and")}(s,e):v0(s,e):e instanceof Be?v0(e,s):function(a,l){if(ve(a.filters.length>0&&l.filters.length>0),rl(a)&&rl(l))return xw(a,l.getFilters());const c=ip(a)?a:l,d=ip(a)?l:a,m=c.filters.map(p=>iy(p,d));return Je.create(m,"or")}(s,e),Uf(t)}function v0(s,e){if(rl(e))return xw(e,s.getFilters());{const t=e.filters.map(r=>iy(s,r));return Je.create(t,"or")}}function Uf(s){if(ve(s instanceof Be||s instanceof Je),s instanceof Be)return s;const e=s.getFilters();if(e.length===1)return Uf(e[0]);if(Iw(s))return s;const t=e.map(a=>Uf(a)),r=[];return t.forEach(a=>{a instanceof Be?r.push(a):a instanceof Je&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Je.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.Tn=new sy}addToCollectionParentIndex(e,t){return this.Tn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(jn.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class sy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new et(Ue.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new et(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="IndexedDbIndexManager",of=new Uint8Array(0);class lV{constructor(e,t){this.databaseId=t,this.In=new sy,this.En=new wi(r=>Ra(r),(r,a)=>Tc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const l={collectionId:r,parent:cn(a)};return T0(e).put(l)}return q.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[ew(t),""],!1,!0);return T0(e).G(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Nr(c.parent))}return r})}addFieldIndex(e,t){const r=Lu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Po(e);return l.next(d=>{c.put(d0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Lu(e),a=Po(e),l=Mo(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Lu(e),r=Mo(e),a=Po(e);return t.J().next(()=>r.J()).next(()=>a.J())}createTargetIndexes(e,t){return q.forEach(this.dn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new _0(r).Pn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=Mo(e);let a=!0;const l=new Map;return q.forEach(this.dn(t),c=>this.An(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=xe();const d=[];return q.forEach(l,(m,p)=>{se(E0,`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(pe=>`${pe.fieldPath}:${pe.kind}`).join(",")}`}(m)} to execute ${Ra(t)}`);const _=function(Z,pe){const le=Xg(pe);if(le===void 0)return null;for(const ge of Pf(Z,le.fieldPath))switch(ge.op){case"array-contains-any":return ge.value.arrayValue.values||[];case"array-contains":return[ge.value]}return null}(p,m),T=function(Z,pe){const le=new Map;for(const ge of da(pe))for(const C of Pf(Z,ge.fieldPath))switch(C.op){case"==":case"in":le.set(ge.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return le.set(ge.fieldPath.canonicalString(),C.value),Array.from(le.values())}return null}(p,m),w=function(Z,pe){const le=[];let ge=!0;for(const C of da(pe)){const R=C.kind===0?JT(Z,C.fieldPath,Z.startAt):e0(Z,C.fieldPath,Z.startAt);le.push(R.value),ge&&(ge=R.inclusive)}return new vs(le,ge)}(p,m),b=function(Z,pe){const le=[];let ge=!0;for(const C of da(pe)){const R=C.kind===0?e0(Z,C.fieldPath,Z.endAt):JT(Z,C.fieldPath,Z.endAt);le.push(R.value),ge&&(ge=R.inclusive)}return new vs(le,ge)}(p,m),V=this.Rn(m,p,w),U=this.Rn(m,p,b),k=this.Vn(m,p,T),H=this.mn(m.indexId,_,V,w.inclusive,U,b.inclusive,k);return q.forEach(H,re=>r.H(re,t.limit).next(Z=>{Z.forEach(pe=>{const le=he.fromSegments(pe.documentKey);c.has(le)||(c=c.add(le),d.push(le))})}))}).next(()=>d)}return q.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=aV(Je.create(e.filters,"and")).map(r=>ap(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const w=t?this.fn(t[T/p]):of,b=this.gn(e,w,r[T%p],a),V=this.pn(e,w,l[T%p],c),U=d.map(k=>this.gn(e,w,k,!0));_.push(...this.createRange(b,V,U))}return _}gn(e,t,r,a){const l=new _a(e,he.empty(),t,r);return a?l:l.nn()}pn(e,t,r,a){const l=new _a(e,he.empty(),t,r);return a?l.nn():l}An(e,t){const r=new _0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.un(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.dn(t);return q.forEach(a,l=>this.An(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let p=new et(dt.comparator),_=!1;for(const T of m.filters)for(const w of T.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:p=p.add(w.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}yn(e,t){const r=new Pu;for(const a of da(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.tn(a.kind);ya.xt.At(l,c)}return r.Yt()}fn(e){const t=new Pu;return ya.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Pu;return ya.xt.At(ba(this.databaseId,t),r.tn(function(l){const c=da(l);return c.length===0?0:c[c.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let a=[];a.push(new Pu);let l=0;for(const c of da(e)){const d=r[l++];for(const m of a)if(this.Sn(t,c.fieldPath)&&ac(d))a=this.bn(a,c,d);else{const p=m.tn(c.kind);ya.xt.At(d,p)}}return this.Dn(a)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}bn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new Pu;m.seed(d.Yt()),ya.xt.At(c,m.tn(t.kind)),l.push(m)}return l}Sn(e,t){return!!e.filters.find(r=>r instanceof Be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Lu(e),a=Po(e);return(t?r.G(Wg,IDBKeyRange.bound(t,t)):r.G()).next(l=>{const c=[];return q.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const w=T?new Ju(T.sequenceNumber,new jn(Ca(T.readTime),new he(Nr(T.documentKey)),T.largestBatchId)):Ju.empty(),b=_.fields.map(([V,U])=>new mf(dt.fromServerFormat(V),U));return new Df(_.indexId,_.collectionGroup,b,w)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ie(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Lu(e),l=Po(e);return this.vn(e).next(c=>a.G(Wg,IDBKeyRange.bound(t,t)).next(d=>q.forEach(d,m=>l.put(d0(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?q.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),q.forEach(d,m=>this.Cn(e,a,m).next(p=>{const _=this.Fn(l,m);return p.isEqual(_)?q.resolve():this.Mn(e,l,m,p,_)}))))})}xn(e,t,r,a){return Mo(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,a){return Mo(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const a=Mo(e);let l=new et(ts);return a.Z({index:hw,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(c,d)=>{l=l.add(new _a(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Fn(e,t){let r=new et(ts);const a=this.yn(t,e);if(a==null)return r;const l=Xg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ac(c))for(const d of c.arrayValue.values||[])r=r.add(new _a(t.indexId,e.key,this.fn(d),a))}else r=r.add(new _a(t.indexId,e.key,of,a));return r}Mn(e,t,r,a,l){se(E0,"Updating index entries for document '%s'",t.key);const c=[];return function(m,p,_,T,w){const b=m.getIterator(),V=p.getIterator();let U=No(b),k=No(V);for(;U||k;){let H=!1,re=!1;if(U&&k){const Z=_(U,k);Z<0?re=!0:Z>0&&(H=!0)}else U!=null?re=!0:H=!0;H?(T(k),k=No(V)):re?(w(U),U=No(b)):(U=No(b),k=No(V))}}(a,l,ts,d=>{c.push(this.xn(e,t,r,d))},d=>{c.push(this.On(e,t,r,d))}),q.waitFor(c)}vn(e){let t=1;return Po(e).Z({index:cw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>ts(c,d)).filter((c,d,m)=>!d||ts(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=ts(c,e),m=ts(c,t);if(d===0)a[0]=e.nn();else if(d>0&&m<0)a.push(c),a.push(c.nn());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Nn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,of,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,of,[]];l.push(IDBKeyRange.bound(d,m))}return l}Nn(e,t){return ts(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(A0)}getMinOffset(e,t){return q.mapArray(this.dn(t),r=>this.An(e,r).next(a=>a||ye())).next(A0)}}function T0(s){return qt(s,rc)}function Mo(s){return qt(s,Of)}function Lu(s){return qt(s,jp)}function Po(s){return qt(s,Nf)}function A0(s){ve(s.length!==0);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;Bp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new jn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mS=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(s,e,t){const r=s.store(hr),a=s.store(Zo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.Z({range:c},(_,T,w)=>(d++,w.delete()));l.push(m.next(()=>{ve(d===1)}));const p=[];for(const _ of t.mutations){const T=ow(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return q.waitFor(l).next(()=>p)}function Bf(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw ye();e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(mS,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class ad{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Bn={}}static It(e,t,r,a){ve(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new ad(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ns(e).Z({index:Ea,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=jo(e),c=ns(e);return c.add({}).next(d=>{ve(typeof d=="number");const m=new Wp(d,t,r,a),p=function(b,V,U){const k=U.baseMutations.map(re=>uc(b.Tt,re)),H=U.mutations.map(re=>uc(b.Tt,re));return{userId:V,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:k,mutations:H}}(this.serializer,this.userId,m),_=[];let T=new et((w,b)=>Ie(w.canonicalString(),b.canonicalString()));for(const w of a){const b=ow(this.userId,w.key.path,d);T=T.add(w.key.path.popLast()),_.push(c.put(p)),_.push(l.put(b,jx))}return T.forEach(w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Bn[d]=m.keys()}),q.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return ns(e).get(t).next(r=>r?(ve(r.userId===this.userId),pa(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?q.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ns(e).Z({index:Ea,range:a},(c,d,m)=>{d.userId===this.userId&&(ve(d.batchId>=r),l=pa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=cs;return ns(e).Z({index:Ea,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,cs],[this.userId,Number.POSITIVE_INFINITY]);return ns(e).G(Ea,t).next(r=>r.map(a=>pa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return jo(e).Z({range:a},(c,d,m)=>{const[p,_,T]=c,w=Nr(_);if(p===this.userId&&t.path.isEqual(w))return ns(e).get(T).next(b=>{if(!b)throw ye();ve(b.userId===this.userId),l.push(pa(this.serializer,b))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Ie);const a=[];return t.forEach(l=>{const c=gf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=jo(e).Z({range:d},(p,_,T)=>{const[w,b,V]=p,U=Nr(b);w===this.userId&&l.path.isEqual(U)?r=r.add(V):T.done()});a.push(m)}),q.waitFor(a).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=gf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new et(Ie);return jo(e).Z({range:c},(m,p,_)=>{const[T,w,b]=m,V=Nr(w);T===this.userId&&r.isPrefixOf(V)?V.length===a&&(d=d.add(b)):_.done()}).next(()=>this.kn(e,d))}kn(e,t){const r=[],a=[];return t.forEach(l=>{a.push(ns(e).get(l).next(c=>{if(c===null)throw ye();ve(c.userId===this.userId),r.push(pa(this.serializer,c))}))}),q.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return gS(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),q.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return jo(e).Z({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Nr(l[1]);a.push(m)}else d.done()}).next(()=>{ve(a.length===0)})})}containsKey(e,t){return pS(e,this.userId,t)}Qn(e){return yS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:cs,lastStreamToken:""})}}function pS(s,e,t){const r=gf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return jo(s).Z({range:l,Y:!0},(d,m,p)=>{const[_,T,w]=d;_===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function ns(s){return qt(s,hr)}function jo(s){return qt(s,Zo)}function yS(s){return qt(s,tc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Va(0)}static Kn(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Va(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Te.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Gn(e,a)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lo(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(ve(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Lo(e).Z((c,d)=>{const m=ju(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>q.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Lo(e).Z((r,a)=>{const l=ju(a);t(l)})}Wn(e){return S0(e).get(Vf).next(t=>(ve(t!==null),t))}Gn(e,t){return S0(e).put(Vf,t)}zn(e,t){return Lo(e).put(hS(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ra(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Lo(e).Z({range:a,index:uw},(c,d,m)=>{const p=ju(d);Tc(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=ss(e);return t.forEach(c=>{const d=cn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),q.waitFor(a)}removeMatchingKeys(e,t,r){const a=ss(e);return q.forEach(t,l=>{const c=cn(l.path);return q.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=ss(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ss(e);let l=xe();return a.Z({range:r,Y:!0},(c,d,m)=>{const p=Nr(c[1]),_=new he(p);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=cn(t.path),a=IDBKeyRange.bound([r],[ew(r)],!1,!0);let l=0;return ss(e).Z({index:qp,Y:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}lt(e,t){return Lo(e).get(t).next(r=>r?ju(r):null)}}function Lo(s){return qt(s,Wo)}function S0(s){return qt(s,wa)}function ss(s){return qt(s,Jo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LruGarbageCollector",cV=1048576;function R0([s,e],[t,r]){const a=Ie(s,t);return a===0?Ie(e,r):a}class hV{constructor(e){this.Hn=e,this.buffer=new et(R0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();R0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _S{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){se(b0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bs(t)?se(b0,"Ignoring IndexedDB error during garbage collection: ",t):await Ss(t)}await this.er(3e5)})}}class fV{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(xn.ae);const r=new hV(t);return this.tr.forEachTarget(e,a=>r.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>r.Zn(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(w0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),w0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(p=Date.now(),Uo()<=ze.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function vS(s,e){return new fV(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,t){this.db=e,this.garbageCollector=vS(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,a)=>t(a))}addReference(e,t,r){return lf(e,r)}removeReference(e,t,r){return lf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lf(e,t)}ar(e,t){return function(a,l){let c=!1;return yS(a).X(d=>pS(a,d,l).next(m=>(m&&(c=!0),q.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this._r(e,(c,d)=>{if(d<=t){const m=this.ar(e,c).next(p=>{if(!p)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Te.min()),ss(e).delete(function(T){return[0,cn(T.path)]}(c))))});a.push(m)}}).next(()=>q.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lf(e,t)}_r(e,t){const r=ss(e);let a,l=xn.ae;return r.Z({index:qp},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==xn.ae&&t(new he(Nr(a)),l),l=p,a=m):l=xn.ae}).next(()=>{l!==xn.ae&&t(new he(Nr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(s,e){return ss(s).put(function(r,a){return{targetId:0,path:cn(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.changes=new wi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ha(e).put(r)}removeEntry(e,t,r){return ha(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],kf(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=lt.newInvalidDocument(t);return ha(e).Z({index:pf,range:IDBKeyRange.only(ku(t))},(a,l)=>{r=this.cr(t,l)}).next(()=>r)}lr(e,t){let r={size:0,document:lt.newInvalidDocument(t)};return ha(e).Z({index:pf,range:IDBKeyRange.only(ku(t))},(a,l)=>{r={document:this.cr(t,l),size:Bf(l)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this.hr(e,t,(a,l)=>{const c=this.cr(a,l);r=r.insert(a,c)}).next(()=>r)}Pr(e,t){let r=Vn(),a=new ot(he.comparator);return this.hr(e,t,(l,c)=>{const d=this.cr(l,c);r=r.insert(l,d),a=a.insert(l,Bf(c))}).next(()=>({documents:r,Tr:a}))}hr(e,t,r){if(t.isEmpty())return q.resolve();let a=new et(x0);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(ku(a.first()),ku(a.last())),c=a.getIterator();let d=c.getNext();return ha(e).Z({index:pf,range:l},(m,p,_)=>{const T=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&x0(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,p),d=c.hasNext()?c.getNext():null),d?_.W(ku(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),kf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ha(e).G(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let _=Vn();for(const T of p){const w=this.cr(he.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);w.isFoundDocument()&&(wc(t,w)||a.has(w.key))&&(_=_.insert(w.key,w))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=Vn();const c=D0(t,r),d=D0(t,jn.max());return ha(e).Z({index:lw,range:IDBKeyRange.bound(c,d,!0)},(m,p,_)=>{const T=this.cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new gV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I0(e).get(Zg).next(t=>(ve(!!t),t))}ur(e,t){return I0(e).put(Zg,t)}cr(e,t){if(t){const r=JC(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return lt.newInvalidDocument(e)}}function TS(s){return new mV(s)}class gV extends ES{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new wi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new et((l,c)=>Ie(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Er.get(l);if(t.push(this.Ir.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=h0(this.Ir.serializer,c);a=a.add(l.path.popLast());const p=Bf(m);r+=p-d.size,t.push(this.Ir.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=h0(this.Ir.serializer,c.convertToNoDocument(Te.min()));t.push(this.Ir.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Ir.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:a})=>(a.forEach((l,c)=>{this.Er.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function I0(s){return qt(s,nc)}function ha(s){return qt(s,Cf)}function ku(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D0(s,e){const t=e.documentKey.path.toArray();return[s,kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x0(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ie(t[l],r[l]),a)return a;return a=Ie(t.length,r.length),a||(a=Ie(t[t.length-2],r[r.length-2]),a||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Ku(r.mutation,a,Cn.empty(),gt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){const a=Or();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=zu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Or();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=Vn();const c=Qu(),d=function(){return Qu()}();return t.forEach((m,p)=>{const _=r.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Si)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Ku(_.mutation,p,_.mutation.getFieldMask(),gt.now())):c.set(p.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new pV(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Qu();let a=new ot((c,d)=>c-d),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=r.get(m)||Cn.empty();_=d.applyToLocalView(p,_),r.set(m,_);const T=(a.get(d.batchId)||xe()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Bw();_.forEach(w=>{if(!l.has(w)){const b=Qw(t.get(w),r.get(w));b!==null&&T.set(w,b),l=l.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return q.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return he.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$p(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):q.resolve(Or());let d=Xo,m=l;return c.next(p=>q.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{m=m.insert(_,w)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,xe())).next(_=>({batchId:d,changes:Uw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let a=zu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=zu();return this.indexManager.getCollectionParents(e,l).next(d=>q.forEach(d,m=>{const p=function(T,w){return new Ai(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next(_=>{_.forEach((T,w)=>{c=c.insert(T,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,lt.newInvalidDocument(_)))});let d=zu();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&Ku(_.mutation,p,Cn.empty(),gt.now()),wc(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return q.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:It(a.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:ry(a.bundledQuery),readTime:It(a.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.overlays=new ot(he.comparator),this.Rr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Or();return q.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.Et(e,t,l)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Rr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const a=Or(),l=t.length+1,c=new he(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return q.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ot((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Or(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Or(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return q.resolve(d)}Et(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Rr.get(a.largestBatchId).delete(r.key);this.Rr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ey(t,r));let l=this.Rr.get(t);l===void 0&&(l=xe(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.Vr=new et(Kt.mr),this.gr=new et(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Kt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new he(new Ue([])),r=new Kt(t,e),a=new Kt(t,e+1),l=[];return this.gr.forEachInRange([r,a],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new he(new Ue([])),r=new Kt(t,e),a=new Kt(t,e+1);let l=xe();return this.gr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Kt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return he.comparator(e.key,t.key)||Ie(e.Cr,t.Cr)}static pr(e,t){return Ie(e.Cr,t.Cr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new et(Kt.mr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Wp(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Mr=this.Mr.add(new Kt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return q.resolve(c)}lookupMutationBatch(e,t){return q.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Nr(r),l=a<0?0:a;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?cs:this.Fr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),a=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,a],c=>{const d=this.Or(c.Cr);l.push(d)}),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(Ie);return t.forEach(a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],d=>{r=r.add(d.Cr)})}),q.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;he.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new he(l),0);let d=new et(Ie);return this.Mr.forEachWhile(m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Cr)),!0)},c),q.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(r=>{const a=this.Or(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ve(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return q.forEach(t.mutations,a=>{const l=new Kt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Kt(t,0),a=this.Mr.firstAfterOrEqual(r);return q.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.kr=e,this.docs=function(){return new ot(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():lt.newInvalidDocument(a))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Vn();const c=t.path,d=new he(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Bp(nw(_),r)<=0||(a.has(_.key)||wc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ye()}qr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AV(this)}getSize(e){return q.resolve(this.size)}}class AV extends ES{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.persistence=e,this.Qr=new wi(t=>Ra(t),Tc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ay,this.targetCount=0,this.Kr=Va.Un()}forEachTarget(e,t){return this.Qr.forEach((r,a)=>t(a)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),q.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Va(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.zn(t),q.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),q.waitFor(l).next(()=>a)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new xn(0),this.zr=!1,this.zr=!0,this.jr=new vV,this.referenceDelegate=e(this),this.Hr=new wV(this),this.indexManager=new oV,this.remoteDocumentCache=function(a){return new TV(a)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new cS(t),this.Yr=new yV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _V,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new EV(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const a=new SV(this.Gr.next());return this.referenceDelegate.Zr(),r(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return q.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class SV extends iw{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.ti=new ay,this.ni=null}static ri(e){return new od(e)}get ii(){if(this.ni)return this.ni;throw ye()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),q.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(a=>this.ii.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ii,r=>{const a=he.fromPath(r);return this.si(e,a).next(l=>{l||t.removeEntry(a,Te.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return q.or([()=>q.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class zf{constructor(e,t){this.persistence=e,this.oi=new wi(r=>cn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=vS(this,t)}static ri(e,t){return new zf(e,t)}Zr(){}Xr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return q.forEach(this.oi,(r,a)=>this.ar(e,r,a).next(l=>l?q.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,c=>this.ar(e,c,t).next(d=>{d||(r++,l.removeEntry(c,Te.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),q.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_f(e.data.value)),t}ar(e,t,r){return q.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return q.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.serializer=e}B(e,t,r,a){const l=new Xf("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(Ec)}(e),function(m){m.createObjectStore(tc,{keyPath:qx}),m.createObjectStore(hr,{keyPath:qT,autoIncrement:!0}).createIndex(Ea,jT,{unique:!0}),m.createObjectStore(Zo)}(e),C0(e),function(m){m.createObjectStore(ma)}(e));let c=q.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(Jo),m.deleteObjectStore(Wo),m.deleteObjectStore(wa)}(e),C0(e)),c=c.next(()=>function(m){const p=m.store(wa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Vf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,p){return p.store(hr).G().next(T=>{m.deleteObjectStore(hr),m.createObjectStore(hr,{keyPath:qT,autoIncrement:!0}).createIndex(Ea,jT,{unique:!0});const w=p.store(hr),b=T.map(V=>w.put(V));return q.waitFor(b)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(el,{keyPath:Xx})})(e)})),r<5&&a>=5&&(c=c.next(()=>this._i(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(nc)}(e),this.ai(l)))),r<7&&a>=7&&(c=c.next(()=>this.ui(l))),r<8&&a>=8&&(c=c.next(()=>this.ci(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.li(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Zf,{keyPath:Zx})})(e),function(m){m.createObjectStore(Wf,{keyPath:Wx})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore(Jf,{keyPath:sC});p.createIndex(Jg,aC,{unique:!1}),p.createIndex(fw,oC,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore(Cf,{keyPath:Fx});p.createIndex(pf,Gx),p.createIndex(lw,Hx)}(e)).next(()=>this.hi(e,l)).next(()=>e.deleteObjectStore(ma))),r<14&&a>=14&&(c=c.next(()=>this.Pi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(jp,{keyPath:Jx,autoIncrement:!0}).createIndex(Wg,eC,{unique:!1}),m.createObjectStore(Nf,{keyPath:tC}).createIndex(cw,nC,{unique:!1}),m.createObjectStore(Of,{keyPath:rC}).createIndex(hw,iC,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Nf).clear()}).next(()=>{t.objectStore(Of).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Fp,{keyPath:lC})})(e)})),c}ai(e){let t=0;return e.store(ma).Z((r,a)=>{t+=Bf(a)}).next(()=>{const r={byteSize:t};return e.store(nc).put(Zg,r)})}_i(e){const t=e.store(tc),r=e.store(hr);return t.G().next(a=>q.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,cs],[l.userId,l.lastAcknowledgedBatchId]);return r.G(Ea,c).next(d=>q.forEach(d,m=>{ve(m.userId===l.userId);const p=pa(this.serializer,m);return gS(e,l.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Jo),r=e.store(ma);return e.store(wa).get(Vf).next(a=>{const l=[];return r.Z((c,d)=>{const m=new Ue(c),p=function(T){return[0,cn(T)]}(m);l.push(t.get(p).next(_=>_?q.resolve():(T=>t.put({targetId:0,path:cn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>q.waitFor(l))})}ci(e,t){e.createObjectStore(rc,{keyPath:Yx});const r=t.store(rc),a=new sy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:cn(m)})}};return t.store(ma).Z({Y:!0},(c,d)=>{const m=new Ue(c);return l(m.popLast())}).next(()=>t.store(Zo).Z({Y:!0},([c,d,m],p)=>{const _=Nr(d);return l(_.popLast())}))}li(e){const t=e.store(Wo);return t.Z((r,a)=>{const l=ju(a),c=hS(this.serializer,l);return t.put(c)})}hi(e,t){const r=t.store(ma),a=[];return r.Z((l,c)=>{const d=t.store(Cf),m=function(T){return T.document?new he(Ue.fromString(T.document.name).popFirst(5)):T.noDocument?he.fromSegments(T.noDocument.path):T.unknownDocument?he.fromSegments(T.unknownDocument.path):ye()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>q.waitFor(a))}Pi(e,t){const r=t.store(hr),a=TS(this.serializer),l=new oy(od.ri,this.serializer.Tt);return r.G().next(c=>{const d=new Map;return c.forEach(m=>{var p;let _=(p=d.get(m.userId))!==null&&p!==void 0?p:xe();pa(this.serializer,m).keys().forEach(T=>_=_.add(T)),d.set(m.userId,_)}),q.forEach(d,(m,p)=>{const _=new $t(p),T=sd.It(this.serializer,_),w=l.getIndexManager(_),b=ad.It(_,this.serializer,w,l.referenceDelegate);return new AS(a,b,T,w).recalculateAndSaveOverlaysForDocumentKeys(new ep(t,xn.ae),m).next()})})}}function C0(s){s.createObjectStore(Jo,{keyPath:Kx}).createIndex(qp,$x,{unique:!0}),s.createObjectStore(Wo,{keyPath:"targetId"}).createIndex(uw,Qx,{unique:!0}),s.createObjectStore(wa)}const rs="IndexedDbPersistence",Pg=18e5,Lg=5e3,kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wS="main";class ly{constructor(e,t,r,a,l,c,d,m,p,_,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=l,this.window=c,this.document=d,this.Ii=p,this.Ei=_,this.di=T,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=w=>Promise.resolve(),!ly.D())throw new ie($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dV(this,a),this.gi=t+wS,this.serializer=new cS(m),this.pi=new Mr(this.gi,this.di,new bV(this.serializer)),this.jr=new tV,this.Hr=new uV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TS(this.serializer),this.Yr=new eV,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,_===!1&&Rt(rs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie($.FAILED_PRECONDITION,kg);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new xn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(bs(e))return se(rs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se(rs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Uu(e).get(Vo).next(t=>q.resolve(this.Ni(t)))}Bi(e){return uf(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Pg)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=qt(t,el);return r.G().next(a=>{const l=this.qi(a,Pg),c=a.filter(d=>l.indexOf(d)===-1);return q.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?q.resolve(!0):Uu(e).get(Vo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ie($.FAILED_PRECONDITION,kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).G().next(r=>this.qi(r,Lg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se(rs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Ec,el],e=>{const t=new ep(e,xn.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>uf(e).G().next(t=>this.qi(t,Pg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return ad.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lV(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return sd.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){se(rs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?hC:m===16?cC:m===15?Gp:m===14?gw:m===13?mw:m===12?uC:m===11?dw:void ye()}(this.di);let c;return this.pi.runTransaction(e,a,l,d=>(c=new ep(d,this.Gr?this.Gr.next():xn.ae),t==="readwrite-primary"?this.Fi(c).next(m=>!!m||this.Mi(c)).next(m=>{if(!m)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ie($.FAILED_PRECONDITION,rw);return r(c)}).next(m=>this.Oi(c).next(()=>m)):this.ji(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}ji(e){return Uu(e).get(Vo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Lg)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie($.FAILED_PRECONDITION,kg)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uu(e).put(Vo,t)}static D(){return Mr.D()}xi(e){const t=Uu(e);return t.get(Vo).next(r=>this.Ni(r)?(se(rs,"Releasing primary lease."),t.delete(Vo)):q.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const t=/(?:Version|Mobile)\/1[456]/;CA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return se(rs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt(rs,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uu(s){return qt(s,Ec)}function uf(s){return qt(s,el)}function uy(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=a}static Yi(e,t){let r=xe(),a=xe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new cy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return CA()?8:sw(Rf())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new RV;return this._s(e,t,c).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,c,d.size)})}).next(()=>l.result)}us(e,t,r,a){return r.documentReadCount<this.es?(Uo()<=ze.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),q.resolve()):(Uo()<=ze.DEBUG&&se("QueryEngine","Query:",Bo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ts*a?(Uo()<=ze.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):q.resolve())}rs(e,t){if(t0(t))return q.resolve(null);let r=An(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Lf(t,null,"F"),r=An(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=xe(...l);return this.ns.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const p=this.cs(t,d);return this.ls(t,p,c,m.readTime)?this.rs(e,Lf(t,null,"F")):this.hs(e,p,t,m)}))})))}ss(e,t,r,a){return t0(t)||a.isEqual(Te.min())?q.resolve(null):this.ns.getDocuments(e,r).next(l=>{const c=this.cs(t,l);return this.ls(t,c,r,a)?q.resolve(null):(Uo()<=ze.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bo(t)),this.hs(e,c,t,tw(a,Xo)).next(d=>d))})}cs(e,t){let r=new et(Lw(e));return t.forEach((a,l)=>{wc(e,l)&&(r=r.add(l))}),r}ls(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,r){return Uo()<=ze.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Bo(t)),this.ns.getDocumentsMatchingQuery(e,t,jn.min(),r)}hs(e,t,r,a){return this.ns.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="LocalStore",IV=3e8;class DV{constructor(e,t,r,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new ot(Ie),this.Is=new wi(l=>Ra(l),Tc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AS(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function bS(s,e,t,r){return new DV(s,e,t,r)}async function RS(s,e){const t=me(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=xe();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(p=>({Rs:p,removedBatchIds:c,addedBatchIds:d}))})})}function xV(s,e){const t=me(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,w=T.keys();let b=q.resolve();return w.forEach(V=>{b=b.next(()=>_.getEntry(m,V)).next(U=>{const k=p.docVersions.get(V);ve(k!==null),U.version.compareTo(k)<0&&(T.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))})}),b.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=xe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function IS(s){const e=me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function CV(s,e){const t=me(s),r=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((_,T)=>{const w=a.get(T);if(!w)return;d.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,T)));let b=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(At.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(_.resumeToken,r)),a=a.insert(T,b),function(U,k,H){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=IV?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(w,b,_)&&d.push(t.Hr.updateTargetData(l,b))});let m=Vn(),p=xe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(DS(l,c,e.documentUpdates).next(_=>{m=_.Vs,p=_.fs})),!r.isEqual(Te.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return q.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ts=a,l))}function DS(s,e,t){let r=xe(),a=xe();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let c=Vn();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):se(hy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Vs:c,fs:a}})}function VV(s,e){const t=me(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ol(s,e){const t=me(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Hr.getTargetData(r,e).next(l=>l?(a=l,q.resolve(a)):t.Hr.allocateTargetId(r).next(c=>(a=new di(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ts.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ll(s,e,t){const r=me(s),a=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!bs(c))throw c;se(hy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ts=r.Ts.remove(e),r.Is.delete(a.target)}function qf(s,e,t){const r=me(s);let a=Te.min(),l=xe();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=me(m),w=T.Is.get(_);return w!==void 0?q.resolve(T.Ts.get(w)):T.Hr.getTargetData(p,_)}(r,c,An(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ps.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:xe())).next(d=>(VS(r,Pw(e),d),{documents:d,gs:l})))}function xS(s,e){const t=me(s),r=me(t.Hr),a=t.Ts.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.lt(l,e).next(c=>c?c.target:null))}function CS(s,e){const t=me(s),r=t.Es.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ds.getAllFromCollectionGroup(a,e,tw(r,Xo),Number.MAX_SAFE_INTEGER)).then(a=>(VS(t,e,a),a))}function VS(s,e,t){let r=s.Es.get(e)||Te.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Es.set(e,r)}async function NV(s,e,t,r){const a=me(s);let l=xe(),c=Vn();for(const p of t){const _=e.ps(p.metadata.name);p.document&&(l=l.add(_));const T=e.ys(p);T.setReadTime(e.ws(p.metadata.readTime)),c=c.insert(_,T)}const d=a.ds.newChangeBuffer({trackRemovals:!0}),m=await ol(a,function(_){return An(yl(Ue.fromString(`__bundle__/docs/${_}`)))}(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>DS(p,d,c).next(_=>(d.apply(p),_)).next(_=>a.Hr.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Hr.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,_.Vs,_.fs)).next(()=>_.Vs)))}async function OV(s,e,t=xe()){const r=await ol(s,An(ry(e.bundledQuery))),a=me(s);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=It(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Yr.saveNamedQuery(l,e);const d=r.withResumeToken(At.EMPTY_BYTE_STRING,c);return a.Ts=a.Ts.insert(d.targetId,d),a.Hr.updateTargetData(l,d).next(()=>a.Hr.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Hr.addMatchingKeys(l,t,r.targetId)).next(()=>a.Yr.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firestore_clients";function V0(s,e){return`${NS}_${s}_${e}`}const OS="firestore_mutations";function N0(s,e,t){let r=`${OS}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const MS="firestore_targets";function Ug(s,e){return`${MS}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="SharedClientState";class jf{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ss(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ie(a.error.code,a.error.message))),c?new jf(e,t,a.state,l):(Rt(Vr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $u{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ss(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ie(r.error.code,r.error.message))),l?new $u(e,r.state,a):(Rt(Vr,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ff{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Yp();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=aw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Ff(e,l):(Rt(Vr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fy(t.clientId,t.onlineState):(Rt(Vr,`Failed to parse online state: ${e}`),null)}}class gp{constructor(){this.activeTargetIds=Yp()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,t,r,a,l){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ot(Ie),this.started=!1,this.Os=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ns=V0(this.persistenceKey,this.Cs),this.Bs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new gp),this.Ls=new RegExp(`^${NS}_${c}_([^_]*)$`),this.ks=new RegExp(`^${OS}_${c}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${MS}_${c}_(\\d+)$`),this.Qs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.$s=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const a=this.getItem(V0(this.persistenceKey,r));if(a){const l=Ff.Ss(r,a);l&&(this.xs=this.xs.insert(l.clientId,l))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const r=this.Ks(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ug(this.persistenceKey,e));if(a){const l=$u.Ss(e,a);l&&(r=l.state)}}return t&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.js(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se(Vr,"READ",e,t),t}setItem(e,t){se(Vr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){se(Vr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(se(Vr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Ks(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(l){let c=xn.ae;if(l!=null)try{const d=JSON.parse(l);ve(typeof d=="number"),c=d}catch(d){Rt(Vr,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==xn.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(a=>this.syncEngine.ao(a)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,r){const a=new jf(this.currentUser,e,t,r),l=N0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.bs())}js(e){const t=N0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const a=Ug(this.persistenceKey,e),l=new $u(e,t,r);this.setItem(a,l.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Ff.Ss(r,t)}ro(e,t){const r=this.ks.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return jf.Ss(new $t(l),a,t)}so(e,t){const r=this.qs.exec(e),a=Number(r[1]);return $u.Ss(a,t)}Ks(e){return fy.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);se(Vr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),a=this.Gs(this.xs),l=this.Gs(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.lo(c,d).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=Yp();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class PS{constructor(){this.ho=new gp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new gp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="ConnectivityMonitor";class M0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){se(O0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){se(O0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf=null;function pp(){return cf===null?cf=function(){return 268435456+Math.round(2147483648*Math.random())}():cf++,"0x"+cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="RestConnection",PV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LV{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${a}`,this.wo=this.databaseId.database===tp?`project_id=${r}`:`project_id=${r}&database_id=${a}`}So(e,t,r,a,l){const c=pp(),d=this.bo(e,t.toUriEncodedString());se(zg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,a,l),this.vo(e,d,m,r).then(p=>(se(zg,`Received RPC '${e}' ${c}: `,p),p),p=>{throw kr(zg,`RPC '${e}' ${c} failed with error: `,p,"url: ",d,"request:",r),p})}Co(e,t,r,a,l,c){return this.So(e,t,r,a,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}bo(e,t){const r=PV[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class UV extends LV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,a){const l=pp();return new Promise((c,d)=>{const m=new KA;m.setWithCredentials(!0),m.listenOnce($A.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case df.NO_ERROR:const _=m.getResponseJson();se(ln,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case df.TIMEOUT:se(ln,`RPC '${e}' ${l} timed out`),d(new ie($.DEADLINE_EXCEEDED,"Request time out"));break;case df.HTTP_ERROR:const T=m.getStatus();if(se(ln,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const V=function(k){const H=k.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(H)>=0?H:$.UNKNOWN}(b.status);d(new ie(V,b.message))}else d(new ie($.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ie($.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{se(ln,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);se(ln,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,r,15)})}Wo(e,t,r){const a=pp(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZA(),d=XA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");se(ln,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);let w=!1,b=!1;const V=new kV({Fo:k=>{b?se(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(w||(se(ln,`Opening RPC '${e}' stream ${a} transport.`),T.open(),w=!0),se(ln,`RPC '${e}' stream ${a} sending:`,k),T.send(k))},Mo:()=>T.close()}),U=(k,H,re)=>{k.listen(H,Z=>{try{re(Z)}catch(pe){setTimeout(()=>{throw pe},0)}})};return U(T,Bu.EventType.OPEN,()=>{b||(se(ln,`RPC '${e}' stream ${a} transport opened.`),V.Qo())}),U(T,Bu.EventType.CLOSE,()=>{b||(b=!0,se(ln,`RPC '${e}' stream ${a} transport closed`),V.Uo())}),U(T,Bu.EventType.ERROR,k=>{b||(b=!0,kr(ln,`RPC '${e}' stream ${a} transport errored:`,k),V.Uo(new ie($.UNAVAILABLE,"The operation could not be completed")))}),U(T,Bu.EventType.MESSAGE,k=>{var H;if(!b){const re=k.data[0];ve(!!re);const Z=re,pe=(Z==null?void 0:Z.error)||((H=Z[0])===null||H===void 0?void 0:H.error);if(pe){se(ln,`RPC '${e}' stream ${a} received error:`,pe);const le=pe.status;let ge=function(I){const N=Mt[I];if(N!==void 0)return Yw(N)}(le),C=pe.message;ge===void 0&&(ge=$.INTERNAL,C="Unknown error status: "+le+" with message "+pe.message),b=!0,V.Uo(new ie(ge,C)),T.close()}else se(ln,`RPC '${e}' stream ${a} received:`,re),V.Ko(re)}}),U(d,YA.STAT_EVENT,k=>{k.stat===$g.PROXY?se(ln,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===$g.NOPROXY&&se(ln,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{V.$o()},0),V}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){return typeof window<"u"?window:null}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(s){return new FC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-r);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="PersistentStream";class kS{constructor(e,t,r,a,l,c,d,m){this.Ti=e,this.n_=r,this.r_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dy(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Rt(t.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.i_===t&&this.V_(r,a)},r=>{e(()=>{const a=new ie($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(a)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{r(()=>this.m_(a))}),this.stream.onMessage(a=>{r(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return se(P0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(se(P0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BV extends kS{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=QC(this.serializer,e),r=function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?It(c.readTime):Te.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=cp(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Mf(m)?{documents:iS(l,m)}:{query:sS(l,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Ww(l,c.resumeToken);const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=al(l,c.snapshotVersion.toTimestamp());const p=lp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const r=$C(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=cp(this.serializer),t.removeTarget=e,this.I_(t)}}class zV extends kS{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=KC(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=cp(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>uc(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{}class jV extends qV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,up(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie($.UNKNOWN,l.toString())})}Co(e,t,r,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(e,up(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie($.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class FV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rt(t),this.N_=!1):se("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class GV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{r.enqueueAndForget(async()=>{Is(this)&&(se(Na,"Restarting streams for network reachability change."),await async function(m){const p=me(m);p.W_.add(4),await El(p),p.j_.set("Unknown"),p.W_.delete(4),await Dc(p)}(this))})}),this.j_=new FV(r,a)}}async function Dc(s){if(Is(s))for(const e of s.G_)await e(!0)}async function El(s){for(const e of s.G_)await e(!1)}function ld(s,e){const t=me(s);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),py(t)?gy(t):Al(t).c_()&&my(t,e))}function ul(s,e){const t=me(s),r=Al(t);t.K_.delete(e),r.c_()&&US(t,e),t.K_.size===0&&(r.c_()?r.P_():Is(t)&&t.j_.set("Unknown"))}function my(s,e){if(s.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(s).y_(e)}function US(s,e){s.H_.Ne(e),Al(s).w_(e)}function gy(s){s.H_=new BC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>s.K_.get(e)||null,it:()=>s.datastore.serializer.databaseId}),Al(s).start(),s.j_.B_()}function py(s){return Is(s)&&!Al(s).u_()&&s.K_.size>0}function Is(s){return me(s).W_.size===0}function BS(s){s.H_=void 0}async function HV(s){s.j_.set("Online")}async function QV(s){s.K_.forEach((e,t)=>{my(s,e)})}async function KV(s,e){BS(s),py(s)?(s.j_.q_(e),gy(s)):s.j_.set("Unknown")}async function $V(s,e,t){if(s.j_.set("Online"),e instanceof Zw&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.K_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.K_.delete(d),a.H_.removeTarget(d))}(s,e)}catch(r){se(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gf(s,r)}else if(e instanceof Tf?s.H_.We(e):e instanceof Xw?s.H_.Ze(e):s.H_.je(e),!t.isEqual(Te.min()))try{const r=await IS(s.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.H_.ot(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.K_.get(p);_&&l.K_.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.K_.get(m);if(!_)return;l.K_.set(m,_.withResumeToken(At.EMPTY_BYTE_STRING,_.snapshotVersion)),US(l,m);const T=new di(_.target,m,p,_.sequenceNumber);my(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(s,t)}catch(r){se(Na,"Failed to raise snapshot:",r),await Gf(s,r)}}async function Gf(s,e,t){if(!bs(e))throw e;s.W_.add(1),await El(s),s.j_.set("Offline"),t||(t=()=>IS(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{se(Na,"Retrying IndexedDB access"),await t(),s.W_.delete(1),await Dc(s)})}function zS(s,e){return e().catch(t=>Gf(s,t,e))}async function Tl(s){const e=me(s),t=Es(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:cs;for(;YV(e);)try{const a=await VV(e.localStore,r);if(a===null){e.U_.length===0&&t.P_();break}r=a.batchId,XV(e,a)}catch(a){await Gf(e,a)}qS(e)&&jS(e)}function YV(s){return Is(s)&&s.U_.length<10}function XV(s,e){s.U_.push(e);const t=Es(s);t.c_()&&t.S_&&t.b_(e.mutations)}function qS(s){return Is(s)&&!Es(s).u_()&&s.U_.length>0}function jS(s){Es(s).start()}async function ZV(s){Es(s).C_()}async function WV(s){const e=Es(s);for(const t of s.U_)e.b_(t.mutations)}async function JV(s,e,t){const r=s.U_.shift(),a=Jp.from(r,e,t);await zS(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await Tl(s)}async function e2(s,e){e&&Es(s).S_&&await async function(r,a){if(function(c){return $w(c)&&c!==$.ABORTED}(a.code)){const l=r.U_.shift();Es(r).h_(),await zS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Tl(r)}}(s,e),qS(s)&&jS(s)}async function L0(s,e){const t=me(s);t.asyncQueue.verifyOperationInProgress(),se(Na,"RemoteStore received new credentials");const r=Is(t);t.W_.add(3),await El(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Dc(t)}async function yp(s,e){const t=me(s);e?(t.W_.delete(2),await Dc(t)):e||(t.W_.add(2),await El(t),t.j_.set("Unknown"))}function Al(s){return s.J_||(s.J_=function(t,r,a){const l=me(t);return l.M_(),new BV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:HV.bind(null,s),No:QV.bind(null,s),Lo:KV.bind(null,s),p_:$V.bind(null,s)}),s.G_.push(async e=>{e?(s.J_.h_(),py(s)?gy(s):s.j_.set("Unknown")):(await s.J_.stop(),BS(s))})),s.J_}function Es(s){return s.Y_||(s.Y_=function(t,r,a){const l=me(t);return l.M_(),new zV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:ZV.bind(null,s),Lo:e2.bind(null,s),D_:WV.bind(null,s),v_:JV.bind(null,s)}),s.G_.push(async e=>{e?(s.Y_.h_(),await Tl(s)):(await s.Y_.stop(),s.U_.length>0&&(se(Na,`Stopping write stream with ${s.U_.length} pending writes`),s.U_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new yy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wl(s,e){if(Rt("AsyncQueue",`${e}: ${s}`),bs(s))return new ie($.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Z_=new ot(he.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ye():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class cl{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new cl(e,t,Go.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class n2{constructor(){this.queries=U0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const a=me(t),l=a.queries;a.queries=U0(),l.forEach((c,d)=>{for(const m of d.ta)m.onError(r)})})(this,new ie($.ABORTED,"Firestore shutting down"))}}function U0(){return new wi(s=>Mw(s),Ac)}async function _y(s,e){const t=me(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(r=2):(l=new t2,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=wl(c,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&Ey(t)}async function vy(s,e){const t=me(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function r2(s,e){const t=me(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ta)d.oa(a)&&(r=!0);c.ea=a}}r&&Ey(t)}function i2(s,e,t){const r=me(s),a=r.queries.get(e);if(a)for(const l of a.ta)l.onError(t);r.queries.delete(e)}function Ey(s){s.ia.forEach(e=>{e.next()})}var _p,B0;(B0=_p||(_p={}))._a="default",B0.Cache="cache";class Ty{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.serializer=e}ps(e){return Pr(this.serializer,e)}ys(e){return e.metadata.exists?rS(this.serializer,e.document,!1):lt.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return It(e)}}class a2{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FS(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Ue.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new z0(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.ps(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||xe()).add(l);t.set(c,d)}}return t}async complete(){const e=await NV(this.localStore,new z0(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await OV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function FS(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.key=e}}class HS{constructor(e){this.key=e}}class QS{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=xe(),this.mutatedKeys=xe(),this.ya=Lw(e),this.wa=new Go(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new k0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const w=a.get(_),b=wc(this.query,T)?T:null,V=!!w&&this.mutatedKeys.has(w.key),U=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let k=!1;w&&b?w.data.isEqual(b.data)?V!==U&&(r.track({type:3,doc:b}),k=!0):this.va(w,b)||(r.track({type:2,doc:b}),k=!0,(m&&this.ya(b,m)>0||p&&this.ya(b,p)<0)&&(d=!0)):!w&&b?(r.track({type:0,doc:b}),k=!0):w&&!b&&(r.track({type:1,doc:w}),k=!0,(m||p)&&(d=!0)),k&&(b?(c=c.add(b),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:c,Da:r,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((_,T)=>function(b,V){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return U(b)-U(V)}(_.type,T.type)||this.ya(_.doc,T.doc)),this.Ca(r),a=a!=null&&a;const d=t&&!a?this.Fa():[],m=this.pa.size===0&&this.current&&!a?1:0,p=m!==this.ga;return this.ga=m,c.length!==0||p?{snapshot:new cl(this.query,e.wa,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new k0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=xe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new HS(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new GS(r))}),t}Oa(e){this.fa=e.gs,this.pa=xe();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return cl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ds="SyncEngine";class o2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class l2{constructor(e){this.key=e,this.Ba=!1}}class u2{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new wi(d=>Mw(d),Ac),this.qa=new Map,this.Qa=new Set,this.$a=new ot(he.comparator),this.Ua=new Map,this.Ka=new ay,this.Wa={},this.Ga=new Map,this.za=Va.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function c2(s,e,t=!0){const r=ud(s);let a;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await KS(r,e,t,!0),a}async function h2(s,e){const t=ud(s);await KS(t,e,!0,!1)}async function KS(s,e,t,r){const a=await ol(s.localStore,An(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Ay(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&ld(s.remoteStore,a),d}async function Ay(s,e,t,r,a){s.Ha=(T,w,b)=>async function(U,k,H,re){let Z=k.view.ba(H);Z.ls&&(Z=await qf(U.localStore,k.query,!1).then(({documents:C})=>k.view.ba(C,Z)));const pe=re&&re.targetChanges.get(k.targetId),le=re&&re.targetMismatches.get(k.targetId)!=null,ge=k.view.applyChanges(Z,U.isPrimaryClient,pe,le);return vp(U,k.targetId,ge.Ma),ge.snapshot}(s,T,w,b);const l=await qf(s.localStore,e,!0),c=new QS(e,l.gs),d=c.ba(l.documents),m=Rc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(d,s.isPrimaryClient,m);vp(s,t,p.Ma);const _=new o2(e,t,c);return s.ka.set(e,_),s.qa.has(t)?s.qa.get(t).push(e):s.qa.set(t,[e]),p.snapshot}async function f2(s,e,t){const r=me(s),a=r.ka.get(e),l=r.qa.get(a.targetId);if(l.length>1)return r.qa.set(a.targetId,l.filter(c=>!Ac(c,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ll(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&ul(r.remoteStore,a.targetId),hl(r,a.targetId)}).catch(Ss)):(hl(r,a.targetId),await ll(r.localStore,a.targetId,!0))}async function d2(s,e){const t=me(s),r=t.ka.get(e),a=t.qa.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ul(t.remoteStore,r.targetId))}async function m2(s,e,t){const r=Ry(s);try{const a=await function(c,d){const m=me(c),p=gt.now(),_=d.reduce((b,V)=>b.add(V.key),xe());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",b=>{let V=Vn(),U=xe();return m.ds.getEntries(b,_).next(k=>{V=k,V.forEach((H,re)=>{re.isValidDocument()||(U=U.add(H))})}).next(()=>m.localDocuments.getOverlayedDocuments(b,V)).next(k=>{T=k;const H=[];for(const re of d){const Z=LC(re,T.get(re.key).overlayedDocument);Z!=null&&H.push(new Si(re.key,Z,bw(Z.value.mapValue),mt.exists(!0)))}return m.mutationQueue.addMutationBatch(b,p,H,d)}).next(k=>{w=k;const H=k.applyToLocalDocumentSet(T,U);return m.documentOverlayCache.saveOverlays(b,k.batchId,H)})}).then(()=>({batchId:w.batchId,changes:Uw(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Wa[c.currentUser.toKey()];p||(p=new ot(Ie)),p=p.insert(d,m),c.Wa[c.currentUser.toKey()]=p}(r,a.batchId,t),await bi(r,a.changes),await Tl(r.remoteStore)}catch(a){const l=wl(a,"Failed to persist write");t.reject(l)}}async function $S(s,e){const t=me(s);try{const r=await CV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Ua.get(l);c&&(ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.Ba=!0:a.modifiedDocuments.size>0?ve(c.Ba):a.removedDocuments.size>0&&(ve(c.Ba),c.Ba=!1))}),await bi(t,r,e)}catch(r){await Ss(r)}}function q0(s,e,t){const r=me(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ka.forEach((l,c)=>{const d=c.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=me(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const w of T.ta)w.sa(d)&&(p=!0)}),p&&Ey(m)}(r.eventManager,e),a.length&&r.La.p_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g2(s,e,t){const r=me(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Ua.get(e),l=a&&a.key;if(l){let c=new ot(he.comparator);c=c.insert(l,lt.newNoDocument(l,Te.min()));const d=xe().add(l),m=new bc(Te.min(),new Map,new ot(Ie),c,d);await $S(r,m),r.$a=r.$a.remove(l),r.Ua.delete(e),by(r)}else await ll(r.localStore,e,!1).then(()=>hl(r,e,t)).catch(Ss)}async function p2(s,e){const t=me(s),r=e.batch.batchId;try{const a=await xV(t.localStore,e);Sy(t,r,null),wy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bi(t,a)}catch(a){await Ss(a)}}async function y2(s,e,t){const r=me(s);try{const a=await function(c,d){const m=me(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(ve(T!==null),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(r.localStore,e);Sy(r,e,t),wy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bi(r,a)}catch(a){await Ss(a)}}async function _2(s,e){const t=me(s);Is(t.remoteStore)||se(Ds,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(c){const d=me(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(r===cs)return void e.resolve();const a=t.Ga.get(r)||[];a.push(e),t.Ga.set(r,a)}catch(r){const a=wl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function wy(s,e){(s.Ga.get(e)||[]).forEach(t=>{t.resolve()}),s.Ga.delete(e)}function Sy(s,e,t){const r=me(s);let a=r.Wa[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Wa[r.currentUser.toKey()]=a}}function hl(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.qa.get(e))s.ka.delete(r),t&&s.La.Ja(r,t);s.qa.delete(e),s.isPrimaryClient&&s.Ka.br(e).forEach(r=>{s.Ka.containsKey(r)||YS(s,r)})}function YS(s,e){s.Qa.delete(e.path.canonicalString());const t=s.$a.get(e);t!==null&&(ul(s.remoteStore,t),s.$a=s.$a.remove(e),s.Ua.delete(t),by(s))}function vp(s,e,t){for(const r of t)r instanceof GS?(s.Ka.addReference(r.key,e),v2(s,r)):r instanceof HS?(se(Ds,"Document no longer in limbo: "+r.key),s.Ka.removeReference(r.key,e),s.Ka.containsKey(r.key)||YS(s,r.key)):ye()}function v2(s,e){const t=e.key,r=t.path.canonicalString();s.$a.get(t)||s.Qa.has(r)||(se(Ds,"New document in limbo: "+t),s.Qa.add(r),by(s))}function by(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const e=s.Qa.values().next().value;s.Qa.delete(e);const t=new he(Ue.fromString(e)),r=s.za.next();s.Ua.set(r,new l2(t)),s.$a=s.$a.insert(t,r),ld(s.remoteStore,new di(An(yl(t.path)),r,"TargetPurposeLimboResolution",xn.ae))}}async function bi(s,e,t){const r=me(s),a=[],l=[],c=[];r.ka.isEmpty()||(r.ka.forEach((d,m)=>{c.push(r.Ha(m,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=cy.Yi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),r.La.p_(a),await async function(m,p){const _=me(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>q.forEach(p,w=>q.forEach(w.Hi,b=>_.persistence.referenceDelegate.addReference(T,w.targetId,b)).next(()=>q.forEach(w.Ji,b=>_.persistence.referenceDelegate.removeReference(T,w.targetId,b)))))}catch(T){if(!bs(T))throw T;se(hy,"Failed to update sequence numbers: "+T)}for(const T of p){const w=T.targetId;if(!T.fromCache){const b=_.Ts.get(w),V=b.snapshotVersion,U=b.withLastLimboFreeSnapshotVersion(V);_.Ts=_.Ts.insert(w,U)}}}(r.localStore,l))}async function E2(s,e){const t=me(s);if(!t.currentUser.isEqual(e)){se(Ds,"User change. New user:",e.toKey());const r=await RS(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(d=>{d.forEach(m=>{m.reject(new ie($.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bi(t,r.Rs)}}function T2(s,e){const t=me(s),r=t.Ua.get(e);if(r&&r.Ba)return xe().add(r.key);{let a=xe();const l=t.qa.get(e);if(!l)return a;for(const c of l){const d=t.ka.get(c);a=a.unionWith(d.view.Sa)}return a}}async function A2(s,e){const t=me(s),r=await qf(t.localStore,e.query,!0),a=e.view.Oa(r);return t.isPrimaryClient&&vp(t,e.targetId,a.Ma),a}async function w2(s,e){const t=me(s);return CS(t.localStore,e).then(r=>bi(t,r))}async function S2(s,e,t,r){const a=me(s),l=await function(d,m){const p=me(d),_=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.Ln(T,m).next(w=>w?p.localDocuments.getDocuments(T,w):q.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Tl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Sy(a,e,r||null),wy(a,e),function(d,m){me(me(d).mutationQueue).qn(m)}(a.localStore,e)):ye(),await bi(a,l)):se(Ds,"Cannot apply mutation batch with id: "+e)}async function b2(s,e){const t=me(s);if(ud(t),Ry(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await j0(t,r.toArray());t.ja=!0,await yp(t.remoteStore,!0);for(const l of a)ld(t.remoteStore,l)}else if(e===!1&&t.ja!==!1){const r=[];let a=Promise.resolve();t.qa.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(hl(t,c),ll(t.localStore,c,!0))),ul(t.remoteStore,c)}),await a,await j0(t,r),function(c){const d=me(c);d.Ua.forEach((m,p)=>{ul(d.remoteStore,p)}),d.Ka.Dr(),d.Ua=new Map,d.$a=new ot(he.comparator)}(t),t.ja=!1,await yp(t.remoteStore,!1)}}async function j0(s,e,t){const r=me(s),a=[],l=[];for(const c of e){let d;const m=r.qa.get(c);if(m&&m.length!==0){d=await ol(r.localStore,An(m[0]));for(const p of m){const _=r.ka.get(p),T=await A2(r,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await xS(r.localStore,c);d=await ol(r.localStore,p),await Ay(r,XS(p),c,!1,d.resumeToken)}a.push(d)}return r.La.p_(l),a}function XS(s){return Ow(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function R2(s){return function(t){return me(me(t).persistence).zi()}(me(s).localStore)}async function I2(s,e,t,r){const a=me(s);if(a.ja)return void se(Ds,"Ignoring unexpected query state notification.");const l=a.qa.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await CS(a.localStore,Pw(l[0])),d=bc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",At.EMPTY_BYTE_STRING);await bi(a,c,d);break}case"rejected":await ll(a.localStore,e,!0),hl(a,e,r);break;default:ye()}}async function D2(s,e,t){const r=ud(s);if(r.ja){for(const a of e){if(r.qa.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){se(Ds,"Adding an already active target "+a);continue}const l=await xS(r.localStore,a),c=await ol(r.localStore,l);await Ay(r,XS(l),c.targetId,!1,c.resumeToken),ld(r.remoteStore,c)}for(const a of t)r.qa.has(a)&&await ll(r.localStore,a,!1).then(()=>{ul(r.remoteStore,a),hl(r,a)}).catch(Ss)}}function ud(s){const e=me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g2.bind(null,e),e.La.p_=r2.bind(null,e.eventManager),e.La.Ja=i2.bind(null,e.eventManager),e}function Ry(s){const e=me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y2.bind(null,e),e}function x2(s,e,t){const r=me(s);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(b,V){const U=me(b),k=It(V.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",H=>U.Yr.getBundleMetadata(H,V.id)).then(H=>!!H&&H.createTime.compareTo(k)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(FS(m));const p=new a2(m,l.localStore,c.serializer);let _=await c.Ya();for(;_;){const w=await p.Aa(_);w&&d._updateProgress(w),_=await c.Ya()}const T=await p.complete();return await bi(l,T.ma,void 0),await function(b,V){const U=me(b);return U.persistence.runTransaction("Save bundle","readwrite",k=>U.Yr.saveBundleMetadata(k,V))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Va)}catch(m){return kr(Ds,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ic(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return bS(this.persistence,new SS,e.initialUser,this.serializer)}Xa(e){return new oy(od.ri,this.serializer)}Za(e){return new PS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class C2 extends cc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ve(this.persistence.referenceDelegate instanceof zf);const r=this.persistence.referenceDelegate.garbageCollector;return new _S(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new oy(r=>zf.ri(r,t),this.serializer)}}class ZS extends cc{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Ry(this.ru.syncEngine),await Tl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return bS(this.persistence,new SS,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new _S(r,e.asyncQueue,t)}nu(e,t){const r=new Bx(t,this.persistence);return new Ux(e.asyncQueue,r)}Xa(e){const t=uy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new ly(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LS(),Af(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new PS}}class V2 extends ZS{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={uo:S2.bind(null,t),co:I2.bind(null,t),lo:D2.bind(null,t),zi:R2.bind(null,t),ao:w2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await b2(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=LS();if(!Bg.D(t))throw new ie($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class hc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=E2.bind(null,this.syncEngine),await yp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n2}()}createDatastore(e){const t=Ic(e.databaseInfo.databaseId),r=function(l){return new UV(l)}(e.databaseInfo);return function(l,c,d,m){return new jV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new GV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>q0(this.syncEngine,t,0),function(){return M0.D()?new M0:new MV}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new u2(a,l,c,d,m,p);return _&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=me(a);se(Na,"RemoteStore shutting down."),l.W_.add(5),await El(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hc.provider={build:()=>new hc};function F0(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new nn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const a=await this.lu(r);return new s2(JSON.parse(a),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=me(a),d={documents:l.map(T=>lc(c.serializer,T))},m=await c.Co("BatchGetDocuments",c.serializer.databaseId,Ue.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const w=HC(c.serializer,T);p.set(w.key.toString(),w)});const _=[];return l.forEach(T=>{const w=p.get(T.toString());ve(!!w),_.push(w)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const a=he.fromPath(r);this.mutations.push(new Zp(a,this.precondition(a)))}),await async function(r,a){const l=me(r),c={writes:a.map(d=>uc(l.serializer,d))};await l.So("Commit",l.serializer.databaseId,Ue.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ye();t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ie($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?mt.exists(!1):mt.updateTime(t):mt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new ie($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(t)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Tu=r.maxAttempts,this.a_=new dy(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new O2(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(a=>{this.Au(a)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!vc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$w(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class P2{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=$t.UNAUTHENTICATED,this.clientId=JA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{se(Ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(se(Ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qg(s,e){s.asyncQueue.verifyOperationInProgress(),se(Ts,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await RS(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function G0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Iy(s);se(Ts,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>L0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>L0(e.remoteStore,a)),s._onlineComponents=e}async function Iy(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){se(Ts,"Using user provided OfflineComponentProvider");try{await qg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;kr("Error using user provided cache. Falling back to memory cache: "+t),await qg(s,new cc)}}else se(Ts,"Using default OfflineComponentProvider"),await qg(s,new C2(void 0));return s._offlineComponents}async function hd(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(se(Ts,"Using user provided OnlineComponentProvider"),await G0(s,s._uninitializedComponentsProvider._online)):(se(Ts,"Using default OnlineComponentProvider"),await G0(s,new hc))),s._onlineComponents}function WS(s){return Iy(s).then(e=>e.persistence)}function Dy(s){return Iy(s).then(e=>e.localStore)}function JS(s){return hd(s).then(e=>e.remoteStore)}function xy(s){return hd(s).then(e=>e.syncEngine)}function L2(s){return hd(s).then(e=>e.datastore)}async function fl(s){const e=await hd(s),t=e.eventManager;return t.onListen=c2.bind(null,e.syncEngine),t.onUnlisten=f2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d2.bind(null,e.syncEngine),t}function k2(s){return s.asyncQueue.enqueue(async()=>{const e=await WS(s),t=await JS(s);return e.setNetworkEnabled(!0),function(a){const l=me(a);return l.W_.delete(0),Dc(l)}(t)})}function U2(s){return s.asyncQueue.enqueue(async()=>{const e=await WS(s),t=await JS(s);return e.setNetworkEnabled(!1),async function(a){const l=me(a);l.W_.add(0),await El(l),l.j_.set("Offline")}(t)})}function B2(s,e){const t=new nn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,_){const T=me(p);return T.persistence.runTransaction("read document","readonly",w=>T.localDocuments.getDocument(w,_))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ie($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=wl(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await Dy(s),e,t)),t.promise}function eb(s,e,t={}){const r=new nn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new cd({next:w=>{_.su(),c.enqueueAndForget(()=>vy(l,T));const b=w.docs.has(d);!b&&w.fromCache?p.reject(new ie($.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&m&&m.source==="server"?p.reject(new ie($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new Ty(yl(d.path),_,{includeMetadataChanges:!0,Ta:!0});return _y(l,T)}(await fl(s),s.asyncQueue,e,t,r)),r.promise}function z2(s,e){const t=new nn;return s.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await qf(a,l,!0),m=new QS(l,d.gs),p=m.ba(d.documents),_=m.applyChanges(p,!1);c.resolve(_.snapshot)}catch(d){const m=wl(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await Dy(s),e,t)),t.promise}function tb(s,e,t={}){const r=new nn;return s.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new cd({next:w=>{_.su(),c.enqueueAndForget(()=>vy(l,T)),w.fromCache&&m.source==="server"?p.reject(new ie($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),T=new Ty(d,_,{includeMetadataChanges:!0,Ta:!0});return _y(l,T)}(await fl(s),s.asyncQueue,e,t,r)),r.promise}function q2(s,e){const t=new cd(e);return s.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).ia.add(l),l.next()}(await fl(s),t)),()=>{t.su(),s.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).ia.delete(l)}(await fl(s),t))}}function j2(s,e,t,r){const a=function(c,d){let m;return m=typeof c=="string"?Up().encode(c):c,function(_,T){return new N2(_,T)}(function(_,T){if(_ instanceof Uint8Array)return F0(_,T);if(_ instanceof ArrayBuffer)return F0(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Ic(e));s.asyncQueue.enqueueAndForget(async()=>{x2(await xy(s),a,r)})}function F2(s,e){return s.asyncQueue.enqueue(async()=>function(r,a){const l=me(r);return l.persistence.runTransaction("Get named query","readonly",c=>l.Yr.getNamedQuery(c,a))}(await Dy(s),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(s,e,t){if(!t)throw new ie($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function rb(s,e,t,r){if(e===!0&&r===!0)throw new ie($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Q0(s){if(!he.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function K0(s){if(he.isDocumentKey(s))throw new ie($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function fd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":ye()}function Ke(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ie($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fd(s);throw new ie($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function ib(s,e){if(e<=0)throw new ie($.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firestore.googleapis.com",$0=!0;class Y0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sb,this.ssl=$0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cV)throw new ie($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ie($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xc{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ix;switch(r.type){case"firstParty":return new Vx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=H0.get(t);r&&(se("ComponentProvider","Removing Datastore"),H0.delete(t),r.terminate())}(this),Promise.resolve()}}function G2(s,e,t,r={}){var a;const l=(s=Ke(s,xc))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:s._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==sb&&l.host!==d&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:r});if(!Ho(m,c)&&(s._setSettings(m),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=$t.MOCK_USER;else{p=K1(r.mockUserToken,(a=s._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new $t(T)}s._authCredentials=new Dx(new WA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class ab{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ab(this.firestore,e,this._query)}},_t=class ob{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ob(this.firestore,e,this._key)}},hs=class lb extends wn{constructor(e,t,r){super(e,t,yl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new he(e))}withConverter(e){return new lb(this.firestore,e,this._path)}};function ub(s,e,...t){if(s=Pt(s),Cy("collection","path",e),s instanceof xc){const r=Ue.fromString(e,...t);return K0(r),new hs(s,null,r)}{if(!(s instanceof _t||s instanceof hs))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ue.fromString(e,...t));return K0(r),new hs(s.firestore,null,r)}}function H2(s,e){if(s=Ke(s,xc),Cy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wn(s,null,function(r){return new Ai(Ue.emptyPath(),r)}(e))}function Hf(s,e,...t){if(s=Pt(s),arguments.length===1&&(e=JA.newId()),Cy("doc","path",e),s instanceof xc){const r=Ue.fromString(e,...t);return Q0(r),new _t(s,null,new he(r))}{if(!(s instanceof _t||s instanceof hs))throw new ie($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ue.fromString(e,...t));return Q0(r),new _t(s.firestore,s instanceof hs?s.converter:null,new he(r))}}function cb(s,e){return s=Pt(s),e=Pt(e),(s instanceof _t||s instanceof hs)&&(e instanceof _t||e instanceof hs)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function hb(s,e){return s=Pt(s),e=Pt(e),s instanceof wn&&e instanceof wn&&s.firestore===e.firestore&&Ac(s._query,e._query)&&s.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="AsyncQueue";class Z0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dy(this,"async_queue_retry"),this.Su=()=>{const r=Af();r&&se(X0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Af();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Af();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new nn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!bs(e))throw e;se(X0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",a),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=yy.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&ye()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ep(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(s,["next","error","complete"])}class Q2{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=-1;let Dt=class extends xc{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Z0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z0(e),this._firestoreClient=void 0,await e}}};function hn(s){if(s._terminated)throw new ie($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fb(s),s._firestoreClient}function fb(s){var e,t,r;const a=s._freezeSettings(),l=function(d,m,p,_){return new mC(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,nb(_.experimentalLongPollingOptions),_.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new P2(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(s._componentsProvider))}function $2(s,e){kr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return db(s,hc.provider,{build:r=>new ZS(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Y2(s){kr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();db(s,hc.provider,{build:t=>new V2(t,e.cacheSizeBytes)})}function db(s,e,t){if((s=Ke(s,Dt))._firestoreClient||s._terminated)throw new ie($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new ie($.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},fb(s)}function X2(s){if(s._initialized&&!s._terminated)throw new ie($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nn;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Mr.D())return Promise.resolve();const a=r+wS;await Mr.delete(a)}(uy(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function Z2(s){return function(t){const r=new nn;return t.asyncQueue.enqueueAndForget(async()=>_2(await xy(t),r)),r.promise}(hn(s=Ke(s,Dt)))}function W2(s){return k2(hn(s=Ke(s,Dt)))}function J2(s){return U2(hn(s=Ke(s,Dt)))}function eN(s,e){const t=hn(s=Ke(s,Dt)),r=new Q2;return j2(t,s._databaseId,e,r),r}function tN(s,e){return F2(hn(s=Ke(s,Dt)),e).then(t=>t?new wn(s,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(At.fromBase64String(e))}catch(t){throw new ie($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Br(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let As=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^__.*__$/;class rN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class mb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Si(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class md{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new md(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.$u(e),a}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:r,Qu:!1});return a.Bu(),a}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Qf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(gb(this.Lu)&&nN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class iN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ic(e)}ju(e,t,r,a=!1){return new md({Lu:e,methodName:t,zu:r,path:dt.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ka(s){const e=s._freezeSettings(),t=Ic(s._databaseId);return new iN(s._databaseId,!!e.ignoreUndefinedProperties,t)}function gd(s,e,t,r,a,l={}){const c=s.ju(l.merge||l.mergeFields?2:0,e,t,a);Uy("Data must be an object, but it was:",c,r);const d=_b(r,c);let m,p;if(l.merge)m=new Cn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const w=Tp(e,T,t);if(!c.contains(w))throw new ie($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Eb(_,w)||_.push(w)}m=new Cn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new rN(new tn(d),m,p)}class Cc extends La{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cc}}function pb(s,e,t){return new md({Lu:3,zu:e.settings.zu,methodName:s._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ny extends La{_toFieldTransform(e){return new Sc(e.path,new il)}isEqual(e){return e instanceof Ny}}class Oy extends La{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=pb(this,e,!0),r=this.Hu.map(l=>Ua(l,t)),a=new Ia(r);return new Sc(e.path,a)}isEqual(e){return e instanceof Oy&&Ho(this.Hu,e.Hu)}}class My extends La{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=pb(this,e,!0),r=this.Hu.map(l=>Ua(l,t)),a=new Da(r);return new Sc(e.path,a)}isEqual(e){return e instanceof My&&Ho(this.Hu,e.Hu)}}class Py extends La{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new sl(e.serializer,qw(e.serializer,this.Ju));return new Sc(e.path,t)}isEqual(e){return e instanceof Py&&this.Ju===e.Ju}}function Ly(s,e,t,r){const a=s.ju(1,e,t);Uy("Data must be an object, but it was:",a,r);const l=[],c=tn.empty();Rs(r,(m,p)=>{const _=By(e,m,t);p=Pt(p);const T=a.Uu(_);if(p instanceof Cc)l.push(_);else{const w=Ua(p,T);w!=null&&(l.push(_),c.set(_,w))}});const d=new Cn(l);return new mb(c,d,a.fieldTransforms)}function ky(s,e,t,r,a,l){const c=s.ju(1,e,t),d=[Tp(e,r,t)],m=[a];if(l.length%2!=0)throw new ie($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(Tp(e,l[w])),m.push(l[w+1]);const p=[],_=tn.empty();for(let w=d.length-1;w>=0;--w)if(!Eb(p,d[w])){const b=d[w];let V=m[w];V=Pt(V);const U=c.Uu(b);if(V instanceof Cc)p.push(b);else{const k=Ua(V,U);k!=null&&(p.push(b),_.set(b,k))}}const T=new Cn(p);return new mb(_,T,c.fieldTransforms)}function yb(s,e,t,r=!1){return Ua(t,s.ju(r?4:3,e))}function Ua(s,e){if(vb(s=Pt(s)))return Uy("Unsupported field value:",e,s),_b(s,e);if(s instanceof La)return function(r,a){if(!gb(a.Lu))throw a.Wu(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Ua(d,a.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(s,e)}return function(r,a){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qw(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=gt.fromDate(r);return{timestampValue:al(a.serializer,l)}}if(r instanceof gt){const l=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:al(a.serializer,l)}}if(r instanceof dd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:Ww(a.serializer,r._byteString)};if(r instanceof _t){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ny(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Vy)return function(c,d){return{mapValue:{fields:{[Hp]:{stringValue:Qp},[tl]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Wu("VectorValues must only contain numeric values.");return Xp(d.serializer,p)})}}}}}}(r,a);throw a.Wu(`Unsupported field value: ${fd(r)}`)}(s,e)}function _b(s,e){const t={};return pw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(s,(r,a)=>{const l=Ua(a,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function vb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof gt||s instanceof dd||s instanceof Br||s instanceof _t||s instanceof La||s instanceof Vy)}function Uy(s,e,t){if(!vb(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=fd(t);throw r==="an object"?e.Wu(s+" a custom object"):e.Wu(s+" "+r)}}function Tp(s,e,t){if((e=Pt(e))instanceof As)return e._internalPath;if(typeof e=="string")return By(s,e);throw Qf("Field path arguments must be of type string or ",s,!1,void 0,t)}const sN=new RegExp("[~\\*/\\[\\]]");function By(s,e,t){if(e.search(sN)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new As(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Qf(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ie($.INVALID_ARGUMENT,d+s+m)}function Eb(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aN extends fc{data(){return super.data()}}function pd(s,e){return typeof e=="string"?By(s,e):e instanceof As?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ie($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zy{}class Vc extends zy{}function is(s,e,...t){let r=[];e instanceof zy&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof qy).length,d=l.filter(m=>m instanceof yd).length;if(c>1||c>0&&d>0)throw new ie($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)s=a._apply(s);return s}class yd extends Vc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new yd(e,t,r)}_apply(e){const t=this._parse(e);return wb(e._query,t),new wn(e.firestore,e.converter,op(e._query,t))}_parse(e){const t=ka(e.firestore);return function(l,c,d,m,p,_,T){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){J0(T,_);const V=[];for(const U of T)V.push(W0(m,l,U));w={arrayValue:{values:V}}}else w=W0(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||J0(T,_),w=yb(d,c,T,_==="in"||_==="not-in");return Be.create(p,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function oN(s,e,t){const r=e,a=pd("where",s);return yd._create(a,r,t)}class qy extends zy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)wb(c,m),c=op(c,m)}(e._query,t),new wn(e.firestore,e.converter,op(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends Vc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oc(l,c)}(e._query,this._field,this._direction);return new wn(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Ai(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function lN(s,e="asc"){const t=e,r=pd("orderBy",s);return jy._create(r,t)}class _d extends Vc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _d(e,t,r)}_apply(e){return new wn(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function uN(s){return ib("limit",s),_d._create("limit",s,"F")}function cN(s){return ib("limitToLast",s),_d._create("limitToLast",s,"L")}class vd extends Vc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vd(e,t,r)}_apply(e){const t=Ab(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(a,l){return new Ai(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function hN(...s){return vd._create("startAt",s,!0)}function fN(...s){return vd._create("startAfter",s,!1)}class Ed extends Vc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=Ab(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(a,l){return new Ai(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function dN(...s){return Ed._create("endBefore",s,!1)}function mN(...s){return Ed._create("endAt",s,!0)}function Ab(s,e,t,r){if(t[0]=Pt(t[0]),t[0]instanceof fc)return function(l,c,d,m,p){if(!m)throw new ie($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Fo(l))if(T.field.isKeyField())_.push(ba(c,m.key));else{const w=m.data.field(T.field);if(ed(w))throw new ie($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const b=T.field.canonicalString();throw new ie($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}_.push(w)}return new vs(_,p)}(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=ka(s.firestore);return function(c,d,m,p,_,T){const w=c.explicitOrderBy;if(_.length>w.length)throw new ie($.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let V=0;V<_.length;V++){const U=_[V];if(w[V].field.isKeyField()){if(typeof U!="string")throw new ie($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!$p(c)&&U.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const k=c.path.child(Ue.fromString(U));if(!he.isDocumentKey(k))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const H=new he(k);b.push(ba(d,H))}else{const k=yb(m,p,U);b.push(k)}}return new vs(b,T)}(s._query,s.firestore._databaseId,a,e,t,r)}}function W0(s,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new ie($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$p(e)&&t.indexOf("/")!==-1)throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ue.fromString(t));if(!he.isDocumentKey(r))throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ba(s,new he(r))}if(t instanceof _t)return ba(s,t._key);throw new ie($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(t)}.`)}function J0(s,e){if(!Array.isArray(s)||s.length===0)throw new ie($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wb(s,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(s.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Fy{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rs(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[tl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>ft(c.doubleValue));return new Vy(l)}convertGeoPoint(e){return new dd(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=td(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=_i(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ue.fromString(e);ve(uS(r));const a=new ps(r.get(1),r.get(3)),l=new he(r.popFirst(5));return a.isEqual(t)||Rt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class gN extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ei=class extends fc{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Yu=class extends Ei{data(e={}){return super.data(e)}},ws=class{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ta(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yu(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Yu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ta(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Yu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ta(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:pN(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function pN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function Sb(s,e){return s instanceof Ei&&e instanceof Ei?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ws&&e instanceof ws&&s._firestore===e._firestore&&hb(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(s){s=Ke(s,_t);const e=Ke(s.firestore,Dt);return eb(hn(e),s._key).then(t=>Gy(e,s,t))}class Ba extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function _N(s){s=Ke(s,_t);const e=Ke(s.firestore,Dt),t=hn(e),r=new Ba(e);return B2(t,s._key).then(a=>new Ei(e,r,s._key,a,new Ta(a!==null&&a.hasLocalMutations,!0),s.converter))}function vN(s){s=Ke(s,_t);const e=Ke(s.firestore,Dt);return eb(hn(e),s._key,{source:"server"}).then(t=>Gy(e,s,t))}function EN(s){s=Ke(s,wn);const e=Ke(s.firestore,Dt),t=hn(e),r=new Ba(e);return Tb(s._query),tb(t,s._query).then(a=>new ws(e,r,s,a))}function TN(s){s=Ke(s,wn);const e=Ke(s.firestore,Dt),t=hn(e),r=new Ba(e);return z2(t,s._query).then(a=>new ws(e,r,s,a))}function AN(s){s=Ke(s,wn);const e=Ke(s.firestore,Dt),t=hn(e),r=new Ba(e);return tb(t,s._query,{source:"server"}).then(a=>new ws(e,r,s,a))}function eA(s,e,t){s=Ke(s,_t);const r=Ke(s.firestore,Dt),a=Td(s.converter,e,t);return Nc(r,[gd(ka(r),"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,mt.none())])}function tA(s,e,t,...r){s=Ke(s,_t);const a=Ke(s.firestore,Dt),l=ka(a);let c;return c=typeof(e=Pt(e))=="string"||e instanceof As?ky(l,"updateDoc",s._key,e,t,r):Ly(l,"updateDoc",s._key,e),Nc(a,[c.toMutation(s._key,mt.exists(!0))])}function wN(s){return Nc(Ke(s.firestore,Dt),[new vl(s._key,mt.none())])}function SN(s,e){const t=Ke(s.firestore,Dt),r=Hf(s),a=Td(s.converter,e);return Nc(t,[gd(ka(s.firestore),"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function bb(s,...e){var t,r,a;s=Pt(s);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ep(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ep(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(s instanceof _t)p=Ke(s.firestore,Dt),_=yl(s._key.path),m={next:T=>{e[c]&&e[c](Gy(p,s,T))},error:e[c+1],complete:e[c+2]};else{const T=Ke(s,wn);p=Ke(T.firestore,Dt),_=T._query;const w=new Ba(p);m={next:b=>{e[c]&&e[c](new ws(p,w,T,b))},error:e[c+1],complete:e[c+2]},Tb(s._query)}return function(w,b,V,U){const k=new cd(U),H=new Ty(b,k,V);return w.asyncQueue.enqueueAndForget(async()=>_y(await fl(w),H)),()=>{k.su(),w.asyncQueue.enqueueAndForget(async()=>vy(await fl(w),H))}}(hn(p),_,d,m)}function bN(s,e){return q2(hn(s=Ke(s,Dt)),Ep(e)?e:{next:e})}function Nc(s,e){return function(r,a){const l=new nn;return r.asyncQueue.enqueueAndForget(async()=>m2(await xy(r),a,l)),l.promise}(hn(s),e)}function Gy(s,e,t){const r=t.docs.get(e._key),a=new Ba(s);return new Ei(s,a,e._key,r,new Ta(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IN=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ka(e)}set(e,t,r){this._verifyNotCommitted();const a=os(e,this._firestore),l=Td(a.converter,t,r),c=gd(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,mt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=os(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof As?ky(this._dataReader,"WriteBatch.update",l._key,t,r,a):Ly(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=os(e,this._firestore);return this._mutations=this._mutations.concat(new vl(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function os(s,e){if((s=Pt(s)).firestore!==e)throw new ie($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ka(e)}get(e){const t=os(e,this._firestore),r=new gN(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return ye();const l=a[0];if(l.isFoundDocument())return new fc(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new fc(this._firestore,r,t._key,null,t.converter);throw ye()})}set(e,t,r){const a=os(e,this._firestore),l=Td(a.converter,t,r),c=gd(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=os(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof As?ky(this._dataReader,"Transaction.update",l._key,t,r,a):Ly(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=os(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xN=class extends DN{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=os(e,this._firestore),r=new Ba(this._firestore);return super.get(e).then(a=>new Ei(this._firestore,r,t._key,a._document,new Ta(!1,!1),t.converter))}};function CN(s,e,t){s=Ke(s,Dt);const r=Object.assign(Object.assign({},RN),t);return function(l){if(l.maxAttempts<1)throw new ie($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,c,d){const m=new nn;return l.asyncQueue.enqueueAndForget(async()=>{const p=await L2(l);new M2(l.asyncQueue,p,d,c,m).Iu()}),m.promise}(hn(s),a=>e(new xN(s,a)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return new Cc("deleteField")}function NN(){return new Ny("serverTimestamp")}function ON(...s){return new Oy("arrayUnion",s)}function MN(...s){return new My("arrayRemove",s)}function PN(s){return new Py("increment",s)}(function(e,t=!0){(function(a){pl=a})(Mp),$o(new Sa("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Dt(new xx(r.getProvider("auth-internal")),new Nx(c,r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),gi(NT,OT,e),gi(NT,OT,"esm2017")})();const LN="@firebase/firestore-compat",kN="0.3.45";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function rA(){if(!fC())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class dc{constructor(e){this._delegate=e}static fromBase64String(e){return rA(),new dc(Br.fromBase64String(e))}static fromUint8Array(e){return nA(),new dc(Br.fromUint8Array(e))}toBase64(){return rA(),this._delegate.toBase64()}toUint8Array(){return nA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(s){return UN(s,["next","error","complete"])}function UN(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{enableIndexedDbPersistence(e,t){return $2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Y2(e._delegate)}clearIndexedDbPersistence(e){return X2(e._delegate)}}class Rb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ps||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){G2(this._delegate,e,t,r)}enableNetwork(){return W2(this._delegate)}disableNetwork(){return J2(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Z2(this._delegate)}onSnapshotsInSync(e){return bN(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dl(this,ub(this._delegate,e))}catch(t){throw Tn(t,"collection()","Firestore.collection()")}}doc(e){try{return new tr(this,Hf(this._delegate,e))}catch(t){throw Tn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new En(this,H2(this._delegate,e))}catch(t){throw Tn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return CN(this._delegate,t=>e(new Ib(this,t)))}batch(){return hn(this._delegate),new Db(new IN(this._delegate,e=>Nc(this._delegate,e)))}loadBundle(e){return eN(this._delegate,e)}namedQuery(e){return tN(this._delegate,e).then(t=>t?new En(this,t):null)}}class Ad extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(new Br(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tr.forKey(t,this.firestore,null)}}function zN(s){bx(s)}class Ib{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}get(e){const t=Aa(e);return this._delegate.get(t).then(r=>new mc(this._firestore,new Ei(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Aa(e);return r?(Hy("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Aa(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Aa(e);return this._delegate.delete(t),this}}class Db{constructor(e){this._delegate=e}set(e,t,r){const a=Aa(e);return r?(Hy("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Aa(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Aa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Oa{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Yu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Oa.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Oa(e,new Ad(e),t),a.set(t,l)),l}}Oa.INSTANCES=new WeakMap;class tr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tr(t,new _t(t._delegate,r,new he(e)))}static forKey(e,t,r){return new tr(t,new _t(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dl(this.firestore,ub(this._delegate,e))}catch(t){throw Tn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pt(e),e instanceof _t?cb(this._delegate,e):!1}set(e,t){t=Hy("DocumentReference.set",t);try{return t?eA(this._delegate,e,t):eA(this._delegate,e)}catch(r){throw Tn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?tA(this._delegate,e):tA(this._delegate,e,t,...r)}catch(a){throw Tn(a,"updateDoc()","DocumentReference.update()")}}delete(){return wN(this._delegate)}onSnapshot(...e){const t=xb(e),r=Cb(e,a=>new mc(this.firestore,new Ei(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return bb(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=_N(this._delegate):(e==null?void 0:e.source)==="server"?t=vN(this._delegate):t=yN(this._delegate),t.then(r=>new mc(this.firestore,new Ei(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new tr(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Tn(s,e,t){return s.message=s.message.replace(e,t),s}function xb(s){for(const e of s)if(typeof e=="object"&&!Ap(e))return e;return{}}function Cb(s,e){var t,r;let a;return Ap(s[0])?a=s[0]:Ap(s[1])?a=s[1]:typeof s[0]=="function"?a={next:s[0],error:s[1],complete:s[2]}:a={next:s[1],error:s[2],complete:s[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(r=a.complete)===null||r===void 0?void 0:r.bind(a)}}class mc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Sb(this._delegate,e._delegate)}}class gc extends mc{data(e){const t=this._delegate.data(e);return this._delegate._converter||Rx(t!==void 0),t}}class En{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ad(e)}where(e,t,r){try{return new En(this.firestore,is(this._delegate,oN(e,t,r)))}catch(a){throw Tn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new En(this.firestore,is(this._delegate,lN(e,t)))}catch(r){throw Tn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new En(this.firestore,is(this._delegate,uN(e)))}catch(t){throw Tn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new En(this.firestore,is(this._delegate,cN(e)))}catch(t){throw Tn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new En(this.firestore,is(this._delegate,hN(...e)))}catch(t){throw Tn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new En(this.firestore,is(this._delegate,fN(...e)))}catch(t){throw Tn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new En(this.firestore,is(this._delegate,dN(...e)))}catch(t){throw Tn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new En(this.firestore,is(this._delegate,mN(...e)))}catch(t){throw Tn(t,"endAt()","Query.endAt()")}}isEqual(e){return hb(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=TN(this._delegate):(e==null?void 0:e.source)==="server"?t=AN(this._delegate):t=EN(this._delegate),t.then(r=>new wp(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xb(e),r=Cb(e,a=>new wp(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return bb(this._delegate,t,r)}withConverter(e){return new En(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class qN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new En(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gc(this._firestore,r))})}isEqual(e){return Sb(this._delegate,e._delegate)}}class dl extends En{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tr(this.firestore,e):null}doc(e){try{return e===void 0?new tr(this.firestore,Hf(this._delegate)):new tr(this.firestore,Hf(this._delegate,e))}catch(t){throw Tn(t,"doc()","CollectionReference.doc()")}}add(e){return SN(this._delegate,e).then(t=>new tr(this.firestore,t))}isEqual(e){return cb(this._delegate,e._delegate)}withConverter(e){return new dl(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Aa(s){return Ke(s,_t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(...e){this._delegate=new As(...e)}static documentId(){return new Qy(dt.keyField().canonicalString())}isEqual(e){return e=Pt(e),e instanceof As?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{static serverTimestamp(){const e=NN();return e._methodName="FieldValue.serverTimestamp",new va(e)}static delete(){const e=VN();return e._methodName="FieldValue.delete",new va(e)}static arrayUnion(...e){const t=ON(...e);return t._methodName="FieldValue.arrayUnion",new va(t)}static arrayRemove(...e){const t=MN(...e);return t._methodName="FieldValue.arrayRemove",new va(t)}static increment(e){const t=PN(e);return t._methodName="FieldValue.increment",new va(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={Firestore:Rb,GeoPoint:dd,Timestamp:gt,Blob:dc,Transaction:Ib,WriteBatch:Db,DocumentReference:tr,DocumentSnapshot:mc,Query:En,QueryDocumentSnapshot:gc,QuerySnapshot:wp,CollectionReference:dl,FieldPath:Qy,FieldValue:va,setLogLevel:zN,CACHE_SIZE_UNLIMITED:K2};function FN(s,e){s.INTERNAL.registerComponent(new Sa("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},jN)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(s){FN(s,(e,t)=>new Rb(e,t,new BN)),s.registerVersion(LN,kN)}GN(vn);const HN={apiKey:"AIzaSyDjyu81M14bElYWxo4WnL6nE9T1GjlIRMo",authDomain:"clicker-f2993.firebaseapp.com",projectId:"clicker-f2993",storageBucket:"clicker-f2993.firebasestorage.app",messagingSenderId:"844399763080",appId:"1:844399763080:web:7a0b9159b27cb33bac893d"};let iA;function QN(){const[s,e]=G.useState(!1);return G.useEffect(()=>{vn.apps.length||(vn.initializeApp(HN),iA=vn.firestore()),e(!0)},[]),{db:iA,initialized:s}}const KN="/clicker/assets/logo-BS-hctJj.png",jg=1e3,$N=1,YN=1e3,XN=1e4;function Oc({db:s,userId:e,initialized:t}){const[r,a]=G.useState(!0),[l,c]=G.useState(0),[d,m]=G.useState(0),[p,_]=G.useState(1),[T,w]=G.useState(""),[b,V]=G.useState(jg),[U,k]=G.useState(1),[H,re]=G.useState(1),[Z,pe]=G.useState(!1),[le,ge]=G.useState(!1),[C,R]=G.useState([]),[I,N]=G.useState(null),M=`mainStats_${e}`,L=e&&s&&t,x=G.useRef(Date.now()),Re=de=>s.collection("users").doc(String(e)).collection("stats").doc(de),Ce=()=>s.collection("users").doc(String(e)),W=de=>jg*de,ue=de=>$N*de,Ee=de=>1e3*Math.pow(2,de);G.useEffect(()=>{if(!L)return;(async()=>{try{const ce=localStorage.getItem(M);if(ce){const vt=JSON.parse(ce);c(vt.count??0),m(vt.totalCount??0),_(vt.multiplier??1),w(vt.username??""),V(vt.energy??jg),k(vt.maxEnergyLevel??1),re(vt.regenSpeedLevel??1),N(vt.selectedSkin??null)}const[Pe,Oe,xt,Sn,rn,rr,ir,qr]=await Promise.all([Re("count").get(),Re("multiplier").get(),Re("totalCount").get(),Re("username").get(),Re("energy").get(),Re("maxEnergyLevel").get(),Re("regenSpeedLevel").get(),Ce().get()]),Ri=Pe.exists?Pe.data().value:0,xs=Oe.exists?Oe.data().value:1,fn=xt.exists?xt.data().value:0,Cs=Sn.exists?Sn.data().value:"",fr=rr.exists?rr.data().value:1,dr=ir.exists?ir.data().value:1;let bn=W(fr);const Sl=ue(dr);if(rn.exists){const vt=rn.data(),Vs=(vt==null?void 0:vt.value)??bn;if((vt==null?void 0:vt.lastUpdated)instanceof vn.firestore.Timestamp){const ut=vt.lastUpdated.toMillis(),$e=Date.now(),mn=Math.floor(($e-ut)/1e3);bn=Math.min(W(fr),Vs+mn*Sl)}else bn=Vs}c(Ri),m(fn),_(xs),V(bn),k(fr),re(dr),Cs?w(Cs):pe(!0);const dn=vn.firestore.FieldValue.serverTimestamp();qr.exists||await Ce().set({createdAt:dn},{merge:!0}),Pe.exists||await Re("count").set({value:0,createdAt:dn}),Oe.exists||await Re("multiplier").set({value:1,createdAt:dn}),xt.exists||await Re("totalCount").set({value:0,createdAt:dn}),rn.exists||await Re("energy").set({value:bn,lastUpdated:dn,createdAt:dn}),rr.exists||await Re("maxEnergyLevel").set({value:1,createdAt:dn}),ir.exists||await Re("regenSpeedLevel").set({value:1,createdAt:dn}),localStorage.setItem(M,JSON.stringify({count:Ri,totalCount:fn,multiplier:xs,username:Cs,energy:bn,maxEnergyLevel:fr,regenSpeedLevel:dr,selectedSkin:I}))}catch(ce){console.error("[STATS]  :",ce)}finally{a(!1)}})()},[L]),G.useEffect(()=>{if(!L)return;const de=setInterval(()=>{V(ce=>{const Pe=W(U),Oe=ue(H);if(ce>=Pe)return ce;const xt=Math.min(Pe,ce+Oe),Sn=Date.now();if(Sn-x.current>=XN){const rn=vn.firestore.FieldValue.serverTimestamp();Re("energy").set({value:xt,updatedAt:rn,lastUpdated:rn},{merge:!0}),x.current=Sn,localStorage.setItem(M,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:xt,maxEnergyLevel:U,regenSpeedLevel:H,selectedSkin:I}))}return xt})},YN);return()=>clearInterval(de)},[L,l,d,p,T,U,H,I]);const He=()=>{b<=0||(V(de=>Math.max(0,de-1)),c(de=>de+p),m(de=>de+p),ge(!0))};G.useEffect(()=>{if(!le||!L)return;const de=setTimeout(()=>{const ce=vn.firestore.FieldValue.serverTimestamp(),Pe=vn.firestore.Timestamp.now();Promise.all([Re("count").set({value:l,updatedAt:ce},{merge:!0}),Re("totalCount").set({value:d,updatedAt:ce},{merge:!0}),Re("energy").set({value:b,updatedAt:ce,lastUpdated:Pe},{merge:!0})]).then(()=>ge(!1)),localStorage.setItem(M,JSON.stringify({count:l,totalCount:d,multiplier:p,username:T,energy:b,maxEnergyLevel:U,regenSpeedLevel:H,selectedSkin:I}))},200);return()=>clearTimeout(de)},[le,l,d,b,L,I]),G.useEffect(()=>{if(!L)return;const de=localStorage.getItem(M);if(de){const ce=JSON.parse(de);localStorage.setItem(M,JSON.stringify({...ce,selectedSkin:I}))}},[I,L]);const O=async de=>{if(!de.trim())return;const ce=vn.firestore.FieldValue.serverTimestamp();await Re("username").set({value:de,updatedAt:ce,createdAt:ce}),w(de),pe(!1)},ne=async()=>{const de=Ee(U);if(l<de)return;const ce=U+1,Pe=vn.firestore.FieldValue.serverTimestamp();await Re("maxEnergyLevel").set({value:ce,updatedAt:Pe},{merge:!0}),c(Oe=>Oe-de),k(ce)},fe=async()=>{const de=Ee(H);if(l<de)return;const ce=H+1,Pe=vn.firestore.FieldValue.serverTimestamp();await Re("regenSpeedLevel").set({value:ce,updatedAt:Pe},{merge:!0}),c(Oe=>Oe-de),re(ce)};return G.useEffect(()=>{if(!L)return;(async()=>{try{const ce=await Re("ownedSkins").get(),Pe=await Re("selectedSkin").get();R(ce.exists?ce.data().value||[]:[]),N(Pe.exists&&Pe.data().value||null)}catch(ce){console.error("[STORE]    :",ce)}})()},[L]),{loading:r,count:l,totalCount:d,multiplier:p,username:T,showUsernameForm:Z,setShowUsernameForm:pe,increment:He,saveUsername:O,energy:b,setEnergy:V,maxEnergyLevel:U,regenSpeedLevel:H,upgradeMaxEnergy:ne,upgradeRegenSpeed:fe,getUpgradeCost:Ee,setMultiplier:_,setMaxEnergyLevel:k,setRegenSpeedLevel:re,setCount:c,ownedSkins:C,selectedSkin:I,buySkin:async(de,ce)=>{if(C.includes(de)||l<ce)return;const Pe=[...C,de],Oe=vn.firestore.FieldValue.serverTimestamp();await Re("ownedSkins").set({value:Pe,updatedAt:Oe},{merge:!0}),R(Pe),c(xt=>xt-ce)},selectSkin:async de=>{if(!C.includes(de))return;const ce=vn.firestore.FieldValue.serverTimestamp();await Re("selectedSkin").set({value:de,updatedAt:ce},{merge:!0}),N(de)}}}const Sp="/clicker/assets/click-BFkDtXEp.png",sA="/clicker/assets/up3-pWWDwmzr.png",fs="/clicker/assets/up1-DIChvCd6.png",ZN={default:sA,fire:sA,ice:fs,gold:fs};function WN(s){return new Promise(e=>{const t=ZN[s]||Sp,r=localStorage.getItem(`clickImage_${s}`);if(r)e(r);else{const a=new Image;a.src=t,a.onload=()=>e(a.src),a.onerror=()=>e(Sp)}})}function JN({userId:s,db:e,initialized:t}){const[r,a]=G.useState(""),[l,c]=G.useState(null),[d,m]=G.useState(!1),p=G.useMemo(()=>{try{const ge=localStorage.getItem(`mainStats_${s}`);if(ge)return JSON.parse(ge).selectedSkin||"default"}catch{}return"default"},[s]),{count:_,multiplier:T,username:w,showUsernameForm:b,increment:V,saveUsername:U,energy:k,setEnergy:H,maxEnergyLevel:re,selectedSkin:Z}=Oc({db:e,userId:s,initialized:t});G.useEffect(()=>{(async()=>{if(!localStorage.getItem("clickImage_default")){const I=await(await fetch(Sp)).blob(),N=new FileReader;N.onloadend=()=>{localStorage.setItem("clickImage_default",N.result)},N.readAsDataURL(I)}})()},[]),G.useEffect(()=>{WN(Z||p||"default").then(C=>{c(C),m(!0)})},[Z,p]);const pe=ge=>{const C=T??1;if(k>=C){V(),H(M=>Math.max(0,M-C));const R=ge.currentTarget.getBoundingClientRect(),I=ge.clientX-R.left,N=ge.clientY-R.top;le(`+${C}`,I,N)}},le=(ge,C,R)=>{const I=document.getElementById("floating-numbers-container");if(!I)return;const N=document.createElement("div");N.className="floating-number",N.textContent=ge;const M=Math.random()*30-15,L=Math.random()*30-15;N.style.left=`${C+M}px`,N.style.top=`${R+L}px`,I.appendChild(N),setTimeout(()=>N.remove(),1e3)};return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"header",children:[X.jsx("div",{className:"header-left"}),X.jsx("div",{className:"header-center",children:w&&d?w:""}),X.jsx("div",{className:"header-right",children:X.jsx(qn,{to:"/settings",className:"settings-button",children:""})})]}),X.jsxs("div",{className:"wrapper",children:[b&&X.jsx("div",{className:"modal-backdrop",children:X.jsxs("div",{className:"modal",children:[X.jsx("h2",{children:"  "}),X.jsx("input",{type:"text",value:r,onChange:ge=>a(ge.target.value),className:"username-input",placeholder:" "}),X.jsx("button",{className:"menu-button",onClick:()=>U(r),children:""})]})}),X.jsx("div",{className:"logo-image-wrapper",children:X.jsx("img",{src:KN,alt:"TapStorm",className:"main-title-img"})}),X.jsxs("div",{className:"clicker-container",children:[X.jsxs("p",{className:"clicker-text",children:[": ",X.jsx("strong",{children:_??0})]}),d&&X.jsxs("div",{className:"clicker-wrapper",children:[X.jsx("div",{className:`clicker-img ${k===0?"disabled":""}`,onClick:k>0?pe:void 0,onContextMenu:ge=>ge.preventDefault(),style:{backgroundImage:`url(${l})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"160px",height:"160px",opacity:k===0?.5:1,cursor:k===0?"not-allowed":"pointer",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",transition:"transform 0.1s ease"},role:"button","aria-disabled":k===0}),X.jsx("div",{id:"floating-numbers-container",className:"floating-container"})]}),X.jsx("p",{className:"clicker-text",children:X.jsxs("strong",{children:[k??0,"/",(re??1)*1e3,""]})})]}),X.jsxs("div",{className:"button-group fade-in",children:[X.jsx(qn,{to:"/upgrade",children:X.jsx("button",{className:"menu-button",children:" "})}),X.jsx(qn,{to:"/shop",children:X.jsx("button",{className:"menu-button",children:" "})}),X.jsx(qn,{to:"/leaderboard",children:X.jsx("button",{className:"menu-button",children:" "})})]})]})]})}const eO="/clicker/assets/upgrade-CJRUvsqd.png";function tO({userId:s,db:e,initialized:t}){const{count:r,multiplier:a,setCount:l,setMultiplier:c,maxEnergyLevel:d,regenSpeedLevel:m,setMaxEnergyLevel:p,setRegenSpeedLevel:_}=Oc({db:e,userId:s,initialized:t}),[T,w]=G.useState(!1),[b,V]=G.useState(r),[U,k]=G.useState(a),[H,re]=G.useState(d),[Z,pe]=G.useState(m);G.useEffect(()=>V(r),[r]),G.useEffect(()=>k(a),[a]),G.useEffect(()=>re(d),[d]),G.useEffect(()=>pe(m),[m]);const le=(M,L)=>Math.floor(L*Math.pow(M,2)),ge=le(U||1,100),C=le(H||1,100),R=le(Z||2,100),I=async M=>{const x={multiplier:{level:U,cost:ge,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("multiplier").set({value:Ce,updatedAt:new Date},{merge:!0}),c(Ce),k(Ce)}},maxEnergy:{level:H,cost:C,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("maxEnergyLevel").set({value:Ce,updatedAt:new Date},{merge:!0}),p(Ce),re(Ce)}},regenSpeed:{level:Z,cost:R,onUpgrade:async Ce=>{await e.collection("users").doc(String(s)).collection("stats").doc("regenSpeedLevel").set({value:Ce,updatedAt:new Date},{merge:!0}),_(Ce),pe(Ce)}}}[M],Re=x.cost;if(b>=Re){const Ce=x.level+1;await Promise.all([e.collection("users").doc(String(s)).collection("stats").doc("count").set({value:b-Re,updatedAt:new Date},{merge:!0}),x.onUpgrade(Ce)]),l(b-Re),V(b-Re)}else w(!0)},N=[{type:"multiplier",title:" ",level:U,cost:ge,bg:fs,desc:`: x${U}
 x${U+1}  ${ge} `},{type:"maxEnergy",title:". ",level:H,cost:C,bg:fs,desc:`: ${H}
  ${H+1}  ${C} `},{type:"regenSpeed",title:"",level:Z,cost:R,bg:fs,desc:`: ${Z}
  ${Z+1}  ${R} `}];return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"header",children:[X.jsx("div",{className:"header-left",children:X.jsx(qn,{to:"/",className:"header-button",children:""})}),X.jsx("div",{className:"header-center"}),X.jsx("div",{className:"header-right",children:X.jsx(qn,{to:"/settings",className:"settings-button",children:""})})]}),X.jsxs("div",{className:"wrapper",children:[X.jsx("div",{className:"logo-image-wrapper",children:X.jsx("img",{src:eO,alt:"TapStorm",className:"main-title-img"})}),X.jsxs("p",{className:"clicker-text",children:[": ",X.jsx("strong",{children:b??"..."})]}),X.jsx("div",{className:"upgrade-grid",children:N.map(({type:M,title:L,desc:x,bg:Re})=>X.jsxs("div",{className:"upgrade-card",onClick:()=>I(M),children:[X.jsx("img",{src:Re,alt:L,className:"upgrade-card-img"}),X.jsx("p",{className:"upgrade-title",children:L}),x.split(`
`).map((Ce,W)=>X.jsx("p",{children:Ce},W))]},M))})]}),T&&X.jsx("div",{className:"modal-backdrop",children:X.jsxs("div",{className:"modal",children:[X.jsx("h3",{children:" !"}),X.jsx("button",{className:"menu-button",onClick:()=>w(!1),children:""})]})})]})}const nO="/clicker/assets/leaderboard-eL_LwdNf.png";function rO({userId:s,db:e,initialized:t}){const[r,a]=G.useState([]),[l,c]=G.useState(!0),d=e&&t;Oc({db:e,userId:s,initialized:t}),G.useEffect(()=>{if(!d)return;(async()=>{try{const _=await e.collection("users").get(),T=[];for(const w of _.docs){const b=e.collection("users").doc(w.id).collection("stats"),V=await b.get(),U={};V.forEach(H=>{U[H.id]=H.data().value});const k=[];if(U.username===void 0){const H=`-${w.id.slice(0,4)}`;k.push(b.doc("username").set({value:H})),U.username=H}U.totalCount===void 0&&(k.push(b.doc("totalCount").set({value:0})),U.totalCount=0),U.multiplier===void 0&&(k.push(b.doc("multiplier").set({value:1})),U.multiplier=1),k.length>0&&await Promise.all(k),T.push({userId:w.id,username:U.username,totalCount:U.totalCount,multiplier:U.multiplier})}T.sort((w,b)=>b.totalCount-w.totalCount),a(T)}catch(_){console.error("[]  :",_)}finally{c(!1)}})()},[d]);let m={};if(l)m={top10:Array.from({length:10},(p,_)=>({userId:`loading-${_}`,username:"...",totalCount:"...",multiplier:"...",place:_+1,isCurrentUser:!1})),currentUser:null};else{const p=r.map((b,V)=>({...b,place:V+1,isCurrentUser:b.userId==s})),_=p.slice(0,10),w=_.some(b=>b.userId==s)?null:p.find(b=>b.userId==s);m={top10:_,currentUser:w}}return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"header",children:[X.jsx("div",{className:"header-left",children:X.jsx(qn,{to:"/",className:"header-button",children:""})}),X.jsx("div",{className:"header-right",children:X.jsx(qn,{to:"/settings",className:"settings-button",children:""})})]}),X.jsx("div",{className:"wrapper",children:X.jsxs("div",{className:"leaderboard",children:[X.jsx("div",{className:"leaderboard-image-wrapper",children:X.jsx("img",{src:nO,alt:" ",className:"leaderboard-title-img"})}),X.jsxs("div",{className:"leaderboard-header",children:[X.jsx("span",{children:""}),X.jsx("span",{children:""}),X.jsx("span",{children:""})]}),X.jsxs("div",{className:"leaderboard-container",children:[m.top10.map((p,_)=>X.jsxs("div",{className:`leaderboard-row ${p.place===1?"gold":p.place===2?"silver":p.place===3?"bronze":""} ${p.isCurrentUser?"highlight-row":""}`,children:[X.jsx("span",{children:p.place}),X.jsx("span",{children:p.username}),X.jsx("span",{children:p.totalCount})]},`${p.userId}-${_}`)),m.currentUser&&X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"leaderboard-divider"}),X.jsxs("div",{className:"leaderboard-row highlight-row",children:[X.jsx("span",{children:m.currentUser.place}),X.jsx("span",{children:m.currentUser.username}),X.jsx("span",{children:m.currentUser.totalCount})]},`${m.currentUser.userId}-current`)]})]})]})})]})}const iO="/clicker/assets/Shop-DMGheY5Z.png";function sO({db:s,userId:e,initialized:t}){const{count:r,setCount:a}=Oc({db:s,userId:e,initialized:t}),[l,c]=G.useState(null),[d,m]=G.useState([]),[p,_]=G.useState(!1),T=[{id:"fire",title:"",image:fs,cost:500},{id:"ice",title:"",image:fs,cost:800},{id:"gold",title:"",image:fs,cost:800}];G.useEffect(()=>{(async()=>{const V=await s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").get(),U=await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").get();V.exists&&m(V.data().value||[]),U.exists&&c(U.data().value)})()},[s,e]);const w=async b=>{if(d.includes(b.id)){await s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:b.id,updatedAt:new Date},{merge:!0}),c(b.id);return}if(r>=b.cost){const V=r-b.cost,U=[...d,b.id];await Promise.all([s.collection("users").doc(String(e)).collection("stats").doc("count").set({value:V,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("ownedSkins").set({value:U,updatedAt:new Date},{merge:!0}),s.collection("users").doc(String(e)).collection("stats").doc("selectedSkin").set({value:b.id,updatedAt:new Date},{merge:!0})]),a(V),m(U),c(b.id)}else _(!0)};return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"header",children:[X.jsx("div",{className:"header-left",children:X.jsx(qn,{to:"/",className:"header-button",children:""})}),X.jsx("div",{className:"header-right",children:X.jsx(qn,{to:"/settings",className:"settings-button",children:""})})]}),X.jsxs("div",{className:"wrapper",children:[X.jsx("div",{className:"logo-image-wrapper",children:X.jsx("img",{src:iO,alt:"",className:"shop-title-img"})}),X.jsxs("p",{className:"shop-balance",children:[": ",X.jsx("strong",{children:r})]}),X.jsx("div",{className:"shop-grid",children:T.map(b=>X.jsxs("div",{className:`shop-card ${l===b.id?"selected":""}`,onClick:()=>w(b),children:[X.jsx("img",{src:b.image,alt:b.title,className:"shop-card-img"}),X.jsx("p",{className:"shop-card-title",children:b.title}),d.includes(b.id)?X.jsx("p",{className:"shop-owned",children:l===b.id?" ":",  "}):X.jsxs("p",{className:"shop-cost",children:["  ",b.cost," "]})]},b.id))})]}),p&&X.jsx("div",{className:"modal-backdrop",children:X.jsxs("div",{className:"modal",children:[X.jsx("h3",{children:" !"}),X.jsx("button",{className:"menu-button",onClick:()=>_(!1),children:""})]})})]})}function aO({db:s,userId:e,initialized:t}){const{username:r,showUsernameForm:a,setShowUsernameForm:l,saveUsername:c}=Oc({db:s,userId:e,initialized:t}),[d,m]=G.useState(r),p=()=>{m(r),l(!0)};return X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"header",children:X.jsx("div",{className:"header-left",children:X.jsx(qn,{to:"/",className:"header-button",children:""})})}),X.jsxs("div",{className:"wrapper",children:[X.jsx("h2",{className:"clicker-text",children:" "}),X.jsx("div",{className:"settings-section",children:X.jsxs("p",{className:"clicker-text",children:["ID: ",X.jsx("strong",{children:e})]})}),X.jsx("div",{className:"settings-section",children:X.jsx("button",{className:"menu-button",onClick:p,children:" "})}),a&&X.jsx("div",{className:"modal-backdrop",children:X.jsxs("div",{className:"modal",children:[X.jsx("h2",{children:"  "}),X.jsx("input",{type:"text",value:d,onChange:_=>m(_.target.value),className:"username-input",placeholder:" "}),X.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[X.jsx("button",{className:"menu-button",onClick:()=>c(d),children:""}),X.jsx("button",{className:"menu-button cancel",onClick:()=>l(!1),style:{marginLeft:10},children:""})]})]})})]})]})}function oO(){const s=k1(),{initialized:e,db:t}=QN();return s&&e&&t?X.jsx(I1,{basename:"/clicker",children:X.jsxs(r1,{children:[X.jsx(ko,{path:"/",element:X.jsx(JN,{userId:s,db:t,initialized:e})}),X.jsx(ko,{path:"/upgrade",element:X.jsx(tO,{userId:s,db:t,initialized:e})}),X.jsx(ko,{path:"/leaderboard",element:X.jsx(rO,{userId:s,db:t,initialized:e})}),X.jsx(ko,{path:"/shop",element:X.jsx(sO,{userId:s,db:t,initialized:e})}),X.jsx(ko,{path:"/settings",element:X.jsx(aO,{db:t,userId:s,initialized:e})})]})}):X.jsx("div",{className:"wrapper",children:X.jsx("p",{children:""})})}fI.createRoot(document.getElementById("root")).render(X.jsx(iI.StrictMode,{children:X.jsx(oO,{})}));
